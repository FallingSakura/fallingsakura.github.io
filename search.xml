<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>CSS Note</title>
    <url>/d51d3626.html</url>
    <content><![CDATA[<h1 id="Basic"><a href="#Basic" class="headerlink" title="Basic"></a>Basic</h1><h2 id="ç‰¹æ®Šå…³é”®å­—"><a href="#ç‰¹æ®Šå…³é”®å­—" class="headerlink" title="ç‰¹æ®Šå…³é”®å­—"></a>ç‰¹æ®Šå…³é”®å­—</h2><p>å¦‚ <code>inherit</code> <code>initial</code> <code>unset</code> è¿™ä¸‰ä¸ªå±æ€§å€¼ï¼Œåœ¨ä»»ä½•å±æ€§ä¸­å‡å¯ç”¨ã€‚</p>
<h2 id="é€‰æ‹©å™¨"><a href="#é€‰æ‹©å™¨" class="headerlink" title="é€‰æ‹©å™¨"></a>é€‰æ‹©å™¨</h2><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ  <code>class</code> æˆ–è€… <code>id</code> çš„æ–¹å¼æ¥é€‰æ‹©ç‰¹å®šçš„å…ƒç´ ä¸ºå®ƒæ·»åŠ ç‰¹å®šçš„æ ·å¼ã€‚</p>
<div class="code-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.class</span> &#123;</span><br><span class="line">	<span class="comment">/* .class to choose a class */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#id</span> &#123;</span><br><span class="line">	<span class="comment">/* #id to choose an id */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="æ ¹é€‰æ‹©å™¨"><a href="#æ ¹é€‰æ‹©å™¨" class="headerlink" title="æ ¹é€‰æ‹©å™¨"></a>æ ¹é€‰æ‹©å™¨</h3><p><strong><code>:root</code></strong></p>
<p>åœ¨ HTML æ–‡ä»¶ä¸­é€šå¸¸æ˜¯ <code>&lt;html&gt;</code> å…ƒç´ ï¼Œå…·æœ‰å…¨å±€æ€§å’Œé«˜ä¼˜å…ˆçº§ã€‚</p>
<p>é€‚åˆå®šä¹‰ CSS å˜é‡ã€‚</p>
<p>ä¸ºä»€ä¹ˆä¸ä½¿ç”¨ <code>*</code> æ¥å®šä¹‰å˜é‡å‘¢ï¼Ÿ</p>
<ul>
<li><strong>æ€§èƒ½é—®é¢˜</strong>ï¼šé€šé…é€‰æ‹©å™¨ä¼šåŒ¹é…æ–‡æ¡£ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œå¯èƒ½ä¼šå½±å“æ€§èƒ½ï¼Œå°¤å…¶æ˜¯åœ¨å¤§å‹æ–‡æ¡£ä¸­ã€‚</li>
<li><strong>ä¼˜å…ˆçº§è¾ƒä½</strong>ï¼šé€šé…é€‰æ‹©å™¨çš„ä¼˜å…ˆçº§è¾ƒä½ï¼Œå®šä¹‰åœ¨å…¶ä¸­çš„å˜é‡å¯èƒ½ä¼šè¢«å…¶ä»–æ ·å¼è¦†ç›–ã€‚</li>
<li><strong>è¯­ä¹‰ä¸æ˜ç¡®</strong>ï¼šä½¿ç”¨ <code>*</code> æ¥å®šä¹‰å…¨å±€å˜é‡ä¸å¤Ÿç›´è§‚ï¼Œæ— æ³•æ¸…æ¥šè¡¨è¾¾è¿™äº›å˜é‡æ˜¯å…¨å±€çš„ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ··æ·†ã€‚</li>
</ul>
<h2 id="ç±»"><a href="#ç±»" class="headerlink" title="ç±»"></a>ç±»</h2><p>ä¸€ä¸ªå…ƒç´ å¯ä»¥æœ‰å¤šä¸ªç±»åï¼Œåœ¨å¼•å·å†…ç”¨ç©ºæ ¼éš”å¼€ã€‚</p>
<p>è¿™æ—¶æˆ‘ä»¬æƒ³é€‰æ‹©æ—¢æ˜¯è¿™ä¸ªå…ƒç´ åŒæ—¶è¿˜æœ‰è¿™ä¸ªç±»åï¼Œé‚£ä¹ˆå¯ä»¥è¿™æ ·å†™ï¼š</p>
<div class="code-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">body</span><span class="selector-class">.class</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>æ³¨æ„è¿™é‡Œä¸¤è€…ä¹‹é—´æ²¡æœ‰ç©ºæ ¼ã€‚</p>
<p>å½“ä¸¤è€…é—´æœ‰ç©ºæ ¼æ—¶ï¼Œä»£è¡¨ <code>.class</code> æ˜¯ <code>body</code> çš„åä»£ä¸­çš„ä¸€ä¸ªç±»ã€‚</p>
<h2 id="è¡¨å•å…ƒç´ "><a href="#è¡¨å•å…ƒç´ " class="headerlink" title="è¡¨å•å…ƒç´ "></a>è¡¨å•å…ƒç´ </h2><p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œè¡¨å•å…ƒç´ çš„é»˜è®¤æ ·å¼ä¼šè¦†ç›–æ‰é»˜è®¤ç»§æ‰¿çš„æ ·å¼ï¼Œéœ€è¦è®¾ç½®ä¸º <code>inherit</code>ã€‚</p>
<h2 id="Var"><a href="#Var" class="headerlink" title="Var"></a>Var</h2><p>CSS å˜é‡ã€‚</p>
<p>å˜é‡ä½¿ç”¨ <code>--</code> å¼€å¤´ï¼Œå¹¶é€šè¿‡ <code>var()</code> å‡½æ•°è°ƒç”¨ã€‚</p>
<p>å¯ä»¥æ·»åŠ é»˜è®¤å€¼ï¼Œå½“è¯¥å˜é‡æœªå®šä¹‰æ—¶ï¼Œä¾¿å¯ä»¥ä½¿ç”¨é»˜è®¤å€¼ã€‚</p>
<div class="code-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--undefined-color, <span class="number">#000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h2 id="Color"><a href="#Color" class="headerlink" title="Color"></a>Color</h2><div class="code-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">color</span>: [color];</span><br></pre></td></tr></table></figure></div>

<p><code>color</code> å¯ä»¥æ˜¯è‰²åï¼Œå¯ä»¥æ˜¯ rgbï¼Œå¯ä»¥æ˜¯ rgbaï¼Œå¯ä»¥æ˜¯åå…­è¿›åˆ¶æ•°ã€‚</p>
<h2 id="Font"><a href="#Font" class="headerlink" title="Font"></a>Font</h2><p>å¯¼å…¥å­—ä½“ã€‚</p>
<div class="code-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">  <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">../fonts/None.ttf</span>);</span><br><span class="line">  <span class="attribute">font-family</span>: None;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><code>url</code> å¡«å†™å­—ä½“æ–‡ä»¶çš„æœ¬åœ°åœ°å€&#x2F;äº‘ç«¯åœ°å€ã€‚</p>
<p>å¯¼å…¥åä¸ºå®ƒè®¾å®šä¸€ä¸ª <code>font-family</code>ï¼ˆå¥½å¬çš„åå­—ï¼‰ï¼Œ</p>
<p>ç„¶åå°±å¯ä»¥è°ƒç”¨å®ƒäº†ã€‚</p>
<h2 id="Margin"><a href="#Margin" class="headerlink" title="Margin"></a>Margin</h2><p>å¤–è¾¹è·ã€‚</p>
<div class="code-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">margin</span>: [length|percentage|auto]</span><br></pre></td></tr></table></figure></div>

<p>å€¼æœ‰å››ä¸ªï¼Œé¡ºåºä¸º<strong>ä¸Šå³ä¸‹å·¦</strong>ï¼Œå½“æŸä½ç½®æ²¡æœ‰æ—¶å°†æŒ‰ç…§å®ƒå¯¹ä½çš„é—´è·åŒæ­¥ã€‚</p>
<p>å¦‚åªæœ‰ä¸¤ä¸ªå€¼æ—¶ï¼Œç¬¬ä¸€ä¸ªä»£è¡¨ä¸Šä¸‹å¤–è¾¹è·ï¼Œç¬¬äºŒä¸ªä»£è¡¨å·¦å³å¤–è¾¹è·ã€‚</p>
<p>ä¸‹å›¾ä¸ºç»å…¸ç›’æ¨¡å‹ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://developer.mozilla.org/zh-CN/docs/Learn/CSS/Building_blocks/The_box_model/box-model.png"
                     
                ></p>
<h2 id="Padding"><a href="#Padding" class="headerlink" title="Padding"></a>Padding</h2><p>å†…è¾¹è·ã€‚</p>
<p>å³å†…å®¹åˆ° <code>border</code> ä¹‹é—´çš„ç©ºé—´ã€‚</p>
<h2 id="Border"><a href="#Border" class="headerlink" title="Border"></a>Border</h2><p>è¾¹æ¡†ï¼Œå…¶å¤–æ˜¯ <code>margin</code> å…¶å†…æ˜¯ <code>padding</code>ã€‚</p>
<div class="code-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">border</span>: [width] [style] [color];</span><br></pre></td></tr></table></figure></div>

<p>å…·ä½“çš„é•¿åº¦å•ä½å¯ä»¥è§<a class="link"   href="https://developer.mozilla.org/zh-CN/docs/Learn/CSS/Building_blocks/Values_and_units" >CSS çš„å€¼ä¸å•ä½ - å­¦ä¹  Web å¼€å‘ | MDN (mozilla.org)<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p><strong><code>style</code></strong></p>
<ul>
<li><code>none</code>ï¼šå»é™¤</li>
<li><code>hidden</code>ï¼šéšè—ï¼Œä¸å ç”¨ç©ºé—´ï¼Œä½†åœ¨è¡¨å•ä¸­å¯èƒ½æœ‰ç‰¹æ®Šè¡Œä¸º</li>
<li><code>dotted</code>ï¼šåœ†ç‚¹</li>
<li><code>dashed</code>ï¼šè™šçº¿</li>
<li><code>solid</code>ï¼šå®çº¿</li>
<li><code>double</code>ï¼šåŒå®çº¿</li>
<li><code>groove</code>ï¼šé›•åˆ»</li>
<li><code>ridge</code>ï¼šæµ®é›•</li>
<li><code>inset</code>ï¼šé™·å…¥</li>
<li><code>outset</code>ï¼šçªå‡º</li>
</ul>
<p>é¢œè‰²å°±ä¸å¿…å¤šè¯´äº†ã€‚</p>
<p><code>border-radius</code> å±æ€§å¯ä»¥æ”¹ <code>border</code> çš„åœ†è§’å¤§å°ã€‚</p>
<p>MDN æ ·ä¾‹ï¼š</p>
<div class="code-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">0.5rem</span> outset pink;</span><br><span class="line">  <span class="attribute">outline</span>: <span class="number">0.5rem</span> solid khaki;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">2rem</span> skyblue;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">font</span>: bold <span class="number">1rem</span> sans-serif;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">2rem</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">1rem</span>;</span><br><span class="line">  <span class="attribute">outline-offset</span>: <span class="number">0.5rem</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202403160529773.webp"
                      alt="image.png"
                ></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>border</code> æ˜¯æœ‰ä½“ç§¯çš„ï¼Œå¹¶ä¸”ä¼šéšç€ç¼©æ”¾è€Œå˜åŒ–ï¼Œæ‰€ä»¥å¦‚æœè¦è®¡ç®—å®½åº¦éœ€è¦æ ¼å¤–æ³¨æ„ã€‚</p>
<p>æ‰€ä»¥å¦‚æœæƒ³å›ºå®šç›’å­çš„å®é™…å¤§å°çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨<strong>æ›¿ä»£ç›’æ¨¡å‹</strong>ã€‚</p>
<div class="code-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">	<span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>è¿™æ ·ç›’å­çš„å®é™…å¤§å°å®Œå…¨ç”± <code>width</code> å’Œ <code>height</code> æ¥å†³å®šï¼Œå‡å» <code>padding</code> å’Œ <code>border</code> å³ä¸º <code>content</code> çš„å¤§å°ã€‚</p>
<p>å¦‚æœæƒ³å…¨å±€éƒ½ä½¿ç”¨æ­¤æ¨¡å‹ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š</p>
<div class="code-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">*,</span><br><span class="line">*<span class="selector-pseudo">::before</span>,</span><br><span class="line">*<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">box-sizing</span>: inherit;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><strong>æ¸å˜è¾¹æ¡†ï¼š</strong></p>
<div class="code-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">border-image</span>: &lt;source&gt; &lt;slice&gt; / &lt;width&gt; / &lt;outset&gt; &lt;repeat&gt;;</span><br></pre></td></tr></table></figure></div>

<p>æ¯”è¾ƒæ¨èçš„åšæ³•æ˜¯ç›’å­åµŒå¥—ä¸€ä¸‹ï¼Œå¤–é¢æ•´ä¸Š <code>padding</code> æ¨¡æ‹Ÿè¾¹æ¡†ã€‚</p>
<h2 id="Opacity"><a href="#Opacity" class="headerlink" title="Opacity"></a>Opacity</h2><p>é€æ˜åº¦ï¼Œè¯¥å…ƒç´ åŠå…¶åä»£å…ƒç´ çš„é€æ˜åº¦éƒ½ä¼šå—åˆ°å½±å“ï¼Œè‹¥ä¸æƒ³åä»£å…ƒç´ å—åˆ°å½±å“ï¼Œå¯ä»¥é€šè¿‡ <code>background-color</code> æ¥è°ƒæ•´èƒŒæ™¯é€æ˜åº¦ã€‚</p>
<h2 id="Outline"><a href="#Outline" class="headerlink" title="Outline"></a>Outline</h2><p>ä¸ Border ç±»ä¼¼ï¼Œä½†æ˜¯ä¸å ç”¨ç©ºé—´ï¼Œå±æ€§å€¼ä¸º å¤§å°ã€é¢œè‰²ã€æ ·å¼ï¼Œé¡ºåºä¸é‡è¦ã€‚</p>
<p><code>outline-offset</code> ç”¨æ¥è®¾ç½®å…ƒç´ è¾¹ç¼˜ä¸ <code>outline</code> ä¹‹é—´çš„é—´éš™ã€‚</p>
<h2 id="Shadow"><a href="#Shadow" class="headerlink" title="Shadow"></a>Shadow</h2><h3 id="Box"><a href="#Box" class="headerlink" title="Box"></a>Box</h3><div class="code-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">box-shadow</span>: [inset] [x-offset] [y-offset] [blur-radius] [spread-radius] [color];</span><br></pre></td></tr></table></figure></div>

<p>ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå¯é€‰é¡¹ï¼ŒåŠ ä¸Š <code>inset</code> å³ä¸ºå†…é˜´å½±ï¼Œä¸å†™æ—¶é»˜è®¤ä¸ºå¤–é˜´å½±ã€‚</p>
<h3 id="Text"><a href="#Text" class="headerlink" title="Text"></a>Text</h3><div class="code-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">text-shadow</span>: [x-offset] [y-offset] [blur-radius] [color];</span><br></pre></td></tr></table></figure></div>

<p>ä¸ <code>box-shadow</code> ç±»ä¼¼ã€‚</p>
<p><code>shadow</code> å¯ä»¥é‡å ï¼Œç”¨ <code>,</code> éš”å¼€å³å¯ã€‚</p>
<h2 id="Text-decoration"><a href="#Text-decoration" class="headerlink" title="Text-decoration"></a>Text-decoration</h2><div class="code-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">text-decoration</span>: [underline/overline/line-through] [color] [style] [thickness]</span><br></pre></td></tr></table></figure></div>

<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<div class="code-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">text-decoration</span>: underline <span class="number">#ff7d31</span> solid <span class="number">3px</span>;</span><br></pre></td></tr></table></figure></div>

<h2 id="Float"><a href="#Float" class="headerlink" title="Float"></a>Float</h2><p>ä½¿ä¸€ä¸ªå…ƒç´ æµ®åŠ¨åœ¨å®¹å™¨çš„æŸä¸ªä½ç½®ï¼Œè¡Œå†…å…ƒç´ å¯ä»¥ç¯ç»•å®ƒã€‚</p>
<div class="code-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">float</span>: left/right/none/inline-start/inline-end;</span><br></pre></td></tr></table></figure></div>

<h2 id="Clear"><a href="#Clear" class="headerlink" title="Clear"></a>Clear</h2><p>å¯ç”¨äºæ¸…é™¤æµ®åŠ¨ã€‚</p>
<h2 id="Overflow"><a href="#Overflow" class="headerlink" title="Overflow"></a>Overflow</h2><p>å¤„ç†æº¢å‡ºçš„å…ƒç´ ã€‚</p>
<ul>
<li><code>visible</code>ï¼šå†…å®¹ä¸è¢«è£å‰ªã€‚</li>
<li><code>hidden</code>ï¼š è£å‰ªä½¿å…¶é€‚åº”æº¢å‡ºï¼Œä¸æ”¯æŒæ»šåŠ¨ã€‚</li>
<li><code>clip</code>ï¼šè£å‰ªï¼Œä»£ç å±‚é¢ä¸æ”¯æŒæ»šåŠ¨ã€‚<ul>
<li><code>overflow-clip-margin</code>ï¼šè£å‰ªèŒƒå›´ã€‚</li>
</ul>
</li>
<li><code>scroll</code>ï¼šæ€»æ˜¾ç¤ºæ»šåŠ¨æ¡</li>
<li><code>auto</code>ï¼šè‹¥ä¸æº¢å‡ºåˆ™ä¸æ˜¾ç¤ºæ»šåŠ¨æ¡ï¼Œå¦åˆ™æ˜¾ç¤ºã€‚</li>
</ul>
<h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><blockquote>
<p>æ”¹å˜ä½ çš„ç½‘é¡µèƒŒæ™¯</p>
</blockquote>
<p>å¯ä»¥é€šè¿‡ <code>background</code> åŒæ—¶æ·»åŠ å¤šä¸ªå±æ€§å€¼ï¼Œä¹Ÿå¯æ‹†åˆ†æ¥å†™ã€‚</p>
<div class="code-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">background-image</span>: <span class="built_in">url</span>();</span><br><span class="line"><span class="attribute">background-color</span>: <span class="built_in">rgb</span>();</span><br><span class="line"><span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line"><span class="attribute">background-position</span>: center;</span><br><span class="line"><span class="attribute">background-attachment</span>: fixed;</span><br><span class="line"><span class="attribute">background-size</span>: cover;</span><br></pre></td></tr></table></figure></div>

<br>

<p><code>background-repeat</code></p>
<ul>
<li><code>repeat-x/repeat-y</code>ï¼šå¯ä»¥æ§åˆ¶æ¨ªå‘è¿˜æ˜¯çºµå‘é‡å¤ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åŒå€¼åˆ†åˆ«ä¸ºä¸åŒçš„é‡å¤æ ·å¼ã€‚</li>
<li><code>repeat</code>ï¼šé‡å¤å¡«å……èƒŒæ™¯ï¼Œæº¢å‡ºéƒ¨åˆ†å°†è£å‰ªã€‚</li>
<li><code>space</code>ï¼šä¸ä¼šè£å‰ªï¼Œç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå›¾åƒä¼šè´´åˆè¾¹ç¼˜ï¼Œä½¿ç©ºç™½å‡åŒ€ã€‚</li>
<li><code>round</code>ï¼šé€šè¿‡æ‹‰ä¼¸å›¾åƒä½¿å¾—é‡å¤å¡«å……</li>
<li><code>no-repeat</code>ï¼šä¸é‡å¤ã€‚</li>
</ul>
<br>

<p><code>background-position</code></p>
<p>å…³é”®å­—ï¼š<code>center/top/left/bottom/right</code></p>
<p>æŒ‡å®šä¸ºå¯¹åº”è¾¹ç•Œä¸­é—´ä½ç½®ã€‚</p>
<p>ä¹Ÿå¯ä»¥é‡‡ç”¨ä¸¤ä¸ªå€¼åˆ†åˆ«å¯¹åº” <code>x/y</code> åæ ‡ã€‚</p>
<br>

<p><code>background-size</code></p>
<ul>
<li><code>length</code>ï¼šå¯ä»¥æ˜¯ä¸€ä¸ªå€¼ä¹Ÿå¯ä»¥æ˜¯ä¸¤ä¸ªå€¼ã€‚</li>
<li><code>percentage</code>ï¼šå¯ä»¥è®¾ç½®ç›¸å¯¹äºå†…å®¹å’Œå†…è¾¹è·çš„ç™¾åˆ†æ¯”ã€‚</li>
<li><code>auto</code>ï¼šè‡ªåŠ¨ç¼©æ”¾ã€‚</li>
<li><code>cover</code>ï¼šä½¿èƒŒæ™¯è¦†ç›–ã€‚</li>
<li><code>contain</code>ï¼šä½¿åŒ…å«èƒŒæ™¯ã€‚</li>
</ul>
<h2 id="Display"><a href="#Display" class="headerlink" title="Display"></a>Display</h2><p>è®¾ç½®å…ƒç´ çš„å¤–éƒ¨æ˜¾ç¤ºç±»å‹ã€‚</p>
<ul>
<li><code>block</code>ï¼šå—çº§å…ƒç´ ã€‚</li>
<li><code>inline</code>ï¼šå†…è”å…ƒç´ ï¼Œæ— æ³•åº”ç”¨å®½åº¦&#x2F;é«˜åº¦å±æ€§ã€‚</li>
<li><code>inline-block</code>ï¼šå†…è”å…ƒç´ ï¼Œä½†å¯ä»¥åº”ç”¨å®½åº¦&#x2F;é«˜åº¦å±æ€§ã€‚</li>
<li><code>none</code>ï¼šæ¸…é™¤è¯¥å…ƒç´ ã€‚</li>
<li><code>contents</code>ï¼šåªæ˜¾ç¤ºå­ä»£å…ƒç´ ï¼Œä¸æ˜¾ç¤ºæœ¬èº«ã€‚</li>
<li><code>flex</code>ï¼šå¼¹æ€§ç›’æ¨¡å‹ã€‚</li>
<li><code>grid</code>ï¼šç½‘æ ¼æ¨¡å‹ã€‚</li>
</ul>
<p>æ­¤å¤„ä¸ <code>visibility: hidden</code> åŒºåˆ†ï¼Œåè€…åªä¼šä½¿å…ƒç´ ä¸å¯è§ï¼Œä½†ä¾æ—§å æ®ç©ºé—´ã€‚</p>
<h2 id="Position"><a href="#Position" class="headerlink" title="Position"></a>Position</h2><p>CSSÂ <strong><code>position</code></strong>Â å±æ€§ç”¨äºæŒ‡å®šä¸€ä¸ªå…ƒç´ åœ¨æ–‡æ¡£ä¸­çš„å®šä½æ–¹å¼ã€‚<code>top</code>ï¼Œ<code>right</code>ï¼Œ<code>bottom</code> å’ŒÂ <code>left</code>Â å±æ€§åˆ™å†³å®šäº†è¯¥å…ƒç´ çš„æœ€ç»ˆä½ç½®ã€‚</p>
<p>è€Œä¸Šé¢é‚£å››ä¸ªä½ç½®å±æ€§å¯ä»¥ç®€å†™ä¸º <code>inset</code>ï¼Œå››ä¸ªå‚æ•°åˆ†åˆ«ä»£è¡¨ <code>top</code>ï¼Œ<code>right</code>ï¼Œ<code>bottom</code>ï¼Œ<code>left</code>ã€‚</p>
<p>è€Œ <code>absolute</code> å…ƒç´ æ²¡æœ‰è®¾ç½®å¤§å°ï¼Œå¦‚æœå››ä¸ªä½ç½®éƒ½æœ‰å±æ€§ï¼Œé‚£ä¹ˆå°±ä¼šç›¸å¯¹æœ€è¿‘é <code>static</code> ç¥–å…ˆè®¾ç½®å¤§å°ã€‚</p>
<ul>
<li><code>static</code>ï¼šæŒ‡å®šå…ƒç´ ä¸ºé»˜è®¤å¸ƒå±€ï¼Œæ— æ³•é€šè¿‡å…¶å®ƒå…ƒç´ æ”¹å˜ä½ç½®ã€‚</li>
<li><code>relative</code>ï¼šç›¸å¯¹äºé»˜è®¤å¸ƒå±€çš„ä½ç½®åç§»ã€‚</li>
<li><code>absolute</code>ï¼šä¸ä¼šä¸ºè¯¥å…ƒç´ é¢„ç•™ç©ºé—´ï¼Œç›¸å¯¹äºæœ€è¿‘çš„é <code>static</code> ç¥–å…ˆçš„ä½ç½®ã€‚</li>
<li><code>fixed</code>ï¼šä¸ä¼šä¸ºè¯¥å…ƒç´ é¢„ç•™ç©ºé—´ï¼Œç›¸å¯¹äºå±å¹•è§†å£çš„ä½ç½®ã€‚</li>
<li><code>sticky</code>ï¼šåˆ°è¾¾ç‰¹å®šä½ç½®ä¸º <code>fixed</code> å¦åˆ™ä¸º <code>relative</code>ã€‚æ¯”å¦‚è®¾ç½® <code>top: 50px</code>ï¼Œå½“è¯¥å…ƒç´ åˆ°è¾¾è·ç¦»è§†å£ä¸Šç«¯ <code>50px</code> åï¼Œç›¸å¯¹è§†å£ä¸åŠ¨ï¼Œç›´åˆ° <code>containing block</code> è„±ç¦»è§†å£ã€‚</li>
</ul>
<h2 id="æ¸å˜"><a href="#æ¸å˜" class="headerlink" title="æ¸å˜"></a>æ¸å˜</h2><div class="code-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="code"><pre><span class="line">linear-gradient(<span class="selector-attr">[angle|to &lt;side-or corner]</span>, &lt;<span class="attribute">color</span>-<span class="selector-tag">stop</span>-list&gt;)</span><br></pre></td></tr></table></figure></div>

<p>ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯ <code>angle</code>ï¼Œå³ <code>[number]deg</code>ï¼Œé¡ºæ—¶é’ˆä¸ºæ­£å€¼ï¼Œæˆ–è€… <code>to</code> åŠ æ–¹å‘ï¼Œå¦‚ <code>top</code>ã€<code>right</code> ç­‰ï¼Œä»£è¡¨æ¸å˜çš„æ–¹å‘ã€‚</p>
<p>è€Œ <code>color-stop</code> å¯ä»¥æœ‰å¤šä¸ªï¼Œå¯ä»¥åªæœ‰è‰²å€¼ï¼Œä¹Ÿå¯ä»¥è‰²å€¼+é•¿åº¦æˆ–è€…ç™¾åˆ†æ¯”ï¼Œä»£è¡¨è¯¥é¢œè‰²æ¸å˜çš„èŒƒå›´&#x2F;é•¿åº¦ï¼Œå¯ä»¥æ˜¯å•å€¼ä¹Ÿå¯ä»¥æ˜¯åŒå€¼ï¼Œå•å€¼ä»£è¡¨ä»ä»€ä¹ˆåœ°æ–¹å¼€å§‹ï¼ŒåŒå€¼ä»£è¡¨ä»ä»€ä¹ˆåœ°æ–¹å¼€å§‹å’Œç»“æŸï¼Œå‰ä¸€ä¸ªé¢œè‰²æ¯”åä¸€ä¸ªé¢œè‰²ä¼˜å…ˆçº§æ›´é«˜ï¼Œå³ä¸å­˜åœ¨åå¯¹å‰è¦†ç›–ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<div class="code-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">217deg</span>, <span class="built_in">rgba</span>(<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">8</span>), <span class="built_in">rgba</span>(<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>) <span class="number">70.71%</span>),</span><br><span class="line">            <span class="built_in">linear-gradient</span>(<span class="number">127deg</span>, <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">255</span>,<span class="number">0</span>,.<span class="number">8</span>), <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>) <span class="number">70.71%</span>),</span><br><span class="line">            <span class="built_in">linear-gradient</span>(<span class="number">336deg</span>, <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">255</span>,.<span class="number">8</span>), <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">255</span>,<span class="number">0</span>) <span class="number">70.71%</span>);</span><br></pre></td></tr></table></figure></div>

<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202405272257567.webp"
                      alt="image.png"
                ></p>
<h2 id="Z-index"><a href="#Z-index" class="headerlink" title="Z-index"></a>Z-index</h2><p><code>z-index</code> å±æ€§ç”¨äºæ§åˆ¶å…ƒç´ åœ¨ Z è½´ï¼ˆå³å‚ç›´äºå±å¹•çš„è½´ï¼‰ä¸Šçš„å æ”¾é¡ºåºã€‚å½“å…ƒç´ é‡å æ—¶ï¼Œ<code>z-index</code> å€¼è¾ƒå¤§çš„å…ƒç´ ä¼šè¦†ç›– <code>z-index</code> å€¼è¾ƒå°çš„å…ƒç´ ã€‚</p>
<p>ç±»ä¼¼äºå›¾å±‚çš„æ¦‚å¿µã€‚</p>
<h2 id="Pseudo"><a href="#Pseudo" class="headerlink" title="Pseudo"></a>Pseudo</h2><blockquote>
<p>ä¼ªç±»å’Œä¼ªå…ƒç´ ã€‚</p>
</blockquote>
<h3 id="Pseudo-classes"><a href="#Pseudo-classes" class="headerlink" title="Pseudo-classes"></a>Pseudo-classes</h3><ul>
<li><code>:hover</code>ï¼šé¼ æ ‡æ‚¬æµ®</li>
<li><code>:active</code>ï¼šç‚¹å‡»æ—¶</li>
<li><code>:visited</code>ï¼šç‚¹å‡»å</li>
<li><code>:not()</code>ï¼šæŸè¡Œä¸ºçš„åè¡Œä¸º</li>
</ul>
<h3 id="Pseudo-elements"><a href="#Pseudo-elements" class="headerlink" title="Pseudo-elements"></a>Pseudo-elements</h3><ul>
<li><code>::first-letter</code>ï¼šç¬¬ä¸€ä¸ªå­—ç¬¦</li>
<li><code>::first-line</code>ï¼šç¬¬ä¸€è¡Œ</li>
<li><code>::selection</code>ï¼šæ‰€é€‰æ‹©çš„æ–‡æœ¬</li>
<li><code>::before</code></li>
<li><code>::after</code></li>
<li><code>::marker</code></li>
</ul>
<h2 id="Text-align"><a href="#Text-align" class="headerlink" title="Text-align"></a>Text-align</h2><p>è®¾ç½®è¡Œå†…å…ƒç´ çš„æ°´å¹³å¯¹é½æ–¹å¼ã€‚</p>
<ul>
<li><code>start</code></li>
<li><code>end</code></li>
<li><code>left</code></li>
<li><code>right</code></li>
<li><code>center</code>ï¼šå±…ä¸­</li>
<li><code>justify</code>ï¼šå‘ä¸¤ä¾§å¯¹é½ï¼Œå¯¹æœ€åä¸€è¡Œæ— æ•ˆ</li>
</ul>
<h2 id="Vertical-align"><a href="#Vertical-align" class="headerlink" title="Vertical-align"></a>Vertical-align</h2><p>è®¾ç½®è¡Œå†…å…ƒç´ çš„å‚ç›´å¯¹é½æ–¹å¼ã€‚</p>
<ul>
<li><code>baseline</code></li>
<li><code>top</code></li>
<li><code>middle</code></li>
<li><code>bottom</code></li>
<li><code>sub</code>ï¼šä¸‹æ ‡</li>
<li><code>super</code>ï¼šä¸Šæ ‡</li>
<li><code>text-top</code>ï¼šçˆ¶å…ƒç´ çš„å­—ä½“é¡¶ç«¯</li>
<li><code>text-bottom</code>ï¼šçˆ¶å…ƒç´ çš„å­—ä½“åº•ç«¯</li>
</ul>
<h2 id="ScrollBar"><a href="#ScrollBar" class="headerlink" title="ScrollBar"></a>ScrollBar</h2><div class="code-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="code"><pre><span class="line">::-webkit-scrollbar &#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="Transform"><a href="#Transform" class="headerlink" title="Transform"></a>Transform</h2><p>å„ä¸ªæ“ä½œé—´ç”¨<strong>ç©ºæ ¼</strong>éš”å¼€ã€‚</p>
<h3 id="Translate"><a href="#Translate" class="headerlink" title="Translate"></a>Translate</h3><p>ä½ç§»ã€‚</p>
<div class="code-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">transform</span>: <span class="built_in">translate</span>([x-offset], [y-offset]);</span><br></pre></td></tr></table></figure></div>

<ul>
<li><code>translate()</code></li>
<li><code>translateX()</code></li>
<li><code>translateY()</code></li>
</ul>
<h3 id="Rotate"><a href="#Rotate" class="headerlink" title="Rotate"></a>Rotate</h3><p>æ—‹è½¬ã€‚</p>
<p>é»˜è®¤ä¸º <code>rotateZ</code></p>
<div class="code-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">transform</span>: <span class="built_in">rotateX</span>(<span class="number">90deg</span>);</span><br><span class="line"><span class="comment">/* æ²¿ç€ X è½´æ—‹è½¬ 90Â° */</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li><code>rotateX()</code>ï¼šä¸Šä¸‹ç¿»</li>
<li><code>rotateY()</code>ï¼šå·¦å³ç¿»</li>
<li><code>rotateZ()</code>ï¼šæ—‹è½¬</li>
</ul>
<h3 id="Scale"><a href="#Scale" class="headerlink" title="Scale"></a>Scale</h3><p>ç¼©æ”¾ã€‚</p>
<ul>
<li><code>scale()</code></li>
<li><code>scaleX()</code></li>
<li><code>scaleY()</code></li>
</ul>
<h3 id="Skew"><a href="#Skew" class="headerlink" title="Skew"></a>Skew</h3><p>å€¾æ–œï¼ˆæ‰­æ›²ï¼‰ã€‚</p>
<ul>
<li><code>skewX()</code></li>
<li><code>skewY()</code></li>
<li><code>skew()</code></li>
</ul>
<h2 id="Transition"><a href="#Transition" class="headerlink" title="Transition"></a>Transition</h2><p>è¿‡æ¸¡æ•ˆæœã€‚</p>
<div class="code-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">transition</span>: [property] [duration] [timing-function] [delay];</span><br></pre></td></tr></table></figure></div>

<p><strong><code>property</code></strong></p>
<p>å¯çœç•¥ï¼Œå°†åº”ç”¨åˆ°æ‰€æœ‰å¯è¿‡æ¸¡çš„å±æ€§ä¸Šã€‚</p>
<ul>
<li><code>width</code></li>
<li><code>height</code></li>
<li><code>transform</code></li>
<li><code>color</code></li>
</ul>
<p><strong><code>timing-function</code></strong></p>
<ul>
<li><code>ease</code></li>
<li><code>linear</code></li>
<li><code>ease-in</code></li>
<li><code>ease-out</code></li>
<li><code>cubic-bezier()</code></li>
</ul>
<h2 id="Gap"><a href="#Gap" class="headerlink" title="Gap"></a>Gap</h2><p>æ§åˆ¶ <strong>flex</strong> å’Œ <strong>grid</strong> å¸ƒå±€ä¸­å…ƒç´ çš„é—´è·ã€‚</p>
<p>å½“åªæœ‰ä¸€ä¸ªå€¼æ—¶ï¼ŒåŒæ—¶åº”ç”¨äºè¡Œé—´è·å’Œåˆ—é—´è·ã€‚</p>
<p>å½“æœ‰ä¸¤ä¸ªå€¼æ—¶ï¼Œç¬¬ä¸€ä¸ªå€¼ç”¨äºè¡Œé—´è·ï¼Œç¬¬äºŒä¸ªå€¼ç”¨äºåˆ—é—´è·ã€‚</p>
<h2 id="Filter"><a href="#Filter" class="headerlink" title="Filter"></a>Filter</h2><p><strong><code>hue-rotate(deg)</code></strong></p>
<p>è‰²ç›¸æ‰­æ›²å‡½æ•°ã€‚</p>
<p><strong><code>blur(px)</code></strong></p>
<p>é«˜æ–¯æ¨¡ç³Šã€‚</p>
<p><strong><code>brightness(%)</code></strong></p>
<p>äº®åº¦ã€‚</p>
<p><strong><code>contrast(%)</code></strong></p>
<p>å¯¹æ¯”åº¦ã€‚</p>
<p><strong><code>grayscale(%)</code></strong></p>
<p>ç°åº¦ã€‚</p>
<p><strong><code>invert(%)</code></strong></p>
<p>åè½¬é¢œè‰²ã€‚</p>
<p><strong><code>opacity(%)</code></strong></p>
<p>é€æ˜åº¦ã€‚</p>
<p><strong><code>saturate(%)</code></strong></p>
<p>é¥±å’Œåº¦ã€‚</p>
<h2 id="Backdrop-filter"><a href="#Backdrop-filter" class="headerlink" title="Backdrop-filter"></a>Backdrop-filter</h2><p>ä¸ <code>filter</code> ç±»ä¼¼ï¼Œä½†åªå½±å“å®ƒåé¢çš„èƒŒæ™¯ï¼Œä¸å½±å“æœ¬èº«å…ƒç´ ã€‚</p>
<h2 id="Pointer-events"><a href="#Pointer-events" class="headerlink" title="Pointer-events"></a>Pointer-events</h2><p><code>pointer-events</code> å±æ€§ç”¨äºæ§åˆ¶å…ƒç´ å¦‚ä½•å“åº”é¼ æ ‡äº‹ä»¶ã€‚</p>
<ul>
<li><code>none</code></li>
<li><code>auto</code></li>
</ul>
<h2 id="Cursor"><a href="#Cursor" class="headerlink" title="Cursor"></a>Cursor</h2><p><code>cursor</code> å±æ€§ç”¨äºæŒ‡å®šå½“é¼ æ ‡æ‚¬åœåœ¨å…ƒç´ ä¸Šæ—¶åº”æ˜¾ç¤ºçš„å…‰æ ‡æ ·å¼ã€‚é€šè¿‡è®¾ç½®ä¸åŒçš„å…‰æ ‡æ ·å¼ï¼Œå¯ä»¥ä¸ºç”¨æˆ·æä¾›è§†è§‰åé¦ˆï¼Œè¡¨ç¤ºä¸åŒçš„äº¤äº’çŠ¶æ€ã€‚</p>
<ul>
<li><code>default</code>ï¼šé»˜è®¤å…‰æ ‡ï¼ˆé€šå¸¸æ˜¯ç®­å¤´ï¼‰ã€‚</li>
<li><code>pointer</code>ï¼šæ‰‹å½¢å…‰æ ‡ï¼Œé€šå¸¸ç”¨äºè¡¨ç¤ºé“¾æ¥ã€‚</li>
<li><code>text</code>ï¼šæ–‡æœ¬è¾“å…¥å…‰æ ‡ï¼Œé€šå¸¸ç”¨äºå¯ç¼–è¾‘çš„æ–‡æœ¬åŒºåŸŸã€‚</li>
<li><code>move</code>ï¼šç§»åŠ¨å…‰æ ‡ï¼Œè¡¨ç¤ºå…ƒç´ å¯ä»¥è¢«æ‹–åŠ¨ã€‚</li>
<li><code>not-allowed</code>ï¼šè¡¨ç¤ºæŸä¸ªæ“ä½œè¢«ç¦æ­¢çš„å…‰æ ‡ã€‚</li>
<li><code>crosshair</code>ï¼šåå­—å…‰æ ‡ã€‚</li>
<li><code>help</code>ï¼šå¸®åŠ©å…‰æ ‡ï¼Œé€šå¸¸ç”¨äºè¡¨ç¤ºæœ‰æ›´å¤šä¿¡æ¯å¯ç”¨ã€‚</li>
<li><code>wait</code>ï¼šç­‰å¾…å…‰æ ‡ï¼Œè¡¨ç¤ºæ“ä½œæ­£åœ¨è¿›è¡Œä¸­ã€‚</li>
<li>è‡ªå®šä¹‰å…‰æ ‡ï¼šå¯ä»¥ä½¿ç”¨ URL æŒ‡å®šä¸€ä¸ªè‡ªå®šä¹‰å…‰æ ‡å›¾åƒã€‚</li>
</ul>
<h2 id="List-style"><a href="#List-style" class="headerlink" title="List-style"></a>List-style</h2><p><code>list-style</code> å±æ€§æ˜¯ä¸€ä¸ªç®€å†™å±æ€§ï¼Œç”¨äºåŒæ—¶è®¾ç½®åˆ—è¡¨é¡¹æ ‡è®°çš„ç±»å‹ã€ä½ç½®å’Œå›¾åƒã€‚</p>
<p><code>list-style-type</code></p>
<ul>
<li><code>none</code>ï¼šæ— æ ‡è®°ã€‚</li>
<li><code>disc</code>ï¼šå®å¿ƒåœ†ï¼ˆé»˜è®¤å€¼ï¼‰ã€‚</li>
<li><code>circle</code>ï¼šç©ºå¿ƒåœ†ã€‚</li>
<li><code>square</code>ï¼šå®å¿ƒæ–¹å—ã€‚</li>
<li><code>decimal</code>ï¼šæ•°å­—ï¼ˆ1, 2, 3, â€¦ï¼‰ã€‚</li>
<li><code>decimal-leading-zero</code>ï¼šå‰å¯¼é›¶æ•°å­—ï¼ˆ01, 02, 03, â€¦ï¼‰ã€‚</li>
<li><code>lower-roman</code>ï¼šå°å†™ç½—é©¬æ•°å­—ï¼ˆi, ii, iii, â€¦ï¼‰ã€‚</li>
<li><code>upper-roman</code>ï¼šå¤§å†™ç½—é©¬æ•°å­—ï¼ˆI, II, III, â€¦ï¼‰ã€‚</li>
<li><code>lower-alpha</code>ï¼šå°å†™å­—æ¯ï¼ˆa, b, c, â€¦ï¼‰ã€‚</li>
<li><code>upper-alpha</code>ï¼šå¤§å†™å­—æ¯ï¼ˆA, B, C, â€¦ï¼‰ã€‚</li>
</ul>
<h2 id="Pagination"><a href="#Pagination" class="headerlink" title="Pagination"></a>Pagination</h2><div class="code-container" data-rel="Html"><figure class="iseeu highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../css/index07.css&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Pagination<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Dolores pariatur repellat illum, reprehenderit quidem ab expedita, dicta debitis animi velit laborum molestias. Qui assumenda porro praesentium. Corporis molestiae necessitatibus incidunt.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;fruit&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;apple&quot;</span>&gt;</span>apple<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;orange&quot;</span>&gt;</span>orange<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;banana&quot;</span>&gt;</span>banana<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>This is page #1<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet consectetur adipisicing elit. Blanditiis voluptatum nesciunt, facilis commodi id fuga iusto. Delectus, quis labore assumenda enim, aspernatur eaque accusantium eum ullam, recusandae quaerat vel veniam?<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;pagination&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å‘å·¦å‘å³åªèƒ½æ‰‹åŠ¨ä¸ºæ¯ä¸€é¡µå¡«å†™å®ƒå¯¹åº”çš„ä¸Šä¸€é¡µå’Œä¸‹ä¸€é¡µ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="symbol">&amp;lt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;index07.html&quot;</span> <span class="attr">class</span>=<span class="string">&quot;active&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;index00.html&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;index01.html&quot;</span>&gt;</span>3<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;index02.html&quot;</span>&gt;</span>4<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;index03.html&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;index04.html&quot;</span>&gt;</span>6<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;index05.html&quot;</span>&gt;</span>7<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;index06.html&quot;</span>&gt;</span>8<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="symbol">&amp;gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">h1</span><span class="selector-pseudo">::first-letter</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">2em</span>;</span><br><span class="line">  <span class="attribute">font-style</span>: italic;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">::first-line</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">233</span>, <span class="number">233</span>, <span class="number">106</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">::selection</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">  <span class="attribute">background-color</span>: grey;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* #fruit li::before &#123;</span></span><br><span class="line"><span class="comment">  content: &quot;âœ…&quot;;</span></span><br><span class="line"><span class="comment">&#125; */</span></span><br><span class="line"><span class="selector-id">#apple</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;ğŸ&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#orange</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;ğŸŠ&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#banana</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;ğŸŒ&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#fruit</span> <span class="selector-tag">li</span><span class="selector-pseudo">::marker</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;âˆš&quot;</span>;</span><br><span class="line">  <span class="attribute">color</span>: green;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.5em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.pagination</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.pagination</span> <span class="selector-tag">a</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>: black;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">8px</span> <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.pagination</span> <span class="selector-tag">a</span><span class="selector-class">.active</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">124</span>, <span class="number">255</span>, <span class="number">124</span>);</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.pagination</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.active</span>) &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">128</span>, <span class="number">128</span>, <span class="number">128</span>, <span class="number">0.561</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="Dropdown"><a href="#Dropdown" class="headerlink" title="Dropdown"></a>Dropdown</h2><div class="code-container" data-rel="Html"><figure class="iseeu highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Dropdown<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../css/index08.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dropdown&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>Food<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Apple<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Orange<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Banana<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet consectetur adipisicing elit. A corrupti sed consequatur. Eius consectetur sunt error, aliquid nihil ipsum a ut explicabo placeat perspiciatis quisquam in maxime eaque, quos facilis?<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.dropdown</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.dropdown</span> <span class="selector-tag">button</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">hsl</span>(<span class="number">0</span>, <span class="number">0%</span>, <span class="number">80%</span>);</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.dropdown</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">color</span>: black;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.dropdown</span> <span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">hsl</span>(<span class="number">0</span>, <span class="number">0%</span>, <span class="number">95%</span>);</span><br><span class="line">  <span class="attribute">min-width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">2px</span> <span class="number">2px</span> <span class="number">5px</span> <span class="built_in">hsla</span>(<span class="number">0</span>, <span class="number">0%</span>, <span class="number">0%</span>, <span class="number">0.77</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.dropdown</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.dropdown</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">button</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">128</span>, <span class="number">0</span>, <span class="number">0.487</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.dropdown</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">172</span>, <span class="number">255</span>, <span class="number">47</span>, <span class="number">0.598</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="Navigation"><a href="#Navigation" class="headerlink" title="Navigation"></a>Navigation</h2><div class="code-container" data-rel="Html"><figure class="iseeu highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Navigation<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../css/index09.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Falling Sakura<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;navbar&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>About<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Products<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Contact<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>This is the Home page<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Doloribus aliquid at provident ad, quidem consequuntur expedita a necessitatibus. Dolor aut praesentium laudantium voluptate laborum delectus illum, perferendis tempore ut? Repellendus!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.navbar</span> <span class="selector-tag">ul</span> &#123;</span><br><span class="line">  <span class="attribute">list-style-type</span>: none;</span><br><span class="line">  <span class="comment">/* å»é™¤åœ†ç‚¹ */</span></span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">hsla</span>(<span class="number">0</span>, <span class="number">0%</span>, <span class="number">50%</span>, <span class="number">0.356</span>);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.navbar</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.navbar</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">hsla</span>(<span class="number">0</span>, <span class="number">0%</span>, <span class="number">50%</span>, <span class="number">0.556</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.navbar</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">80</span>, <span class="number">243</span>, <span class="number">80</span>, <span class="number">0.428</span>);</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">main</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="Layout"><a href="#Layout" class="headerlink" title="Layout"></a>Layout</h1><h2 id="æ™®é€šæ–‡æ¡£æµ"><a href="#æ™®é€šæ–‡æ¡£æµ" class="headerlink" title="æ™®é€šæ–‡æ¡£æµ"></a>æ™®é€šæ–‡æ¡£æµ</h2><p>æ‰€æœ‰å…ƒç´ æŒ‰ç…§å…ˆåä½ç½®ä»ä¸Šåˆ°ä¸‹å¸ƒå±€ã€‚</p>
<p>è¡Œå†…å…ƒç´ å æ»¡ä¸€è¡Œåæ¢è¡Œï¼Œå—çº§å…ƒç´ è¢«æ¸²æŸ“ä¸ºä¸€ä¸ªå•ç‹¬çš„è¡Œã€‚</p>
<p>è¿™æ˜¯æ‰€æœ‰å…ƒç´ çš„é»˜è®¤å®šä½ã€‚</p>
<h2 id="è¯­ä¹‰æ ‡ç­¾"><a href="#è¯­ä¹‰æ ‡ç­¾" class="headerlink" title="è¯­ä¹‰æ ‡ç­¾"></a>è¯­ä¹‰æ ‡ç­¾</h2><ul>
<li><code>header</code></li>
<li><code>nav</code></li>
<li><code>main</code><ul>
<li><code>section</code></li>
<li><code>aside</code></li>
<li><code>artible</code></li>
</ul>
</li>
<li><code>footer</code></li>
</ul>
<h2 id="Flex"><a href="#Flex" class="headerlink" title="Flex"></a>Flex</h2><blockquote>
<p>å¼¹æ€§ç›’æ¨¡å‹ã€‚</p>
</blockquote>
<ul>
<li><code>flex-direction</code>ï¼š<ul>
<li>å°†ä¼šæ”¹å˜ä¸»è½´å’Œäº¤å‰è½´çš„æ–¹å‘ï¼Œé»˜è®¤ <code>row</code> æ˜¯æ°´å¹³æ–¹å‘ä¸Šæ˜¯ä¸»è½´ï¼Œç«–ç›´æ–¹å‘ä¸Šæ˜¯äº¤å‰è½´ã€‚</li>
<li><code>row/row-reverse/column/column-reverse</code></li>
</ul>
</li>
<li><code>flex-wrap</code>ï¼š<ul>
<li><code>no-wrap</code>ï¼šæ‰€æœ‰å­å…ƒç´ æ˜¾ç¤ºåœ¨ä¸€è¡Œã€‚</li>
<li><code>wrap</code>ï¼šè‡ªåŠ¨æ¢è¡Œæ’åˆ—ã€‚</li>
<li><code>wrap-reverse</code></li>
</ul>
</li>
<li><code>justify-content</code>ï¼š<ul>
<li><code>flex-start</code>ï¼šå·¦å¯¹é½ã€‚</li>
<li><code>flex-end</code>ï¼šå³å¯¹é½ã€‚</li>
<li><code>center</code>ï¼šæ²¿ä¸»è½´å±…ä¸­ã€‚</li>
<li><code>space-between</code>ï¼šé—´éš™å¹³åˆ†ã€‚</li>
<li><code>space-around</code>ï¼šæ¯ä¸ªå­å…ƒç´ å‘¨å›´éƒ½æœ‰ç›¸åŒçš„é—´éš™ï¼Œå³å­å…ƒç´ ä¹‹é—´çš„é—´éš™ä¸ºå­å…ƒç´ åˆ°è¾¹æ¡†çš„é—´éš™çš„äºŒå€ã€‚</li>
<li><code>space-evenly</code>ï¼šå­å…ƒç´ ä¹‹é—´å’Œè¾¹æ¡†åˆ°å­å…ƒç´ ä¹‹é—´çš„é—´éš™ç›¸åŒã€‚</li>
</ul>
</li>
<li><code>align-items</code>ï¼š<ul>
<li><code>flex-start</code>ï¼šä¸Šå¯¹é½ã€‚</li>
<li><code>flex-end</code>ï¼šä¸‹å¯¹é½ã€‚</li>
<li><code>center</code>ï¼šæ²¿äº¤å‰è½´å±…ä¸­ã€‚</li>
<li><code>stretch</code>ï¼šè‹¥å…ƒç´ æœªè®¾ç½®é«˜åº¦ï¼Œå°†å æ»¡é«˜åº¦ã€‚</li>
<li><code>baseline</code>ï¼šåŸºäºå…ƒç´ çš„ç¬¬ä¸€è¡Œæ–‡å­—çš„åŸºçº¿å¯¹é½ã€‚</li>
</ul>
</li>
<li><code>align-self</code>ï¼šæ§åˆ¶å•ç‹¬å­å…ƒç´ çš„å¯¹é½æ–¹å¼ã€‚</li>
<li><code>flex</code><ul>
<li><code>flex-grow</code>ï¼šå…ƒç´ çš„æ”¾å¤§æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º 0</li>
<li><code>flex-shrink</code>ï¼šå…ƒç´ çš„ç¼©å°æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º 1</li>
<li><code>flex-basis</code>ï¼šå…ƒç´ åœ¨ä¸»è½´æ–¹å‘çš„åˆå§‹å¤§å°ã€‚</li>
</ul>
</li>
</ul>
<p>ä¸ºä»€ä¹ˆæ²¡æœ‰ <code>justify-items</code> å±æ€§ï¼Œä»€ä¹ˆæ—¶å€™å¯ä»¥ä½¿ç”¨ <code>align-content</code> ï¼Ÿ</p>
<p>å› ä¸º flex å¸ƒå±€åœ¨ä¸»è½´æ–¹å‘ä¸Šå°±æ˜¯ä¸€ä¸ªå—å•Šï¼Œå®ƒåœ¨ä¸»è½´æ–¹å‘ä¸Šæ²¡æœ‰å¤šä¸ª <code>item</code> æ‰€ä»¥å®ƒå…¶å®å°±æ˜¯æ²¿ç€äº¤å‰è½´æ–¹å‘çš„ä¸€ä¸ªä¸€ç»´çš„ç›´çº¿ï¼ˆé»˜è®¤ <code>flex-wrap</code> å±æ€§å€¼ä¸º <code>nowrap</code>ï¼Œé‚£å®ƒå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªç‚¹ï¼Œåªæœ‰å½“å®ƒæœ‰å¤šè¡Œå†…å®¹æ—¶ <code>align-content</code> æ‰æœ‰æ„ä¹‰ã€‚</p>
<p><code>align-content</code> å’Œ <code>justify-content</code> æ˜¯æ§åˆ¶<strong>å¤šè¡Œ</strong>å†…å®¹çš„å¯¹é½æ–¹å¼ã€‚</p>
<p>æ³¨æ„ï¼Œå½“ä½ å°† <code>flex-wrap</code> è®¾ç½®ä¸º <code>wrap</code> åï¼Œå³ä½¿å®¹å™¨å†…çš„å…ƒç´ ä¸è¶³ä»¥æ¢è¡Œï¼Œä½†è¿˜æ˜¯ä¼šè¢«è¯†åˆ«ä¸ºâ€œå¤šè¡Œå†…å®¹â€ï¼Œæ­¤æ—¶ <code>align-content</code> ä¼šç”Ÿæ•ˆã€‚</p>
<p><code>align-items</code> å’Œ <code>justify-items</code> æ˜¯æ§åˆ¶<strong>å•è¡Œ</strong>å†…å®¹çš„å¯¹é½æ–¹å¼ã€‚</p>
<h2 id="Grid"><a href="#Grid" class="headerlink" title="Grid"></a>Grid</h2><p>ç½‘æ ¼å¸ƒå±€ã€‚</p>
<ul>
<li><code>grid-template-rows</code>ï¼šè¡Œè½¨é“çš„å°ºå¯¸ã€‚</li>
<li><code>grid-template-columns</code>ï¼šåˆ—åˆ†åˆ«çš„å®½åº¦ï¼Œå¯ä»¥æ˜¯å›ºå®šçš„å®½åº¦ï¼Œä¹Ÿå¯ä»¥ç”¨ <code>fr</code> è¡¨ç¤ºæµ®åŠ¨å®½åº¦ï¼ˆç‰¹æœ‰å•ä½ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨é‡å¤å‡½æ•°èŠ‚çœç¼–ç æ—¶é—´ï¼š<code>repeat(3, 1fr)</code> ã€‚</li>
<li><code>column-gap</code>ï¼šåˆ—é—´è·ã€‚</li>
<li><code>row-gap</code>ï¼šè¡Œé—´è·ã€‚</li>
<li><code>gap</code>ï¼šé—´è·ã€‚</li>
<li><code>grid-template-areas</code>ï¼šæ’åˆ—å…ƒç´ ã€‚<ul>
<li>ç¤ºä¾‹ï¼š<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/FallingSakura/Source@main/img/202406182023359.webp"
                      alt="image.png"
                ></li>
<li>ç„¶åç»™å­å…ƒç´ åˆ†åˆ«è®¾ç½® <code>grid-area</code> ä¸º <code>header</code>&#x2F;<code>content</code>&#x2F;<code>sidebar</code>&#x2F;<code>footer</code> å³å¯ã€‚</li>
</ul>
</li>
<li><code>align-items</code>ï¼šäº¤å‰è½´æ–¹å‘ä¸Šå¯¹é½ã€‚</li>
<li><code>justify-items</code>ï¼šä¸»è½´æ–¹å‘ä¸Šå¯¹é½ã€‚</li>
</ul>
<h2 id="BFC"><a href="#BFC" class="headerlink" title="BFC"></a>BFC</h2><blockquote>
<p>Block Format Context<br>å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡</p>
</blockquote>
<p>å¯ä»¥çœ‹ä½œæ˜¯å…ƒç´ çš„ä¸€ä¸ªå±æ€§ï¼Œå½“å®ƒæ‹¥æœ‰è¿™ä¸ªå±æ€§æ—¶ï¼Œå¯ä»¥çœ‹ä½œæ˜¯ç‹¬ç«‹çš„ä¸€ä¸ªå®¹å™¨ï¼Œå®¹å™¨é‡Œçš„å…ƒç´ ä¸ä¼šå½±å“åˆ°å¤–é¢çš„å…ƒç´ ï¼Œå®ƒè®¡ç®—é«˜åº¦æ—¶ä¼šæŠŠæµ®åŠ¨å…ƒç´ çš„é«˜åº¦ä¹Ÿè®¡ç®—è¿›æ¥ï¼Œä¸”æµ®åŠ¨å…ƒç´ ä¸ BFC å…ƒç´ åŒºåŸŸä¸ä¼šå åŠ ã€‚</p>
<p>å¦‚ä½•å¼€å¯ï¼Ÿ</p>
<ol>
<li>æ ¹å…ƒç´  <code>&lt;html&gt;</code></li>
<li>æµ®åŠ¨å…ƒç´ ï¼ˆ<code>float</code> ä¸ä¸º <code>none</code>ï¼‰</li>
<li>ç»å¯¹å®šä½å…ƒç´ ï¼ˆ<code>position</code> ä¸º <code>absolute</code> æˆ– <code>fixed</code>ï¼‰</li>
<li><code>display</code> å€¼ä¸º <code>inline-block</code>, <code>table-cell</code>, <code>table-caption</code>, <code>table</code>, <code>table-row</code>, <code>table-row-group</code>, <code>table-header-group</code>, <code>table-footer-group</code>, <code>inline-table</code>, <code>flow-root</code>, <code>flex</code>, <code>inline-flex</code>, <code>grid</code>, <code>inline-grid</code>, <code>inline-block</code></li>
<li><code>overflow</code> å€¼ä¸ä¸º <code>visible</code> çš„å—å…ƒç´ </li>
<li><code>contain</code> å€¼ä¸º <code>layout</code>, <code>content</code>, <code>paint</code> çš„å…ƒç´ </li>
<li>å¤šåˆ—å®¹å™¨</li>
</ol>
<p>å¯ä»¥é¿å…é—´è·é‡å ï¼Œæ¸…é™¤æµ®åŠ¨å¸¦æ¥çš„çˆ¶å…ƒç´ é«˜åº¦å¡Œé™·ï¼ˆçˆ¶å…ƒç´ æ˜¯ç”±å­å…ƒç´ æ‰€æ’‘å¼€çš„ï¼Œå½“å­å…ƒç´ æµ®åŠ¨åè„±ç¦»æ–‡æ¡£æµçˆ¶å…ƒç´ ä¾¿æ²¡æœ‰é«˜åº¦ï¼‰ï¼Œé¿å…æµ®åŠ¨è¦†ç›–ã€‚</p>
<h1 id="Animation"><a href="#Animation" class="headerlink" title="Animation"></a>Animation</h1><blockquote>
<p>keyframes<br>å…³é”®å¸§åŠ¨ç”»</p>
</blockquote>
<div class="code-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@keyframes</span> [name] &#123;</span><br><span class="line">	<span class="selector-attr">[percentage]</span> &#123;</span><br><span class="line">		<span class="selector-attr">[animation]</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><code>from</code> ä¸ <code>0%</code> ç­‰ä»·ï¼Œ<code>to</code> ä¸ <code>100%</code> ç­‰ä»·ã€‚</p>
<p>ä»£è¡¨å…³é”®å¸§åŠ¨ç”»ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p>
<p>ç„¶åè¿›è¡Œä¸€äº›æ“ä½œå°±å¯ä»¥äº†ã€‚</p>
<p>ç»™å…ƒç´ åº”ç”¨åŠ¨ç”»ï¼š</p>
<ul>
<li><code>animation-name</code>ï¼šåå­—</li>
<li><code>animation-duration</code>ï¼šæŒç»­æ—¶é—´</li>
<li><code>animation-iteration-count</code>ï¼šè¿­ä»£æ¬¡æ•°</li>
<li><code>animation-direction</code>ï¼šåŠ¨ç”»æ—¶é—´æ–¹å‘<ul>
<li><code>normal</code></li>
<li><code>reverse</code></li>
<li><code>alternate</code></li>
<li><code>alternate-reverse</code></li>
</ul>
</li>
<li><code>animation-play-state</code>ï¼šæ’­æ”¾çŠ¶æ€<ul>
<li><code>paused</code></li>
<li><code>running</code></li>
</ul>
</li>
<li><code>animation-timing-function</code>ï¼šæ—¶é—´å‡½æ•°æ›²çº¿å¯ä»¥é€šè¿‡ <code>F12</code> è°ƒèŠ‚å¯¹åº”æ›²çº¿å¾—åˆ°ç›¸åº”å‚æ•°<ul>
<li><code>ease-in-out</code>(default)</li>
<li><code>linear</code></li>
<li><code>steps([number])</code></li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>Web</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>Base64 Encoding</title>
    <url>/c499c9c8.html</url>
    <content><![CDATA[<h1 id="Base64"><a href="#Base64" class="headerlink" title="Base64"></a>Base64</h1><p><a href="https://www.json.cn/document/base64"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202409111035330.webp"
                      alt="image.png"
                ></a></p>
<p>è®²è§£ä¸€ä¸‹å®ƒçš„ç¼–ç è¿‡ç¨‹ã€‚</p>
<p>é¦–å…ˆæŠŠå­—ç¬¦è½¬æ¢æˆ ASCII ç¼–ç ï¼Œç„¶åæŠŠå®ƒçš„ ASCII ç¼–ç è½¬æ¢ä¸ºå…«ä½äºŒè¿›åˆ¶ç ï¼ŒæŒ‰é¡ºåºè¿æ¥åœ¨ä¸€èµ·ï¼Œç„¶åä»æœ€å¼€å§‹å…­ä¸ªäºŒè¿›åˆ¶ç å¯¹åº”ä¸€ä¸ª 0ï½63 çš„æ•°å­—ï¼Œå¯¹åº”åˆ° Base64 ç¼–ç è¡¨ï¼Œæ¯ 3 ä¸ªå­—ç¬¦å¯¹åº”å¾—åˆ° 4 ä¸ªç¼–ç åçš„ç»“æœï¼ŒæŸä¸€ä¸ª 6 ä½ä¸­ä¸å…¨åˆ™ç”¨ 0 è¡¥é½ï¼Œè‹¥ 6 ä½éƒ½æ˜¯ç©ºåˆ™å¯¹åº”ç¼–ç ä¸º <code>=</code>ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202409111047913.webp"
                      alt="image.png"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202409111047613.webp"
                      alt="image.png"
                ></p>
<p>ASCII (American Standard Information Interchange):</p>
<p><a class="link"   href="https://www.json.cn/document/ascii/" >Link<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
]]></content>
      <categories>
        <category>Tool</category>
      </categories>
      <tags>
        <tag>encode</tag>
      </tags>
  </entry>
  <entry>
    <title>C/C++/C# Note</title>
    <url>/edeb27c6.html</url>
    <content><![CDATA[<blockquote>
<p>ä¸‰ç§è¯­è¨€çš„ç›¸ä¼¼ä¹‹å¤„æœ‰å¾ˆå¤šï¼Œå…ˆåå­¦äº† <code>c++</code> <code>c</code> <code>c#</code>ï¼ŒæŠŠä¸€äº›ä¹‹å‰ä¸çŸ¥é“çš„ä¸œè¥¿è®°å½•ä¸€ä¸‹ï¼Œå†™è¿‡å¾ˆå¤šéçš„å°±ä¸æ•´ç†äº†ã€‚</p>
</blockquote>
<h1 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h1><h2 id="æšä¸¾ç±»å‹"><a href="#æšä¸¾ç±»å‹" class="headerlink" title="æšä¸¾ç±»å‹"></a>æšä¸¾ç±»å‹</h2><blockquote>
<p>c++&#x2F;c#</p>
</blockquote>
<p>æšä¸¾ <code>enum</code> æ˜¯ä¸€ç§ç”¨æˆ·å®šä¹‰çš„ç±»å‹ï¼Œå®ƒç”±ä¸€ç»„å‘½åçš„æ•´æ•°å¸¸é‡ç»„æˆã€‚æšä¸¾ç±»å‹çš„ä¸»è¦ç›®çš„æ˜¯æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†ä¸€ç»„ç›¸å…³çš„å¸¸é‡æ—¶ã€‚</p>
<p><strong>ç¤ºä¾‹</strong></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">eDirection</span> &#123; STOP = <span class="number">0</span>, LEFT, RIGHT, UP, DOWN &#125;;</span><br><span class="line">eDirection dir;</span><br></pre></td></tr></table></figure></div>

<p>è¿™é‡Œå°±å®šä¹‰äº†ä¸€ä¸ªæšä¸¾ç±»å‹ <code>eDirection</code>ï¼Œå’Œè¿™ä¸ªç±»å‹çš„ä¸€ä¸ªå˜é‡ <code>dir</code>ï¼Œå®ƒåªå¯ä»¥å–å…¶ä¸­è¿™äº›å¸¸é‡çš„å€¼ã€‚</p>
<p>é‡Œé¢çš„å€¼å¯ä»¥è®¾å®šï¼Œé»˜è®¤æ˜¯é€’å¢çš„ã€‚</p>
<p>è®¿é—®å³ <code>dir.LEFT</code>ï¼Œè¿™æ ·å¯ä»¥ä½¿ä»£ç æ›´ç›´è§‚</p>
<h1 id="åº“"><a href="#åº“" class="headerlink" title="åº“"></a>åº“</h1><h2 id="conio-h"><a href="#conio-h" class="headerlink" title="conio.h"></a>conio.h</h2><blockquote>
<p>c++</p>
</blockquote>
<p><strong><code>_kbhit()</code></strong></p>
<p>å¦‚æœæœ‰é”®ç›˜è¾“å…¥ï¼Œåˆ™è¿”å› 1.</p>
<p>å¦åˆ™è¿”å› 0.</p>
<p>å®ƒæ˜¯éé˜»å¡çš„ï¼Œè¿™ç‚¹ä¸ <code>_getch()</code> ä¸åŒã€‚</p>
<p><strong><code>_getch()</code></strong></p>
<p>ä»æ§åˆ¶å°ä¸­è¯»å–å•ä¸ªå­—ç¬¦ï¼Œä¸éœ€è¦å›è½¦é”®ã€‚</p>
<p>ä¸”è¯»å–çš„å­—ç¬¦ä¸ä¼šåœ¨æ§åˆ¶å°ä¸­æ˜¾ç¤ºã€‚</p>
<h1 id="Class"><a href="#Class" class="headerlink" title="Class"></a>Class</h1><blockquote>
<p>c#</p>
</blockquote>
<h2 id="é™æ€å˜é‡"><a href="#é™æ€å˜é‡" class="headerlink" title="é™æ€å˜é‡"></a>é™æ€å˜é‡</h2><p>å…³é”®å­— <code>static</code>ã€‚</p>
<p>æ¯ä¸€ä¸ª <code>class</code> éƒ½æœ‰å®ƒçš„å˜é‡ã€å‡½æ•°ç­‰ã€‚</p>
<p><strong>å¯¹è±¡</strong>æ˜¯<strong>ç±»</strong>çš„<strong>å®ä¾‹</strong>ã€‚</p>
<p>å¦‚æœæ˜¯ <code>static</code> ç±»å‹çš„å˜é‡ï¼Œé‚£ä¹ˆæ— éœ€ä¸ºè¿™ä¸ª <code>class</code> å®ä¾‹åŒ–ï¼ˆå³åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼‰ä¾¿å¯ä»¥ä¿®æ”¹å®ƒçš„å€¼ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<div class="code-container" data-rel="Cs"><figure class="iseeu highlight cs"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Myclass</span> &#123;</span><br><span class="line">	<span class="keyword">static</span> <span class="built_in">int</span> staticNum;</span><br><span class="line">	<span class="built_in">int</span> num;</span><br><span class="line">&#125;</span><br><span class="line">Myclass myclass = <span class="keyword">new</span> Myclass();</span><br><span class="line">myclass.num = <span class="number">6</span>;</span><br><span class="line">Myclass.staticNum = <span class="number">6</span>;</span><br></pre></td></tr></table></figure></div>

<h2 id="è®¿é—®ä¿®é¥°ç¬¦"><a href="#è®¿é—®ä¿®é¥°ç¬¦" class="headerlink" title="è®¿é—®ä¿®é¥°ç¬¦"></a>è®¿é—®ä¿®é¥°ç¬¦</h2><ul>
<li><code>public</code></li>
</ul>
<p>ä¿®é¥°ç±»æ—¶ï¼Œä»£è¡¨å®ƒå¯ä»¥è¢«ä»»ä½•æ–‡ä»¶çš„ä»»ä½•ä»£ç è®¿é—®ã€‚</p>
<p>ä¿®é¥°æˆå‘˜æ—¶ï¼Œè¡¨ç¤ºè¿™ä¸ªå¯¹è±¡å¯ä»¥åœ¨ä»»ä½•ä½ç½®è¢«è®¿é—®ã€‚</p>
<ul>
<li><code>private</code></li>
</ul>
<p>åªèƒ½ä¿®é¥°æˆå‘˜ï¼Œè¡¨ç¤ºè¿™ä¸ªå˜é‡åªå¯ä»¥åœ¨å¯¹è±¡å†…éƒ¨è¢«è®¿é—®ã€‚</p>
<ul>
<li><code>internal</code></li>
</ul>
<p>ç±»æˆ–æˆå‘˜åªèƒ½è¢«ä¸€ä¸ªç¨‹åºé›†ä¸­çš„ä»£ç è®¿é—®ï¼Œç±»çš„é»˜è®¤ä¿®é¥°ç¬¦ã€‚</p>
<ul>
<li><code>protected</code></li>
</ul>
<p>å­ç±»å¯ä»¥è®¿é—®ï¼Œè€Œå¤–éƒ¨ä¸å¯è®¿é—®ã€‚</p>
<h2 id="Class-ä¸-Struct"><a href="#Class-ä¸-Struct" class="headerlink" title="Class ä¸ Struct"></a>Class ä¸ Struct</h2><p>å®ƒä»¬çš„åŒºåˆ«åœ¨ä½•å¤„ï¼Ÿ</p>
<p><code>class</code> å˜é‡å‚¨å­˜çš„æ˜¯åœ°å€ï¼Œè€Œ <code>sruct</code> å˜é‡å‚¨å­˜çš„æ˜¯å€¼ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå°†ä¸€ä¸ª <code>class</code> èµ‹å€¼ç»™å¦ä¸€ä¸ª <code>class</code>ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ª <code>class</code> æ‰€æŒ‡å‘çš„æ˜¯ç›¸åŒçš„å˜é‡ã€‚</p>
<p>è€Œå¦‚æœæŠŠä¸€ä¸ª <code>struct</code> èµ‹å€¼ç»™å¦ä¸€ä¸ª <code>struct</code>ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ª <code>struct</code> æ˜¯ä¸¤ä¸ªå€¼ç›¸åŒçš„ä¸åŒçš„å˜é‡ã€‚</p>
<p>åŒæ ·ï¼Œå½“ <code>class</code> ä½œä¸ºå½¢å‚ä¼ å…¥ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå®ƒçš„å€¼ä¼šå—åˆ°å‡½æ•°å†…ä¿®æ”¹çš„å½±å“ï¼Œå› ä¸ºè®¿é—®çš„éƒ½æ˜¯åŒä¸€ä¸ªåœ°å€ã€‚</p>
<p>è€Œ <code>struct</code> ä½œä¸ºå€¼åªæ˜¯å¤åˆ¶äº†ä¸€ä»½ä¼ å…¥å‡½æ•°ï¼Œå‡½æ•°å†…ä¿®æ”¹çš„æ˜¯å¤åˆ¶ä½“ï¼Œå¹¶ä¸ä¼šå½±å“åˆ°å¤–é¢çš„å€¼ã€‚</p>
<p>å¯¹ <code>struct</code> ä½¿ç”¨ <code>ref</code> å…³é”®å­—ï¼Œå³å–åœ°å€ï¼Œå³å¯å®ç°å’Œ <code>class</code> ä¸€æ ·çš„æ•ˆæœã€‚</p>
<hr>
<p><code>struct</code> ä¸èƒ½ç»§æ‰¿ <code>struct</code> æˆ–è€… <code>class</code>ï¼Œæ— æ³•è¢«ç»§æ‰¿ï¼Œåªèƒ½ç»§æ‰¿æ¥å£ã€‚</p>
<p><code>class</code> å¯ä»¥ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»ï¼Œä¹Ÿå¯ä»¥ç»§æ‰¿æ¥å£ã€‚</p>
<h2 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h2><p><code>public class A : B</code> è¡¨ç¤ºç±» A ç»§æ‰¿ç±»Bï¼ŒA æ˜¯å­ç±»ï¼ŒB æ˜¯çˆ¶ç±»ï¼Œå­ç±»å¯ä»¥ä½¿ç”¨çˆ¶ç±»ä¸­çš„å˜é‡ã€‚</p>
<p>è€Œå¦‚æœå­ç±»ä¸­æŸä¸ªå‡½æ•°ä¸æƒ³ä½¿ç”¨çˆ¶ç±»ä¸­çš„å‡½æ•°ï¼Œå¯ä»¥é‡‡ç”¨ <code>override</code> å…³é”®å­—é‡æ–°å®šä¹‰è¿™ä¸ªå‡½æ•°ã€‚</p>
<div class="code-container" data-rel="Cs"><figure class="iseeu highlight cs"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">fn</span>()</span> &#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>åŒæ—¶éœ€è¦åœ¨çˆ¶ç±»çš„è¿™ä¸ªå‡½æ•°ä¸­æ·»åŠ  <code>virtual</code> å…³é”®å­—è¡¨ç¤ºè¿™ä¸ªå‡½æ•°å…è®¸è¢«é‡å†™ã€‚</p>
<div class="code-container" data-rel="Cs"><figure class="iseeu highlight cs"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">fn</span>()</span> &#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>éœ€è¦æ³¨æ„ï¼Œçˆ¶ç±»å˜é‡å¯ä»¥å­˜å‚¨å­ç±»å˜é‡çš„å€¼ï¼Œä½†å­ç±»å˜é‡ä¸å¯ä»¥å­˜å‚¨çˆ¶ç±»å˜é‡çš„å€¼ã€‚</p>
<p>æ‰€æœ‰ç±»å‹çš„åŸºç±»æ˜¯ <code>object</code>ã€‚</p>
<h2 id="Partial"><a href="#Partial" class="headerlink" title="Partial"></a>Partial</h2><p>åœ¨ç±»å‰åŠ ä¸Šæ­¤å…³é”®å­—å¯ä»¥åœ¨å„ä¸ªæ–‡ä»¶ä¸­å†™è¿™ä¸ªç±»ï¼Œå¹¶ä¸”å®ƒä»¬æœ€ç»ˆä¼šåˆå¹¶åœ¨ä¸€èµ·ã€‚</p>
<div class="code-container" data-rel="Cs"><figure class="iseeu highlight cs"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">partial</span> <span class="keyword">class</span> <span class="title">p</span> &#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h2><p>åœ¨ç±»å‰åŠ ä¸Š <code>interface</code> ä¾¿å¯ä»¥ä½œä¸ºä¸€ä¸ªæ¥å£ã€‚</p>
<p>æ¥å£å†…å®šä¹‰è‹¥å¹²æ–¹æ³•ï¼Œè€Œä¸å®šä¹‰å®ƒä»¬çš„å®ç°ï¼Œä¸”ä¸èƒ½æ·»åŠ è®¿é—®ä¿®é¥°ç¬¦ï¼Œé»˜è®¤ <code>public</code>ã€‚</p>
<p>æ¥å£åªæä¾›å£°æ˜ï¼Œä¸æä¾›å®ç°ã€‚</p>
<p>æ‰€ä»¥ç»§æ‰¿æ¥å£åéœ€è¦ç»™å‡ºå®ƒç›¸åº”çš„å®ç°ã€‚</p>
<h2 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h2><p>æ·»åŠ  <code>abstract</code> çš„ç±»æ— æ³•è¢«å®ä¾‹åŒ–ï¼Œå¹¶ä¸”å¯ä»¥æš‚æ—¶ä¸å®ç°æ¥å£ã€‚</p>
<p><code>abstract</code> ä¹Ÿå¯ä»¥ä¿®é¥°å‡½æ•°ï¼Œåªå£°æ˜ä¸å®ç°ï¼Œç•™ç»™å­ç±»å®ç°ã€‚</p>
<p>æŠ½è±¡ç±»ä¸­å¯ä»¥å®ç°æ¥å£ã€‚</p>
<p>ç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»ã€‚</p>
<p>æŠ½è±¡ç±»ä¹Ÿå¯ä»¥è‡ªå·±å£°æ˜å‡½æ•°ã€å±æ€§å¹¶å®ç°ã€‚</p>
<h2 id="æ³›å‹"><a href="#æ³›å‹" class="headerlink" title="æ³›å‹"></a>æ³›å‹</h2><div class="code-container" data-rel="Cs"><figure class="iseeu highlight cs"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">GV</span>&lt;<span class="title">T</span>&gt; &#123;</span><br><span class="line">	<span class="keyword">public</span> T x;</span><br><span class="line">	<span class="keyword">public</span> T y;</span><br><span class="line">&#125;</span><br><span class="line">GV&lt;<span class="built_in">int</span>&gt; giv = <span class="keyword">new</span> GV&lt;<span class="built_in">int</span>&gt;();</span><br></pre></td></tr></table></figure></div>

<p>è¿™æ ·å°±å¯ä»¥å®ç°åŒä¸€ä»½ä»£ç çš„ä¸åŒç±»å‹ã€‚</p>
<p>æ³›å‹æ–¹æ³•ï¼š</p>
<div class="code-container" data-rel="Cs"><figure class="iseeu highlight cs"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Attack</span>&lt;<span class="title">T</span>&gt;(<span class="params">T a, T b</span>) <span class="keyword">where</span> T : Actor</span>&#123;</span><br><span class="line">	a.Attack();</span><br><span class="line">	b.Attack();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>éœ€è¦è¯´æ˜è¿™ä¸ªæ³›å‹ç»§æ‰¿è‡ªå“ªä¸ªç±»ï¼Œå¦åˆ™é»˜è®¤å°±æ˜¯ <code>object</code>ã€‚</p>
<h1 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h1><h2 id="å‡½æ•°æŒ‡é’ˆ"><a href="#å‡½æ•°æŒ‡é’ˆ" class="headerlink" title="å‡½æ•°æŒ‡é’ˆ"></a>å‡½æ•°æŒ‡é’ˆ</h2><p>ä½¿ç”¨ <code>delegate</code> å£°æ˜ä¸€ä¸ªç±»å‹ï¼Œå®ƒå¯ä»¥å‚¨å­˜å¤šä¸ªç›¸åŒå½¢å¼çš„å‡½æ•°å¹¶ä¾æ¬¡æ‰§è¡Œï¼Œé€šè¿‡ <code>+=</code> å’Œ <code>-=</code> æ§åˆ¶é‡Œé¢çš„å‡½æ•°ã€‚</p>
<p>åŒ…æ‹¬è¿™ä¸ªå‡½æ•°çš„ç±»å‹ï¼Œå½¢å‚ç­‰ã€‚</p>
<div class="code-container" data-rel="Cs"><figure class="iseeu highlight cs"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="built_in">delegate</span> <span class="built_in">float</span> <span class="title">CalcFn</span>(<span class="params"><span class="built_in">float</span> v1, <span class="built_in">float</span> v2</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="built_in">float</span> <span class="title">Add</span>(<span class="params"><span class="built_in">float</span> a, <span class="built_in">float</span> b</span>)</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="built_in">float</span> <span class="title">Mul</span>(<span class="params"><span class="built_in">float</span> a, <span class="built_in">float</span> b</span>)</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> a * b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">CalcFn p = Add;</span><br><span class="line">p(<span class="number">1f</span>, <span class="number">2f</span>);</span><br><span class="line">p += Mul;</span><br><span class="line">p(<span class="number">1f</span>, <span class="number">2f</span>);</span><br></pre></td></tr></table></figure></div>

<p>ç›¸å½“äºä¸€ä¸ªå‡½æ•°é›†åˆã€‚</p>
<p><code>Func&lt;T1, T2, TResult&gt;</code> è¡¨ç¤ºä¸€ä¸ªå§”æ‰˜ç±»å‹ï¼Œå‰é¢å‡ ä¸ªæ˜¯è¾“å…¥å‚æ•°çš„ç±»å‹ï¼Œæœ€åä¸€ä¸ªæ˜¯è¿”å›å€¼çš„ç±»å‹ã€‚</p>
<p><code>Action&lt;T1, T2&gt;</code> æ˜¯æ— è¿”å›å€¼</p>
]]></content>
      <categories>
        <category>Back-End</category>
      </categories>
      <tags>
        <tag>c season</tag>
      </tags>
  </entry>
  <entry>
    <title>ChatGPTï¼šå¼€å¯ä¸ªäººæˆé•¿çš„æ–°çºªå…ƒ</title>
    <url>/5a99080f.html</url>
    <content><![CDATA[
  <div class="note p-4 mb-4 rounded-small markdown-body pink icon-padding">
    <i class="note-icon fa-solid fa-lightbulb"></i><p>æœ¬æ–‡æ ‡é¢˜åŠå°é¢å‡ä½¿ç”¨ ChatGPT ç”Ÿæˆã€‚</p>

  </div>

<h1 id="ChatGPT-ä¸ä¸ªäººèƒ½åŠ›"><a href="#ChatGPT-ä¸ä¸ªäººèƒ½åŠ›" class="headerlink" title="ChatGPT ä¸ä¸ªäººèƒ½åŠ›"></a>ChatGPT ä¸ä¸ªäººèƒ½åŠ›</h1><blockquote>
<p>è§†é¢‘åŸåœ°å€ï¼š<a class="link"   href="https://www.bilibili.com/video/BV1th4y137yh/" >ChatGPT æ˜¯å°‘æ•°å¼ºè€…çš„ã€å¤–æŒ‚ã€‘ï½œChatGPTä½¿ç”¨æ•™ç¨‹_å“”å“©å“”å“©_bilibili<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</blockquote>
<h2 id="å¿«é€Ÿå­¦ä¹ "><a href="#å¿«é€Ÿå­¦ä¹ " class="headerlink" title="å¿«é€Ÿå­¦ä¹ "></a>å¿«é€Ÿå­¦ä¹ </h2><blockquote>
<p>ä½ æƒ³åšçš„äº‹æƒ…ï¼Œ99.99% åˆ«äººéƒ½åšè¿‡ï¼Œè€Œä¸”åšçš„æ¯”ä½ å¥½ï¼Œä½ åªéœ€è¦æœåˆ°å®ƒï¼Œç„¶åæ”¹è‰¯å®ƒã€‚</p>
</blockquote>
<p>SECI æ¨¡å‹ï¼Œå³æ˜¾æ€§çŸ¥è¯†å’Œéšå½¢çŸ¥è¯†ä¹‹é—´çš„ç›¸äº’è½¬åŒ–ã€‚</p>
<p>ç¤¾ä¼šåŒ–ã€å¤–åœ¨åŒ–ã€è”ç»“åŒ–ã€å†…åœ¨åŒ–ã€‚</p>
<p>è¿™é‡Œå†™ä¸€æ¡æˆ‘è‡ªå·±çš„æ„Ÿæ‚Ÿï¼šåªæœ‰æ˜¾æ€§çŸ¥è¯†æ‰æ˜¯èƒ½ä½œä¸ºç¬”è®°çš„ï¼Œéšå½¢çŸ¥è¯†éœ€è¦ä½ ä¸Šæ‰‹å»åšã€‚</p>
<p><strong>æœç´¢åŠ›</strong></p>
<p>å¸¸ç”¨ä¸º Bilibiliï¼ŒGoogleï¼ŒYoutubeï¼ŒChatGPTï¼Œsci-hub.</p>
<p>å¹¶ä¸” ChatGPT å¯ä»¥æŠŠä¸€ä¸ªçŸ¥è¯†ä»¥ SECI çš„ä¸‰ä¸ªé˜¶æ®µå’Œå­¦ä¹ åŠ›çš„ä¸‰ä¸ªå±‚æ¬¡æœ‰é’ˆå¯¹æ€§åœ°å±•å¼€ä¸ºä½ è®²è§£ï¼Œè¿™æ˜¯ä¸€èˆ¬æœç´¢å¼•æ“åšä¸åˆ°çš„ã€‚</p>
<p>å¼ºè€…çš„<strong>äº”å¤§æ ¸å¿ƒç«äº‰åŠ›</strong>ï¼ˆä½¿ç”¨å·¥å…·çš„èƒ½åŠ›ï¼‰ã€‚</p>
<ul>
<li>å¿«é€Ÿå­¦ä¹ çš„èƒ½åŠ›ï¼ˆä¸‰ä¸ªå±‚æ¬¡ï¼šæœ‰äººæ‰‹æŠŠæ‰‹æ•™ï¼Œè‡ªå·±ä»ä¹¦ä¸Šå­¦ï¼Œæ¢ç´¢æœªçŸ¥ï¼‰</li>
<li>æé—®èƒ½åŠ›ï¼ˆé«˜è´¨é‡é—®é¢˜ï¼‰</li>
<li>æ‰¹åˆ¤æ€§æ€è€ƒï¼ˆè‹æ ¼æ‹‰åº•æé—®ï¼‰</li>
<li>ç»“æ„åŒ–æ€è€ƒï¼ˆæ„å»ºæ¨¡å‹ï¼‰</li>
<li>åˆ›æ–°ï¼ˆå»¶ç»­æ€§åˆ›æ–°ï¼‰</li>
</ul>
<p>è€Œæƒ³ä½¿ç”¨å¥½ ChatGPT è¿™ä¸ªå·¥å…·ï¼Œæœ€éœ€è¦çš„å°±æ˜¯æé—®èƒ½åŠ›ã€‚</p>
<h2 id="æé—®èƒ½åŠ›"><a href="#æé—®èƒ½åŠ›" class="headerlink" title="æé—®èƒ½åŠ›"></a>æé—®èƒ½åŠ›</h2><blockquote>
<p>æœ€é‡è¦ã€æœ€è‰°éš¾çš„å·¥ä½œï¼Œä»æ¥ä¸æ˜¯æ‰¾åˆ°å¯¹çš„ç­”æ¡ˆï¼Œè€Œæ˜¯é—®å‡ºæ­£ç¡®çš„é—®é¢˜ã€‚â€”â€”å½¼å¾—</p>
</blockquote>
<p><strong>æˆ‘ä¸æ“…é•¿æé—®ã€‚</strong></p>
<p>è¿™é‡Œæœ‰ä¸€ä¸ª<strong>å¸ƒé²å§†æ•™è‚²ç›®æ ‡åˆ†ç±»æ¨¡å‹</strong>ï¼Œå¯ä»¥åŸºäºæ­¤è¿›è¡Œæé—®ã€‚</p>
<p>åˆ©ç”¨ Chat GPT è®­ç»ƒä½ çš„æé—®èƒ½åŠ›ã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥å‘å®ƒæé—®å¦‚ä½•æ›´å¥½åœ°åˆ©ç”¨å®ƒï¼Œå¦‚ä½•å‘å®ƒæé—®ã€‚</p>
<p>ä½ çš„é—®é¢˜è´¨é‡è¶Šé«˜ã€æè¿°çš„è¶Šæ¸…æ¥šã€è¶Šè¯¦ç»†ï¼Œä½ å¾—åˆ°çš„å®ƒçš„ç­”æ¡ˆä¹Ÿå°±è¶Šè¯¦ç»†è¶Šå‡†ç¡®ï¼Œè¶Šèƒ½å¾—åˆ°ä½ æƒ³è¦çš„ä¿¡æ¯ã€‚</p>
<p>é—®é¢˜ä¹‹é—´å¯ä»¥ç»„åˆï¼Œä½†æ•°é‡ä¸å®œè¿‡å¤šã€‚ï¼ˆå› ä¸ºå®ƒæœ‰å­—æ•°é™åˆ¶ï¼‰</p>
<h2 id="æ‰¹åˆ¤æ€§æ€è€ƒ"><a href="#æ‰¹åˆ¤æ€§æ€è€ƒ" class="headerlink" title="æ‰¹åˆ¤æ€§æ€è€ƒ"></a>æ‰¹åˆ¤æ€§æ€è€ƒ</h2><blockquote>
<p><strong>æ‰¹åˆ¤æ€§æ€è€ƒæœ¬è´¨ä¸Šæ˜¯æ€è€ƒè§‚ç‚¹èƒŒåçš„æ€è€ƒè¿‡ç¨‹</strong></p>
</blockquote>
<p>ä»»ä½•<em>è§‚ç‚¹</em>ï¼Œéƒ½æ˜¯é’ˆå¯¹æŸä¸ª<em>è®ºé¢˜</em>ï¼ŒåŸºäºç‰¹å®šçš„<em>æ¦‚å¿µ</em>ã€<em>è¯æ®äº‹å®</em>å’Œ<em>å‡è®¾</em>ï¼Œç«™åœ¨ç‰¹å®šçš„<em>ç«‹åœº</em>ï¼Œè¿›è¡Œ<em>æ¨ç†å’Œè§£é‡Š</em>ï¼Œä»è€Œæ”¯æŒæŸä¸ª<em>ç»“è®º</em>ã€‚</p>
<p>åŒ…æ‹¬è§‚ç‚¹ã€è®ºé¢˜ã€è¯æ®äº‹å®ã€ç»“è®ºã€æ¨ç†ç†è§£çš„è¿‡ç¨‹ã€å‡è®¾ã€æ¦‚å¿µã€ç«‹åœºã€‚</p>
<p>å¯ä»¥é—®å®ƒè§‚ç‚¹çš„å„ä¸ªè®ºè¯éƒ¨åˆ†ï¼Œä¹Ÿå¯ä»¥è®©å®ƒé’ˆå¯¹å„ä¸ªè®ºè¯éƒ¨åˆ†è¿›è¡Œæ‰¹åˆ¤ã€‚</p>
<p>æœ€ç®€å•çš„æ‰¹åˆ¤æ–¹å¼å°±æ˜¯æ‰¹åˆ¤æ¦‚å¿µã€‚</p>
<ul>
<li><strong>è‹æ ¼æ‹‰åº•æé—®æ–¹æ³•</strong></li>
<li><strong>åŸºäºç»“æ„åŒ–åˆ†æé—®é¢˜&#x2F;åˆ›æ–°çš„ç›®çš„ï¼Œè®©å®ƒä¸ºä½ æä¾›ä¸€äº›æ‰¹åˆ¤å¥å¼</strong></li>
<li><strong>ç»“åˆè®ºè¯è°¬è¯¯æé—®</strong></li>
</ul>
<p>è¿™äº›å°±ä¸è¯¦ç»†å±•å¼€äº†ï¼ˆå¯ä»¥é—® GPTï¼‰ã€‚</p>
<h2 id="ç»“æ„åŒ–æ€è€ƒ"><a href="#ç»“æ„åŒ–æ€è€ƒ" class="headerlink" title="ç»“æ„åŒ–æ€è€ƒ"></a>ç»“æ„åŒ–æ€è€ƒ</h2><p>å­¦ä¼š MECE çš„åˆ†ç±»æ–¹æ³•ï¼ˆç›¸äº’ç‹¬ç«‹ä¸”å®Œå…¨ç©·å°½ï¼‰ã€‚</p>
<p>æŠŠéšæ€§çš„çŸ¥è¯†æ˜¾æ€§åŒ–ã€‚</p>
<p>è®©âŒˆå®ƒâŒ‹ç»™ä½ æ¨èä¸åŒç»“æ„çš„æ¨¡å‹ï¼Œå¹¶ä¸”æ•™ç»™ä½ è¿™äº›æ¨¡å‹å…·ä½“è¯¥æ€ä¹ˆä½¿ç”¨ï¼Œæœ‰å“ªäº›å±€é™ï¼Œå…·ä½“çš„ä¾‹å­æœ‰å“ªäº›ï¼Œåˆ†æè¿™ä¸ªæ¨¡å‹çš„åº”ç”¨åœºæ™¯å’Œå®ƒçš„ç»“æ„ï¼Œå¹¶æ ¹æ®ä½ çš„éœ€æ±‚æ¨èç›¸åº”çš„æ¨¡å‹ã€‚</p>
<h2 id="åˆ›æ–°"><a href="#åˆ›æ–°" class="headerlink" title="åˆ›æ–°"></a>åˆ›æ–°</h2><p><em>é¢ è¦†æ€§åˆ›æ–°&#x2F;å»¶ç»­æ€§åˆ›æ–°</em></p>
<p>éœ€è¦äº†è§£åˆ›æ–°è€…çš„äº”ä¸ªå·¥å…·ã€‚</p>
<p>å¯¹äºä¸€ä¸ªé—®é¢˜ï¼Œä½ å¯ä»¥è®© ChatGPT åŸºäºä¸€ä¸ªç‰¹å®šçš„æ€è€ƒç»“æ„è¿›è¡Œå‘æ•£ã€‚</p>
<p>æ¯”å¦‚ï¼šè®©å®ƒæ‰®æ¼”ä¸åŒè§’è‰²çš„äººï¼Œç«™åœ¨ä¸åŒçš„ç«‹åœºå¯¹ä¸€ä¸ªé—®é¢˜è¿›è¡Œè®¨è®ºã€‚</p>
<p>æ¯”å¦‚ï¼šåŸºäºæŸç§èƒŒæ™¯ï¼Œè®©å®ƒé¢„æµ‹æœªæ¥çš„å‘å±•è¶‹åŠ¿ã€‚</p>
<p>æ¯”å¦‚ï¼šç»™å®ƒä¸€äº›éœ€æ±‚ï¼Œé—®å®ƒæœ‰æ²¡æœ‰å¥½çš„è§£å†³åŠæ³•ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å¿«é€Ÿå­¦ä¹ æ˜¾æ€§çŸ¥è¯†ï¼Œé€šè¿‡æå‡ºé«˜è´¨é‡é—®é¢˜å†…åŒ–æˆè‡ªå·±æ‰¹åˆ¤æ€§æ€è€ƒçš„èƒ½åŠ›ã€ç»“æ„åŒ–æ€è€ƒèƒ½åŠ›ï¼Œæœ€ç»ˆå®ç°åˆ›æ–°ã€‚</p>
<h1 id="å¸¸ç”¨æ’ä»¶"><a href="#å¸¸ç”¨æ’ä»¶" class="headerlink" title="å¸¸ç”¨æ’ä»¶"></a>å¸¸ç”¨æ’ä»¶</h1><p>ä»¥ä¸‹æ˜¯âŒˆå®ƒä»¬âŒ‹é’ˆå¯¹æˆ‘â€œè¯·ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±çš„åŠŸèƒ½ä»¥åŠæˆ‘è¯¥å¦‚ä½•ä½¿ç”¨ã€‚â€çš„é—®é¢˜ä½œå‡ºçš„å›ç­”ã€‚</p>
<h2 id="WebPilot"><a href="#WebPilot" class="headerlink" title="WebPilot"></a>WebPilot</h2><p>ä½ å¥½ï¼ŒWebPilot æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ ChatGPT æ’ä»¶ï¼Œä¸“ä¸ºå¢å¼ºæ‚¨çš„åœ¨çº¿æµè§ˆä½“éªŒè€Œè®¾è®¡ã€‚ä»¥ä¸‹æ˜¯ WebPilot æ’ä»¶çš„è¯¦ç»†åŠŸèƒ½ä»¥åŠä½¿ç”¨æ–¹æ³•ï¼š</p>
<h3 id="åŠŸèƒ½ä»‹ç»"><a href="#åŠŸèƒ½ä»‹ç»" class="headerlink" title="åŠŸèƒ½ä»‹ç»"></a>åŠŸèƒ½ä»‹ç»</h3><ol>
<li><p><strong>ç½‘é¡µå†…å®¹æ€»ç»“</strong></p>
<ul>
<li>è¾“å…¥ä¸€ä¸ªç½‘é¡µ URLï¼ŒWebPilot å°†æå–ç½‘é¡µå†…å®¹å¹¶è¿”å›ç®€æ˜æ‰¼è¦çš„æ€»ç»“ï¼Œå¸®åŠ©æ‚¨å¿«é€Ÿäº†è§£ç½‘é¡µçš„ä¸»è¦å†…å®¹ã€‚</li>
</ul>
</li>
<li><p><strong>è§†é¢‘å†…å®¹æ€»ç»“</strong></p>
<ul>
<li>è¾“å…¥ä¸€ä¸ª YouTube è§†é¢‘çš„ URLï¼ŒWebPilot å°†åˆ†æè§†é¢‘å†…å®¹å¹¶æä¾›è¯¦ç»†çš„æ€»ç»“ï¼Œç¡®ä¿æ‚¨æ— éœ€è§‚çœ‹å®Œæ•´è§†é¢‘å³å¯æŒæ¡æ ¸å¿ƒä¿¡æ¯ã€‚</li>
</ul>
</li>
<li><p><strong>ä¿¡æ¯æœç´¢å’Œç¿»è¯‘</strong></p>
<ul>
<li>è¾“å…¥æ‚¨çš„æŸ¥è¯¢ï¼ŒWebPilot å°†ä½¿ç”¨æ‚¨è®¾å®šçš„è¯­è¨€è¿›è¡Œæœç´¢ï¼Œå¹¶è¿”å›ç›¸å…³ä¿¡æ¯ã€‚æ”¯æŒå°†æŸ¥è¯¢è½¬æ¢ä¸ºä¸åŒè¯­è¨€å¹¶æä¾›å¤šç§èµ„æºé“¾æ¥ã€‚</li>
</ul>
</li>
</ol>
<h3 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h3><ol>
<li><p><strong>ç½‘é¡µå†…å®¹æ€»ç»“</strong></p>
<ul>
<li>ç›´æ¥è¾“å…¥æ‚¨è¦æµè§ˆçš„ç½‘é¡µ URLã€‚</li>
<li>WebPilot å°†åˆ†æè¯¥ç½‘é¡µï¼Œå¹¶ä»¥é¡¹ç›®ç¬¦å·çš„å½¢å¼å‘ˆç°å…³é”®ç‚¹ï¼Œæœ€åæä¾›ä¸€ä¸ªä¸»è¦ç»“è®ºã€‚</li>
</ul>
</li>
<li><p><strong>è§†é¢‘å†…å®¹æ€»ç»“</strong></p>
<ul>
<li>ç›´æ¥è¾“å…¥ YouTube è§†é¢‘çš„ URLã€‚</li>
<li>WebPilot å°†æ€»ç»“è§†é¢‘çš„ä¸»è¦å†…å®¹ï¼Œåˆ—å‡ºè¯¦ç»†çš„è¦ç‚¹ï¼Œå¹¶æä¾›ä¸€ä¸ªå…³é”®ç»“è®ºã€‚</li>
</ul>
</li>
<li><p><strong>ä¿¡æ¯æœç´¢</strong></p>
<ul>
<li>æå‡ºæ‚¨çš„æŸ¥è¯¢é—®é¢˜ï¼Œå¦‚â€œæ³•å›½æœ€å¥½çš„é¤å…åœ¨å“ªé‡Œï¼Ÿâ€ã€‚</li>
<li>WebPilot å°†æœç´¢ç›¸å…³ä¿¡æ¯å¹¶ä»¥è®¾å®šè¯­è¨€è¿”å›ç»“æœï¼ŒåŒæ—¶æä¾›å¤šä¸ªèµ„æºé“¾æ¥ä¾›å‚è€ƒã€‚</li>
</ul>
</li>
</ol>
<h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><ul>
<li><p><strong>ç½‘é¡µæ€»ç»“</strong></p>
<ul>
<li>è¾“å…¥ï¼šâ€œ<a class="link"   href="https://example.comâ€/" >https://example.comâ€<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
<li>è¿”å›ï¼šè¯¥ç½‘é¡µçš„å…³é”®ç‚¹æ€»ç»“å’Œä¸»è¦ç»“è®ºã€‚</li>
</ul>
</li>
<li><p><strong>è§†é¢‘æ€»ç»“</strong></p>
<ul>
<li>è¾“å…¥ï¼šâ€œ<a class="link"   href="https://www.youtube.com/watch?v=example%E2%80%9D" >https://www.youtube.com/watch?v=exampleâ€<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
<li>è¿”å›ï¼šè¯¥è§†é¢‘çš„è¯¦ç»†è¦ç‚¹æ€»ç»“å’Œä¸»è¦ç»“è®ºã€‚</li>
</ul>
</li>
<li><p><strong>ä¿¡æ¯æœç´¢</strong></p>
<ul>
<li>è¾“å…¥ï¼šâ€œå·´é»æœ€ä½³æ™¯ç‚¹ï¼Ÿâ€</li>
<li>è¿”å›ï¼šæœ‰å…³å·´é»æœ€ä½³æ™¯ç‚¹çš„å¤šç§èµ„æºé“¾æ¥å’Œæ€»ç»“ä¿¡æ¯ã€‚</li>
</ul>
</li>
</ul>
<h2 id="Code-Copilot"><a href="#Code-Copilot" class="headerlink" title="Code Copilot"></a>Code Copilot</h2><p>æˆ‘æ˜¯ Code Copilotï¼Œæ‚¨çš„ç¼–ç¨‹åŠ©æ‰‹ï¼Œæ—¨åœ¨å¸®åŠ©æ‚¨å®Œæˆå„ç§ç¼–ç¨‹ä»»åŠ¡ã€‚ä»¥ä¸‹æ˜¯æˆ‘çš„åŠŸèƒ½å’Œä½¿ç”¨æŒ‡å—ï¼š</p>
<h3 id="åŠŸèƒ½"><a href="#åŠŸèƒ½" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h3><ol>
<li><strong>ä»£ç ç¼–å†™</strong>ï¼šç¼–å†™é«˜æ•ˆã€å¯è¯»ã€æ¸…æ™°ä¸”å¯ç»´æŠ¤çš„ä»£ç ã€‚</li>
<li><strong>ä»£ç è°ƒè¯•</strong>ï¼šåˆ†æå’Œä¿®å¤ä»£ç ä¸­çš„é”™è¯¯ã€‚</li>
<li><strong>ä»£ç è§£é‡Š</strong>ï¼šé€æ­¥è§£é‡Šä»£ç çš„å·¥ä½œåŸç†ã€‚</li>
<li><strong>ä»£ç å®¡æŸ¥</strong>ï¼šæ£€æŸ¥ä»£ç çš„åŠŸèƒ½ï¼Œç¡®ä¿å…¶æ— é”™è¯¯ï¼Œå¹¶æä¾›æ”¹è¿›å»ºè®®ã€‚</li>
<li><strong>API æ–‡æ¡£é˜…è¯»</strong>ï¼šå¸®åŠ©è§£æå’Œç†è§£ API æ–‡æ¡£ã€‚</li>
<li><strong>å®æ—¶æœç´¢</strong>ï¼šæ‰§è¡Œå®æ—¶æœç´¢ä»¥æ£€ç´¢æœ€æ–°æ•°æ®æˆ–ä¿¡æ¯ã€‚</li>
<li><strong>å•å…ƒæµ‹è¯•ç¼–å†™</strong>ï¼šç¼–å†™å•å…ƒæµ‹è¯•ä»¥éªŒè¯ä»£ç çš„åŠŸèƒ½ã€‚</li>
</ol>
<h3 id="ä½¿ç”¨æŒ‡å—"><a href="#ä½¿ç”¨æŒ‡å—" class="headerlink" title="ä½¿ç”¨æŒ‡å—"></a>ä½¿ç”¨æŒ‡å—</h3><ol>
<li><strong>æŒ‡å®šè¯­è¨€</strong>ï¼šä½¿ç”¨å‘½ä»¤<code>/start(language?: string)</code>æŒ‡å®šæˆ–è¾“å…¥æ‚¨è¦ä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€ã€‚</li>
<li><strong>ä»£ç ç¼–å†™ä¸è°ƒè¯•</strong>ï¼š<ul>
<li>ç²˜è´´æ‚¨çš„ä»£ç ã€æ–‡æ¡£æˆ–æè¿°å…·ä½“çš„ç¼–ç é—®é¢˜ã€‚</li>
<li>ä½¿ç”¨å‘½ä»¤<code>/quick_fix(any: string)</code>è¿›è¡Œå¿«é€Ÿä¿®å¤ã€‚</li>
<li>ä½¿ç”¨å‘½ä»¤<code>/fix(any: string)</code>è¿›è¡Œè¯¦ç»†çš„è°ƒè¯•ã€‚</li>
</ul>
</li>
<li><strong>ä»£ç è§£é‡Šä¸å®¡æŸ¥</strong>ï¼š<ul>
<li>ä½¿ç”¨å‘½ä»¤<code>/explain(any: string)</code>é€æ­¥è§£é‡Šä»£ç ã€‚</li>
<li>ä½¿ç”¨å‘½ä»¤<code>/review(any: string)</code>å®¡æŸ¥ä»£ç å¹¶æä¾›æ”¹è¿›å»ºè®®ã€‚</li>
</ul>
</li>
<li><strong>API æ–‡æ¡£é˜…è¯»</strong>ï¼šæä¾› API æ–‡æ¡£çš„é“¾æ¥ï¼Œæˆ‘å°†å¸®åŠ©è§£æå’Œç†è§£ã€‚<ul>
<li>ä½¿ç”¨å‘½ä»¤<code>/read(urls: string[])</code>è¯»å–ç½‘é¡µå†…å®¹ã€‚</li>
</ul>
</li>
<li><strong>å®æ—¶æœç´¢</strong>ï¼šä½¿ç”¨å‘½ä»¤<code>/search(any: string)</code>æ‰§è¡Œå®æ—¶æœç´¢ä»¥æ£€ç´¢æœ€æ–°ä¿¡æ¯ã€‚</li>
</ol>
<h3 id="å…·ä½“æ­¥éª¤"><a href="#å…·ä½“æ­¥éª¤" class="headerlink" title="å…·ä½“æ­¥éª¤"></a>å…·ä½“æ­¥éª¤</h3><ol>
<li><strong>ç²˜è´´ä»£ç æˆ–æ–‡æ¡£</strong>ï¼šæä¾›æ‚¨å½“å‰çš„ä»£ç ç‰‡æ®µã€æ–‡æ¡£æˆ–æè¿°æ‚¨é‡åˆ°çš„é—®é¢˜ã€‚</li>
<li><strong>é€‰æ‹©åˆé€‚çš„å‘½ä»¤</strong>ï¼šæ ¹æ®æ‚¨çš„éœ€æ±‚é€‰æ‹©ä¸Šè¿°å‘½ä»¤ä¹‹ä¸€ã€‚</li>
<li><strong>è·å¾—å¸®åŠ©</strong>ï¼šæŸ¥çœ‹æˆ‘çš„å“åº”ï¼Œè·å–è§£å†³æ–¹æ¡ˆæˆ–è¿›ä¸€æ­¥æŒ‡å¯¼ã€‚</li>
</ol>
<h2 id="Code-Tutor"><a href="#Code-Tutor" class="headerlink" title="Code Tutor"></a>Code Tutor</h2><p>ä½ å¥½ï¼æˆ‘æ˜¯ä¸€ä¸ªåä¸ºKhanmigo Liteçš„AIå­¦ä¹ åŠ©æ‰‹ï¼Œç”±Khan Academyä¸OpenAIåˆä½œå¼€å‘ï¼Œæ—¨åœ¨å¸®åŠ©ä½ å­¦ä¹ ç¼–ç¨‹å’Œè®¡ç®—æœºç§‘å­¦ã€‚æˆ‘å¯ä»¥å¸®åŠ©ä½ ç†è§£ç¼–ç¨‹æ¦‚å¿µï¼Œè§£å†³ä»£ç ä¸­çš„é—®é¢˜ï¼Œä»¥åŠæŒ‡å¯¼ä½ å¦‚ä½•æ”¹è¿›ä½ çš„ç¼–ç¨‹æŠ€èƒ½ã€‚</p>
<p>ä½ å¯ä»¥è¿™æ ·ä½¿ç”¨æˆ‘ï¼š</p>
<ol>
<li><strong>ä»£ç é—®é¢˜</strong>ï¼šå¦‚æœä½ åœ¨ç¼–å†™ä»£ç æ—¶é‡åˆ°äº†é—®é¢˜ï¼Œå¯ä»¥æŠŠä»£ç ç²˜è´´è¿‡æ¥ï¼Œå‘Šè¯‰æˆ‘ä½ å¡åœ¨å“ªä¸ªéƒ¨åˆ†ã€‚æˆ‘ä¼šå¸®åŠ©ä½ æ‰¾åˆ°é—®é¢˜å¹¶æŒ‡å¯¼ä½ å¦‚ä½•è§£å†³ã€‚</li>
<li><strong>æ¦‚å¿µç†è§£</strong>ï¼šå¦‚æœä½ å¯¹æŸä¸ªç¼–ç¨‹æ¦‚å¿µä¸å¤ªç†è§£ï¼Œå¯ä»¥å‘æˆ‘æé—®ï¼Œæˆ‘ä¼šå¸®åŠ©ä½ ç†æ¸…æ€è·¯ã€‚</li>
<li><strong>ç®—æ³•è®¾è®¡</strong>ï¼šå¦‚æœä½ éœ€è¦è®¾è®¡ä¸€ä¸ªç®—æ³•æˆ–è§£å†³ä¸€ä¸ªç‰¹å®šçš„é—®é¢˜ï¼Œå¯ä»¥å‘Šè¯‰æˆ‘ä½ çš„æƒ³æ³•ï¼Œæˆ‘ä¼šå¼•å¯¼ä½ ä¸€æ­¥æ­¥å®Œæˆã€‚</li>
</ol>
<p>ä¸ºäº†æ›´å¥½åœ°å¸®åŠ©ä½ ï¼Œè¯·æŠŠä½ çš„ä»£ç æˆ–é—®é¢˜è¯¦ç»†æè¿°ä¸€ä¸‹ï¼Œå¹¶å‘Šè¯‰æˆ‘ä½ ç›®å‰é‡åˆ°çš„å›°éš¾ã€‚æˆ‘ä¼šæ ¹æ®ä½ çš„æè¿°ï¼Œæä¾›æŒ‡å¯¼å’Œå»ºè®®ã€‚ä½ å‡†å¤‡å¥½å¼€å§‹äº†å—ï¼Ÿå¯ä»¥å…ˆä¸Šä¼ ä½ çš„ä½œä¸šæˆ–ä»£ç ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ä½ æ­£åœ¨å¤„ç†ä»€ä¹ˆé—®é¢˜ã€‚</p>
<h2 id="Scholar-GPT"><a href="#Scholar-GPT" class="headerlink" title="Scholar GPT"></a>Scholar GPT</h2><p>ä½ å¥½ï¼æˆ‘æ˜¯Scholar GPTï¼Œä½ çš„å¤šåŠŸèƒ½ç ”ç©¶åŠ©æ‰‹ã€‚æˆ‘å¯ä»¥å¸®åŠ©ä½ è¿›è¡Œæ•°æ®åˆ†æã€å­¦æœ¯ç ”ç©¶ã€æ•°å­¦é—®é¢˜æ±‚è§£ä»¥åŠåœ¨çº¿ä¿¡æ¯æ£€ç´¢ã€‚ä»¥ä¸‹æ˜¯æˆ‘çš„ä¸€äº›ä¸»è¦åŠŸèƒ½å’Œä½¿ç”¨æ–¹æ³•ï¼š</p>
<h3 id="1-æ•°æ®åˆ†æä¸å¯è§†åŒ–"><a href="#1-æ•°æ®åˆ†æä¸å¯è§†åŒ–" class="headerlink" title="1. æ•°æ®åˆ†æä¸å¯è§†åŒ–"></a>1. æ•°æ®åˆ†æä¸å¯è§†åŒ–</h3><p>æˆ‘å¯ä»¥ä½¿ç”¨Pythonåº“ï¼ˆå¦‚Pandasã€Matplotlibç­‰ï¼‰è¿›è¡Œæ•°æ®åˆ†æå’Œå¯è§†åŒ–ã€‚å¦‚æœä½ æœ‰æ•°æ®é›†éœ€è¦åˆ†æï¼Œå¯ä»¥å°†æ•°æ®ä¸Šä¼ ç»™æˆ‘ï¼Œæˆ‘å¯ä»¥ä¸ºä½ ç”Ÿæˆå›¾è¡¨å’Œç»Ÿè®¡æŠ¥å‘Šã€‚</p>
<h3 id="2-å­¦æœ¯ç ”ç©¶"><a href="#2-å­¦æœ¯ç ”ç©¶" class="headerlink" title="2. å­¦æœ¯ç ”ç©¶"></a>2. å­¦æœ¯ç ”ç©¶</h3><p>æˆ‘å¯ä»¥æœç´¢å’Œè·å–å­¦æœ¯è®ºæ–‡å’Œç ”ç©¶æ–‡ç« çš„ä¿¡æ¯ã€‚ä½ å¯ä»¥æä¾›å…·ä½“çš„ç ”ç©¶ä¸»é¢˜æˆ–å…³é”®è¯ï¼Œæˆ‘ä¼šä¸ºä½ æ‰¾åˆ°ç›¸å…³çš„å­¦æœ¯èµ„æºï¼Œå¹¶æä¾›å¼•ç”¨å’Œé“¾æ¥ã€‚</p>
<h3 id="3-ä¸“åˆ©æ£€ç´¢"><a href="#3-ä¸“åˆ©æ£€ç´¢" class="headerlink" title="3. ä¸“åˆ©æ£€ç´¢"></a>3. ä¸“åˆ©æ£€ç´¢</h3><p>æˆ‘å¯ä»¥å¸®åŠ©ä½ æ£€ç´¢ä¸“åˆ©ä¿¡æ¯ã€‚åªéœ€æä¾›å…³é”®è¯å’Œå…¶ä»–è¿‡æ»¤æ¡ä»¶ï¼ˆå¦‚å›½å®¶ã€æ—¶é—´èŒƒå›´ï¼‰ï¼Œæˆ‘ä¼šæ‰¾åˆ°ç›¸å…³çš„ä¸“åˆ©å¹¶æä¾›è¯¦ç»†ä¿¡æ¯ã€‚</p>
<h3 id="4-æ•°å­¦é—®é¢˜æ±‚è§£"><a href="#4-æ•°å­¦é—®é¢˜æ±‚è§£" class="headerlink" title="4. æ•°å­¦é—®é¢˜æ±‚è§£"></a>4. æ•°å­¦é—®é¢˜æ±‚è§£</h3><p>æˆ‘å¯ä»¥è§£å†³å¤æ‚çš„æ•°å­¦é—®é¢˜ï¼ŒåŒ…æ‹¬ç¬¦å·è¿ç®—å’Œæ•°å€¼è®¡ç®—ã€‚å¦‚æœä½ æœ‰ç‰¹å®šçš„æ•°å­¦é—®é¢˜ï¼Œè¯·æè¿°é—®é¢˜çš„è¯¦ç»†å†…å®¹ï¼Œæˆ‘ä¼šä¸ºä½ æä¾›è§£ç­”æ­¥éª¤å’Œç»“æœã€‚</p>
<h3 id="5-ç½‘é¡µæ•°æ®å¤„ç†"><a href="#5-ç½‘é¡µæ•°æ®å¤„ç†" class="headerlink" title="5. ç½‘é¡µæ•°æ®å¤„ç†"></a>5. ç½‘é¡µæ•°æ®å¤„ç†</h3><p>æˆ‘å¯ä»¥ä»ç½‘é¡µä¸Šæå–å’Œå¤„ç†æ•°æ®ã€‚å¦‚æœä½ æœ‰ç‰¹å®šçš„ç½‘å€éœ€è¦åˆ†æï¼Œå¯ä»¥æä¾›é“¾æ¥ï¼Œæˆ‘ä¼šä»ä¸­æå–æœ‰ç”¨çš„ä¿¡æ¯ã€‚</p>
<h3 id="6-è‡ªç„¶è¯­è¨€å¤„ç†"><a href="#6-è‡ªç„¶è¯­è¨€å¤„ç†" class="headerlink" title="6. è‡ªç„¶è¯­è¨€å¤„ç†"></a>6. è‡ªç„¶è¯­è¨€å¤„ç†</h3><p>æˆ‘å¯ä»¥è¿›è¡Œæ–‡æœ¬åˆ†æå’Œæƒ…æ„Ÿåˆ†æç­‰è‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡ã€‚å¦‚æœä½ æœ‰æ–‡æœ¬éœ€è¦åˆ†æï¼Œä¾‹å¦‚æƒ…æ„Ÿå€¾å‘åˆ†ææˆ–å…³é”®è¯æå–ï¼Œå¯ä»¥å°†æ–‡æœ¬æä¾›ç»™æˆ‘ã€‚</p>
<h3 id="ä½¿ç”¨ç¤ºä¾‹"><a href="#ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="ä½¿ç”¨ç¤ºä¾‹"></a>ä½¿ç”¨ç¤ºä¾‹</h3><ol>
<li><strong>æ•°æ®åˆ†æ</strong>ï¼šä¸Šä¼ ä¸€ä¸ªCSVæ–‡ä»¶ï¼Œå¹¶å‘Šè¯‰æˆ‘ä½ å¸Œæœ›åˆ†æçš„å†…å®¹ã€‚</li>
<li><strong>å­¦æœ¯ç ”ç©¶</strong>ï¼šå‘Šè¯‰æˆ‘ä½ æ„Ÿå…´è¶£çš„ç ”ç©¶ä¸»é¢˜ï¼Œä¾‹å¦‚â€œæœºå™¨å­¦ä¹ åœ¨åŒ»å­¦ä¸­çš„åº”ç”¨â€ï¼Œæˆ‘ä¼šä¸ºä½ æ‰¾åˆ°ç›¸å…³çš„å­¦æœ¯æ–‡ç« ã€‚</li>
<li><strong>ä¸“åˆ©æ£€ç´¢</strong>ï¼šæä¾›å…³é”®è¯å’Œè¿‡æ»¤æ¡ä»¶ï¼Œä¾‹å¦‚â€œäººå·¥æ™ºèƒ½ä¸“åˆ©åœ¨ç¾å›½â€ï¼Œæˆ‘ä¼šä¸ºä½ æ£€ç´¢ç›¸å…³ä¸“åˆ©ã€‚</li>
<li><strong>æ•°å­¦é—®é¢˜</strong>ï¼šæè¿°ä½ çš„æ•°å­¦é—®é¢˜ï¼Œä¾‹å¦‚â€œæ±‚è§£å¾®åˆ†æ–¹ç¨‹yâ€™â€™ + y &#x3D; 0â€ï¼Œæˆ‘ä¼šä¸ºä½ æä¾›è§£ç­”ã€‚</li>
</ol>
<h2 id="Write-For-Me"><a href="#Write-For-Me" class="headerlink" title="Write For Me"></a>Write For Me</h2><p>å½“ç„¶ï¼æˆ‘æ˜¯ä¸€ä¸ªä¸“é—¨ä¸ºå†…å®¹åˆ›ä½œå’Œä¼˜åŒ–è®¾è®¡çš„èŠå¤©æœºå™¨äººï¼Œå…·å¤‡ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<ol>
<li><p><strong>ç†è§£ç”¨æˆ·éœ€æ±‚</strong>ï¼š</p>
<ul>
<li>æˆ‘ä¼šè¯¢é—®ä½ çš„å…·ä½“éœ€æ±‚ï¼ŒåŒ…æ‹¬ä½¿ç”¨ç›®çš„ã€ç›®æ ‡å—ä¼—ã€è¯­æ°”ã€å­—æ•°ã€é£æ ¼å’Œå†…å®¹æ ¼å¼ç­‰ï¼Œä»¥ç¡®ä¿æˆ‘èƒ½æä¾›æœ€åˆé€‚çš„å†…å®¹ã€‚</li>
</ul>
</li>
<li><p><strong>åˆ›å»ºå†…å®¹å¤§çº²</strong>ï¼š</p>
<ul>
<li>æ ¹æ®ä½ çš„è¦æ±‚ï¼Œæˆ‘é¦–å…ˆä¼šåˆ›å»ºè¯¦ç»†çš„å¤§çº²ï¼Œå°†å†…å®¹åˆ†æˆä¸åŒéƒ¨åˆ†ï¼Œå¹¶å¯¹æ¯ä¸ªéƒ¨åˆ†è¿›è¡Œæ€»ç»“ï¼Œåˆ†é…å­—æ•°ã€‚</li>
</ul>
</li>
<li><p><strong>å­—æ•°ç®¡ç†</strong>ï¼š</p>
<ul>
<li>æˆ‘åœ¨å†™ä½œè¿‡ç¨‹ä¸­ä¼šæ—¶åˆ»è·Ÿè¸ªå­—æ•°ï¼Œç¡®ä¿ç¬¦åˆä½ çš„è¦æ±‚ï¼Œå¹¶åœ¨å„éƒ¨åˆ†ä¹‹é—´è¿›è¡Œå¹³æ»‘è¿‡æ¸¡ã€‚</li>
</ul>
</li>
<li><p><strong>åˆ›æ„æ‰©å±•</strong>ï¼š</p>
<ul>
<li>æˆ‘ä¼šä½¿ç”¨å„ç§ç­–ç•¥æ¥ä¸°å¯Œå†…å®¹ï¼Œä¾‹å¦‚æ‰©å±•è®¨è®ºã€åŠ å…¥è¦ç‚¹å’Œæœ‰è¶£çš„äº‹å®ï¼ŒåŒæ—¶ä¿æŒå†…å®¹çš„ç›¸å…³æ€§å’Œè´¨é‡ã€‚</li>
</ul>
</li>
<li><p><strong>åˆ†æ®µå†™ä½œå’Œäº¤ä»˜</strong>ï¼š</p>
<ul>
<li>æˆ‘ä¼šæŒ‰éƒ¨åˆ†é€æ­¥å†™ä½œå’Œäº¤ä»˜å†…å®¹ï¼Œéšæ—¶å‘ä½ æ›´æ–°è¿›åº¦ï¼Œå¹¶è®¡åˆ’ä¸‹ä¸€éƒ¨åˆ†çš„å†…å®¹ã€‚</li>
</ul>
</li>
<li><p><strong>å†…å®¹è´¨é‡</strong>ï¼š</p>
<ul>
<li>æˆ‘ä¼šæ•´åˆSEOç­–ç•¥ï¼Œç¡®ä¿å†…å®¹å…·æœ‰å¸å¼•åŠ›ï¼Œé€‚åˆç›®æ ‡å—ä¼—å’Œå‘å¸ƒå¹³å°ã€‚</li>
</ul>
</li>
<li><p><strong>å†…å®¹æ ¼å¼</strong>ï¼š</p>
<ul>
<li>é»˜è®¤æ ¼å¼ä¸ºmarkdownï¼Œä½†æˆ‘å¯ä»¥æ ¹æ®ä½ çš„éœ€æ±‚è°ƒæ•´ä¸ºä»»ä½•æ ¼å¼ã€‚</li>
</ul>
</li>
<li><p><strong>å»¶ä¼¸äº’åŠ¨</strong>ï¼š</p>
<ul>
<li>å¯¹äºå¤æ‚è¯é¢˜æˆ–é•¿ç¯‡å†…å®¹ï¼Œæˆ‘ä¼šæå‰å‘ŠçŸ¥éœ€è¦å¤šæ¬¡å›å¤ï¼Œä»¥ç¡®ä¿æ•´ä¸ªå†…å®¹çš„è¿è´¯æ€§ã€‚</li>
</ul>
</li>
<li><p><strong>é—®é¢˜è§£å†³</strong>ï¼š</p>
<ul>
<li>æˆ‘ä¼šä»¥è§£å†³é—®é¢˜çš„å¿ƒæ€æ¥å¤„ç†ä»»åŠ¡ï¼Œæ—¨åœ¨æ»¡è¶³ä½ çš„å…·ä½“éœ€æ±‚å’ŒæŒ‘æˆ˜ã€‚</li>
</ul>
</li>
</ol>
<p>è¿™äº›åŠŸèƒ½æ—¨åœ¨ä¸ºä½ æä¾›é«˜è´¨é‡ã€å®šåˆ¶åŒ–çš„å†…å®¹åˆ›ä½œæœåŠ¡ã€‚å¦‚æœä½ æœ‰ä»»ä½•å…·ä½“éœ€æ±‚æˆ–é—®é¢˜ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼</p>
<h2 id="Translate-GPT"><a href="#Translate-GPT" class="headerlink" title="Translate GPT"></a>Translate GPT</h2><p>è¿™ä¸ªæ²¡ä»€ä¹ˆå¥½è¯´çš„ã€‚</p>
<h2 id="Image-Generator"><a href="#Image-Generator" class="headerlink" title="Image Generator"></a>Image Generator</h2><p>è¿™æ˜¯ç”¨å®ƒç”Ÿæˆçš„ä¸€å¼ ç§‘å¹»é£æ ¼çš„å®‡å®™æ’ç”»ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202405212116475.webp"
                      alt="DALLÂ·E 2024-05-21 21.15.12 - A detailed sci-fi style illustration of the universe. The scene includes a vast expanse of space filled with colorful nebulae, distant galaxies, and b.webp"
                ></p>
<p>è¿˜æ˜¯å¾ˆä¸é”™çš„ã€‚</p>
<h2 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æˆ‘ä»¬é€šè¿‡å„ç§æ’ä»¶ï¼Œèƒ½å¤Ÿä½¿ç”¨ ChatGPT è”ç½‘äº†è§£åˆ°æœ€æ–°çš„ä¿¡æ¯ï¼Œä¸ºä¸åŒé¢†åŸŸçš„äººæä¾›å‚ç›´ä¿¡æ¯ï¼Œå¢å¼ºäº†ä¿¡æ¯çš„å‡†ç¡®åº¦å’Œä¸“ä¸šæ€§ï¼ŒæŸ¥æ‰¾è®ºæ–‡ã€æ–‡æ¡£ï¼Œæ€»ç»“è§†é¢‘ç­‰ç­‰ã€‚</p>
<p>è¿˜æœ‰è‰ºæœ¯åˆ›æ–°ç±»çš„å·¥ä½œï¼Œæ¯”å¦‚ç”Ÿæˆå›¾ç‰‡&#x2F;è§†é¢‘&#x2F;å›¾æ ‡ï¼Œè¿™äº›éƒ½å¤§å¤§æé«˜äº†æˆ‘ä»¬çš„å·¥ä½œæ•ˆç‡ã€‚</p>
<p>æˆ‘åˆæ¬¡å¯¹ GPT-4 è¿›è¡Œè¾ƒä¸ºæ·±å…¥çš„ä½“éªŒï¼Œä¹‹å‰ä¸€ç›´ç”¨çš„æ˜¯ Bing çš„ 3.5 æ¨¡å‹ï¼Œæ„Ÿè§‰ä¹Ÿä¸è¿‡å¦‚æ­¤ï¼Œä½†ç°åœ¨ç¡®å®è¢« GPT-4 çš„å¼ºå¤§åŠŸèƒ½æ‰€éœ‡æ’¼åˆ°ã€‚å®ƒèƒ½å¤ŸèŠ‚çœå¾ˆå¤šæˆ‘ä»¬åœ¨æŸ¥æ‰¾ç­›é€‰æ•´åˆä¿¡æ¯çš„æ—¶é—´ï¼Œé€šè¿‡å®ƒèƒ½é”»ç‚¼æˆ‘ä»¬æé—®ã€æ€è€ƒã€å†…åŒ–çš„èƒ½åŠ›ï¼Œæœªæ¥ï¼Œä¼šä½¿ç”¨å·¥å…·æ˜¯ä¸€ä¸ªå¿…ä¸å¯å°‘çš„èƒ½åŠ›ã€‚</p>
]]></content>
      <categories>
        <category>Tool</category>
      </categories>
      <tags>
        <tag>chatgpt</tag>
      </tags>
  </entry>
  <entry>
    <title>DataBase_Note</title>
    <url>/2c7dde30.html</url>
    <content><![CDATA[<p>æ•°æ®åº“æ˜¯ä¸€ç§ç»„ç»‡ã€å­˜å‚¨å’Œç®¡ç†æ•°æ®çš„ç³»ç»Ÿã€‚å®ƒå…è®¸ç”¨æˆ·ä»¥ç»“æ„åŒ–çš„æ–¹å¼å­˜å‚¨å’Œæ£€ç´¢æ•°æ®ï¼Œé€šå¸¸é€šè¿‡æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰è¿›è¡Œæ“ä½œã€‚</p>
<h3 id="å¸¸è§ç±»å‹"><a href="#å¸¸è§ç±»å‹" class="headerlink" title="å¸¸è§ç±»å‹"></a>å¸¸è§ç±»å‹</h3><ol>
<li><strong>å…³ç³»å‹æ•°æ®åº“</strong>ï¼šå¦‚ MySQLã€PostgreSQLã€Oracleã€‚ä½¿ç”¨<strong>è¡¨æ ¼</strong>æ¥ç»„ç»‡æ•°æ®ï¼Œé€šè¿‡ SQL è¿›è¡Œæ“ä½œï¼ˆè¿™ä¹ˆè¯´ Excel ä¹Ÿå¯ä»¥æ˜¯ä¸€ç§æ•°æ®åº“ï¼‰ã€‚</li>
<li><strong>éå…³ç³»å‹æ•°æ®åº“ï¼ˆNoSQLï¼‰</strong>ï¼šå¦‚ MongoDBã€Cassandraã€‚ç”¨äºå¤„ç†å¤§è§„æ¨¡å’Œéç»“æ„åŒ–æ•°æ®ï¼Œçµæ´»æ€§æ›´é«˜ã€‚</li>
<li><strong>å†…å­˜æ•°æ®åº“</strong>ï¼šå¦‚ Redisã€Memcachedã€‚ç”¨äºéœ€è¦é«˜é€Ÿè¯»å†™çš„æ•°æ®ï¼Œæ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚</li>
</ol>
<table>
<thead>
<tr>
<th>æ¦‚å¿µ</th>
<th>å…³ç³»å‹æ•°æ®åº“ï¼ˆå¦‚MySQLï¼‰</th>
<th>éå…³ç³»å‹æ•°æ®åº“ï¼ˆå¦‚MongoDBï¼‰</th>
</tr>
</thead>
<tbody><tr>
<td>è¡¨&#x2F;é›†åˆ</td>
<td>è¡¨ï¼ˆTableï¼‰</td>
<td>é›†åˆï¼ˆCollectionï¼‰</td>
</tr>
<tr>
<td>è¡Œ&#x2F;æ–‡æ¡£</td>
<td>è¡Œï¼ˆRowï¼‰</td>
<td>æ–‡æ¡£ï¼ˆDocumentï¼‰</td>
</tr>
<tr>
<td>åˆ—&#x2F;å­—æ®µ</td>
<td>åˆ—ï¼ˆColumnï¼‰</td>
<td>å­—æ®µï¼ˆFieldï¼‰</td>
</tr>
<tr>
<td>æ¨¡å¼</td>
<td>å›ºå®šæ¨¡å¼ï¼ˆSchemaï¼‰</td>
<td>æ— æ¨¡å¼ï¼ˆSchema-lessï¼‰</td>
</tr>
<tr>
<td>å…³ç³»</td>
<td>æ”¯æŒå¤æ‚çš„è¡¨ä¸è¡¨ä¹‹é—´çš„å…³ç³»</td>
<td>ä¸ç›´æ¥æ”¯æŒ</td>
</tr>
</tbody></table>
<h1 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h1><p>é‚£å°±ä» MongoDB å¼€å§‹å­¦èµ·ï¼ŒåŸå› æ˜¯ä¹‹å‰é…ç½® twikoo çš„è¯„è®ºç³»ç»Ÿæ—¶è¯¯æ‰“è¯¯æ’ç”¨åˆ°è¿‡ï¼Œç°åœ¨çš„ä¸€ä¸ªæ–°é¡¹ç›®éœ€è¦ç”¨åˆ°æ•°æ®åº“ã€‚</p>
<p>MongoDB æ˜¯ä¸€ç§æ–‡æ¡£å‹ NoSQL æ•°æ®åº“ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li><strong>æ–‡æ¡£å‹å­˜å‚¨</strong>ï¼šæ•°æ®ä»¥æ–‡æ¡£çš„å½¢å¼å­˜å‚¨ï¼Œæ–‡æ¡£æ˜¯JSONæ ¼å¼çš„ï¼ˆMongoDBä¸­ç§°ä¸ºBSONæ ¼å¼ï¼ŒäºŒè¿›åˆ¶å½¢å¼çš„JSONï¼‰ã€‚</li>
<li><strong>æ— æ¨¡å¼</strong>ï¼šä¸ä¼ ç»Ÿæ•°æ®åº“ä¸åŒï¼ŒMongoDBä¸­çš„æ–‡æ¡£ä¸éœ€è¦å›ºå®šçš„è¡¨ç»“æ„ï¼Œå¯ä»¥çµæ´»åœ°å­˜å‚¨ä¸åŒç»“æ„çš„æ•°æ®ã€‚</li>
<li><strong>æ¨ªå‘æ‰©å±•</strong>ï¼šMongoDBå¯ä»¥å¾ˆå®¹æ˜“åœ°é€šè¿‡å¢åŠ æ›´å¤šçš„æœåŠ¡å™¨èŠ‚ç‚¹æ¥åº”å¯¹æ•°æ®çš„å¢é•¿ï¼Œè€Œä¸éœ€è¦æ›´å¼ºçš„ç¡¬ä»¶ã€‚</li>
</ul>
<p>å¯ä»¥ä¸‹è½½ <a class="link"   href="https://www.mongodb.com/try/download/compass" >Compass<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> ä½¿ç”¨å®ƒçš„ GUI ç•Œé¢ã€‚</p>
<p>å®ƒçš„ç»“æ„æ˜¯ï¼ŒClusterï¼ˆé›†ç¾¤ï¼‰é‡Œæœ‰å¤šä¸ªæ•°æ®åº“ï¼Œæ¯ä¸ªæ•°æ®åº“æ˜¯ç›¸åŒçš„ï¼Œè¿™æ ·ä¸€ä¸ªåˆ†å¸ƒå¼ç»“æ„ä¿è¯å®ƒçš„å®‰å…¨ç¨³å®šã€‚</p>
<p>Databaseï¼ˆæ•°æ®åº“ï¼‰ä¸­æœ‰å¤šä¸ª Collectionï¼ˆé›†åˆï¼‰ï¼Œåœ¨é›†åˆä¸­æœ‰å¤šä¸ª Documentï¼ˆæ–‡æ¡£ï¼‰ï¼Œæ–‡æ¡£å°±æ˜¯å­˜å‚¨æ•°æ®çš„åœ°æ–¹ï¼Œå®ƒçš„æ ¼å¼æ˜¯ BSONï¼ˆJSON çš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œä¾¿äºå­˜å‚¨ï¼‰ï¼ŒFieldï¼ˆå­—æ®µï¼‰å°±æ˜¯é”®ï¼Œä»¥åŠå®ƒæœ‰å¯¹åº”çš„å€¼ã€‚</p>
<h2 id="CRUD"><a href="#CRUD" class="headerlink" title="CRUD"></a>CRUD</h2><p>Create, Read, Update, Deleteï¼Œå››ç§æ•°æ®åº“çš„åŸºæœ¬æ“ä½œã€‚</p>
<p><a class="link"   href="https://www.mongodb.com/zh-cn/docs/manual/crud/" >æ–‡æ¡£<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
]]></content>
      <categories>
        <category>Back-End</category>
      </categories>
      <tags>
        <tag>database</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker Install &amp; Usage</title>
    <url>/4a7ef8fa.html</url>
    <content><![CDATA[<blockquote>
<p>In ubuntu24.04</p>
</blockquote>
<p>Docker Desktop is not supported for ubuntu24.04.</p>
<ol>
<li>å¸è½½æ—§ç‰ˆæœ¬</li>
</ol>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get remove docker \</span><br><span class="line">               docker-engine \</span><br><span class="line">               docker.io</span><br></pre></td></tr></table></figure></div>

<ol start="2">
<li>æ›´æ–°ç³»ç»Ÿè½¯ä»¶åŒ…</li>
</ol>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="built_in">sudo</span> apt upgrade</span><br></pre></td></tr></table></figure></div>

<ol start="3">
<li>å®‰è£…ä¾èµ–</li>
</ol>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install \</span><br><span class="line">    apt-transport-https \</span><br><span class="line">    ca-certificates \</span><br><span class="line">    curl \</span><br><span class="line">    gnupg \</span><br><span class="line">    lsb-release \</span><br><span class="line">    software-properties-common \</span><br><span class="line">    uidmap </span><br></pre></td></tr></table></figure></div>

<ol start="4">
<li>é…ç½®è½¯ä»¶æº</li>
</ol>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | <span class="built_in">sudo</span> gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg</span><br><span class="line"><span class="built_in">echo</span> \</span><br><span class="line">  <span class="string">&quot;deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://mirrors.aliyun.com/docker-ce/linux/ubuntu \</span></span><br><span class="line"><span class="string">  <span class="subst">$(lsb_release -cs)</span> stable&quot;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> /etc/apt/sources.list.d/docker.list &gt; /dev/null</span><br></pre></td></tr></table></figure></div>

<ol start="5">
<li>å®‰è£… Docker</li>
</ol>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin</span><br></pre></td></tr></table></figure></div>

<p>ä½¿ç”¨ <code>docker --version</code> éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸã€‚</p>
<ol start="6">
<li>å¯åŠ¨ Docker</li>
</ol>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> docker</span><br><span class="line"><span class="built_in">sudo</span> systemctl start docker</span><br></pre></td></tr></table></figure></div>

<ol start="7">
<li>æ·»åŠ ç”¨æˆ·ç»„</li>
</ol>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> groupadd docker</span><br><span class="line"><span class="built_in">sudo</span> usermod -aG docker <span class="variable">$USER</span></span><br></pre></td></tr></table></figure></div>

<ol start="8">
<li>æµ‹è¯•</li>
</ol>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">docker run hello-world</span><br><span class="line"></span><br><span class="line">Unable to find image <span class="string">&#x27;hello-world:latest&#x27;</span> locally</span><br><span class="line">latest: Pulling from library/hello-world</span><br><span class="line">c1ec31eb5944: Pull complete </span><br><span class="line">Digest: sha256:91fb4b041da273d5a3273b6d587d62d518300a6ad268b28628f74997b93171b2</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> hello-world:latest</span><br><span class="line"></span><br><span class="line">Hello from Docker!</span><br><span class="line">This message shows that your installation appears to be working correctly.</span><br><span class="line"></span><br><span class="line">To generate this message, Docker took the following steps:</span><br><span class="line"> 1. The Docker client contacted the Docker daemon.</span><br><span class="line"> 2. The Docker daemon pulled the <span class="string">&quot;hello-world&quot;</span> image from the Docker Hub.</span><br><span class="line">    (amd64)</span><br><span class="line"> 3. The Docker daemon created a new container from that image <span class="built_in">which</span> runs the</span><br><span class="line">    executable that produces the output you are currently reading.</span><br><span class="line"> 4. The Docker daemon streamed that output to the Docker client, <span class="built_in">which</span> sent it</span><br><span class="line">    to your terminal.</span><br><span class="line"></span><br><span class="line">To try something more ambitious, you can run an Ubuntu container with:</span><br><span class="line"> $ docker run -it ubuntu bash</span><br><span class="line"></span><br><span class="line">Share images, automate workflows, and more with a free Docker ID:</span><br><span class="line"> https://hub.docker.com/</span><br><span class="line"></span><br><span class="line">For more examples and ideas, visit:</span><br><span class="line"> https://docs.docker.com/get-started/</span><br></pre></td></tr></table></figure></div>

<ol start="9">
<li>ç»ˆç«¯ç™»é™† Dockerhub</li>
</ol>
<p>å…ˆå» <a class="link"   href="https://hub.docker.com/" >Dockerhub<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> æ³¨å†Œä¸€ä¸ªè´¦å·ï¼Œç„¶ååœ¨å³ä¸Šè§’ç‚¹å‡»å¤´åƒï¼Œç‚¹å‡» <code>Account Settings</code>ï¼Œåœ¨ <code>Security</code> ä¸­ç‚¹å‡» <code>Personal access tokens</code>ï¼Œç„¶åæ–°å»ºä¸€ä¸ª Tokenï¼Œç¼–è¾‘å¯¹åº”åç§°å’Œæƒé™åï¼Œä½¿ç”¨å®ƒæ‰€ç»™å‡ºçš„å‘½ä»¤å³å¯ã€‚</p>
<p>è‹¥å‡ºç° <code>Error saving credentials: error storing credentials - err: exec: &quot;docker-credential-desktop&quot;: executable file not found in $PATH, out: `` </code>ï¼Œåˆ™ç¼–è¾‘ <code>~/.docker.config.json</code>ï¼ŒæŠŠ <code>credsStore</code> ä¸€é¡¹åˆ é™¤å³å¯ã€‚</p>
<ol start="10">
<li>è®¾ç½®å¼€æœºè‡ªå¯åŠ¨</li>
</ol>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> docker</span><br></pre></td></tr></table></figure></div>

<ol start="11">
<li>æ£€æŸ¥ Docker æœåŠ¡çŠ¶æ€</li>
</ol>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl status docker</span><br><span class="line"></span><br><span class="line">â— docker.service - Docker Application Container Engine</span><br><span class="line">     Loaded: loaded (/usr/lib/systemd/system/docker.service; enabled; preset: enabled)</span><br><span class="line">    Drop-In: /etc/systemd/system/docker.service.d</span><br><span class="line">             â””â”€http-proxy.conf</span><br><span class="line">     Active: active (running) since Fri 2024-09-13 12:42:41 CST; 41min ago</span><br><span class="line">TriggeredBy: â— docker.socket</span><br><span class="line">       Docs: https://docs.docker.com</span><br><span class="line">   Main PID: 142120 (dockerd)</span><br><span class="line">      Tasks: 20</span><br><span class="line">     Memory: 23.8M (peak: 29.9M)</span><br><span class="line">        CPU: 788ms</span><br><span class="line">     CGroup: /system.slice/docker.service</span><br><span class="line">             â””â”€142120 /usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.s</span><br></pre></td></tr></table></figure></div>

<ol start="12">
<li>é…ç½® rootlessï¼ˆé€‰ï¼‰</li>
</ol>
<p>æ”¾ä¸ª<a class="link"   href="https://docs.docker.com/engine/security/rootless/" >å®˜æ–¹æ–‡æ¡£é“¾æ¥<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<ol start="13">
<li>é€šè¿‡ Github Action å®ç° Docker é•œåƒè‡ªåŠ¨åŒ–æ„å»ºå’Œæ¨é€</li>
</ol>
<div class="code-container" data-rel="Yml"><figure class="iseeu highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Build</span> <span class="string">and</span> <span class="string">Push</span> <span class="string">Docker</span> <span class="string">Image</span> <span class="string">with</span> <span class="string">Incremental</span> <span class="string">Tagging</span> <span class="string">and</span> <span class="string">Version</span> <span class="string">Bump</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">repository</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">fetch-depth:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">tags:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Get</span> <span class="string">the</span> <span class="string">latest</span> <span class="string">Git</span> <span class="string">tag</span></span><br><span class="line">      <span class="attr">id:</span> <span class="string">get_tag</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">        TAG=$(git describe --tags --abbrev=0 || echo &quot;v0.0&quot;)</span></span><br><span class="line"><span class="string">        echo &quot;Latest tag: $TAG&quot;</span></span><br><span class="line"><span class="string">        echo &quot;CURRENT_TAG=$TAG&quot; &gt;&gt; $GITHUB_ENV</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Calculate</span> <span class="string">new</span> <span class="string">tag</span> <span class="string">with</span> <span class="string">version</span> <span class="string">bump</span></span><br><span class="line">      <span class="attr">id:</span> <span class="string">calc_new_tag</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">        CURRENT_TAG=$&#123;&#123; env.CURRENT_TAG &#125;&#125;</span></span><br><span class="line"><span class="string">        VERSION=$(echo $CURRENT_TAG | sed &#x27;s/v//g&#x27;)  </span></span><br><span class="line"><span class="string">        MAJOR=$(echo $VERSION | cut -d. -f1)  </span></span><br><span class="line"><span class="string">        MINOR=$(echo $VERSION | cut -d. -f2)  </span></span><br><span class="line"><span class="string"></span>        </span><br><span class="line">        <span class="string">if</span> [ <span class="string">$MINOR</span> <span class="string">-lt</span> <span class="number">9</span> ]<span class="string">;</span> <span class="string">then</span></span><br><span class="line">          <span class="string">NEW_MINOR=$((MINOR+1))</span>  </span><br><span class="line">          <span class="string">NEW_TAG=&quot;v$MAJOR.$NEW_MINOR&quot;</span></span><br><span class="line">        <span class="string">else</span></span><br><span class="line">          <span class="string">NEW_MAJOR=$((MAJOR+1))</span>  </span><br><span class="line">          <span class="string">NEW_MINOR=0</span>  </span><br><span class="line">          <span class="string">NEW_TAG=&quot;v$NEW_MAJOR.$NEW_MINOR&quot;</span></span><br><span class="line">        <span class="string">fi</span></span><br><span class="line"></span><br><span class="line">        <span class="string">echo</span> <span class="string">&quot;New tag: $NEW_TAG&quot;</span></span><br><span class="line">        <span class="string">echo</span> <span class="string">&quot;NEW_TAG=$NEW_TAG&quot;</span> <span class="string">&gt;&gt;</span> <span class="string">$GITHUB_ENV</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Log</span> <span class="string">in</span> <span class="string">to</span> <span class="string">DockerHub</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">docker/login-action@v2</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">username:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DOCKERHUB_USERNAME</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">password:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DOCKERHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">and</span> <span class="string">tag</span> <span class="string">Docker</span> <span class="string">image</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">        docker build -t $&#123;&#123; secrets.DOCKERHUB_USERNAME &#125;&#125;/technews-frontend:$&#123;&#123; env.NEW_TAG &#125;&#125; .</span></span><br><span class="line"><span class="string">        docker tag $&#123;&#123; secrets.DOCKERHUB_USERNAME &#125;&#125;/technews-frontend:$&#123;&#123; env.NEW_TAG &#125;&#125; $&#123;&#123; secrets.DOCKERHUB_USERNAME &#125;&#125;/technews-frontend:latest</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Push</span> <span class="string">Docker</span> <span class="string">image</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">        docker push $&#123;&#123; secrets.DOCKERHUB_USERNAME &#125;&#125;/technews-frontend:$&#123;&#123; env.NEW_TAG &#125;&#125;</span></span><br><span class="line"><span class="string">        docker push $&#123;&#123; secrets.DOCKERHUB_USERNAME &#125;&#125;/technews-frontend:latest</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Set</span> <span class="string">up</span> <span class="string">Git</span> <span class="string">credentials</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">        git config user.name &quot;github-actions[bot]&quot;</span></span><br><span class="line"><span class="string">        git config user.email &quot;github-actions[bot]@users.noreply.github.com&quot;</span></span><br><span class="line"><span class="string">        git remote set-url origin https://x-access-token:$&#123;&#123; secrets.GITHUB_TOKEN &#125;&#125;@github.com/$&#123;&#123; github.repository &#125;&#125;.git</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Create</span> <span class="string">new</span> <span class="string">Git</span> <span class="string">tag</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">        git tag $&#123;&#123; env.NEW_TAG &#125;&#125;</span></span><br><span class="line"><span class="string">        git push origin $&#123;&#123; env.NEW_TAG &#125;&#125;</span></span><br></pre></td></tr></table></figure></div>]]></content>
      <categories>
        <category>Tool</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Flutter Note</title>
    <url>/7b1ef955.html</url>
    <content><![CDATA[<p><a href="https://flutter.dev/"><code>Flutter</code></a> æ˜¯åŸºäº <a href="https://dart.dev/"><code>dart</code></a> çš„ä¸€ä¸ªè·¨å¹³å°æ¡†æ¶ã€‚</p>
<p><code>dart</code> æ˜¯ä¸ <code>C#</code> ç›¸ä¼¼çš„é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ã€‚</p>
<p>Core concept is: Widget inside Widget.</p>
<p>å¯¹è±¡åµŒå¥—å¯¹è±¡ã€‚</p>
<h2 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h2><p>æœ‰ä»¥ä¸‹ç±»å‹çš„å˜é‡ï¼š</p>
<ul>
<li><code>var</code>ï¼šå¸¦æœ‰å¼ºç±»å‹æ¨æ–­</li>
<li><code>int</code></li>
<li><code>String</code></li>
<li><code>List</code></li>
<li><code>Map</code></li>
<li><code>double</code></li>
</ul>
<p>æœ‰ä»¥ä¸‹å…³é”®å­—ï¼š</p>
<ul>
<li><code>const</code>ï¼šç¼–è¯‘æ—¶å¸¸é‡</li>
<li><code>final</code>ï¼šè¿è¡Œæ—¶å¸¸é‡</li>
</ul>
<hr>
<p>éœ€è¦æœ‰ä¸€ä¸ª <code>main()</code> å‡½æ•°ï¼Œè¿™ç‚¹ä¸ <code>c++</code> ç±»ä¼¼ã€‚</p>
<hr>
<p>å¯ä»¥é€šè¿‡ <code>@override</code> å…³é”®å­—è¦†å†™æ–¹æ³•ã€‚</p>
<p>åŒ¿åå‡½æ•°å®ç°ï¼š</p>
<div class="code-container" data-rel="Dart"><figure class="iseeu highlight dart"><table><tr><td class="code"><pre><span class="line">() &#123;</span><br><span class="line">	<span class="built_in">print</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// equal to</span></span><br><span class="line"></span><br><span class="line">() =&gt; <span class="built_in">print</span>()</span><br></pre></td></tr></table></figure></div>

<p>ä¸åŒçš„æ˜¯ï¼Œç®­å¤´å‡½æ•°åªå¯ä»¥æœ‰ä¸€è¡Œã€‚</p>
<p>è®¿é—®é¢œè‰²éœ€è¦é€šè¿‡ <code>Colors</code> å¯¹è±¡ã€‚</p>
<p>è®¿é—®å›¾æ ‡éœ€è¦é€šè¿‡ <code>Icons</code> å¯¹è±¡ã€‚</p>
<p>è®¿é—®å›¾åƒæ—¶ï¼š</p>
<ul>
<li>å¦‚æœæ˜¯ç½‘é¡µå›¾ç‰‡ï¼Œä½¿ç”¨ <code>Image.network(url)</code></li>
<li>å¦‚æœæ˜¯æœ¬åœ°å›¾ç‰‡ï¼Œéœ€è¦å…ˆåœ¨ <code>pubspec.yml</code> ä¸­æ·»åŠ  assets è·¯å¾„ï¼Œç„¶åä½¿ç”¨ <code>Image.asset(path)</code></li>
</ul>
<p>æœ‰ä»¥ä¸‹å‡ å¤§ä¸»è¦ç»„ä»¶ï¼š</p>
<ul>
<li><code>Row</code></li>
<li><code>Column</code></li>
</ul>
<p>è¿™ä¸¤è€…å¯¹åº” <code>flex</code> æ–¹å‘ä¸ºè¡Œå’Œåˆ—çš„å®¹å™¨ï¼Œä¹Ÿæœ‰ä¸»è½´å’Œäº¤å‰è½´çš„æ¦‚å¿µã€‚</p>
<p>é»˜è®¤ä¸»è½´æ–¹å‘æ— é™é•¿ï¼Œæ­¤æ—¶å¦‚æœæœ‰å­å…ƒç´ çš„å®½åº¦&#x2F;é«˜åº¦å’Œä¸»è½´ä¸€æ ·æ˜¯ <code>double.infinity</code> ä¼šæŠ¥é”™ã€‚</p>
<p>äº¤å‰è½´æ–¹å‘å¤§å°ç”±çˆ¶å…ƒç´ å†³å®šã€‚</p>
<ul>
<li><code>Center</code></li>
</ul>
<p>å±…ä¸­å…ƒç´ ã€‚</p>
<ul>
<li><code>Container</code></li>
</ul>
<p>ç­‰ä»·äº <code>&lt;div&gt;</code> æ ‡ç­¾ï¼Œå¯ä»¥è®¾ç½®é¢œè‰²å¤§å°ï¼Œmarginã€paddingå’Œå„ç§è£…é¥°ã€‚</p>
<ul>
<li><code>SizedBox</code></li>
</ul>
<p>ä»…ä»…èƒ½è®¾ç½®å¤§å°çš„ä¸€ä¸ªç›’å­ï¼Œç”¨äºä¼˜åŒ–æ€§èƒ½ã€‚</p>
<ul>
<li><code>Padding</code></li>
</ul>
<p>ä»…ä»…èƒ½è®¾ç½® padding çš„ä¸€ä¸ªç›’å­ï¼Œç”¨äºä¼˜åŒ–æ€§èƒ½ã€‚</p>
<ul>
<li><code>Text</code></li>
<li><code>ListTile</code><ul>
<li><code>leading</code></li>
<li><code>title</code></li>
<li><code>titleColor</code></li>
<li><code>trailing</code></li>
<li><code>title</code></li>
<li><code>onTap</code></li>
</ul>
</li>
</ul>
<p>ä¸€ä¸ªå æ®æ•´è¡Œçš„ç›’å­ï¼Œå¯ä»¥è®¾ç½®å„ç§æ ·å¼å’Œç‚¹å‡»äº‹ä»¶ã€‚</p>
]]></content>
      <categories>
        <category>Front-End</category>
      </categories>
      <tags>
        <tag>dart</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/4a17b156.html</url>
    <content><![CDATA[<h1 id="H1"><a href="#H1" class="headerlink" title="H1"></a>H1</h1><h2 id="H2"><a href="#H2" class="headerlink" title="H2"></a>H2</h2><h3 id="H3"><a href="#H3" class="headerlink" title="H3"></a>H3</h3><h4 id="H4"><a href="#H4" class="headerlink" title="H4"></a>H4</h4><h5 id="H5"><a href="#H5" class="headerlink" title="H5"></a>H5</h5><h6 id="H6"><a href="#H6" class="headerlink" title="H6"></a>H6</h6><p><strong>Bold</strong></p>
<p><em>Italic</em></p>
<p><del>remove</del></p>
<p>text</p>
<p><code>code inline</code></p>
<pre class="mermaid">pie
title P
"1" : 10
"2" : 10
"3" : 50
"4" : 30</pre>


  <div class="note-large ä¿¡æ¯">
    <div class="notel-title rounded-t-lg p-3 font-bold text-lg flex flex-row gap-2 items-center">
      <p>Note</p>

    </div>
    <div class="notel-content markdown-body">
      <p>æ¢è¡Œæµ‹è¯•<br>æ¢è¡Œæµ‹è¯•<br>æ¢è¡Œæµ‹è¯•</p>

    </div>
  </div>

<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; PII;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> x first </span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> y second</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1010</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">char</span> g[N][N];</span><br><span class="line"><span class="type">int</span> dist[N][N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">BFS</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(dist, <span class="number">-1</span>, <span class="built_in">sizeof</span>(dist));</span><br><span class="line">    queue&lt;PII&gt; q;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(g[i][j] == <span class="string">&#x27;1&#x27;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                dist[i][j] = <span class="number">0</span>;</span><br><span class="line">                q.<span class="built_in">push</span>(&#123;i, j&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> dx[] = &#123;<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>&#125;;</span><br><span class="line">    <span class="type">int</span> dy[] = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">-1</span>&#125;;</span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">auto</span> t = q.<span class="built_in">front</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> nx = t.x + dx[i];</span><br><span class="line">            <span class="type">int</span> ny = t.y + dy[i];</span><br><span class="line">            <span class="keyword">if</span>(nx &lt; <span class="number">0</span> || nx &gt;= n || ny &lt; <span class="number">0</span> || ny &gt;= m) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>(dist[nx][ny] != <span class="number">-1</span>) <span class="keyword">continue</span>;</span><br><span class="line">            dist[nx][ny] = dist[t.x][t.y] + <span class="number">1</span>;</span><br><span class="line">            q.<span class="built_in">push</span>(&#123;nx, ny&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, g[i]);</span><br><span class="line">    <span class="built_in">BFS</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; ++j)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, dist[i][j]);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>$$<br>\begin{aligned}<br>a + b &amp; &#x3D; 2 \<br>&amp; &#x3D; 1 \<br>&amp; &#x3D; a - b \<br>\end{aligned}<br>$$</p>
<p>$a + b &#x3D; 1$</p>

  <div class="note-large default">
    <div class="notel-title rounded-t-lg p-3 font-bold text-lg flex flex-row gap-2 items-center">
      <i class="notel-icon fa-solid fa-info"></i><p>ä¿¡æ¯</p>

    </div>
    <div class="notel-content markdown-body">
      <p>æ¢è¡Œæµ‹è¯•<br>æ¢è¡Œæµ‹è¯•<br>æ¢è¡Œæµ‹è¯•</p>

    </div>
  </div>

  <div class="note-large blue">
    <div class="notel-title rounded-t-lg p-3 font-bold text-lg flex flex-row gap-2 items-center">
      <p>æç¤º</p>

    </div>
    <div class="notel-content markdown-body">
      <p>æ¢è¡Œæµ‹è¯•<br>æ¢è¡Œæµ‹è¯•<br>æ¢è¡Œæµ‹è¯•</p>

    </div>
  </div>

  <div class="note-large red">
    <div class="notel-title rounded-t-lg p-3 font-bold text-lg flex flex-row gap-2 items-center">
      <p>è‡ªå®šä¹‰æ ‡é¢˜</p>

    </div>
    <div class="notel-content markdown-body">
      <p>æ¢è¡Œæµ‹è¯•<br>æ¢è¡Œæµ‹è¯•<br>æ¢è¡Œæµ‹è¯•</p>

    </div>
  </div>


  <div class="note p-4 mb-4 rounded-small markdown-body default">
    <p>é»˜è®¤ æç¤ºå—æ ‡ç­¾</p>

  </div>

  <div class="note p-4 mb-4 rounded-small markdown-body default">
    <p>default æç¤ºå—æ ‡ç­¾</p>

  </div>

  <div class="note p-4 mb-4 rounded-small markdown-body primary">
    <p>primary æç¤ºå—æ ‡ç­¾</p>

  </div>

  <div class="note p-4 mb-4 rounded-small markdown-body success">
    <p>success æç¤ºå—æ ‡ç­¾</p>

  </div>

  <div class="note p-4 mb-4 rounded-small markdown-body info">
    <p>info æç¤ºå—æ ‡ç­¾</p>

  </div>

  <div class="note p-4 mb-4 rounded-small markdown-body warning">
    <p>warning æç¤ºå—æ ‡ç­¾</p>

  </div>

  <div class="note p-4 mb-4 rounded-small markdown-body danger">
    <p>danger æç¤ºå—æ ‡ç­¾</p>

  </div>

  <div class="note p-4 mb-4 rounded-small markdown-body red icon-padding">
    <i class="note-icon fa-solid fa-bolt"></i><p>è‡ªå®šä¹‰æç¤ºå—æ ‡ç­¾</p>

  </div>

<details class="blue" data-header-exclude>
    <summary><i class="fa-solid fa-chevron-right"></i>Folding æµ‹è¯•ï¼š ç‚¹å‡»æŸ¥çœ‹æ›´å¤š </summary>
    <div class='content markdown-body'>
      <p>å•Šå•Šå•Šå•Šå•Š</p>
  <div class="note p-4 mb-4 rounded-small markdown-body danger">
    <p>danger æç¤ºå—æ ‡ç­¾</p>

  </div>
 

  <div class="note p-4 mb-4 rounded-small markdown-body tip">
    <p>tip æç¤ºå—æ ‡ç­¾</p>

  </div>
 
    </div>
  </details>

<details class="red" data-header-exclude>
    <summary><i class="fa-solid fa-chevron-right"></i>title </summary>
    <div class='content markdown-body'>
      <p>Yes.</p>

    </div>
  </details>

<div class="tabs" id="tab-first-unique-name"><ul class="nav-tabs"><li class="tab active"><a class="#first-unique-name-1">First Tab</a></li><li class="tab"><a class="#first-unique-name-2">Second Tab</a></li><li class="tab"><a class="#first-unique-name-3">Third Tab</a></li></ul><div class="tab-content"><div class="tab-pane active" id="first-unique-name-1"><p><strong>This is Tab 1.</strong></p></div><div class="tab-pane" id="first-unique-name-2"><p><strong>This is Tab 2.</strong></p>
<p>This is Tab 2.</p></div><div class="tab-pane" id="first-unique-name-3"><p><strong>This is Tab 3.</strong></p>
<p>This is Tab 3.</p>
<p>This is Tab 3.</p></div></div></div>

<p>ä¸è®¾ç½®ä»»ä½•å‚æ•°çš„ <a class="button " href='/' title='æŒ‰é’®'>æŒ‰é’®</a> é€‚åˆèå…¥æ®µè½ä¸­ã€‚</p>
<p>regular æŒ‰é’®é€‚åˆç‹¬ç«‹äºæ®µè½ä¹‹å¤–ï¼š</p>
<a class="button regular" href='https://www.ohevan.com' title='ç¤ºä¾‹åšå®¢'><i class='fa-solid fa-play-circle'></i> ç¤ºä¾‹åšå®¢</a>
<a class="button regular" href='https://www.ohevan.com' title='ç¤ºä¾‹åšå®¢'><i class='fa-solid fa-play-circle'></i> ç¤ºä¾‹åšå®¢</a>
<p>large æŒ‰é’®æ›´å…·æœ‰å¼ºè°ƒä½œç”¨ï¼Œå»ºè®®æ­é… center ä½¿ç”¨ï¼š</p>
<a class="button center large" href='https://redefine-docs.ohevan.com' title='å¼€å§‹ä½¿ç”¨'><i class='fa-solid fa-download'></i> å¼€å§‹ä½¿ç”¨</a>

]]></content>
      <categories>
        <category>world</category>
      </categories>
      <tags>
        <tag>demo</tag>
      </tags>
  </entry>
  <entry>
    <title>Implementing Vue Reactivity Using Javascript</title>
    <url>/57511a32.html</url>
    <content><![CDATA[<p>ä»£ç æ€è·¯ï¼š</p>
<p>å…ˆå°†æ¯ä¸ªå˜é‡æ³¨å…¥åˆ° Vue å®ä¾‹ä¸­ï¼Œä½¿æˆ‘ä»¬ä¸å¿…é€šè¿‡ data è®¿é—®ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ Vue å®ä¾‹è®¿é—®ã€‚</p>
<p>ç„¶åä¸ºæ¯ä¸€ä¸ªé”®ï¼ˆå˜é‡ï¼‰åˆ›å»ºä¸€ä¸ª Observerã€‚</p>
<p>æœ€åè§£ææ•´ä¸ªé¡µé¢æ¨¡æ¿ï¼Œä¸ºæ‰€æœ‰çš„å¼•ç”¨å˜é‡çš„åœ°æ–¹åˆ›å»ºä¸€ä¸ª Watcherï¼Œç„¶åæŠŠå®ƒåŠ åˆ°å¯¹åº”çš„ Dep ä¸­ï¼Œä¸€ä¸ªå˜é‡å¯¹åº”ä¸€ä¸ª Dep ä½†æ˜¯ä¸€ä¸ªå˜é‡å¯ä»¥è¢«å¤šæ¬¡å¼•ç”¨ï¼Œæ¯ä¸€ä¸ªå¼•ç”¨éƒ½æ˜¯ä¸€ä¸ª Watcherï¼Œè¿™æ ·åœ¨ä¸€ä¸ª Watcher æ”¹å˜æ—¶ï¼Œå®ƒçš„ setter å°±ä¼šè§¦å‘å®ƒæ‰€åœ¨çš„ Dep çš„æ›´æ–°ã€‚</p>
<p>ä¸­é—´å¯¹äºæ•°æ®çš„æ›¿æ¢å’Œæ›´æ–°ç”¨åˆ°äº†ä¸€ç³»åˆ—çš„å­—ç¬¦ä¸²æ“ä½œå’Œæ­£åˆ™è¡¨è¾¾å¼ã€‚</p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Watcher</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">vm, key, callback</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">vm</span> = vm;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">key</span> = key;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">callback</span> = callback;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// target åœ¨ä½¿ç”¨æ—¶ä¸éœ€è¦æ˜¾å¼å£°æ˜</span></span><br><span class="line">    <span class="title class_">Dep</span>.<span class="property">target</span> = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">oldValue</span> = vm[key];</span><br><span class="line">    <span class="comment">// æ¿€æ´» getterï¼Œå°†è¿™ä¸ªå€¼çš„ Watcher æ·»åŠ åˆ°å®ƒæ‰€åœ¨å¯¹è±¡çš„ Sub</span></span><br><span class="line">    <span class="title class_">Dep</span>.<span class="property">target</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="comment">// é‡ç½® target</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">update</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> newValue = <span class="variable language_">this</span>.<span class="property">vm</span>[<span class="variable language_">this</span>.<span class="property">key</span>];</span><br><span class="line">    <span class="keyword">if</span> (newValue === <span class="variable language_">this</span>.<span class="property">oldValue</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">callback</span>(newValue);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">oldValue</span> = newValue;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Compile</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">vm</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">vm</span> = vm;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">el</span> = vm.<span class="property">$el</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">compile</span>(<span class="variable language_">this</span>.<span class="property">el</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">compile</span>(<span class="params">el</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> childNodes = el.<span class="property">childNodes</span>;</span><br><span class="line">    <span class="title class_">Array</span>.<span class="title function_">from</span>(childNodes).<span class="title function_">forEach</span>(<span class="function">(<span class="params">node</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (node.<span class="property">nodeType</span> === <span class="number">3</span>) &#123; <span class="comment">// text</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">compileText</span>(node);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (node.<span class="property">nodeType</span> === <span class="number">1</span>) &#123; <span class="comment">// element</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">compileElement</span>(node);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// è¿˜æœ‰å­èŠ‚ç‚¹</span></span><br><span class="line">      <span class="keyword">if</span> (node.<span class="property">childNodes</span> &amp;&amp; node.<span class="property">childNodes</span>.<span class="property">length</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">compile</span>(node);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">compileElement</span>(<span class="params">node</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> reg = <span class="regexp">/^v-([\w-]+)$/</span>;</span><br><span class="line">    <span class="keyword">const</span> regx = <span class="regexp">/:([\w-]+)=&quot;([^&quot;]+)&quot;/</span>;</span><br><span class="line">    <span class="title class_">Array</span>.<span class="title function_">from</span>(node.<span class="property">attributes</span>).<span class="title function_">forEach</span>(<span class="function">(<span class="params">attr</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> match = regx.<span class="title function_">exec</span>(<span class="string">`<span class="subst">$&#123;attr.name&#125;</span>=&quot;<span class="subst">$&#123;attr.value&#125;</span>&quot;`</span>);</span><br><span class="line">      <span class="keyword">if</span> (match) &#123;</span><br><span class="line">        <span class="keyword">const</span> name = match[<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">const</span> value = match[<span class="number">2</span>];</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Watcher</span>(<span class="variable language_">this</span>.<span class="property">vm</span>, value, <span class="function">(<span class="params">newValue</span>) =&gt;</span> &#123;</span><br><span class="line">          node.<span class="title function_">setAttribute</span>(name, newValue);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> ((match = reg.<span class="title function_">exec</span>(attr.<span class="property">name</span>))) &#123;</span><br><span class="line">        <span class="keyword">const</span> opName = match[<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">const</span> value = attr.<span class="property">value</span>; <span class="comment">// string</span></span><br><span class="line">        <span class="comment">// ( _ ) æ•è·ä» 1 ä¸‹æ ‡å¼€å§‹</span></span><br><span class="line">        <span class="keyword">switch</span> (opName) &#123;</span><br><span class="line">          <span class="keyword">case</span> <span class="string">&quot;model&quot;</span>:</span><br><span class="line">            node.<span class="property">value</span> = <span class="variable language_">this</span>.<span class="property">vm</span>[value];</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Watcher</span>(<span class="variable language_">this</span>.<span class="property">vm</span>, value, <span class="function">(<span class="params">newValue</span>) =&gt;</span> &#123;</span><br><span class="line">              node.<span class="property">value</span> = newValue;</span><br><span class="line">            &#125;);</span><br><span class="line">            node.<span class="title function_">addEventListener</span>(<span class="string">&quot;input&quot;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">vm</span>[value] = event.<span class="property">target</span>.<span class="property">value</span>;</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">          <span class="keyword">case</span> <span class="string">&quot;if&quot;</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">          <span class="keyword">case</span> <span class="string">&quot;on&quot;</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">          <span class="keyword">case</span> <span class="string">&quot;else&quot;</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">          <span class="keyword">case</span> <span class="string">&quot;else-if&quot;</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">          <span class="keyword">case</span> <span class="string">&quot;show&quot;</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">          <span class="keyword">case</span> <span class="string">&quot;for&quot;</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">compileText</span>(<span class="params">node</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> reg = <span class="regexp">/\&#123;\&#123;(.+?)\&#125;\&#125;/g</span>;</span><br><span class="line">    <span class="comment">// const value = node.textContent.replace(/\s/g, &#x27;&#x27;);</span></span><br><span class="line">    <span class="keyword">const</span> value = node.<span class="property">textContent</span>;</span><br><span class="line">    <span class="keyword">const</span> tokens = [];</span><br><span class="line">    <span class="keyword">let</span> result,</span><br><span class="line">      index,</span><br><span class="line">      lastIndex = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> ((result = reg.<span class="title function_">exec</span>(value))) &#123;</span><br><span class="line">      index = result.<span class="property">index</span>;</span><br><span class="line">      <span class="keyword">if</span> (index &gt; lastIndex) &#123;</span><br><span class="line">        tokens.<span class="title function_">push</span>(value.<span class="title function_">slice</span>(lastIndex, index));</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">const</span> key = result[<span class="number">1</span>].<span class="title function_">trim</span>();</span><br><span class="line">      tokens.<span class="title function_">push</span>(<span class="variable language_">this</span>.<span class="property">vm</span>[key]);</span><br><span class="line">      lastIndex = index + result[<span class="number">0</span>].<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> pos = tokens.<span class="property">length</span> - <span class="number">1</span>;</span><br><span class="line">      <span class="comment">// update</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">Watcher</span>(<span class="variable language_">this</span>.<span class="property">vm</span>, key, <span class="function">(<span class="params">newValue</span>) =&gt;</span> &#123;</span><br><span class="line">        tokens[pos] = newValue;</span><br><span class="line">        node.<span class="property">textContent</span> = tokens.<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (lastIndex &lt; value.<span class="property">length</span>) &#123;</span><br><span class="line">      tokens.<span class="title function_">push</span>(value.<span class="title function_">slice</span>(lastIndex));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (tokens.<span class="property">length</span>) &#123;</span><br><span class="line">      node.<span class="property">textContent</span> = tokens.<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dep</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">subs</span> = []; <span class="comment">// watchers</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">addSub</span>(<span class="params">sub</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">subs</span>.<span class="title function_">push</span>(sub);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">notify</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">subs</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">sub</span>) =&gt;</span> sub.<span class="title function_">update</span>());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Observer</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">data</span> = data;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">walk</span>(data);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">walk</span>(<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">keys</span>(data).<span class="title function_">forEach</span>(<span class="function">(<span class="params">key</span>) =&gt;</span> <span class="title function_">defineProperty</span>(data, key, data[key]));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸ºæ¯ä¸ªå±æ€§å€¼æ·»åŠ  getter å’Œ setterï¼Œè¿™æ˜¯å“åº”å¼çš„åŸºç¡€</span></span><br><span class="line"><span class="comment">// åŒæ—¶ä¸ºæ¯ä¸ªå¯¹è±¡æ·»åŠ ä¸€ä¸ª dep</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">defineProperty</span>(<span class="params">data, key, value</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> dep = <span class="keyword">new</span> <span class="title class_">Dep</span>();</span><br><span class="line">  <span class="comment">// is a object</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> value === <span class="title class_">Object</span> &amp;&amp; value !== <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Observer</span>(value);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(data, key, &#123;</span><br><span class="line">    <span class="attr">enumerable</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">configurable</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title class_">Dep</span>.<span class="property">target</span> &amp;&amp; dep.<span class="title function_">addSub</span>(<span class="title class_">Dep</span>.<span class="property">target</span>); <span class="comment">// Watcher initualize</span></span><br><span class="line">      <span class="keyword">return</span> value;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">newValue</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (value === newValue) <span class="keyword">return</span>;</span><br><span class="line">      value = newValue;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> value === <span class="title class_">Object</span> &amp;&amp; value !== <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Observer</span>(value);</span><br><span class="line">        <span class="comment">// å¦‚æœæ›´æ”¹çš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿè¦å¯¹æ¯ä¸ªå¯¹è±¡çš„å€¼è¿›è¡Œè§‚å¯Ÿåˆå§‹åŒ–</span></span><br><span class="line">      &#125;</span><br><span class="line">      dep.<span class="title function_">notify</span>();</span><br><span class="line">      <span class="comment">// è§¦å‘æ¯ä¸€ä¸ª Sub çš„æ›´æ–°ã€‚</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Vue</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$options</span> = options || &#123;&#125;;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$data</span> = options.<span class="property">data</span> || &#123;&#125;;</span><br><span class="line">    <span class="keyword">const</span> el = options.<span class="property">el</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$el</span> = <span class="keyword">typeof</span> el === <span class="string">&quot;string&quot;</span> ? <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(el) : el;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ³¨å…¥</span></span><br><span class="line">    <span class="title function_">proxy</span>(<span class="variable language_">this</span>, <span class="variable language_">this</span>.<span class="property">$data</span>);</span><br><span class="line">    <span class="comment">// vm.$data.prop -&gt; vm.prop</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è§‚å¯Ÿ</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Observer</span>(<span class="variable language_">this</span>.<span class="property">$data</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¨¡æ¿åˆ†æ</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Compile</span>(<span class="variable language_">this</span>);</span><br><span class="line">    <span class="comment">// æ‰¾åˆ°ä¸€å¼€å§‹éœ€è¦å“åº”å¼çš„ä½ç½®</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">proxy</span>(<span class="params">target, data</span>) &#123;</span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">keys</span>(data).<span class="title function_">forEach</span>(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(target, key, &#123;</span><br><span class="line">      <span class="attr">enumerable</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">configurable</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> data[key];</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="title function_">set</span>(<span class="params">newValue</span>) &#123;</span><br><span class="line">        data[key] = newValue;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>]]></content>
      <categories>
        <category>Front-End</category>
      </categories>
      <tags>
        <tag>javascript</tag>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Embedding FlowFerry into your Obsidian workflow</title>
    <url>/49904686.html</url>
    <content><![CDATA[<p>å‰æ®µæ—¶é—´ï¼Œç»æœ‹å‹æ¨èï¼Œæˆ‘å…¥æ‰‹äº†ä¸€æ¬¾ Appï¼š<strong>FlowFerry</strong>ï¼Œç»è¿‡ä¸€æ®µæ—¶é—´çš„ä½¿ç”¨ä¹‹åï¼Œæˆ‘å‘ç°å®ƒå¯ä»¥å¾ˆå¥½åœ°åµŒå…¥åˆ°æˆ‘çš„ Obsidian å·¥ä½œæµä¸­ã€‚</p>
<p>æˆ‘çš„åŸå§‹å·¥ä½œæµå……æ–¥ç€é‡å¤åŠ³åŠ¨ï¼šå¤åˆ¶å†…å®¹ï¼Œåœ¨ Obsidian æ–°å»ºæ–‡æ¡£ã€ç²˜è´´ã€æ’ç‰ˆï¼Œæœ€åæ‰æ˜¯æ•´åˆã€‚é‚£ä¹ˆæœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•æŠŠå…¶ä¸­ä¸€éƒ¨åˆ†æ­¥éª¤æ‹†åˆ†å‡ºæ¥,åˆ©ç”¨ç¢ç‰‡åŒ–çš„æ—¶é—´è¿›è¡Œå¤„ç†å‘¢ï¼Ÿ</p>
<p>FlowFerry ç»™å‡ºäº†ç­”æ¡ˆã€‚å®ƒæ‹¥æœ‰è·¨å¹³å°çš„ç”Ÿæ€ï¼Œå½“æˆ‘å‡ºé—¨åœ¨å¤–ä½¿ç”¨æ‰‹æœºæµè§ˆï¼Œé‡åˆ°äº†ä¸€ç¯‡å¾ˆæ‰“åŠ¨æˆ‘çš„æ–‡ç« æ—¶ï¼Œæˆ‘å°±å¯ä»¥ä½¿ç”¨ FlowFerry å°†è¿™ç¯‡æ–‡ç« æš‚å­˜æœ¬åœ°ï¼Œç­‰å¾…å¤„ç†ï¼Œå®Œæˆä¿¡æ¯è·å–ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202502151906647.png"
                      alt="image.png|400"
                ></p>
<p>å°±è¿™å—ï¼ŸFlowFerry å¯ä¸æ­¢äºæ­¤ã€‚</p>
<p>å¾ˆå¤šè½¯ä»¶éƒ½æœ‰ã€Œæ”¶è—ã€çš„åŠŸèƒ½ï¼Œä½†ä¸åŒä¿¡æ¯æ¥æºçš„æ–‡ç« ç¼ºå°‘ä¸€ä¸ªç»Ÿä¸€çš„ã€Œæ”¶è—å¤¹ã€ï¼Œè¿™ç»å¸¸å¯¼è‡´å°è±¡é‡Œä¸Šæ¬¡çœ‹åˆ°çš„å¾ˆå¥½çš„æ–‡ç« å´æƒ³ä¸èµ·æ¥æ”¾åœ¨äº†å“ªä¸ªæ”¶è—å¤¹é‡Œâ€”â€”å®ƒä»¬æ€»æ˜¯è¢«é—å¿˜ã€‚</p>
<p>å½“ä½ ä½¿ç”¨ FlowFerry åï¼Œæ— è®ºåœ¨å“ªé‡Œçœ‹åˆ°çš„ä¸€ç¯‡å¥½æ–‡ç« ï¼Œéšæ—¶éƒ½å¯ä»¥å°†å…¶å†…å®¹æŠ“å–åˆ°æœ¬åœ°å¹¶æ‰“ä¸Šæ ‡ç­¾ï¼Œå»ºç«‹ä¸€ä¸ªä¸“å±äºä½ çš„æœ¬åœ°æ–‡ç« ç²¾é€‰é›†ã€‚å®ƒæ”¯æŒ<strong>æœ¬åœ°ç¦»çº¿é˜…è¯»</strong>ï¼Œåœ¨ä¸€äº›æ²¡æœ‰ç½‘ç»œçš„ç¯å¢ƒä¸­ï¼Œæˆ‘ä¹Ÿå¯ä»¥éšæ—¶æ‰“å¼€å®ƒé˜…è¯»æ–‡ç« ã€‚</p>
<p>å½“æˆ‘å†æ¬¡ååˆ°ç”µè„‘é¢å‰æ—¶ï¼Œé€šè¿‡ FlowFerry çš„å¤šç«¯åŒæ­¥ï¼Œæˆ‘ä¾¿å¯ä»¥ç›´æ¥å°†æ–‡ç« å‘é€è‡³ Obsidian ä»“åº“ï¼Œè¿›è¡Œä¸‹ä¸€æ­¥çš„åˆ†ç±»ã€æ•´åˆï¼Œè¿™äº›åˆ‡åˆ‡å®å®åœ°æé«˜äº†æˆ‘å¤„ç†ä¿¡æ¯çš„æ•ˆç‡ã€‚</p>
]]></content>
      <categories>
        <category>Tool</category>
      </categories>
      <tags>
        <tag>obsidian</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript Note</title>
    <url>/fbbf86b6.html</url>
    <content><![CDATA[
  <div class="note p-4 mb-4 rounded-small markdown-body warning icon-padding">
    <i class="note-icon fa-solid fa-hand-point-right"></i><p>æœ¬ <strong>Note</strong> è®°å½•å­¦ä¹ è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜ï¼Œå­¦åˆ°å“ªé‡Œä¾¿è®°åˆ°å“ªé‡Œï¼Œ<strong>ä¸é€‚åˆä½œä¸ºç³»ç»Ÿå­¦ä¹ çš„å‚è€ƒ</strong>ï¼ŒæŒç»­æ›´æ–°ã€‚</p>

  </div>

<h1 id="Basic"><a href="#Basic" class="headerlink" title="Basic"></a>Basic</h1><h2 id="å˜é‡å’Œå¸¸é‡"><a href="#å˜é‡å’Œå¸¸é‡" class="headerlink" title="å˜é‡å’Œå¸¸é‡"></a>å˜é‡å’Œå¸¸é‡</h2><p><code>var</code> ä¸ºå…¨å±€ä½œç”¨åŸŸï¼Œå¯ä»¥ç†è§£ä¸ºæ‰€æœ‰çš„ <code>var</code> ç›¸å½“äºéƒ½å‡ºç°åœ¨æ–‡ä»¶å¼€å¤´ï¼Œåœ¨å…¨å±€å†…éƒ½æœ‰æ•ˆã€‚</p>
<p><code>let</code> ä¸ºå—çº§ä½œç”¨åŸŸã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a ,b);</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="number">1</span></span><br></pre></td></tr></table></figure></div>

<p>è¿™æ®µä»£ç ä¸­ï¼Œ<code>b</code> ä¼šæŠ¥é”™ï¼Œè€Œ <code>a</code> ä¸ä¼šã€‚</p>
<p><code>const</code> ä¸ºå¸¸é‡ï¼Œä¸å¯ä¿®æ”¹ï¼Œéœ€è¦åœ¨åˆå§‹åŒ–æ—¶å£°æ˜æ•°å€¼ã€‚ã€‚</p>
<h2 id="å¯¹è±¡"><a href="#å¯¹è±¡" class="headerlink" title="å¯¹è±¡"></a>å¯¹è±¡</h2><div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> ob = &#123;</span><br><span class="line">  [key]: [value],</span><br><span class="line">&#125;ï¼›</span><br></pre></td></tr></table></figure></div>

<p>å¯¹è±¡çš„ <code>key</code> å¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€éå­—ç¬¦ä¸²ï¼ˆä¼šè½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼‰ï¼Œç¬¦å·ã€‚</p>
<p>é€šå¸¸å¯¹è±¡çš„é”®ä¸å¯ä»¥æ˜¯å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå‡½æ•°è½¬åŒ–ä¸ºç›¸åº”çš„å­—ç¬¦ä¸²ï¼Œæˆ–è€…ä½¿ç”¨ <code>Map</code> æ•°æ®ç»“æ„ã€‚</p>
<h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><p>ä»¥åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º <code>num</code> ä¸”åˆå§‹åŒ–å…¨éƒ¨æ˜¯ 0 ä¸ºä¾‹å­ã€‚</p>
<h3 id="fill"><a href="#fill" class="headerlink" title="fill"></a>fill</h3><div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="number">10</span>; <span class="comment">// å‡è®¾æ•°ç»„é•¿åº¦ä¸º 10</span></span><br><span class="line"><span class="keyword">let</span> arr = <span class="keyword">new</span> <span class="title class_">Array</span>(num).<span class="title function_">fill</span>(<span class="number">0</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr); <span class="comment">// [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]</span></span><br></pre></td></tr></table></figure></div>

<h3 id="from"><a href="#from" class="headerlink" title="from"></a>from</h3><div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="number">10</span>; <span class="comment">// å‡è®¾æ•°ç»„é•¿åº¦ä¸º 10</span></span><br><span class="line"><span class="keyword">let</span> arr = <span class="title class_">Array</span>.<span class="title function_">from</span>(&#123; <span class="attr">length</span>: num &#125;, <span class="function">() =&gt;</span> <span class="number">0</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr); <span class="comment">// [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]</span></span><br></pre></td></tr></table></figure></div>

<p><code>Array.from()</code> å¯ä»¥å°†ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡è½¬åŒ–ä¸ºæ•°ç»„ï¼Œè¿™ä¸ªå¯¹è±¡éœ€è¦æœ‰ <code>length</code> å±æ€§ï¼Œå¦åˆ™æ•°ç»„é•¿åº¦å°†ä¸º 0</p>
<p><strong>ç¤ºä¾‹</strong></p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = &#123;<span class="number">1</span>: <span class="string">&#x27;1&#x27;</span>, <span class="number">2</span>: <span class="string">&#x27;haha&#x27;</span>, <span class="number">3</span>: <span class="number">3</span>, <span class="string">&#x27;length&#x27;</span>: <span class="number">10</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> a = <span class="title class_">Array</span>.<span class="title function_">from</span>(arr);</span><br></pre></td></tr></table></figure></div>

<h3 id="for"><a href="#for" class="headerlink" title="for"></a>for</h3><p>æœ´ç´ çš„ <code>for</code> å¾ªç¯ï¼Œè¿™é‡Œå°±ä¸çŒ®ä¸‘äº†ã€‚</p>
<h2 id="function"><a href="#function" class="headerlink" title="function"></a>function</h2><h3 id="ç®€å•å£°æ˜"><a href="#ç®€å•å£°æ˜" class="headerlink" title="ç®€å•å£°æ˜"></a>ç®€å•å£°æ˜</h3><div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> å‡½æ•°å(å‚æ•°<span class="number">1</span>, å‚æ•°<span class="number">2</span>, ...) &#123;</span><br><span class="line">  <span class="comment">// å‡½æ•°ä½“</span></span><br><span class="line">  <span class="comment">// æ‰§è¡Œä¸€äº›æ“ä½œ</span></span><br><span class="line">  <span class="keyword">return</span> è¿”å›å€¼;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">greet</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;Hello, &quot;</span> + name + <span class="string">&quot;!&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">greet</span>(<span class="string">&quot;Alice&quot;</span>)); <span class="comment">// è¾“å‡º: Hello, Alice!</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<p>ä¹Ÿå¯ä»¥èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼š</p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> å‡½æ•°å = <span class="keyword">function</span>(<span class="params">å‚æ•°<span class="number">1</span>, å‚æ•°<span class="number">2</span>, ...</span>) &#123;</span><br><span class="line">  <span class="comment">// å‡½æ•°ä½“</span></span><br><span class="line">  <span class="keyword">return</span> è¿”å›å€¼;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>

<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> greet = <span class="keyword">function</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;Hello, &quot;</span> + name + <span class="string">&quot;!&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">greet</span>(<span class="string">&quot;Bob&quot;</span>)); <span class="comment">// è¾“å‡º: Hello, Bob!</span></span><br></pre></td></tr></table></figure></div>

<p>ä¹Ÿå¯ä»¥ä½¿ç”¨ ES6 å¼•å…¥çš„<strong>ç®­å¤´å‡½æ•°</strong>ï¼š</p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> å‡½æ•°å = <span class="function">(<span class="params">å‚æ•°<span class="number">1</span>, å‚æ•°<span class="number">2</span>, ...</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// å‡½æ•°ä½“</span></span><br><span class="line">  <span class="keyword">return</span> è¿”å›å€¼;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>

<p>å¦‚æœåªæœ‰ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œé‚£ä¹ˆå¯ä»¥è¿›ä¸€æ­¥ç®€åŒ–ï¼ˆçœç•¥ <code>return</code>ï¼‰ï¼š</p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> å‡½æ•°å = <span class="function">(<span class="params">å‚æ•°<span class="number">1</span>, å‚æ•°<span class="number">2</span>, ...</span>) =&gt;</span> è¿”å›å€¼;</span><br></pre></td></tr></table></figure></div>

<p>ç®­å¤´å‰æ˜¯å‡½æ•°çš„å½¢å‚ï¼Œç®­å¤´åæ˜¯å‡½æ•°ä½“ï¼ˆè¿”å›å€¼ï¼‰ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">greet</span> = (<span class="params">name</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;Hello, &quot;</span> + name + <span class="string">&quot;!&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®€åŒ–å½¢å¼</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">greet</span> = name =&gt; <span class="string">&quot;Hello, &quot;</span> + name + <span class="string">&quot;!&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">greet</span>(<span class="string">&quot;Charlie&quot;</span>)); <span class="comment">// è¾“å‡º: Hello, Charlie!</span></span><br></pre></td></tr></table></figure></div>

<p>ç®­å¤´å‡½æ•°åªèƒ½è¢«èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œæˆ–è€…ä½œä¸ºå…¶å®ƒè¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†ã€‚</p>
<h3 id="é«˜é˜¶å‡½æ•°"><a href="#é«˜é˜¶å‡½æ•°" class="headerlink" title="é«˜é˜¶å‡½æ•°"></a>é«˜é˜¶å‡½æ•°</h3><p>æ¥å—ä¸€ä¸ª&#x2F;å¤šä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œæˆ–è€…è¿”å›ä¸€ä¸ªå‡½æ•°çš„å‡½æ•°ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">createMultiplier</span> = multiplier =&gt; <span class="function"><span class="params">number</span> =&gt;</span> number * multiplier;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> double = <span class="title function_">createMultiplier</span>(<span class="number">2</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">double</span>(<span class="number">5</span>)); <span class="comment">// è¾“å‡º: 10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> triple = <span class="title function_">createMultiplier</span>(<span class="number">3</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">triple</span>(<span class="number">5</span>)); <span class="comment">// è¾“å‡º: 15</span></span><br></pre></td></tr></table></figure></div>

<p><strong>è§£é‡Š</strong>ï¼š</p>
<ul>
<li><code>createMultiplier</code> æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå‚æ•° <code>multiplier</code>ã€‚</li>
<li>å®ƒè¿”å›ä¸€ä¸ªæ–°çš„ç®­å¤´å‡½æ•° <code>number =&gt; number * multiplier</code>ã€‚</li>
<li>è¿”å›çš„å‡½æ•°æ¥æ”¶ä¸€ä¸ªå‚æ•° <code>number</code>ï¼Œå¹¶è¿”å› <code>number</code> ä¸ <code>multiplier</code> çš„ä¹˜ç§¯ã€‚</li>
</ul>
<ol>
<li>æ¥å—å‡½æ•°ä½œä¸ºå‚æ•°</li>
</ol>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">isEven</span> = num =&gt; num % <span class="number">2</span> === <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> evenNumbers = numbers.<span class="title function_">filter</span>(isEven);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(evenNumbers); <span class="comment">// è¾“å‡º: [2, 4]</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li><code>filter</code> æ–¹æ³•æ¥å—ä¸€ä¸ªå›è°ƒå‡½æ•° <code>isEven</code>ï¼Œè¯¥å‡½æ•°åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯å¦ä¸ºå¶æ•°ã€‚</li>
<li><code>filter</code> æ–¹æ³•éå† <code>numbers</code> æ•°ç»„ï¼Œå¹¶è¿”å›æ‰€æœ‰ä½¿å›è°ƒå‡½æ•°è¿”å› <code>true</code> çš„å…ƒç´ ç»„æˆçš„æ–°æ•°ç»„ã€‚</li>
</ul>
<ol start="2">
<li>ä¸€ä¸ªç®€å•çš„ç¼“å­˜å‡½æ•°</li>
</ol>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">cacheFunction</span> = fn =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> cache = &#123;&#125;;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> key = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(args);</span><br><span class="line">    <span class="keyword">if</span> (!cache[key]) &#123;</span><br><span class="line">      cache[key] = <span class="title function_">fn</span>(...args);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cache[key];</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">add</span> = (<span class="params">a, b</span>) =&gt; a + b;</span><br><span class="line"><span class="keyword">const</span> cachedAdd = <span class="title function_">cacheFunction</span>(add);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">cachedAdd</span>(<span class="number">1</span>, <span class="number">2</span>)); <span class="comment">// è¾“å‡º: 3</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">cachedAdd</span>(<span class="number">1</span>, <span class="number">2</span>)); <span class="comment">// è¾“å‡º: 3ï¼ˆä»ç¼“å­˜ä¸­è·å–ï¼‰</span></span><br></pre></td></tr></table></figure></div>

<p>è¯¦ç»†è§£é‡Šä¸€ä¸‹è¿™ä¸ªç¼“å­˜å‡½æ•°ï¼š</p>
<ul>
<li><code>cacheFunction</code> æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œæ¥å—ä¸€ä¸ªå‡½æ•° <code>fn</code> ä½œä¸ºå‚æ•°ã€‚</li>
<li><code>cache = &#123;&#125;</code> æ˜¯ç”¨æ¥åˆå§‹åŒ–ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œç”¨äºå­˜å‚¨å‡½æ•°çš„è®¡ç®—ç»“æœã€‚è¿™ä¸ªå¯¹è±¡çš„é”®æ˜¯<strong>å‡½æ•°å‚æ•°çš„å­—ç¬¦ä¸²è¡¨ç¤º</strong>ï¼ˆé€šè¿‡å‰©ä½™å‚æ•°å°†æ‰€æœ‰å‚æ•°å­˜å…¥ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œç„¶åå°†è¿™ä¸ªæ•°ç»„è½¬åŒ–ä¸º JSON å­—ç¬¦ä¸²ï¼Œä½œä¸º <code>cache</code> å¯¹è±¡çš„é”®ï¼‰ï¼Œå€¼æ˜¯å‡½æ•°æ‰§è¡Œçš„ç»“æœã€‚</li>
<li>å®ƒè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡ <code>cache</code> æ¥å­˜å‚¨è®¡ç®—ç»“æœã€‚</li>
<li>å½“è°ƒç”¨è¿”å›çš„å‡½æ•°æ—¶ï¼Œå®ƒä¼šå…ˆæ£€æŸ¥ <code>cache</code> ä¸­æ˜¯å¦æœ‰ç»“æœï¼Œå¦‚æœæ²¡æœ‰åˆ™è®¡ç®—å¹¶å­˜å‚¨ç»“æœã€‚</li>
</ul>
<h3 id="å‰©ä½™å‚æ•°"><a href="#å‰©ä½™å‚æ•°" class="headerlink" title="å‰©ä½™å‚æ•°"></a>å‰©ä½™å‚æ•°</h3><div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line">...name</span><br></pre></td></tr></table></figure></div>

<p>è¡¨ç¤ºå‡½æ•°çš„å¯å˜å‚æ•°ï¼Œæ‰€æœ‰ä¼ å…¥çš„å‚æ•°æ”¶é›†åˆ°ä¸€ä¸ª <code>name</code> æ•°ç»„ä¸­ã€‚</p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">exampleFunction</span> = (<span class="params">...args</span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(args);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">exampleFunction</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>); <span class="comment">// è¾“å‡º: [1, 2, 3]</span></span><br></pre></td></tr></table></figure></div>

<p>å¦‚æœ¬ä¾‹ä¸­çš„ <code>args</code> æ•°ç»„å°±æ˜¯ <code>[1, 2, 3]</code>ã€‚</p>
<h3 id="å‡½æ•°æå‡"><a href="#å‡½æ•°æå‡" class="headerlink" title="å‡½æ•°æå‡"></a>å‡½æ•°æå‡</h3><p>å‡½æ•°åœ¨å£°æ˜ä¹‹å‰å¯ä»¥è¢«è°ƒç”¨ï¼Œä½†æ˜¯å‡½æ•°è¡¨è¾¾å¼ä¸å¯ä»¥ã€‚</p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sayHello</span>()); <span class="comment">// è¾“å‡º: Hello, World!</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sayHello</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sayHello</span>()); <span class="comment">// æŠ¥é”™: sayHello is not defined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sayHello = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>

<h3 id="å¯é€‰å‚æ•°"><a href="#å¯é€‰å‚æ•°" class="headerlink" title="å¯é€‰å‚æ•°"></a>å¯é€‰å‚æ•°</h3><p>åœ¨å¯¹åº”å‚æ•°ååé¢åŠ ä¸Šé—®å·å³å¯ï¼Œæ‰€æœ‰å¯é€‰å‚æ•°éœ€è¦æ”¾åœ¨å°¾éƒ¨ã€‚</p>
<p>ä¹Ÿå¯ä»¥é€šè¿‡è®¾ç½®é»˜è®¤å€¼ï¼Œè¿™æ ·å¯ä»¥å†™åœ¨å¤´éƒ¨ã€‚ï¼ˆä¸å»ºè®®ï¼‰</p>
<h2 id="å¸¸ç”¨æ–¹æ³•"><a href="#å¸¸ç”¨æ–¹æ³•" class="headerlink" title="å¸¸ç”¨æ–¹æ³•"></a>å¸¸ç”¨æ–¹æ³•</h2><h3 id="map"><a href="#map" class="headerlink" title="map"></a>map</h3><div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> newArray = array.<span class="title function_">map</span>(<span class="title function_">callback</span>(currentValue[, index[, array]])[, thisArg])</span><br></pre></td></tr></table></figure></div>

<p>è¯¥æ–¹æ³•å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ è°ƒç”¨ä¸€æ¬¡å‡½æ•°ï¼Œå¾—åˆ°çš„è¿”å›å€¼ä½œä¸ºæ–°çš„æ•°ç»„å€¼ï¼Œæœ€åå¾—åˆ°ä¸€ä¸ªæ–°æ•°ç»„ã€‚</p>
<ul>
<li><code>callback</code>ï¼šç”¨äºç”Ÿæˆæ–°æ•°ç»„å…ƒç´ çš„å‡½æ•°ï¼Œæ¥å—ä¸‰ä¸ªå‚æ•°ï¼š<ul>
<li><code>currentValue</code>ï¼šå½“å‰æ­£åœ¨å¤„ç†çš„å…ƒç´ ã€‚</li>
<li><code>index</code>ï¼ˆå¯é€‰ï¼‰ï¼šå½“å‰æ­£åœ¨å¤„ç†çš„å…ƒç´ çš„ç´¢å¼•ã€‚</li>
<li><code>array</code>ï¼ˆå¯é€‰ï¼‰ï¼š<code>map</code> æ–¹æ³•è¢«è°ƒç”¨çš„æ•°ç»„ã€‚</li>
</ul>
</li>
<li><code>thisArg</code>ï¼ˆå¯é€‰ï¼‰ï¼šæ‰§è¡Œå›è°ƒæ—¶ç”¨ä½œ <code>this</code> å€¼çš„å¯¹è±¡ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ç®­å¤´å‡½æ•°ä½œä¸ºå›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> doubled = numbers.<span class="title function_">map</span>(<span class="function"><span class="params">num</span> =&gt;</span> num * <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(doubled); <span class="comment">// è¾“å‡º: [2, 4, 6, 8, 10]</span></span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> users = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;Alice&quot;</span>, <span class="attr">age</span>: <span class="number">25</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;Bob&quot;</span>, <span class="attr">age</span>: <span class="number">30</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;Charlie&quot;</span>, <span class="attr">age</span>: <span class="number">35</span> &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> userNames = users.<span class="title function_">map</span>(<span class="function"><span class="params">user</span> =&gt;</span> user.<span class="property">name</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(userNames); <span class="comment">// è¾“å‡º: [&quot;Alice&quot;, &quot;Bob&quot;, &quot;Charlie&quot;]</span></span><br></pre></td></tr></table></figure></div>

<h3 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h3><p>ç”¨äºæ•°ç»„ï¼Œåˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ã€‚</p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> newArray = array.<span class="title function_">filter</span>(<span class="title function_">callback</span>(element[, index[, array]])[, thisArg])</span><br></pre></td></tr></table></figure></div>

<p>æ–°æ•°ç»„å°†åŒ…å«é€šè¿‡ <code>callback</code> æµ‹è¯•çš„å…ƒç´ ã€‚</p>
<h3 id="setTimeout"><a href="#setTimeout" class="headerlink" title="setTimeout"></a>setTimeout</h3><div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;&#125;, [time]);</span><br></pre></td></tr></table></figure></div>

<p><code>[time]</code> ä¸ºæ¯«ç§’çº§å•ä½ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦æ‰§è¡Œçš„å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å»¶è¿Ÿæ‰§è¡Œçš„æ—¶é—´ã€‚</p>
<p>å¦‚æœè¦åœæ­¢å®ƒï¼š</p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> fn = <span class="built_in">setTimeout</span>(...);</span><br><span class="line"><span class="built_in">clearTimeout</span>(fn);</span><br></pre></td></tr></table></figure></div>

<h3 id="setInterval"><a href="#setInterval" class="headerlink" title="setInterval"></a>setInterval</h3><p>æŒ‰ç…§ä¸€å®šæ—¶é—´é—´éš”é‡å¤æ‰§è¡ŒæŸä¸ªå‡½æ•°ã€‚</p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">setInterval</span>(callback, delay, ...args);</span><br></pre></td></tr></table></figure></div>

<p>å‚æ•°åˆ†åˆ«ä¸ºï¼šå‡½æ•°ï¼Œæ—¶é—´é—´éš”ï¼Œä¼ é€’ç»™å‡½æ•°çš„é™„åŠ å‚æ•°ï¼ˆå¯é€‰ï¼‰ã€‚</p>
<p>å¦‚æœè¦åœæ­¢å®ƒï¼š</p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> fn = <span class="built_in">setInterval</span>(...);</span><br><span class="line"><span class="built_in">clearInterval</span>(fn);</span><br></pre></td></tr></table></figure></div>

<h3 id="splice"><a href="#splice" class="headerlink" title="splice"></a>splice</h3><div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line">array.<span class="title function_">splice</span>(index, x);</span><br></pre></td></tr></table></figure></div>

<p>åˆ é™¤è¿™ä¸ªæ•°ç»„ä¸­ä»ä¸‹æ ‡ <code>index</code> å¼€å§‹çš„ <code>x</code> é¡¹ã€‚</p>
<h3 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a>reduce</h3><p>æ•°ç»„å¯¹è±¡çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä¾æ¬¡æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œå¹¶å°†æ‰€æœ‰çš„ç»“æœä»¥æŸç§æ–¹å¼ç´¯ç§¯ä¸ºä¸€ä¸ªå€¼ã€‚</p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line">array.<span class="title function_">reduce</span>(<span class="title function_">callback</span>(accumulator, currentValue, currentIndex, array), initialValue)</span><br></pre></td></tr></table></figure></div>

<p><code>accumulator</code> ç´¯ç§¯æ‰€æœ‰ç»“æœï¼Œ<code>currentValue</code> æ˜¯å½“å‰æ­£åœ¨å¤„ç†çš„å…ƒç´ ã€‚</p>
<p><code>currentIndex</code>ï¼ˆå¯é€‰ï¼‰æ˜¯å½“å‰æ­£åœ¨å¤„ç†çš„å…ƒç´ çš„ç´¢å¼•ã€‚</p>
<p><code>array</code>ï¼ˆå¯é€‰ï¼‰æ˜¯å½“å‰æ•°ç»„ã€‚</p>
<p><code>initialValue</code>ï¼ˆå¯é€‰ï¼‰ æ˜¯ <code>accumulator</code> çš„åˆå§‹å€¼ã€‚è‹¥æ²¡æœ‰ï¼Œåˆ™ä»¥æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºåˆå§‹å€¼ï¼Œä»ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹æ‰§è¡Œå›è°ƒå‡½æ•°ã€‚</p>
<p>ç¤ºä¾‹ï¼šæ•°ç»„æ±‚å’Œ</p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> sum = numbers.<span class="title function_">reduce</span>(<span class="function">(<span class="params">accumulator, currentValue</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> accumulator + currentValue;</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(sum); <span class="comment">// è¾“å‡º 15</span></span><br></pre></td></tr></table></figure></div>

<h3 id="split"><a href="#split" class="headerlink" title="split"></a>split</h3><p>å°†ä¸€ä¸ªå­—ç¬¦ä¸²åˆ†å‰²ä¸ºå­å­—ç¬¦ä¸²æ•°ç»„ã€‚</p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line">string.<span class="title function_">split</span>(separator, limit)</span><br></pre></td></tr></table></figure></div>

<ul>
<li><code>separator</code>ï¼šå¿…é€‰ï¼Œåˆ†å‰²ç¬¦ï¼ˆå¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–è€…æ­£åˆ™è¡¨è¾¾å¼ï¼‰ã€‚</li>
<li><code>limit</code>ï¼šå¯é€‰ï¼Œæœ€å¤šè¿”å›å‡ ä¸ªå­—ç¬¦ã€‚</li>
</ul>
<h3 id="join"><a href="#join" class="headerlink" title="join"></a>join</h3><p>ç”¨äºå°†ä¸€ä¸ªæ•°ç»„å†…çš„å…¨éƒ¨å…ƒç´ éƒ½è½¬å˜ä¸ºå­—ç¬¦ä¸²å¹¶ç”¨æŒ‡å®šåˆ†éš”ç¬¦å°†å®ƒä»¬è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºè¿”å›å€¼ã€‚</p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line">array.<span class="title function_">join</span>(separator)</span><br></pre></td></tr></table></figure></div>

<h2 id="å¸¸ç”¨å±æ€§"><a href="#å¸¸ç”¨å±æ€§" class="headerlink" title="å¸¸ç”¨å±æ€§"></a>å¸¸ç”¨å±æ€§</h2><h3 id="innerHTML"><a href="#innerHTML" class="headerlink" title="innerHTML"></a>innerHTML</h3><p><code>innerHTML</code> å±æ€§ç”¨äºè·å–æˆ–è®¾ç½®å…ƒç´ çš„ HTML å†…å®¹ã€‚å®ƒä¼šå°†å…ƒç´ å†…éƒ¨çš„æ‰€æœ‰ HTML æ ‡ç­¾å’Œæ–‡æœ¬å†…å®¹ä½œä¸ºä¸€ä¸ªå­—ç¬¦ä¸²è¿”å›æˆ–è®¾ç½®ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥ä½¿ç”¨ <code>innerHTML</code> åŠ¨æ€åœ°æ’å…¥ HTML ç»“æ„ã€‚</p>
<h3 id="innerText"><a href="#innerText" class="headerlink" title="innerText"></a>innerText</h3><p><code>innerText</code> å±æ€§ç”¨äºè·å–æˆ–è®¾ç½®å…ƒç´ çš„æ–‡æœ¬å†…å®¹ã€‚å®ƒä¼šå¿½ç•¥ä»»ä½• HTML æ ‡ç­¾ï¼Œåªè¿”å›æˆ–è®¾ç½®çº¯æ–‡æœ¬ã€‚è¿™æ„å‘³ç€ <code>innerText</code> åªä¼šå¤„ç†å¯è§çš„æ–‡æœ¬å†…å®¹ï¼Œè€Œä¸ä¼šåŒ…å«ä»»ä½• HTML æ ‡ç­¾æˆ–åµŒå¥—ç»“æ„ã€‚</p>
<h1 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h1><h2 id="CSS-é€‰æ‹©å™¨çš„åŒºåˆ«"><a href="#CSS-é€‰æ‹©å™¨çš„åŒºåˆ«" class="headerlink" title="CSS é€‰æ‹©å™¨çš„åŒºåˆ«"></a>CSS é€‰æ‹©å™¨çš„åŒºåˆ«</h2><ol>
<li><p><strong><code>.container &gt; .panel</code></strong></p>
<ul>
<li>é€‰æ‹©æ‰€æœ‰ç›´æ¥å­å…ƒç´  <code>.panel</code>ï¼Œå®ƒä»¬çš„çˆ¶å…ƒç´ æ˜¯ <code>.container</code>ã€‚</li>
<li><strong>ç¤ºä¾‹ï¼š</strong></li>
</ul>
</li>
</ol>
<div class="code-container" data-rel="Html"><figure class="iseeu highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel&quot;</span>&gt;</span>ç›´æ¥å­å…ƒç´ <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel&quot;</span>&gt;</span>ä¸æ˜¯ç›´æ¥å­å…ƒç´ <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
<p>ä»…é€‰æ‹©ç¬¬ä¸€ä¸ª <code>div.panel</code>ï¼Œå› ä¸ºå®ƒæ˜¯ <code>div.container</code> çš„ç›´æ¥å­å…ƒç´ ã€‚</p>
<ol start="2">
<li><p><strong><code>.container .panel</code></strong></p>
<ul>
<li>é€‰æ‹©æ‰€æœ‰åä»£å…ƒç´  <code>.panel</code>ï¼Œå®ƒä»¬ä½äº <code>.container</code> å†…éƒ¨ï¼Œæ— è®ºå±‚çº§å¦‚ä½•ã€‚</li>
<li><strong>ç¤ºä¾‹ï¼š</strong></li>
</ul>
</li>
</ol>
<div class="code-container" data-rel="Html"><figure class="iseeu highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel&quot;</span>&gt;</span>ç›´æ¥å­å…ƒç´ <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel&quot;</span>&gt;</span>åµŒå¥—çš„å­å…ƒç´ <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></div>
<p>é€‰æ‹©ä¸¤ä¸ª <code>div.panel</code>ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ˜¯ <code>div.container</code> çš„åä»£å…ƒç´ ã€‚</p>
<ol start="3">
<li><p><strong><code>.container.panel</code></strong></p>
<ul>
<li>é€‰æ‹©åŒæ—¶åŒ…å« <code>container</code> å’Œ <code>panel</code> ç±»çš„æ‰€æœ‰å…ƒç´ ã€‚</li>
<li><strong>ç¤ºä¾‹ï¼š</strong></li>
</ul>
</li>
</ol>
<div class="code-container" data-rel="Html"><figure class="iseeu highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container panel&quot;</span>&gt;</span></span><br><span class="line">  åŒæ—¶æ‹¥æœ‰ container å’Œ panel ç±»çš„å…ƒç´ </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel&quot;</span>&gt;</span>å•ç‹¬æ‹¥æœ‰ panel ç±»çš„å…ƒç´ <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<p>ä»…é€‰æ‹©ç¬¬ä¸€ä¸ª <code>div</code>ï¼Œå› ä¸ºå®ƒåŒæ—¶æ‹¥æœ‰ <code>container</code> å’Œ <code>panel</code> ç±»ã€‚</p>
<h2 id="window-å¯¹è±¡"><a href="#window-å¯¹è±¡" class="headerlink" title="window å¯¹è±¡"></a>window å¯¹è±¡</h2><p><code>window</code> å¯¹è±¡æ˜¯ JavaScript åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­çš„å…¨å±€å¯¹è±¡ï¼Œè¡¨ç¤ºæµè§ˆå™¨çš„çª—å£æˆ–æ¡†æ¶ã€‚å®ƒåŒ…å«äº†è®¸å¤šæœ‰ç”¨çš„å±æ€§å’Œæ–¹æ³•ï¼Œç”¨äºæ“ä½œæµè§ˆå™¨çª—å£å’Œä¸ç”¨æˆ·äº¤äº’ã€‚åœ¨æµè§ˆå™¨ä¸­ï¼Œæ‰€æœ‰å…¨å±€å˜é‡ã€å‡½æ•°å’Œå¯¹è±¡éƒ½æ˜¯ <code>window</code> å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚</p>
<p>å®ƒçš„å±æ€§å’Œå±æ€§å€¼è¿‡å¤šï¼Œè¿™é‡Œä¸å¤šåˆ—ä¸¾ã€‚</p>
<h2 id="Function"><a href="#Function" class="headerlink" title="Function"></a>Function</h2><h3 id="Selector"><a href="#Selector" class="headerlink" title="Selector"></a>Selector</h3><div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> elements = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(selectors);</span><br></pre></td></tr></table></figure></div>

<p>è¿”å›çš„æ˜¯åŒ¹é…çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> elements = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(selectors);</span><br></pre></td></tr></table></figure></div>

<p>è¿”å›çš„æ˜¯ä¸€ä¸ª NodeListï¼Œæ˜¯ä¸€ç§ç±»æ•°ç»„å¯¹è±¡ï¼Œè¡¨ç¤ºæ–‡æ¡£ä¸­çš„ä¸€ç»„èŠ‚ç‚¹ï¼Œå‚¨å­˜<strong>åŒ¹é…é€‰æ‹©å™¨</strong>çš„æ‰€æœ‰å…ƒç´ ã€‚</p>
<p>ä¸æ˜¯æ•°ç»„ï¼Œæœ‰ <code>length</code> å±æ€§ï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•è®¿é—®å…¶ä¸­çš„å…ƒç´ ã€‚</p>
<h3 id="forEach"><a href="#forEach" class="headerlink" title="forEach"></a>forEach</h3><p>éå†æ•°ç»„æˆ–ç±»æ•°ç»„å¯¹è±¡ï¼Œå¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€æ¬¡æä¾›ï¼ˆå‚æ•°ï¼‰çš„å›è°ƒå‡½æ•°ã€‚</p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line">array.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">currentValue, index, array</span>) &#123;</span><br><span class="line">  <span class="comment">// æ‰§è¡ŒæŸäº›æ“ä½œ</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div>

<ul>
<li><code>currentValue</code> å¿…é€‰ï¼Œè¡¨ç¤ºå½“å‰æ­£åœ¨å¤„ç†çš„å…ƒç´ ã€‚</li>
<li><code>index</code> å¯é€‰ï¼Œè¡¨ç¤ºå½“å‰æ­£åœ¨å¤„ç†çš„å…ƒç´ çš„ç´¢å¼•ï¼Œä» 0 å¼€å§‹ã€‚</li>
<li><code>array</code> å¯é€‰ï¼Œè°ƒç”¨æ•°ç»„æœ¬èº«ã€‚</li>
</ul>
<h3 id="Listener"><a href="#Listener" class="headerlink" title="Listener"></a>Listener</h3><div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line">item.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, [<span class="keyword">function</span>]);</span><br></pre></td></tr></table></figure></div>

<p>å‘æŒ‡å®šå…ƒç´ æ·»åŠ äº‹ä»¶ç›‘å¬å™¨ï¼Œå½“äº‹ä»¶ï¼ˆè¿™é‡Œæ˜¯ç‚¹å‡»ï¼‰å‘ç”Ÿæ—¶ï¼Œæ‰§è¡Œç›¸åº”çš„å›è°ƒå‡½æ•°ã€‚</p>
<p><strong>å¸¸ç”¨çš„äº‹ä»¶</strong></p>
<ul>
<li><code>DOMContentLoaded</code>ï¼šæ–‡æ¡£å†…å®¹åŠ è½½å®Œæˆ</li>
<li><code>click</code></li>
<li><code>mouseover</code></li>
<li><code>keydown</code></li>
</ul>
<h3 id="classList"><a href="#classList" class="headerlink" title="classList"></a>classList</h3><div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line">item.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;[class]&#x27;</span>);</span><br><span class="line">item.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;[class]&#x27;</span>);</span><br></pre></td></tr></table></figure></div>

<p>ä¸ºå½“å‰å…ƒç´ æ·»åŠ &#x2F;åˆ é™¤ <code>class</code></p>
<h3 id="call"><a href="#call" class="headerlink" title="call"></a>call</h3><p>äº†è§£ <code>call</code> æ–¹æ³•ä¹‹å‰ï¼Œå…ˆæ¥äº†è§£ä¸€ä¸‹ <code>this</code>ã€‚</p>
<p>åœ¨JavaScriptä¸­ï¼Œ<code>this</code>å…³é”®å­—æ€»æ˜¯æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œé€šå¸¸æ˜¯æŒ‡å‘è°ƒç”¨å‡½æ•°çš„é‚£ä¸ªå¯¹è±¡ã€‚<code>this</code>çš„å€¼åœ¨å‡½æ•°è¢«è°ƒç”¨æ—¶æ‰ä¼šç¡®å®šï¼Œå¹¶ä¸”å…¶å€¼å–å†³äºå‡½æ•°æ˜¯å¦‚ä½•è¢«è°ƒç”¨çš„ã€‚</p>
<ol>
<li><strong>å…¨å±€å‡½æ•°</strong>ï¼šåœ¨å…¨å±€å‡½æ•°ä¸­ï¼Œ<code>this</code>æŒ‡å‘å…¨å±€å¯¹è±¡ï¼ˆåœ¨æµè§ˆå™¨ä¸­æ˜¯<code>window</code>ï¼‰ã€‚</li>
</ol>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å…¨å±€å‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sayGlobal</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">sayGlobal</span>(); <span class="comment">// åœ¨æµè§ˆå™¨ä¸­ï¼Œæ§åˆ¶å°å°†æ˜¾ç¤ºwindowå¯¹è±¡</span></span><br></pre></td></tr></table></figure></div>

<ol start="2">
<li><strong>å¯¹è±¡çš„æ–¹æ³•</strong>ï¼šå½“ä¸€ä¸ªå‡½æ•°ä½œä¸ºæŸä¸ªå¯¹è±¡çš„æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œ<code>this</code>æŒ‡å‘è¯¥å¯¹è±¡ã€‚</li>
</ol>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Alice&#x27;</span>,</span><br><span class="line">  <span class="attr">sayName</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>); <span class="comment">// è¿™é‡ŒthisæŒ‡å‘personå¯¹è±¡</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">person.<span class="title function_">sayName</span>(); <span class="comment">// è¾“å‡º: Alice</span></span><br></pre></td></tr></table></figure></div>

<ol start="3">
<li><strong>æ„é€ å‡½æ•°</strong>ï¼šåœ¨æ„é€ å‡½æ•°ä¸­ï¼Œ<code>this</code>æŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚</li>
</ol>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Car</span>(<span class="params">make, model</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">make</span> = make;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">model</span> = model;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> myCar = <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="string">&#x27;Toyota&#x27;</span>, <span class="string">&#x27;Corolla&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(myCar.<span class="property">make</span>); <span class="comment">// è¾“å‡º: Toyota</span></span><br><span class="line"><span class="comment">// åœ¨Caræ„é€ å‡½æ•°ä¸­ï¼ŒthisæŒ‡å‘æ–°åˆ›å»ºçš„myCarå¯¹è±¡</span></span><br></pre></td></tr></table></figure></div>

<p><code>new</code> ç”¨äºæ–°å»ºä¸€ä¸ªå¯¹è±¡ï¼Œåé¢è°ƒç”¨æ„é€ å‡½æ•°ã€‚</p>
<ol start="4">
<li><strong>äº‹ä»¶å¤„ç†å™¨</strong>ï¼šåœ¨äº‹ä»¶å¤„ç†å™¨ä¸­ï¼Œ<code>this</code>æŒ‡å‘è§¦å‘äº‹ä»¶çš„å¯¹è±¡ã€‚</li>
</ol>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line">&lt;!-- <span class="variable constant_">HTML</span> --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;clickMe&quot;</span>&gt;</span>Click me!<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// JavaScript</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;clickMe&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); <span class="comment">// è¿™é‡ŒthisæŒ‡å‘è¢«ç‚¹å‡»çš„buttonå…ƒç´ </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">alert</span>(<span class="string">&#x27;Button was clicked!&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></div>

<ol start="5">
<li><strong>ç®­å¤´å‡½æ•°</strong></li>
</ol>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Bob&#x27;</span>,</span><br><span class="line">  <span class="attr">greet</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>); <span class="comment">// è¿™é‡ŒthisæŒ‡å‘personå¯¹è±¡ï¼Œè€Œä¸æ˜¯å…¨å±€å¯¹è±¡æˆ–window</span></span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">person.<span class="title function_">greet</span>(); <span class="comment">// ä¸€ç§’é’Ÿåè¾“å‡º: Bob</span></span><br></pre></td></tr></table></figure></div>

<p><code>call</code>æ–¹æ³•çš„ä½œç”¨æ˜¯è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶æ˜¾å¼åœ°è®¾ç½®å‡½æ•°ä½“å†…çš„<code>this</code>å¯¹è±¡ï¼ŒåŒæ—¶ä¼ é€’å‚æ•°ç»™è¿™ä¸ªå‡½æ•°ã€‚<code>call</code>æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯<code>this</code>çš„ç»‘å®šå¯¹è±¡ï¼Œåé¢çš„å‚æ•°æ˜¯ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°ã€‚</p>
<p><strong>ä¾‹å¦‚ï¼š</strong></p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">introduce</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;My name is &quot;</span> + <span class="variable language_">this</span>.<span class="property">name</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> animal = &#123; <span class="attr">name</span>: <span class="string">&quot;Dog&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨callæ–¹æ³•å€Ÿç”¨Personçš„introduceæ–¹æ³•</span></span><br><span class="line"><span class="keyword">var</span> animalIntroduce = <span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">introduce</span>.<span class="title function_">call</span>(animal);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(animalIntroduce); <span class="comment">// è¾“å‡º: My name is Dog</span></span><br></pre></td></tr></table></figure></div>

<p>è¿™é‡Œ <code>.call(animal)</code> å°±æ”¹å˜äº†ä¸€ä¸ª<strong>åŸå‹æ„é€ å‡½æ•°</strong>çš„ <code>this</code> å€¼ä¸ºå¯¹è±¡ <code>animal</code>ï¼Œå®ç°äº†æ–¹æ³•çš„å€Ÿç”¨ã€‚</p>
<p>å…¶å®ƒçš„åŠŸèƒ½æ¯”å¦‚æ”¹å˜å‡½æ•°çš„è°ƒç”¨ä¸Šä¸‹æ–‡ï¼Œå®ç°ç»§æ‰¿ç­‰ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<p>æ¯”å¦‚æ•°ç»„çš„ä¸€ä¸ªæ–¹æ³• <code>filter</code>ï¼Œæƒ³è¦ä½œç”¨äºç±»æ•°ç»„å¯¹è±¡ä¸Šï¼Œå¯ä»¥è¿™æ ·å†™ï¼š</p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line">[].<span class="property">filter</span>.<span class="title function_">call</span>(item.<span class="property">parentElement</span>.<span class="property">children</span>, <span class="function"><span class="params">el</span> =&gt;</span> el !== item)</span><br></pre></td></tr></table></figure></div>

<p>è¿™é‡Œ <code>item.parentElement.children</code> è¿”å›çš„æ˜¯å…ƒç´  <code>item</code> çš„çˆ¶å…ƒç´ çš„æ‰€æœ‰å­å…ƒç´ çš„é›†åˆï¼Œæ˜¯ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡ï¼Œä¸ºäº†å¯¹å®ƒè¿›è¡Œ <code>filter</code> çš„æ–¹æ³•ï¼Œå¯ä»¥åˆ©ç”¨ <code>call</code>ï¼Œå®ç°æ–¹æ³•çš„å€Ÿç”¨ï¼Œåé¢ <code>el =&gt; el !== item</code> æ˜¯åŸ <code>filter</code> å‡½æ•°çš„å‚æ•°ï¼Œè¡¨ç¤º <code>callback</code> ç­›é€‰æ¡ä»¶ã€‚</p>
<h3 id="toggle"><a href="#toggle" class="headerlink" title="toggle"></a>toggle</h3><p>åˆ‡æ¢æŸå…ƒç´ çš„æŸä¸ª <code>class</code> çš„å¼€å…³çŠ¶æ€ï¼Œè‹¥å­˜åœ¨åˆ™ç§»é™¤å®ƒï¼Œè‹¥ä¸å­˜åœ¨åˆ™æ·»åŠ å®ƒã€‚</p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line">element.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&quot;changed&quot;</span>, [<span class="literal">true</span>/<span class="literal">false</span>]);</span><br></pre></td></tr></table></figure></div>

<p>ç¬¬äºŒä¸ªå‚æ•°å¯é€‰ï¼Œè‹¥ <code>true</code> åˆ™å¼ºåˆ¶æ·»åŠ ï¼Œè‹¥ <code>false</code> åˆ™å¼ºåˆ¶åˆ é™¤ã€‚</p>
<h3 id="getBoundingClientRect"><a href="#getBoundingClientRect" class="headerlink" title="getBoundingClientRect"></a>getBoundingClientRect</h3><p>æ˜¯å…ƒç´ çš„ä¸€ä¸ªæ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«è¯¥å…ƒç´ ä¿¡æ¯çš„ <code>DOMRect</code> å¯¹è±¡ã€‚</p>
<p>æä¾›ä»¥ä¸‹å±æ€§ï¼š</p>
<ul>
<li>**<code>top</code>**ï¼šå…ƒç´ ä¸Šè¾¹ç¼˜åˆ°è§†å£ä¸Šè¾¹ç¼˜çš„è·ç¦»ã€‚</li>
<li>**<code>right</code>**ï¼šå…ƒç´ å³è¾¹ç¼˜åˆ°è§†å£å·¦è¾¹ç¼˜çš„è·ç¦»ã€‚</li>
<li>**<code>bottom</code>**ï¼šå…ƒç´ ä¸‹è¾¹ç¼˜åˆ°è§†å£ä¸Šè¾¹ç¼˜çš„è·ç¦»ã€‚</li>
<li>**<code>left</code>**ï¼šå…ƒç´ å·¦è¾¹ç¼˜åˆ°è§†å£å·¦è¾¹ç¼˜çš„è·ç¦»ã€‚</li>
<li>**<code>width</code>**ï¼šå…ƒç´ çš„å®½åº¦ï¼ˆç›¸å½“äº <code>right - left</code>ï¼‰ã€‚</li>
<li>**<code>height</code>**ï¼šå…ƒç´ çš„é«˜åº¦ï¼ˆç›¸å½“äº <code>bottom - top</code>ï¼‰ã€‚</li>
</ul>
<h1 id="å¼‚æ­¥-asynchronous"><a href="#å¼‚æ­¥-asynchronous" class="headerlink" title="å¼‚æ­¥(asynchronous)"></a>å¼‚æ­¥(asynchronous)</h1><h3 id="å›è°ƒå‡½æ•°"><a href="#å›è°ƒå‡½æ•°" class="headerlink" title="å›è°ƒå‡½æ•°"></a>å›è°ƒå‡½æ•°</h3><p>ä¸€ä¸ªå‡½æ•°æ¥å—å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¹¶åœ¨è¿›è¡Œä¸€ç³»åˆ—æ“ä½œä¹‹åå›è°ƒè¿™ä¸ªå‡½æ•°ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fetchData</span>(<span class="params">callback</span>) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">callback</span>(<span class="string">&quot;Data fetched&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">fetchData</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(data); <span class="comment">// è¾“å‡º &quot;Data fetched&quot;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<h3 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h3><p><code>Promise</code> å¯¹è±¡è¿”å›ä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå®Œæˆ&#x2F;å¤±è´¥åŠå…¶ç»“æœå€¼ï¼Œå®ƒå¯ä»¥å°†ä¸€ä¸ªæ“ä½œå¼‚æ­¥åŒ–ã€‚</p>
<p>ä»€ä¹ˆæ˜¯å¼‚æ­¥ï¼Ÿä»€ä¹ˆæ˜¯åŒæ­¥ï¼Ÿ</p>
<p>æ­£å¸¸æ¥è®²ä¸€ä¸ª javascript ç¨‹åºæ˜¯æŒ‰ç…§é¡ºåºæ‰§è¡Œçš„ï¼Œä¸Šä¸€ä¸ªå‡½æ•°æ‰§è¡Œå®Œä¹‹å‰ï¼Œåº•ä¸‹çš„å‡½æ•°åªèƒ½å¹²ç­‰ç€ã€‚</p>
<p>å¦‚æœè¿™æ˜¯ä¸€ä¸ªéå¸¸è€—æ—¶çš„ç½‘ç»œè¯·æ±‚ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥ä¸€è¾¹æ‰§è¡Œè¯·æ±‚ï¼Œä¸€è¾¹æ‰§è¡Œå…¶å®ƒçš„ä»£ç ï¼Œè¿™å°±æ˜¯å¼‚æ­¥ï¼Œåä¹‹ç­‰å¾…è¯·æ±‚å®Œæˆåå†æ‰§è¡Œå…¶å®ƒä»£ç å°±æ˜¯åŒæ­¥ã€‚</p>
<p>åˆ›å»ºä¸€ä¸ª <code>Promise</code> å¯¹è±¡ï¼š</p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// å¼‚æ­¥æ“ä½œçš„ä»£ç </span></span><br><span class="line">  <span class="keyword">if</span> (<span class="comment">/* å¼‚æ­¥æ“ä½œæˆåŠŸ */</span>) &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&#x27;æˆåŠŸçš„ç»“æœ&#x27;</span>); <span class="comment">// å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶è°ƒç”¨</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">reject</span>(<span class="string">&#x27;å¤±è´¥çš„åŸå› &#x27;</span>); <span class="comment">// å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶è°ƒç”¨</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div>

<p>ä¸€ä¸ª <code>Promise</code> å¯¹è±¡åœ¨è¢«åˆ›å»ºåé‡Œé¢çš„æ“ä½œä¼šç«‹åˆ»æ‰§è¡Œã€‚</p>
<p>å®ƒæœ‰ä¸‰ç§çŠ¶æ€ï¼š</p>
<ul>
<li><code>pending</code></li>
<li><code>fulfilled</code></li>
<li><code>rejected</code></li>
</ul>
<p>æ¯”å¦‚æˆ‘æƒ³å®ç°ä¸¤ä¸ªå¼‚æ­¥æ“ä½œéƒ½ç»“æŸæ—¶å°†å®ƒä»¬çš„ç»“æœå€¼ç›¸åŠ ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ <code>Promise.all()</code> å‡½æ•°ï¼Œå‚æ•°æ˜¯ä¸€ä¸ª <code>Promise</code> æ•°ç»„ï¼Œå½“é‡Œé¢çš„ <code>Promise</code> éƒ½æˆåŠŸæ—¶ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œé‡Œé¢æ˜¯å„ä¸ª <code>Promise</code> çš„ç»“æœå€¼ã€‚</p>
<p>è¿™æ ·å°±å¯ä»¥è®©ä¸¤ä¸ªæ“ä½œå¹¶è¡Œï¼ŒèŠ‚çº¦æ—¶é—´ã€‚</p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> promise1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="title function_">resolve</span>(<span class="number">2</span>), <span class="number">20</span>));</span><br><span class="line"><span class="keyword">const</span> promise2 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="title function_">resolve</span>(<span class="number">5</span>), <span class="number">60</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> [a, b] = <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>([promise1, promise2]);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a + b);</span><br></pre></td></tr></table></figure></div>

<p><a class="link"   href="https://leetcode.cn/problems/add-two-promises/description/?envType=study-plan-v2&envId=30-days-of-javascript" >Leetcode ä¾‹é¢˜<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>å¦‚æœæˆ‘æƒ³åœ¨è¶…æ—¶ä¹‹åè¿”å› <code>reject</code> å¹¶ä¸”ç»ˆæ­¢è¿›ç¨‹é˜²æ­¢å†…å­˜æ³„æ¼ï¼Œå¯ä»¥è¿™æ ·ï¼š</p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">		<span class="keyword">const</span> timeout = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;                <span class="title function_">reject</span>(<span class="string">&quot;Time Limit Exceeded&quot;</span>);</span><br><span class="line">		&#125;, t);</span><br><span class="line">	<span class="title function_">fn</span>(...args).<span class="title function_">then</span>(resolve).<span class="title function_">catch</span>(reject).<span class="title function_">finally</span>(<span class="function">() =&gt;</span> <span class="built_in">clearTimeout</span>(timeout));</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>è¿˜å¯ä»¥ä¿è¯å‡½æ•°çš„æ­£å¸¸è¿è¡Œï¼Œå¦‚æœè¿è¡ŒæˆåŠŸï¼Œé‚£ä¹ˆ <code>.then(resolve</code>ï¼Œå¦åˆ™å°± <code>.catch(reject)</code>ï¼Œå¹¶ä¸”æœ€åç»“æŸè¿™ä¸ª <code>timout</code>ã€‚</p>
<p><a class="link"   href="https://leetcode.cn/problems/promise-time-limit/description/?envType=study-plan-v2&envId=30-days-of-javascript" >Leetcode ä¾‹é¢˜<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h3 id="async-await"><a href="#async-await" class="headerlink" title="async&#x2F;await"></a>async&#x2F;await</h3><p><code>async</code> ç”¨äºå£°æ˜ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œä½¿å®ƒè¿”å›ä¸€ä¸ª <code>Promise</code> å¯¹è±¡ã€‚</p>
<p><code>await</code> åªèƒ½åœ¨ <code>async</code> å‡½æ•°å†…éƒ¨ä½¿ç”¨ï¼Œç”¨äºç­‰å¾…ä¸€ä¸ª <code>Promise</code> å®Œæˆï¼Œå¹¶è¿”å› <code>Promise</code> çš„ç»“æœã€‚</p>
<p>è¿™æ ·å¯ä»¥ä½¿æˆ‘ä»¬å¯ä»¥ä»¥åŒæ­¥çš„æ–¹å¼å¤„ç†å¼‚æ­¥ä»£ç ã€‚</p>
<p><strong>æ³¨æ„ï¼š</strong></p>
<p>å¦‚æœéœ€è¦åœ¨å¾ªç¯ä¸­ä½¿ç”¨å¼‚æ­¥æ“ä½œï¼Œé‚£ä¹ˆæ˜¯ä¸å¯ä»¥ä½¿ç”¨ <code>forEach</code> æˆ–è€… <code>map</code> è¿™ç§æ–¹æ³•çš„ï¼Œå®ƒä¸ä¼šç­‰å¾… <code>await</code> æ‰§è¡Œå®Œï¼Œè€Œæ˜¯ç›´æ¥è¿›å…¥ä¸‹ä¸€ä¸ªå¾ªç¯ã€‚</p>
<p><strong>å¦‚ä½•è§£å†³ï¼Ÿ</strong></p>
<p>ä½¿ç”¨ <code>for...of</code> å¾ªç¯ã€‚</p>
<p><strong>å¦‚ä½•è®©æ‰€æœ‰çš„å¼‚æ­¥æ“ä½œå¹¶å‘æ‰§è¡Œå‘¢ï¼Ÿ</strong></p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="keyword">const</span> promises = [</span><br><span class="line">		<span class="title function_">someAsyncOperation</span>(),</span><br><span class="line">		<span class="title function_">someAsyncOperation</span>(),</span><br><span class="line">		<span class="title function_">someAsyncOperation</span>()</span><br><span class="line">	];</span><br><span class="line">	<span class="keyword">for</span> <span class="title function_">await</span> (<span class="keyword">let</span> result <span class="keyword">of</span> promises);</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;done&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><code>promises</code> ä¸­å­˜å‚¨çš„æ˜¯è‹¥å¹²ä¸ª <code>Promise</code> å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡åœ¨åˆ›å»º <code>promises</code> æ—¶å³å¼€å§‹å¹¶å‘æ‰§è¡Œï¼Œç”¨ <code>for await</code> æ¥ä¾æ¬¡ç­‰å¾…å®ƒä»¬å®Œæˆï¼ˆæ‰€æœ‰çš„ <code>Promise</code> æ˜¯åŒæ—¶è¿è¡Œçš„ï¼‰ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨å®ƒä»¬éƒ½è¿è¡Œå®Œæˆåé€€å‡ºå¾ªç¯è¿›è¡Œä¸‹ä¸€æ­¥çš„æ“ä½œã€‚</p>
<h1 id="ç±»"><a href="#ç±»" class="headerlink" title="ç±»"></a>ç±»</h1><div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Day</span> &#123;</span><br><span class="line">	<span class="title function_">constructor</span>(<span class="params">day, date</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">day</span> = day;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">date</span> = date;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>åœ¨ <code>constructor</code> æ„é€ å‡½æ•°ä¸­ï¼Œæˆå‘˜å˜é‡ä¸éœ€è¦æ˜¾å¼å£°æ˜ï¼Œä½¿ç”¨ <code>new Day(day, date)</code> è¿›è¡Œå®ä¾‹åŒ–ã€‚</p>
<h2 id="Extends"><a href="#Extends" class="headerlink" title="Extends"></a>Extends</h2><p>ç±»ä¹‹é—´å¯ä»¥ç»§æ‰¿ï¼Œå­ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„åŠŸèƒ½ä¹Ÿå¯ä»¥é‡å†™çˆ¶ç±»çš„æ–¹æ³•ã€‚</p>
<p>ä½¿ç”¨åœ¨å­ç±»ä¸­ä½¿ç”¨ <code>super()</code> è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚</p>
<h1 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h1><h2 id="parse"><a href="#parse" class="headerlink" title="parse"></a>parse</h2><div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">JSON</span>.<span class="title function_">parse</span>(string);</span><br></pre></td></tr></table></figure></div>

<p>ç”¨äºå°† JSON å­—ç¬¦ä¸²è½¬æ¢ä¸º JS å¯¹è±¡ã€‚</p>
<h2 id="stringify"><a href="#stringify" class="headerlink" title="stringify"></a>stringify</h2><div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj);</span><br></pre></td></tr></table></figure></div>

<p>å°†å¯¹è±¡è½¬æ¢ä¸º JSON å­—ç¬¦ä¸²ã€‚</p>
<h1 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h1><h2 id="è½¬æ¢ä¸º-Object"><a href="#è½¬æ¢ä¸º-Object" class="headerlink" title="è½¬æ¢ä¸º Object"></a>è½¬æ¢ä¸º Object</h2><div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = <span class="title class_">Object</span>.<span class="title function_">fromEntries</span>(map);</span><br></pre></td></tr></table></figure></div>

<h2 id="è½¬æ¢ä¸º-Map"><a href="#è½¬æ¢ä¸º-Map" class="headerlink" title="è½¬æ¢ä¸º Map"></a>è½¬æ¢ä¸º Map</h2><div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> temp = <span class="title class_">Object</span>.<span class="title function_">entries</span>(obj); <span class="comment">// è½¬æ¢ä¸ºäºŒç»´é”®å€¼æ•°ç»„</span></span><br><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>(temp)</span><br></pre></td></tr></table></figure></div>

<h1 id="Backend"><a href="#Backend" class="headerlink" title="Backend"></a>Backend</h1><h2 id="res"><a href="#res" class="headerlink" title="res"></a>res</h2><p>å“åº”ä½“ï¼Œåç«¯å¯ä»¥è¿›è¡Œä¸€äº›å“åº”è¿”å›ç»™å‰ç«¯ã€‚</p>
<p>å¸¸ç”¨ï¼š</p>
<ul>
<li><code>res.send()</code>ï¼šè¿”å›çº¯æ–‡æœ¬&#x2F; HTML æ•°æ®</li>
<li><code>res.json()</code>ï¼šå°†å¯¹è±¡è½¬åŒ–ä¸º JSON å­—ç¬¦ä¸²å¹¶è¿”å›</li>
<li><code>res.status()</code>ï¼šè®¾ç½® HTTP çŠ¶æ€ç </li>
<li><code>res.sendFile()</code>ï¼šå‘é€æ–‡ä»¶</li>
<li><code>res.setHeader()</code>ï¼šè®¾ç½®å“åº”å¤´</li>
<li><code>res.redirect()</code>ï¼šå°†å®¢æˆ·ç«¯é‡å®šå‘åˆ°å¦ä¸€ä¸ª URL</li>
</ul>
]]></content>
      <categories>
        <category>Web</category>
      </categories>
      <tags>
        <tag>javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>My Website Dev Log</title>
    <url>/51cade6f.html</url>
    <content><![CDATA[<h1 id="2024"><a href="#2024" class="headerlink" title="2024"></a>2024</h1><h2 id="July"><a href="#July" class="headerlink" title="July"></a>July</h2><h3 id="29"><a href="#29" class="headerlink" title="29"></a>29</h3><p>åˆšæœ‰ç‚¹æƒ³æ³•ï¼Œåˆ©ç”¨ <code>create-nuxt-app</code> åˆ›å»ºäº†ä¸€ä¸ª nuxt2 çš„é¡¹ç›®ï¼Œå¾ˆå¤šé…ç½®é¡¹æˆ‘éƒ½æ²¡è§è¿‡ï¼Œä¸€ä¸€äº†è§£äº†ä¸€éã€‚</p>
<p>æ¯”å¦‚ä¸€ä¸ªç½‘ç«™çš„å¼€å‘æµç¨‹å•Šï¼ŒåŠ¨æ€é™æ€ç½‘ç«™åŒºåˆ«ï¼Œç½‘ç«™éƒ¨ç½²ï¼Œæ¡†æ¶æœ‰ä»€ä¹ˆç”¨ï¼Œé€‰ä»€ä¹ˆæ¡†æ¶ï¼ŒUIæ¡†æ¶åˆæ˜¯ä»€ä¹ˆã€‚</p>
<p>æ¡†æ¶é€‰äº† Nuxtï¼ŒUI æ¡†æ¶é€‰äº† Tailwind css</p>
<p>å’Œé“ƒä»™äº¤æµäº†å¾ˆå¤šï¼Œæˆ‘ä»¬éƒ½æ”¶è·ä¸å°‘ã€‚</p>
<h3 id="30"><a href="#30" class="headerlink" title="30"></a>30</h3><p>ç»§ç»­æ˜¨å¤©çš„ä»»åŠ¡ã€‚</p>
<p>ç®€å•å®Œæˆäº†ä¸»é¡µå’Œä¸€ä¸ªæ²¡æœ‰ä»€ä¹ˆç”¨çš„ Navï¼Œåšäº†ä¸€ä¸ªå° NavButtonï¼Œè¯•äº†è¯• Tailwind UI çš„ 404 é¡µé¢ï¼Œé¡ºä¾¿æŠŠå®ƒå˜æˆäº†ä¸€ä¸ªè·¯ç”±é¡µé¢ã€‚</p>
<p>ç„¶åæŠŠç½‘ç«™åˆ©ç”¨ gh-pages åŒ…éƒ¨ç½²åˆ° github pages ä¸Šã€‚</p>
<p>åœ¨æ™šä¸Šæ„è¯†åˆ°åŸæ¥ç”¨çš„æ˜¯è€ç‰ˆæœ¬çš„ Nuxtï¼Œäºæ˜¯å°†é¡¹ç›®è¿ç§»åˆ°æœ€æ–°çš„ Nuxt3.12 ç‰ˆæœ¬ã€‚</p>
<h3 id="31"><a href="#31" class="headerlink" title="31"></a>31</h3><p>é‡å¤´æˆï¼Œå†™äº†å¥½å¤šä¸œè¥¿ï¼ˆå…¶å®ä¹Ÿæ²¡æœ‰å¤šå°‘ï¼‰</p>
<p>æŠŠé¡¹ç›®é‡æ„äº†ä¸€éï¼Œç»“æ„æ›´åŠ æ¸…æ™°ã€‚</p>
<p>ä½¿ç”¨è·¯ç”±ï¼Œé‡è½½è·¯ç”±è§„åˆ™ã€‚</p>
<p>å­¦ä¹  Typescriptï¼Œè¿™ç©æ„è¶Šæ¥è¶Šåƒ C++ JAVA C# è¿™ç§è¯­è¨€äº†ã€‚</p>
<p>ç„¶åå­¦ä¹ é¡¹ç›®ç»“æ„é…ç½®ï¼Œ</p>
<p>å°†åŒ…ç®¡ç†å™¨æ¢ä¸º pnpmï¼Œ</p>
<p>å®Œå–„äº† Nav å¸ƒå±€ï¼Œ</p>
<p>ç®€å•å…¥é—¨ layoutsï¼Œmiddlewareï¼Œ</p>
<p>é…ç½®ä¸€ä¸‹ 404 çš„è·¯ç”±è§„åˆ™ã€‚</p>
<p>æŠŠ NavButton çš„ Props åŠ ä¸Šäº†ï¼Œç®€å•å†™äº†å‡ ä¸ªå¾…å®Œå–„çš„é¡µé¢ã€‚</p>
<p>åˆ†åˆ«ä¸ºé»˜è®¤å’Œ layouts é…ç½®äº†é¡µé¢åˆ‡æ¢åŠ¨ç”»ã€‚</p>
<p>Vsc æ’ä»¶ç”Ÿæ€ã€‚</p>
<p>æ·»åŠ äº† font-awesome å›¾æ ‡æ”¯æŒï¼Œåªéœ€è¦åœ¨ config é‡Œæ·»åŠ éœ€è¦ç”¨çš„å›¾æ ‡åç§°ï¼Œç„¶ååœ¨å¯¹åº”ç»„ä»¶é‡Œæ·»åŠ ï¼š<code>&lt;font-awesome icon=&quot;name&quot; /&gt; </code> å³å¯ã€‚</p>
<p>github pages url å®¹æ˜“å‡ºé—®é¢˜ï¼Œè¦ä¹ˆå°½é‡ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œè¦ä¹ˆè¿˜æ˜¯æ¢ä¸ªåŸŸåå§ï¼Œç„¶åæˆ‘å°±éƒ¨ç½²åˆ° vercel äº†ã€‚</p>
<h2 id="Auguest"><a href="#Auguest" class="headerlink" title="Auguest"></a>Auguest</h2><p>label</p>
<h3 id="01"><a href="#01" class="headerlink" title="01"></a>01</h3><p>å®Œå–„å¸ƒå±€ã€‚</p>
<h3 id="02"><a href="#02" class="headerlink" title="02"></a>02</h3><p>å’•å’•å’•</p>
<h3 id="03"><a href="#03" class="headerlink" title="03"></a>03</h3><p>å®Œå–„ä¾§è¾¹æ ï¼Œæ–‡ç« ç»„ä»¶å¡ç‰‡å’Œ NavBar ä»¥åŠå¸ƒå±€ã€‚</p>
<p>å®Œå–„ Archives Albums About é¡µé¢ã€‚</p>
<p>å…ˆè¿™æ ·å§ã€‚</p>
<h3 id="04"><a href="#04" class="headerlink" title="04"></a>04</h3><p>ä¿®å¤ bugï¼Œé€‚é…å“åº”å¼ã€‚</p>
<h3 id="05"><a href="#05" class="headerlink" title="05"></a>05</h3><p>æ²¡åšä»€ä¹ˆï¼Œç”¨ js æ¨¡æ‹Ÿäº†ä¸€ä¸‹ vue çš„å“åº”å¼ï¼Œç®—æ˜¯ç¨å¾®æ·±å…¥äº†è§£äº†ä¸€ä¸‹åŸç†ã€‚</p>
<h3 id="06"><a href="#06" class="headerlink" title="06"></a>06</h3><p>æ›´æ–°å¡ç‰‡ä»¥åŠé“¾æ¥çš„æ ·å¼ï¼Œå¾ˆå¥½çœ‹ã€‚</p>
<h3 id="07"><a href="#07" class="headerlink" title="07"></a>07</h3><p>ç€æ‰‹ä¸ªäººä½œå“é›†ç½‘ç«™çš„æ•´ç†å’Œå¼€å‘ï¼Œä½¿ç”¨ Vue æ¡†æ¶ï¼Œæ‰“ç®—åšç®€å•ç‚¹ä¸éœ€è¦å¤ªå¤šåŠŸèƒ½ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202408081146820.webp"
                      alt="image.png"
                ></p>
<p>ç›®å‰æ˜¯æ‰“ç®—å…ˆæŠŠä¹‹å‰å†™è¿‡çš„å„ç§ä¸œè¥¿ç»„ä»¶åŒ–æ”¾è¿›æ¥ã€‚</p>
<p>æ‰æ•´äº†ä¸‰ä¸ªç»„ä»¶æˆ‘å°±è§‰å¾—éº»çƒ¦äº†ï¼Œç„¶åå†™äº†ä¸¤ä¸ªè„šæœ¬åˆ†åˆ«ç”Ÿæˆå¡ç‰‡ç»„å’Œè·¯ç”±ã€‚</p>
<h3 id="08"><a href="#08" class="headerlink" title="08"></a>08</h3><p>å®Œå–„ä¸ªäººç½‘ç«™å“åº”å¼ï¼Œä¼˜åŒ–é¡¹ç›®ç»“æ„ï¼Œç ”ç©¶äº†ä¸€ä¸‹ï¼Œä½¿å¾—å±€åŸŸç½‘è®¾å¤‡å¯ä»¥å®æ—¶é¢„è§ˆé¡¹ç›®ï¼ˆæ”¹ä¸€ä¸‹ <code>vite.config.js</code>ï¼Œé˜²ç«å¢™çš„é”…ï¼‰</p>
<p>ç®€å•å­¦ä¹ äº†è§£äº†ä¸€ä¸‹æµè§ˆå™¨çš„å·¥ä½œåŸç†ï¼Œå ªæ¯”ä¸€ä¸ªæ“ä½œç³»ç»Ÿçš„å¤æ‚åº¦ã€‚</p>
<h3 id="09"><a href="#09" class="headerlink" title="09"></a>09</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202408091138933.webp"
                      alt="image.png"
                ></p>
<p>å®Œå–„äº†ä¸‹æŒ‰é’®æ ·å¼å’Œå…¶å®ƒå¸ƒå±€ã€‚</p>
<p>æŠŠæ‰€æœ‰çš„æ—§ç»„ä»¶éƒ½æ·»åŠ å®Œæˆäº†ï¼</p>
<p>æ¥ä¸‹æ¥å¯ä»¥å¼€å§‹æ–°çš„ç»ƒä¹ äº†ã€‚</p>
<p>å¾ˆæ£’ï¼</p>
<h3 id="26"><a href="#26" class="headerlink" title="26"></a>26</h3><p>ä¸­é—´å¿˜è®°å†™æ—¥å¿—äº†ï¼Œç°åœ¨æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202408281739379.webp"
                      alt="image.png"
                ></p>
<p><strong>UPDATES:</strong></p>
<ul>
<li>æŠŠæ‰€æœ‰çš„å°é¡¹ç›®ç»„ä»¶åŒ–</li>
<li>å®Œå–„ä¸»é¡µæ ·å¼å’Œå…¶å®ƒé¡µé¢æ ·å¼</li>
<li>æ·»åŠ äº†æ–°é¡¹ç›® CalendarViewï¼š<ul>
<li><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202408281740987.webp"
                      alt="Snipaste_2024-08-28_17-40-13.png"
                ></li>
<li>ä»‹ç»ä¸€ä¸‹ï¼Œè¿™æ˜¯ä¸€ä¸ªè®°å½• Appï¼Œæ—¥å†ä»…ç”¨äºç´¢å¼•ï¼Œå·¦é”®å¯ä»¥å°†å½“å¤©çš„æ„Ÿå—æŒ‡æ•° $+1$ï¼Œå³é”®æ˜¯ $-1$,ä¼šæ ¹æ®æ„Ÿå—æŒ‡æ•°æ˜¾ç¤ºä¸åŒçš„é¢œè‰²ï¼Œæ§åˆ¶é¢æ¿ç°åœ¨æœ‰ä¸¤ä¸ªæŒ‰é’®ï¼Œç¬¬ä¸€ä¸ªæ˜¯å®šä½åˆ°å½“å¤©ï¼Œç¬¬äºŒä¸ªæ˜¯æ˜¾ç¤ºå¹´è§†å›¾ã€‚åšäº†å¥½çœ‹çš„åˆ‡æ¢åŠ¨ç”»ã€‚åç«¯ä½¿ç”¨ Expressï¼Œæš‚æ—¶åªè¿è¡Œåœ¨æœ¬åœ°ï¼Œç”¨ <code>json</code> æ–‡ä»¶ä½œä¸ºæ•°æ®åº“å­˜å‚¨æ•°æ®ï¼Œç›®å‰ä»…ä¸ªäººä½¿ç”¨ã€‚</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>Web</category>
      </categories>
      <tags>
        <tag>logs</tag>
      </tags>
  </entry>
  <entry>
    <title>Python Note</title>
    <url>/772e1c59.html</url>
    <content><![CDATA[<blockquote>
<p>ä¸œæ‹¼è¥¿å‡‘çš„ <code>python</code> åˆå­¦ä¹‹è·¯ã€‚</p>
</blockquote>
<h2 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h2><ul>
<li>åˆ¶è¡¨ç¬¦ï¼š<code>\t</code></li>
<li>æ¢è¡Œç¬¦ï¼š<code>\n</code></li>
<li>å»é™¤å³è¾¹ç©ºç™½ï¼š<code>.rstrip()</code></li>
<li>å»é™¤å·¦è¾¹ç©ºç™½ï¼š<code>.lstrip()</code></li>
<li>å»é™¤å·¦å³ä¸¤è¾¹ç©ºç™½ï¼ˆåŒ…æ‹¬æ¢è¡Œç¬¦ï¼‰ï¼š<code>.strip()</code></li>
<li>å­—ç¬¦ä¸²å†…ä½¿ç”¨å¼•å·ï¼š<code>\&quot;</code></li>
<li>é¦–å­—æ¯å¤§å†™ï¼š<code>.title()</code></li>
<li>å…¨éƒ¨å¤§å†™ï¼š<code>.upper()</code></li>
<li>å…¨éƒ¨å°å†™ï¼š<code>.lower()</code></li>
<li>æ„é€ å­—ç¬¦ä¸²ï¼ˆèŠ±æ‹¬å·å†…ä¸ºå˜é‡ï¼‰ï¼š&#96;fâ€Hello,{variant}.â€</li>
<li>å»é™¤å‰ç¼€ï¼š<code>.removeprefix(&quot;string&quot;)</code></li>
<li>å»é™¤åç¼€ï¼š<code>.removesuffix(&quot;.txt&quot;)</code></li>
</ul>
<h2 id="è¿ç®—"><a href="#è¿ç®—" class="headerlink" title="è¿ç®—"></a>è¿ç®—</h2><ul>
<li>ä¹˜æ³•ï¼š<code>*</code></li>
<li>é™¤æ³•ï¼ˆè¿”å›æµ®ç‚¹æ•°ï¼‰ï¼š<code>/</code></li>
<li>å¤§æ•°æ˜“è¯»ï¼š<code>1_000_000_000</code></li>
<li>åŒæ—¶èµ‹å€¼ï¼š<code>x, y, z = 0, 2, 7</code></li>
<li>åŒæ—¶è¾“å‡ºï¼š<code>print(x, y, z)</code></li>
<li>å¹‚æ¬¡ï¼š<code>**</code></li>
<li>Python ä¹‹ç¦…ï¼š<code>import this</code></li>
</ul>
<h2 id="åˆ—è¡¨"><a href="#åˆ—è¡¨" class="headerlink" title="åˆ—è¡¨"></a>åˆ—è¡¨</h2><p>å®šä¹‰ï¼šæ–¹æ‹¬å·æ‰©æ­»ï¼Œé‡Œé¢å…ƒç´ ç”¨é€—å·éš”å¼€ã€‚</p>
<p>ä¸‹æ ‡å’Œæ•°ç»„ä¸€æ ·ï¼Œä»é›¶å¼€å§‹ã€‚</p>
<p>è´Ÿæ•°ä¸‹æ ‡è¡¨ç¤ºå€’æ•°ç¬¬å‡ ä¸ªã€‚</p>
<ul>
<li>æœ«å°¾æ’å…¥å…ƒç´ ï¼š<code>.append()</code></li>
<li>å¯¹åº”ä½ç½®æ’å…¥å…ƒç´ ï¼š<code>.insert(1, &#39;fgh&#39;)</code></li>
<li>åˆ é™¤å¯¹åº”ä½ç½®çš„å…ƒç´ ï¼š<code>del b[1]</code></li>
<li>å¼¹å‡ºæœ«å°¾å…ƒç´ ï¼š<code>.pop()</code></li>
<li>è®¿é—®å¼¹å‡ºå…ƒç´ ï¼š<code>a = b.pop()</code></li>
<li>å¼¹å‡ºå¯¹åº”ä½ç½®çš„å…ƒç´ ï¼š<code>.pop(1)</code></li>
<li><code>pop</code> å’Œ <code>del</code> çš„åŒºåˆ«åœ¨äº <code>pop</code> å¯è®¿é—®åˆ é™¤çš„å…ƒç´ ï¼Œ<code>del</code> ä¸è¡Œã€‚</li>
<li>æ ¹æ®å€¼åˆ é™¤<strong>ä¸€ä¸ª</strong>å…ƒç´ ï¼š<code>.remove(&quot;spw&quot;)</code></li>
<li>æ’åºï¼ˆåˆ—è¡¨ä¸­å…ƒç´ ç±»å‹è¦ä¸€æ ·æ‰èƒ½æ’åºï¼ŒæŒ‰ç…§å­—å…¸åºæ’åºï¼‰ï¼š<code>.sort()</code></li>
<li>å€’åºï¼š<code>.sort(reverse = True)</code></li>
<li>ä¸´æ—¶æ’åºï¼Œä¸æ”¹å˜åˆ—è¡¨ï¼Œå¯åŠ å…¥å‚æ•°ï¼š<code>sorted(b, reverse = True)</code></li>
<li>è®¿é—®åˆ—è¡¨ä¸­å…ƒç´ ä¸ªæ•°ï¼š<code>len(b)</code></li>
</ul>
]]></content>
      <categories>
        <category>Back-End</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>React Note</title>
    <url>/f139e650.html</url>
    <content><![CDATA[<blockquote>
<p>React é‡‡ç”¨äº†ä¸€ç§å…¨æ–°çš„ JSX æ ¼å¼ï¼Œå¯¹åŸæ¥ JS çš„è¯­æ³•åšäº†è¿›ä¸€æ­¥çš„æ‰©å±•ï¼Œä½¿ä½ å¯ä»¥åœ¨é‡Œé¢ä½¿ç”¨ HTML æ ‡ç­¾ä»è€Œå°†å®ƒå˜æˆä¸€ä¸ªç»„ä»¶ï¼Œå®ƒçš„ç»„ä»¶åŒ–çš„è®¾è®¡ç†å¿µä¸ Vue æœ‰å¾ˆå¤šç›¸ä¼¼ä¹‹å¤„ã€‚</p>
</blockquote>
<h1 id="Basis"><a href="#Basis" class="headerlink" title="Basis"></a>Basis</h1><p>å…ˆè¯´ä¸€ä¸‹åŸºç¡€æ¦‚å¿µã€‚</p>
<ul>
<li>**ç»„ä»¶åŒ–(Component)**ï¼šå’Œ Vue åŸºæœ¬ç›¸åŒï¼Œé¡µé¢ä¸­æ‰€è§çš†æ˜¯ç»„ä»¶ï¼Œä¸åŒçš„ç»„ä»¶æ„æˆäº†ä¸€ä¸ªé¡µé¢ã€‚</li>
<li>**çŠ¶æ€(State)**ï¼šçŠ¶æ€æ˜¯ç»„ä»¶çš„æ•°æ®ï¼Œç»„ä»¶çš„æ˜¾ç¤ºå†…å®¹å¯ä»¥æ ¹æ®çŠ¶æ€çš„å˜åŒ–è€Œå˜åŒ–ã€‚ç›¸å½“äº Vue ä¸­çš„å“åº”å¼å˜é‡ã€‚</li>
<li>**å±æ€§(Props)**ï¼šä¼ é€’ç»™ç»„ä»¶çš„æ•°æ®ï¼Œç›¸å½“äºå‚æ•°ã€‚</li>
</ul>
<p>ä¸ä½¿ç”¨æ¡†æ¶ç›´æ¥åœ¨ HTML ä¸­ä½¿ç”¨å¯ä»¥å¼•å…¥ä¸¤ä¸ª <code>script</code> æ ‡ç­¾ï¼š</p>
<div class="code-container" data-rel="Html"><figure class="iseeu highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">crossorigin</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/react@18/umd/react.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">crossorigin</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/react-dom@18/umd/react-dom.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h1 id="State"><a href="#State" class="headerlink" title="State"></a>State</h1><p>çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯ Vue ä¸­çš„å“åº”å¼æ•°æ®ã€‚</p>
<p>ç›´æ¥ä¿®æ”¹çŠ¶æ€çš„æ•°æ®å¹¶ä¸ä¼šå¯¼è‡´é¡µé¢æ›´æ–°ï¼Œå› ä¸ºè¿™ä¸ªçŠ¶æ€å ç”¨çš„å†…å­˜åœ°å€æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥å¦‚æœæƒ³è¦è®©é¡µé¢æ›´æ–°ï¼Œéœ€è¦æ›´æ–°è¿™ä¸ªçŠ¶æ€ï¼Œç”¨åˆ° <code>setState</code> æ–¹æ³•ï¼š</p>
<div class="code-container" data-rel="Jsx"><figure class="iseeu highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(); <span class="comment">/* è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•° */</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">      <span class="number">1</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="number">2</span>: <span class="number">2</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>([arg1], [arg2])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>å¯ä»¥æœ‰ä¸¤ä¸ªå‚æ•°ï¼š</p>
<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°ï¼šå¯ä»¥æ˜¯å¯¹è±¡æˆ–è€…å‡½æ•°ï¼Œå¦‚æœæ˜¯å¯¹è±¡åˆ™ç›´æ¥ä¿®æ”¹å¯¹åº”çš„é”®å€¼ï¼Œè¿™é‡Œç›¸å½“äºå°†ä¸¤ä¸ªå¯¹è±¡è¿›è¡Œäº†åˆå¹¶ï¼Œå¦‚æœæ˜¯å‡½æ•°åˆ™æ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚</li>
<li>ç¬¬äºŒä¸ªå‚æ•°ï¼šå›è°ƒå‡½æ•°ï¼Œç”±äº <code>setState</code> æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œæ‰€ä»¥ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯åœ¨æ‰§è¡Œå®Œæˆç¬¬ä¸€ä¸ªå‚æ•°åå†æ‰§è¡Œçš„æ“ä½œã€‚</li>
</ul>
<p>åœ¨ React çš„ HTML æ ‡ç­¾ä¸­ä½¿ç”¨å˜é‡éœ€è¦ç”¨åˆ°æ’å€¼è¡¨è¾¾å¼ï¼Œç”¨èŠ±æ‹¬å·åŒ…è£¹å³å¯ï¼Œå±æ€§å€¼æ˜¯å˜é‡æ—¶ä¸éœ€è¦åŒå¼•å·åŒ…è£¹ã€‚</p>
<h1 id="Component"><a href="#Component" class="headerlink" title="Component"></a>Component</h1><p>å…ˆæŠŠæ ¹ç»„ä»¶æŒ‚è½½åˆ°æ ¹å…ƒç´ ä¸Šï¼Œè¿™é‡Œåœ¨ <code>index.html</code> ä¸­æœ‰ä¸€ä¸ª id ä¸º root çš„å…ƒç´ ï¼Œæˆ‘ä»¬è¦æŠŠæ ¹ç»„ä»¶æŒ‚è½½åˆ°è¿™ä¸Šé¢å¹¶æ¸²æŸ“ï¼š</p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>))</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>)</span><br></pre></td></tr></table></figure></div>

<p><code>createRoot</code> è¿”å›ä¸€ä¸ªæ ¹å¯¹è±¡ï¼Œæœ‰ä¸€ä¸ª <code>render</code> æ–¹æ³•ï¼Œå¯ä»¥å°† React ç»„ä»¶æ¸²æŸ“åˆ°é¡µé¢ã€‚</p>
<h2 id="Class"><a href="#Class" class="headerlink" title="Class"></a>Class</h2><p>ç±»ç»„ä»¶ã€‚</p>
<div class="code-container" data-rel="Jsx"><figure class="iseeu highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(); <span class="comment">/* è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•° */</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">      <span class="number">1</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="number">2</span>: <span class="number">2</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> [component]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>éœ€è¦æœ‰ä¸€ä¸ª <code>render</code> æ–¹æ³•æ¥æ¸²æŸ“ç»„ä»¶ï¼Œè¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªç»„ä»¶ï¼Œç»„ä»¶åªèƒ½ç”±<strong>ä¸€ä¸ªæ ¹å…ƒç´ åŒ…è£¹</strong>ã€‚æœ‰å¤šè¡Œå†…å®¹æ—¶ï¼Œéœ€è¦ç”¨å°æ‹¬å·è¿›è¡ŒåŒ…è£¹ã€‚</p>
<p>ä½†æˆ‘ä»¬æœ‰æ—¶å€™å¹¶ä¸æƒ³é¢å¤–åµŒå¥—ä¸€ä¸ª <code>div</code> æ ‡ç­¾ï¼Œäºæ˜¯å¯ä»¥ä½¿ç”¨ <code>&lt;Fragment&gt;</code> æ ‡ç­¾åŒ…è£¹ï¼Œå®ƒä¸ä¼šè¢«æ¸²æŸ“ï¼Œå¯ä»¥ç®€å†™ä¸º <code>&lt;&gt;&lt;/&gt;</code>ã€‚</p>
<p>ç»„ä»¶æŒ‚è½½æ—¶ä¼šå…ˆæ‰§è¡Œ <code>render</code> æ–¹æ³•ï¼Œå› æ­¤ä¸è¦æœ‰ä»»ä½•å¤šä½™çš„æ“ä½œã€‚</p>
<p>åªæœ‰çŠ¶æ€å€¼(state)æˆ–å±æ€§å€¼(props)å‘ç”Ÿå˜åŒ–åæ‰ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ã€‚</p>
<h2 id="Function"><a href="#Function" class="headerlink" title="Function"></a>Function</h2><p>å‡½æ•°ç»„ä»¶ã€‚</p>
<div class="code-container" data-rel="Jsx"><figure class="iseeu highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> ()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>éœ€è¦æ¸²æŸ“ä»€ä¹ˆç›´æ¥ return å³å¯ã€‚</p>
<p>å˜é‡å‡½æ•°å¯ä»¥ç›´æ¥å®šä¹‰ï¼Œä½†ç”±äºæ²¡æœ‰æ„é€ å‡½æ•°ï¼Œéœ€è¦ä½¿ç”¨ <code>useState()</code> æ¥åˆå§‹åŒ–çŠ¶æ€å€¼ã€‚</p>
<div class="code-container" data-rel="Jsx"><figure class="iseeu highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> [state, setState] = <span class="title class_">React</span>.<span class="title function_">useState</span>([initValue]);</span><br></pre></td></tr></table></figure></div>

<p><code>useState()</code> è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œç¬¬ä¸€ä¸ªæ˜¯åˆå§‹åŒ–çš„çŠ¶æ€å€¼ï¼Œç¬¬äºŒä¸ªæ˜¯è®¾ç½®è¿™ä¸ªçŠ¶æ€å€¼çš„å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨è§£æ„çš„æ–¹æ³•å¾—åˆ°ã€‚</p>
<p>è¿™æ ·ä½¿ç”¨å˜é‡å°±å¯ä»¥ç›´æ¥ä½¿ç”¨æ— éœ€ <code>this.state</code>ï¼Œä¿®æ”¹åªéœ€è¦ <code>setState(newValue)</code> è€Œæ— éœ€ <code>this.setState(&#123;key: newValue&#125;)</code>ã€‚</p>
<p>åƒæäº† Vue ä¸­çš„ç»„åˆå¼ API å’Œé€‰é¡¹å¼ API ä¹‹é—´çš„å…³ç³»ã€‚</p>
<p>ä½†æ˜¯å¦‚æœéœ€è¦åœ¨æŒ‚è½½åæ‰§è¡Œ <code>fetch</code> æ“ä½œï¼Œå¯èƒ½ä¼šå‡ºç°æ­»å¾ªç¯ï¼Œ<code>fetch</code> åˆ°æ•°æ®åï¼ŒçŠ¶æ€ä¿®æ”¹ï¼Œå‡½æ•°ä»å¤´æ‰§è¡Œâ€¦â€¦</p>
<p>åœ¨ç±»ç»„ä»¶ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œé‚£å‡½æ•°ç»„ä»¶å‘¢ï¼Ÿ</p>
<p>è¿™é‡Œéœ€è¦ä½¿ç”¨ <code>useEffect</code>ï¼Œ<code>useEffect</code> æ˜¯ React ä¸­çš„ä¸€ä¸ª Hookï¼Œç”¨äºåœ¨å‡½æ•°ç»„ä»¶ä¸­å¤„ç†å‰¯ä½œç”¨ï¼ˆside effectsï¼‰ã€‚å‰¯ä½œç”¨æ˜¯æŒ‡é‚£äº›åœ¨ç»„ä»¶æ¸²æŸ“è¿‡ç¨‹ä¸­éœ€è¦æ‰§è¡Œä½†ä¸ç›´æ¥äº§ç”Ÿ UI çš„ä»£ç ï¼Œæ¯”å¦‚æ•°æ®è·å–ã€è®¢é˜…ã€æ‰‹åŠ¨ä¿®æ”¹ DOMã€è®°å½•æ—¥å¿—ç­‰ã€‚</p>
<p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦æ‰§è¡Œçš„å‡½æ•°ï¼Œå‡½æ•°å¯ä»¥è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œä½œä¸ºæ¸…ç†å‡½æ•°ï¼›</p>
<p>ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªä¾èµ–æ•°ç»„ï¼Œå¦‚æœä¸ºç©ºä»£è¡¨åªæ‰§è¡Œä¸€æ¬¡ï¼›å¦‚æœæ²¡æœ‰é‚£ä¹ˆæ¯æ¬¡æ¸²æŸ“éƒ½ä¼šæ‰§è¡Œï¼›å¦‚æœæ•°ç»„åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå˜é‡ï¼Œé‚£ä¹ˆä¼šåœ¨ä¾èµ–å‘ç”Ÿå˜åŒ–æ—¶æ‰ä¼šæ‰§è¡Œã€‚</p>
<p>å‡½æ•°ç»„ä»¶çš„å‚æ•°å°±æ˜¯ç”¨æ¥æ¥æ”¶ props çš„ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚</p>
<h1 id="Syntax"><a href="#Syntax" class="headerlink" title="Syntax"></a>Syntax</h1><h2 id="style"><a href="#style" class="headerlink" title="style"></a>style</h2><p>å¯ä»¥åœ¨å…ƒç´ ä¸­æ·»åŠ  <code>style</code> å±æ€§ï¼Œä½†æ˜¯å±æ€§å€¼éœ€è¦æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œç”±äºå˜é‡éœ€è¦ç”¨èŠ±æ‹¬å·åŒ…è£¹ï¼Œæ‰€ä»¥éœ€è¦ç”¨åˆ°ä¸¤ä¸ªèŠ±æ‹¬å·ã€‚</p>
]]></content>
      <categories>
        <category>Front-End</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>Regex Note</title>
    <url>/23441a96.html</url>
    <content><![CDATA[<blockquote>
<p>regex</p>
</blockquote>
<p>æ¨èåœ¨çº¿æµ‹è¯•ç½‘ç«™ï¼š<a class="link"   href="https://regex101.com/" >Link<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<ul>
<li><code>?</code> ä»£è¡¨å‰é¢è¿™ä¸ªå­—ç¬¦å¯æœ‰å¯æ— <ul>
<li><code>used?</code> åŒ¹é…çš„æ˜¯ <code>use</code> å’Œ <code>used</code>ã€‚</li>
</ul>
</li>
<li><code>*</code> ä»£è¡¨å‰é¢è¿™ä¸ªå­—ç¬¦å¯ä»¥å‡ºç° 0 æ¬¡åˆ°æ— æ•°æ¬¡ã€‚<ul>
<li><code>ab*c</code> å¯ä»¥åŒ¹é… <code>ac</code>ï¼Œä¹Ÿå¯ä»¥åŒ¹é… <code>abbbbc</code>ã€‚</li>
</ul>
</li>
<li><code>+</code> ä¸ <code>*</code> ç±»ä¼¼ï¼Œä½†ä¸å¯ä»¥å‡ºç° 0 æ¬¡ã€‚</li>
<li><code>&#123;x, y&#125;</code> ä»£è¡¨å‰é¢çš„å­—ç¬¦å‡ºç° x åˆ° y æ¬¡ï¼Œå¦‚æœåªå‡ºç° x æ¬¡çœç•¥ <code>,y</code> ï¼Œå¦‚æœå‡ºç°å¤§äºç­‰äº x æ¬¡é‚£ä¹ˆçœç•¥ <code>y</code>ã€‚</li>
<li>å¦‚æœæƒ³è¦åŒ¹é…å¤šä¸ªå­—ç¬¦ï¼Œé‚£ä¹ˆç”¨æ‹¬å·åŒ…è£¹å®ƒä»¬ã€‚</li>
<li><code>(|)</code> æ˜¯æˆ–è¿ç®—ç¬¦ï¼Œéœ€è¦ç”¨æ‹¬å·åŒ…è£¹ã€‚<ul>
<li><code>a (cat|dog)</code> å¯ä»¥åŒ¹é… <code>a cat</code> æˆ–è€… <code>a dog</code>ã€‚</li>
</ul>
</li>
<li><code>[]</code> é‡Œçš„å­—ç¬¦ä»£è¡¨åŒ¹é…çš„é€‰æ‹©èŒƒå›´ã€‚<ul>
<li>å¦‚ <code>[abc]</code> <code>[a-z]</code> <code>[a-zA-z0-9]</code>ã€‚</li>
</ul>
</li>
<li><code>[^]</code> è¡¨ç¤ºéã€‚<ul>
<li>å¦‚ <code>[^0-9]</code> è¡¨ç¤ºæ‰€æœ‰çš„éæ•°å­—å­—ç¬¦ã€‚</li>
</ul>
</li>
<li><code>\d</code> è¡¨ç¤ºæ•°å­—å­—ç¬¦ï¼Œç­‰åŒäº <code>[0-9]</code>ã€‚</li>
<li><code>\w</code> è¡¨ç¤ºå•è¯å­—ç¬¦ï¼Œæ‰€æœ‰çš„å­—æ¯åŠ ä¸‹åˆ’çº¿ã€‚</li>
<li><code>\s</code> è¡¨ç¤ºç©ºç™½ç¬¦ï¼ŒåŒ…å« <code>tab</code> å’Œæ¢è¡Œç¬¦ã€‚</li>
<li><code>\D</code> ä»£è¡¨éæ•°å­—å­—ç¬¦ï¼Œå…¶å®ƒä»¥æ­¤ç±»æ¨ã€‚</li>
<li><code>.</code> ä»£è¡¨ä»»æ„å­—ç¬¦ï¼ˆä¸åŒ…æ‹¬æ¢è¡Œç¬¦ï¼‰ã€‚</li>
<li><code>^</code> è¡¨ç¤ºä»è¡Œé¦–å¼€å§‹åŒ¹é…ï¼Œ<code>$</code> è¡¨ç¤ºä»è¡Œå°¾å¼€å§‹åŒ¹é…ã€‚<ul>
<li>å¦‚ <code>^a</code> è¡¨ç¤ºåªåŒ¹é…è¡Œé¦–çš„ <code>a</code>ï¼Œ<code>a$</code> åªåŒ¹é…è¡Œå°¾çš„ <code>a</code>ã€‚</li>
</ul>
</li>
<li><code>+?</code> ä¼šå°†åŒ¹é…æ¨¡å¼ç”±é»˜è®¤çš„å°½å¯èƒ½å¤šçš„åŒ¹é…å˜æˆå°½å¯èƒ½å°‘çš„åŒ¹é…ã€‚</li>
<li><code>\b</code> è¡¨ç¤ºå•è¯å­—ç¬¦çš„è¾¹ç•Œã€‚</li>
</ul>
<p><strong>å°ä¾‹å­ï¼š</strong></p>
<ul>
<li>åŒ¹é…åå…­è¿›åˆ¶è‰²å€¼ï¼š<code>/#[a-fA-F0-9]&#123;6&#125;\b/gm</code></li>
<li>åŒ¹é… <code>IPV4</code> åœ°å€ï¼š<code>/\b((25[0-5]|2[0-4]\d|[01]?\d\d?)\.)&#123;3&#125;(25[0-5]|2[0-4]\d|[01]?\d\d?)\b/gm</code></li>
<li>åŒ¹é… vue æŒ‡ä»¤ï¼š<code>/^v-([\w-]+)$/</code></li>
</ul>
]]></content>
      <categories>
        <category>Back-End</category>
      </categories>
      <tags>
        <tag>regex</tag>
      </tags>
  </entry>
  <entry>
    <title>TypeScript Note</title>
    <url>/a4a6c774.html</url>
    <content><![CDATA[<blockquote>
<p>è¶Šæ¥è¶Šåƒ c++ äº†</p>
</blockquote>
<p>å®ƒæ˜¯ JavaScript çš„ä¸€ä¸ªè¶…é›†ã€‚</p>
<p>ç»è¿‡ç¼–è¯‘åå˜æˆ JavaScript æ‰å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œã€‚</p>
<h1 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h1><h2 id="è‡ªåŠ¨è¯†åˆ«ç±»å‹"><a href="#è‡ªåŠ¨è¯†åˆ«ç±»å‹" class="headerlink" title="è‡ªåŠ¨è¯†åˆ«ç±»å‹"></a>è‡ªåŠ¨è¯†åˆ«ç±»å‹</h2><div class="code-container" data-rel="Ts"><figure class="iseeu highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="number">1</span></span><br><span class="line">num = <span class="string">&#x27;err&#x27;</span> <span class="comment">// error</span></span><br></pre></td></tr></table></figure></div>

<p>å˜é‡ä¸€ç»èµ‹å€¼ï¼Œå®ƒçš„ç±»å‹ä¹Ÿå°±ç¡®å®šä¸‹æ¥äº†ï¼Œç›´æ¥ä¿®æ”¹ä¼šæŠ¥é”™ã€‚</p>
<h2 id="ç±»å‹æŒ‡å®š"><a href="#ç±»å‹æŒ‡å®š" class="headerlink" title="ç±»å‹æŒ‡å®š"></a>ç±»å‹æŒ‡å®š</h2><p>å®šä¹‰æ—¶æˆ‘ä»¬ä¾¿å¯ä»¥å®šä¹‰å®ƒçš„ç±»å‹ã€‚</p>
<div class="code-container" data-rel="Ts"><figure class="iseeu highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">num</span>: <span class="built_in">number</span></span><br><span class="line">num = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">numArr</span>: <span class="built_in">number</span>[]</span><br><span class="line"><span class="keyword">let</span> <span class="title class_">Arr</span>: <span class="title class_">Array</span>&lt;<span class="built_in">number</span>&gt;</span><br><span class="line"><span class="comment">// equal</span></span><br></pre></td></tr></table></figure></div>

<h2 id="ç±»å‹æ–­è¨€"><a href="#ç±»å‹æ–­è¨€" class="headerlink" title="ç±»å‹æ–­è¨€"></a>ç±»å‹æ–­è¨€</h2><div class="code-container" data-rel="Ts"><figure class="iseeu highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> numArr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">const</span> result = numArr.<span class="title function_">find</span>(<span class="function"><span class="params">item</span> =&gt;</span> item &gt; <span class="number">2</span>) <span class="keyword">as</span> <span class="built_in">number</span></span><br><span class="line">result * <span class="number">5</span></span><br></pre></td></tr></table></figure></div>

<p>å¦‚æœä¸åŠ æ–­è¨€ <code>as number</code> ä¼šå¯¼è‡´é”™è¯¯ï¼Œå› ä¸ºå¯èƒ½è¿”å›çš„å€¼æ˜¯ <code>undefined</code>ï¼Œè€Œ <code>undefined</code> æ˜¯ä¸èƒ½è¿›è¡Œæ•°å­¦è¿ç®—çš„ï¼Œå¦‚æœæˆ‘ä»¬ç¡®å®šå®ƒçš„å€¼ç±»å‹ä¸€å®šï¼Œä¾¿å¯ä»¥æ·»åŠ æ–­è¨€ï¼Œè¿™æ ·å°±ä¸ä¼šå¯¼è‡´æŠ¥é”™ã€‚</p>
<p>åœ¨ JavaScript  ä¸­ï¼Œ<code>undefined</code> åˆ™ä¼šè¢«å½“ä½œ <code>NaN</code> è¿›è¡Œæ•°å­¦è¿ç®—ã€‚</p>
<h2 id="åŸºç¡€ç±»å‹"><a href="#åŸºç¡€ç±»å‹" class="headerlink" title="åŸºç¡€ç±»å‹"></a>åŸºç¡€ç±»å‹</h2><ul>
<li>string</li>
<li>number</li>
<li>boolean</li>
<li>null</li>
<li>undefined</li>
<li>void<ul>
<li>å€¼åªæœ‰<code>undefined</code>ï¼Œå‡½æ•°çš„ç±»å‹</li>
</ul>
</li>
</ul>
<h2 id="è”åˆç±»å‹"><a href="#è”åˆç±»å‹" class="headerlink" title="è”åˆç±»å‹"></a>è”åˆç±»å‹</h2><p>å¦‚æœä¸€ä¸ªå€¼å¯èƒ½æœ‰å¤šä¸ªç±»å‹ï¼Œå®šä¹‰æ—¶ä½¿ç”¨ <code>|</code> éš”å¼€å³å¯ã€‚</p>
<div class="code-container" data-rel="Ts"><figure class="iseeu highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">v</span>: <span class="built_in">string</span> | <span class="literal">null</span> = <span class="literal">null</span></span><br></pre></td></tr></table></figure></div>

<p><code>null</code> å€¼é»˜è®¤å¯ä»¥åˆ†é…ç»™ä»»æ„ç±»å‹ï¼Œå¼€å¯ä¸¥æ ¼é…ç½®åï¼Œåªå¯ä»¥åˆ†é…ç»™ <code>null</code> ç±»å‹ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡è¿™ç§æ–¹å¼å£°æ˜ä¸€ä¸‹ã€‚</p>
<p>ä¹Ÿå¯ä»¥ç”¨å®ƒæ¥é™åˆ¶å–å€¼ï¼Œå¦‚ï¼š</p>
<div class="code-container" data-rel="Ts"><figure class="iseeu highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">v</span>: <span class="number">1</span> | <span class="number">2</span> | <span class="number">3</span></span><br></pre></td></tr></table></figure></div>

<p>è¿™æ ·å®ƒå°±åªèƒ½å–è¿™ä¸‰ä¸ªå€¼ã€‚</p>
<h2 id="å…ƒç»„"><a href="#å…ƒç»„" class="headerlink" title="å…ƒç»„"></a>å…ƒç»„</h2><div class="code-container" data-rel="Ts"><figure class="iseeu highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">t</span>: [<span class="built_in">number</span>, <span class="built_in">string</span>, <span class="built_in">number</span>?] = [<span class="number">1</span>, <span class="string">&#x27;a&#x27;</span>, <span class="number">2</span>]</span><br></pre></td></tr></table></figure></div>

<p>ç±»ä¼¼äºæ•°ç»„ï¼Œé¢„å®šç±»å‹ã€‚</p>
<p>å¦‚æœè¯¥å€¼å¯é€‰ï¼ŒåŠ ä¸ªé—®å·å³å¯ã€‚</p>
<h2 id="æšä¸¾ç±»å‹"><a href="#æšä¸¾ç±»å‹" class="headerlink" title="æšä¸¾ç±»å‹"></a>æšä¸¾ç±»å‹</h2><div class="code-container" data-rel="Ts"><figure class="iseeu highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">My</span> &#123;</span><br><span class="line">	A,</span><br><span class="line">	B,</span><br><span class="line">	C</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">My</span>.<span class="property">A</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">My</span>[<span class="number">0</span>])</span><br></pre></td></tr></table></figure></div>

<h2 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h2><div class="code-container" data-rel="Ts"><figure class="iseeu highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Obj</span> &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">	<span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">const</span> <span class="attr">obj</span>: <span class="title class_">Obj</span> = &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="string">&#x27;a&#x27;</span>,</span><br><span class="line">	<span class="attr">age</span>: <span class="number">10</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="ç±»å‹åˆ«å"><a href="#ç±»å‹åˆ«å" class="headerlink" title="ç±»å‹åˆ«å"></a>ç±»å‹åˆ«å</h2><div class="code-container" data-rel="Ts"><figure class="iseeu highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Mytype</span> = <span class="built_in">string</span> | <span class="built_in">number</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="title class_">Mytype</span></span><br></pre></td></tr></table></figure></div>

<h2 id="æ³›å‹å‡½æ•°"><a href="#æ³›å‹å‡½æ•°" class="headerlink" title="æ³›å‹å‡½æ•°"></a>æ³›å‹å‡½æ•°</h2><div class="code-container" data-rel="Ts"><figure class="iseeu highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> fn&lt;T&gt;(<span class="attr">a</span>: T, <span class="attr">b</span>: T): T[] &#123;</span><br><span class="line">	<span class="keyword">return</span> [a, b]</span><br><span class="line">&#125;</span><br><span class="line">fn&lt;<span class="built_in">number</span>&gt;(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="title function_">fn</span>(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="title function_">fn</span>(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>)</span><br></pre></td></tr></table></figure></div>

<h1 id="è¿›é˜¶"><a href="#è¿›é˜¶" class="headerlink" title="è¿›é˜¶"></a>è¿›é˜¶</h1><h2 id="å‡½æ•°é‡è½½"><a href="#å‡½æ•°é‡è½½" class="headerlink" title="å‡½æ•°é‡è½½"></a>å‡½æ•°é‡è½½</h2><div class="code-container" data-rel="Ts"><figure class="iseeu highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">hello</span> (<span class="params"><span class="attr">name</span>: <span class="built_in">string</span></span>): <span class="built_in">string</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">hello</span> (<span class="params"><span class="attr">age</span>: <span class="built_in">number</span></span>): <span class="built_in">string</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">helllo</span>(<span class="params"><span class="attr">value</span>: <span class="built_in">string</span> | <span class="built_in">number</span></span>): <span class="built_in">string</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&#x27;a&#x27;</span> + value</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>å…¶å®åªä¿ç•™æœ€åä¸€è¡Œå‡½æ•°å®šä¹‰ä¹Ÿæ²¡é—®é¢˜ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯ vsc ä¼šæç¤ºä½ å‡½æ•°ç»“æ„ã€‚</p>
<h2 id="æ¥å£ç»§æ‰¿"><a href="#æ¥å£ç»§æ‰¿" class="headerlink" title="æ¥å£ç»§æ‰¿"></a>æ¥å£ç»§æ‰¿</h2><div class="code-container" data-rel="Ts"><figure class="iseeu highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Parent</span> &#123;</span><br><span class="line">	<span class="attr">prop1</span>: <span class="built_in">string</span></span><br><span class="line">	<span class="attr">prop2</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_">Parent</span> &#123;</span><br><span class="line">	<span class="attr">prop3</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="ç±»æ„é€ å‡½æ•°"><a href="#ç±»æ„é€ å‡½æ•°" class="headerlink" title="ç±»æ„é€ å‡½æ•°"></a>ç±»æ„é€ å‡½æ•°</h2><div class="code-container" data-rel="Ts"><figure class="iseeu highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Article</span> &#123;</span><br><span class="line">	<span class="attr">title</span>: <span class="built_in">string</span></span><br><span class="line">	<span class="attr">content</span>: <span class="built_in">string</span></span><br><span class="line">	<span class="title function_">constructor</span> (<span class="params"><span class="attr">title</span>: <span class="built_in">string</span>, <span class="attr">content</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">title</span> = title</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">content</span> = content</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="å­˜å–å™¨"><a href="#å­˜å–å™¨" class="headerlink" title="å­˜å–å™¨"></a>å­˜å–å™¨</h2><div class="code-container" data-rel="Ts"><figure class="iseeu highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="attr">_password</span>: <span class="built_in">string</span></span><br><span class="line">	<span class="keyword">get</span> <span class="title function_">password</span>(): <span class="built_in">string</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;*******&quot;</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">set</span> <span class="title function_">password</span>(<span class="params"><span class="attr">newPass</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">_password</span> = newPass</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> u = <span class="keyword">new</span> <span class="title class_">User</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(u.<span class="property">password</span>)</span><br><span class="line">u.<span class="property">password</span> = <span class="string">&quot;123456&quot;</span></span><br></pre></td></tr></table></figure></div>

<h2 id="æŠ½è±¡ç±»"><a href="#æŠ½è±¡ç±»" class="headerlink" title="æŠ½è±¡ç±»"></a>æŠ½è±¡ç±»</h2><p>å¯èƒ½ä¸ä¼šè¢«å®ä¾‹åŒ–ï¼Œåªæ˜¯ä½œä¸ºåŸºç±»ç»™å…¶å®ƒç±»è§„èŒƒæ ¼å¼çš„ã€‚</p>
<div class="code-container" data-rel="Ts"><figure class="iseeu highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">	<span class="keyword">abstract</span> <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">	<span class="keyword">abstract</span> <span class="attr">color</span>: <span class="built_in">string</span></span><br><span class="line">	haha?: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span> &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="built_in">string</span> = <span class="string">&#x27;cat&#x27;</span></span><br><span class="line">	<span class="attr">color</span>: <span class="string">&#x27;orange&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>æŠ½è±¡ç±»ä¸­å¯ä»¥æœ‰æŠ½è±¡å±æ€§ï¼Œè¿™æ ·è¢«å­ç±»ç»§æ‰¿æ—¶å­ç±»å¿…é¡»å®ç°æŠ½è±¡å±æ€§ï¼Œè€ŒéæŠ½è±¡å±æ€§å­ç±»å¯ä»¥æ­£å¸¸ç»§æ‰¿ä½¿ç”¨ã€‚</p>
<h2 id="æ¥å£å®ç°"><a href="#æ¥å£å®ç°" class="headerlink" title="æ¥å£å®ç°"></a>æ¥å£å®ç°</h2><div class="code-container" data-rel="Ts"><figure class="iseeu highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">	<span class="keyword">get</span> <span class="title function_">sound</span>(): <span class="built_in">string</span></span><br><span class="line">	<span class="title function_">makeSound</span>(): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">implements</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="built_in">string</span> =<span class="string">&#x27;dog&#x27;</span></span><br><span class="line">	<span class="keyword">get</span> <span class="title function_">sound</span>() &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&#x27; &#x27;</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="title function_">makeSound</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>å¯ä»¥ç»§æ‰¿å¤šä¸ªæ¥å£ï¼Œé€—å·éš”å¼€å³å¯ï¼Œä½†ä¸èƒ½ç»§æ‰¿å¤šä¸ªç±»ã€‚</p>
<h2 id="æ³›å‹ç±»"><a href="#æ³›å‹ç±»" class="headerlink" title="æ³›å‹ç±»"></a>æ³›å‹ç±»</h2><div class="code-container" data-rel="Ts"><figure class="iseeu highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span>&lt;T&gt; &#123;</span><br><span class="line">	<span class="attr">value</span>: T</span><br><span class="line">	<span class="title function_">constructor</span> (<span class="params"><span class="attr">value</span>: T</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">value</span> = value</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="title function_">do</span> (<span class="attr">input</span>: T): T &#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">value</span>)</span><br><span class="line">		<span class="keyword">return</span> input</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">My</span> = <span class="keyword">new</span> <span class="title class_">MyClass</span>&lt;<span class="built_in">string</span>&gt;(<span class="string">&#x27;hello&#x27;</span>)</span><br></pre></td></tr></table></figure></div>

<p>ä¸æ³›å‹å‡½æ•°ç±»ä¼¼ã€‚</p>
]]></content>
      <categories>
        <category>Front-End</category>
      </categories>
      <tags>
        <tag>typescript</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu Configuration Diary</title>
    <url>/f24024d4.html</url>
    <content><![CDATA[<h1 id="Pre-Info"><a href="#Pre-Info" class="headerlink" title="Pre-Info"></a>Pre-Info</h1><p>ä¸€å¹´å‰åœ¨ç§»åŠ¨ç¡¬ç›˜ä¸Šå®‰è£…äº† Ubuntu22.04ï¼Œä½†ä¹Ÿä»…ä»…æ˜¯å®‰è£…ï¼Œå¹¶æ²¡æœ‰ä½¿ç”¨ï¼Œåƒç°äº†å‡ ä¸ªæœˆåè¢«æˆ‘æ¸…ç†ã€‚</p>
<p>æœ€è¿‘æœ‰ç§»åŠ¨ä½¿ç”¨çš„éœ€æ±‚ï¼Œå“ªæ€•æ˜¯åœ¨ 100W PDå……ç”µçš„ä½åŠŸè€—æ¨¡å¼æƒ…å†µä¸‹ï¼ŒWindows11 çš„èµ„æºè°ƒåº¦ä¹Ÿæ˜¯ç›¸å½“æ¿€è¿›çš„ï¼Œåœ¨åŒæ—¶æ‰“å¼€ Edgeã€Vscodeã€Obsidian å’Œç½‘æ˜“äº‘éŸ³ä¹æ—¶é£æ‰‡è¿˜æ˜¯ä¼šè½¬ï¼ˆå›¾ä¹¦é¦†é‡Œæœ‰ç‚¹å°åµï¼‰ï¼Œæ¸©åº¦äº”å…­ååº¦å§ã€‚</p>
<p>å¬è¯´ Linux è´Ÿè½½å°ï¼Œé‚£å°±æ¢æ¥è¯•è¯•ï¼Œæ­£å¥½æˆ‘ä¹Ÿçˆ±æŠ˜è…¾è¿™äº›ã€‚</p>
<p>äºæ˜¯ä¸‰å¤©è¿‡å»äº†â€¦â€¦</p>
<p>å…ˆçœ‹æˆæœï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202407191720315.webp"
                     
                ></p>
<p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæœ‰å‡ ä¸ªèƒ½åŠ›æ˜¯å¿…ä¸å¯å°‘çš„ï¼š</p>
<ul>
<li>é˜…è¯»æ–‡æ¡£</li>
<li>Google è‹±æ–‡æœç´¢</li>
<li>ChatGPT çš„è¾…åŠ©</li>
<li>çœ‹æŠ¥é”™ä¿¡æ¯</li>
</ul>
<p>æ²¡åŠæ³•ï¼Œå¦‚æ­¤ä¸€ä¸ªä¸ç®—çƒ­é—¨çš„é¢†åŸŸï¼Œæƒ³è¦æ‰¾åˆ°é«˜è´¨é‡ä¸”æœ‰ä½“ç³»çš„æ˜“æ‡‚çš„ä¿¡æ¯ï¼Œå¾ˆéš¾å¾ˆéš¾ã€‚</p>
<p>æœ€å¥½çš„ä¿¡æ¯å½“å±å®˜æ–¹æ–‡æ¡£ï¼Œå½“ç„¶å…¨éƒ½æ˜¯è‹±æ–‡ï¼Œéœ€è¦è¾ƒå¼ºçš„è‹±æ–‡é˜…è¯»èƒ½åŠ›ã€‚</p>
<p>æ–‡æ¡£ä¸å¥½å•ƒï¼Œæˆ‘æœ‰æ—¶å€™é€‰æ‹©æŠŠå®ƒä¸¢ç»™ GPT è®©å®ƒå¸®æˆ‘åˆ†æç„¶åé€šè¿‡æ–‡æ¡£å›ç­”æˆ‘çš„é—®é¢˜ã€‚</p>
<p>å…¶æ¬¡ä¸­æ–‡è¯­æ–™çš„ä¿¡æ¯å°‘å¾—å¯æ€œï¼Œè¿‘å¹´æ¥ä¸­æ–‡äº’è”ç½‘é€æ¸å°é—­åŒ–ï¼Œè¶Šæ¥è¶Šéš¾ä»¥æ‰¾åˆ°é«˜è´¨é‡çš„ä¸­æ–‡ä¿¡æ¯ï¼Œä¹‹å‰å…¨é  CSDNï¼ŒæŸä¹ï¼Œåšå®¢æ’‘èµ·ä¸€ç‰‡å¤©ã€‚ç”¨è‹±æ–‡æœç´¢çš„å¿…è¦æ€§æ—¥ç›Šæ˜¾éœ²ã€‚</p>
<p>æœ€åå°±æ˜¯çœ‹æŠ¥é”™ä¿¡æ¯ï¼Œæ—¥å¿—ä¹‹ç±»çš„ï¼Œå¤§ç™½è¯å†™å¾—å¾ˆæ¸…æ¥šï¼Œå°±æ˜¯å…¨æ˜¯è‹±æ–‡çš„ä¸å¥½è¯»ï¼Œæœ‰é—®é¢˜ä¹Ÿå¯ä»¥å…ˆå»çœ‹çœ‹ä»“åº“çš„ Issueã€‚</p>
<h1 id="Linux-Install"><a href="#Linux-Install" class="headerlink" title="Linux Install"></a>Linux Install</h1><blockquote>
<p>Ubuntu24.04 LTS</p>
</blockquote>
<p>å‡†å¤‡ä¸€ä¸ª 8GB ä»¥ä¸Šçš„ Uç›˜ï¼Œä½¿ç”¨ rufus åˆ¶ä½œå¯åŠ¨ç›˜ã€‚</p>
<p>åœ¨ BIOS ä¸­æ”¹ä¸ºä»¥å¯åŠ¨ç›˜ä¼˜å…ˆå¯åŠ¨ï¼Œè¿™æ ·å°±å¯ä»¥è¿›å…¥åˆ° Ubuntu çš„å®‰è£…ç•Œé¢ï¼Œæ¥ä¸‹å»å‚»ç“œæ“ä½œå³å¯ã€‚</p>
<p>åˆ†åŒºæ‰‹åŠ¨é…ç½®ï¼š</p>
<p>æ­£å¸¸æ¥è®²éœ€è¦æœ‰è¿™ä¹ˆå‡ ä¸ªåˆ†åŒºï¼š</p>
<ul>
<li><code>/</code> æ ¹ç›®å½•ï¼Œç›¸å½“äº C ç›˜ã€‚</li>
<li><code>/home</code>ï¼Œç›¸å½“äºå…¶å®ƒç›˜ã€‚</li>
<li><code>swap</code>ï¼Œç›¸å½“äºè™šæ‹Ÿå†…å­˜ã€‚</li>
</ul>
<p>æˆ‘çš„ RAM æ˜¯ 16Gï¼Œæ‰€ä»¥ <code>swap</code> åˆ†åŒºè®¾ç½®ä¸º 10Gï¼Œ<code>/</code> è®¾ç½® 30Gï¼Œ<code>/home</code> è®¾ç½® 60Gï¼Œæ€»å…± 100Gã€‚</p>
<p>ä½†å…¶å®æ ¹æœ¬æ°¸ä¸äº†è¿™ä¹ˆå¤šï¼Œ<code>/home</code> æ„Ÿè§‰ 20ï½30G å°±å¤Ÿç”¨äº†ã€‚</p>
<p>å¬è¯´ç°åœ¨ Linux ä¹Ÿå¯ä»¥å®‰è£… Steam æ‰“æ¸¸æˆäº†ï¼Œå°±æ˜¯ä¸çŸ¥é“å…¼å®¹æ€§æ€ä¹ˆæ ·ã€‚</p>
<p>éœ‡æƒŠï¼Œé¢„è£… NVIDIA æ˜¾å¡é©±åŠ¨ï¼</p>
<blockquote>
<p>Linus æ’¤å›äº†ä¸€ä¸ª Fu**</p>
</blockquote>
<h1 id="Apps-Install"><a href="#Apps-Install" class="headerlink" title="Apps Install"></a>Apps Install</h1><h2 id="Browser"><a href="#Browser" class="headerlink" title="Browser"></a>Browser</h2><p>Edgeã€Chrome ç­‰æµè§ˆå™¨ä¸æ”¯æŒåœ¨ ROOT ç”¨æˆ·ä¸‹è¿è¡Œï¼ˆå‡ºäºå®‰å…¨è€ƒè™‘ï¼‰ï¼Œæˆ‘å¿˜äº†æˆ‘æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜äº†ï¼Œæ²¡å•¥éœ€æ±‚çš„è¯ FireFoxã€Opera éƒ½æŒºå¥½ç”¨çš„ã€‚</p>
<p>æˆ‘å°è¯•è¿‡çš„è§£å†³æ–¹å‘ï¼š</p>
<ul>
<li>æŒ‰ç…§ç½‘ä¸Šæ•™ç¨‹ä¿®æ”¹é…ç½®æ–‡ä»¶ âŒ</li>
<li>ä½¿ç”¨ Dev ç‰ˆæˆ–è€… Beta ç‰ˆ âŒ</li>
<li>åˆ›å»ºå…¶å®ƒç”¨æˆ·ï¼Œä»¥é ROOT ç”¨æˆ·æƒé™å¯åŠ¨ â“</li>
<li>æŠŠ <code>~/.config/microsoft-edge/</code> ä¸‹ä»¥ <code>singleton</code> å¼€å¤´çš„æ–‡ä»¶åˆ é™¤ â“</li>
<li>â€¦</li>
</ul>
<p>åæ­£æœ€åè§£å†³äº†ï¼Œstable ç‰ˆçš„ Edgeã€‚</p>
<h2 id="Markdown"><a href="#Markdown" class="headerlink" title="Markdown"></a>Markdown</h2><p><a class="link"   href="https://obsidian.md/" >Obsidian<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> YYDSï¼</p>
<p>å›¾åºŠï¼š<a class="link"   href="https://github.com/Molunerfinn/PicGo" >Picgo<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p><code>.snap</code> æ ¼å¼çš„æ–‡ä»¶è¿™æ ·å®‰è£…ï¼š</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> snap install --dangerous [file_name]</span><br></pre></td></tr></table></figure></div>

<p>Picgo æ’ä»¶æ— æ³•å®‰è£…çš„è¯ï¼Œå¯ä»¥æ‰‹åŠ¨å®‰è£…ï¼Œ</p>
<p>åœ¨ <code>~/snap/picgo/current/.config/picgo</code> ç›®å½•ä¸‹ä½¿ç”¨ <code>npm install [picgo-plugin-name]</code> å³å¯ã€‚</p>
<p>å®‰è£… <code>npm</code> å’Œ <code>nvm</code> ä»¥åŠ <code>node.js</code> è¯·è‡ªè¡Œæœç´¢ã€‚</p>
<h2 id="Music"><a href="#Music" class="headerlink" title="Music"></a>Music</h2><p>æ²¡æœ‰å¥½ç”¨çš„ Linux ç‰ˆæœ¬çš„ç½‘æ˜“äº‘éŸ³ä¹ï¼Œäºæ˜¯æ”¹ç”¨ Spotify.</p>
<p>Snap å•†åº—é‡Œå°±èƒ½ä¸‹ï¼ˆå°±æ˜¯è‡ªå¸¦çš„é‚£ä¸ªåº”ç”¨å•†åº—ï¼‰ã€‚</p>
<p>ä½†æ˜¯æœ‰éå¸¸å¥½ç”¨çš„ç¬¬ä¸‰æ–¹æ’­æ”¾å™¨ï¼Œå¼ºçƒˆæ¨èï¼</p>
<p><a class="link"   href="https://github.com/qier222/YesPlayMusic" >YesPlayMusic<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h2 id="Dev"><a href="#Dev" class="headerlink" title="Dev"></a>Dev</h2><ol>
<li>VScode ä¸€é”®åŒæ­¥</li>
<li>NeoVim</li>
</ol>
<h2 id="Chat"><a href="#Chat" class="headerlink" title="Chat"></a>Chat</h2><p><a class="link"   href="https://github.com/lovechoudoufu/wechat_for_linux" >Wechat ä¸‹è½½é“¾æ¥<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>QQ å®˜ç½‘ä¸Šæœ‰ã€‚</p>
<h2 id="Email"><a href="#Email" class="headerlink" title="Email"></a>Email</h2><p>ThunderBird</p>
<p>snap å•†åº—å¯ä»¥ä¸‹ã€‚</p>
<h1 id="Beautify"><a href="#Beautify" class="headerlink" title="Beautify"></a>Beautify</h1><h2 id="rEFInd"><a href="#rEFInd" class="headerlink" title="rEFInd"></a>rEFInd</h2><p>è¿™ä¸ªå¾ˆæ—©ä¹‹å‰å°±åšè¿‡äº†ï¼Œåªä¸è¿‡ä¸€ç›´åªæœ‰å­¤é›¶é›¶çš„ä¸€ä¸ª Windows ç³»ç»Ÿï¼Œè¿˜æœ‰ç‚¹å½±å“å¼€æœºé€Ÿåº¦ï¼ˆæ¯•ç«Ÿæ²¡å¾—é€‰ï¼‰ã€‚</p>
<p>é…ç½®æ•™ç¨‹ B ç«™æœ‰è¯¦ç»†æ•™ç¨‹ï¼š<a class="link"   href="https://www.bilibili.com/video/BV1714y1c78z/" >é“¾æ¥<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>å®‰è£…å¥½ Linux åç›´æ¥å‡ºæ¥å››ä¸ªå›¾æ ‡ï¼Œå…¶ä¸­éœ€è¦åˆ æ‰ä¸¤ä¸ªä¸éœ€è¦çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆä¸èƒ½å®‰è£…ä¸»é¢˜ï¼Œåœ¨é»˜è®¤ä¸»é¢˜ä¸‹æŒ‰ <code>del</code> å¯ä»¥åˆ é™¤ä¸éœ€è¦çš„å›¾æ ‡ï¼ˆå‰ææ˜¯ä½ å¾—çŸ¥é“ä½ è¦ç•™å“ªäº›ï¼Œè¿™ä¸ªå¯ä»¥è¯•è¯•ï¼‰ã€‚</p>
<h2 id="Grub"><a href="#Grub" class="headerlink" title="Grub"></a>Grub</h2><p>å®‰è£… Linux é™„èµ çš„å¼•å¯¼ï¼Œåªä¸è¿‡é»˜è®¤å¾ˆä¸‘åªæ˜¯ DOS å‘½ä»¤è¡Œã€‚</p>
<p>è¿›å…¥ Linuxï¼Œæ‰“å¼€è¿™ä¸ª<a class="link"   href="https://www.gnome-look.org/browse?cat=109&ord=rating" >é“¾æ¥<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>ï¼Œ</p>
<p>ç³ç…æ»¡ç›®çš„ Grub Themeï¼ŒæŒ‘ä¸€ä¸ªå–œæ¬¢çš„é…ç½®ä¸€ä¸‹å°±å¥½ã€‚</p>
<p>æ¨èè¿™ä¸ªï¼š<a class="link"   href="https://github.com/vinceliuice/grub2-themes" >é“¾æ¥<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>æŒ‰ç…§ä»“åº“çš„æ•™ç¨‹å®‰è£…å³å¯ã€‚</p>
<p>è¿™é‡Œå¯ä»¥å®‰è£…ä¸€ä¸ª Grub Customizerï¼ŒæŠŠ Grub é‡Œå¤šä½™çš„é€‰é¡¹åˆ é™¤ï¼Œ</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install grub-customizer</span><br></pre></td></tr></table></figure></div>

<p>è¿™æ ·çš„åå¤„å°±æ˜¯å¦‚æœå‡ºé—®é¢˜ä½ åªèƒ½é€šè¿‡ <code>c</code> ä½¿ç”¨å‘½ä»¤è¡Œè¿›å…¥æ¢å¤æ¨¡å¼äº†ï¼ˆå¥½å¤„æ˜¯å¥½çœ‹ï¼‰ã€‚</p>
<h2 id="Gnome-Tweaks"><a href="#Gnome-Tweaks" class="headerlink" title="Gnome Tweaks"></a>Gnome Tweaks</h2><p>å¼•å¯¼ç¾åŒ–å®Œäº†æ¥ä¸‹æ¥è¯¥ç¾åŒ–ç³»ç»Ÿäº†ã€‚</p>
<p>Ubuntu é»˜è®¤çš„å›¾å½¢åŒ–ç•Œé¢æ˜¯ Gnomeï¼Œæˆ‘ä»¬å¯ä»¥å®‰è£… Gnome-Tweaks æ¥è°ƒæ•´å®ƒçš„å¤–è§‚ï¼Œä¸è¿‡æœ€æ–°çš„ç‰ˆæœ¬è¿™ä¸ªä¹Ÿæ˜¯é¢„è£…çš„ï¼Œä¸­æ–‡åç§°å«â€œä¼˜åŒ–â€ã€‚</p>
<p>æ‰“å¼€ä»¥åå°±å¯ä»¥è°ƒæ•´å­—ä½“ï¼Œå›¾æ ‡ï¼Œä¸»é¢˜ç­‰äº†ï¼Œæ³¨æ„å…ˆä¸è¦è°ƒæ•´é¼ æ ‡æŒ‡é’ˆä¸ºå®ƒè‡ªå¸¦çš„ä¸€äº›ä¸»é¢˜ï¼Œå¯èƒ½ç¼ºå¤±äº†ä»€ä¹ˆæ–‡ä»¶ï¼Œä¸€é€‰å®ƒå°±å‡º BUGï¼Œæ— æ³•è¿›å…¥ GUIï¼Œåªèƒ½å¯¹ç€ Grub çš„å‘½ä»¤è¡Œç•Œé¢è‹¦è‹¦æ‰¾å¯»è§£å†³æ–¹æ³•ä¸€ééåœ°è¯•ã€‚</p>
<p>è§£å†³å®Œè¿™ä¸ªé—®é¢˜ä»¥åæˆ‘ç¬¬ä¸€æ—¶é—´å°±å»æ‰¾äº†ä¸ªå–œæ¬¢çš„é¼ æ ‡æŒ‡é’ˆå®‰è£…ä¸Šã€‚</p>
<h2 id="Cursor"><a href="#Cursor" class="headerlink" title="Cursor"></a>Cursor</h2><p>æ‰“å¼€è¿™ä¸ª<a class="link"   href="https://www.gnome-look.org/browse?cat=107&ord=rating" >é“¾æ¥<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>æ˜¯çš„æ²¡é”™è¿˜æ˜¯è¿™ä¸ªç½‘ç«™ï¼Œä¹‹åæˆ‘ä»¬ä¹Ÿä¼šç»å¸¸ç”¨åˆ°å®ƒã€‚</p>
<p>ä¸‹è½½åè§£å‹ï¼ˆå›¾å½¢ç•Œé¢åŒå‡»å‹ç¼©åŒ…å°±å¯ä»¥è§£å‹ï¼Œå†ä¹Ÿä¸æ€•è®°é”™å‘½ä»¤äº†ï¼‰ã€‚</p>
<p>ç„¶åç§»åŠ¨åˆ° <code>~/.local/share/icons/</code> ç›®å½•ä¸‹ï¼Œç„¶ååœ¨ä½ çš„ <code>Tweaks</code> é‡Œå°±å¯ä»¥çœ‹è§å®ƒäº†ã€‚ï¼ˆçœ‹ä¸åˆ°å°±é‡æ–°æ‰“å¼€ä¸€éï¼‰</p>
<p>Icons ç­‰å…¶å®ƒé€‰é¡¹ä¹Ÿæ˜¯åŒç†ï¼Œä¸è¿‡æˆ‘æ²¡æ”¹ï¼Œé»˜è®¤çš„éƒ½æŒºå¥½ã€‚</p>
<h2 id="Dock"><a href="#Dock" class="headerlink" title="Dock"></a>Dock</h2><p>é»˜è®¤çš„åº•éƒ¨ Dock æœ‰ç‚¹å¤ªä¸‘äº†ï¼Œä½¿ç”¨ Dock ä½œä¸ºæ›¿ä»£ï¼š</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install plank</span><br></pre></td></tr></table></figure></div>

<p>å®‰è£…åæ‰“å¼€å³å¯ä½¿ç”¨ã€‚</p>
<p>æŒ‰ä½ <code>ctrl</code> å³é”®åº•éƒ¨ Dock ä¸­çš„å›¾æ ‡ï¼Œå¯ä»¥è¿›å…¥è®¾ç½®ç•Œé¢è¯¦ç»†ä¿®æ”¹ã€‚</p>
<p>å°éƒ¨ä»¶å¦‚æœä¸å°å¿ƒæ·»åŠ äº†ï¼Œå¯ä»¥æŠŠå®ƒå¾€ä¸Šæ‹–ï¼Œå®ƒè‡ªå·±å°±æ²¡äº†ã€‚ï¼ˆå½“æ—¶æ‰¾äº†åŠå¤©ä¹Ÿä¸çŸ¥é“æ€ä¹ˆå»æ‰ï¼‰</p>
<p>æ­¤æ—¶ Plank å’Œ Ubuntu è‡ªå¸¦çš„ Dock ä¼šåŒæ—¶å­˜åœ¨ï¼Œæ€ä¹ˆå…³æ‰è‡ªå¸¦çš„å‘¢ï¼Ÿ</p>
<p>å®‰è£…æ’ä»¶ç®¡ç†å™¨ï¼ˆä¹‹åä¹Ÿè¦ç”¨åˆ°ï¼‰ï¼š</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install gnome-shell-extension-manager</span><br></pre></td></tr></table></figure></div>

<p>å…³æ‰ Ubuntu Dock å³å¯ã€‚</p>
<p>æœ€åï¼Œåœ¨ Tweaks ä¸­å°† <code>Plank</code> è®¾ç½®ä¸ºå¼€æœºè‡ªå¯ã€‚</p>
<h2 id="Shell"><a href="#Shell" class="headerlink" title="Shell"></a>Shell</h2><p>é»˜è®¤çš„æ¡Œé¢ä¸»é¢˜ä¸­è§„ä¸­è·ï¼Œå¹¶ä¸ç®—å¥½çœ‹ã€‚</p>
<p>åœ¨åˆšæ‰å®‰è£…çš„æ’ä»¶ç®¡ç†å™¨ä¸­å®‰è£…æ’ä»¶ <code>User Themes</code>ã€‚</p>
<p>æ‰“å¼€<a class="link"   href="https://www.gnome-look.org/browse?cat=134&ord=rating" >é“¾æ¥<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>é€‰ä¸€ä¸ªå–œæ¬¢çš„ä¸»é¢˜ï¼Œä¸‹è½½ï¼Œè§£å‹ã€‚</p>
<p>æŠŠä¸»é¢˜æ–‡ä»¶å¤åˆ¶åˆ° <code>/home/fallingsakura/.local/share/themes/</code> å³å¯ã€‚</p>
<p><code>themes</code> æ–‡ä»¶å¤¹éœ€è¦è‡ªå·±åˆ›å»ºã€‚</p>
<p>æ­¤æ—¶åœ¨ Tweaks çš„å¤–è§‚ä¸­å¤šå‡ºäº†ä¸€ä¸ª <code>shell</code> é€‰é¡¹ï¼Œæ”¹ä¸ºä½ æƒ³è¦çš„ä¸»é¢˜å³å¯ã€‚</p>
<h2 id="Animation"><a href="#Animation" class="headerlink" title="Animation"></a>Animation</h2><p>ç‚«é…·çš„çª—å£åŠ¨æ•ˆï¼</p>
<p>åœ¨æ’ä»¶ç®¡ç†å™¨ä¸­å®‰è£…ä¸¤ä¸ªæ’ä»¶ï¼š</p>
<ul>
<li>Compiz alike magic lamp effectï¼šæš´é£å¸å…¥å¼çª—å£æœ€å°åŒ–</li>
<li>Compiz windows effectï¼šQå¼¹çš„çª—å£</li>
</ul>
<p>å…·ä½“é…ç½®è‡ªå·±è°ƒæ•´å³å¯ã€‚</p>
<h2 id="Widgets"><a href="#Widgets" class="headerlink" title="Widgets"></a>Widgets</h2><p>æ¡Œé¢æ˜¯å¾ˆå¥½çœ‹ï¼Œä½†æ˜¯æ„Ÿè§‰ç©ºè¡è¡çš„ï¼ŒåŠ ç‚¹å°ç»„ä»¶è®©å®ƒæ›´å¥½çœ‹å§ï¼</p>
<p>æ•ˆæœå›¾ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/FallingSakura/Source@main/img/202408191233291.webp"
                     
                ></p>
<p>ï¼ˆæˆ‘çš„å±å¹•ç¼©æ”¾æ¯”ä¾‹æ¯”è¾ƒä½æ‰€ä»¥æ˜¾å¾—ç»„ä»¶å¾ˆå°ï¼‰</p>
<p>è¯¦ç»†æ­¥éª¤çœ‹<a class="link"   href="https://blog.csdn.net/weixin_43268374/article/details/135755979" >è¿™é‡Œ<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h2 id="Zsh"><a href="#Zsh" class="headerlink" title="Zsh"></a>Zsh</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202407191727296.webp"
                      alt="image.png"
                ></p>
<p>ç¾åŒ–å‘½ä»¤è¡Œç•Œé¢ã€‚</p>
<p>æ¢ä¸º zsh å‘½ä»¤è¡Œçš„ ohmyzsh æ¡†æ¶çš„ powerlevel10k ä¸»é¢˜ã€‚</p>
<p>è¿™å‡ ä¸ªå…³é”®è¯ä¸€è‰˜æ•™ç¨‹ä¸€å¤§æŠŠï¼Œåœ¨è¿™é‡Œä¸è¿‡å¤šèµ˜è¿°ã€‚</p>
<p>æå‡ ä¸ªæ³¨æ„äº‹é¡¹ï¼š</p>
<ol>
<li>å®‰è£… <a class="link"   href="https://www.nerdfonts.com/" >Nerd ç³»åˆ—å­—ä½“<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>ã€‚</li>
</ol>
<p>é€‰ä¸€ä¸ªè‡ªå·±å–œæ¬¢çš„ï¼Œå®‰è£…ã€‚</p>
<p>ç„¶ååœ¨ç»ˆç«¯çª—å£å³ä¸Šè§’é€‰æ‹©é¦–é€‰é¡¹ï¼Œåœ¨é…ç½®æ ä¸­è‡ªå·±æ–°å»ºä¸€ä¸ªé…ç½®ï¼ŒæŠŠå­—ä½“æ”¹ä¸º Nerd å­—ä½“ï¼Œå¦åˆ™ä¸€äº›å›¾æ ‡ä¸èƒ½æ­£å¸¸æ˜¾ç¤ºã€‚</p>
<p>è¿™ä¸ªåœ¨åç»­ç¾åŒ– NeoVim çš„è¿‡ç¨‹ä¸­ä¹Ÿä¼šç”¨åˆ°ï¼Œåé¢ä¸å†èµ˜è¿°ã€‚</p>
<ol start="2">
<li>åˆ‡æ¢ç³»ç»Ÿè¯­è¨€ä¸ºè‹±æ–‡</li>
</ol>
<p>éå¿…è¦ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆåœ¨ä¸­æ–‡è¯­è¨€ç³»ç»Ÿä¸‹å›¾å½¢çš„ Unicode ç¼–ç æ¸²æŸ“æœ‰é—®é¢˜ï¼Œå¯¼è‡´åœ†è§’ã€å°–è§’ç­‰æ ·å¼æ˜¾ç¤ºéå¸¸æ€ªå¼‚ï¼ˆé”™ä½ï¼‰ï¼Œæœ€ååˆ‡æ¢è¯­è¨€è§£å†³äº†ã€‚</p>
<p>æ”¹å˜è¡Œé«˜å’Œå­—ç¬¦å®½åº¦ä¹Ÿä¼šå½±å“è¿™ä¸ªï¼Œçœ‹ç€è°ƒå§ã€‚</p>
<h2 id="NeoVim"><a href="#NeoVim" class="headerlink" title="NeoVim"></a>NeoVim</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202407191724952.webp"
                      alt="image.png"
                ></p>
<p>åœ¨ Ubuntu 24.04 ä¸ºç³»ç»Ÿè‡ªå¸¦ã€‚</p>
<p>æ¨è B ç«™<a class="link"   href="https://www.bilibili.com/video/BV1Td4y1578E/" >è›‹è€å¸ˆçš„è§†é¢‘<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>ä»ç¾åŒ–åˆ°é…ç½®ä¸€æ¡é¾™æœåŠ¡ï¼Œå…¨ç¨‹å¹²è´§ã€‚</p>
<p>åœ¨ä»–çš„åŸºç¡€ä¸Šæˆ‘ä¿®æ”¹äº†ä¸€äº›æˆ‘è‡ªå·±éœ€è¦çš„é…ç½®ï¼Œæ¯”å¦‚ä¸è¦çƒ¦äººçš„ <code>swap file</code>ã€ç¼–è¯‘è¿è¡Œä¸€äº›è¯­è¨€çš„å¿«æ·æŒ‡ä»¤ã€<code>ctrl+w</code> å¿«æ·å…³é—­ç¼“å†²åŒºç­‰ç­‰ã€‚</p>
<div class="code-container" data-rel="Lua"><figure class="iseeu highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- options.lua</span></span><br><span class="line"><span class="keyword">local</span> opt = vim.opt</span><br><span class="line"></span><br><span class="line"><span class="comment">-- line number</span></span><br><span class="line">opt.relativenumber = <span class="literal">true</span></span><br><span class="line">opt.number = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- tab</span></span><br><span class="line">opt.tabstop = <span class="number">2</span></span><br><span class="line">opt.shiftwidth = <span class="number">2</span></span><br><span class="line">opt.expandtab = <span class="literal">true</span></span><br><span class="line">opt.autoindent = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--no-wrap</span></span><br><span class="line">opt.<span class="built_in">wrap</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--cursorline</span></span><br><span class="line">opt.cursorline = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--mouse</span></span><br><span class="line">opt.mouse:append(<span class="string">&quot;a&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">--clipboard</span></span><br><span class="line">opt.clipboard:append(<span class="string">&quot;unnamedplus&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">--newwindows</span></span><br><span class="line">opt.splitright = <span class="literal">true</span></span><br><span class="line">opt.splitbelow = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--search</span></span><br><span class="line">opt.ignorecase = <span class="literal">true</span></span><br><span class="line">opt.smartcase = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--</span></span><br><span class="line">opt.termguicolors = <span class="literal">true</span></span><br><span class="line">opt.signcolumn = <span class="string">&quot;yes&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">---------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- theme</span></span><br><span class="line">vim.cmd<span class="string">[[colorscheme catppuccin-frappe]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- foldenable</span></span><br><span class="line">vim.o.foldenable = <span class="literal">true</span></span><br><span class="line">vim.o.foldmethod = <span class="string">&#x27;manual&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- delete swapfile (anoying)</span></span><br><span class="line">vim.o.swapfile = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- Compile &amp; Run Cpp</span></span><br><span class="line">vim.api.nvim_command(<span class="string">&#x27;command! CompileCpp !g++ % -o %:r&#x27;</span>)</span><br><span class="line">vim.api.nvim_command(<span class="string">&#x27;command! RunCpp !%:r&#x27;</span>)</span><br><span class="line">vim.api.nvim_command(<span class="string">&#x27;command! RunJs !node %&#x27;</span>)</span><br><span class="line">vim.api.nvim_command(<span class="string">&#x27;command! RunPy !python3 %&#x27;</span>)</span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Lua"><figure class="iseeu highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- keymaps.lua </span></span><br><span class="line">vim.g.mapleader = <span class="string">&quot; &quot;</span></span><br><span class="line"><span class="keyword">local</span> keymap = vim.keymap</span><br><span class="line"></span><br><span class="line">keymap.set(<span class="string">&quot;v&quot;</span>, <span class="string">&quot;J&quot;</span>, <span class="string">&quot;:m &#x27;&gt;+1&lt;CR&gt;gv=gv&quot;</span>)</span><br><span class="line">keymap.set(<span class="string">&quot;v&quot;</span>, <span class="string">&quot;K&quot;</span>, <span class="string">&quot;:m &#x27;&lt;-2&lt;CR&gt;gv=gv&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- split vertical / horizonal</span></span><br><span class="line">keymap.set(<span class="string">&quot;n&quot;</span>, <span class="string">&quot;&lt;leader&gt;sv&quot;</span>, <span class="string">&quot;&lt;C-w&gt;v&quot;</span>)</span><br><span class="line">keymap.set(<span class="string">&quot;n&quot;</span>, <span class="string">&quot;&lt;leader&gt;sh&quot;</span>, <span class="string">&quot;&lt;C-w&gt;s&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- cancel hightlight</span></span><br><span class="line">keymap.set(<span class="string">&quot;n&quot;</span>, <span class="string">&quot;&lt;leader&gt;ch&quot;</span>, <span class="string">&quot;:nohl&lt;CR&gt;&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- plugins</span></span><br><span class="line"><span class="comment">-- nvim-tree</span></span><br><span class="line">keymap.set(<span class="string">&quot;n&quot;</span>, <span class="string">&quot;&lt;leader&gt;e&quot;</span>, <span class="string">&quot;:NvimTreeToggle&lt;CR&gt;&quot;</span>)</span><br><span class="line"><span class="comment">--buffer</span></span><br><span class="line">keymap.set(<span class="string">&quot;n&quot;</span>, <span class="string">&quot;gt&quot;</span>, <span class="string">&quot;:bn&lt;CR&gt;&quot;</span>)</span><br><span class="line">keymap.set(<span class="string">&quot;n&quot;</span>, <span class="string">&quot;gT&quot;</span>, <span class="string">&quot;:bp&lt;CR&gt;&quot;</span>)</span><br><span class="line">keymap.set(<span class="string">&quot;n&quot;</span>, <span class="string">&quot;&lt;A-w&gt;&quot;</span>, <span class="string">&quot;:w | :bd | :bprevious&lt;CR&gt;&quot;</span>)</span><br><span class="line">keymap.set(<span class="string">&quot;n&quot;</span>, <span class="string">&quot;&lt;C-s&gt;&quot;</span>, <span class="string">&quot;:w&lt;CR&gt;&quot;</span>)</span><br><span class="line"></span><br><span class="line">keymap.set(<span class="string">&quot;t&quot;</span>, <span class="string">&#x27;&lt;Esc&gt;&#x27;</span>, <span class="string">&#x27;&lt;C-\\&gt;&lt;C-n&gt;&#x27;</span>)</span><br></pre></td></tr></table></figure></div>

<p>å„ç§è¯­è¨€çš„ LSP ä¹Ÿæäº†å¥½ä¹…ï¼Œè¿™æ–¹é¢çš„å†…å®¹è¿˜æ²¡äººåšï¼Œæˆ‘ä¹Ÿåªæ˜¯ç•¥æ‡‚ï¼š</p>
<div class="code-container" data-rel="Lua"><figure class="iseeu highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- lsp.lua</span></span><br><span class="line"><span class="keyword">local</span> servers = &#123;</span><br><span class="line">  <span class="string">&quot;lua_ls&quot;</span>,</span><br><span class="line">  <span class="string">&quot;volar&quot;</span>,</span><br><span class="line">  <span class="string">&quot;html&quot;</span>,</span><br><span class="line">  <span class="string">&quot;tsserver&quot;</span>,</span><br><span class="line">  <span class="string">&quot;cssls&quot;</span>,</span><br><span class="line">  <span class="string">&quot;clangd&quot;</span>,</span><br><span class="line">  <span class="string">&quot;vuels&quot;</span>,</span><br><span class="line">  <span class="string">&quot;pyright&quot;</span>,</span><br><span class="line">  <span class="string">&quot;pylsp&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">require</span>(<span class="string">&quot;mason&quot;</span>).setup(&#123;</span><br><span class="line">  ui = &#123;</span><br><span class="line">      icons = &#123;</span><br><span class="line">          package_installed = <span class="string">&quot;âœ“&quot;</span>,</span><br><span class="line">          package_pending = <span class="string">&quot;âœ&quot;</span>,</span><br><span class="line">          package_uninstalled = <span class="string">&quot;âœ—&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">require</span>(<span class="string">&quot;mason-lspconfig&quot;</span>).setup(&#123;</span><br><span class="line">  <span class="comment">-- ç¡®ä¿å®‰è£…ï¼Œæ ¹æ®éœ€è¦å¡«å†™</span></span><br><span class="line">  ensure_installed = servers,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> capabilities = <span class="built_in">require</span>(<span class="string">&#x27;cmp_nvim_lsp&#x27;</span>).default_capabilities()</span><br><span class="line"><span class="keyword">local</span> lspconfig = <span class="built_in">require</span>(<span class="string">&quot;lspconfig&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- lspconfig.lua_ls.setup &#123;</span></span><br><span class="line"><span class="comment">--   capabilities = capabilities,</span></span><br><span class="line"><span class="comment">-- &#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _, lsp <span class="keyword">in</span> <span class="built_in">ipairs</span>(servers) <span class="keyword">do</span></span><br><span class="line">  lspconfig[lsp].setup &#123;</span><br><span class="line">    capabilities = capabilities,</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- é˜²æ­¢ lua æŠ¥è­¦å‘Šï¼Œçœ‹ç€çƒ¦äºº</span></span><br><span class="line">lspconfig.lua_ls.setup &#123;</span><br><span class="line">  settings = &#123;</span><br><span class="line">    Lua = &#123;</span><br><span class="line">      diagnostics = &#123; globals = &#123; <span class="string">&#x27;vim&#x27;</span> &#125;, &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>é¡ºä¾¿å­¦äº†ä¸€ä¸‹ <code>lua</code>ï¼ˆ</p>
<hr>
<p>NeoVim ä¸­ï¼Œä½¿ç”¨ <code>:term</code> å³å¯è¿›å…¥ç»ˆç«¯æ¨¡å¼ï¼Œè¿™æ˜¯ Vim æ‰€æ²¡æœ‰çš„ã€‚</p>
<p>é€€å‡ºç»ˆç«¯æ¨¡å¼åŸæ¥æ˜¯è¦ <code>ctrl+\</code> ç„¶å <code>ctrl+n</code>ï¼Œå«Œéº»çƒ¦æ”¹æˆ ESC äº†ã€‚</p>
<hr>
<p>å»ºè®®å…¨å±€å°† Caps-Lock å’Œ ESC äº¤æ¢ï¼Œè¿™ä¸ªåœ¨ Tweaks çš„é”®ç›˜ä¸­ï¼Œé€‰é¢å¤–è®¾ç½®ï¼ŒæŠŠ Caps-Lock çš„è¡Œä¸ºä¸­æ”¹ä¸ºâ€œäº¤æ¢ ESC å’Œ Caps-Lockâ€œå³å¯ã€‚</p>
<p>è¿™ä¸ªåœ¨ Vscode çš„ Vim æ’ä»¶ä¸­æœ‰ç‚¹ BUGï¼Œéœ€è¦å…ˆæŠŠå…¨å±€é”®æ¢å›æ¥åœ¨ VScode ä¸­æŠŠå¿«æ·é”®æ”¹ä¸€ä¸‹å†æ¢å›å»ï¼ˆä¸ç„¶åœ¨ VScode é‡Œï¼Œç‚¹å‡»æ”¹é”®ï¼Œå¼¹å‡ºæ¡†ä¸­ä½ çš„ Caps-Lock æ˜¯ ESCï¼Œä½ çš„ ESC è¿˜æ˜¯ ESCï¼Œæ”¹ä¸äº†ä¸€ç‚¹ï¼‰ã€‚</p>
<hr>
<p>æœ‰äººè¦é—®äº†ï¼Œæ—¢ç„¶ VScode é‚£ä¹ˆå¥½ç”¨ï¼ŒIDE ä¹Ÿæ˜¯ç°æˆçš„ï¼Œç”šè‡³é…ç½®å¥½çš„ Vim ä¹Ÿæœ‰ç°æˆçš„ï¼Œä½•è‹¦è‡ªå·±æä¸€ä¸ªè¿™ä¹ˆéº»çƒ¦å‘¢ï¼Ÿ</p>
<p>å› ä¸ºæˆ‘éšæ—¶å¯ä»¥ä¿®æ”¹å®ƒã€‚</p>
<p>è¿™æ˜¯æˆ‘çš„é…ç½®ï¼Œç‹¬å±äºæˆ‘çš„é«˜åº¦å¯å®šåˆ¶åŒ–çš„é…ç½®ï¼Œå®ƒæ˜¯ç‹¬ä¸€æ— äºŒçš„ã€‚</p>
<p>æ— è®ºæ˜¯è½¯ä»¶ï¼Œè¿˜æ˜¯ç³»ç»Ÿï¼Œç”šè‡³æ˜¯ç¡¬ä»¶ã€‚</p>
<p>æœ€åæ˜¯æˆ‘è¿™ä¸ªäººã€‚</p>
<h1 id="Disk-Bug"><a href="#Disk-Bug" class="headerlink" title="Disk Bug"></a>Disk Bug</h1><p>å¯èƒ½ä¼šé‡åˆ°æ’å…¥ç§»åŠ¨ç¡¬ç›˜æ— æ³•æŒ‚è½½çš„é—®é¢˜ï¼Œè¿™ä¸ªå¾ˆå¥½è§£å†³ï¼Œåœ¨è‡ªå¸¦çš„ç¡¬ç›˜ç®¡ç†ä¸­æ›´æ”¹å¯¹åº”åˆ†åŒºçš„æŒ‚è½½é€‰é¡¹ï¼Œå–æ¶ˆé»˜è®¤çš„é…ç½®ï¼Œè‡ªå®šä¹‰æ‰‹åŠ¨æŒ‚è½½å³å¯ã€‚</p>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>æ²¡æœ‰æ€»ç»“ï¼Œç»è¿‡ä»¥ä¸Šï¼Œä½ å·²ç»å¯ä»¥å¿«ä¹åœ°ä½¿ç”¨ Linux è¿›è¡Œæ—¥å¸¸ä½¿ç”¨å’Œå¼€å‘äº†ï¼Œèµ„æºè°ƒåº¦å’Œå ç”¨çœŸçš„å¾ˆå°‘ï¼Œç¬”è®°æœ¬é£æ‰‡å‡ ä¹å°±æ²¡è½¬è¿‡äº†ã€‚</p>
<p>å¾ˆæµç•…ï¼ŒUI å¾ˆå¥½çœ‹ï¼Œå–œæ¬¢ã€‚</p>
<p>Win11 ä»¥åå°±æ˜¯ä¸“é—¨æ‹¿æ¥æ‰“æ¸¸æˆå’Œåšè§†é¢‘åšæ¸²æŸ“ç”¨çš„äº†ã€‚</p>
<p>ä»¥åçœ‹çœ‹æŠŠ Blender å’Œ Unity ä¹Ÿæ¬åˆ° Linux é‡Œã€‚</p>
<p>æœ‰ç‚¹æƒ³æ³•å†æ•´ä¸€ä¸ª Arch Linux.</p>
<p>å·²ç»å¼€å§‹æ„Ÿè§‰å¤´ç§ƒäº†ã€‚</p>
<p>To Be Continuedâ€¦</p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title>Vim Note</title>
    <url>/d32595a8.html</url>
    <content><![CDATA[
  <div class="note p-4 mb-4 rounded-small markdown-body info">
    <p>æœ¬æ–‡ä½¿ç”¨ Obsidian çš„ Vim æ¨¡å¼å†™ä½œã€‚</p>

  </div>

<h2 id="ä»€ä¹ˆæ˜¯-Vim"><a href="#ä»€ä¹ˆæ˜¯-Vim" class="headerlink" title="ä»€ä¹ˆæ˜¯ Vim"></a>ä»€ä¹ˆæ˜¯ Vim</h2><blockquote>
<p>Vimæ˜¯ä¸€ä¸ªç±»ä¼¼äº<a class="link"   href="https://baike.baidu.com/item/Vi/5043202?fromModule=lemma_inlink" >Vi<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>çš„é«˜åº¦å¯å®šåˆ¶çš„<a class="link"   href="https://baike.baidu.com/item/%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8/8853160?fromModule=lemma_inlink" >æ–‡æœ¬ç¼–è¾‘å™¨<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>ï¼Œåœ¨Viçš„åŸºç¡€ä¸Šæ”¹è¿›å’Œå¢åŠ äº†å¾ˆå¤šç‰¹æ€§ã€‚Vimæ˜¯<a class="link"   href="https://baike.baidu.com/item/%E8%87%AA%E7%94%B1%E8%BD%AF%E4%BB%B6/405190?fromModule=lemma_inlink" >è‡ªç”±è½¯ä»¶<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>ã€‚Vimæ™®éè¢«æ¨å´‡ä¸ºç±»Viç¼–è¾‘å™¨ä¸­æœ€å¥½çš„ä¸€ä¸ªï¼Œäº‹å®ä¸ŠçœŸæ­£çš„åŠ²æ•Œæ¥è‡ªEmacsçš„ä¸åŒå˜ä½“ã€‚1999 å¹´<a class="link"   href="https://baike.baidu.com/item/Emacs/0?fromModule=lemma_inlink" >Emacs<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>è¢«é€‰ä¸ºLinuxworldæ–‡æœ¬ç¼–è¾‘åˆ†ç±»çš„ä¼˜èƒœè€…ï¼ŒVimå±ˆå±…ç¬¬äºŒã€‚ä½†åœ¨2000å¹´2æœˆVimèµ¢å¾—äº†<a class="link"   href="https://baike.baidu.com/item/Slashdot/1329225?fromModule=lemma_inlink" >Slashdot<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>Â Beanieçš„æœ€ä½³<a class="link"   href="https://baike.baidu.com/item/%E5%BC%80%E6%94%BE%E6%BA%90%E4%BB%A3%E7%A0%81/114160?fromModule=lemma_inlink" >å¼€æ”¾æºä»£ç <i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>æ–‡æœ¬ç¼–è¾‘å™¨å¤§å¥–ï¼Œåˆå°†Emacsæ¨è‡³äºŒçº¿ã€‚</p>
</blockquote>
<p>æœ€è¿‘åœ¨å­¦ Linuxï¼Œä¸å¯é¿å…åœ°éœ€è¦ä½¿ç”¨ Vim è¿›è¡Œä¸€äº›ä»£ç ç¼–è¾‘ï¼ˆLinux ç³»ç»Ÿè‡ªå¸¦çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼‰ã€‚</p>
<p>æ„Ÿå¹ä¸€ä¸‹åˆ›é€  Vim çš„äººçš„æ™ºæ…§ã€‚</p>
<p>é¼ æ ‡æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œæˆ‘ä¸çŸ¥é“ã€‚</p>
<p>ç å­—æ•ˆç‡++</p>
<p><a class="link"   href="https://vim.nauxscript.com/" >ä¸€ä¸ªæ¯”è¾ƒä¸é”™çš„æ•™ç¨‹æ–‡æ¡£<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h2 id="ç•Œé¢-ç§»åŠ¨"><a href="#ç•Œé¢-ç§»åŠ¨" class="headerlink" title="ç•Œé¢&#x2F;ç§»åŠ¨"></a>ç•Œé¢&#x2F;ç§»åŠ¨</h2><table>
<thead>
<tr>
<th align="center">Key</th>
<th align="center">Function</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>h</code></td>
<td align="center">Left</td>
</tr>
<tr>
<td align="center"><code>j</code></td>
<td align="center">Down</td>
</tr>
<tr>
<td align="center"><code>k</code></td>
<td align="center">UP</td>
</tr>
<tr>
<td align="center"><code>l</code></td>
<td align="center">Right</td>
</tr>
<tr>
<td align="center"><code>ctrl + y</code></td>
<td align="center">ä¸Šä¸€è¡Œ</td>
</tr>
<tr>
<td align="center"><code>ctrl + e</code></td>
<td align="center">ä¸‹ä¸€è¡Œ</td>
</tr>
<tr>
<td align="center"><code>ctrl + u</code></td>
<td align="center">ä¸ŠåŠé¡µï¼ˆupï¼‰</td>
</tr>
<tr>
<td align="center"><code>ctrl + d</code></td>
<td align="center">ä¸‹åŠé¡µï¼ˆdownï¼‰</td>
</tr>
<tr>
<td align="center"><code>ctrl + b</code></td>
<td align="center">ä¸Šä¸€é¡µï¼ˆbackï¼‰</td>
</tr>
<tr>
<td align="center"><code>ctrl + f</code></td>
<td align="center">ä¸‹ä¸€é¡µï¼ˆforwardï¼‰</td>
</tr>
<tr>
<td align="center"><code>H</code></td>
<td align="center">è§†å£å¼€å¤´ï¼ˆHeadï¼‰</td>
</tr>
<tr>
<td align="center"><code>M</code></td>
<td align="center">è§†å£ä¸­å¤®ï¼ˆMiddleï¼‰</td>
</tr>
<tr>
<td align="center"><code>L</code></td>
<td align="center">è§†å£ç»“å°¾ï¼ˆLastï¼‰</td>
</tr>
<tr>
<td align="center"><code>Gï¼ˆ]]ï¼‰</code></td>
<td align="center">æ–‡ä»¶ç»“å°¾</td>
</tr>
<tr>
<td align="center"><code>ggï¼ˆ[[ï¼‰</code></td>
<td align="center">æ–‡ä»¶å¼€å¤´</td>
</tr>
<tr>
<td align="center"><code>x + G</code></td>
<td align="center">ç¬¬ x è¡Œ</td>
</tr>
</tbody></table>
<h2 id="è·³è½¬"><a href="#è·³è½¬" class="headerlink" title="è·³è½¬"></a>è·³è½¬</h2><table>
<thead>
<tr>
<th align="center">Key</th>
<th align="center">Function</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>$</code></td>
<td align="center">è¡Œå°¾</td>
</tr>
<tr>
<td align="center"><code>^</code></td>
<td align="center">è¡Œé¦–</td>
</tr>
<tr>
<td align="center"><code>0</code></td>
<td align="center">è¡Œæœ€å¼€å¤´</td>
</tr>
<tr>
<td align="center"><code>w</code></td>
<td align="center">ä¸‹ä¸€ä¸ªå•è¯çš„å¤´éƒ¨ï¼ˆwordï¼‰</td>
</tr>
<tr>
<td align="center"><code>e</code></td>
<td align="center">ä¸‹ä¸€ä¸ªå•è¯çš„å°¾éƒ¨ï¼ˆendï¼‰</td>
</tr>
<tr>
<td align="center"><code>b</code></td>
<td align="center">ä¸Šä¸€ä¸ªå•è¯å¤´éƒ¨</td>
</tr>
<tr>
<td align="center"><code>ge</code></td>
<td align="center">ä¸Šä¸€ä¸ªå•è¯å°¾éƒ¨</td>
</tr>
<tr>
<td align="center"><code>f + x</code></td>
<td align="center">å½“å‰è¡Œå‘åæŸ¥æ‰¾å­—ç¬¦ xï¼ˆé€‰æ‹© xï¼‰</td>
</tr>
<tr>
<td align="center"><code>3 + f + x</code></td>
<td align="center">å½“å‰è¡Œå‘åæŸ¥æ‰¾ç¬¬ä¸‰ä¸ªå­—ç¬¦ x</td>
</tr>
<tr>
<td align="center"><code>F + x</code></td>
<td align="center">å½“å‰è¡Œå‘å‰æŸ¥æ‰¾å­—ç¬¦ x</td>
</tr>
<tr>
<td align="center"><code>t + x</code></td>
<td align="center">å½“å‰è¡Œå‘åæŸ¥æ‰¾å­—ç¬¦ xï¼ˆé€‰æ‹© x å‰ä¸€ä¸ªå­—ç¬¦ï¼‰</td>
</tr>
<tr>
<td align="center"><code>T + x</code></td>
<td align="center">å½“å‰è¡Œå‘å‰æŸ¥æ‰¾å­—ç¬¦ xï¼ˆé€‰æ‹© x åä¸€ä¸ªå­—ç¬¦ï¼‰</td>
</tr>
<tr>
<td align="center"><code>ï¼ˆ/ï¼‰</code></td>
<td align="center">å½“å‰å¥å­çš„é¦–&#x2F;å°¾</td>
</tr>
<tr>
<td align="center"><code>&#123;/&#125;</code></td>
<td align="center">ä¸Š&#x2F;ä¸‹ä¸€ä¸ªç©ºè¡Œ</td>
</tr>
<tr>
<td align="center"><code>%</code></td>
<td align="center">é…å¯¹çš„æ‹¬å·</td>
</tr>
<tr>
<td align="center"><code>*</code></td>
<td align="center">è·³è½¬åˆ°ä¸å½“å‰å…‰æ ‡ä¸‹å•è¯åŒ¹é…çš„ä¸‹ä¸€ä¸ªå•è¯</td>
</tr>
<tr>
<td align="center"><code>#</code></td>
<td align="center">è·³è½¬åˆ°ä¸å½“å‰å…‰æ ‡ä¸‹å•è¯åŒ¹é…çš„ä¸Šä¸€ä¸ªå•è¯</td>
</tr>
<tr>
<td align="center"><code>g + t</code></td>
<td align="center">ä¸‹ä¸€ä¸ªæ ‡ç­¾é¡µ</td>
</tr>
<tr>
<td align="center"><code>g + T</code></td>
<td align="center">ä¸Šä¸€ä¸ªæ ‡ç­¾é¡µ</td>
</tr>
<tr>
<td align="center"><code>x + g + t</code></td>
<td align="center">ç¬¬ x ä¸ªæ ‡ç­¾é¡µ</td>
</tr>
</tbody></table>
<h2 id="æ–‡æœ¬æ“ä½œ"><a href="#æ–‡æœ¬æ“ä½œ" class="headerlink" title="æ–‡æœ¬æ“ä½œ"></a>æ–‡æœ¬æ“ä½œ</h2><blockquote>
<p>ä¸€èˆ¬è€Œè¨€æ•°å­—åŠ å¯¹åº”æ“ä½œå³å°†è¯¥æ“ä½œé‡å¤å¤šå°‘æ¬¡ã€‚</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">Key</th>
<th align="center">Function</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>v</code></td>
<td align="center">é€‰æ‹©</td>
</tr>
<tr>
<td align="center"><code>ctrl + v</code></td>
<td align="center">å—çŠ¶é€‰æ‹©</td>
</tr>
<tr>
<td align="center"><code>shift + v</code></td>
<td align="center">è¡Œå—é€‰æ‹©</td>
</tr>
<tr>
<td align="center"><code>y</code></td>
<td align="center">å¤åˆ¶</td>
</tr>
<tr>
<td align="center"><code>yyï¼ˆYï¼‰</code></td>
<td align="center">å¤åˆ¶å½“å‰è¡Œ</td>
</tr>
<tr>
<td align="center"><code>p</code></td>
<td align="center">ç²˜è´´ï¼ˆpasteï¼‰åˆ°å‰é¢</td>
</tr>
<tr>
<td align="center"><code>P</code></td>
<td align="center">ç²˜è´´åˆ°åé¢</td>
</tr>
<tr>
<td align="center"><code>x</code></td>
<td align="center">åˆ é™¤ï¼ˆBackspaceï¼‰</td>
</tr>
<tr>
<td align="center"><code>X</code></td>
<td align="center">åˆ é™¤ï¼ˆDeleteï¼‰</td>
</tr>
<tr>
<td align="center"><code>&quot;_x</code></td>
<td align="center">åˆ é™¤ï¼Œåˆ‡ä¸æ”¾å…¥ç¼“å†²åŒº</td>
</tr>
<tr>
<td align="center"><code>d + w</code></td>
<td align="center">åˆ é™¤å½“å‰è¯</td>
</tr>
<tr>
<td align="center"><code>d + 3 + w</code></td>
<td align="center">åˆ é™¤å½“å‰ä¸‰ä¸ªè¯</td>
</tr>
<tr>
<td align="center"><code>d + f + x</code></td>
<td align="center">åˆ åˆ°å½“å‰è¡Œçš„ x å¤„ï¼ˆåŒ…æ‹¬ xï¼‰</td>
</tr>
<tr>
<td align="center"><code>dd</code></td>
<td align="center">åˆ é™¤å½“å‰è¡Œ</td>
</tr>
<tr>
<td align="center"><code>d + t + x</code></td>
<td align="center">åˆ åˆ°å½“å‰è¡Œçš„ x å‰ä¸€ä¸ªå­—ç¬¦å¤„ï¼ˆä¸åŒ…æ‹¬ xï¼‰</td>
</tr>
<tr>
<td align="center"><code>u</code></td>
<td align="center">æ’¤é”€ï¼ˆundoï¼‰</td>
</tr>
<tr>
<td align="center"><code>ctrl + r</code></td>
<td align="center">é‡åš</td>
</tr>
<tr>
<td align="center"><code>J</code></td>
<td align="center">åˆå¹¶å½“å‰è¡ŒåŠä¸‹ä¸€è¡Œ</td>
</tr>
</tbody></table>
<h2 id="è¾“å…¥"><a href="#è¾“å…¥" class="headerlink" title="è¾“å…¥"></a>è¾“å…¥</h2><blockquote>
<p>æŒ‰ä¸‹åè¿›å…¥è¾“å…¥æ¨¡å¼ã€‚</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">Key</th>
<th align="center">Function</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>i</code></td>
<td align="center">é€‰æ‹©å­—ç¬¦çš„å‰ä¸€ä½ï¼ˆinsertï¼‰</td>
</tr>
<tr>
<td align="center"><code>I</code></td>
<td align="center">è¡Œé¦–</td>
</tr>
<tr>
<td align="center"><code>a</code></td>
<td align="center">é€‰æ‹©å­—ç¬¦çš„åä¸€ä½ï¼ˆappendï¼‰</td>
</tr>
<tr>
<td align="center"><code>A</code></td>
<td align="center">è¡Œå°¾</td>
</tr>
<tr>
<td align="center"><code>o</code></td>
<td align="center">å‘ä¸‹æ–°å»ºä¸€è¡Œ</td>
</tr>
<tr>
<td align="center"><code>O</code></td>
<td align="center">å‘ä¸Šæ–°å»ºä¸€è¡Œ</td>
</tr>
<tr>
<td align="center"><code>s</code></td>
<td align="center">åˆ é™¤æ‰€é€‰</td>
</tr>
<tr>
<td align="center"><code>S</code></td>
<td align="center">åˆ é™¤å½“å‰è¡Œ</td>
</tr>
<tr>
<td align="center"><code>c + 2 + l</code></td>
<td align="center">åˆ é™¤å³è¾¹çš„ä¸¤ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td align="center"><code>c + w</code></td>
<td align="center">åˆ é™¤å½“å‰è¯çš„å…‰æ ‡åŠå…¶å³éƒ¨åˆ†</td>
</tr>
</tbody></table>
<h2 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="headerlink" title="å‘½ä»¤"></a>å‘½ä»¤</h2><table>
<thead>
<tr>
<th align="center">Key</th>
<th align="center">Function</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>:q</code></td>
<td align="center">é€€å‡º</td>
</tr>
<tr>
<td align="center"><code>:w</code></td>
<td align="center">ä¿å­˜</td>
</tr>
<tr>
<td align="center"><code>:wq</code></td>
<td align="center">ä¿å­˜å¹¶é€€å‡º</td>
</tr>
<tr>
<td align="center"><code>/ + str</code></td>
<td align="center">ä»å½“å‰ä½ç½®å‘åæœç´¢å­—ç¬¦ä¸² str</td>
</tr>
<tr>
<td align="center"><code>? + str</code></td>
<td align="center">ä»å½“å‰ä½ç½®å‘å‰æœç´¢å­—ç¬¦ä¸² str</td>
</tr>
<tr>
<td align="center"><code>n</code></td>
<td align="center">ä¸‹ä¸€ä¸ª</td>
</tr>
<tr>
<td align="center"><code>N</code></td>
<td align="center">ä¸Šä¸€ä¸ª</td>
</tr>
<tr>
<td align="center"><code>:s/str1/str2/g</code>ï¼ˆ<code>/</code> åˆ†å‰²æˆ–è€… <code>#</code> åˆ†å‰²ï¼‰</td>
<td align="center">å½“å‰è¡Œçš„æ‰€æœ‰ str1 æ›¿æ¢ä¸º str2</td>
</tr>
<tr>
<td align="center"><code>:%s/str1/str2/g</code></td>
<td align="center">æ–‡ä»¶ä¸­æ‰€æœ‰çš„ str1 æ›¿æ¢ä¸º str2</td>
</tr>
<tr>
<td align="center"><code>:10,20s/str1/str2/g</code></td>
<td align="center">10 åˆ° 20 è¡Œæ‰€æœ‰çš„ str1 æ›¿æ¢ä¸º str2</td>
</tr>
<tr>
<td align="center"><code>:.,+10s/str1/str2/g</code></td>
<td align="center">å½“å‰è¡Œä¸æ¥ä¸‹æ¥ 10 è¡Œ æ‰€æœ‰çš„ str1 æ›¿æ¢ä¸º str2</td>
</tr>
<tr>
<td align="center"><code>.</code></td>
<td align="center">é‡å¤ä¸Šä¸€ä¸ªæ“ä½œ</td>
</tr>
<tr>
<td align="center"><code>~</code></td>
<td align="center">åˆ‡æ¢æ‰€é€‰å­—æ¯çš„å¤§å°å†™</td>
</tr>
</tbody></table>
<p>æ›¿æ¢çš„ <code>/g</code> ä¸º<strong>æ›¿æ¢æ ‡å¿—</strong>ï¼Œä»£è¡¨æ‰€æœ‰ï¼ˆglobalï¼‰ï¼Œå¯ä»¥ä¸ºç©ºï¼Œé‚£ä¹ˆå°±æ˜¯ä»å…‰æ ‡å¼€å§‹çš„ç¬¬ä¸€æ¬¡å‡ºç°ã€‚<code>/i</code> è¡¨ç¤ºä¸åŒºåˆ†å¤§å°å†™ï¼Œ<code>/I</code> è¡¨ç¤ºåŒºåˆ†å¤§å°å†™ã€‚<code>/c</code> è¡¨ç¤ºéœ€è¦ç¡®è®¤ã€‚è¿™äº›å¯ä»¥è‡ªç”±ç»„åˆï¼Œæ¯”å¦‚ <code>/gci</code>ã€‚</p>
<h2 id="ä¸€å›¾æ€»ç»“"><a href="#ä¸€å›¾æ€»ç»“" class="headerlink" title="ä¸€å›¾æ€»ç»“"></a>ä¸€å›¾æ€»ç»“</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202405181708942.webp"
                      alt="|600"
                ></p>
<h2 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h2><p>ç”¨ Vim å†™ Markdown å¹¶ä¸”è¿˜æ˜¯ä¸­æ–‡å…¶å®çœŸçš„å¾ˆé¸¡è‚‹ã€‚</p>
<p>ä¸­è‹±è¾“å…¥æ³•ä¸æ–­åˆ‡æ¢æ‰èƒ½æ­£å¸¸ä½¿ç”¨å‘½ä»¤ã€‚</p>
<p>æ€»ç»“äº†ä¸€äº›æˆ‘åˆå­¦ Vim å¸¸ç”¨çš„å‘½ä»¤ã€‚</p>
<p>çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œã€‚</p>
<p>çœ‹ä¸æ‡‚çš„åœ°æ–¹å°±è¯•è¯•ï¼Œå¾ˆå¥½ç†è§£ã€‚</p>
<p>å¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©ã€‚</p>
<p>ğŸ”š</p>
]]></content>
      <categories>
        <category>Tool</category>
      </categories>
      <tags>
        <tag>vim</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue Note</title>
    <url>/9f08e17f.html</url>
    <content><![CDATA[<h1 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h1><blockquote>
<p><a class="link"   href="https://cn.vuejs.org/" >Vue.js ä¸­æ–‡æ–‡æ¡£<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</blockquote>
<h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><blockquote>
<p>ä»€ä¹ˆæ˜¯ API ï¼Ÿ</p>
<p>APIï¼ˆ<strong>Application Programming Interface</strong>ï¼Œåº”ç”¨ç¨‹åºæ¥å£ï¼‰æ˜¯ä¸€ç»„å®šä¹‰å’Œåè®®ï¼Œç”¨äºæ„å»ºå’Œé›†æˆè½¯ä»¶åº”ç”¨ç¨‹åºã€‚API å…è®¸ä¸åŒè½¯ä»¶ç³»ç»Ÿä¹‹é—´è¿›è¡Œé€šä¿¡å’Œæ•°æ®äº¤æ¢ã€‚é€šè¿‡ä½¿ç”¨ APIï¼Œå¼€å‘è€…å¯ä»¥åˆ©ç”¨ç°æœ‰çš„<strong>åŠŸèƒ½</strong>ï¼Œè€Œæ— éœ€ä»å¤´å¼€å§‹ç¼–å†™ä»£ç ã€‚</p>
</blockquote>
<h3 id="é€‰é¡¹å¼-API"><a href="#é€‰é¡¹å¼-API" class="headerlink" title="é€‰é¡¹å¼ API"></a>é€‰é¡¹å¼ API</h3><p>é€‰é¡¹APIæ˜¯Vue 2ä¸­ä½¿ç”¨çš„ä¼ ç»Ÿæ–¹æ³•ï¼Œé€šè¿‡åœ¨ç»„ä»¶å¯¹è±¡ä¸­å®šä¹‰å„ç§é€‰é¡¹æ¥ç»„ç»‡ç»„ä»¶é€»è¾‘ï¼Œå¦‚<code>data</code>ã€<code>methods</code>ã€<code>computed</code>ã€<code>watch</code>ç­‰ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">count</span>++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="title function_">doubleCount</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">count</span> * <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">watch</span>: &#123;</span><br><span class="line">    <span class="title function_">count</span>(<span class="params">newValue, oldValue</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Count changed from <span class="subst">$&#123;oldValue&#125;</span> to <span class="subst">$&#123;newValue&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>

<h3 id="ç»„åˆå¼-API"><a href="#ç»„åˆå¼-API" class="headerlink" title="ç»„åˆå¼ API"></a>ç»„åˆå¼ API</h3><p>ç»„åˆå¼APIæ˜¯Vue 3ä¸­å¼•å…¥çš„æ–°ç‰¹æ€§ï¼Œæä¾›äº†ä¸€ç§æ›´çµæ´»çš„æ–¹å¼æ¥ç»„ç»‡å’Œå¤ç”¨ç»„ä»¶é€»è¾‘ã€‚é€šè¿‡ä½¿ç”¨<code>setup</code>å‡½æ•°å’Œç»„åˆå‡½æ•°ï¼ˆComposition Functionsï¼‰ï¼Œå¯ä»¥å°†é€»è¾‘åˆ†å—ï¼Œä¾¿äºå¤ç”¨å’Œæµ‹è¯•ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, computed, watch &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">increment</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">      count.<span class="property">value</span>++;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> doubleCount = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> count.<span class="property">value</span> * <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">watch</span>(count, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Count changed from <span class="subst">$&#123;oldValue&#125;</span> to <span class="subst">$&#123;newValue&#125;</span>`</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      count,</span><br><span class="line">      increment,</span><br><span class="line">      doubleCount</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>

<h2 id="å“åº”å¼"><a href="#å“åº”å¼" class="headerlink" title="å“åº”å¼"></a>å“åº”å¼</h2><p>å“åº”å¼ï¼ˆreactivityï¼‰æ˜¯æŒ‡ç³»ç»Ÿèƒ½å¤Ÿè‡ªåŠ¨ç›‘æµ‹æ•°æ®çš„å˜åŒ–å¹¶åšå‡ºç›¸åº”çš„ååº”ã€‚ä¾‹å¦‚ï¼Œå½“æ•°æ®å˜åŒ–æ—¶ï¼ŒVue ä¼šè‡ªåŠ¨é‡æ–°æ¸²æŸ“ç›¸å…³çš„ DOM å…ƒç´ ï¼Œä»¥ç¡®ä¿ç”¨æˆ·ç•Œé¢å§‹ç»ˆä¸æ•°æ®ä¿æŒåŒæ­¥ã€‚è¿™ç§èƒ½åŠ›æ˜¯ Vue çš„æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ï¼Œä½¿å¾—å¼€å‘è¿‡ç¨‹æ›´åŠ ç®€æ´å’Œé«˜æ•ˆã€‚</p>
<h2 id="ç»“æ„"><a href="#ç»“æ„" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h2><div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;scirpt setup&gt;</span><br><span class="line">// JS</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">// HTML</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">// CSS</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></div>

<p>æ¯ä¸€ä¸ª <code>.vue</code> æ–‡ä»¶æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œä¸åŒçš„ç»„ä»¶æ‹¼æ¥æˆä¸€ä¸ªç½‘é¡µåº”ç”¨ã€‚</p>
<p>é‡Œé¢æœ‰ä¸‰éƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„ <code>HTML CSS JS</code>ã€‚</p>
<p>åœ¨ä¹‹å‰çš„å†™æ³•ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰ Vue è¿™æ˜¯ä¸ªç»„ä»¶ä»¥åŠå®šä¹‰ç»„ä»¶é€»è¾‘çš„åœ°æ–¹ï¼Œå¦‚ï¼š</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">	setup() &#123;</span><br><span class="line">	//</span><br><span class="line">	//</span><br><span class="line">	//</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></div>

<p><code>setup</code> ç”¨äºåˆå§‹åŒ–ç»„ä»¶çš„é€»è¾‘ã€çŠ¶æ€ã€æ•°æ®ï¼Œè¿”å›å€¼å°†ç»™æ¨¡æ¿ä½¿ç”¨ã€‚</p>
<p>ä½†åœ¨ Vue3 ä¸­ï¼Œæˆ‘ä»¬æœ‰æ›´æ–¹ä¾¿çš„å®šä¹‰æ•°æ®å’Œæ–¹æ³•çš„æ–¹å¼ï¼š</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">//</span><br><span class="line">//</span><br><span class="line">//</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></div>

<p>è¿™æ ·çš„å†™æ³•å°±æ–¹ä¾¿è®¸å¤šã€‚</p>
<p>å½“æˆ‘ä»¬æƒ³åœ¨æŸä¸€ä¸ª <code>.vue</code> æ–‡ä»¶ä¸­å¯¼å…¥å…¶å®ƒç»„ä»¶æ—¶ï¼Œè¿™æ ·å†™ï¼š</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123;name&#125; form &#x27;&#123;path&#125;&#x27;</span><br></pre></td></tr></table></figure></div>

<p><code>&#123;name&#125;</code> æ˜¯ç»„ä»¶çš„åå­—ï¼Œå¯ä»¥ä»»æ„å–ï¼Œ<code>&#39;&#123;path&#125;&#39;</code> æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä»£è¡¨ç»„ä»¶æ‰€åœ¨è·¯å¾„ã€‚</p>
<p>ä½¿ç”¨æ—¶ï¼Œåœ¨ <code>&lt;template&gt;</code> ä¸­ä½¿ç”¨ <code>&lt;&#123;name&#125;&gt;&lt;/&#123;name&#125;&gt;</code> å³å¯ï¼Œåƒæ˜¯ä½ è‡ªå®šä¹‰äº†ä¸€ä¸ªæ–°çš„ HTML æ ‡ç­¾ã€‚</p>
<p>å½“æˆ‘ä»¬åªæƒ³ç»™ CSS æ·»åŠ åˆ°å½“å‰ç»„ä»¶æ—¶ï¼Œå¯ä»¥ç»™ <code>&lt;style&gt;</code> æ·»åŠ ä¸€ä¸ªå±æ€§ <code>scoped</code>ã€‚</p>
<h2 id="Variable"><a href="#Variable" class="headerlink" title="Variable"></a>Variable</h2><p>åœ¨ <code>script</code> ä¸­ï¼Œåˆ›å»ºå˜é‡éœ€è¦å…ˆå¼•å…¥ <code>ref/reactive</code> APIã€‚</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; ref, reactive &#125; from &#x27;vue&#x27;</span><br></pre></td></tr></table></figure></div>

<p>ç„¶ååˆ›å»ºå˜é‡ï¼š</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">const str = ref()</span><br></pre></td></tr></table></figure></div>

<p><code>ref()</code> å†…æ˜¯å˜é‡å€¼ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€æ•°ç»„ã€æ•°å­—ã€å¯¹è±¡ç­‰ç­‰ã€‚</p>
<p>è¿”å›çš„æ˜¯ä¸€ä¸ªå¸¦æœ‰ <code>value</code> å±æ€§çš„å¯¹è±¡ã€‚</p>
<p>åœ¨ <code>script</code> å†…è®¿é—®å˜é‡å€¼æ—¶ï¼Œéœ€è¦ä½¿ç”¨ <code>var.value</code>ï¼Œè€Œåœ¨ <code>template</code> ä¸­è®¿é—®å˜é‡å€¼æ—¶ï¼Œåªéœ€è¦ <code>var</code>ï¼Œæ¯”å¦‚ä¸€ä¸ªæ ‡é¢˜å¯ä»¥æ˜¯ <code>&lt;h2&gt;&#123;&#123; str &#125;&#125;&lt;/h2&gt;</code>ã€‚è¿™æ ·æ ‡é¢˜çš„å†…å®¹å°±å¯ä»¥éšç€å˜é‡çš„å˜åŒ–è€Œå˜åŒ–ã€‚</p>
<p><code>ref</code> åˆ›å»ºçš„æ˜¯å•ä¸€çš„<strong>å€¼</strong>ï¼Œè€Œ <code>reactive</code> åˆ›å»ºçš„æ˜¯æ›´ä¸ºå¤æ‚çš„æ·±åº¦å“åº”å¼<strong>å¯¹è±¡</strong>ï¼Œé‡Œé¢æœ‰å¾ˆå¤šé”®å€¼å¯¹ã€‚</p>
<p>è€Œç”±äºè¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥å“ªæ€•è¿™ä¸ªå˜é‡åœ¨å®šä¹‰æ—¶ä¸º <code>const</code>ï¼Œä½ ä¾ç„¶å¯ä»¥ä¿®æ”¹å®ƒçš„ <code>value</code>ã€‚</p>
<p>å¦‚æœæƒ³è¦åˆ›å»ºä¸€ä¸ªå¸¸é‡çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ <code>ref(Object.freeze(&#123;value&#125;))</code></p>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>computed</code> APIï¼Œå®ƒå¯ä»¥ç”¨äºåˆ›å»ºä¸€ä¸ªè®¡ç®—å±æ€§ï¼Œè®¡ç®—å±æ€§çš„å€¼ä¼šè‡ªåŠ¨ç¼“å­˜ï¼Œåªæœ‰å®ƒé‡Œé¢çš„å˜é‡å‘ç”Ÿå˜åŒ–æ—¶æ‰ä¼šé‡æ–°è®¡ç®—ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦è®©é‡Œé¢æ²¡æœ‰å˜é‡å°±å¯ä»¥å®ç°è¿”å›ä¸€ä¸ªå¸¸é‡ã€‚</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">const computeValue = computed(() =&gt; &#x27;This is a computed constant&#x27;);</span><br></pre></td></tr></table></figure></div>

<h2 id="Watch"><a href="#Watch" class="headerlink" title="Watch"></a>Watch</h2><div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; watch &#125; from &#x27;vue&#x27;;</span><br></pre></td></tr></table></figure></div>

<p><code>watch()</code> æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç›‘å¬çš„å˜é‡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ‰§è¡Œçš„å‡½æ•°ã€‚</p>
<p>å½“è¿™ä¸ªå˜é‡çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå‡½æ•°å°±ä¼šæ‰§è¡Œä¸€æ¬¡ã€‚</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">watch(object, add(oldValue, newValue), &#123; &#125;)</span><br></pre></td></tr></table></figure></div>

<p>åŒæ—¶è¿™ä¸ªæ‰§è¡Œçš„å‡½æ•°å¯ä»¥ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯ç›‘å¬å¾—åˆ°çš„æ–°å€¼ï¼Œå¦ä¸€ä¸ªæ˜¯æ—§å€¼ã€‚</p>
<p>ç›‘å¬çš„å¯ä»¥æ˜¯æ™®é€šå“åº”å¼å˜é‡ï¼ˆrefï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯è®¡ç®—å±æ€§ï¼ˆcomputedï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª <code>getter</code> å‡½æ•°ç”¨äºç›‘å¬å¤æ‚çš„è¡¨è¾¾å¼ï¼Œä¹Ÿå¯ä»¥ç›‘å¬å¤šä¸ªå€¼ï¼Œæ‰“åŒ…æˆä¸€ä¸ªæ•°ç»„å³å¯ã€‚</p>
<p>å½“ç›‘å¬çš„å…ƒç´ ä¸ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œä¿®æ”¹å¯¹è±¡ä¸­çš„æŸä¸€ä¸ªå€¼ï¼Œå¹¶ä¸ä¼šè§¦å‘ç›‘å¬å‡½æ•°ã€‚</p>
<p>å¦‚æœæƒ³ç›‘å¬å¯¹è±¡ä¸­çš„å€¼ï¼Œå¯ä»¥å†åŠ å…¥ä¸€ä¸ªå‚æ•°<strong>é€‰é¡¹å¯¹è±¡</strong>ï¼š</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">watch(object, add(oldValue, newValue), &#123; deep: true &#125;)</span><br></pre></td></tr></table></figure></div>

<p>ä¸€ä¸ªå¯¹è±¡ <code>&#123; deep: true &#125;</code>ï¼Œæ­¤ä¸ºæ·±åº¦ç›‘å¬ã€‚</p>
<p>é€‰é¡¹å¯¹è±¡è¿˜æœ‰çš„å±æ€§æ˜¯ï¼š</p>
<ul>
<li><code>immediate</code>ï¼šåœ¨ç›‘å¬å™¨åˆå§‹åŒ–æ—¶å°±ä¼šæ‰§è¡Œä¸€æ¬¡å›è°ƒå‡½æ•°ï¼Œé»˜è®¤ä¸º <code>false</code></li>
<li><code>flush</code>ï¼šæ‰§è¡Œå›è°ƒå‡½æ•°çš„æ—¶æœºï¼Œå¯ä»¥æ˜¯å¦‚ä¸‹å€¼ï¼š<ul>
<li><code>&quot;pre&quot;</code>ï¼šåœ¨è§†å›¾æ›´æ–°ä¹‹å‰è°ƒç”¨ï¼ˆé»˜è®¤å€¼ï¼‰ã€‚</li>
<li><code>&quot;post&quot;</code>ï¼šåœ¨è§†å›¾æ›´æ–°ä¹‹åè°ƒç”¨ã€‚</li>
<li><code>&quot;sync&quot;</code>ï¼šåŒæ­¥æ‰§è¡Œå›è°ƒã€‚</li>
</ul>
</li>
</ul>
<h2 id="defineProps"><a href="#defineProps" class="headerlink" title="defineProps"></a>defineProps</h2><p><code>defineProps</code> æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºå£°æ˜å½“å‰ç»„ä»¶æ¥æ”¶çš„ propsã€‚å®ƒè¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰ props çš„å¯¹è±¡ï¼Œå¯ä»¥åœ¨ç»„ä»¶çš„é€»è¾‘ä¸­ä½¿ç”¨ã€‚</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; defineProps &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">const props = defineProps([&#x27;name&#x27;]);</span><br></pre></td></tr></table></figure></div>

<p>å‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œé‡Œé¢çš„å­—ç¬¦ä¸²å°±æ˜¯å¯ä»¥æ¥æ”¶çš„ propsï¼Œå¯ä»¥è®©<strong>çˆ¶ç»„ä»¶</strong>ï¼ˆè°ƒç”¨ç»„ä»¶çš„ç»„ä»¶ï¼‰é€šè¿‡å±æ€§å°†å±æ€§å€¼ä¼ é€’ç»™<strong>å­ç»„ä»¶</strong>ï¼ˆè¢«è°ƒç”¨çš„ç»„ä»¶ï¼‰çš„ props ä¸­ã€‚</p>
<p>ä¹Ÿå¯ä»¥æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡é‡Œå¯ä»¥è¯¦ç»†é…ç½® prop çš„é»˜è®¤å€¼ï¼Œç±»å‹å’ŒéªŒè¯ç­‰å…¶å®ƒé€‰é¡¹ã€‚</p>
<p>å­ç»„ä»¶è°ƒç”¨è¿™ä¸ªå€¼ï¼Œé€šè¿‡ <code>&#123;&#123; props.name &#125;&#125;</code> å³å¯ã€‚</p>
<p>ä¸¾ä¾‹ï¼š</p>
<ul>
<li>å­ç»„ä»¶ï¼š</li>
</ul>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">...</span><br><span class="line">const props = defineProps([&#x27;text&#x27;]);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;h2&gt;&#123;&#123; props.text &#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>çˆ¶ç»„ä»¶ï¼š</li>
</ul>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;Mybutton text=&quot;Title&quot;&gt;&lt;/Mybutton&gt;</span><br></pre></td></tr></table></figure></div>

<p>è¿™æ ·ï¼Œçˆ¶ç»„ä»¶çš„æ•°æ®å°±ä¼ é€’åˆ°å­ç»„ä»¶ä¸­äº†ã€‚</p>
<h2 id="defineEmits"><a href="#defineEmits" class="headerlink" title="defineEmits"></a>defineEmits</h2><p>åœ¨ Vue 3 ä¸­ï¼Œ<code>defineEmits</code> æ˜¯ä¸€ä¸ªç»„åˆå¼ APIï¼Œç”¨äºåœ¨ç»„ä»¶ä¸­å®šä¹‰å¯ä»¥è§¦å‘çš„äº‹ä»¶ã€‚å…¶å‚æ•°æ˜¯ä¸€ä¸ª<strong>æ•°ç»„</strong>ï¼ŒåŒ…å«äº†<strong>è¯¥ç»„ä»¶å¯ä»¥è§¦å‘çš„äº‹ä»¶åç§°</strong>ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºè§¦å‘äº‹ä»¶ã€‚</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">const emit = defineEmits([&#x27;ok&#x27;]);</span><br></pre></td></tr></table></figure></div>

<p>è€Œ <code>emit</code> å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºè§¦å‘çš„äº‹ä»¶ï¼ˆè¿™ä¸ªäº‹ä»¶å¿…é¡»æ˜¯<strong>å¯è§¦å‘</strong>çš„ï¼‰ï¼Œåç»­å‚æ•°è¡¨ç¤ºä¼ é€’ç»™äº‹ä»¶å¤„ç†å‡½æ•°çš„æ•°æ®ã€‚</p>
<p>æ­¤æ—¶ï¼Œå°±å¯ä»¥é€šè¿‡å­ç»„ä»¶ä¸­çš„ä¸€ä¸ªå®šä¹‰çš„äº‹ä»¶ï¼Œå‘çˆ¶ç»„ä»¶ä¸­ä¼ é€’ç›¸åº”çš„æ•°æ®ã€‚</p>
<ul>
<li>å­ç»„ä»¶ï¼š</li>
</ul>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; defineProps, defineEmits &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">const props = defineProps([&#x27;text&#x27;]);</span><br><span class="line"></span><br><span class="line">const emit = defineEmits([&#x27;ok&#x27;]);</span><br><span class="line"></span><br><span class="line">function send() &#123;</span><br><span class="line">  emit(&#x27;ok&#x27;, &#x27;hello&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div @click=&quot;send&quot; class=&quot;button&quot;&gt;&#123;&#123; props.text &#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.button &#123;</span><br><span class="line">  width: 100px;</span><br><span class="line">  height: 50px;</span><br><span class="line">  border-radius: 10px;</span><br><span class="line">  line-height: 50px;</span><br><span class="line">  background-color: aliceblue;</span><br><span class="line">  text-align: center;</span><br><span class="line">  margin: 100px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>çˆ¶ç»„ä»¶ï¼š</li>
</ul>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import Mybutton from &#x27;...&#x27;;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">function fn(str) &#123;</span><br><span class="line">	console.log(str); //å°†è¾“å‡º str</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;Mybutton @ok=&quot;fn&quot;&gt;&lt;/Mybutton&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">...</span><br></pre></td></tr></table></figure></div>

<p>è¿™æ ·ï¼Œå½“ç‚¹å‡»çˆ¶ç»„ä»¶ä¸­å¼•ç”¨çš„å­ç»„ä»¶ï¼ˆæŒ‰é’®ï¼‰æ—¶ï¼Œå°±ä¼šè§¦å‘å­ç»„ä»¶ä¸­çš„ <code>send()</code> å‡½æ•°ï¼Œä»è€Œè§¦å‘ <code>ok</code> äº‹ä»¶ï¼Œå¹¶åƒçˆ¶ç»„ä»¶ä¸­çš„ <code>function</code> å‡½æ•°ä¼ é€’äº† <code>hello</code> çš„å‚æ•°ã€‚</p>
<p>ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ <code>this.$emit(&#39;name&#39;, args)</code> è°ƒç”¨ï¼Œä¼šè§¦å‘ <code>name</code> äº‹ä»¶ï¼Œç„¶ååœ¨çˆ¶ç»„ä»¶ä¸­ç›‘å¬ <code>name</code> äº‹ä»¶å³å¯ï¼Œè¿™æ ·å°±ä¸ç”¨é¢„å®šä¹‰ <code>emit</code> äº†ã€‚</p>
<p>è¿™æ ·ï¼Œçˆ¶ç»„ä»¶çš„æ•°æ®å°±ä¼ é€’åˆ°å­ç»„ä»¶ä¸­äº†ã€‚</p>
<h2 id="slot"><a href="#slot" class="headerlink" title="slot"></a>slot</h2><p>æ’æ§½ï¼Œç”¨äºå­ç»„ä»¶ä¸­å ä½ï¼Œçˆ¶ç»„ä»¶å¯å‘å…¶ä¸­ä¼ å…¥å†…å®¹ã€‚</p>
<p>ä¸ <code>props</code> ä¸åŒï¼Œæ’æ§½ä¼ å…¥çš„æ˜¯å…·ä½“çš„å†…å®¹ï¼Œè€Œä¸æ˜¯æ•°æ®ã€‚</p>
<p>å­ç»„ä»¶ï¼š</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">	&lt;slot name=&quot;haha&quot; :msg=&quot;message&quot;&gt;&lt;/slot&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></div>

<p>çˆ¶ç»„ä»¶ï¼š</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template #haha=&quot;&#123; msg &#125;&quot;&gt;</span><br><span class="line">	&lt;h1&gt;HaHa&lt;/h1&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></div>


<p>è¿™æ ·å°±å¯ä»¥æŠŠçˆ¶ç»„ä»¶ä¸­çš„æ ‡é¢˜æ”¾å…¥å­ç»„ä»¶ä¸­çš„ <code>slot</code>ï¼ŒåŒæ—¶å­ç»„ä»¶å°†å±æ€§ <code>msg</code> ä¼ ç»™çˆ¶ç»„ä»¶ï¼Œçˆ¶ç»„ä»¶å¯ä»¥é€šè¿‡ <code>v-slot:name</code> çš„æ–¹å¼æ‰¾åˆ°å‘½åæ’æ§½ï¼Œä¹Ÿå¯ä»¥ç®€å†™ä¸º <code>#name</code>ï¼Œåé¢åŠ ä¸Šç­‰å·å¯ä»¥æ¥æ”¶ä¸€ä¸ªå­ç»„ä»¶çš„ <code>slotProps</code> å¯¹è±¡ï¼Œç„¶åé‡‡ç”¨ ES6 é‡Œå¯¹è±¡ç»“æ„çš„è¯­æ³•å°±å¯ä»¥ç›´æ¥å¾—åˆ° <code>message</code> çš„å€¼ã€‚ï¼ˆæ³¨æ„å˜é‡å&#x2F;é”®åè¦ä¸€æ ·æ‰èƒ½è§£æ„ï¼‰ã€‚</p>
<p>å…¶ä¸­çˆ¶ç»„ä»¶çš„ <code>template</code> å¯ä»¥ç”¨å­ç»„ä»¶æ ‡ç­¾åä»£æ›¿ã€‚</p>
<h2 id="Vue-æŒ‡ä»¤"><a href="#Vue-æŒ‡ä»¤" class="headerlink" title="Vue æŒ‡ä»¤"></a>Vue æŒ‡ä»¤</h2><p>åœ¨ Vue.js ä¸­ï¼Œä»¥ <code>v-</code> å¼€å¤´çš„å±æ€§æ˜¯ Vue æŒ‡ä»¤ï¼ˆdirectivesï¼‰ã€‚æŒ‡ä»¤æ˜¯ç‰¹æ®Šçš„æ ‡è®°ï¼Œæ·»åŠ åœ¨å…ƒç´ ä¸Šçš„å±æ€§ï¼Œç”¨äºåœ¨ DOM ä¸Šåšç‰¹å®šçš„æ“ä½œã€‚</p>
<h3 id="v-bind"><a href="#v-bind" class="headerlink" title="v-bind"></a>v-bind</h3><p>åŠ¨æ€ç»‘å®šï¼Œåœ¨éœ€è¦ç»‘å®šçš„å…ƒç´ å±æ€§å‰åŠ ä¸Š <code>v-bind:</code> å³å¯ï¼Œå±æ€§å€¼æ”¹ä¸ºå˜é‡ã€‚</p>
<p>ç®€å†™ä¸º <code>:</code></p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;div :class=&quot;str&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure></div>

<p>è¿™æ ·çš„ç»‘å®šæ˜¯å•å‘çš„ï¼ŒVue ä¸­çš„æ•°æ®å˜åŠ¨ä¼šå¯¼è‡´ DOM ä¸­çš„æ•°æ®å˜åŠ¨ï¼Œä½† DOM å±æ€§å˜åŠ¨ä¸ä¼šå¯¼è‡´ Vue ä¸­çš„æ•°æ®å˜åŠ¨ã€‚</p>
<p>ä¹Ÿå¯ä»¥ç»‘å®šä¸€ä¸ªå¯¹è±¡ï¼Œè¿™æ ·å°±ä¸éœ€è¦ <code>key</code> å€¼ï¼ŒæŠŠå¯¹è±¡ä¸­çš„æ¯ä¸ªé”®ä½œä¸º <code>key</code>ã€‚</p>
<hr>
<p>åŠ¨æ€ç»‘å®š css å±æ€§æ—¶ï¼Œæƒ…å†µæœ‰äº›ä¸åŒã€‚</p>
<p>ä¼ å…¥çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå±æ€§åæ˜¯æ ·å¼åï¼Œè€Œ css ä¸­å¾ˆå¤šæ ·å¼åä¸­å«æœ‰ <code>-</code>ï¼Œä½†å¯¹è±¡çš„å±æ€§åæ˜¯ä¸å¯ä»¥åŒ…å« <code>-</code> çš„ï¼Œæ‰€ä»¥éœ€è¦ç”¨é©¼å³°å‘½åæ³•æ¥è§„é¿ã€‚</p>
<p>åŠ¨æ€ç»‘å®šç±»æ—¶ä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œå±æ€§æ˜¯å¯¹è±¡åï¼Œå±æ€§å€¼æ˜¯å¸ƒå°”å€¼ã€‚</p>
<p>é€šè¿‡ä¼ å…¥å¯¹è±¡çš„æ–¹å¼ç»‘å®š class æˆ– css æ—¶ï¼Œ<strong>å±æ€§æ˜¯å¸¸é‡</strong>ï¼Œå±æ€§å€¼æ˜¯å˜é‡ã€‚</p>
<p>å¦‚ <code>:class=&quot;&#123; classname1: true, classname2: false, ... &#125;&quot;</code></p>
<h3 id="v-on"><a href="#v-on" class="headerlink" title="v-on"></a>v-on</h3><p>ç›‘å¬æŸä¸ªæ—¶é—´å¹¶æ‰§è¡Œç›¸åº”çš„å‡½æ•°ã€‚</p>
<p>åœ¨äº‹ä»¶å‰æ·»åŠ  <code>v-on:</code> å³å¯ï¼Œä¾‹å¦‚ï¼š<code>v-on:click</code>ã€‚</p>
<p>å¯ä»¥ç®€å†™ä¸º <code>@click</code>ã€‚</p>
<ul>
<li><code>.prevent</code> äº‹ä»¶ä¿®é¥°ç¬¦ï¼Œå¯ä»¥é˜»æ­¢é»˜è®¤äº‹ä»¶è¡Œä¸ºï¼Œå¯ä»¥ç»„ç»‡è¡¨å•æäº¤åé¡µé¢åˆ·æ–°ï¼Œä¹Ÿå¯ä»¥ç‚¹å‡»é“¾æ¥åé˜»æ­¢å¯¼èˆªã€‚</li>
</ul>
<h3 id="v-model"><a href="#v-model" class="headerlink" title="v-model"></a>v-model</h3><p>åœ¨ <code>input</code> æ ‡ç­¾ä¸­æ·»åŠ å±æ€§ <code>v-model=â€œvar&quot;</code></p>
<p>å˜é‡å€¼ä¸è¾“å…¥æ¡†å†…çš„å€¼ä¾¿æ˜¯<strong>åŒå‘ç»‘å®š</strong>çš„ã€‚</p>
<p>å³ä¿®æ”¹å…¶ä¸­ä¸€ä¸ªå¿…ç„¶ä¼šå½±å“å¦ä¸€ä¸ªå€¼ã€‚</p>
<p>ä¸ä»…ä»…æ–‡æœ¬è¾“å…¥æ¡†å¯ä»¥è¿›è¡ŒåŒå‘ç»‘å®šï¼Œ<code>checkbox</code> ä¹Ÿå¯ä»¥ï¼Œéœ€è¦å°†ç»‘å®šçš„å€¼è®¾ä¸ºå¸ƒå°”ç±»å‹ã€‚</p>
<h3 id="v-for"><a href="#v-for" class="headerlink" title="v-for"></a>v-for</h3><div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;div v-for=&quot;(i, index) in list&quot; :key=&quot;index&quot;&gt;</span><br></pre></td></tr></table></figure></div>

<p>è¿™é‡Œé€šè¿‡éå† <code>list</code> å¹¶ä¸”æŒ‰ç…§å…¶ä¸­å…ƒç´ ä¸ªæ•°æ¸²æŸ“å¤šä¸ª <code>div</code>ï¼Œ<code>i</code> æ˜¯å½¢å‚ï¼Œä»£è¡¨ <code>list</code> ä¸­çš„å€¼ï¼Œ<code>index</code> è¡¨ç¤ºæ•°ç»„ä¸‹æ ‡ã€‚</p>
<p><code>:key</code> ä½œç”¨æ˜¯æä¾›å”¯ä¸€æ ‡è¯†ï¼Œé˜²æ­¢æ¸²æŸ“é”™è¯¯ã€‚</p>
<p>å› ä¸ºæ‰€æœ‰çš„ <code>v-for</code> éƒ½æ˜¯é€šè¿‡ <code>key</code> å€¼æ¥æ¸²æŸ“å…ƒç´ çš„ï¼Œé»˜è®¤ä¸ºå½“å‰æ•°ç»„çš„ä¸‹æ ‡ï¼Œå½“æœ‰å¤šä¸ª <code>v-for</code> æ—¶ï¼Œ<code>key</code> å¯èƒ½ç›¸åŒï¼Œå°±ä¼šå¯¼è‡´æ¸²æŸ“å‡ºé”™è¯¯çš„ç»“æœã€‚</p>
<h3 id="v-show"><a href="#v-show" class="headerlink" title="v-show"></a>v-show</h3><p>æ§åˆ¶ä¸€ä¸ªå…ƒç´ æ˜¯å¦æ˜¾ç¤ºï¼Œå±æ€§å€¼ä¸ºå¸ƒå°”å€¼ã€‚</p>
<h3 id="v-if"><a href="#v-if" class="headerlink" title="v-if"></a>v-if</h3><p>ä¸ <code>v-show</code> ç”¨æ³•ç›¸åŒï¼ŒåŒºåˆ«åœ¨äºï¼Œå¦‚æœå…ƒç´ ä¸æ˜¾ç¤ºï¼Œä¸ä¼šåˆ›å»ºè¿™ä¸ªå…ƒç´ ï¼Œè€Œ <code>v-show</code> åªæ˜¯å•çº¯åˆ©ç”¨ CSS å°†å…ƒç´ è¿›è¡Œéšè—ã€‚</p>
<h3 id="v-else-if"><a href="#v-else-if" class="headerlink" title="v-else-if"></a>v-else-if</h3><p>ä¸ <code>v-if</code> ç›¸åŒï¼Œåˆ†æ”¯é€»è¾‘ã€‚</p>
<h3 id="v-else"><a href="#v-else" class="headerlink" title="v-else"></a>v-else</h3><p>ä¸ <code>v-if</code> ç›¸åŒï¼Œåˆ†æ”¯é€»è¾‘ã€‚</p>
<h2 id="Vue-Router"><a href="#Vue-Router" class="headerlink" title="Vue Router"></a>Vue Router</h2><p>Vue è·¯ç”±ï¼Œé€šè¿‡å®ƒæˆ‘ä»¬å¯ä»¥é¿å…åƒé™æ€é¡µé¢ä¸€æ ·é€šè¿‡å¤§é‡çš„å‘é€è¯·æ±‚å¾—åˆ°ä¸åŒçš„é¡µé¢æ–‡ä»¶æ¥å®ç°<strong>å•æˆ–å¤šé¡µé¢ APP</strong>ã€‚</p>
<p>ä¸å¤šé¡µé¢é™æ€ç½‘é¡µ APP ç›¸æ¯”ï¼ŒVue å®ç°çš„å¤šé¡µé¢ APP åŒºåˆ«åœ¨å“ªé‡Œï¼Ÿ</p>
<ul>
<li>HTML å¤šé¡µé¢ï¼š<ul>
<li>æ¯æ¬¡æ›´æ¢é¡µé¢éƒ½éœ€è¦é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢æ–‡ä»¶ã€‚</li>
<li>ä¸åŒçš„é¡µé¢å¯¹åº”ç€ä¸åŒçš„é¡µé¢æ–‡ä»¶ã€‚</li>
</ul>
</li>
<li>Vue å®ç°å¤šé¡µé¢ï¼š<ul>
<li>æ¯æ¬¡æ›´æ¢é¡µé¢åªéœ€è¦è¯·æ±‚éœ€è¦çš„ç»„ä»¶ã€‚ï¼ˆæˆ–è€…åˆå§‹åŠ è½½æ—¶ä¸€æ¬¡æ€§è¯·æ±‚æ‰€æœ‰å¯èƒ½ç”¨åˆ°çš„ç»„ä»¶ï¼Œè¿™æ ·åˆ‡æ¢å¾ˆå¿«ä½†åˆå§‹åŠ è½½å¾ˆæ…¢ï¼Œæ‰€ä»¥ç”¨åˆ°æ‡’åŠ è½½æŠ€æœ¯å®ç°æŒ‰éœ€åŠ è½½ï¼‰</li>
<li>åªæœ‰ä¸€ä¸ªé¡µé¢æ–‡ä»¶ï¼Œé€šè¿‡ä¿®æ”¹ <code>url</code> ä¿®æ”¹ä¸åŒç»„ä»¶çš„å‘ˆç°ã€‚</li>
</ul>
</li>
</ul>
<p><strong>æµç¨‹</strong>ï¼š</p>
<pre class="mermaid">flowchart LR;
    1["åˆ¶å®šè·¯ç”±è§„åˆ™(index.js)"]-->2["ä½¿ç”¨è§„åˆ™(main.js)"] & 3["åˆ›å»ºç»„ä»¶(views.vue)"]-->4["æ¸²æŸ“è·¯ç”±" router-view];</pre>

<p>æ³¨æ„ï¼š</p>
<ul>
<li><code>a</code> æ ‡ç­¾ä¼šäº§ç”Ÿæ–°çš„è¯·æ±‚ï¼Œæ‰€ä»¥è¦ä½¿ç”¨ <code>router-link</code>ã€‚</li>
<li>JS é‡Œå±æ€§åä¸å¯ä»¥åŒ…å« <code>-</code>ï¼Œæ‰€ä»¥ä½¿ç”¨é©¼å³°å‘½åä»£æ›¿ã€‚</li>
</ul>
<h3 id="export-import"><a href="#export-import" class="headerlink" title="export &amp; import"></a>export &amp; import</h3><ol>
<li>Default Export</li>
</ol>
<p>æ¯ä¸ªæ¨¡å—å¯ä»¥æœ‰ä¸”æœ€å¤šä¸€ä¸ªçš„é»˜è®¤å¯¼å‡ºå€¼ã€‚</p>
<p>é»˜è®¤å¯¼å‡ºåœ¨å¯¼å…¥æ—¶ï¼Œå¯ä»¥éšæ„å‘½åï¼Œå¹¶ä¸”å¯ä»¥ä¸éœ€è¦èŠ±æ‹¬å·ã€‚</p>
<ol start="2">
<li>Named Export</li>
</ol>
<p>å¯ä»¥å¯¼å‡ºå¤šä¸ªå€¼ã€‚</p>
<p>åœ¨å¯¼å…¥æ—¶ï¼Œåªèƒ½ä½¿ç”¨è¿™ä¸ªå˜é‡çš„åå­—ï¼Œä¸”å¿…é¡»ä½¿ç”¨èŠ±æ‹¬å·åŒ…è£¹ã€‚</p>
<h1 id="Vue-é¡¹ç›®"><a href="#Vue-é¡¹ç›®" class="headerlink" title="Vue é¡¹ç›®"></a>Vue é¡¹ç›®</h1><h2 id="æ–‡ä»¶ç»“æ„"><a href="#æ–‡ä»¶ç»“æ„" class="headerlink" title="æ–‡ä»¶ç»“æ„"></a>æ–‡ä»¶ç»“æ„</h2><p>é¡µé¢æœ¬èº«æ˜¯ä¸€ä¸ªæ ¹ç»„ä»¶ã€‚</p>
<p>ä¸åŒçš„åŒºåŸŸæ˜¯ä¸åŒçš„ç»„ä»¶ã€‚</p>
<h2 id="åˆ›å»º-Vue"><a href="#åˆ›å»º-Vue" class="headerlink" title="åˆ›å»º Vue"></a>åˆ›å»º Vue</h2><h3 id="CDN-åˆ›å»º"><a href="#CDN-åˆ›å»º" class="headerlink" title="CDN åˆ›å»º"></a>CDN åˆ›å»º</h3><p>æ¨èå°ç™½å…ˆä½¿ç”¨è¿™ä¸ªï¼Œå› ä¸º CLI æ–¹å¼ç”Ÿæˆçš„ç»“æ„æ¯”è¾ƒå¤æ‚ï¼Œä»¤äººè´¹è§£ã€‚</p>
<p>å°† <code>&lt;script src=&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;&gt;&lt;/script&gt;</code> å¼•å…¥è‡³ HTML çš„ <code>head</code> æ ‡ç­¾åä¾¿å¯ä½¿ç”¨ã€‚</p>
<p>åˆ›å»ºä¸€ä¸ª Vue APPï¼š</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">Vue.createApp(&#123;&#125;).mount(&#x27;#app&#x27;);</span><br></pre></td></tr></table></figure></div>

<p>ä»£è¡¨åˆ›å»ºä¸€ä¸ª APPï¼Œæ¡ä»¶æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒæŒ‚è½½åœ¨ DOM ä¸­çš„ <code>#app</code> èŠ‚ç‚¹ä¸Šã€‚</p>
<h3 id="CLI"><a href="#CLI" class="headerlink" title="CLI"></a>CLI</h3><p>å‘½ä»¤è¡Œ <code>cd</code> è‡³ç›®æ ‡ç›®å½•ï¼Œè¾“å…¥ <code>npm create vue@latest</code>ã€‚</p>
<h3 id="é¢„è§ˆ"><a href="#é¢„è§ˆ" class="headerlink" title="é¢„è§ˆ"></a>é¢„è§ˆ</h3><p>å®‰è£…ä¾èµ–ï¼š</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure></div>

<p>æœ¬åœ°è¿è¡Œï¼ˆåŸºäº <a class="link"   href="https://vitejs.dev/" >Vite<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>ï¼‰ï¼š</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure></div>

<h2 id="æ‰“åŒ…å’Œå‘å¸ƒ"><a href="#æ‰“åŒ…å’Œå‘å¸ƒ" class="headerlink" title="æ‰“åŒ…å’Œå‘å¸ƒ"></a>æ‰“åŒ…å’Œå‘å¸ƒ</h2><p>ä½¿ç”¨ <code>npm run build</code> æ¥æ„å»ºé¡¹ç›®ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ª <code>dist</code> æ–‡ä»¶å¤¹ï¼Œé‡Œé¢å°±è£…æœ‰ä½ æ‰“åŒ…å¥½çš„æ–‡ä»¶ï¼Œæ³¨æ„è¿™é‡Œé¢çš„ <code>index.html</code> æ–‡ä»¶æ‰€å¼•å…¥çš„ CSS å’Œ JS è·¯å¾„å‡ä¸ºç»å¯¹è·¯å¾„ï¼Œè¦<strong>æ”¹ä¸ºç›¸å¯¹è·¯å¾„</strong>å¦åˆ™ç½‘é¡µåœ¨äº‘ç«¯é¢„è§ˆæ—¶å°†ä¼šæ˜¯ä¸€ç‰‡ç©ºç™½ï¼Œå› ä¸ºç½‘é¡µå†…å®¹ç”± JS ç”Ÿæˆã€‚</p>
<p>å¦‚ä½•å‘å¸ƒï¼Ÿ</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">git init</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;&quot;</span></span><br></pre></td></tr></table></figure></div>

<p>ç„¶åå» Github åˆ›å»ºä¸€ä¸ªä»“åº“ã€‚</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">git remote add origin ...</span><br><span class="line">git push -u origin ...</span><br></pre></td></tr></table></figure></div>

<p>å…·ä½“çœ‹ Github åˆ›å»ºä»“åº“åä¸‹é¢çš„æç¤ºã€‚</p>
<p>ï¼ˆè¿™é‡Œçš„ <code>-u</code> æ˜¯æŒ‡è®¾ç½®ä¸Šæ¸¸åˆ†æ”¯ï¼Œå³é»˜è®¤åˆ†æ”¯ï¼Œè®¾ç½®å¥½åä»¥ååªéœ€è¦ä½¿ç”¨ <code>git push</code> å’Œ <code>git pull</code> å³å¯ï¼Œä¸éœ€è¦åŠ ä¸Š <code>origin ...</code>ï¼‰</p>
<p>ç„¶åè¿™åªæ˜¯æŠŠé¡¹ç›®çš„æºä»£ç ä¸Šä¼ ä¸Šå»äº†ï¼Œä½†æˆ‘æƒ³è®©è¿™ä¸ªé¡¹ç›®è·‘èµ·æ¥ã€‚</p>
<p>ç„¶è€Œä¸Šä¼ çš„æ–‡ä»¶å¹¶æ²¡æœ‰ <code>dist</code> ç›®å½•ï¼Œè¿™æ˜¯å› ä¸ºå®ƒè¢« <code>.gitignore</code> æ–‡ä»¶ç»™å¿½ç•¥äº†ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>gh-pages</code> æ’ä»¶å°†é¡¹ç›®æ–‡ä»¶ä¸Šä¼ åˆ° <code>gh-pages</code> åˆ†æ”¯ã€‚</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">npm install gh-pages --save-dev</span><br></pre></td></tr></table></figure></div>

<p>åœ¨æ ¹ç›®å½•çš„ <code>package.json</code> æ–‡ä»¶ä¸­æ·»åŠ ç›¸åº”å‘½ä»¤ä»¥åŠä½ çš„ <code>homepage</code>ï¼š</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;your-vue-project&quot;</span>,</span><br><span class="line">  <span class="string">&quot;version&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;private&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">&quot;homepage&quot;</span>: <span class="string">&quot;https://yourusername.github.io/your-repo-name&quot;</span>,</span><br><span class="line">  <span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;build&quot;</span>: <span class="string">&quot;vue-cli-service build&quot;</span>,</span><br><span class="line">    <span class="string">&quot;deploy&quot;</span>: <span class="string">&quot;gh-pages -d dist&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;dependencies&quot;</span>: &#123;</span><br><span class="line">    // é¡¹ç›®ä¾èµ–</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;devDependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;gh-pages&quot;</span>: <span class="string">&quot;^3.2.3&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>è¿™é‡Œ <code>gh-pages -d dist</code> å°±æ˜¯ä¸Šä¼  <code>dist</code> ç›®å½•ï¼Œç„¶åå» Github å¼€å¯ Github Pages å¹¶æŠŠåˆ†æ”¯æ”¹ä¸º <code>gh-pages</code> å³å¯ã€‚</p>
<h2 id="Vue-å®ä¾‹"><a href="#Vue-å®ä¾‹" class="headerlink" title="Vue å®ä¾‹"></a>Vue å®ä¾‹</h2><p><code>createApp</code> ä¼ å…¥çš„å‚æ•°æ˜¯ä¸€ä¸ªæ ¹ç»„ä»¶ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ª Vue ç»„ä»¶ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª Javascript å¯¹è±¡ã€‚</p>
<h3 id="computed"><a href="#computed" class="headerlink" title="computed"></a>computed</h3><p>è®¡ç®—å±æ€§ï¼Œå½“é‡Œé¢çš„å€¼æ‰€ä¾èµ–çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ä¼šé‡æ–°è®¡ç®—ã€‚</p>
<p>å®ƒçš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚</p>
<p>åœ¨ Vue3 ä¸­ï¼Œ<code>computed()</code> æ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›å€¼ä½œä¸ºè®¡ç®—å±æ€§å€¼ï¼Œå‡½æ•°ä¸­çš„å˜é‡å°±æ˜¯ä¾èµ–ã€‚</p>
<h3 id="data"><a href="#data" class="headerlink" title="data"></a>data</h3><p>ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢åŒ…å«ç€éœ€è¦ç”¨åˆ°çš„æ•°æ®ã€‚</p>
<p>å°†ä½œä¸º Vue å®ä¾‹çš„ä¸€ä¸ªå±æ€§ï¼Œåœ¨è¿™ä¸ªå¯¹è±¡å†…è®¿é—® data ä¸­çš„å€¼æ—¶éœ€è¦ <code>this.</code>ã€‚</p>
<p>å±æ€§åå’Œå±æ€§å€¼ç›¸åŒæ—¶å¯ä»¥åªå†™å±æ€§åã€‚ï¼ˆES6ï¼‰</p>
<h3 id="methods"><a href="#methods" class="headerlink" title="methods"></a>methods</h3><p>ä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢å¯ä»¥å®šä¹‰å„ç§æ–¹æ³•ï¼Œç›¸å½“äºæ–¹æ³•ç‰ˆçš„ dataã€‚</p>
<h3 id="components"><a href="#components" class="headerlink" title="components"></a>components</h3><p>ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨äºæ³¨å†Œå­ç»„ä»¶ï¼Œé‡Œé¢åŒ…å«ç€éœ€è¦æ³¨å†Œçš„å­ç»„ä»¶ï¼Œéœ€è¦æå‰ <code>import</code>ã€‚</p>
<h3 id="props"><a href="#props" class="headerlink" title="props"></a>props</h3><p>ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥åœ¨å­ç»„ä»¶çš„å¯¼å‡ºå¯¹è±¡ä¸­å®šä¹‰ <code>props</code>ï¼Œè¿™ä¸ªå¯¹è±¡çš„å±æ€§ä»£è¡¨çˆ¶ç»„ä»¶ä¸­å¯ä»¥ä¼ é€’ç»™å­ç»„ä»¶çš„å±æ€§ï¼Œå±æ€§å€¼ä¸ºè¿™ä¸ªå±æ€§æ‰€æ¥æ”¶çš„å€¼ç±»å‹ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<div class="code-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">props</span>: &#123;</span><br><span class="line">	<span class="attr">title</span>: <span class="title class_">String</span>,</span><br><span class="line">	<span class="attr">age</span>: <span class="title class_">Number</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="ES6-æ¨¡å—"><a href="#ES6-æ¨¡å—" class="headerlink" title="ES6 æ¨¡å—"></a>ES6 æ¨¡å—</h3><p>ä½¿ç”¨ <code>export</code> å…³é”®å­—è¿›è¡Œå¯¼å‡ºï¼Œå¯ä»¥å¯¼å‡ºä»»ä½•å€¼ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨ <code>export default</code> å…³é”®å­—å¯¼å‡ºä¸€ä¸ªé»˜è®¤çš„å€¼ã€‚</p>
<p>åœ¨å¦ä¸€ä¸ªæ–‡ä»¶å†…ä½¿ç”¨ <code>import &#123;name1, name2&#125; from &#39;././...&#39;</code> å¯¼å…¥ã€‚</p>
<p>åŒæ—¶éœ€è¦åœ¨ HTML æ–‡ä»¶ä¸­çš„ <code>script</code> æ ‡ç­¾åŠ å…¥ <code>type=&quot;module&quot;</code>ã€‚</p>
]]></content>
      <categories>
        <category>Front-End</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Q&amp;A</title>
    <url>/503a6fb7.html</url>
    <content><![CDATA[<p><strong>P5465</strong> @luoguhandongheng é¦–å…ˆiè¶Šå¤§ï¼Œé‚£ä¹ˆç‚¹å°±è¶Šé å³ï¼Œé‚£ä¹ˆå‡å¦‚ä»i-2å·ç‚¹å¼€å§‹è·³ï¼Œè·³ä¸€æ­¥ï¼Œæœ‰å¯èƒ½åˆ°iï¼Œä¹Ÿæœ‰å¯èƒ½åˆ°i+1ï¼Œä½†æ˜¯l_{i+1}å¯èƒ½ä¼šæ¯”l_iè¦å°ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©æ›´ä¼˜çš„l_{i+1}æ¥æ›´æ–°l_iï¼Œè¿™é‡Œå…¶å®å°±æ˜¯å‘Šè¯‰åœ¨iè¿™ä¸ªä½ç½®æœ‰æœºä¼šèŠ±åŒæ ·çš„ä»£ä»·åˆ°è¾¾æ›´ä¼˜è§£çš„ä½ç½®ï¼Œè€Œä¸”è¿™æ˜¯é¢„å¤„ç†ï¼Œå®é™…ä¸Šæ ¹æœ¬æ²¡æœ‰å‘åè·³è¿™ä¸€æ­¥æ“ä½œï¼Œå› ä¸ºæˆ‘ä»¬é¢„å¤„ç†çš„æ—¶å€™æ˜¯ä»æœ€è¿œçš„nå¼€å§‹ä¸æ–­é è¿‘çš„ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘ä»¬ç±»ä¼¼äºdpçš„å»æ‰¾åˆ°æ¯ä¸€ä¸ªç‚¹çš„æœ€ä¼˜è§£ï¼Œå¯¹äºfçš„å®šä¹‰ä¹Ÿæ²¡å¿…è¦é‚£ä¹ˆç²¾ç¡®ã€‚</p>
<hr>
]]></content>
      <categories>
        <category>ACM</category>
      </categories>
      <tags>
        <tag>Q&amp;A</tag>
      </tags>
  </entry>
  <entry>
    <title>DP</title>
    <url>/48659.html</url>
    <content><![CDATA[<blockquote>
<p>çŠ¶æ€æœ¬è´¨æ˜¯å›¾è®ºä¸­ä¸€ä¸ªä¸ªç‚¹ï¼Œè½¬ç§»å¯¹åº”ä¸€æ¡æ¡è¾¹</p>
<p>å¤æ‚åº¦åˆ†æï¼šçŠ¶æ€æ•°é‡ $\times$ çŠ¶æ€è®¡ç®—</p>
</blockquote>
<h1 id="çº¿æ€§DP"><a href="#çº¿æ€§DP" class="headerlink" title="çº¿æ€§DP"></a>çº¿æ€§DP</h1><ul>
<li>è·¯å¾„ç±»</li>
<li>åºåˆ—ç±»</li>
<li>ç»„åˆç±»</li>
</ul>
<h2 id="1-çŠ¶æ€"><a href="#1-çŠ¶æ€" class="headerlink" title="1.çŠ¶æ€"></a>1.çŠ¶æ€</h2><ul>
<li>é¢˜ç›®ä¸­æœ‰å¾ˆå¤šçŠ¶æ€ï¼Œè€Œè¿™äº›çŠ¶æ€é—´å­˜åœ¨æŸäº›å…³ç³»çš„é¢˜ç›®ã€‚</li>
</ul>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303122107009.webp"
                      alt="image.webp"
                ></p>
<p>æ‰€è°“çŠ¶æ€ï¼Œå°±æ˜¯ä½ å½“å‰å¤„äºå“ªä¸ªåœºæ™¯çš„æ¦‚å¿µã€‚</p>
<p>æ¯”å¦‚æˆ‘ç°åœ¨æ‰‹é‡Œæœ‰å…­ä¸ªéª°å­ï¼Œ</p>
<p>é‚£ä¹ˆå°±æœ‰ ${6}\times{6}\times{6}$ ä¹Ÿå°±æ˜¯ $216$ ç§åœºæ™¯ï¼Œ</p>
<p>å˜é‡çš„ç»„åˆä¾¿æ˜¯çŠ¶æ€ã€‚</p>
<h2 id="2-è½¬ç§»æ–¹ç¨‹"><a href="#2-è½¬ç§»æ–¹ç¨‹" class="headerlink" title="2.è½¬ç§»æ–¹ç¨‹"></a>2.è½¬ç§»æ–¹ç¨‹</h2><p>çŠ¶æ€ä¸çŠ¶æ€ä¹‹é—´çš„å…³ç³»ï¼ˆç‚¹ä¸ç‚¹ä¹‹é—´çš„è¾¹ï¼‰ã€‚</p>
<p>è¦æ ¹æ®å…·ä½“é¢˜ç›®è¿›è¡Œè®¾è®¡ã€‚</p>
<h3 id="å…¸ä¾‹"><a href="#å…¸ä¾‹" class="headerlink" title="å…¸ä¾‹"></a>å…¸ä¾‹</h3><ul>
<li>æ–æ³¢é‚£å¥‘æ•°åˆ—</li>
</ul>
<p>è¿™æ˜¯æœ€å¸¸è§çš„ä¸€ä¸ªé€’æ¨ã€‚</p>
<p>é‚£ä¹ˆæ€ä¹ˆè¿›è¡Œ<code>DP</code>å‘¢ï¼Ÿ</p>
<p>æƒ³æƒ³çŠ¶æ€å’Œä»€ä¹ˆæœ‰å…³ç³»â€”â€”å½“å‰è¿™ä¸€é¡¹å’Œå‰ä¸¤é¡¹æœ‰å…³ç³»ï¼Œåä¸¤é¡¹ä¸å½“å‰çŠ¶æ€æœ‰å…³ç³»ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303122117603.webp"
                      alt="image.webp"
                ></p>
<p>é‚£ä¹ˆå°±æœ‰äº†<code>DP</code>çš„ä¸¤ç§å†™æ³•ï¼š</p>
<p>1.è‡ªå·±æ±‚åˆ«äºº</p>
<p>2.åˆ«äººæ±‚è‡ªå·±</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303122120900.webp"
                      alt="image.webp"
                ></p>
<p>æ ¹æ®é¢˜ç›®é€‰æ‹©ä¸åŒçš„  $\text{DP}$ æ–¹å¼</p>
<h2 id="3-è®°å¿†åŒ–æœç´¢"><a href="#3-è®°å¿†åŒ–æœç´¢" class="headerlink" title="3.è®°å¿†åŒ–æœç´¢"></a>3.è®°å¿†åŒ–æœç´¢</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303161201695.webp"
                      alt="image.webp"
                ></p>
<p>å¤æ‚åº¦ $O(N)$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303161204384.webp"
                      alt="image.webp"
                ></p>
<p>ç‰¹å¾æ–¹ç¨‹æ³•è§£é€šé¡¹å…¬å¼ã€‚</p>
<h2 id="é—«å¼æ€è€ƒæ³•"><a href="#é—«å¼æ€è€ƒæ³•" class="headerlink" title="é—«å¼æ€è€ƒæ³•"></a>é—«å¼æ€è€ƒæ³•</h2><h3 id="çŸ©é˜µè·¯çº¿é—®é¢˜"><a href="#çŸ©é˜µè·¯çº¿é—®é¢˜" class="headerlink" title="çŸ©é˜µè·¯çº¿é—®é¢˜"></a>çŸ©é˜µè·¯çº¿é—®é¢˜</h3><ul>
<li>çŠ¶æ€è¡¨ç¤º<ul>
<li>$f_{i,j}$</li>
<li>è¡¨ç¤ºä¸€ç±»<strong>é›†åˆ</strong>ï¼šæ‰€æœ‰ä» $(1,1)$ åˆ° $(i,j)$ çš„è·¯çº¿ã€‚</li>
<li><strong>å±æ€§</strong>ï¼šæœ€å¤§å€¼&#x2F;æœ€å°å€¼&#x2F;æ–¹æ¡ˆæ•°ã€‚</li>
</ul>
</li>
<li>çŠ¶æ€è®¡ç®—<ul>
<li>é›†åˆçš„åˆ’åˆ†<ul>
<li>åˆ’åˆ†ä¾æ®ï¼š<strong>æœ€å</strong>ï¼Œæœ¬ä¾‹ä¸­ä¸ºæœ€åä¸€æ­¥ä»ä¸Šé¢ä¸‹æ¥è¿˜æ˜¯ä»å·¦è¾¹è¿‡æ¥ã€‚<ul>
<li>ä»ä¸Šè¾¹è¿‡æ¥ï¼š$(1,1)\to(i-1,j)\to(i,j)$</li>
<li>ä»å·¦é¢è¿‡æ¥ï¼š$(1,1)\to(i,j-1)\to(i,j)$</li>
<li>ä¸¤éƒ¨åˆ†å–ä¸€ä¸ª $\max$ï¼Œåˆ†è€Œæ²»ä¹‹ï¼Œå°†é›†åˆè¿›è¡Œä¸€ä¸ªåˆ’åˆ†ã€‚</li>
</ul>
</li>
<li>åˆ’åˆ†åŸåˆ™ï¼š<ul>
<li>ä¸é‡ï¼ˆæ±‚æœ€å€¼ç­‰æ— æ‰€è°“ï¼‰</li>
<li><strong>ä¸æ¼</strong></li>
</ul>
</li>
</ul>
</li>
<li>è®¡ç®—é¡ºåº<ul>
<li>æŒ‰ç…§æ‹“æ‰‘åºè®¡ç®—ï¼Œä¿è¯æ¯ä¸ªçŠ¶æ€è®¡ç®—æ—¶å®ƒçš„ä¾èµ–çŠ¶æ€å·²ç»è¢«è®¡ç®—è¿‡äº†ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>æˆªå›¾ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202310251414839.webp"
                      alt="image.png"
                ></p>
<p><a class="link"   href="https://www.acwing.com/problem/content/1029/" >æ–¹æ ¼å–æ•°<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202310251442381.webp"
                      alt="image.png"
                ></p>
<h3 id="LIS"><a href="#LIS" class="headerlink" title="LIS"></a>LIS</h3><ul>
<li>çŠ¶æ€è¡¨ç¤º<ul>
<li>é›†åˆï¼šæ‰€æœ‰ä»¥ $a_i$ ç»“å°¾çš„ä¸¥æ ¼å•è°ƒä¸Šå‡å­åºåˆ—</li>
<li>å±æ€§ï¼šMax&#x2F;Min&#x2F;æ•°é‡</li>
</ul>
</li>
<li>çŠ¶æ€è®¡ç®—<ul>
<li>é›†åˆâ€”â€”åˆ†è€Œæ²»ä¹‹ã€‚</li>
<li>é€šè¿‡<strong>æœ€åä¸€æ­¥</strong>åˆ’åˆ†ï¼šæœ€åä¸€æ­¥æ˜¯ $a_i$</li>
</ul>
</li>
</ul>
<p><a class="link"   href="https://www.acwing.com/problem/content/1019/" >A1017<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>æ­£åºå€’å™åˆ†åˆ«æ±‚ä¸¤éæœ€é•¿ä¸Šå‡å­åºåˆ—å–æœ€å¤§å€¼å³å¯ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, a[<span class="number">110</span>], f[<span class="number">110</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;t);</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">        <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            f[i] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt; i; j++)</span><br><span class="line">                <span class="keyword">if</span>(a[i] &gt; a[j])</span><br><span class="line">                    f[i] = <span class="built_in">max</span>(f[i], f[j] + <span class="number">1</span>);</span><br><span class="line">            res = <span class="built_in">max</span>(res, f[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = n; i &gt;= <span class="number">1</span>; i--)</span><br><span class="line">        &#123;</span><br><span class="line">            f[i] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = n; j &gt; i; j--)</span><br><span class="line">                <span class="keyword">if</span>(a[i] &gt; a[j])</span><br><span class="line">                    f[i] = <span class="built_in">max</span>(f[i], f[j] + <span class="number">1</span>);</span><br><span class="line">            res = <span class="built_in">max</span>(res, f[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, res);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>çŠ¶æ€åˆ’åˆ†<ul>
<li>å…ˆå¢åå‡ï¼Œæ ¹æ®ä¸­é—´ç‚¹åˆ†ç±»ã€‚</li>
</ul>
</li>
</ul>
<p><a class="link"   href="https://www.acwing.com/problem/content/1016/" >A1014<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> f[<span class="number">1100</span>];</span><br><span class="line"><span class="type">int</span> g[<span class="number">1100</span>];</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> a[<span class="number">1100</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        f[i] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt; i; j++)</span><br><span class="line">            <span class="keyword">if</span>(a[i] &gt; a[j])</span><br><span class="line">                f[i] = <span class="built_in">max</span>(f[i], f[j] + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = n; i &gt;= <span class="number">1</span>; i--)</span><br><span class="line">    &#123;</span><br><span class="line">        g[i] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = n; j &gt; i; j--)</span><br><span class="line">            <span class="keyword">if</span>(a[i] &gt; a[j])</span><br><span class="line">                g[i] = <span class="built_in">max</span>(g[i], g[j] + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        res = <span class="built_in">max</span>(res, f[i] + g[i] - <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><a class="link"   href="https://www.acwing.com/problem/content/1014/" >A1012 å‹å¥½åŸå¸‚<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>ä¸¤å²¸ï¼Œä¸€è¾¹çœ‹ä½œè‡ªå˜é‡ï¼Œä¸€è¾¹çœ‹ä½œå› å˜é‡ï¼Œåœ¨è‡ªå˜é‡ä¸æ–­é€’å¢çš„è¿‡ç¨‹ä¸­ï¼Œå› å˜é‡ä¹Ÿè¦æ˜¯å•è°ƒé€’å¢çš„ï¼Œå¯¹è‡ªå˜é‡æ’ä¸‹åºï¼Œå¯¹å› å˜é‡æ±‚æœ€é•¿ä¸Šå‡å­åºåˆ—ï¼Œè¿™æ ·å°±è½¬åŒ–æˆäº†ä¸€ä¸ªæœ€é•¿ä¸Šå‡å­åºåˆ—é—®é¢˜ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">5005</span>;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; PII;</span><br><span class="line"></span><br><span class="line">PII q[N];</span><br><span class="line"><span class="type">int</span> f[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;q[i].first, &amp;q[i].second);</span><br><span class="line">    <span class="built_in">sort</span>(q + <span class="number">1</span>, q + n + <span class="number">1</span>);</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        f[i] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt; i; j++)</span><br><span class="line">            <span class="keyword">if</span>(q[i].second &gt; q[j].second)</span><br><span class="line">                f[i] = <span class="built_in">max</span>(f[i], f[j] + <span class="number">1</span>);</span><br><span class="line">        res = <span class="built_in">max</span>(res, f[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><a class="link"   href="https://www.acwing.com/problem/content/1018/" >A1016 æœ€å¤§ä¸Šå‡å­åºåˆ—å’Œ<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<ul>
<li>çŠ¶æ€è¡¨ç¤º<ul>
<li>$f_i$</li>
<li>é›†åˆï¼šæ‰€æœ‰ä»¥ $a_i$ ç»“å°¾çš„ä¸Šå‡å­åºåˆ—</li>
<li>å±æ€§ï¼šå’Œçš„æœ€å¤§å€¼</li>
</ul>
</li>
<li>çŠ¶æ€è®¡ç®—ï¼šå€’æ•°ç¬¬äºŒä¸ªæ•°</li>
</ul>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1010</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> a[N], f[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">    <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        f[i] = a[i];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt; i ; j++)</span><br><span class="line">            <span class="keyword">if</span>(a[i] &gt; a[j])</span><br><span class="line">                f[i] = <span class="built_in">max</span>(f[i], f[j] + a[i]);</span><br><span class="line">        ans = <span class="built_in">max</span>(ans, f[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="å¯¼å¼¹æ‹¦æˆª"><a href="#å¯¼å¼¹æ‹¦æˆª" class="headerlink" title="å¯¼å¼¹æ‹¦æˆª"></a>å¯¼å¼¹æ‹¦æˆª</h3><ul>
<li>è´ªå¿ƒæµç¨‹ï¼š<ul>
<li>æƒ…å†µ1ï¼šå¦‚æœç°æœ‰çš„å­åºåˆ—ç»“å°¾éƒ½å°äºå½“å‰æ•°ï¼Œé‚£ä¹ˆå°±åˆ›å»ºæ–°çš„å­åºåˆ—</li>
<li>æƒ…å†µ2ï¼šæŠŠå½“å‰æ•°æ”¾åˆ°ç»“å°¾å¤§äºç­‰äºå®ƒçš„æœ€å°çš„å­åºåˆ—åé¢ã€‚å› ä¸ºè¦æŠŠç»“å°¾å°½å¯èƒ½å¤§çš„ä¿æŒä½ï¼Œè¿™æ ·åé¢æ‰ä¼šæœ‰æ›´å¤šçš„æœºä¼šã€‚</li>
</ul>
</li>
<li>è¯æ˜è´ªå¿ƒæ­£ç¡®æ€§<ul>
<li>å¦‚ä½•è¯æ˜ä¸¤ä¸ªæ•°ç›¸ç­‰ï¼Ÿ<ul>
<li>Aè¡¨ç¤ºè´ªå¿ƒç®—æ³•å¾—åˆ°çš„åºåˆ—ä¸ªæ•°ï¼ŒBè¡¨ç¤ºæœ€ä¼˜è§£ $A\le B,B\le A$</li>
<li>ç”±äº B æ˜¯æœ€ä¼˜è§£ï¼Œå› æ­¤ $B\le A$</li>
<li>ä½¿ç”¨è°ƒæ•´æ³•ï¼Œå‡è®¾æœ€ä¼˜è§£å¯¹åº”çš„æ–¹æ¡ˆå’Œå½“å‰æ–¹æ¡ˆä¸åŒï¼Œé‚£ä¹ˆå¿…ç„¶ä¼šå­˜åœ¨ç¬¬ä¸€ä¸ªä¸åŒçš„ä½ç½®ã€‚è´ªå¿ƒæ³•ä¸€å®šä¼šæŠŠè¿™ä¸ªæ•°åˆ†é…åˆ°ä¸€ä¸ªå¤§äºç­‰äºå®ƒçš„æœ€å°çš„å­åºåˆ—çš„åé¢ï¼Œæœ€ä¼˜è§£ä¹Ÿä¼šæ”¾åˆ°æŸä¸ªåºåˆ—åé¢ï¼Œå®ƒä»¬ä¹‹åçš„åºåˆ—å°±å¯ä»¥æ˜¯ä¸€æ ·çš„ï¼Œå°±å¯ä»¥æŠŠå®ƒä»¬äº¤æ¢ï¼Œä½¿å¾—è´ªå¿ƒæ³•æˆä¸ºæœ€ä¼˜è§£ï¼ŒåŒæ—¶æ²¡æœ‰å¢åŠ å­åºåˆ—çš„ä¸ªæ•°ï¼Œæ‰€ä»¥ $A\le B$ã€‚</li>
<li>æ­¤é¢˜å¾—è¯ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><a class="link"   href="https://www.acwing.com/problem/content/1012/" >A1010<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1010</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> q[N];</span><br><span class="line"><span class="type">int</span> f[N], g[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; q[n]) n++;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        f[i] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; i; j++)</span><br><span class="line">            <span class="keyword">if</span>(q[j] &gt;= q[i])</span><br><span class="line">                f[i] = <span class="built_in">max</span>(f[i], f[j] + <span class="number">1</span>);</span><br><span class="line">        res = <span class="built_in">max</span>(res, f[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">    <span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> k = <span class="number">0</span>; <span class="comment">// æšä¸¾åºåˆ—</span></span><br><span class="line">        <span class="keyword">while</span>(k &lt; cnt &amp;&amp; g[k] &lt; q[i]) k++;</span><br><span class="line">        g[k] = q[i]; <span class="comment">// ç¬¬ä¸€ä¸ªç»“å°¾å¤§äºç­‰äºè¯¥æ•°çš„åºåˆ— | g æ˜¯å•è°ƒçš„</span></span><br><span class="line">        <span class="keyword">if</span>(k &gt;= cnt) cnt++; <span class="comment">// æ–°å¼€ä¸€ä¸ªåºåˆ—</span></span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; cnt &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><a class="link"   href="https://www.acwing.com/problem/content/189/" >A187<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>æ¯ä¸ªä½ç½®æœ‰ä¸¤ç§é€‰æ‹©ï¼Œä¸¤ç§å†³ç­–ï¼Œè¦è€ƒè™‘æ‰€æœ‰æƒ…å†µï¼Œæ²¡åŠæ³•å½’ç±»ï¼Œåªèƒ½ç›´æ¥çˆ†æœã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">55</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> q[N];</span><br><span class="line"><span class="type">int</span> up[N], down[N]; <span class="comment">// æ‰€æœ‰å­åºåˆ—ä¸­æœ€åä¸€ä¸ªæ•°çš„é›†åˆ</span></span><br><span class="line"><span class="type">int</span> ans;</span><br><span class="line"></span><br><span class="line"><span class="comment">// BFS å ç”¨ç©ºé—´å¤ªå¤§ å¹¶ä¸”ä¸å¥½å‰ªæ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> su, <span class="type">int</span> sd)</span> <span class="comment">// å½“å‰æšä¸¾åˆ°ç¬¬å‡ ä¸ªæ•° ä¸Šå‡å­åºåˆ—æœ‰å¤šå°‘ ä¸‹é™å­åºåˆ—æœ‰å¤šå°‘</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(su + sd &gt;= ans) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(u == n)</span><br><span class="line">    &#123;</span><br><span class="line">        ans = su + sd; <span class="comment">// èƒ½åˆ°å°±å¯ä»¥æ›´æ–°</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ”¾åˆ°ä¸Šå‡å­åºåˆ—é‡Œ</span></span><br><span class="line">    <span class="type">int</span> k = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(k &lt; su &amp;&amp; up[k] &gt;= q[u]) k++; <span class="comment">// q[u] &gt; up[k] ä¸” up[k] æœ€å¤§ | upæ•°ç»„å•è°ƒé€’å‡</span></span><br><span class="line">    <span class="type">int</span> t = up[k]; <span class="comment">// å¤‡ä»½ æ–¹ä¾¿æ¢å¤ç°åœº</span></span><br><span class="line">    up[k] = q[u];</span><br><span class="line">    <span class="keyword">if</span>(k &lt; su) <span class="built_in">dfs</span>(u + <span class="number">1</span>, su, sd);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">dfs</span>(u + <span class="number">1</span>, su + <span class="number">1</span>, sd);</span><br><span class="line">    up[k] = t;</span><br><span class="line">    <span class="comment">// æ”¾åˆ°ä¸‹é™å­åºåˆ—é‡Œ</span></span><br><span class="line">    k = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(k &lt; sd &amp;&amp; down[k] &lt;= q[u]) k++; <span class="comment">// q[u] &lt; down[k] ä¸” down[k] æœ€å° | downæ•°ç»„å•è°ƒé€’å¢</span></span><br><span class="line">    t = down[k];</span><br><span class="line">    down[k] = q[u];</span><br><span class="line">    <span class="keyword">if</span>(k &lt; sd) <span class="built_in">dfs</span>(u + <span class="number">1</span>, su, sd);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">dfs</span>(u + <span class="number">1</span>, su, sd + <span class="number">1</span>);</span><br><span class="line">    down[k] = t;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; n, n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) cin &gt;&gt; q[i];</span><br><span class="line">        ans = n;</span><br><span class="line">        <span class="built_in">dfs</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="æœ€é•¿å…¬å…±å­åºåˆ—"><a href="#æœ€é•¿å…¬å…±å­åºåˆ—" class="headerlink" title="æœ€é•¿å…¬å…±å­åºåˆ—"></a>æœ€é•¿å…¬å…±å­åºåˆ—</h3><ul>
<li>çŠ¶æ€è¡¨ç¤º<ul>
<li>$f_{i,j}$</li>
<li>é›†åˆï¼šæ‰€æœ‰ç”±ç¬¬ä¸€ä¸ªåºåˆ—çš„å‰ $i$ ä¸ªå­—æ¯ï¼Œç¬¬äºŒä¸ªåºåˆ—çš„å‰ $j$ ä¸ªå­—æ¯ä¸”ä»¥ $b_j$ ç»“å°¾çš„å…¬å…±ä¸Šå‡å­åºåˆ—</li>
<li>å±æ€§ï¼šæœ€å¤§é•¿åº¦</li>
</ul>
</li>
<li>çŠ¶æ€è®¡ç®—<ul>
<li>åˆ†è€Œæ²»ä¹‹ï¼Œå¯¹æ¯ä¸€ä¸ªéƒ¨åˆ†æ±‚æœ€å¤§å€¼ã€‚</li>
<li>æ‰€æœ‰åŒ…å« $a_i$ çš„å…¬å…±ä¸Šå‡å­åºåˆ—<ul>
<li>æ ¹æ®å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ åˆ’åˆ†ã€‚</li>
<li>$f_{i,k}$</li>
</ul>
</li>
<li>æ‰€æœ‰ä¸åŒ…å« $a_i$ çš„å…¬å…±ä¸Šå‡å­åºåˆ—ï¼š$f_{i-1,j}$</li>
</ul>
</li>
<li>ä¼˜åŒ–<ul>
<li>DP çš„ä¼˜åŒ–ä¸€èˆ¬æ€è·¯ä¸å˜ï¼Œåªæ˜¯å¯¹ä»£ç è¿›è¡Œç­‰ä»·å˜å½¢ã€‚</li>
</ul>
</li>
</ul>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202310261903620.webp"
                      alt="image.png"
                ></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">3010</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, res;</span><br><span class="line"><span class="type">int</span> a[N], b[N];</span><br><span class="line"><span class="type">int</span> f[N][N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;b[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> maxv = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            f[i][j] = f[i - <span class="number">1</span>][j];</span><br><span class="line">                <span class="comment">// f[i][j] = max(f[i][j], 1); // æ›´æ–°ç©ºé›†</span></span><br><span class="line">                <span class="comment">// for(int k = 1; k &lt; j; k++) // å®é™…ä¸Šå°±æ˜¯åœ¨æ±‚ f[i][j] + 1 çš„å‰ç¼€æœ€å¤§å€¼ä¸å«ç¬¬ j ä½</span></span><br><span class="line">                <span class="comment">//     if(b[k] &lt; a[i])</span></span><br><span class="line">                <span class="comment">//     &#123;</span></span><br><span class="line">                <span class="comment">//         f[i][j] = max(f[i][j], f[i][k] + 1);</span></span><br><span class="line">                <span class="comment">//     &#125;</span></span><br><span class="line">            <span class="comment">/* ç­‰æ•ˆä»£ç  */</span></span><br><span class="line">            <span class="keyword">if</span>(a[i] == b[j]) f[i][j] = <span class="built_in">max</span>(f[i][j], maxv);</span><br><span class="line">            <span class="keyword">if</span>(b[j] &lt; a[i]) maxv = <span class="built_in">max</span>(maxv, f[i - <span class="number">1</span>][j] + <span class="number">1</span>); <span class="comment">// ç»´æŠ¤ f[i][j] + 1 è¿™ä¸ªå˜é‡çš„å‰ç¼€æœ€å¤§å€¼</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        res = <span class="built_in">max</span>(res, f[n][i]);</span><br><span class="line">    cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="ç»„åˆæ•°é—®é¢˜ï¼ˆæ¨è¾‰ä¸‰è§’ï¼‰"><a href="#ç»„åˆæ•°é—®é¢˜ï¼ˆæ¨è¾‰ä¸‰è§’ï¼‰" class="headerlink" title="ç»„åˆæ•°é—®é¢˜ï¼ˆæ¨è¾‰ä¸‰è§’ï¼‰"></a>ç»„åˆæ•°é—®é¢˜ï¼ˆæ¨è¾‰ä¸‰è§’ï¼‰</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303161208890.webp"
                      alt="image.webp"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303161208268.webp"
                      alt="image.webp"
                ></p>
<h2 id="è¿‡æ²³å’ä½†æ˜¯æ²¡æœ‰ğŸ"><a href="#è¿‡æ²³å’ä½†æ˜¯æ²¡æœ‰ğŸ" class="headerlink" title="è¿‡æ²³å’ä½†æ˜¯æ²¡æœ‰ğŸ"></a>è¿‡æ²³å’ä½†æ˜¯æ²¡æœ‰ğŸ</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303262027794.webp"
                      alt="image.webp"
                ></p>
<p>æ¯ä¸ªç‚¹çš„æ–¹æ¡ˆæ•°ç­‰äºå·¦è¾¹æ•°å’Œä¸Šè¾¹æ•°ç›¸åŠ ï¼ˆè®°å¾—åˆå§‹åŒ–è¾¹ç•Œï¼‰ã€‚</p>
<p>é‚£ä¹ˆè¿™ä¸ªä¸œè¥¿æ–œèµ·æ¥çœ‹çš„è¯å…¶å®å°±æ˜¯æ¨è¾‰ä¸‰è§’ã€‚</p>
<h2 id="æ•°å­—ä¸‰è§’å½¢"><a href="#æ•°å­—ä¸‰è§’å½¢" class="headerlink" title="æ•°å­—ä¸‰è§’å½¢"></a>æ•°å­—ä¸‰è§’å½¢</h2><h3 id="æ­£å¸¸ç‰ˆ"><a href="#æ­£å¸¸ç‰ˆ" class="headerlink" title="æ­£å¸¸ç‰ˆ"></a>æ­£å¸¸ç‰ˆ</h3><p>æ´›è°·ä¸Šæœ‰é“<a class="link"   href="https://www.luogu.com.cn/problem/P1434" >æ»‘é›ª<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>ï¼Œ</p>
<p>ç¬¬$i$è¡Œæœ‰$i$ä¸ªæ•°ï¼Œ</p>
<p>æ¯æ¬¡å¯ä»¥æœä¸‹æˆ–è€…æœå³ä¸‹èµ°ï¼Œ</p>
<p>é‚£ä¹ˆä»ç¬¬ä¸€è¡Œèµ°åˆ°æœ€åä¸€è¡Œæ€ä¹ˆèµ°ä¼šä½¿è·¯å¾„ä¸Šçš„æ•°å’Œæœ€å¤§ï¼Œ</p>
<p>$f[i][j]&#x3D;max(f[i-1][j-1],f[i-1][j])$ã€‚</p>
<p>è¿˜æ˜¯è¦<strong>è®°å¾—åˆå§‹åŒ–</strong>ã€‚</p>
<hr>
<h3 id="EXç‰ˆ"><a href="#EXç‰ˆ" class="headerlink" title="EXç‰ˆ"></a>EXç‰ˆ</h3><p>é™„åŠ æ¡ä»¶ï¼š$%100$åæœ€å¤§</p>
<p>å¯ä»¥åŠ ä¸€ä¸ªæ¡ä»¶ï¼Œä½¿å¾—æ¯ä¸ªçŠ¶æ€éƒ½$%100$ï¼Ÿ</p>
<p><code>NO</code></p>
<p>ä¼šç ´åå®ƒçš„<strong>æœ€ä¼˜å­ç»“æ„</strong></p>
<p>åˆ¤æ–­<strong>æœ€ä¼˜å­ç»“æ„</strong>å°±æ˜¯åˆ¤æ–­ DP æ­£ç¡®æ€§çš„å…³é”®</p>
<p>ä¹Ÿå°±æ˜¯æœ€ä¼˜è§£ä¸ä¸€å®šæ˜¯ç”¨ä½ æ‰€è°“çš„æœ€ä¼˜è§£æ±‚å‡ºçš„</p>
<p><strong>é‡ç‚¹æ¥äº†</strong>ï¼š<code>DP</code>é¢˜ä¸­é¢˜ç›®æ¯å¤šä¸€ä¸ªæ¡ä»¶ï¼ŒçŠ¶æ€éƒ½å¯ä»¥å†åŠ ä¸€ä¸ªç»´åº¦</p>
<p>$f[i][j][k]$ï¼šèµ°åˆ°$i$ï¼Œ$j$ï¼Œå’Œ$%100$ä¸º$k$è¿™ä»¶äº‹æ˜¯å¦å¯èƒ½<code>(true/false)</code></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303262052130.webp"
                      alt="image.webp"
                ></p>
<h3 id="æ•°å­—ä¸‰è§’å½¢3"><a href="#æ•°å­—ä¸‰è§’å½¢3" class="headerlink" title="æ•°å­—ä¸‰è§’å½¢3"></a>æ•°å­—ä¸‰è§’å½¢3</h3><p>å¿…é¡»ç»è¿‡ ($\dfrac{n}{2}$, $\dfrac{n}{2}$) è¿™ä¸ªç‚¹ã€‚</p>
<h3 id="æ•°å­—ä¸‰è§’å½¢4"><a href="#æ•°å­—ä¸‰è§’å½¢4" class="headerlink" title="æ•°å­—ä¸‰è§’å½¢4"></a>æ•°å­—ä¸‰è§’å½¢4</h3><p>å¿…é¡»å…ˆèµ°åˆ°æŸä¸ªç‚¹å†èµ°åˆ°æœ€åº•å±‚</p>
<p>ä¸ªäººæƒ³æ³•ï¼š</p>
<p>æŠŠè¿™çœ‹ä½œä¸¤ä¸ªè¿‡ç¨‹ï¼Œç›¸å½“äºå…ˆä»¥è¿™ä¸ªç‚¹ä¸ºç»ˆç‚¹è·‘ä¸€éæ•°å­—ä¸‰è§’å½¢ï¼Œç„¶åå†ä»¥è¿™ä¸ªç‚¹ä¸ºèµ·ç‚¹å†è·‘ä¸€éæ•°å­—ä¸‰è§’å½¢ï¼Œä¸¤æ®µç›¸åŠ å³å¯ã€‚</p>
<h2 id="æœ€é•¿ä¸Šå‡å­åºåˆ—ï¼ˆLongest-Increasing-Subsequenceï¼‰"><a href="#æœ€é•¿ä¸Šå‡å­åºåˆ—ï¼ˆLongest-Increasing-Subsequenceï¼‰" class="headerlink" title="æœ€é•¿ä¸Šå‡å­åºåˆ—ï¼ˆLongest Increasing Subsequenceï¼‰"></a>æœ€é•¿ä¸Šå‡å­åºåˆ—ï¼ˆLongest Increasing Subsequenceï¼‰</h2><h3 id="1-æ±‚æœ€é•¿é•¿åº¦"><a href="#1-æ±‚æœ€é•¿é•¿åº¦" class="headerlink" title="1.æ±‚æœ€é•¿é•¿åº¦"></a>1.æ±‚æœ€é•¿é•¿åº¦</h3><p>$f[i]$ ä»£è¡¨ $i$ å¿…é€‰ä¸” $i$ ä¸ºæœ€åä¸€ä¸ªæ•°å¾—åˆ°çš„æœ€é•¿ä¸Šå‡å­åºåˆ—ã€‚</p>
<p>$f[i]$ è‡³å°‘ç­‰äº $1$ï¼Œå› ä¸ºè‡³å°‘é€‰ $i$ã€‚</p>
<p>é‚£ä¹ˆå°±å¯ä»¥æ±‚æœ€é•¿ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304011904860.webp"
                      alt="image.webp"
                ></p>
<h3 id="2-æ±‚æ–¹æ¡ˆæ•°"><a href="#2-æ±‚æ–¹æ¡ˆæ•°" class="headerlink" title="2.æ±‚æ–¹æ¡ˆæ•°"></a>2.æ±‚æ–¹æ¡ˆæ•°</h3><p>å†å¼€ä¸€ä¸ª $g[i]$ï¼Œ</p>
<p>$g[i]$ä»£è¡¨ä»¥ $i$ ç»“å°¾æœ€é•¿çš„é•¿åº¦çš„æ–¹æ¡ˆæ•°ï¼Œ</p>
<p>è¿™æ˜¯é€šè§£ã€‚</p>
<p>å¦‚ä¸‹ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304011909916.webp"
                      alt="image.webp"
                ></p>
<p>é‡åˆ°æ±‚æ–¹æ¡ˆæ•°çš„é—®é¢˜éƒ½å¯ä»¥æ–°å¼€ä¸€ä¸ªæ•°ç»„æ¥è®°å½•æ–¹æ¡ˆæ•°ã€‚</p>
<p>å‡å¦‚é•¿åº¦å˜é•¿äº†ï¼Œé‚£ä¹ˆå°± $g_i&#x3D;g_j$ã€‚</p>
<p>æ”¹ä¸€ä¸‹å†™æ³•çš„è¯å°±æ˜¯åƒä¸Šå›¾æ‰€ç¤ºï¼Œå¦‚æœæ˜¯æ›´æ–°é‚£å°±å…ˆç½®ä¸º0å¹¶ä¸”ä»¤å®ƒä»¬ç›¸åŒï¼Œç„¶åé¡ºå…¶è‡ªç„¶çš„åŠ ä¸Šï¼Œç›¸å½“äºèµ‹å€¼äº†ï¼Œè€Œç­‰äºçš„æƒ…å†µæ­£å¥½ä¹Ÿæ˜¯åŠ ä¸Šï¼Œä¹Ÿå°±æ˜¯ç¨å¾®åˆå¹¶äº†ä¸€ä¸‹æ“ä½œã€‚</p>
<h3 id="3-è¾“å‡ºä¸€ç§æ–¹æ¡ˆæ•°"><a href="#3-è¾“å‡ºä¸€ç§æ–¹æ¡ˆæ•°" class="headerlink" title="3.è¾“å‡ºä¸€ç§æ–¹æ¡ˆæ•°"></a>3.è¾“å‡ºä¸€ç§æ–¹æ¡ˆæ•°</h3><ul>
<li>å†å¼€ä¸€ä¸ªæ•°ç»„$pre$è®°å½•æ¯ä¸€ä¸ªçŠ¶æ€æ˜¯ä»å“ªé‡Œèµ°è¿‡æ¥çš„ã€‚</li>
</ul>
<p>$pre[i]$&#x3D;0å°±æ˜¯å‰é¢æ²¡ä¸œè¥¿äº†</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> f[<span class="number">10000</span>];<span class="comment">//f[i]ä»£è¡¨iå¿…é€‰ä¸”iä¸ºæœ€åä¸€ä¸ªæ•°å¾—åˆ°çš„æœ€é•¿</span></span><br><span class="line"><span class="type">int</span> g[<span class="number">10000</span>];<span class="comment">//g[i]ä»£è¡¨æœ€é•¿çš„é•¿åº¦çš„æ–¹æ¡ˆæ•°</span></span><br><span class="line"><span class="type">int</span> pre[<span class="number">10000</span>];<span class="comment">//ä¸Šä¸€ä¸ªçŠ¶æ€æ˜¯ä»å“ªé‡Œèµ°è¿‡æ¥çš„</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        f[i]=<span class="number">1</span>;<span class="comment">//è‡³å°‘ä¸º1</span></span><br><span class="line">        g[i]=<span class="number">1</span>;<span class="comment">//è‡ªå·±æ˜¯ä¸€ä¸ªæ–¹æ¡ˆ</span></span><br><span class="line">        pre[i]=<span class="number">0</span>;<span class="comment">//å‰é¢æ²¡ä¸œè¥¿</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;i;j++)</span><br><span class="line">            <span class="keyword">if</span>(a[j]&lt;a[i])</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">int</span> l=f[j]<span class="number">+1</span>;</span><br><span class="line">                <span class="keyword">if</span>(l&gt;f[i])</span><br><span class="line">                &#123;</span><br><span class="line">                    f[i]=l;<span class="comment">//æ›´æ–°æœ€é•¿é•¿åº¦,ä¸€å®šä¼šè¿›å…¥ä¸‹ä¸€åˆ†æ”¯</span></span><br><span class="line">                    g[i]=<span class="number">0</span>;<span class="comment">//æ¯å‘¨jçš„æ–¹æ¡ˆåé¢åŠ ä¸Šä¸€ä¸ªié•¿åº¦ä¸å˜</span></span><br><span class="line">                    pre[i]=j;<span class="comment">//æ›´æ–°iè¿™ä¸ªä½ç½®çš„çŠ¶æ€æ˜¯ä»jæ›´æ–°çš„</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(l==f[i])</span><br><span class="line">                &#123;</span><br><span class="line">                    g[i]+=g[j];<span class="comment">//æ–°çš„æ–¹æ¡ˆæ•°å°±ç­‰äºåŸæ¥çš„æ–¹æ¡ˆæ•°åŠ ä¸Šæ–°çš„æ–¹æ¡ˆæ•°</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> p,cnt=<span class="number">0</span>;<span class="comment">//ä»på¼€å§‹èµ°</span></span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">    &#123;</span><br><span class="line">        z[++cnt]=p;</span><br><span class="line">        p=pre[p];</span><br><span class="line">    &#125;<span class="keyword">while</span>(p!=<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">reverse</span>(z<span class="number">+1</span>,z+cnt<span class="number">+1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>å¤æ‚åº¦æ˜¾ç„¶æ˜¯$n^2$çš„ã€‚</p>
<h3 id="4-P2501"><a href="#4-P2501" class="headerlink" title="4.P2501"></a>4.P2501</h3><p><a class="link"   href="https://white.fallingsakura.top/adfe3b0c/" >é¢˜è§£<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h3 id="5-ä¼˜åŒ–"><a href="#5-ä¼˜åŒ–" class="headerlink" title="5.ä¼˜åŒ–"></a>5.ä¼˜åŒ–</h3><blockquote>
<p>è¦åšåˆ°$nlogn$ ï¼Ÿ</p>
</blockquote>
<h4 id="1-çº¿æ®µæ ‘"><a href="#1-çº¿æ®µæ ‘" class="headerlink" title="1.çº¿æ®µæ ‘"></a>1.çº¿æ®µæ ‘</h4><p>æˆ‘ä»¬æ— éå°±æ˜¯è¦<strong>åœ¨ $1\sim{i-1}$ ä¸­æ‰¾åˆ°ä¸€ä¸ª $j$ ä½¿å¾— $a_j&lt;a_i$ å¹¶ä¸” $f[j]$ æœ€å¤§</strong></p>
<p>é‚£æˆ‘ä»¬å°±å»ºä¸€é¢—çº¿æ®µæ ‘ï¼ŒèŒƒå›´ $1{\sim}m$</p>
<p>$m$ æ˜¯ $max({a_1}\sim{a_n})$ï¼Œå³æ‰€æœ‰æ•°çš„æœ€å¤§å€¼</p>
<p>å‡å¦‚ $a[j],f[j]$ éƒ½çŸ¥é“äº†</p>
<p>è¿›è¡Œä¸€ä¸ªå•ç‚¹ä¿®æ”¹</p>
<p>æ¯æ¬¡æ‰¾åˆ°ä¸€ä¸ª $f[j]$ å°±æŠŠå®ƒèµ‹å€¼ç»™ $a_j$ï¼Œ</p>
<p>è¿™æ ·å½“å‰è¯¢é—® $a_i$ åªéœ€è¦è¯¢é—® $1\sim a_i-1$ åŒºé—´ä¸­çš„æœ€å¤§å€¼ï¼Œ</p>
<p>å› ä¸ºè¿™æ ·ä¿è¯äº†ä¹‹å‰çš„æ•°éƒ½æ˜¯å°äº $a_i$ çš„å¹¶ä¸”å®ƒä»¬çš„ LIS éƒ½å·²ç»æ±‚å‡ºã€‚</p>
<p>è¯¢é—®çš„æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>ä»å·¦å‘å³æ‰«çš„</p>
<p>è¯¢é—®çš„æ˜¯æ‰€æœ‰å°äº $a_i$ çš„æ•°</p>
<p>è¿™æ ·æ‰¾åˆ°æœ€å¤§çš„ $f_j$</p>
<p>æ»¡è¶³ $a_j&lt;a_j$</p>
<p>è¿˜å–åˆ° $a_j$ çš„æœ€å¤§å€¼</p>
<p>é‚£ä¹ˆ $a[i]$ å°±æ˜¯ $f[j]+1$</p>
<h4 id="2-äºŒåˆ†"><a href="#2-äºŒåˆ†" class="headerlink" title="2.äºŒåˆ†"></a>2.äºŒåˆ†</h4><h5 id="æ’æ’­ä¸€æ¡äºŒåˆ†"><a href="#æ’æ’­ä¸€æ¡äºŒåˆ†" class="headerlink" title="æ’æ’­ä¸€æ¡äºŒåˆ†"></a>æ’æ’­ä¸€æ¡äºŒåˆ†</h5><blockquote>
<p><a class="link"   href="https://zhuanlan.zhihu.com/p/376467025" >å…³äºc++çš„lower_boundä¸upper_boundå‡½æ•°çš„ç†è§£ )<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</blockquote>
<p>å½“å®¹å™¨ä¸­çš„å…ƒç´ æŒ‰ç…§é€’å¢çš„é¡ºåºå­˜å‚¨æ—¶ï¼Œlower_boundå‡½æ•°è¿”å›å®¹å™¨ä¸­ç¬¬ä¸€ä¸ª<strong>å¤§äºç­‰äº</strong>ç›®æ ‡å€¼çš„ä½ç½®ï¼Œupper_boundå‡½æ•°è¿”å›å®¹å™¨ä¸­ç¬¬ä¸€ä¸ª<strong>å¤§äº</strong>ç›®æ ‡å€¼çš„ä½ç½®ã€‚è‹¥å®¹å™¨ä¸­çš„å…ƒç´ éƒ½æ¯”ç›®æ ‡å€¼å°åˆ™è¿”å›æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®ã€‚($\ge$)</p>
<p>å¦‚æœå®¹å™¨ä¸­çš„å…ƒç´ æ˜¯é€’å‡çš„åº”è¯¥æ€ä¹ˆæŸ¥æ‰¾å‘¢ï¼Ÿè¿™æ˜¯å¯ä»¥å€ŸåŠ©c++å†…ç½®çš„ä»¿å‡½æ•°greater<data_type>()ï¼Œç›¸å½“äºé‡æ–°å®šä¹‰äº†æ¯”è¾ƒè§„åˆ™ã€‚æ­¤æ—¶lower_bound_()æŸ¥æ‰¾çš„æ˜¯å®¹å™¨ä¸­ç¬¬ä¸€ä¸ª<strong>å°äºç­‰äº</strong>ç›®æ ‡å€¼çš„å…ƒç´ çš„ä½ç½®ï¼Œè€Œupper_bound()æŸ¥æ‰¾çš„æ˜¯å®¹å™¨ä¸­ç¬¬ä¸€ä¸ª<strong>å°äº</strong>ç›®æ ‡å€¼çš„å…ƒç´ çš„ä½ç½®å°±ã€‚å¦‚æœå®¹å™¨ä¸­çš„å…ƒç´ éƒ½æ¯”ç›®æ ‡å€¼å¤§åˆ™è¿”å›æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®ã€‚($&gt;$)</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304020831502.webp"
                      alt="image.webp"
                ></p>
<p>è¯¦æƒ…è§<a class="link"   href="https://white.fallingsakura.top/34778/#%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97" >ä¼˜å…ˆé˜Ÿåˆ—<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h5 id="è§£æ³•"><a href="#è§£æ³•" class="headerlink" title="è§£æ³•"></a>è§£æ³•</h5><p>ç°åœ¨å­˜åœ¨ä¸¤ä¸ªä½ç½®$p1$å’Œ$p2$ä¸”$p_1&lt;p_2$ã€$a_{p_1}$&gt;$a_{p_2}$</p>
<p>$f[p_1]$$\le$$f[p_2]$</p>
<p>è¿™æ„å‘³ç€ä»€ä¹ˆ</p>
<p>è¿™ä¸ª$p_1$è‚¯å®šæ˜¯æ²¡æœ‰ç”¨çš„</p>
<p>$p_2$ä¸€å®šæ¯”$p_1$æ›´ä¼˜</p>
<p>è¿™æ ·å°±å¯ä»¥æŠŠ$p_1$åˆ æ‰äº†</p>
<p>æ —å­: <code>7 2 1 5 6 4 3 8 9</code></p>
<p>å‡å¦‚</p>
<p>$$f[7]&#x3D;f[2]&#x3D;1$$</p>
<p>é‚£ä¹ˆ<code>7</code>å°±æ²¡æœ‰ç”¨äº†</p>
<p>æ²¡ç”¨çš„å°±ç»™å»äº†</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304012031358.webp"
                      alt="image.webp"
                ></p>
<p>åœ¨è¿™é‡Œ<code>4</code>å¯ä»¥æŠŠ<code>5</code>ç»™æ›¿æ¢æ‰</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304012032524.webp"
                      alt="image.webp"
                ></p>
<p>åœ¨è¿™é‡Œ<code>4</code>åˆè¢«æ›¿æ¢æˆ<code>3</code></p>
<p>æˆ‘ä»¬å‘ç°ä»€ä¹ˆé—®é¢˜ï¼Ÿ</p>
<p>è¿™ä¸ªåˆ›é€ å‡ºæ¥çš„åºåˆ—çš„ç¬¬$i$ä¸ªä½ç½®å°±æ˜¯$f[i]$</p>
<p>æ¯”å¦‚$a_3$å°±æ˜¯æœ€é•¿ä¸Šå‡å­åºåˆ—ä¸º$3$çš„æœ€å°çš„é‚£ä¸ªï¼ˆæœ€ä¼˜çš„ï¼‰</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/FallingSakura/Source@main/img/202306102054543.webp"
                     
                ></p>
<p><code>cnt</code>ä»£è¡¨æ–°å»ºå‡ºæ¥çš„åºåˆ—çš„å¤§å°</p>
<p>$a$ä»£è¡¨å»ºå‡ºæ¥çš„åºåˆ—</p>
<p>$a[3]&#x3D;f[a[3]]&#x3D;3$</p>
<p>ä½†æ˜¯è¿™æ ·åšè¿˜æ˜¯$n^2$çš„</p>
<p>$z[i]$å­˜çš„æ˜¯$f[i]$çš„ä¸‹æ ‡</p>
<p>ä¹Ÿå°±æ˜¯$z[f[i]]&#x3D;i$</p>
<p>ç®—å‡ºäº†$f[i]$é‚£è‚¯å®šå°±æŠŠ$f[i]$æ”¾åœ¨æ–°æ•°ç»„çš„ç¬¬$f[i]$ä¸ªä½ç½®</p>
<p>æ¯”å¦‚ç®—å‡ºäº†$f[8]&#x3D;4$,é‚£ä¹ˆæ–°æ•°ç»„çš„ç¬¬$4$ä¸ªä½ç½®å°±æ˜¯$4$</p>
<p>æ–°æ•°ç»„å°±æ˜¯$z[]$ï¼Œå®ƒå­˜çš„ä¸æ˜¯æ–°çš„åºåˆ—ï¼Œè€Œæ˜¯æ–°åºåˆ—ä¸­æ¯ä¸ªæ•°å¯¹åº”åŸåºåˆ—çš„ä¸‹æ ‡</p>
<p>ç­”æ¡ˆå°±æ˜¯$z_{1-cnt}$</p>
<p>$f[z[j]]&#x3D;j$</p>
<p>ä»£ç ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> z[<span class="number">233</span>];</span><br><span class="line"><span class="type">int</span> f[<span class="number">233</span>];</span><br><span class="line"><span class="type">int</span> a[<span class="number">233</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> cnt=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        f[i]=<span class="number">1</span>;<span class="comment">//f[i]ä¸­ä¸ºåºåˆ—ä¸‹æ ‡</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=cnt;j++)<span class="comment">//æŠŠå¾ªç¯å˜æˆäºŒåˆ†å°±å¯ä»¥ä¼˜åŒ–ä¸º nlogn</span></span><br><span class="line">        <span class="comment">//æšä¸¾æ–°åºåˆ—ä¸­çš„æ•°ï¼Œæ›´æ–°f[i]</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[z[j]]&lt;a[i])<span class="comment">//z[j]ä¸ºf[]=jçš„æ•°åœ¨aä¸­çš„ä¸‹æ ‡</span></span><br><span class="line">                f[i]=<span class="built_in">max</span>(f[i],j<span class="number">+1</span>);<span class="comment">//æšä¸¾æ„é€ å‡ºçš„åºåˆ—æ¥æ›´æ–°è¿™ä¸ªf[i]</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(f[i]&gt;cnt)<span class="comment">//æ–°åºåˆ—å¯ä»¥åŠ ï¼Œå› ä¸ºä¿è¯äº†æ„é€ å‡ºæ¥çš„åºåˆ—ä¸­ç¬¬iä½çš„f[]å€¼ä¸ºiï¼Œç¬¬cntä½ç½®çš„f[]çš„å€¼ä¸ºcntï¼Œé‚£ä¹ˆåŠ ä¸€ä½</span></span><br><span class="line">        &#123;</span><br><span class="line">            cnt++;</span><br><span class="line">            z[cnt]=i;<span class="comment">//æ”¾å…¥ç¬¬cntä½æ•°åœ¨aä¸­çš„ä¸‹æ ‡</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[i]&lt;a[z[f[i]]])<span class="comment">//é•¿åº¦ä¸ºf[i]çš„æ•°åœ¨aä¸­çš„ä¸‹æ ‡ï¼Œå› ä¸ºé•¿åº¦ä¸ºf[i]å’Œåœ¨zä¸­ä¸‹æ ‡ä¸ºf[i]æ˜¯ç­‰ä»·çš„</span></span><br><span class="line">                z[f[i]]=i;<span class="comment">//å­˜ä¸‹æ ‡ï¼Œæ‹¿æ¯”ä½ å°è¿˜æ¯”ä½ å¼ºçš„æ¥æ›´æ–°ä½ </span></span><br><span class="line">            <span class="comment">//å¦‚æœéœ€è¦æ–¹æ¡ˆï¼Œå°±è®°å½•ä¸€ä¸‹ä»å“ªè½¬ç§»è¿‡æ¥çš„</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/FallingSakura/Source@main/img/202306102105149.webp"
                      alt="image.png"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304020802128.webp"
                      alt="image.webp"
                ></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(a[i]&lt;a[z[f[i]]]) z[f[i]]=i;</span><br></pre></td></tr></table></figure></div>

<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/FallingSakura/Source@main/img/202306102106250.webp"
                      alt="image.png"
                ></p>
<p>è¿™å¥å°±æ˜¯æŠŠ<code>5</code>ç»™æ›´æ–°æˆ<code>4</code></p>
<p>æ³¨æ„ï¼šè¿™ä¸ªæ–°æ„é€ çš„åºåˆ—å¹¶ä¸æ˜¯æœ€é•¿ä¸Šå‡å­åºåˆ—ï¼Œè€Œæ˜¯ç”¨æ¥æ›´æ–°f[i]çš„</p>
<p>å¦‚æœè¦æ–¹æ¡ˆçš„è¯å°±å¼€ä¸ªæ•°ç»„è®°å½•ä¸€ä¸‹</p>
<p>ä½†æ˜¯è¿™æ ·è§£çš„ä¸ªæ•°ä¸æ˜¯å¾ˆå¥½ç®—</p>
<h5 id="å†ä¼˜åŒ–"><a href="#å†ä¼˜åŒ–" class="headerlink" title="å†ä¼˜åŒ–"></a>å†ä¼˜åŒ–</h5><p>å¯ä»¥ç”¨äºŒåˆ†æŸ¥æ‰¾æ‰¾å‡ºå°äº<code>a[i]</code>çš„æœ€å¤§çš„é‚£ä¸ªä½ç½®</p>
<p>åŠ å…¥ä¸€ä¸ªäºŒåˆ†æ›¿ä»£æšä¸¾å°±å¯ä»¥è¾¾åˆ°$nlog_n$</p>
<p>å› ä¸ºæ–°æ„é€ çš„åºåˆ—æ˜¯æŒ‰ç…§<code>f[]</code>å€¼å•è°ƒé€’å¢çš„</p>
<p>æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦æ¯æ¬¡äºŒåˆ†æŸ¥æ‰¾ä¸€ä¸ªå°äºå½“å‰<code>a[i]</code>çš„æœ€å¤§çš„æ•°å°±å¯ä»¥äº†</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e5</span><span class="number">+50</span>;</span><br><span class="line"><span class="type">int</span> z[N];</span><br><span class="line"><span class="type">int</span> f[N];</span><br><span class="line"><span class="type">int</span> a[N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">ef</span><span class="params">(<span class="type">int</span> l,<span class="type">int</span> r,<span class="type">int</span> k)</span><span class="comment">//l,rä¸ºzä¸‹æ ‡ï¼Œkä¸ºaä¸­ä¸‹æ ‡</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(l&lt;r)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> mid=(l+r<span class="number">+1</span>)&gt;&gt;<span class="number">1</span>;<span class="comment">//å³ä¸­ä½æ•°</span></span><br><span class="line">        <span class="keyword">if</span>(a[z[mid]]&lt;a[k])</span><br><span class="line">            l=mid;<span class="comment">//l=mid,ä¿è¯læ°¸è¿œå°äºï¼Œæ»¡è¶³æ¡ä»¶</span></span><br><span class="line">        <span class="keyword">else</span> r=mid<span class="number">-1</span>;<span class="comment">//ç¼©å°å³åŒºé—´</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> l;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> cnt=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        f[i]=<span class="number">1</span>;<span class="comment">//f[i]ä¸­ä¸ºåºåˆ—ä¸‹æ ‡</span></span><br><span class="line">        <span class="comment">// cout&lt;&lt;ef(1,cnt,i)&lt;&lt;endl;</span></span><br><span class="line">        f[i]=<span class="built_in">max</span>(f[i],<span class="built_in">ef</span>(<span class="number">0</span>,cnt,i)<span class="number">+1</span>);</span><br><span class="line">        <span class="comment">// cout&lt;&lt;f[i]&lt;&lt;endl;</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        for(int j=1;j&lt;=cnt;j++)//æŠŠå¾ªç¯å˜æˆäºŒåˆ†å°±å¯ä»¥ä¼˜åŒ–ä¸º nlogn</span></span><br><span class="line"><span class="comment">        //æšä¸¾æ–°åºåˆ—ä¸­çš„æ•°ï¼Œæ›´æ–°f[i]</span></span><br><span class="line"><span class="comment">        &#123;</span></span><br><span class="line"><span class="comment">            if(a[z[j]]&lt;a[i])//z[j]ä¸ºf[]=jçš„æ•°åœ¨aä¸­çš„ä¸‹æ ‡</span></span><br><span class="line"><span class="comment">                f[i]=max(f[i],j+1);//æšä¸¾æ„é€ å‡ºçš„åºåˆ—æ¥æ›´æ–°è¿™ä¸ªf[i]</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="keyword">if</span>(f[i]&gt;cnt)<span class="comment">//æ–°åºåˆ—å¯ä»¥åŠ ï¼Œå› ä¸ºä¿è¯äº†æ„é€ å‡ºæ¥çš„åºåˆ—ä¸­ç¬¬iä½çš„f[]å€¼ä¸ºiï¼Œç¬¬cntä½ç½®çš„f[]çš„å€¼ä¸ºcntï¼Œé‚£ä¹ˆåŠ ä¸€ä½</span></span><br><span class="line">        &#123;</span><br><span class="line">            cnt++;</span><br><span class="line">            z[cnt]=i;<span class="comment">//æ”¾å…¥ç¬¬cntä½æ•°åœ¨aä¸­çš„ä¸‹æ ‡</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[i]&lt;a[z[f[i]]])<span class="comment">//é•¿åº¦ä¸ºf[i]çš„æ•°åœ¨aä¸­çš„ä¸‹æ ‡ï¼Œå› ä¸ºé•¿åº¦ä¸ºf[i]å’Œåœ¨zä¸­ä¸‹æ ‡ä¸ºf[i]æ˜¯ç­‰ä»·çš„</span></span><br><span class="line">                z[f[i]]=i;<span class="comment">//å­˜ä¸‹æ ‡ï¼Œæ‹¿æ¯”ä½ å°è¿˜æ¯”ä½ å¼ºçš„æ¥æ›´æ–°ä½ </span></span><br><span class="line">            <span class="comment">//å¦‚æœéœ€è¦æ–¹æ¡ˆï¼Œå°±è®°å½•ä¸€ä¸‹ä»å“ªè½¬ç§»è¿‡æ¥çš„,åœ¨å‘ç”Ÿè½¬ç§»çš„æ—¶å€™è®°å½•ä¸€ä¸‹pre</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//cntå³ä¸ºæœ€é•¿ä¸Šå‡å­åºåˆ—çš„é•¿åº¦</span></span><br><span class="line">    <span class="comment">// for(int i=1;i&lt;=cnt;i++)</span></span><br><span class="line">    <span class="comment">// &#123;</span></span><br><span class="line">    <span class="comment">//     printf(&quot;%d &quot;,a[z[i]]);</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="comment">// for(int i=1;i&lt;=n;i++)</span></span><br><span class="line">    <span class="comment">// &#123;</span></span><br><span class="line">    <span class="comment">//     printf(&quot;%d &quot;,a[i]);</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,n-cnt);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><del>äºŒåˆ†çœŸçš„å¾ˆéš¾è°ƒ</del></p>
<p>ç®€å•è§£é‡Šä¸€ä¸‹å§ï¼Œ</p>
<p>ç°åœ¨ä¿è¯å·¦ç«¯ç‚¹æ»¡è¶³æ¡ä»¶ï¼Œ</p>
<p>ä¸æ–­å¾®è°ƒå³ç«¯ç‚¹ï¼Œ</p>
<p>äºŒåˆ†åˆ°æœ€åè®©å³ç«¯ç‚¹ä¸å·¦ç«¯ç‚¹åˆå¹¶ï¼Œ</p>
<p>è€Œæœ€åé‡åˆ°ç›¸é‚»çš„æƒ…å†µï¼Œ</p>
<p>midè¦å–å³ä¸­ä½æ•°ï¼ˆä¹Ÿå°±æ˜¯å¦‚æœæ˜¯ä¸¤ä¸ªç›¸é‚»çš„æ•°ï¼Œåœ¨å–æ•´çš„è¿‡ç¨‹ä¸­å–å³ç«¯ç‚¹ï¼‰ã€‚</p>
<p><del>å…·ä½“æ˜¯ä¸æ˜¯è¿™æ ·æˆ‘ä¹Ÿè¯´ä¸æ¸…ã€‚</del></p>
<p>ä»¥ä¸Šåšæ³•å¯ä»¥Aæ‰<a class="link"   href="https://www.luogu.com.cn/problem/P3902" >P3902<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h2 id="ç»ƒä¹ é¢˜"><a href="#ç»ƒä¹ é¢˜" class="headerlink" title="ç»ƒä¹ é¢˜"></a>ç»ƒä¹ é¢˜</h2><h3 id="æ»‘é›ªï¼š"><a href="#æ»‘é›ªï¼š" class="headerlink" title="æ»‘é›ªï¼š"></a>æ»‘é›ªï¼š</h3><blockquote>
<p>ä¸€ä¸ª $n$ è¡Œ $m$ åˆ—çš„ç½‘æ ¼å›¾ï¼Œæ¯ä¸ªæ ¼å­æœ‰ä¸€ä¸ªé«˜åº¦ï¼Œåªèƒ½æ»‘å‘å››å‘¨æ¯”è‡ªå·±çŸ®çš„æ ¼å­ï¼Œä»»é€‰èµ·ç‚¹ï¼Œé—®æœ€å¤šèƒ½æ»‘å¤šè¿œã€‚</p>
</blockquote>
<p>ä»é«˜å¾€ä½æ»‘å’Œä»ä½å‘é«˜æ»‘çš„ç­”æ¡ˆæ˜¯ä¸€æ ·çš„ã€‚</p>
<p>ç”¨ $f_{i,j}$ è¡¨ç¤ºä» $i,j$ å‡ºå‘çš„æœ€é•¿é•¿åº¦ã€‚</p>
<p>å³ $f_{i,j}&#x3D;max(f_{x,y})+1$ï¼Œå…¶ä¸­ $x,y$ ä¸ºèƒ½æ»‘åˆ° $i,j$ çš„æ ¼å­ã€‚</p>
<p>å°±è¿™æ ·è®°å¿†åŒ–æœç´¢ã€‚</p>
<p>å¯ä»¥å°†æ‰€æœ‰ç‚¹çš„é«˜åº¦ä»å°åˆ°å¤§æ’åºã€‚</p>
<p>è¿™ä¸€å®šæ˜¯ä»æ’åºåçš„æ•°ç»„çš„å·¦è¾¹æ»‘åˆ°å³è¾¹ã€‚</p>
<p>é‚£å°±å¯ä»¥ä»å·¦å‘å³è¿›è¡Œ dpã€‚</p>
<p>$f_i$ ä»£è¡¨æ»‘åˆ° $x_i,y_i$ è¿™ä¸ªä½ç½®æ—¶çš„æœ€é•¿é•¿åº¦ï¼Œç„¶åæšä¸¾ $i$ å·¦è¾¹çš„æ•°å¹¶ä¸”æ»¡è¶³ç›¸é‚»ï¼ˆ$|x_i-x_j|+|y_i-y_j|&#x3D;1$ï¼‰çš„æ•°ä¸­ï¼Œ$f$ å€¼æœ€å¤§çš„é‚£ä¸ªï¼ŒæŠŠå®ƒåŠ ä¸€å°±å¯ä»¥æ›´æ–° $f_i$ã€‚</p>
<p>è¿™æ ·å°±å¯ä»¥ä¿è¯è½¬ç§»æ˜¯ä»å·¦å‘å³çš„ï¼Œæšä¸¾ $i,j$ å°±å¯ä»¥äº†ã€‚</p>
<p>æœ€ä½ç‚¹åˆå§‹åŒ–ä¸º 0ã€‚</p>
<p>è¿™ä¸ªæ–¹æ³•æœ¬è´¨ä¸Šå°±æ˜¯æ‹“æ‰‘æ’åº+DPã€‚</p>
<h3 id="ä¹Œé¾Ÿæ£‹"><a href="#ä¹Œé¾Ÿæ£‹" class="headerlink" title="ä¹Œé¾Ÿæ£‹"></a>ä¹Œé¾Ÿæ£‹</h3><p>åœ¨èµ°çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰å…­ä¸ªå˜é‡åœ¨å‘ç”Ÿå˜åŒ–ï¼Œå…¶ä¸­äº”ä¸ªå¯ä»¥ç”¨æ¥è¡¨ç¤ºçŠ¶æ€ï¼Œä¸€ä¸ªç”¨æ¥è¡¨ç¤ºçŠ¶æ€çš„å€¼ï¼Œå³ $f_{i,a_1,a_2,a_3,a_4}$ï¼Œå…¶ä¸­ç¬¬ä¸€ç»´è¡¨ç¤ºå½“å‰çš„ä½ç½®ï¼Œåé¢å››ç»´è¡¨ç¤ºåˆ†åˆ«ç”¨äº†å¤šå°‘ç‰Œã€‚</p>
<p>ç„¶åæˆ‘ä»¬å‘ç°ç¬¬ä¸€ç»´å…¶å®æ²¡æœ‰å¿…è¦ï¼Œå› ä¸ºå½“å‰æ‰€åœ¨çš„ä½ç½®å¯ä»¥é€šè¿‡åå››ç»´æ±‚è§£ï¼Œäºæ˜¯å°±å¯ä»¥å‡å°‘æšä¸¾ï¼Œæ­¤è°“ä¹‹<strong>å»é™¤å†—ä½™çŠ¶æ€</strong>ã€‚</p>
<p>è‡³æ­¤çš„ä¸€äº›æŠ€å·§ï¼š</p>
<ol>
<li>çŠ¶æ€è®¾è®¡ï¼ˆæ¯æœ‰ä¸€ä¸ªå˜é‡å¯¹åº”ä¸€ä¸ªç»´åº¦ï¼‰</li>
<li>å¢åŠ ç»´åº¦</li>
<li>æ±‚æ–¹æ¡ˆæ•°</li>
<li>æ”¹å˜æšä¸¾é¡ºåº</li>
<li>æ¶ˆé™¤å†—ä½™çŠ¶æ€</li>
</ol>
<h1 id="èƒŒåŒ…DP"><a href="#èƒŒåŒ…DP" class="headerlink" title="èƒŒåŒ…DP"></a>èƒŒåŒ…DP</h1><h2 id="01èƒŒåŒ…"><a href="#01èƒŒåŒ…" class="headerlink" title="01èƒŒåŒ…"></a>01èƒŒåŒ…</h2><ul>
<li>çŠ¶æ€è¡¨ç¤º<ul>
<li>$f_{i,j}$</li>
<li>é›†åˆï¼šæ‰€æœ‰åªä»å‰ $i$ ä¸ªç‰©å“ä¸­é€‰ï¼Œä¸”æ€»ä½“ç§¯ä¸è¶…è¿‡ $j$ çš„é€‰æ³•çš„é›†åˆã€‚</li>
<li>å±æ€§ï¼šæœ€å¤§å€¼&#x2F;æœ€å°å€¼</li>
</ul>
</li>
<li>åˆ’åˆ†ä¾æ®ï¼šç”¨æœ€åä¸€æ­¥æ¥åˆ’åˆ†ã€‚</li>
<li>çŠ¶æ€è®¡ç®—ï¼š<ul>
<li>ä¸é€‰ç¬¬ $i$ ä¸ªç‰©å“çš„æ‰€æœ‰æ–¹æ¡ˆ</li>
<li>é€‰ç¬¬ $i$ ä¸ªç‰©å“çš„æ‰€æœ‰æ–¹æ¡ˆ</li>
</ul>
</li>
</ul>
<p>æœ‰$n$ä»¶ç‰©å“ï¼Œä¸€ä¸ªèƒŒåŒ…ï¼Œæ¯ä¸ªç‰©å“æœ‰é‡é‡å’Œä»·å€¼ï¼Œåœ¨èƒŒåŒ…ä¸è¶…é‡çš„æƒ…å†µä¸‹ï¼Œé—®å¾—åˆ°ä»·å€¼çš„æœ€å¤§å€¼ã€‚</p>
<ol>
<li>è®¾è®¡DPçŠ¶æ€</li>
</ol>
<p>æˆ‘ä»¬ä»¤$dp_{i,j}$ä»£åœ¨å‰$i$ä¸ªç‰©å“ä¸­è¿›è¡Œé€‰æ‹©ï¼Œç”¨äº†$j$çš„ä½“ç§¯æ‰€å¾—åˆ°çš„æœ€å¤§ä»·å€¼ä¹‹å’Œã€‚</p>
<ol start="2">
<li>è½¬ç§»æ–¹ç¨‹</li>
</ol>
<p>ç¬¬$i$ä¸ªç‰©ä½“é‡é‡ä¸º$w_i$ï¼Œä»·å€¼ä¸º$v_i$ã€‚</p>
<p>è€ƒè™‘å®Œäº†å‰$i-1$ä»¶ç‰©å“åï¼Œæˆ‘ä»¬å¼€å§‹è€ƒè™‘ç¬¬$i$ä»¶ç‰©å“ï¼Œè¿™ä»¶ç‰©å“å¯ä»¥é€‰ä¹Ÿå¯ä»¥ä¸é€‰ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨è¿™ä¸¤ç§æƒ…å†µä¸­å–è¾ƒå¤§å€¼ã€‚</p>
<p><code>dp[i][j]=max(dp[i-1][j],dp[i-1][j-w[i]]+v[i])</code></p>
<ol start="3">
<li>æ»šåŠ¨ä¼˜åŒ–</li>
</ol>
<p>æˆ‘ä»¬å‘ç°æ›´æ–°ç¬¬$i$ä¸ªç‰©å“çš„æ—¶å€™åªä¼šç”¨åˆ°ç¬¬$i-1$è¡Œï¼Œä¹‹å‰çš„éƒ½ç›¸å½“äºæ²¡æœ‰ç”¨äº†ï¼Œæ‰€ä»¥å°±å¯ä»¥æŠŠç¬¬ä¸€ç»´å»æ‰ï¼Œç”¨æ—§çŠ¶æ€ä»£è¡¨$i-1$è¡Œï¼Œç”¨æ–°çŠ¶æ€ä»£è¡¨ç¬¬$i$è¡Œï¼Œæ›´æ–°æ–°çŠ¶æ€çš„æ—¶å€™å°±æ˜¯æ‹¿æ—§æ—¶çš„è‡ªå·±æ¥æ›´æ–°ç°åœ¨çš„è‡ªå·±ï¼Œæ ¹æ®è½¬ç§»æ–¹ç¨‹ï¼Œæˆ‘ä»¬å‘ç°å…¶å®æ˜¯æ‹¿ä½“ç§¯è¾ƒå°çš„çŠ¶æ€é€’æ¨ä¸ºä½“ç§¯è¾ƒå¤§çš„çŠ¶æ€ï¼Œæ‰€ä»¥æˆ‘ä»¬æ›´æ–°çš„æ—¶å€™éœ€è¦ä¿ç•™æ—§çŠ¶æ€ï¼Œæ‰€ä»¥ä»åå‘å‰éå†ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯ç”¨æ¥æ›´æ–°æ–°çŠ¶æ€çš„çŠ¶æ€å…¨éƒ¨éƒ½æ˜¯æ—§çŠ¶æ€ï¼›è‹¥æ­£å‘éå†ï¼Œä½“ç§¯å°çš„æ—§çŠ¶æ€å·²ç»è¢«æ›´æ–°ä¸ºæ–°çŠ¶æ€ï¼Œåé¢æ›´æ–°ä½“ç§¯å¤§çš„æ–°çŠ¶æ€ä¼šç”¨è¢«è¦†ç›–çš„æ–°çŠ¶æ€æ¥æ›´æ–°ï¼Œå¯¼è‡´è€ƒè™‘äº†ç¬¬$i$ä¸ªç‰©å“åæ¥ç€åˆè€ƒè™‘äº†ç¬¬$i$ä¸ªç‰©å“ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´æ¯ä¸ªç‰©å“ä¼šè¢«æ‹¿å¤šæ¬¡ï¼ˆæ— ç©·èƒŒåŒ…ï¼‰ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> j=m;j&gt;=w[i];j--)</span><br><span class="line">		f[j]=<span class="built_in">max</span>(f[j],f[j-w[i]]+v[i]);</span><br></pre></td></tr></table></figure></div>

<p>ç¬¬äºŒå±‚å¾ªç¯çš„ç»ˆæ­¢æ¡ä»¶ä¸º<code>j&gt;=a[i]</code>ï¼Œå› ä¸ºä¹‹åæ— æ³•è½¬ç§»ï¼Œä¹Ÿå°±æ˜¯æ— æ³•è£…ä¸‹ç¬¬$i$ä»¶ç‰©å“ã€‚</p>
<p><font color=#ec37a1><b>ä¹ é¢˜ï¼š</b></font></p>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P1060" >P1060<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e5</span>;</span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="type">int</span> x[N],f[N],v[N],p[N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;v[i],&amp;p[i]);</span><br><span class="line">        x[i]=v[i]*p[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=n;j&gt;=v[i];j--)</span><br><span class="line">        &#123;</span><br><span class="line">            f[j]=<span class="built_in">max</span>(f[j],f[j-v[i]]+x[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,f[n]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P1048" >P1048<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="comment">//èƒŒåŒ…ï¼šNä¸ªç‰©å“ï¼ŒèƒŒåŒ…ä½“ç§¯ä¸ºMï¼Œç¬¬iä¸ªç‰©å“ä»·å€¼ä¸ºWiï¼Œä½“ç§¯ä¸ºVi;</span></span><br><span class="line"><span class="comment">//Viä¹‹å’Œ&lt;=M,ä½¿å¾—ä»·å€¼æœ€å¤§ï¼Œé—®ï¼šæœ€å¤§çš„ä»·å€¼ä¹‹å’Œ; </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> f[<span class="number">2005</span>];<span class="comment">//f[105][2005];</span></span><br><span class="line"><span class="type">int</span> w[<span class="number">100000</span>];</span><br><span class="line"><span class="type">int</span> v[<span class="number">100000</span>];</span><br><span class="line"><span class="comment">//f[i][j]å˜åŒ–é‡ï¼šå‰iä¸ªç‰©å“å·²ç»é€‰å¥½äº†ï¼Œæ­¤æ—¶ç”¨äº†jçš„ä½“ç§¯ ï¼Œæ‰€èƒ½è·å¾—çš„æœ€å¤§ä»·å€¼ï¼›</span></span><br><span class="line"><span class="comment">//ç¬¬i+1ä¸ªç‰©å“æ”¾ä¸æ”¾è¿›èƒŒåŒ…ï¼Ÿ</span></span><br><span class="line"><span class="comment">//f[i][j]------&gt;f[i+1][j]</span></span><br><span class="line"><span class="comment">//è½¬ç§»f[i][j]-----&gt;f[i+1][j+Vi+1];+Wi+1;</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> n,m;</span><br><span class="line">	cin&gt;&gt;n;<span class="comment">//èƒŒåŒ…å¤§å° </span></span><br><span class="line">	cin&gt;&gt;m;<span class="comment">//è¯ç‰©æ•°ç›® </span></span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">		cin&gt;&gt;v[i]&gt;&gt;w[i];</span><br><span class="line"><span class="comment">//	for(int i=0;i&lt;=m;i++)//å‰iä¸ªç‰©å“å·²ç»å†³å®šå¥½æ”¾ä¸æ”¾è¿›èƒŒåŒ… ///O(nm)</span></span><br><span class="line"><span class="comment">//		for(int j=0;j&lt;=n;j++)//å½“å‰ç”¨äº†jçš„ä½“ç§¯ </span></span><br><span class="line"><span class="comment">//		&#123;</span></span><br><span class="line"><span class="comment">//		//è€ƒè™‘i+1æ”¾ä¸æ”¾</span></span><br><span class="line"><span class="comment">//		//Yes </span></span><br><span class="line"><span class="comment">//			f[i+1][j+v[i+1]]=max(f[i+1][j+v[i+1]],f[i][j]+w[i+1]); </span></span><br><span class="line"><span class="comment">//		//if(j&gt;=v[i])////åˆ¤æ–­æ•°ç»„è¶Šä¸è¶Šç•Œ,å¦‚æœä¸è¶Šç•Œï¼Œé‚£ä¹ˆå¯ä»¥é€‰ç¬¬iä¸ª </span></span><br><span class="line"><span class="comment">//		//	f[i][j]=max(f[i-1][j]//ä¸é€‰ç¬¬iä¸ª,f[i-1][j-v[i]]+w[i]//é€‰ç¬¬iä¸ª);</span></span><br><span class="line"><span class="comment">//		//No</span></span><br><span class="line"><span class="comment">//			f[i+1][j]=max(f[i+1][j],f[i][j]);//å¾…å†™</span></span><br><span class="line"><span class="comment">//		//else //ä¸èƒ½é€‰ç¬¬iä¸ª </span></span><br><span class="line"><span class="comment">//		//	f[i][j]=max(f[i][j],f[i-1][j]);////åˆ«äººæ±‚è‡ªå·± </span></span><br><span class="line"><span class="comment">//		</span></span><br><span class="line"><span class="comment">//		&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//	for(int j=1;j&lt;=n;j++)</span></span><br><span class="line"><span class="comment">//	&#123;</span></span><br><span class="line"><span class="comment">//		ans=max(f[m][j],ans);</span></span><br><span class="line"><span class="comment">////		cout&lt;&lt;f[m][j]&lt;&lt;&#x27; &#x27;&lt;&lt;j&lt;&lt;endl;</span></span><br><span class="line"><span class="comment">//	&#125;</span></span><br><span class="line">		</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)<span class="comment">//æ»šåŠ¨æ•°ç»„ä¼˜åŒ–ï¼Œç”¨æ–°çš„è¦†ç›–æ—§çš„ </span></span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> j=n;j&gt;=v[i];j--)</span><br><span class="line">			f[j]=<span class="built_in">max</span>(f[j],f[j-v[i]]+w[i]);</span><br><span class="line">	cout&lt;&lt;f[n];</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="æ±‚æ–¹æ¡ˆæ•°"><a href="#æ±‚æ–¹æ¡ˆæ•°" class="headerlink" title="æ±‚æ–¹æ¡ˆæ•°"></a>æ±‚æ–¹æ¡ˆæ•°</h3><p>å†å¼€ä¸€ä¸ª $g_{i,j}$ ä»£è¡¨å½“å‰çŠ¶æ€çš„æ–¹æ¡ˆæ•°</p>
<p><a class="link"   href="https://www.acwing.com/problem/content/11/" >A11<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1010</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MOD = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> f[N], g[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">0xc0</span>, <span class="built_in">sizeof</span>(f));</span><br><span class="line">    f[<span class="number">0</span>] = <span class="number">0</span>; <span class="comment">// å®¹é‡æ°å¥½ä¸º i çš„æœ€å¤§ä»·å€¼</span></span><br><span class="line">    g[<span class="number">0</span>] = <span class="number">1</span>; <span class="comment">// çš„æ–¹æ¡ˆæ•°</span></span><br><span class="line">    <span class="comment">// æ³¨æ„é¢˜ç›®è¦æ±‚çš„æ˜¯ä¸è¶…è¿‡ i ä½“ç§¯ å› æ­¤è¦æ‰¾ä¸€ä¸ªæœ€å¤§å€¼</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> v, w;</span><br><span class="line">        cin &gt;&gt; v &gt;&gt; w;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = m; j &gt;= v; j--)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> maxv = <span class="built_in">max</span>(f[j], f[j - v] + w);</span><br><span class="line">            <span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span>(maxv == f[j]) cnt += g[j];</span><br><span class="line">            <span class="keyword">if</span>(maxv == f[j - v] + w) cnt += g[j - v];</span><br><span class="line">            g[j] = cnt % MOD;</span><br><span class="line">            f[j] = maxv;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= m; i++) res = <span class="built_in">max</span>(res, f[i]);</span><br><span class="line">    <span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= m; i++)</span><br><span class="line">        <span class="keyword">if</span>(res == f[i])</span><br><span class="line">            cnt = (cnt + g[i]) % MOD;</span><br><span class="line">    cout &lt;&lt; cnt &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="æ±‚æ–¹æ¡ˆ"><a href="#æ±‚æ–¹æ¡ˆ" class="headerlink" title="æ±‚æ–¹æ¡ˆ"></a>æ±‚æ–¹æ¡ˆ</h3><p>å¼€ä¸€ä¸ª $pre_{i,j}$ è¡¨ç¤º $i,j$ è¿™ä¸ªçŠ¶æ€æ˜¯ç”± $i-1$ çš„å“ªä¸ªçŠ¶æ€è½¬ç§»è€Œæ¥å°±å¥½ã€‚</p>
<p><a class="link"   href="https://www.acwing.com/problem/content/12/" >A12<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1005</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> f[N][N];</span><br><span class="line"><span class="type">int</span> v[N], w[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) cin &gt;&gt; v[i] &gt;&gt; w[i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = n; i &gt;= <span class="number">1</span>; i--)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt;= m; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            f[i][j] = f[i + <span class="number">1</span>][j];</span><br><span class="line">            <span class="keyword">if</span>(j &gt;= v[i]) f[i][j] = <span class="built_in">max</span>(f[i][j], f[i + <span class="number">1</span>][j - v[i]] + w[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="type">int</span> j = m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">if</span>(j &gt;= v[i] &amp;&amp; f[i][j] == f[i + <span class="number">1</span>][j - v[i]] + w[i])</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; i &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">            j -= v[i];</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><a class="link"   href="https://www.acwing.com/problem/content/1015/" >A1013<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">11</span>, M = <span class="number">17</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> f[N][M];</span><br><span class="line"><span class="type">int</span> w[N][M];</span><br><span class="line"><span class="type">int</span> way[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; j++)</span><br><span class="line">            cin &gt;&gt; w[i][j];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt;= m; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            f[i][j] = f[i - <span class="number">1</span>][j];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k = <span class="number">1</span>; k &lt;= j; k++)</span><br><span class="line">                f[i][j] = <span class="built_in">max</span>(f[i][j], f[i - <span class="number">1</span>][j - k] + w[i][k]);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="type">int</span> k = m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = n; i &gt;= <span class="number">1</span>; i--)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt;= k; j++)</span><br><span class="line">            <span class="keyword">if</span>(f[i][k] == f[i - <span class="number">1</span>][k - j] + w[i][j])</span><br><span class="line">            &#123;</span><br><span class="line">                way[i] = j;</span><br><span class="line">                k -= j;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">    cout &lt;&lt; f[n][m] &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) cout &lt;&lt; i &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; way[i] &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h2 id="äºŒç»´è´¹ç”¨çš„èƒŒåŒ…é—®é¢˜"><a href="#äºŒç»´è´¹ç”¨çš„èƒŒåŒ…é—®é¢˜" class="headerlink" title="äºŒç»´è´¹ç”¨çš„èƒŒåŒ…é—®é¢˜"></a>äºŒç»´è´¹ç”¨çš„èƒŒåŒ…é—®é¢˜</h2><ul>
<li>çŠ¶æ€è¡¨ç¤º<ul>
<li>$f_{i,j,k}$</li>
<li>é›†åˆï¼šæ‰€æœ‰åªä»å‰ $i$ ä¸ªç‰©å“ä¸­é€‰ï¼Œå¹¶ä¸”æ€»ä½“ç§¯ä¸è¶…è¿‡ $j$ ï¼Œæ€»é‡é‡ä¸è¶…è¿‡ $k$ çš„æ‰€æœ‰é€‰æ³•ã€‚</li>
<li>å±æ€§ï¼šæœ€å¤§å€¼</li>
</ul>
</li>
<li>çŠ¶æ€è®¡ç®—<ul>
<li>æœ€åä¸€æ­¥ï¼šæœ€åä¸€ä¸ªç‰©å“ï¼Œè¦ä¹ˆåŒ…å«è¦ä¹ˆä¸åŒ…å«ã€‚</li>
<li>ä¸åŒ…å«ï¼š$f_{i-1,j,k}$</li>
<li>åŒ…å«ï¼š$f_{i-1,j-v_i,k-m_i}+w_i$</li>
</ul>
</li>
</ul>
<h2 id="åˆå§‹åŒ–åˆ†ç±»"><a href="#åˆå§‹åŒ–åˆ†ç±»" class="headerlink" title="åˆå§‹åŒ–åˆ†ç±»"></a>åˆå§‹åŒ–åˆ†ç±»</h2><ul>
<li>åˆå§‹åŒ–åˆ†ç±»<ul>
<li>ä½“ç§¯æœ€å¤šæ˜¯ $j$<ul>
<li>æ–¹æ¡ˆæ•°ï¼š$f_{0,i}&#x3D;1,i\in{[0,m]}\quad|\quad f_{1}&#x3D;1$</li>
<li>æœ€å¤§ä»·å€¼ï¼š$f_{i,k}&#x3D;0,i\in[0,n],k\in[0,m]\quad|\quad f_i&#x3D;0,i\in[0,m]$</li>
</ul>
</li>
<li>ä½“ç§¯æ°å¥½æ˜¯ $j$<ul>
<li>æ–¹æ¡ˆæ•°ï¼š$f_{0,0}&#x3D;1\quad|\quad f_0&#x3D;1$</li>
<li>æœ€å¤§ä»·å€¼ï¼š$f_{0,0}&#x3D;0,f_{0,i}&#x3D;-\infty,i\in[1,\infty]\quad|\quad f_0&#x3D;0,f_i&#x3D;-\infty$</li>
<li>æœ€å°ä»·å€¼ï¼š$f_{0,0}&#x3D;0,f_{0,i}&#x3D;\infty,i\in[1,\infty]\quad|\quad f_0&#x3D;0,f_i&#x3D;\infty$</li>
</ul>
</li>
<li>ä½“ç§¯è‡³å°‘æ˜¯ $j$<ul>
<li>æ–¹æ¡ˆæ•°ï¼š$f_{0,0}&#x3D;1\quad|\quad f_0&#x3D;1$</li>
<li>æœ€å°ä»·å€¼ï¼š$f_{0,0}&#x3D;0,f_{0,i}&#x3D;\infty,i\in[1,\infty]\quad|\quad f_0&#x3D;0,f_i&#x3D;\infty$</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>ä»é›†åˆçš„è§’åº¦è€ƒè™‘ï¼Œè€ƒè™‘å‰ 0 ä¸ªç‰©å“ä¸”èŠ±è´¹ä½“ç§¯ä¸º 0 è¿™ä¸€ä¸ªå…ƒç´ ï¼Œæˆ–è€…è¯´æ˜¯çŠ¶æ€ï¼Œåœ¨ä¸åŒé›†åˆçš„å®šä¹‰ä¸­å¯ä»¥è¢«åˆ’åˆ†åˆ°å“ªä¸ªé›†åˆï¼Œå‰©ä¸‹çš„é›†åˆçš„çŠ¶æ€æ˜¯å¦‚ä½•ã€‚</p>
<hr>
<p><a class="link"   href="https://www.acwing.com/problem/content/1022/" >AcWing1020 æ½œæ°´å‘˜<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<ul>
<li>çŠ¶æ€è¡¨ç¤º<ul>
<li>é›†åˆï¼šæ‰€æœ‰ä»å‰ $i$ ä¸ªç‰©å“ä¸­é€‰ï¼Œä¸”æ°§æ°”è‡³å°‘æ˜¯ $j$ï¼Œä½†å…¶è‡³å°‘æ˜¯ $k$ çš„æ‰€æœ‰é€‰æ³•ã€‚</li>
<li>å±æ€§ï¼šæœ€å°å€¼</li>
</ul>
</li>
<li>çŠ¶æ€è®¡ç®—<ul>
<li>åˆ’åˆ†ä¾æ®ï¼šæœ€åä¸€ä¸ªç‰©å“çš„é€‰æ‹©æƒ…å†µã€‚</li>
<li>æ‰€æœ‰ä¸å«ç¬¬ $i$ ä¸ªç‰©å“çš„æ‰€æœ‰é€‰æ³•ï¼š$f_{i-1,j,k}$</li>
<li>æ‰€æœ‰åŒ…å«ç¬¬ $i$ ä¸ªç‰©å“çš„æ‰€æœ‰é€‰æ³•ï¼š$f_{i-1,j-v_1,k-v_2}+w+i$</li>
</ul>
</li>
</ul>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">22</span>, M = <span class="number">80</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m, k;</span><br><span class="line"><span class="type">int</span> f[N][M];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m &gt;&gt; k;</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">0x3f</span>, <span class="built_in">sizeof</span>(f));</span><br><span class="line">    f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(k--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> v1, v2, w;</span><br><span class="line">        cin &gt;&gt; v1 &gt;&gt; v2 &gt;&gt; w;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = n; j &gt;= <span class="number">0</span>; j--)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k = m; k &gt;= <span class="number">0</span>; k--) <span class="comment">// è‡³å°‘æ˜¯ j / k</span></span><br><span class="line">                f[j][k] = <span class="built_in">min</span>(f[j][k], f[<span class="built_in">max</span>(<span class="number">0</span>, j - v1)][<span class="built_in">max</span>(<span class="number">0</span>, k - v2)] + w);</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; f[n][m] &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="æ— ç©·èƒŒåŒ…"><a href="#æ— ç©·èƒŒåŒ…" class="headerlink" title="æ— ç©·èƒŒåŒ…"></a>æ— ç©·èƒŒåŒ…</h2><p>æŒ‰ç…§ç›´è§‚çš„æƒ³æ³•ï¼Œé‚£å°±å†æšä¸¾ä¸€ä¸ª $k$  è¡¨ç¤ºè¿™ä¸ªç‰©å“é€‰å¤šå°‘ä¸ªã€‚</p>
<p>ä½†è¿™æ ·å¤æ‚åº¦æ˜¯ $O(n^3)$ çš„ï¼Œæ‰€ä»¥è€ƒè™‘ä¼˜åŒ–ã€‚</p>
<p>å¯¹æ¯”01èƒŒåŒ…ï¼Œæœ€å¤§çš„ä¸åŒå°±æ˜¯å®ƒå¯ä»¥é€šè¿‡è‡ªå·±æ¥æ›´æ–°è‡ªå·±ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦åœ¨åŸæ¥çš„åŸºç¡€ä¸ŠåŠ ä¸Šè¿™æ ·ä¸€å¥è¯ï¼š</p>
<p>å®ƒå¯ä»¥è‡ªå·±æ›´æ–°è‡ªå·±ã€‚</p>
<p>è‡ªå·±æœ€åˆæ²¡é€‰ç¬¬ $i$ ä¸ªï¼Œç„¶åå¯ä»¥é€‰ä¸€ä¸ªã€ä¸¤ä¸ªã€ä¸‰ä¸ªã€å››ä¸ªâ€¦â€¦</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=m;j++)</span><br><span class="line">	&#123;</span><br><span class="line">		f[i][j]=f[i<span class="number">-1</span>][j];</span><br><span class="line">-		<span class="keyword">if</span>(j&gt;=v[i]) f[i][j]=<span class="built_in">max</span>(f[i][j],f[i<span class="number">-1</span>][j-w[i]]+v[i]);</span><br><span class="line">+		<span class="keyword">if</span>(j&gt;=v[i]) f[i][j]=<span class="built_in">max</span>(f[i][j],f[i][j-w[i]]+v[i]);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure></div>

<p>å¾ˆç®€å•ï¼Œå°†æ»šåŠ¨ä¼˜åŒ–çš„ç¬¬äºŒç»´æ”¹ä¸ºæ­£å‘æšä¸¾å³å¯ï¼Œè§£é‡Šè§ä¸Šï¼›</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> j=a[i];j&lt;=m;j++)</span><br><span class="line">		f[j]=<span class="built_in">max</span>(f[j],f[j-w[i]]+v[i]);</span><br></pre></td></tr></table></figure></div>

<p>ç­‰æ•ˆæ›¿æ¢ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202310270855546.webp"
                      alt="image.png"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202310270855575.webp"
                      alt="image.png"
                ></p>
<h3 id="æ±‚æ–¹æ¡ˆæ•°-1"><a href="#æ±‚æ–¹æ¡ˆæ•°-1" class="headerlink" title="æ±‚æ–¹æ¡ˆæ•°"></a>æ±‚æ–¹æ¡ˆæ•°</h3><ul>
<li>çŠ¶æ€è¡¨ç¤º<ul>
<li>é›†åˆï¼šæ‰€æœ‰åªä»å‰ $i$ ä¸ªç‰©å“ä¸­é€‰ï¼Œä¸”æ€»ä½“ç§¯æ°å¥½æ˜¯ $j$ çš„æ–¹æ¡ˆçš„é›†åˆã€‚</li>
<li>å±æ€§ï¼šæ•°é‡</li>
</ul>
</li>
<li>çŠ¶æ€è®¡ç®—<ul>
<li>æ ¹æ®ç¬¬ $i$ ä¸ªç‰©å“é€‰å‡ ä¸ªæ¥åˆ’åˆ†é›†åˆã€‚</li>
<li>0 ä¸ªï¼š$f_{i-1,j}$</li>
<li>k ä¸ªï¼š$f_{i-1,j-k\times v_i}$</li>
</ul>
</li>
</ul>
<p>$$<br>f_{i,j}&#x3D;f_{i-1,j}+f_{i-1,j-v_i\times{k}}<br>$$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202310291102771.webp"
                      alt="image.png"
                ></p>
<p>è¿™é‡Œå¯ä»¥ç›´æ¥æ›¿æ¢ã€‚</p>
<p>$$<br>f_{i,j} &#x3D; f_{i-1,j}+f_{i,j-v}<br>$$</p>
<p>è¿™æ˜¯é€šè¿‡å®ƒä»¬çš„å±‚å±‚é€’æ¨å…³ç³»å¾—å‡ºçš„ã€‚</p>
<p><font color=#ec37a1><b>ä¹ é¢˜ï¼š</b></font></p>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P1616" >P1616<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//w[i]ä»·å€¼</span></span><br><span class="line"><span class="comment">//v[i]èŠ±è´¹</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1000</span><span class="number">+5</span>,M=<span class="number">100000</span><span class="number">+5</span>;</span><br><span class="line"><span class="type">int</span> n,m,w[N],v[N],f[N][M];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>,&amp;m,&amp;n);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>,&amp;w[i],&amp;v[i]);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=m;j++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(j&gt;=v[i])</span><br><span class="line">				f[i][j]=<span class="built_in">max</span>(f[i<span class="number">-1</span>][j],f[i][j-v[i]]+w[i]);</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				f[i][j]=f[i<span class="number">-1</span>][j];</span><br><span class="line">		&#125;</span><br><span class="line"> 	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<h2 id="æœ‰é™èƒŒåŒ…"><a href="#æœ‰é™èƒŒåŒ…" class="headerlink" title="æœ‰é™èƒŒåŒ…"></a>æœ‰é™èƒŒåŒ…</h2><p><a class="link"   href="https://www.luogu.com.cn/problem/P1776" >P1776 å®ç‰©ç­›é€‰<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202310270931176.webp"
                      alt="image.png"
                ></p>
<p>æ¯æ¬¡ç›¸å½“äºæ±‚ä¸€ä¸ªé•¿åº¦ä¸º $s$ çš„çª—å£çš„æœ€å¤§å€¼ï¼Œå¹¶ä¸”æœ‰ $w$ çš„åç§»é‡ï¼Œè¿™ä¸ªå¯ä»¥é€šè¿‡ä¸€ä¸ªå•è°ƒé˜Ÿåˆ—æ¥ç»´æŠ¤ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100010</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> f[N], g[N], q[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> v, w, s;</span><br><span class="line">        cin &gt;&gt; w &gt;&gt; v &gt;&gt; s;</span><br><span class="line">        <span class="built_in">memcpy</span>(g, f, <span class="built_in">sizeof</span>(f)); <span class="comment">// i - 1 çš„çŠ¶æ€</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; v; j++) <span class="comment">// ä½™æ•°</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> hh = <span class="number">0</span>, tt = <span class="number">-1</span>; <span class="comment">// å•è°ƒé€’å‡çš„å•è°ƒé˜Ÿåˆ—</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k = j; k &lt;= m; k += v)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(hh &lt;= tt &amp;&amp; q[hh] &lt; k - s * v) hh++; <span class="comment">// é˜Ÿå¤´è¶…å‡ºäº†èŒƒå›´ å‡ºé˜Ÿ</span></span><br><span class="line">                <span class="keyword">if</span>(hh &lt;= tt) f[k] = <span class="built_in">max</span>(f[k], g[q[hh]] + (k - q[hh]) / v * w); <span class="comment">// æ»‘åŠ¨çª—å£æ¯ç§»åŠ¨ä¸€ç‚¹å°±æœ‰ w çš„åç§»é‡</span></span><br><span class="line">                <span class="keyword">while</span>(hh &lt;= tt &amp;&amp; g[q[tt]] - (q[tt] - j) / v * w &lt;= g[k] - (k - j) / v * w) tt--; <span class="comment">// å¼¹å‡ºæ¯”å®ƒå°çš„é˜Ÿå°¾</span></span><br><span class="line">                q[++tt] = k; <span class="comment">// ä¸‹æ ‡</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; f[m] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<p>ä¸æ— ç©·èƒŒåŒ…ç›¸æ¯”ï¼Œæ¯ä¸ªç‰©å“é€‰å–æ¬¡æ•°æœ‰ä¸€ä¸ªä¸Šé™ã€‚</p>
<p>è€æ ·å­æˆ‘ä»¬å¯ä»¥é€šè¿‡æšä¸¾ç¬¬ä¸‰ç»´æ¥è§£å†³ï¼Œæˆ–è€…åŠ ç»´æ¥åšæ— ç©·èƒŒåŒ…æ€ä¹ˆä¼˜åŒ–å‘¢ï¼Ÿ</p>
<p>é‚£å°±å¯ä»¥æŠŠè¿™äº›ä¸åŒç§ç‰©å“å…¨éƒ¨æ‘Šå¼€ï¼Œå˜æˆä¸€ä¸ªä¸€ä¸ªçš„ç‰©å“ï¼Œè¿™æ ·å°±å˜æˆ01èƒŒåŒ…äº†ã€‚</p>
<p>ä½†è¿™æ ·è¿˜æ˜¯ $O(n^3)$ çš„ï¼Œæˆ‘å¸Œæœ›ç‰©å“æ€»æ•°å˜å°‘ï¼Œå¯ä»¥æŠŠç‰©å“å°‘æ‹†ä¸€ç‚¹ï¼Œä½¿å¾—è¿™ä¸ªæ‹†åˆ†æ»¡è¶³é€‰å–è‹¥å¹²æ•°åŠ èµ·æ¥å¯ä»¥ç­‰äº $0\sim{k}$ ä¸­çš„ä»»ä½•ä¸€ä¸ªæ•°ã€‚</p>
<p>è¿™æ ·ä¸ç®¡é€‰å¤šå°‘ä¸ªç‰©å“éƒ½å¯ä»¥é€šè¿‡æ‹†åˆ†çš„è¿™äº›æ•°ç»„åˆå¾—åˆ°ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202308171640408.webp"
                      alt="image.png"
                ></p>
<p>æ¯”å¦‚è¿™æ ·ï¼Œè¿™æ ·å°±å¯ä»¥æŠŠä»»ä½•ä¸€ä¸ªæ•°æ‹†åˆ†æˆ $logn$ ä¸ªæ•°ï¼Œè¿™æ ·å°±æŠŠå¤æ‚åº¦ä¼˜åŒ–ä¸º $O(n^2logn)$ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, c;</span><br><span class="line"><span class="type">int</span> w[N], v[N], m[N];</span><br><span class="line"><span class="type">int</span> f[N];</span><br><span class="line"><span class="type">int</span> cnt;</span><br><span class="line"><span class="type">int</span> nw[N], nv[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;c);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;v[i], &amp;w[i], &amp;m[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m[i]; j &lt;&lt;= <span class="number">1</span>) <span class="comment">// äºŒè¿›åˆ¶æ‹†åˆ† å°†ç‰©å“æ•°é™ä¸º log çº§åˆ« å³å¯è‡ªç”±ç»„åˆå‡ºå…¨éƒ¨æ”¾æ–¹æ¡ˆ</span></span><br><span class="line">        &#123;</span><br><span class="line">            m[i] -= j;</span><br><span class="line">            nw[++cnt] = w[i] * j;</span><br><span class="line">            nv[cnt] = v[i] * j;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(m[i])</span><br><span class="line">        &#123;</span><br><span class="line">            nw[++cnt] = w[i] * m[i];</span><br><span class="line">            nv[cnt] = v[i] * m[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= cnt; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = c; j &gt;= nw[i]; j--)</span><br><span class="line">        &#123;</span><br><span class="line">            f[j] = <span class="built_in">max</span>(f[j], f[j - nw[i]] + nv[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    cout &lt;&lt; f[c] &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="é™åˆ¶èƒŒåŒ…"><a href="#é™åˆ¶èƒŒåŒ…" class="headerlink" title="é™åˆ¶èƒŒåŒ…"></a>é™åˆ¶èƒŒåŒ…</h2><blockquote>
<p>$n$ ä¸ªç‰©å“ï¼Œ$m$ ä½“ç§¯çš„èƒŒåŒ…ï¼Œ $k$ æ¬¡è¯¢é—®ï¼Œæ¯æ¬¡å¼ºåˆ¶æœ‰ä¸€ä¸ªç‰©å“ä¸èƒ½é€‰ï¼Œé—®æœ€å¤§ä»·å€¼ã€‚<br>$n\le{10^5},m\le{100},k\le{1000}$</p>
</blockquote>
<p>æˆ‘ä»¬æ³¨æ„ $m$ å¾ˆå°ï¼Œè¿™æ˜¯ä¸€ä¸ªåˆ‡å…¥ç‚¹ã€‚</p>
<p>å…ˆæ­£å¸¸ DP ä¸€éï¼Œ$f_{i,j}$ è¡¨ç¤ºå‰ $i$ ä¸ªç‰©å“ç”¨äº† $j$ çš„ä½“ç§¯çš„æœ€å¤§ä»·å€¼ã€‚</p>
<p>å†è¿›è¡Œä¸€æ¬¡ DPï¼Œ$g_{i,j}$ ä»£è¡¨ $i\sim{n}$ å·²ç»è€ƒè™‘å®Œäº†ç”¨äº† $j$ çš„ä½“ç§¯çš„æœ€å¤§ä»·å€¼ã€‚</p>
<p>æ‰€ä»¥æŸ¥è¯¢  $p_1$ æ—¶ï¼Œæšä¸¾ä½“ç§¯ $a,b$ ï¼Œç­”æ¡ˆå°±æ˜¯ $f_{p_1-1,a}+g_{p_1+1,b}$ã€‚</p>
<p>å½“å‰ä¹Ÿå¯ä»¥åˆ†åˆ«ç»´æŠ¤ä¸€ä¸ªå‰ç¼€æœ€å¤§å€¼ï¼Œè¿™æŸ¥è¯¢çš„æ—¶å€™åªéœ€è¦æšä¸¾ä¸€ä¸ªå˜é‡å³å¯ï¼Œå¦‚ $a,m-a$ã€‚</p>
<p>èƒŒåŒ… DP çš„æœ¬è´¨æ˜¯ä¸æ–­å¾€é‡ŒåŠ ç‰©å“ï¼Œåœ¨åŠ ç‰©å“çš„ DP é‡Œè€ƒè™‘åˆ ç‰©å“å¾ˆä¸å¥½åšï¼Œé‚£ä¸å¦‚åˆ†ä¸º<strong>ä¸¤æ®µç´¯åŠ </strong>ã€‚</p>
<h2 id="åˆ†ç»„èƒŒåŒ…"><a href="#åˆ†ç»„èƒŒåŒ…" class="headerlink" title="åˆ†ç»„èƒŒåŒ…"></a>åˆ†ç»„èƒŒåŒ…</h2><p>åˆ†ç»„èƒŒåŒ…ï¼Œé€šä¿—çš„è®²å°±æ˜¯ï¼Œç»™ä½ $N$ç»„ç‰©å“ï¼Œç„¶åæ¯ä¸€ç»„ä½ è‡³å¤šé€‰æ‹©ä¸€ä¸ªç‰©å“(<strong>ä¹Ÿå¯ä»¥ä¸é€‰</strong>),æ¯ä¸ªç‰©å“éƒ½æœ‰è‡ªå·±çš„ä½“ç§¯å’Œä»·å€¼ï¼Œç°åœ¨ç»™ä½ ä¸€ä¸ªå®¹é‡Œä¸ºMçš„èƒŒåŒ…ï¼Œè®©ä½ ç”¨è¿™ä¸ªèƒŒåŒ…è£…ç‰©å“ï¼Œä½¿å¾—ç‰©å“ä»·å€¼æ€»å’Œæœ€å¤§ã€‚</p>
<p>é‚£ä¹ˆå°±å¯ä»¥ç»™å®ƒä»¬ç¼–å·äº†ï¼Œç„¶åå®šä¹‰ä¸€ä¸ªæ•°ç»„æ¥å­˜å‚¨ç¬¬$i$ç»„ç¬¬$j$ä¸ªçš„ç¼–å·ï¼Œç„¶åæ­£å¸¸å­˜å‚¨ä»·å€¼ã€é‡é‡ç­‰ã€‚</p>
<p>æšä¸¾æ—¶ï¼Œç¬¬ä¸€ç»´æ˜¯ç»„æ•°ï¼Œç¬¬äºŒç»´æ˜¯èƒŒåŒ…å®¹é‡ï¼ˆä»å¤§åˆ°å°ï¼‰ï¼Œç¬¬ä¸‰ç»´æ˜¯ç¬¬$i$ç»„çš„ç‰©å“æ•°ï¼Œç„¶ååˆ¤æ–­ä¸‹æ˜¯å¦èƒ½è½¬ç§»ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">f[j]=<span class="built_in">max</span>(f[j],f[j-w[p[i][k]]]+v[p[i][k]]);</span><br></pre></td></tr></table></figure></div>

<p><font color=#ec37a1><b>ä¹ é¢˜ï¼š</b></font></p>
<p><a class="link"   href="http://acm.hdu.edu.cn/showproblem.php?pid=1712" >HDU1712<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">13505</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> M=<span class="number">1007</span>;</span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="type">int</span> x,w[N],v[N],f[N],p[M][M],c[N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;       <span class="comment">/*ç¼–å·åšæ³•ä»¿ç…§P1757*/</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    while(cin&gt;&gt;n&gt;&gt;m)</span></span><br><span class="line"><span class="comment">    &#123;</span></span><br><span class="line"><span class="comment">        if(!n&amp;&amp;!m) break;</span></span><br><span class="line"><span class="comment">        int cnt=0;</span></span><br><span class="line"><span class="comment">        memset(w,0,sizeof(w));</span></span><br><span class="line"><span class="comment">        memset(v,0,sizeof(v));</span></span><br><span class="line"><span class="comment">        memset(f,0,sizeof(f));</span></span><br><span class="line"><span class="comment">        memset(c,0,sizeof(c));</span></span><br><span class="line"><span class="comment">        memset(p,0,sizeof(p));</span></span><br><span class="line"><span class="comment">        for(int i=1;i&lt;=n;i++)//èƒŒåŒ…ç§æ•°</span></span><br><span class="line"><span class="comment">            for(int j=1;j&lt;=m;j++)//ç‰©å“ç¼–å·</span></span><br><span class="line"><span class="comment">                scanf(&quot;%d&quot;,&amp;v[++cnt]),w[cnt]=j,p[i][++c[i]]=cnt;//è®°å½•ç¬¬å‡ ç»„ç¬¬å‡ ä¸ªçš„ç¼–å·ä¸ºi</span></span><br><span class="line"><span class="comment">        for(int i=1;i&lt;=n;i++)</span></span><br><span class="line"><span class="comment">            for(int j=m;j&gt;=0;j--)</span></span><br><span class="line"><span class="comment">                for(int k=1;k&lt;=c[i];k++)</span></span><br><span class="line"><span class="comment">                    if(j&gt;=w[p[i][k]])</span></span><br><span class="line"><span class="comment">                        f[j]=max(f[j],f[j-w[p[i][k]]]+v[p[i][k]]);</span></span><br><span class="line"><span class="comment">        cout&lt;&lt;f[m]&lt;&lt;&#x27;\n&#x27;;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)<span class="comment">//å¯ä»¥æ”¹æˆwhile(cin&gt;&gt;n&gt;&gt;m)</span></span><br><span class="line">    &#123;</span><br><span class="line">        cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">        <span class="keyword">if</span>(!n&amp;&amp;!m) <span class="keyword">break</span>;</span><br><span class="line">        <span class="built_in">memset</span>(f,<span class="number">0</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=m;j++)</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;p[i][j]);<span class="comment">//è¿™é‡Œçš„pä»£è¡¨åœ¨iè¯¾ç¨‹èŠ±jå¤©å­¦ä¹ æ‰€è·å¾—çš„ä»·å€¼</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="comment">//æšä¸¾ç»„æ•°</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=m;j&gt;=<span class="number">0</span>;j--)<span class="comment">//æšä¸¾èƒŒåŒ…ä½“ç§¯</span></span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>;k&lt;=m;k++)<span class="comment">//æšä¸¾æ¯ç»„çš„ç‰©ä½“</span></span><br><span class="line">                    <span class="keyword">if</span>(j&gt;=k)<span class="comment">//ç¬¬kå·ç‰©ä½“çš„ä½“ç§¯ä¸ºk</span></span><br><span class="line">                        f[j]=<span class="built_in">max</span>(f[j],f[j-k]+p[i][k]);</span><br><span class="line">        cout&lt;&lt;f[m]&lt;&lt;<span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    &#125;   </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="æ··åˆèƒŒåŒ…"><a href="#æ··åˆèƒŒåŒ…" class="headerlink" title="æ··åˆèƒŒåŒ…"></a>æ··åˆèƒŒåŒ…</h2><p><a class="link"   href="https://www.acwing.com/problem/content/7/" >A7<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1010</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> f[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> v, w, s;</span><br><span class="line">        cin &gt;&gt; v &gt;&gt; w &gt;&gt; s;</span><br><span class="line">        <span class="keyword">if</span>(s == <span class="number">0</span>) <span class="comment">// å®Œå…¨</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = v; j &lt;= m; j++)</span><br><span class="line">                f[j] = <span class="built_in">max</span>(f[j], f[j - v] + w);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(s == <span class="number">-1</span>) s = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k = <span class="number">1</span>; k &lt;= s; k &lt;&lt;= <span class="number">1</span>) <span class="comment">// äºŒè¿›åˆ¶ä¼˜åŒ–</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> j = m; j &gt;= k * v; j--)</span><br><span class="line">                    f[j] = <span class="built_in">max</span>(f[j], f[j - k * v] + k * w);</span><br><span class="line">                s -= k;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(s) <span class="comment">// å‰©ä½™</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> j = m; j &gt;= s * v; j--)</span><br><span class="line">                    f[j] = <span class="built_in">max</span>(f[j], f[j - s * v] + s * w);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; f[m] &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="ä¾èµ–èƒŒåŒ…"><a href="#ä¾èµ–èƒŒåŒ…" class="headerlink" title="ä¾èµ–èƒŒåŒ…"></a>ä¾èµ–èƒŒåŒ…</h2><p><a class="link"   href="https://www.acwing.com/problem/content/10/" >A10<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">110</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> nxt, to;</span><br><span class="line">&#125;e[N];</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m, cnt;</span><br><span class="line"><span class="type">int</span> v[N], w[N];</span><br><span class="line"><span class="type">int</span> fir[N];</span><br><span class="line"><span class="type">int</span> f[N][N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++cnt].to = v;</span><br><span class="line">    e[cnt].nxt = fir[u];</span><br><span class="line">    fir[u] = cnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = fir[u]; i; i = e[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> vv = e[i].to;</span><br><span class="line">        <span class="built_in">dfs</span>(vv);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = m - v[u]; j &gt;= <span class="number">0</span>; j--) <span class="comment">// æ ¹èŠ‚ç‚¹å¿…é€‰</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k = <span class="number">0</span>; k &lt;= j; k++)</span><br><span class="line">                f[u][j] = <span class="built_in">max</span>(f[u][j], f[u][j - k] + f[vv][k]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = m; i &gt;= v[u]; i--) f[u][i] = f[u][i - v[u]] + w[u];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; v[u]; i++) f[u][i] = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="type">int</span> root;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> p;</span><br><span class="line">        cin &gt;&gt; v[i] &gt;&gt; w[i] &gt;&gt; p;</span><br><span class="line">        <span class="keyword">if</span>(p == <span class="number">-1</span>) root = i;</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">add</span>(p, i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">dfs</span>(root);</span><br><span class="line">    cout &lt;&lt; f[root][m] &lt;&lt; endl; <span class="comment">// è·ŸèŠ‚ç‚¹çš„å­æ ‘ä½“ç§¯ä¸è¶…è¿‡ m çš„æœ€å¤§ä»·å€¼</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="èƒ½é‡çŸ³é—®é¢˜"><a href="#èƒ½é‡çŸ³é—®é¢˜" class="headerlink" title="èƒ½é‡çŸ³é—®é¢˜"></a>èƒ½é‡çŸ³é—®é¢˜</h2><p>åˆ†ææ–¹æ³•ç±»ä¼¼å›½ç‹æ¸¸æˆã€‚</p>
<p><a class="link"   href="https://www.acwing.com/problem/content/736/" >A734<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>åƒç¬¬ $i$ å—èŠ±è´¹çš„æ—¶é—´æ˜¯ $s_i$ ç§’ï¼Œå½“æ—¶å®ƒçš„ä»·å€¼æ˜¯ $Eâ€™_i$ï¼Œæ¯ç§’å®ƒå°†å¤±å» $L_i$ çš„ä»·å€¼ã€‚</p>
<p>é‚£ä¹ˆæˆ‘ä»¬åœ¨åƒ $i$ å’Œ $i+1$ çš„æ—¶å€™ï¼Œè€ƒè™‘é¡ºåºã€‚</p>
<p>å‡å¦‚å…ˆåƒ $i$ï¼Œé‚£ä¹ˆå¾—åˆ°çš„ä»·å€¼å°±æ˜¯ $Eâ€™<em>i+Eâ€™</em>{i+1}-s_i\times{L_{i+1}}$</p>
<p>å‡å¦‚å…ˆåƒ $i + 1$ï¼Œé‚£ä¹ˆå¾—åˆ°çš„ä»·å€¼å°±æ˜¯ $Eâ€™<em>i+Eâ€™</em>{i+1}-s_{i+1}\times{L_i}$</p>
<p>æˆ‘ä»¬å‘ç°åªæœ‰æœ€åä¸€é¡¹ä¸åŒã€‚</p>
<p>å‡å¦‚å…ˆåƒ $i$ æ›´ä¼˜ï¼Œé‚£ä¹ˆå°±è¯´æ˜ $s_i\times{L_{i+1}}&lt;s_{i+1}\times{L_i}$</p>
<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŒ‰ç…§ $\frac{s_i}{L_i}$ ä»å°åˆ°å¤§æ’åºï¼Œä¾æ¬¡é€‰å³å¯ã€‚</p>
<ul>
<li>çŠ¶æ€è¡¨ç¤º<ul>
<li>$f_{i,j}$</li>
<li>é›†åˆï¼šæ‰€æœ‰åªä»å‰ $i$ å—èƒ½é‡çŸ³ä¸­é€‰ï¼Œä¸”æ€»ä½“ç§¯ï¼ˆèŠ±è´¹çš„æ—¶é—´ï¼‰æ°å¥½æ˜¯ $j$ çš„æ–¹æ¡ˆ</li>
<li>å±æ€§ï¼šæœ€å¤§å€¼</li>
</ul>
</li>
<li>çŠ¶æ€è®¡ç®—<ul>
<li>$f_{i,j}&#x3D;max(f_{i-1,j},f_{i-1,j-s_i}+E_i-(j-s_i)\times{L_i})$</li>
</ul>
</li>
</ul>
<p>æ³¨æ„è¿™é‡Œç”±äºè¦é€šè¿‡å½“å‰æ—¶é—´æ¥è®¡ç®—èƒ½é‡çŸ³æŸè€—äº†å¤šå°‘èƒ½é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ $j$ è®°å½•çš„æ˜¯æ°å¥½ä¸ºå½“å‰æ—¶é—´çš„çŠ¶æ€ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10010</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Stone</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> s, e, l;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span> &lt; (<span class="type">const</span> Stone &amp;t) <span class="type">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> s * t.l &lt; t.s * l;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;stone[N];</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> f[N];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> C = <span class="number">1</span>; C &lt;= t; C++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> m = <span class="number">0</span>;</span><br><span class="line">        cin &gt;&gt; n;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> s, e, l;</span><br><span class="line">            cin &gt;&gt; s &gt;&gt; e &gt;&gt; l;</span><br><span class="line">            m += s;</span><br><span class="line">            stone[i] = &#123;s, e, l&#125;;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">sort</span>(stone, stone + n);</span><br><span class="line">        <span class="built_in">memset</span>(f, <span class="number">0xc0</span>, <span class="built_in">sizeof</span>(f)); <span class="comment">// è´Ÿæ— ç©·</span></span><br><span class="line">        f[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> s = stone[i].s, e = stone[i].e, l = stone[i].l;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = m; j &gt;= s; j--)</span><br><span class="line">            &#123;</span><br><span class="line">                f[j] = <span class="built_in">max</span>(f[j], f[j - s] + e - (j - s) * l);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= m; i++) res = <span class="built_in">max</span>(res, f[i]);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Case #%d: %d\n&quot;</span>, C, res);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="çŠ¶æ€æœºæ¨¡å‹"><a href="#çŠ¶æ€æœºæ¨¡å‹" class="headerlink" title="çŠ¶æ€æœºæ¨¡å‹"></a>çŠ¶æ€æœºæ¨¡å‹</h1><p>æè¿°çš„æ˜¯ä¸€ä¸ªè¿‡ç¨‹è€Œéç»“æœã€‚</p>
<p>æŠŠç‚¹æ‰©å±•æˆäº†ä¸€ä¸ªè¿‡ç¨‹ã€‚</p>
<p><a class="link"   href="https://www.acwing.com/problem/content/1051/" >A1049<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>$f_i$ è¡¨ç¤ºæŠ¢åŠ«å‰ $i$ å®¶åº—é“ºçš„æœ€å¤§æ”¶ç›Šã€‚</p>
<p>æ­£å¸¸è½¬ç§»ï¼š$f_i&#x3D;\max(f_{i-1},f_{i-2}+w_i)$</p>
<p>çŠ¶æ€æœºåˆ†æï¼š</p>
<p>å…ˆæ‹†è§£çŠ¶æ€ä¸ºï¼š$f_{i,0},f_{i,1}$ è¡¨ç¤ºæœªé€‰æœ€åä¸€ä¸ªåº—é“ºå’Œé€‰æ‹©æœ€åä¸€ä¸ªåº—é“ºã€‚</p>
<p>é‚£ä¹ˆè¿™ä¸ªçŠ¶æ€æœºæœ€åçš„è½¬ç§»çŠ¶æ€å¦‚å›¾ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202310301553352.webp"
                      alt="image.png|300"
                ></p>
<p>æ¯ä¸€æ­¥å¯¹åº”ä¸€ä¸ªçŠ¶æ€ï¼Œä¼šæ¸…æ™°å¾ˆå¤šã€‚</p>
<p>çŠ¶æ€æœºè¿˜å¯¹åº”ç€ä¸€ä¸ªå…¥å£çš„æ¦‚å¿µï¼Œä¹Ÿå°±æ˜¯åˆå§‹åŒ–ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">8</span>, INF = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> w[N], f[N][<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; n;</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>, f[<span class="number">0</span>][<span class="number">1</span>] = -INF; <span class="comment">// å…¥å£ ä¸å¯èƒ½é€‰ç¬¬ 0 å®¶åº—é“º æ‰€ä»¥è®¾ä¸ºä¸åˆæ³•</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;w[i]);</span><br><span class="line">            f[i][<span class="number">0</span>] = <span class="built_in">max</span>(f[i - <span class="number">1</span>][<span class="number">0</span>], f[i - <span class="number">1</span>][<span class="number">1</span>]);</span><br><span class="line">            f[i][<span class="number">1</span>] = f[i - <span class="number">1</span>][<span class="number">0</span>] + w[i];</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="built_in">max</span>(f[n][<span class="number">0</span>], f[n][<span class="number">1</span>]) &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<p><a class="link"   href="https://www.acwing.com/problem/content/1059/" >A1057<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>å¯¹äºè‚¡ç¥¨å¯¹åº”ä¸¤ä¸ªè¿‡ç¨‹ï¼šæ‰‹ä¸­æœ‰è´§ï¼Œæ‰‹ä¸­æ— è´§ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202310301611731.webp"
                      alt="image.png|300"
                ></p>
<ul>
<li>çŠ¶æ€è¡¨ç¤ºï¼š<ul>
<li>$f_{i, j, 0}, f_{i, j, 1}$</li>
<li>é›†åˆï¼šè¿‡å®Œäº†å‰ $i$ å¤©ï¼Œè¿›è¡Œäº† $j$ æ¬¡äº¤æ˜“ï¼Œå¹¶ä¸”æ‰‹ä¸­æ²¡æœ‰&#x2F;æœ‰è‚¡ç¥¨çš„çŠ¶æ€ã€‚</li>
<li>å‡å¦‚æ‰‹ä¸­æœ‰è‚¡ç¥¨ï¼Œé‚£ä¹ˆå°±æ˜¯å¤„äºç¬¬ $j$ æ¬¡äº¤æ˜“ã€‚</li>
</ul>
</li>
<li>çŠ¶æ€è®¡ç®—ï¼š<ul>
<li>$f_{i,j,0}&#x3D;\max(f_{i-1,j,0},f_{i-1,j,1}+w_i)$</li>
<li>$f_{i,j,1}&#x3D;\max(f_{i-1,j,1},f_{i-1,j-1,0}-w_i)$</li>
</ul>
</li>
</ul>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100010</span>, M = <span class="number">110</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> w[N];</span><br><span class="line"><span class="type">int</span> f[N][M][<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;w[i]);</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">0xc0</span>, <span class="built_in">sizeof</span>(f));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= n; i++)</span><br><span class="line">        f[i][<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            f[i][j][<span class="number">0</span>] = <span class="built_in">max</span>(f[i - <span class="number">1</span>][j][<span class="number">0</span>], f[i - <span class="number">1</span>][j][<span class="number">1</span>] + w[i]);</span><br><span class="line">            f[i][j][<span class="number">1</span>] = <span class="built_in">max</span>(f[i - <span class="number">1</span>][j][<span class="number">1</span>], f[i - <span class="number">1</span>][j - <span class="number">1</span>][<span class="number">0</span>] - w[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">        res = <span class="built_in">max</span>(res, f[n][i][<span class="number">0</span>]); <span class="comment">// å®Œæ•´çš„äº¤æ˜“ç»“æŸ æ­¤æ—¶æ‰‹é‡Œæ— è´§</span></span><br><span class="line">    cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<p><a class="link"   href="https://www.acwing.com/problem/content/1060/" >A1058<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<ul>
<li>çŠ¶æ€è¡¨ç¤º<ul>
<li>æ‰‹ä¸­æœ‰è´§&#x2F;æ‰‹ä¸­æ— è´§çš„ç¬¬ä¸€å¤©&#x2F;æ‰‹ä¸­æ— è´§çš„éç¬¬ä¸€å¤©ã€‚</li>
<li><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202310301935361.webp"
                      alt="image.png|500"
                ></li>
<li>å…¥å£ï¼šæ‰‹ä¸­æ— è´§çš„éç¬¬ä¸€å¤©ã€‚</li>
<li>å‡ºå£ï¼šæ‰‹ä¸­æ— è´§å³å¯ï¼Œé‚£ä¹ˆç®—ä¸€ä¸ªå³å¯ï¼Œä½†å‡å¦‚è‚¡ç¥¨ä»·æ ¼æ˜¯å•è°ƒä¸‹é™çš„ï¼Œé‚£ä¹ˆæœ€ä¼˜è§£å°±æ˜¯ä¸€æ¬¡ä¹Ÿä¸ä¹°ï¼Œå‡ºå£å°±æ˜¯å…¥å£ã€‚</li>
<li>æ³¨æ„æœ¬é¢˜æ— äº¤æ˜“æ¬¡æ•°ã€‚</li>
</ul>
</li>
<li>çŠ¶æ€è®¡ç®—ï¼š<ul>
<li>$f_{i,0&#x2F;1&#x2F;2}$</li>
<li>$f_{i,0}&#x3D;\max(f_{i-1,0},f_{i-1,2}-w_i)$</li>
<li>$f_{i,1}&#x3D;f_{i-1,0}+w_i$</li>
<li>$f_{i,2}&#x3D;\max(f_{i-1,2},f_{i-1,1})$</li>
</ul>
</li>
<li>åˆå§‹åŒ–ï¼š$f_{0,2}&#x3D;0,f_{0,1}&#x3D;f_{0,0}&#x3D;-\infty$<ul>
<li>è´Ÿæ— ç©·ä»£è¡¨ä¸åˆæ³•ã€‚</li>
</ul>
</li>
</ul>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100010</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> w[N];</span><br><span class="line"><span class="type">int</span> f[N][<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        cin &gt;&gt; w[i];</span><br><span class="line">    f[<span class="number">0</span>][<span class="number">0</span>] = f[<span class="number">0</span>][<span class="number">1</span>] = <span class="number">-0x3f3f3f3f</span>; <span class="comment">// æ‰‹ä¸­æœ‰è´§å’Œ æ— è´§çš„ç¬¬ä¸€å¤©</span></span><br><span class="line">    f[<span class="number">0</span>][<span class="number">2</span>] = <span class="number">0</span>; <span class="comment">// æ‰‹ä¸­æ— è´§éç¬¬ä¸€å¤©</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        f[i][<span class="number">0</span>] = <span class="built_in">max</span>(f[i - <span class="number">1</span>][<span class="number">0</span>], f[i - <span class="number">1</span>][<span class="number">2</span>] - w[i]);</span><br><span class="line">        f[i][<span class="number">1</span>] = f[i - <span class="number">1</span>][<span class="number">0</span>] + w[i];</span><br><span class="line">        f[i][<span class="number">2</span>] = <span class="built_in">max</span>(f[i - <span class="number">1</span>][<span class="number">1</span>], f[i - <span class="number">1</span>][<span class="number">2</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">max</span>(f[n][<span class="number">1</span>], f[n][<span class="number">2</span>]) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<p><a class="link"   href="https://www.acwing.com/problem/content/1054/" >A1052<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>KMP çš„è¿‡ç¨‹ä¸­ä¸èƒ½è®©å®ƒè·³åˆ°æœ€åä¸€ä¸ªçŠ¶æ€ã€‚</p>
<p>æ¯ä¸ªä½ç½®æœ‰ 26 æ¡è¾¹ï¼Œ$m + 1$ ä¸ªçŠ¶æ€ã€‚</p>
<ul>
<li>1:40:00 æ²¡å¬æ‡‚ï¼Œå¤ä¹  KMP å»äº†ï¼Œç­‰å›æ¥è¡¥å¬ã€‚</li>
</ul>
<h1 id="çŠ¶å‹DP"><a href="#çŠ¶å‹DP" class="headerlink" title="çŠ¶å‹DP"></a>çŠ¶å‹DP</h1><blockquote>
<p>åœ¨èƒŒåŒ…é—®é¢˜é‡Œï¼Œè€ƒè™‘çš„é¡ºåºæ˜¯å¯¹ç­”æ¡ˆæ²¡æœ‰å½±å“çš„ã€‚<br>ä½†æ˜¯ä¼šå­˜åœ¨æŸäº›é¢˜ï¼Œç‰©å“çš„é€‰æ‹©é¡ºåºå¯¹ç­”æ¡ˆäº§ç”Ÿå½±å“ã€‚<br>æ¯”å¦‚è¿™æ¬¡è·å¾—çš„å®é™…ä»·å€¼æ˜¯è¿™æ¬¡é€‰æ‹©çš„ç‰©å“ä»·å€¼ä¸ä¸Šä¸€ä¸ªç‰©å“ä»·å€¼å¼‚æˆ–å’Œï¼Œé‚£ä¹ˆ<strong>é€‰æ‹©é¡ºåºå°±ä¼šå¯¼è‡´ç­”æ¡ˆå˜åŒ–</strong>ï¼Œå°±éœ€è¦ä¸€ç§æ–°çš„DPæ–¹å¼â€”â€”çŠ¶å‹DPã€‚</p>
</blockquote>
<blockquote>
<p>çŠ¶å‹DPçš„æš´åŠ›åšæ³•ä¸€èˆ¬æ˜¯ $n!$ å¤æ‚åº¦çš„ï¼Œæ¯”å¦‚æšä¸¾é€‰æ‹©é¡ºåºçš„å…¨æ’åˆ—ã€‚</p>
</blockquote>
<p>è®¾ $f_{i,j}$ ä»£è¡¨ä¸Šä¸€ä¸ªé€‰çš„ç‰©å“æ˜¯ $j$ï¼Œç¬¬ä¸€ç»´ç”¨ä¸€ä¸ª $n$ ä½çš„äºŒè¿›åˆ¶æ•°ï¼ˆ$0\sim{n-1}$ï¼‰ï¼Œè¿™ä¸ªäºŒè¿›åˆ¶æ•°ç¬¬ $x$ ä½ä»£è¡¨ç¬¬ $x$ ä¸ªç‰©å“é€‰æ²¡é€‰ã€‚</p>
<p>è½¬ç§»çš„æ—¶å€™çœ‹ä¸€ä¸‹ç¬¬ $i-1$ ä½æœ‰æ²¡æœ‰é€‰ï¼Œæ²¡é€‰æˆ‘æ‰èƒ½é€‰ä¸Šã€‚</p>
<p>ç”¨äºŒè¿›åˆ¶æ•°ä»£è¡¨ç‰©å“é€‰æ²¡é€‰è¿‡ï¼Œè¿™ä¸ªæŠ€å·§å«åšçŠ¶æ€å‹ç¼©ã€‚</p>
<p>è¿˜è¦è€ƒè™‘ä½“ç§¯ï¼šå½“å‰ç”¨äº† $k$ çš„ä½“ç§¯ã€‚</p>
<p>$f_{i,j,k}$ ä»£è¡¨é€‰äº†å“ªäº›ï¼Œä¸Šä¸€ä¸ªé€‰çš„æ˜¯ $j$ï¼Œå½“å‰ç”¨äº† $k$ çš„ä½“ç§¯æ‰€å¾—åˆ°çš„æœ€å¤§ä»·å€¼ï¼Œè½¬ç§»æ—¶è€ƒè™‘ä¸‹ä¸€ä¸ªé€‰ä»€ä¹ˆï¼Œç¼–å· $0\le{r}\le{n}$ã€‚</p>
<p>é€‰è¿™ä¸ªç‰©å“çš„æ¡ä»¶æ˜¯$((i&gt;&gt;r)&amp;1)&#x3D;0$</p>
<p>$f_{i|(1&lt;&lt;r),r,k+v_r}&#x3D;f_{i,j,k}+w_j\oplus{w_r}$</p>
<p>$i|(1&lt;&lt;r)$ ç›¸å½“äºæŠŠ $i$ çš„ç¬¬ $r$ ä½èµ‹ä¸º 1ã€‚</p>
<p>å¤æ‚åº¦ï¼š</p>
<p>$O(2^n\times{n^2}\times{m})$</p>
<p>è¿™ä¸ªèŒƒå›´ä¸€èˆ¬æ˜¯ $n\in{18\sim{22}}$</p>
<h2 id="æ£‹ç›˜å¼ï¼ˆåŸºäºè¿é€šæ€§ï¼‰"><a href="#æ£‹ç›˜å¼ï¼ˆåŸºäºè¿é€šæ€§ï¼‰" class="headerlink" title="æ£‹ç›˜å¼ï¼ˆåŸºäºè¿é€šæ€§ï¼‰"></a>æ£‹ç›˜å¼ï¼ˆåŸºäºè¿é€šæ€§ï¼‰</h2><p><a class="link"   href="https://www.acwing.com/problem/content/1066/" >A1064<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<ul>
<li>çŠ¶æ€è¡¨ç¤º<ul>
<li>$f_{i,j,s}$</li>
<li>é›†åˆï¼šæ‰€æœ‰åªæ‘†åœ¨å‰ $i$ è¡Œï¼Œå·²ç»æ‘†äº† $j$ ä¸ªå›½ç‹ï¼Œä¸”ç¬¬ $i$ è¡Œæ‘†æ”¾çš„çŠ¶æ€æ˜¯ $s$ çš„é›†åˆã€‚</li>
<li>å±æ€§ï¼šæ–¹æ¡ˆæ•°ã€‚</li>
</ul>
</li>
<li>çŠ¶æ€è®¡ç®—<ul>
<li>å·²ç»æ‘†å®Œå‰ $i$ æ’ï¼Œä¸”ç¬¬ $i$ æ’çš„çŠ¶æ€æ˜¯ $a$ï¼Œç¬¬ $i - 1$ æ’çš„çŠ¶æ€æ˜¯ $b$ï¼Œå·²ç»æ‘†äº† $j$ ä¸ªå›½ç‹çš„æ‰€æœ‰æ–¹æ¡ˆã€‚</li>
</ul>
</li>
</ul>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">12</span>, M = <span class="number">1</span> &lt;&lt; <span class="number">10</span>, K = <span class="number">110</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; state;</span><br><span class="line"><span class="type">int</span> id[M];</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; head[M];</span><br><span class="line"><span class="type">int</span> cnt[M];</span><br><span class="line">LL f[N][K][M];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(<span class="type">int</span> state)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        <span class="keyword">if</span> (((state &gt;&gt; i) &amp; <span class="number">1</span>) &amp;&amp; (state &gt;&gt; (i + <span class="number">1</span>)) &amp; <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">count</span><span class="params">(<span class="type">int</span> state)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) res += (state &gt;&gt; i) &amp; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; (<span class="number">1</span> &lt;&lt; n); i++)</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">check</span>(i))</span><br><span class="line">        &#123;</span><br><span class="line">            state.<span class="built_in">push_back</span>(i);</span><br><span class="line">            id[i] = state.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">            <span class="comment">// cnt[i] = count(i);</span></span><br><span class="line">            cnt[i] = __builtin_popcount(i);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; state.<span class="built_in">size</span>(); i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; state.<span class="built_in">size</span>(); j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> a = state[i], b = state[j];</span><br><span class="line">            <span class="keyword">if</span>((a &amp; b) == <span class="number">0</span> &amp;&amp; <span class="built_in">check</span>(a | b))</span><br><span class="line">                head[i].<span class="built_in">push_back</span>(j); <span class="comment">// å¯ä»¥è½¬ç§»çš„çŠ¶æ€</span></span><br><span class="line">        &#125;</span><br><span class="line">    f[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n + <span class="number">1</span>; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt;= m; j++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> a = <span class="number">0</span>; a &lt; state.<span class="built_in">size</span>(); a++)</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> b : head[a])</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="type">int</span> c = cnt[state[a]];</span><br><span class="line">                    <span class="keyword">if</span>(j &gt;= c)</span><br><span class="line">                    &#123;</span><br><span class="line">                        f[i][j][a] += f[i - <span class="number">1</span>][j - c][b];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">    cout &lt;&lt; f[n + <span class="number">1</span>][m][<span class="number">0</span>] &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><a class="link"   href="https://www.acwing.com/problem/content/329/" >A327<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MOD = <span class="number">1e8</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> can[<span class="number">15</span>][<span class="number">15</span>];</span><br><span class="line"><span class="type">int</span> f[<span class="number">15</span>][<span class="number">1</span> &lt;&lt; <span class="number">12</span>];</span><br><span class="line"><span class="type">int</span> ans;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (s &amp; (s &lt;&lt; <span class="number">1</span>) || s &amp; (s &gt;&gt; <span class="number">1</span>)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">        <span class="keyword">if</span> (((s &gt;&gt; (i - <span class="number">1</span>)) &amp; <span class="number">1</span>) &amp;&amp; can[x][i] == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; j++)</span><br><span class="line">            cin &gt;&gt; can[i][j];</span><br><span class="line">    f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n + <span class="number">1</span>; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; (<span class="number">1</span> &lt;&lt; m); j++)</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">check</span>(i - <span class="number">1</span>, j))</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">0</span>; k &lt; (<span class="number">1</span> &lt;&lt; m); k++)</span><br><span class="line">                    <span class="keyword">if</span> ((j &amp; k) == <span class="number">0</span> &amp;&amp; <span class="built_in">check</span>(i, k))</span><br><span class="line">                        f[i][k] = (f[i][k] + f[i - <span class="number">1</span>][j]) % MOD;</span><br><span class="line">    cout &lt;&lt; f[n + <span class="number">1</span>][<span class="number">0</span>] &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// #include &lt;iostream&gt;</span></span><br><span class="line"><span class="comment">// #include &lt;vector&gt;</span></span><br><span class="line"><span class="comment">// using namespace std;</span></span><br><span class="line"><span class="comment">// const int MOD = 1e8;</span></span><br><span class="line"><span class="comment">// const int N = 14, M = 1 &lt;&lt; 12;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// int n, m;</span></span><br><span class="line"><span class="comment">// int g[N];</span></span><br><span class="line"><span class="comment">// vector&lt;int&gt; state;</span></span><br><span class="line"><span class="comment">// vector&lt;int&gt; head[M];</span></span><br><span class="line"><span class="comment">// int f[N][M];</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// bool check(int state)</span></span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">//     if(state &amp; (state &lt;&lt; 1) || state &amp; (state &gt;&gt; 1)) return false;</span></span><br><span class="line"><span class="comment">//     return true;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// int main()</span></span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">//     cin &gt;&gt; n &gt;&gt; m;</span></span><br><span class="line"><span class="comment">//     for (int i = 1; i &lt;= n; i++)</span></span><br><span class="line"><span class="comment">//         for (int j = 0; j &lt; m; j++)</span></span><br><span class="line"><span class="comment">//         &#123;</span></span><br><span class="line"><span class="comment">//             int t;</span></span><br><span class="line"><span class="comment">//             cin &gt;&gt; t;</span></span><br><span class="line"><span class="comment">//             g[i] += !t &lt;&lt; j;</span></span><br><span class="line"><span class="comment">//         &#125;</span></span><br><span class="line"><span class="comment">//     for (int i = 0; i &lt; (1 &lt;&lt; m); i++)</span></span><br><span class="line"><span class="comment">//         if(check(i))</span></span><br><span class="line"><span class="comment">//             state.push_back(i);</span></span><br><span class="line"><span class="comment">//     for (int i = 0; i &lt; state.size(); i++)</span></span><br><span class="line"><span class="comment">//         for (int j = 0; j &lt; state.size(); j++)</span></span><br><span class="line"><span class="comment">//         &#123;</span></span><br><span class="line"><span class="comment">//             int a = state[i], b = state[j];</span></span><br><span class="line"><span class="comment">//             if ((a &amp; b) == 0)</span></span><br><span class="line"><span class="comment">//             &#123;</span></span><br><span class="line"><span class="comment">//                 head[i].push_back(j);</span></span><br><span class="line"><span class="comment">//             &#125;</span></span><br><span class="line"><span class="comment">//         &#125;</span></span><br><span class="line"><span class="comment">//     f[0][0] = 1;</span></span><br><span class="line"><span class="comment">//     for (int i = 1; i &lt;= n + 1; i++)</span></span><br><span class="line"><span class="comment">//         for (int a = 0; a &lt; state.size(); a++)</span></span><br><span class="line"><span class="comment">//             for (int b : head[a])</span></span><br><span class="line"><span class="comment">//             &#123;</span></span><br><span class="line"><span class="comment">//                 if (g[i] &amp; state[a]) continue;</span></span><br><span class="line"><span class="comment">//                 f[i][a] = (f[i][a] + f[i - 1][b]) % MOD;</span></span><br><span class="line"><span class="comment">//             &#125;</span></span><br><span class="line"><span class="comment">//     cout &lt;&lt; f[n + 1][0] &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//     return 0;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure></div>

<h2 id="æ—…è¡Œå•†é—®é¢˜ï¼ˆTSPï¼‰"><a href="#æ—…è¡Œå•†é—®é¢˜ï¼ˆTSPï¼‰" class="headerlink" title="æ—…è¡Œå•†é—®é¢˜ï¼ˆTSPï¼‰"></a>æ—…è¡Œå•†é—®é¢˜ï¼ˆTSPï¼‰</h2><blockquote>
<p>å¹³é¢å†…æœ‰ $n$ ä¸ªç‚¹ï¼Œé—®ä» $1$ å·ç‚¹å‡ºå‘æŠŠæ‰€æœ‰ç‚¹éƒ½èµ°ä¸€éå›åˆ°è‡ªå·±çš„æœ€çŸ­è·¯å¾„ã€‚</p>
</blockquote>
<p>é™¤äº†ä¸€å·ç‚¹ï¼Œå…¶å®ƒçš„ç‚¹æ²¡æœ‰å¿…è¦èµ°ä¸¤æ¬¡ã€‚</p>
<p>è®¾ $f_{i,j}$ ä»£è¡¨å“ªäº›ç‚¹èµ°è¿‡äº†ï¼Œæœ€ååœç•™åœ¨ $j$ å·ç‚¹çš„æœ€çŸ­è·¯å¾„ã€‚</p>
<p>åˆå§‹åŒ–ä¸º $f_{1,0}&#x3D;0$ï¼ŒæŠŠç¼–å·æ”¹ä¸º $0\sim{n-1}$ã€‚</p>
<p>ç„¶åæšä¸¾ä¸€ä¸ª $k$ï¼Œè¡¨ç¤ºæœ€ååœåœ¨ $j$ï¼Œè¿™ä¸€æ­¥æ˜¯ä» $j$ èµ°åˆ° $k$ã€‚</p>
<p>æ‰€ä»¥ $f_{i|(1&lt;&lt;k),k}&#x3D;\min(f_{i,j}+dis_{j,k})$</p>
<h2 id="æ„¤æ€’çš„å°é¸Ÿï¼ˆåŸºäºé›†åˆï¼‰"><a href="#æ„¤æ€’çš„å°é¸Ÿï¼ˆåŸºäºé›†åˆï¼‰" class="headerlink" title="æ„¤æ€’çš„å°é¸Ÿï¼ˆåŸºäºé›†åˆï¼‰"></a><a class="link"   href="https://www.luogu.com.cn/problem/P2831" >æ„¤æ€’çš„å°é¸Ÿ<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>ï¼ˆåŸºäºé›†åˆï¼‰</h2><p>ä¸€å…±æœ‰ $n$ ä¸ªç‚¹ï¼Œé¢„å¤„ç†å‡º $n^2$ æ¡æŠ›ç‰©çº¿å’Œå®ƒä»¬è¦†ç›–çš„ç‚¹ã€‚</p>
<p>é—®é¢˜å°±è½¬åŒ–ä¸ºäº†ç»™å®šè‹¥å¹²æ¡æŠ›ç‰©çº¿ï¼Œç”¨æœ€å°‘çš„æŠ›ç‰©çº¿è¦†ç›–æ‰€æœ‰çš„ç‚¹ã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ª<strong>é‡å¤è¦†ç›–é—®é¢˜</strong>ï¼Œä¸ä¹‹ç›¸å¯¹çš„è¿˜æœ‰<strong>ç²¾ç¡®è¦†ç›–é—®é¢˜</strong>ï¼Œæœ€ä¼˜è§£æ³•æ˜¯ Dancing Linksã€‚</p>
<p>æ‰€ä»¥è¿™é¢˜ç”¨çŠ¶å‹å®ç°ä¸€ä¸‹ã€‚</p>
<p>ç”¨é›†åˆç±»å‹çš„çŠ¶å‹ DP ä¼˜åŒ–çˆ†æœã€‚</p>
<p>çˆ†æœï¼š</p>
<ul>
<li>å¦‚æœåŒ…å«äº†æ‰€æœ‰åˆ—ï¼Œæ›´æ–°å…¨å±€æœ€ä¼˜è§£ã€‚</li>
<li>$state$ å­˜å‚¨å“ªä¸€åˆ—å·²ç»è¢«è¦†ç›–</li>
<li>ä»»é€‰æ²¡æœ‰è¢«è¦†ç›–çš„ä¸€åˆ— $x$</li>
<li>æšä¸¾æ‰€æœ‰èƒ½è¦†ç›– $x$ çš„æŠ›ç‰©çº¿ã€‚</li>
<li>æ›´æ–° $state$</li>
</ul>
<h1 id="åŒºé—´DP"><a href="#åŒºé—´DP" class="headerlink" title="åŒºé—´DP"></a>åŒºé—´DP</h1><h2 id="ç»“æ„"><a href="#ç»“æ„" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h2><p>å®ƒæ˜¯ç”±å°åŒºé—´é€’æ¨å¾—åˆ°å¤§åŒºé—´çš„ä¸€ç§ DP æ–¹å¼ï¼Œå¯ä»¥å…ˆæšä¸¾é•¿åº¦ï¼Œå†æšä¸¾å·¦ç«¯ç‚¹å¾—åˆ°å³ç«¯ç‚¹ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æšä¸¾å·¦å³ç«¯ç‚¹ã€‚</p>
<p>ä½†ä¹‹é—´æšä¸¾å·¦å³ç«¯ç‚¹è¦æ³¨æ„é¡ºåºé—®é¢˜ï¼Œå³å¤§çš„å·¦ç«¯ç‚¹è¦å…ˆè¢«æšä¸¾åˆ°ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = n; i &gt;= <span class="number">1</span>; i--)</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> j = i; j &lt;= n; j++)</span><br></pre></td></tr></table></figure></div>

<p>è¿™æ ·å¯ä»¥ä¿è¯æšä¸¾åˆ°çš„åŒºé—´çš„å­åŒºé—´ä¹‹å‰ä¸€å®šæ›´æ–°è¿‡ã€‚</p>
<p>ä¸è¿‡ä¸ªäººè¿˜æ˜¯æ¯”è¾ƒä¹ æƒ¯ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> len = <span class="number">1</span>; len &lt;= n; len++)</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> l = <span class="number">1</span>; l + len - <span class="number">1</span> &lt;= n; l++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="type">int</span> r = l + len - <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="åˆå¹¶çŸ³å­"><a href="#åˆå¹¶çŸ³å­" class="headerlink" title="åˆå¹¶çŸ³å­"></a>åˆå¹¶çŸ³å­</h2><blockquote>
<p>æœ‰ $n$ å †çŸ³å­ï¼Œæ¯æ¬¡é€‰æ‹©ç›¸é‚»ä¸¤å †åˆå¹¶ï¼Œåˆå¹¶ä»£ä»·ä¸ºä¸¤å †çŸ³å­ä¹‹å’Œï¼Œè¦åˆå¹¶ä¸ºä¸€å †ï¼Œæ±‚æœ€å°ä»£ä»·ã€‚</p>
</blockquote>
<p>å®ƒå§‹ç»ˆæ˜¯è¿ç»­çš„ä¸€æ®µè¿›è¡Œåˆå¹¶ï¼Œä¸èƒ½è¿›è¡Œè·³è·ƒã€‚</p>
<p>æ‰€ä»¥å¯ä»¥è®¾è®¡ $f_{l,r}$ ä»£è¡¨æŠŠ $[l,r]$ çš„çŸ³å­åˆå¹¶ä¸ºä¸€å †çš„æœ€å°ä»£ä»·ï¼Œç­”æ¡ˆå°±æ˜¯ $f_{1,n}$ã€‚</p>
<p>åˆå§‹åŒ–ä¸º $f_{i,i}&#x3D;0$ ï¼Œé‚£ä¹ˆæ€ä¹ˆè¿›è¡Œè½¬ç§»ï¼Ÿ</p>
<p>æœ€åä¸€æ¬¡åˆå¹¶ä¸€å®šæ˜¯æŠŠä¸¤å †çŸ³å­åˆå¹¶ä¸ºä¸€å †çŸ³å­ï¼Œæ‰€ä»¥ä¸¤å †çŸ³å­ä¹‹é—´ä¸€å®šæœ‰ä¸€ä¸ªåˆ†ç•Œç‚¹ï¼Œæ‰€ä»¥å°±æšä¸¾ä¸€ä¸ªåˆ†ç•Œç‚¹ $k$ ï¼Œ$f_{l,r}&#x3D;\min_{l\le{k}\le{r}}(f_{l,k}+f{k+1,r})+sum_{l,r}$ã€‚</p>
<p>åŒºé—´DPçš„å…±æ€§ä¹‹ä¸€ï¼šçŠ¶æ€æœ‰ $l$ å’Œ $r$ã€‚</p>
<p>å¤§åŒºé—´ä¸€å®šæ˜¯ç”±å°åŒºé—´è½¬ç§»è€Œæ¥çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å…ˆæ±‚é•¿åº¦è¾ƒå°çš„åŒºé—´ï¼Œå› æ­¤ä¸èƒ½ç›´æ¥æšä¸¾ $l,r$ ï¼Œè¦<strong>æšä¸¾åŒºé—´é•¿åº¦</strong>ã€‚</p>
<p>å…ˆæšä¸¾åŒºé—´é•¿åº¦ï¼Œå†æšä¸¾ $l,r$ï¼Œå†æšä¸¾æ–­ç‚¹ã€‚</p>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P1775" >çŸ³å­åˆå¹¶ï¼ˆå¼±åŒ–ç‰ˆï¼‰<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> a[<span class="number">10000</span>];</span><br><span class="line"><span class="type">int</span> f[<span class="number">1000</span>][<span class="number">1000</span>];</span><br><span class="line"><span class="type">int</span> sum[<span class="number">10000</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		sum[i]=sum[i<span class="number">-1</span>]+a[i];<span class="comment">//å‰ç¼€å’Œ</span></span><br><span class="line">	<span class="built_in">memset</span>(f,<span class="number">0x3f3f3f</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		f[i][i]=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> len=<span class="number">2</span>;len&lt;=n;len++)<span class="comment">//å½“å‰å¤„ç†é•¿åº¦ä¸ºlençš„åŒºé—´ </span></span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">1</span>,r=len;r&lt;=n;r++,l++)<span class="comment">//é•¿åº¦ä¸ºr-l+1 </span></span><br><span class="line">			<span class="keyword">for</span>(<span class="type">int</span> k=l;k&lt;r;k++)</span><br><span class="line">				f[l][r]=<span class="built_in">min</span>(sum[r]-sum[l<span class="number">-1</span>]+f[l][k]+f[k<span class="number">+1</span>][r],f[l][r]);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,f[<span class="number">1</span>][n]);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<p>é‚£ä¹ˆçŸ³å­æ˜¯ç¯å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬åˆå¹¶ä¸ºä¸€å †æ—¶ï¼Œæ€»ä¼šæœ‰ä¸€ä¸ªåœ°æ–¹æ˜¯åˆ†ç•Œç‚¹ï¼Œå¯ä»¥æ–­ç¯ä¸ºé“¾ï¼Œæšä¸¾æ¯ä¸€ä¸ªåˆ†ç•Œç‚¹çš„ç­”æ¡ˆå³å¯ã€‚</p>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P1880" >çŸ³å­åˆå¹¶<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> a[<span class="number">10000</span>];</span><br><span class="line"><span class="type">int</span> f[<span class="number">1000</span>][<span class="number">1000</span>];</span><br><span class="line"><span class="type">int</span> sum[<span class="number">10000</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=n<span class="number">+1</span>;i&lt;=<span class="number">2</span>*n;i++)</span><br><span class="line">		a[i]=a[i-n]; </span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">2</span>*n;i++)</span><br><span class="line">		sum[i]=sum[i<span class="number">-1</span>]+a[i];</span><br><span class="line">	<span class="built_in">memset</span>(f,<span class="number">0x3f</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">2</span>*n;i++)</span><br><span class="line">		f[i][i]=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> len=<span class="number">2</span>;len&lt;=n;len++) </span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">1</span>,r=len;r&lt;=<span class="number">2</span>*n;r++,l++)</span><br><span class="line">			<span class="keyword">for</span>(<span class="type">int</span> k=l;k&lt;r;k++)</span><br><span class="line">				f[l][r]=<span class="built_in">min</span>(sum[r]-sum[l<span class="number">-1</span>]+f[l][k]+f[k<span class="number">+1</span>][r],f[l][r]);</span><br><span class="line">	<span class="type">int</span> ans=f[<span class="number">1</span>][n];</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">1</span>,r=n;r&lt;=<span class="number">2</span>*n;l++,r++)</span><br><span class="line">		ans=<span class="built_in">min</span>(ans,f[l][r]);</span><br><span class="line">	<span class="type">int</span> maxn,minn;</span><br><span class="line">	minn=ans;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> len=<span class="number">2</span>;len&lt;=n;len++)</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">1</span>,r=len;r&lt;=<span class="number">2</span>*n;r++,l++)</span><br><span class="line">			<span class="keyword">for</span>(<span class="type">int</span> k=l;k&lt;r;k++)</span><br><span class="line">				f[l][r]=<span class="built_in">max</span>(sum[r]-sum[l<span class="number">-1</span>]+f[l][k]+f[k<span class="number">+1</span>][r],f[l][r]);</span><br><span class="line">	ans=f[<span class="number">1</span>][n];</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">1</span>,r=n;r&lt;=<span class="number">2</span>*n;l++,r++)</span><br><span class="line">		ans=<span class="built_in">max</span>(ans,f[l][r]);</span><br><span class="line">	maxn=ans;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n%d&quot;</span>,minn,maxn);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="çŸ©é˜µä¹˜æ³•"><a href="#çŸ©é˜µä¹˜æ³•" class="headerlink" title="çŸ©é˜µä¹˜æ³•"></a>çŸ©é˜µä¹˜æ³•</h2><blockquote>
<p>åˆ†åˆ«æœ‰ä¸€å †çŸ©é˜µ $M_1&#x3D;{a_1}\times{a_2},M_2&#x3D;{a_2}\times{a_3},M_3&#x3D;{a_3}\times{a_4},\cdots,M_n&#x3D;{a_n}\times{a_{n+1}}$ã€‚ç°åœ¨è¦æŠŠå®ƒä»¬ä¹˜èµ·æ¥ï¼Œä¸¤ä¸ªçŸ©é˜µç›¸ä¹˜çš„ä»£ä»·ï¼Œä¾‹å¦‚$M_1\cdot{M_2}&#x3D;a_1\times{a_2}\times{a_3}$ï¼Œæ ¹æ®çŸ©é˜µçš„ç»“åˆå¾‹ï¼Œæ±‚æœ€å°ä»£ä»·ã€‚</p>
</blockquote>
<p>ç±»ä¼¼äº<a class="link"   href="https://www.luogu.com.cn/problem/P1063" >èƒ½é‡é¡¹é“¾<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">220</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> a[N];</span><br><span class="line"><span class="type">int</span> f[N][N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=n<span class="number">+1</span>;i&lt;=<span class="number">2</span>*n;i++)</span><br><span class="line">        a[i]=a[i-n];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> len=<span class="number">2</span>;len&lt;=n*<span class="number">2</span>;len++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">1</span>,r=len;r&lt;=n*<span class="number">2</span>;l++,r++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k=l;k&lt;r;k++)</span><br><span class="line">                f[l][r]=<span class="built_in">max</span>(f[l][r],f[l][k]+f[k<span class="number">+1</span>][r]+a[l]*a[k<span class="number">+1</span>]*a[r<span class="number">+1</span>]);</span><br><span class="line">    <span class="type">int</span> ans=<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        ans=<span class="built_in">max</span>(ans,f[i][i+n<span class="number">-1</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="POJ2955-æœ€é•¿æ‹¬å·åŒ¹é…"><a href="#POJ2955-æœ€é•¿æ‹¬å·åŒ¹é…" class="headerlink" title="POJ2955 æœ€é•¿æ‹¬å·åŒ¹é…"></a>POJ2955 æœ€é•¿æ‹¬å·åŒ¹é…</h2><blockquote>
<p>ä»ä¸€ä¸ªæ‹¬å·ä¸²ä¸­é€‰å‡ºä¸€ä¸ªæœ€é•¿çš„å­åºåˆ—ï¼Œä½¿å…¶æ»¡è¶³æ‹¬å·åŒ¹é…ã€‚</p>
</blockquote>
<p>$f_{l,r}$ ä»£è¡¨ $[l,r]$ ä¸­æœ€å¤šèƒ½é€‰å‡ºå¤šå°‘æ‹¬å·æ»¡è¶³åŒ¹é…ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// #include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">300</span>;</span><br><span class="line"><span class="type">char</span> a[N];</span><br><span class="line"><span class="type">int</span> f[N][N];</span><br><span class="line">string s;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,a);</span><br><span class="line">        s=a;</span><br><span class="line">        <span class="keyword">if</span>(s==<span class="string">&quot;end&quot;</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> n=s.<span class="built_in">length</span>();</span><br><span class="line">        <span class="built_in">memset</span>(f,<span class="number">0</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> len=<span class="number">2</span>;len&lt;=n;len++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">0</span>,r=len<span class="number">-1</span>;r&lt;n;l++,r++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> k=l;k&lt;r;k++)</span><br><span class="line">                    f[l][r]=<span class="built_in">max</span>(f[l][r],f[l][k]+f[k<span class="number">+1</span>][r]);</span><br><span class="line">                <span class="keyword">if</span>(s[l]==<span class="string">&#x27;(&#x27;</span>&amp;&amp;s[r]==<span class="string">&#x27;)&#x27;</span>) f[l][r]=<span class="built_in">max</span>(f[l][r],f[l<span class="number">+1</span>][r<span class="number">-1</span>]<span class="number">+2</span>);</span><br><span class="line">                <span class="keyword">if</span>(s[l]==<span class="string">&#x27;[&#x27;</span>&amp;&amp;s[r]==<span class="string">&#x27;]&#x27;</span>) f[l][r]=<span class="built_in">max</span>(f[l][r],f[l<span class="number">+1</span>][r<span class="number">-1</span>]<span class="number">+2</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,f[<span class="number">0</span>][n<span class="number">-1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="POJ1651-åˆ æ•°"><a href="#POJ1651-åˆ æ•°" class="headerlink" title="POJ1651 åˆ æ•°"></a>POJ1651 åˆ æ•°</h2><blockquote>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202308171108862.webp"
                      alt="image.png"
                ></p>
</blockquote>
<p>è¿˜æ˜¯ç”¨ $f_{l,r}$ è¡¨ç¤ºåˆ é™¤åŒºé—´ $[l,r]$ ï¼ˆ<strong>é™¤å·¦å³ç«¯ç‚¹</strong>ï¼‰çš„æ€»ä»£ä»·ï¼Œç­”æ¡ˆå°±æ˜¯ $f_{1,n}$ã€‚</p>
<p>è½¬ç§»å‘¢ï¼Ÿ</p>
<p>åˆ é™¤æœ€åä¸€ä¸ªæ•° $k$ ï¼Œæ‹¿è‚¯å®šæ˜¯å…ˆæŠŠ $l\sim{k}$ å’Œ $k\sim{r}$ ä¹‹é—´çš„ç‚¹éƒ½åˆ å…‰ï¼Œ</p>
<p>æšä¸¾ä¸€ä¸ªä¸­é—´ç‚¹ï¼Œ$f_{l,r}&#x3D;\min_{l&lt;k&lt;r}(f_{l,k}+f_{k,r}+a_l\times{a_k}\times{a_r})$</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// #include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">200</span>;</span><br><span class="line"><span class="type">int</span> a[N],f[N][N];</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="built_in">memset</span>(f,<span class="number">0x3f</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)</span><br><span class="line">        f[i][i<span class="number">+1</span>]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> len=<span class="number">3</span>;len&lt;=n;len++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">1</span>,r=len;r&lt;=n;l++,r++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k=l<span class="number">+1</span>;k&lt;r;k++)</span><br><span class="line">                f[l][r]=<span class="built_in">min</span>(f[l][r],f[l][k]+f[k][r]+a[l]*a[k]*a[r]);</span><br><span class="line">            <span class="comment">// printf(&quot;f[%d][%d]=%d\n&quot;,l,r,f[l][r]);</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,f[<span class="number">1</span>][n]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="HDU4632-å›æ–‡å­åºåˆ—"><a href="#HDU4632-å›æ–‡å­åºåˆ—" class="headerlink" title="HDU4632 å›æ–‡å­åºåˆ—"></a>HDU4632 å›æ–‡å­åºåˆ—</h2><blockquote>
<p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ±‚å›æ–‡å­åºåˆ—çš„æ•°é‡ã€‚</p>
</blockquote>
<p>å¯¹äºä¸€ä¸ªåŒºé—´ $[l,r]$ ï¼Œæˆ‘åœ¨å¤„ç†å®ƒçš„æ—¶å€™ä¸€å®šè¦ä¿è¯å®ƒçš„å­åŒºé—´å·²ç»å¤„ç†å®Œäº†ã€‚</p>
<p>è½¬ç§»ï¼š$f_{l,r}&#x3D;f_{l+1,r}+f_{l,r-1}-f_{l+1,r-1}$</p>
<p>è¿™å°±å®Œäº†å˜›ï¼Ÿå¦‚æœ $s_l&#x3D;s_r$ï¼Œé‚£ä¹ˆå°±æ˜¯åœ¨åŸæ¥ $[l,r]$ çš„åŸºç¡€ä¸ŠåˆåŠ äº†è¿™ä¹ˆå¤šï¼Œæ‰€ä»¥è¦å†åŠ ä¸Š $f_{l+1,r-1}$ï¼Œè€Œä¸”ä¸¤ç«¯ç‚¹ä¹Ÿå½¢æˆäº†ä¸€ä¸ªå›æ–‡å­åºåˆ—ï¼Œæ‰€ä»¥å†åŠ ä¸€ã€‚</p>
<p>äºæ˜¯æ€»è½¬ç§»æ–¹ç¨‹ä¸ºï¼š$f_{l,r}&#x3D;f_{l,r-1}+f_{l+1,r}-[s_l\not&#x3D;s_r]\times{f_{l+1,r-1}}$</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod=<span class="number">10007</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1050</span>;</span><br><span class="line"><span class="type">int</span> t,n;</span><br><span class="line"><span class="type">char</span> s[N];</span><br><span class="line"><span class="type">int</span> f[N][N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;t);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>;k&lt;=t;k++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,s<span class="number">+1</span>);</span><br><span class="line">        n=<span class="built_in">strlen</span>(s<span class="number">+1</span>);</span><br><span class="line">        <span class="built_in">memset</span>(f,<span class="number">0</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">            f[i][i]=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> len=<span class="number">2</span>;len&lt;=n;len++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">1</span>,r=len;r&lt;=n;l++,r++)</span><br><span class="line">                f[l][r]=(f[l][r<span class="number">-1</span>]+f[l<span class="number">+1</span>][r]-((<span class="type">int</span>)(s[l]!=s[r])*(f[l<span class="number">+1</span>][r<span class="number">-1</span>]))+(<span class="type">int</span>)(s[l]==s[r])+mod)%mod;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Case %d: %d\n&quot;</span>,k,f[<span class="number">1</span>][n]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="å‡¸å¤šè¾¹å½¢"><a href="#å‡¸å¤šè¾¹å½¢" class="headerlink" title="å‡¸å¤šè¾¹å½¢"></a>å‡¸å¤šè¾¹å½¢</h2><blockquote>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202308171157448.webp"
                      alt="image.png"
                ></p>
<p>ä¸€ä¸ª $n$ è¾¹å½¢æ˜¯å¯ä»¥åˆ‡æˆ $n-2$ ä¸ªä¸‰è§’å½¢ï¼Œæ¯ä¸ªä¸‰è§’å½¢çš„æƒå€¼æ˜¯å®ƒçš„ä¸‰ä¸ªé¡¶ç‚¹çš„ç‚¹æƒä¹‹ç§¯ï¼Œæ±‚æœ€å°æƒå€¼å’Œã€‚</p>
</blockquote>
<p>ä¸‰è§’å½¢æ˜¯é€šè¿‡åˆ‡å‰²å¾—æ¥çš„ã€‚</p>
<p>æ–­ç¯ä¸ºé“¾ï¼Œæ‹·è´å‡ ä»½ï¼Œå‡å¦‚ä¸€ä¸ªå‡¸å…«è¾¹å½¢ï¼Œé‚£ä¹ˆ$f_{1,9}&#x3D;f_{1,5}+f_{5,9}$ï¼Œå…¶ä¸­ $a_1&#x3D;a_9$ã€‚</p>
<p>$f_{i,j}&#x3D;f_{i,k}+f_{k,j}$</p>
<p>å½“è¿™ä¸ªåŒºé—´è¢«åˆ’åˆ†åˆ°ä¸‰ä¸ªç‚¹çš„æ—¶å€™å•ç‹¬ç®—ä¸€ä¸‹å°±å¥½äº†ã€‚</p>
<h1 id="æ ‘å½¢DP"><a href="#æ ‘å½¢DP" class="headerlink" title="æ ‘å½¢DP"></a>æ ‘å½¢DP</h1><p>å§‹ç»ˆä»å¶å­å‘æ ¹èŠ‚ç‚¹åš DPã€‚</p>
<p>åœ¨æ¯ä¸ªèŠ‚ç‚¹æ—¶èšåˆæ‰€æœ‰å„¿å­çš„ä¿¡æ¯ï¼Œå¯èƒ½éœ€è¦å¤šé dfs&#x2F;bfs ã€‚</p>
<h2 id="ç‚¹æ•°"><a href="#ç‚¹æ•°" class="headerlink" title="ç‚¹æ•°"></a>ç‚¹æ•°</h2><blockquote>
<p>ä¸€ä¸ª $n$ ä¸ªç‚¹çš„æ ‘ï¼Œé—®è¿™ä¸ªæ ‘æœ‰å¤šå°‘ä¸ªç‚¹ï¼Ÿ</p>
</blockquote>
<p><del>å¾ˆæ˜¾ç„¶æ˜¯nã€‚</del></p>
<p>è€ƒè™‘ç”¨æ ‘å½¢ DP æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>æ ‘å½¢DPçš„**ç¬¬ä¸€ä¸ªç»´åº¦ä¸€èˆ¬æ˜¯ $f_i$**ï¼Œä»£è¡¨ä»¥ $i$ ä¸ºæ ¹çš„å­æ ‘ã€‚</p>
<p>åœ¨è¿™é‡Œè¡¨ç¤ºä»¥ $i$ ä¸ºæ ¹çš„å­æ ‘æœ‰å¤šå°‘ä¸ªç‚¹ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬è¦æ±‚çš„å°±æ˜¯ $f_1$ã€‚</p>
<p>åˆå§‹åŒ–ï¼Ÿæˆ‘ä»¬éœ€è¦æŠŠæ‰€æœ‰å¶å­èŠ‚ç‚¹çš„å­æ ‘å¤§å°åˆå§‹åŒ–ä¸º $1$ã€‚</p>
<p><strong>åˆå§‹åŒ–çš„ä¸€èˆ¬æ˜¯å¶å­èŠ‚ç‚¹</strong></p>
<p>è½¬ç§»ï¼Ÿ<strong>ç”±å„¿å­å‘çˆ¶äº²è½¬ç§»ï¼ŒæŠŠæ‰€æœ‰å„¿å­çš„ä¿¡æ¯åˆåœ¨ä¸€èµ·</strong>ã€‚</p>
<p>$f_u&#x3D;\sum{f_v}+1$</p>
<p>æ ‘å½¢ DP çš„æ—¶å€™æˆ‘ä»¬ä¸€èˆ¬ä¼šè¿›è¡Œ DFSï¼ŒåŒæ—¶è®°å½•å½“å‰ç‚¹å’Œå®ƒçš„çˆ¶äº²ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> fa)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    f[u]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=fir[u];i;i=e[i].nxt)</span><br><span class="line">        <span class="keyword">if</span>(e[i].to!=fa)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">dfs</span>(e[i].to,u);</span><br><span class="line">            f[u]+=f[v];</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="ç›´å¾„"><a href="#ç›´å¾„" class="headerlink" title="ç›´å¾„"></a>ç›´å¾„</h2><blockquote>
<p>æ±‚æ ‘çš„ç›´å¾„ï¼Œç›´å¾„å®šä¹‰ä¸ºæ ‘ä¸Šä¸¤ä¸ªæœ€è¿œè·ç¦»çš„ç‚¹çš„è·¯å¾„ã€‚ </p>
</blockquote>
<p>æ ‘çš„ç›´å¾„æ— éæ˜¯æ ‘ä¸Šçš„ä¸¤æ¡é“¾ï¼Œè€Œæ ‘ä¸Šçš„ä¸€æ¡é“¾æˆ‘ä»¬å¯ä»¥æ€æ ·è¡¨ç¤ºï¼Ÿ</p>
<p>å‡è®¾ä» $p_1$ èµ°åˆ° $p_2$ ï¼Œé‚£è‚¯å®šæ˜¯å…ˆèµ°åˆ°å®ƒä»¬çš„ $lca$ å†èµ°åˆ°å¦ä¸€ä¸ªç‚¹ã€‚</p>
<p>è€Œå¯¹äºä¸€ä¸ªç‚¹æˆ‘åªéœ€è¦å‘ä¸‹æ‰¾ä¸¤æ¡å°½é‡é•¿çš„è·¯å¾„ï¼Œæ‹¼èµ·æ¥å°±æ˜¯ä»¥è¿™ä¸ªç‚¹ä¸ºæ‹ç‚¹çš„æœ€é•¿è·¯å¾„ï¼Œè¿™æ ·å¯¹æ¯ä¸ªç‚¹çš„æœ€é•¿è·¯å¾„å–ä¸€ä¸ª $max$ å°±å¯ä»¥äº†ã€‚</p>
<p>é‚£ä¹ˆæ€ä¹ˆå¯¹æ¯ä¸€ä¸ªç‚¹éƒ½æ‰¾åˆ°è¿™æ ·ä¸€æ¡æœ€é•¿è·¯å¾„å‘¢ï¼Ÿ</p>
<p>æ±‚ä»¥ $i$ ç‚¹å‡ºå‘å‘ä¸‹çš„æœ€é•¿è·¯å’Œæ¬¡é•¿è·¯ï¼Œåˆ†åˆ«ç”¨ $f_i$ å’Œ $g_i$ æ¥è¡¨ç¤ºã€‚</p>
<p>å¯¹äºå¶å­èŠ‚ç‚¹ï¼Œä¸¤ä¸ªé‡éƒ½æ˜¯ 0ã€‚</p>
<p>è½¬ç§»ï¼Ÿ</p>
<p>$f_i&#x3D;max(f_{p_j})+1$ï¼Œ$g_i$å‘¢ï¼Ÿï¼Œå‡å¦‚å…ˆèµ°äº† $p_3$ ï¼Œé‚£ä¹ˆæ¬¡é•¿è·¯å°±ä¸€å®šä¸èƒ½æ˜¯ $p_3$ å› ä¸ºè¿™æ ·å°±æŠŠ $i\leftrightarrow{p_3}$ èµ°äº†ä¸¤éï¼Œæ‰€ä»¥ $g_i&#x3D;second_max(f_{p_j})+1$</p>
<p>æœ€åçš„ç­”æ¡ˆä¸º $max(f_i+g_i)$</p>
<p>å¤æ‚åº¦ä¸º $O(n)$</p>
<h2 id="è·¯å¾„"><a href="#è·¯å¾„" class="headerlink" title="è·¯å¾„"></a>è·¯å¾„</h2><blockquote>
<p>æ±‚æ ‘ä¸Šæ‰€æœ‰è·¯å¾„é•¿åº¦å’Œ</p>
</blockquote>
<p>$f_i$ è¡¨ç¤ºä»¥ $i$ ä¸ºæ ¹èŠ‚ç‚¹çš„å­æ ‘çš„è·¯å¾„å’Œï¼Œå¶å­èŠ‚ç‚¹ä¸º0ï¼Œè½¬ç§»ï¼Ÿæ²¡æ³•è½¬ç§»ï¼Œå› ä¸ºä¼šæœ‰è·¨è¶Šä¸åŒå­æ ‘çš„è·¯å¾„ï¼Œè¿˜è¦ç»´æŠ¤ä¸€ä¸ª $g_i$ è¡¨ç¤ºæ‰€æœ‰ç‚¹åˆ°æ ¹èŠ‚ç‚¹çš„è·ç¦»ä¹‹å’Œã€‚</p>
<p>$g_{p_1}+siz_{p_1}$ å°±æ˜¯æ‰€æœ‰ç‚¹åˆ° $i$ çš„è·¯å¾„é•¿åº¦ä¹‹å’Œï¼Œå®ƒä»¬åˆ°å…¶å®ƒå­æ ‘ä¹Ÿè¦ç®—ä¸Šï¼Œä¹Ÿå°±æ˜¯ $(g_{p_1}+siz_{p_1})\times(siz_i-siz_{p_1})$ ï¼Œå› ä¸ºè¿™è·³è·¯å¾„ä¼šè¢«ç®—è¿™ä¹ˆå¤šæ¬¡ã€‚</p>
<p>æ‰€ä»¥ï¼š</p>
<p>$$<br>f_i&#x3D;\sum_{j\in{son_i}}f_{p_j}+(g_{p_j}+siz_{p_j}\times{val_{i\leftrightarrow{j}}})\times(siz_i-siz_{p_j})<br>$$</p>
<p>ä½†æ˜¯è¿™æ ·å¤ªå¤æ‚äº†ï¼Œæ€ä¹ˆä¼˜åŒ–å‘¢ï¼Ÿ</p>
<p>å…¶å®æˆ‘ä»¬åªéœ€è¦ DP ä¸€ä¸ªä¸œè¥¿ï¼š $siz_i$</p>
<p>è¿™ä¸ªå°±å·²ç»è¶³å¤Ÿäº†ã€‚</p>
<p>ç­”æ¡ˆå¼ï¼š</p>
<p>$$<br>\sum_{i&#x3D;2}^n{siz_i\times{n-siz_i}\times{2}}<br>$$</p>
<p>åˆšæ‰æˆ‘ä»¬æ˜¯ä»¥ç‚¹çš„è§’åº¦è€ƒè™‘çš„ï¼Œä¸å¦¨æ¢ä¸€ç§è§’åº¦ï¼Œè€ƒè™‘æ¯æ¡è¾¹ã€‚</p>
<p>è€ƒè™‘æœ‰å¤šå°‘æ¡è·¯å¾„åŒ…å«äº†è¿™æ¡è¾¹ï¼Œè¿™æ¡è¾¹çš„å·¦è¾¹æœ‰ä¸€ä¸ªå­æ ‘ï¼Œåœ¨è¿™ä¸ªå­æ ‘å†…ä»»æ„ä¸€ä¸ªç‚¹å‡ºå‘ï¼Œä»¥è¿™ä¸ªå­æ ‘å¤–ä»»æ„ä¸€ç‚¹ä¸ºç»ˆç‚¹ï¼Œéƒ½ä¼šç»è¿‡è¿™æ¡è¾¹ï¼Œè€Œèµ·ç‚¹å’Œç»ˆç‚¹åˆå¯ä»¥äº¤æ¢ï¼Œæ‰€ä»¥æ˜¯è¿™äº›ã€‚<strong>æ³¨æ„ä¸åŒ…å«æ ¹èŠ‚ç‚¹ï¼Œå› ä¸ºæˆ‘ä»¬å®é™…è€ƒè™‘çš„æ˜¯è¾¹çš„è´¡çŒ®</strong>ã€‚</p>
<h2 id="æ ‘çš„æœ€å¤§ç‹¬ç«‹é›†"><a href="#æ ‘çš„æœ€å¤§ç‹¬ç«‹é›†" class="headerlink" title="æ ‘çš„æœ€å¤§ç‹¬ç«‹é›†"></a>æ ‘çš„æœ€å¤§ç‹¬ç«‹é›†</h2><blockquote>
<p>é—®ä¸€ä¸ªæ ‘æœ€å¤šèƒ½å–å‡ºå¤šå°‘ä¸ªç‚¹ä½¿å¾—è¿™äº›ç‚¹éƒ½ä¸ç›¸é‚»ã€‚</p>
</blockquote>
<p>çŠ¶æ€ä¸º $f_{i,0&#x2F;1}$ ä»£è¡¨ç¬¬ $i$ ä¸ªç‚¹é€‰&#x2F;ä¸é€‰æ—¶å­æ ‘æœ€å¤§ç‹¬ç«‹é›†çš„å¤§å°ã€‚</p>
<p>åˆå§‹åŒ–çš„è¯å°±æ˜¯å¯¹äºæ¯ä¸ªå¶å­èŠ‚ç‚¹ï¼Œ$f_{i,0}&#x3D;0,f_{i,1}&#x3D;1$</p>
<p>é‚£ä¹ˆè½¬ç§»å‘¢ï¼Ÿ</p>
<p>å¦‚æœ $i$ è¿™ä¸ªç‚¹é€‰äº†ï¼Œé‚£ä¹ˆå®ƒæ‰€æœ‰çš„å„¿å­éƒ½ä¸èƒ½é€‰ï¼Œä¹Ÿå°±æ˜¯ï¼š</p>
<p>$f_{i,1}&#x3D;\sum_{j\in{son_i}}f_{j,0}+1$</p>
<p>ä¸é€‰å°±æ— æ‰€è°“äº†</p>
<p>$f_{i,0}&#x3D;\sum_{j\in{son_i}}\max(f_{j,0},f_{j,1})$</p>
<h2 id="å£«å…µ"><a href="#å£«å…µ" class="headerlink" title="å£«å…µ"></a>å£«å…µ</h2><blockquote>
<p>åœ¨ä¸€æ£µæ ‘ä¸Šå¸ƒç½®å£«å…µï¼Œæ¯ä¸ªå£«å…µåœ¨èŠ‚ç‚¹ä¸Šï¼Œæ¯ä¸ªå£«å…µå¯ä»¥å®ˆæŠ¤ä¸å…¶ç›¸è¿çš„ç‚¹ï¼Œé—®æœ€å°‘éœ€è¦å¤šå°‘ä¸ªå£«å…µã€‚</p>
</blockquote>
<p>ç¬¬ä¸€ç»´è¿˜æ˜¯æŒ‡ä»¥ $i$ ä¸ºæ ¹çš„å­æ ‘ï¼Œè¿™ä¸ªæ ¹èŠ‚ç‚¹æœ‰ä¸‰ç§æƒ…å†µï¼Œä¸€ä¸ªæ˜¯è‡ªå·±å®ˆæŠ¤è‡ªå·±ï¼Œä¸€ä¸ªæ˜¯å®ƒçš„å„¿å­å®ˆæŠ¤å®ƒï¼Œä¸€ä¸ªæ˜¯å®ƒçš„çˆ¶äº²å®ˆæŠ¤å®ƒã€‚</p>
<p>$0-son,1-self,2-fa$</p>
<p>å¯¹äºå¶å­èŠ‚ç‚¹ï¼Œ$f_{i,0}&#x3D;inf,f_{i,1}&#x3D;1,f_{i,2}&#x3D;0$</p>
<p>è½¬ç§»ï¼Ÿ</p>
<p>$$<br>\begin{aligned}<br>f_{i,0}&amp;&#x3D;\sum_{j\in{son_i}}\<br>f_{i,1}&amp;&#x3D;\sum_{j\in{son_i}}\min(f_{j,0},f_{j,1},f_{j,2})+1\<br>f_{i,2}&amp;&#x3D;\sum_{j\in{son_i}}f_{j,0}\<br>\end{aligned}<br>$$</p>
<p>è¢«çˆ¶äº²å®ˆæŠ¤æ—¶ï¼Œä¸èƒ½è¢«å„¿å­å®ˆæŠ¤ï¼Œå› ä¸ºè¿™æ ·ä¼šé‡å¤è®¡ç®—ï¼ŒåŒç†åœ¨è®¡ç®—è¢«å„¿å­å®ˆæŠ¤æ—¶ä¸èƒ½è®¡ç®—è¢«çˆ¶äº²å®ˆæŠ¤ã€‚</p>
<p>è¢«å„¿å­å®ˆæŠ¤æ—¶ï¼Œè‡³å°‘ä¸€ä¸ªå„¿å­è¦æœ‰å£«å…µï¼Œå¸¸è§æŠ€å·§ï¼šèšåˆå„¿å­æ—¶ï¼Œéœ€è¦ç”¨å¦å¤–ä¸€ä¸ª DP æ¥ç»´æŠ¤è½¬ç§»ã€‚</p>
<p>è®¾ $g_{k,0&#x2F;1}$ ä»£è¡¨å·²ç»è€ƒè™‘å®Œäº†å‰ $k$ ä¸ªå„¿å­ï¼Œæ˜¯å¦è‡³å°‘æœ‰ä¸€ä¸ªå„¿å­æ”¾äº†å£«å…µçš„æ‰€å¾—åˆ°çš„æœ€å°å£«å…µæ•°é‡ã€‚</p>
<p>è½¬ç§»ï¼š</p>
<p>$$<br>g_{k,0}&#x3D;g_{k-1,0}+f_{p_k,0}<br>$$</p>
<p>$$<br>g_{k,1}&#x3D;\min(g_{k-1,0}+f_{p_k,1},g_{k-1,1}+f_{p_k,0},g_{k-1,1}+f_{p_k,1})<br>$$</p>
<p>è¿™ä¸ª DP å°±æ˜¯ä¸ºäº†èšåˆè½¬ç§» $f_{i,0}$ çš„ã€‚</p>
<p>å‡å¦‚ $i$ æœ‰ $r$ ä¸ªå„¿å­ï¼Œé‚£ä¹ˆ $f_{i,0}&#x3D;g_{r,1}$</p>
<p>æ ‘å½¢DPçš„æ—¶å€™å¸¸ç”¨DPæ¥åšèšåˆã€‚</p>
<h2 id="ä¾èµ–èƒŒåŒ…-1"><a href="#ä¾èµ–èƒŒåŒ…-1" class="headerlink" title="ä¾èµ–èƒŒåŒ…"></a>ä¾èµ–èƒŒåŒ…</h2><blockquote>
<p><strong>æ ‘å½¢èƒŒåŒ…</strong><br>$n$ ä¸ªç‰©å“å½¼æ­¤ç»„æˆä¸€ä¸ªæ ‘ï¼Œå¦‚æœæƒ³é€‰ç¬¬ $i$ ç§ç‰©å“ï¼Œå¿…é¡»å…ˆé€‰å®ƒçš„çˆ¶äº²ï¼Œé—®è·å¾—çš„æœ€å¤§ä»·å€¼ã€‚</p>
</blockquote>
<p>çŠ¶æ€ï¼š$f_{i,j}$ å‰ $i$ ç§ç‰©å“ç”¨äº† $j$ çš„ä½“ç§¯æ‰€å¾—åˆ°çš„æœ€å¤§ä»·å€¼ $\to$ åœ¨ $i$ çš„å­æ ‘ä¸­é€‰ä¸€äº›ç‰©å“ç”¨äº† $j$ çš„ä½“ç§¯æ‰€èƒ½è·å¾—çš„æœ€å¤§ä»·å€¼ã€‚</p>
<p>åˆå§‹åŒ–ï¼š å¶å­èŠ‚ç‚¹ $f_{i,0}&#x3D;0,f_{i,w_i}&#x3D;v_i,f_{i,j}&#x3D;-inf$</p>
<p>è½¬ç§»ï¼š èšåˆçš„æ—¶å€™å°±è¦å†åšä¸€ä¸ªèƒŒåŒ…ï¼š</p>
<p>$g_{i,j}$ ä»£è¡¨å‰ $i$ ä¸ªå„¿å­çš„å­æ ‘å·²ç»ç”¨æ‰äº† $j$ çš„ä½“ç§¯å¾—åˆ°çš„æœ€å¤§ä»·å€¼ï¼Œ$g_{0,0}&#x3D;0,g_{0,j}&#x3D;-inf$ï¼Œè½¬ç§»å°±æšä¸¾ä¸€ä¸‹ç¬¬ $i$ ä¸ªå„¿å­ç”¨æ‰äº†å¤šå°‘ä¸ªä½“ç§¯ï¼š</p>
<p>$$<br>g_{i,j}&#x3D;\max_{0\le{k}\le{j}}(g_{i-1,j-k}+f_{i,k})<br>$$</p>
<p>$$<br>f_{i,0}&#x3D;0,f_{i,j}&#x3D;g_{r,j-v_i}+w_i<br>$$</p>
<p>æ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªä¸æ–­ç”¨ $f$ æ±‚ $g$ ï¼Œå†ç”¨ $g$ æ±‚ $f$ çš„åšæ³•ã€‚</p>
<p>å¤æ‚åº¦ä¸º $O(n\times{m^2})$</p>
<hr>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P2014" >é€‰è¯¾<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">305</span>;</span><br><span class="line"><span class="type">int</span> n,m,edcnt;</span><br><span class="line"><span class="type">int</span> f[N][N];</span><br><span class="line"><span class="type">int</span> s[N];</span><br><span class="line"><span class="type">int</span> fir[N];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> to,nxt;</span><br><span class="line">&#125;e[N];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++edcnt].to=v;</span><br><span class="line">    e[edcnt].nxt=fir[u];</span><br><span class="line">    fir[u]=edcnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=fir[u];i;i=e[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> v=e[i].to;</span><br><span class="line">        <span class="built_in">dfs</span>(v);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=m<span class="number">+1</span>;j&gt;=<span class="number">1</span>;j--)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">0</span>;k&lt;j;k++)</span><br><span class="line">                f[u][j]=<span class="built_in">max</span>(f[u][j],f[v][k]+f[u][j-k]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> k;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;k,&amp;s[i]);</span><br><span class="line">        f[i][<span class="number">1</span>]=s[i];</span><br><span class="line">        <span class="built_in">add</span>(k,i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,f[<span class="number">0</span>][m<span class="number">+1</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="æ•°ä½DP"><a href="#æ•°ä½DP" class="headerlink" title="æ•°ä½DP"></a>æ•°ä½DP</h1><h2 id="DP-æ–¹å¼"><a href="#DP-æ–¹å¼" class="headerlink" title="DP æ–¹å¼"></a>DP æ–¹å¼</h2><blockquote>
<p><a class="link"   href="https://zhuanlan.zhihu.com/p/613107701" >å‚è€ƒæ–‡ç« <i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a><br>è¿­ä»£ or è®°æœï¼Ÿ</p>
</blockquote>
<p>è®°æœï¼</p>
<p>ä¸è¦å†™è¿­ä»£ï¼Œåˆéš¾æƒ³åˆéš¾è°ƒã€‚</p>
<p>å¸¸ç”¨å½¢å‚ï¼š</p>
<ul>
<li><p>$pos$ ä»£è¡¨å½“å‰æšä¸¾åˆ°çš„ä½ç½®ï¼Œ</p>
</li>
<li><p>$limit$ ä»£è¡¨å½“å‰è¿™ä½æ‰€å—é™åˆ¶ï¼ˆtrue æœ‰é™åˆ¶ï¼Œfalse æ— é™åˆ¶ï¼‰</p>
</li>
<li><p>$ans$ è®°å½•å‰ $i$ ä½çš„ç­”æ¡ˆã€‚</p>
</li>
</ul>
<p>è®¾çŠ¶æ€ $f_{pos,sum}$ ä»£è¡¨ä½ç½® $[pos+1,len]$ å·²ç»å¡«å®Œäº†ï¼Œè¿™äº›æ•°ä½ä¹‹å’Œåœ¨ $sum$ çš„æƒ…å†µä¸‹ï¼Œæ•°ä½ $[1,pos]$ æ—  $limit$ çš„æƒ…å†µä¸‹ï¼Œæ‰€æœ‰æ•°çš„æ•°ä½ä¹‹å’Œã€‚</p>
<ul>
<li>$last$ è®°å½•ä¸Šä¸€ä½é€‰çš„æ•°ï¼Œé€šå¸¸æ˜¯ä¸ºäº†é™åˆ¶å½“å‰ä½ã€‚</li>
<li>$lead$ æ˜¯å¦æœ‰å‰å¯¼é›¶ã€‚</li>
<li>$r$ ä½™æ•°</li>
<li>$st$ çŠ¶æ€å‹ç¼©</li>
</ul>
<p>ä¸€èˆ¬é€’å½’æ ‘ä¸­åªæœ‰å¶å­èŠ‚ç‚¹å­˜å‚¨çš„æ˜¯è¯¥èŠ‚ç‚¹çŠ¶æ€çš„ç­”æ¡ˆï¼Œå…¶å®ƒèŠ‚ç‚¹éƒ½æ˜¯ç´¯åŠ äº†å®ƒä»¥åŠå®ƒå­æ ‘çš„çŠ¶æ€çš„ç­”æ¡ˆã€‚</p>
<p>è€Œä¸”åˆå§‹çŠ¶æ€å·²ç»ä»¥å½¢å‚çš„å½¢å¼ä¼ å…¥åˆ°å‡½æ•°å½“ä¸­ï¼Œæ— éœ€è´¹å¿ƒåˆå§‹åŒ–ã€‚</p>
<p>$\text{dp}$ æ•°ç»„çš„ä¸‹æ ‡è¡¨ç¤ºçš„æ˜¯ä¸€ç§çŠ¶æ€ï¼Œç‹¬ä¸€æ— äºŒçš„çŠ¶æ€ï¼Œä¸€ä¸ªçŠ¶æ€æ˜¯å¦è¦è®°å½•å–å†³äºå®ƒæ˜¯å¦è¶³å¤Ÿç‰¹æ®Šï¼Œæ˜¯å¦å¯¹ç­”æ¡ˆæœ‰å½±å“ã€‚</p>
<p>è€Œæœ‰é™åˆ¶å’Œæ— é™åˆ¶å¯¹åº”çš„çŠ¶æ€åˆä¸åŒï¼Œå› æ­¤å½“é™åˆ¶å¯¹ç­”æ¡ˆæ•°ä¼šäº§ç”Ÿå½±å“æ—¶ï¼Œè¦å…ˆåˆ¤æ–­æ²¡æœ‰é™åˆ¶ï¼Œå†è®°å¿†ç­”æ¡ˆã€‚</p>
<p>å¦‚ä½•åˆ¤æ–­è®°å¿†åŒ–çš„å€¼èƒ½å¦å¤ç”¨ï¼Ÿ</p>
<p>çœ‹ä¸‹æ¯æ¬¡é€’å½’ï¼Œå½±å“ç­”æ¡ˆçš„å‚æ•°æ˜¯å¦æœ‰æ”¹å˜ï¼Ÿ</p>
<p>æ˜¯å¦æ˜¯åœ¨éé™åˆ¶æ¡ä»¶ä¸‹è®°å½•çš„ç­”æ¡ˆï¼Ÿ</p>
<p>æ˜¯å¦æ˜¯åœ¨æ²¡æœ‰å‰å¯¼é›¶çš„æ¡ä»¶ä¸‹è®°å½•çš„ç­”æ¡ˆï¼Ÿ</p>
<p>æ˜¯å¦æ¨¡æ•°ä¸åŒï¼Ÿ</p>
<p>éƒ½è¦è€ƒè™‘ã€‚</p>
<h2 id="æ•°çš„ä¸ªæ•°"><a href="#æ•°çš„ä¸ªæ•°" class="headerlink" title="æ•°çš„ä¸ªæ•°"></a>æ•°çš„ä¸ªæ•°</h2><p>ä¸¾ä¸ªä¾‹å­ï¼šç»™ä½ ä¸¤ä¸ªæ•´æ•° $l,r$ï¼Œé—® $[l,r]$ æœ‰å¤šå°‘ä¸ªæ•°ï¼Œæ˜¾ç„¶ç­”æ¡ˆæ˜¯ $r-l+1$ ï¼Œé‚£ä¹ˆæ€ä¹ˆç”¨æ•°ä½DPæ¥è§£å†³ï¼Œæ•°ä½DPçš„ç‰¹å¾ä¸€èˆ¬ä¸º $[l,r]$ ä¸­æ»¡è¶³æŸç§æ¡ä»¶çš„æ•°æœ‰å¤šå°‘ä¸ªã€‚</p>
<p>é‚£å°±å¯ä»¥è½¬åŒ–ä¸º $[0,r]$ ä¸­æ»¡è¶³æ¡ä»¶çš„æ•°çš„ä¸ªæ•°å‡å» $[0,l-1]$ ä¹‹é—´æ»¡è¶³æ¡ä»¶çš„æ•°ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬å°±æ˜¯è¯¢é—® $[0,x]$ è¿™æ®µåŒºé—´å†…æœ‰å¤šå°‘ä¸ªæ•°äº†ã€‚</p>
<p>æŠŠ $x$ çš„æ¯ä¸€ä½ $x_i$ éƒ½å†™ä¸‹æ¥ï¼Œæœ€é«˜ä½ä¸º $k$ã€‚</p>
<p>æˆ‘ç°åœ¨è¦æ‰¾ $y$ æ»¡è¶³ $0\le{y}\le{x}$ï¼ŒæŠŠ $y$ çš„æ¯ä¸€ä½ $y_i$ ä¹Ÿå†™ä¸‹æ¥ï¼Œ</p>
<p>ä¹Ÿå°±æ˜¯ $y_i$ æœ‰å¤šå°‘ç§æ–¹æ¡ˆä½¿å¾—æ¯ä¸€ä½çš„ $y\le x$ ï¼Œæ‰€ä»¥å°±ä»é«˜ä½å¾€ä½ä½ä¾æ¬¡å»å¡«ï¼Œ</p>
<p><strong>çŠ¶æ€</strong> $f_{i,0&#x2F;1}$ ä»£è¡¨<strong>ä»é«˜åˆ°ä½</strong>å¡«åˆ°ç¬¬ $i$ ä½äº†å½“å‰å·²ç»å¡«çš„è¿™äº›ä½æ˜¯<strong>ç­‰äº</strong> $x$ çš„è¿™äº›ä½<strong>è¿˜æ˜¯å°äº</strong> $x$ çš„è¿™äº›ä½ï¼Œè¿™ç§æƒ…å†µä¸‹çš„æ–¹æ¡ˆæ•°ã€‚</p>
<p>å…¶ä¸­ï¼Œ$0\to&lt;,1\to&#x3D;$</p>
<p>åˆå§‹åŒ– $f_{k+1,1}&#x3D;1$ï¼Œç¬¬$k+1$ ä½ä¸¤ä¸ªæ•°éƒ½æ˜¯é›¶ï¼Œæ‰€ä»¥ä¸¤æ•°ç›¸ç­‰ã€‚</p>
<p>è½¬ç§»ï¼š</p>
<p>$$<br>f_{i-1,0}+&#x3D;f_{i,0}\times{10}<br>$$</p>
<p>å› ä¸ºé«˜ä½å·²ç»å°äºäº†ï¼Œæ‰€ä»¥å†å¾€ä½ä¸€ä½å¡« $0\sim{9}$ éƒ½å¯ä»¥ï¼Œæ‰€ä»¥å°±æ˜¯ä¹˜åã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=x[i<span class="number">-1</span>];j++)</span><br><span class="line">	f[i<span class="number">-1</span>][x[i<span class="number">-1</span>]==j]+=f[i][<span class="number">1</span>]; <span class="comment">// å¦‚æœè¿™ä¸€ä½è¿˜ç›¸ç­‰ï¼Œé‚£ä¹ˆå°±è½¬ç§»åè¿˜æƒ³ç­‰ï¼Œå¦åˆ™å¡«å®Œåå°±æ˜¯å°äºã€‚</span></span><br></pre></td></tr></table></figure></div>

<p>æœ€åçš„ç­”æ¡ˆå°±æ˜¯ $f_{1,0}+f_{1,1}$ ä»£è¡¨ $0\sim{x}$ å°äºç­‰äº $x$ çš„æ•°çš„ä¸ªæ•°ã€‚</p>
<p>æ•°ä½DPå¾ˆå¸¸ç”¨ä¸€ä¸ªå‰ç¼€å’Œä¼˜åŒ–ã€‚</p>
<p>çŠ¶æ€è®¾è®¡å¸¸ç”¨ $f_{i,j}$ï¼Œ$i$ è¡¨ç¤ºå¡«åˆ°ç¬¬ $i$ ä½äº†ï¼Œ$j$ é€šå¸¸è¡¨ç¤ºæ¡ä»¶æ˜¯å¦æ»¡è¶³ï¼Œä»¥æ­¤å†³å®šä¸‹ä¸€ä½èƒ½å¡«çš„æ•°æ˜¯å¤šå°‘ï¼Œåˆå§‹åŒ–å°±è¦ä¿è¯ä¸¤ä¸ªæ•°éƒ½æ²¡å¼€å§‹å¡«çš„æ–¹æ¡ˆä¸º $1$ï¼Œè½¬ç§»å°±æšä¸¾ä¸‹ä¸€ä½å¡«ä»€ä¹ˆæ•°ã€‚</p>
<h2 id="æ•°ä½ä¹‹å’Œ"><a href="#æ•°ä½ä¹‹å’Œ" class="headerlink" title="æ•°ä½ä¹‹å’Œ"></a>æ•°ä½ä¹‹å’Œ</h2><blockquote>
<p>æ±‚ä¸€ä¸ª $[l,r]$ æ¯ä¸ªæ•°æ¯ä¸€ä½åŠ èµ·æ¥çš„ç»“æœã€‚</p>
</blockquote>
<p>å…ˆè½¬ä¸ºå‰ç¼€å’Œï¼š$[0,x]$</p>
<p>è¿˜æ˜¯è€çŠ¶æ€ $g_{i,0&#x2F;1}$ å€¼ä¾¿ä¸ºæ­¤æ—¶çš„æ•°ä½ä¹‹å’Œï¼Œåœ¨ä½ å¡«ä¸‹ä¸€ä½çš„æ—¶å€™ï¼Œè¦è€ƒè™‘å½“å‰æœ‰å¤šå°‘ä¸ªæ•°ï¼Œè€Œæ•°ä½ä¹‹å’Œå°±ä¼šå¤šå‡ºè¿™ä¹ˆå¤šå€ï¼Œæ‰€ä»¥æˆ‘è¿˜è¦ç»´æŠ¤è¿™æ ·çš„æ•°æœ‰å¤šå°‘ä¸ªï¼ŒæŠŠä¸Šä¸€ä¸ªé¢˜çš„ $f_{i,j}$ ä»£è¡¨è¿™æ ·çš„æ•°æœ‰å¤šå°‘ä¸ªã€‚</p>
<p>è½¬ç§»å’Œä¸Šé¢æ˜¯åŒæ ·çš„ï¼Œåªä¸è¿‡è¦åŠ ä¸Šå½“å‰å¡«çš„æ•°èƒ½å¡«å¤šå°‘ä¸ª $+&#x3D;x\times{f_{i,j}}$ï¼Œ$x$ä¸ºå½“å‰ä½ç½®å¡«çš„æ•°ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">g[i<span class="number">-1</span>][j&amp;&amp;(r==y[i<span class="number">-1</span>])]+=g[i][j]+f[i][j]*r;</span><br></pre></td></tr></table></figure></div>

<p>$g$ ä»£è¡¨æ•°ä½ä¹‹å’Œã€‚</p>
<p>åˆå¹¶ä¸€ä¸‹ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=k<span class="number">+1</span>;i&gt;=<span class="number">2</span>;i--)<span class="comment">//ç¬¬iä½å·²ç»å¡«å¥½äº†ï¼Œè¦å¡«çš„æ˜¯ç¬¬i-1ä½</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=<span class="number">1</span>;j++)</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> r=<span class="number">0</span>;r&lt;=<span class="number">9</span>;r++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(j==<span class="number">1</span>&amp;&amp;r&gt;y[i<span class="number">-1</span>]) <span class="keyword">continue</span>;<span class="comment">//break;// ä¸ç”¨è½¬ç§»ï¼Œå› ä¸ºå‡å¦‚ç›¸ç­‰åå†æœ‰ä¸€ä¸ªå¤§äº x çš„æ•°ï¼Œé‚£ä¹ˆè¿™æ•´ä¸ªæ•°å°±æ›´å¤§äº†</span></span><br><span class="line">			f[i<span class="number">-1</span>][j&amp;&amp;(r==y[i<span class="number">-1</span>])]+=f[i][j]; <span class="comment">// éƒ½æ»¡è¶³æ‰ç›¸ç­‰</span></span><br><span class="line">			g[i<span class="number">-1</span>][j&amp;&amp;(r==y[i<span class="number">-1</span>])]+=g[i][j]+f[i][j]*r;</span><br><span class="line">		&#125;</span><br></pre></td></tr></table></figure></div>

<p>ç­”æ¡ˆå°±æ˜¯ $g_{1,0}+g_{1,1}$ã€‚</p>
<h2 id="å·®äºŒ"><a href="#å·®äºŒ" class="headerlink" title="å·®äºŒ"></a>å·®äºŒ</h2><blockquote>
<p>æ±‚ $[l,r]$ ä¹‹é—´æ»¡è¶³ç›¸é‚»ä¸¤ä¸ªæ•°ä¹‹é—´å·®<strong>è‡³å°‘ä¸º</strong> $2$ çš„æ•°æœ‰å¤šå°‘ä¸ª</p>
</blockquote>
<p>é¢˜ç›®åŠ äº†ä¸€ä¸ªæ¡ä»¶ï¼Œå¾ˆè‡ªç„¶çš„æƒ³æ³•å°±æ˜¯å†åŠ ä¸€ä¸ªç»´åº¦ï¼Œå¹¶ä¸”è¿™ä¸ªç»´åº¦å¿…ç„¶ä¼šå½±å“æˆ‘çš„è½¬ç§»ï¼Œä¸ç„¶æœ‰å•¥ä»·å€¼ã€‚</p>
<p>è®¾ $f_{i,j,k}$ å‰ä¸¤ç»´éƒ½ä¸€æ ·ï¼Œç¬¬ä¸‰ç»´è®°å½•äº† $i$ è¿™ä¸€ä½å¡«ä»€ä¹ˆã€‚</p>
<p>å¡«ç¬¬ $i-1$ ä½çš„æ—¶å€™ï¼Œä½¿å¾— $r-k\ge{2}$ å°±å¯ä»¥äº†ã€‚</p>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P2657" >P2657<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>æ³¨ï¼šè€Œè¿™ä¸ªé¢˜è¿˜éœ€è¦å¤„ç†å‰å¯¼é›¶çš„æƒ…å†µã€‚</p>
<h2 id="å›æ–‡æ•°"><a href="#å›æ–‡æ•°" class="headerlink" title="å›æ–‡æ•°"></a>å›æ–‡æ•°</h2><blockquote>
<p>æ±‚ $[l,r]$ ä¹‹é—´æœ‰å¤šå°‘ä¸ªå›æ–‡æ•°ï¼Œä¸å…è®¸å‰å¯¼é›¶å­˜åœ¨ã€‚</p>
</blockquote>
<p>è®¾ $f_{i,j,k}$ å‰ä¸¤ç»´ä¾æ—§ç›¸åŒï¼Œè€Œæ‰¾å›æ–‡æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸ä»…è¦æ¯”è¾ƒé«˜ä½ä¸ $x$ çš„å¤§å°å…³ç³»ï¼Œè¿˜è¦æ¯”è¾ƒä½ä½ä¸ $x$ çš„å¤§å°å…³ç³»ã€‚</p>
<p>æ‰€ä»¥ $k$ å– $0,1,2$ ï¼Œåˆ†åˆ«ä»£è¡¨å°äºï¼Œç­‰äºï¼Œå¤§äºã€‚</p>
<p>$j$ ä»£è¡¨æ­£ç€å¡«æ—¶ä¸ $x$ çš„å¤§å°å…³ç³»ï¼Œè€Œ $k$ ä»£è¡¨å¯¹ç§°é‚£è¾¹ä¸ $x$ çš„å¤§å°å…³ç³»ã€‚</p>
<p>å› ä¸ºåªè¦å‰é¢æ¯” $x$ å°ï¼Œåé¢æ˜¯å¯ä»¥æ¯” $x$ å¤§çš„ï¼Œæ‰€ä»¥å¯ä»¥å¡« $2$ã€‚</p>
<p>ç„¶åæšä¸¾ä¸€éå°±å¯ä»¥äº†ã€‚</p>
<h2 id="ç§¯K"><a href="#ç§¯K" class="headerlink" title="ç§¯K"></a>ç§¯K</h2><blockquote>
<p>æ±‚ $[l,r]$ ä¹‹é—´æ»¡è¶³å„ä½æ•°å­—ä¹‹ç§¯ä¸º $K$ çš„æ•°çš„ä¸ªæ•°ï¼Œ$l,r,k\le{10^{18}}$ã€‚</p>
</blockquote>
<p>è®¾ $f_{i,j,r}$ ä»£è¡¨å„ä½æ•°ä¹‹ç§¯ä¸º $r$ çš„æ–¹æ¡ˆæ•°ï¼Œè™½ç„¶å¼€ä¸ä¸‹ï¼Œä½†æ˜¯å…ˆè¿™ä¹ˆæƒ³å†è€ƒè™‘ä¼˜åŒ–ã€‚</p>
<p>å‡å¦‚ä½¿ $K&#x3D;111$ï¼Œé‚£ä¹ˆä¸€å®šåœ¨æŸä¸ªä½ç½®æœ‰ $3\times{37}$ï¼Œè€Œç”±äºæ˜¯ä¸€ä½ä¸€ä½çš„ä¹˜ï¼Œæ‰€ä»¥æœ€åå®ƒä¸€å®šåªæœ‰ $4$ ä¸ªè´¨å› å­ï¼š$2,3,5,7$ï¼Œå› ä¸ºä¸€æ—¦æœ‰å…¶å®ƒè´¨å› å­å°±ç›´æ¥è¾“å‡ºæ— è§£å°±å¯ä»¥äº†ã€‚</p>
<p>æ‰€ä»¥ $f_{i,j,a,b,c,d}$ æŠŠä¹˜ç§¯ä¸º $r$ æ¢æˆäº† ä¹˜ç§¯ç”¨ $2^a+3^b+5^c+7^d$ è¡¨ç¤ºã€‚</p>
<p>è¿™ä¸ªæ—¶å€™å°±å¯ä»¥æ­£å¸¸è¿›è¡Œ DP äº†ã€‚</p>
<p>è¿™æ ·è¿˜æ²¡å®Œï¼Œè¦è€ƒè™‘ $K$ æ˜¯å¦ä¸º $0$ï¼Œå¦‚æœä¸º $0$ï¼Œé‚£ä¹ˆä¸€å®šå­˜åœ¨æŸä½æ˜¯ $0$ï¼Œéœ€è¦å†å¼€ä¸€ç»´è®°å½•å‰ $i$ ä½æ˜¯å¦æœ‰ $0$ï¼›å¦‚æœä¸æ˜¯é‚£ä¹ˆå¿…ç„¶ä¸å­˜åœ¨æŸä½ä¸º $0$ã€‚</p>
<p>è¿˜è¦å¤„ç†ä¸€ä¸‹å‰å¯¼é›¶çš„æƒ…å†µã€‚</p>
<h2 id="F"><a href="#F" class="headerlink" title="F"></a>F</h2><blockquote>
<p>ç»™å®šä¸€ä¸ªåŒºé—´ $[l,r]$ï¼Œå®šä¹‰å‡½æ•° $f(x)$ ä»£è¡¨ $x$ æ¯ç›¸é‚»ä¸¤ä½å·®çš„ç»å¯¹å€¼ä¹‹å’Œï¼Œç°åœ¨è¦åœ¨ $[l,r]$ ä¹‹é—´æ‰¾è¿™æ ·ä¸€ä¸ªæœ€å¤§çš„ $f(x)$ã€‚</p>
</blockquote>
<p>è¿™é“é¢˜è¿˜èƒ½æ‹†æˆå‰ç¼€å’Œæ¥åšå—ï¼Ÿ</p>
<p>$\max$ ä¸å¯ä»¥é€šè¿‡å‰ç¼€å’Œæ¥åšçš„ï¼Œæ‰€ä»¥ $l,r$ æ‹†ä¸å¼€äº†ã€‚</p>
<p>å®šä¹‰ $f_{i,j,k}$ ä»£è¡¨ä»é«˜å‘ä½å¡«åˆ°ç¬¬ $i$ ä½ï¼Œ$j$ ä»£è¡¨å½“å‰å¡«çš„æ•°ä¸ $r$ çš„è¿™äº›ä½æ•°ç›¸æ¯”æ˜¯å°äºè¿˜æ˜¯ç­‰äºï¼Œ$k$ ä»£è¡¨å½“å‰å¡«çš„è¿™äº›æ•°ä¸ $l$ çš„è¿™äº›ä½æ•°æ˜¯å¤§äºè¿˜æ˜¯ç­‰äºã€‚</p>
<p>æ—¢ç„¶æœ‰ä¸¤ä¸ªé™åº¦ï¼Œé‚£å°±å†å¼€ä¸€ç»´è®°å½•ã€‚</p>
<p>åŒæ—¶è¿˜è¦è®°å½•ä¸€ä¸‹å½“å‰è¿™ä½å¡«çš„æ˜¯ä»€ä¹ˆï¼š $f_{i,j,k,p}$</p>
<p>è¿™æ ·è¿›è¡Œè½¬ç§»å°±å¯ä»¥äº†ã€‚</p>
<h2 id="æ£‹ç›˜"><a href="#æ£‹ç›˜" class="headerlink" title="æ£‹ç›˜"></a>æ£‹ç›˜</h2><blockquote>
<p>åœ¨ $n\times{m}$ çš„æ£‹ç›˜ä¸Šæ”¾è‹¥å¹²ä¸ªç‚®ä½¿å¾—å…¶äº’ç›¸ä¸æ”»å‡»çš„æ–¹æ¡ˆæ•°ã€‚$n,m\le{100}$</p>
</blockquote>
<p>å¦‚æœä¸¤ä¸ªç‚®ä¹‹é—´å¯ä»¥äº’ç›¸æ”»å‡»ï¼Œé‚£ä¹ˆè¿™ä¸€è¡Œæˆ–è€…è¿™ä¸€åˆ—ä¸€å®šè‡³å°‘å­˜åœ¨ä¸‰ä¸ªç‚®ï¼Œæ‰€ä»¥æ¯ä¸€è¡Œæ¯ä¸€åˆ—æ”¾ç‚®çš„æ•°é‡å°±è¦ $\le{2}$ã€‚</p>
<p>ç”¨ $f_{i,j,k,l}$ ä»£è¡¨å‰ $i$ è¡Œå·²ç»æ”¾å¥½ç‚®äº†ï¼Œæœ‰ $j$ åˆ—æœ‰ä¸€ä¸ªç‚®ï¼Œæœ‰ $k$ åˆ—æœ‰ä¸€ä¸ªç‚®ï¼Œæœ‰ $l$ åˆ—æœ‰ä¸¤ä¸ªç‚®ã€‚</p>
<p>ä½†æ˜¯ $j+k+l&#x3D;m$ï¼Œæ‰€ä»¥å¯ä»¥å»é™¤å†—ä½™å˜é‡ï¼Œé‚£å°±æŠŠ $l$ åˆ æ‰ï¼Œ</p>
<p>é‚£ä¹ˆæœ€åå°±æ˜¯ $f_{i,j,k}$ ä»£è¡¨è¿™ç§æƒ…å†µä¸‹çš„æ–¹æ¡ˆæ•°ã€‚</p>
<p>è½¬ç§»ï¼š</p>
<p>å·²ç»æ”¾å¥½äº†å‰ $i$ è¡Œçš„ç‚®ï¼Œç°åœ¨è¦æ”¾ç¬¬ $i+1$ è¡Œçš„ç‚®ï¼Œ</p>
<ul>
<li>æ”¾ $0$ ä¸ªç‚®ï¼š$f_{i+1,j,k}+&#x3D;f_{i,j,k}$</li>
<li>æ”¾ $1$ ä¸ªç‚®ï¼š<ul>
<li>æ”¾åœ¨æœ‰ $0$ ä¸ªç‚®çš„åˆ—ï¼š$f_{i+1,j-1,k+1}+&#x3D;f_{i,j,k}\times{j}$</li>
<li>æ”¾åœ¨æœ‰ $1$ ä¸ªç‚®çš„åˆ—ï¼š$f_{i+1,j,k-1}+&#x3D;f_{i,j,k}\times{k}$</li>
</ul>
</li>
<li>æ”¾ $2$ ä¸ªç‚® ï¼š<ul>
<li>ä¸€ä¸ªæ”¾åœ¨ $0$ ä¸ªç‚®çš„åˆ—ï¼Œä¸€ä¸ªæ”¾åœ¨ $1$ ä¸ªç‚®çš„åˆ—ï¼š$f_{i,j-1,k}+&#x3D;f_{i,j,k}\times{j}\times{k}$</li>
<li>ä¸¤ä¸ªéƒ½æ”¾åœ¨ $0$ ä¸ªç‚®çš„åˆ—ï¼š$f_{i+1,j-2,k+2}+&#x3D;f_{i,j,k}\times{C(j,2)}$</li>
<li>ä¸¤ä¸ªéƒ½æ”¾åœ¨ $1$ ä¸ªç‚®çš„åˆ—ï¼š$f_{i+1,j,k-2}+&#x3D;f_{i,j,k}\times{C(k,2)}$</li>
</ul>
</li>
</ul>
<p>å…¶å®å¯ä»¥å‘ç°ä¸€ä¸ªæ€§è´¨ï¼Œåœ¨æ±‚æ–¹æ¡ˆæ•°æ—¶ï¼Œå…¶å®æˆ‘ä»¬æ˜¯ä¸å…³å¿ƒåˆ°åº•æ˜¯æ€ä¹ˆæ”¾çš„ï¼Œåªå…³å¿ƒè¿™æ ·æ”¾ä¼šæœ‰å¤šå°‘ç§æ–¹æ¡ˆï¼Œæ‰€ä»¥è¦è®°å½•ä¸æ–¹æ¡ˆæœ‰å…³çš„ä¿¡æ¯ã€‚</p>
<h1 id="æ’åˆ—DP"><a href="#æ’åˆ—DP" class="headerlink" title="æ’åˆ—DP"></a>æ’åˆ—DP</h1><blockquote>
<p>è¿™ç§é¢˜ä¼šå‘Šè¯‰ä½ æœ‰ä¸€ä¸ª $1\sim{n}$ çš„æ’åˆ—ï¼Œæ±‚å…¶ä¸­æ»¡è¶³æŸä¸ªæ¡ä»¶çš„æ’åˆ—æœ‰å¤šå°‘ä¸ªã€‚<br>ä¸€å…±æœ‰ $n!$ ä¸ªæ’åˆ—ã€‚</p>
</blockquote>
<h2 id="é€†åºå¯¹"><a href="#é€†åºå¯¹" class="headerlink" title="é€†åºå¯¹"></a>é€†åºå¯¹</h2><blockquote>
<p>æ±‚ $1\sim{n}$ çš„æ’åˆ—ç§ï¼Œé€†åºå¯¹æ•°é‡ä½å¶æ•°çš„æ’åˆ—æ•°ã€‚</p>
</blockquote>
<p>ç­”æ¡ˆæ˜¯ $\frac{n!}{2}$ï¼Œä½†æ˜¯æ€ä¹ˆç”¨DPæ¥è§£ï¼Ÿ</p>
<p>å‡è®¾è¿™é‡Œæœ‰ä¸€ä¸ª $1\sim{i}$ çš„æ’åˆ—ï¼Œåœ¨è¿™é‡Œæ’å…¥ä¸€ä¸ª $i+1$ï¼Œå°±ä¼šå˜æˆä¸€ä¸ª $1\sim{i+1}$ çš„æ’åˆ—ï¼Œæ‰€ä»¥æˆ‘å°±å¯ä»¥ä¸æ–­æ’å…¥æ•°æ¥å¾—åˆ°æœ€ç»ˆçš„æ’åˆ—ã€‚</p>
<p>è®¾ $f_{i,j}$ å·²ç»å¤„ç†å®Œäº†æ‰€æœ‰ $1\sim{i}$ çš„æ’åˆ—ï¼ˆå¡«åˆ°äº† $i$ï¼‰æ­¤æ—¶é€†åºå¯¹æ•°é‡ä¸º $j$ çš„æ–¹æ¡ˆæ•°ã€‚</p>
<p>è¿™å°±æ˜¯æ’åˆ—DPå¸¸ç”¨çš„çŠ¶æ€ï¼š$1\sim{i}$ çš„æ’åˆ—å·²ç»å¤„ç†å®Œäº†ä¸”æ»¡è¶³æ¡ä»¶æ•°é‡ä¸º $j$ çš„æ–¹æ¡ˆæ•°ã€‚</p>
<p>åˆå§‹åŒ–ï¼š $f_{1,0}&#x3D;1$</p>
<p>è½¬ç§»ï¼šæšä¸¾ç¬¬ $i+1$ ä¸ªæ•°æ’åˆ°å“ªé‡Œã€‚æœ‰ $i$ ä¸ªæ•°ï¼Œ$i+1$ ä¸ªä½ç½®ï¼Œåˆ†åˆ«ç¼–å· $0\sim{i}$ï¼Œé‚£ä¹ˆæ’å…¥åˆ°ç¬¬ $k$ ä¸ªä½ç½®ï¼Œç”±äºæˆ‘æ’å…¥çš„æ˜¯ç¬¬ $i+1$ ä¸ªæ•°ï¼Œå› æ­¤å®ƒæ¯”ä¹‹å‰æ‰€æœ‰æ•°éƒ½å¤§ï¼Œä¹Ÿå°±æ˜¯è¯´ç¬¬ $k$ ä¸ªä½ç½®ä¹‹åçš„æ•°éƒ½æ¯”å®ƒå°ï¼Œè¿™å°±æ˜¯æ–°äº§ç”Ÿçš„é€†åºå¯¹çš„ä¸ªæ•° $i-k$ã€‚</p>
<p>ä¼˜åŒ–ï¼šåªå…³å¿ƒå¥‡å¶æ€§ï¼Œå¹¶ä¸å…³å¿ƒåˆ°åº•æ˜¯å¤šå°‘ï¼Œæ‰€ä»¥ç¬¬äºŒç»´æ¨¡äºŒå³å¯ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">f[<span class="number">1</span>][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=<span class="number">1</span>;j++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">0</span>;k&lt;=i;k++)</span><br><span class="line">                f[i<span class="number">+1</span>][(j+i-k)%<span class="number">2</span>]+=f[i][j];</span><br></pre></td></tr></table></figure></div>

<p>æ’åˆ—DPä¸ä¸€å®šæ˜¯ä»å°åˆ°å¤§æˆ–è€…ä»å¤§åˆ°å°æ’å…¥ï¼Œæ‰€ä»¥è¦æ ¹æ®ä¸åŒæƒ…å†µå®šä¸åŒçš„çŠ¶æ€ï¼Œæ¯æ¬¡è€ƒè™‘ä¸‹ä¸€ä¸ªæ•°æ€ä¹ˆæ’å…¥ã€‚</p>
<h2 id="æ¿€åŠ¨"><a href="#æ¿€åŠ¨" class="headerlink" title="æ¿€åŠ¨"></a>æ¿€åŠ¨</h2><blockquote>
<p>å¯¹äºä¸€ä¸ªæ’åˆ—ï¼Œå®ƒçš„æ¿€åŠ¨å€¼ç»´åºåˆ—ä¸­ä¸¥æ ¼å¤§äºå‰é¢æ‰€æœ‰æ•°çš„å…ƒç´ çš„ä¸ªæ•°ã€‚<br>ç»™å®š $n$ ä¸ªæ•°ï¼Œæ±‚å®ƒä»¬æ¯ä¸ªæ•°çš„æ‰€æœ‰æ’åˆ—ä¸­ï¼Œæ¿€åŠ¨å€¼ä¸è¶…è¿‡ $k$ çš„ä¸ªæ•°ã€‚</p>
</blockquote>
<p>è¿™é“é¢˜å°±è¦ä»å¤§åˆ°å°æ’å…¥ã€‚</p>
<p>è®¾ $f_{i,j}$ ä»£è¡¨ä»å¤§åˆ°å°å·²ç»æŠŠ $i\sim{n}$ çš„æ•°æ’å…¥è¿›æ¥äº†ï¼Œè¿™ä¸ªæ—¶å€™çš„æ¿€åŠ¨å€¼æ˜¯ $j$ çš„æ–¹æ¡ˆæ•°ã€‚</p>
<p>è¿™æ ·æ¯æ¬¡æ’å…¥çš„éƒ½æ˜¯æœ€å°çš„æ•°ï¼Œæ— è®ºæŠŠå®ƒæ’åˆ°å“ªé‡Œéƒ½ä¸ä¼šå½±å“åŸæ¥çš„æ•°çš„æ¿€åŠ¨å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±åªéœ€è¦æšä¸¾å®ƒåœ¨å“ªé‡Œï¼Œåªæœ‰å®ƒåœ¨æœ€å‰é¢çš„æ—¶å€™æ¿€åŠ¨å€¼ä¼šåŠ ä¸€ï¼Œå…¶å®ƒçš„æ—¶å€™æ¿€åŠ¨å€¼ä¸å˜ã€‚</p>
<h2 id="LIS-1"><a href="#LIS-1" class="headerlink" title="LIS"></a>LIS</h2><blockquote>
<p>$1\sim{n}$ çš„æ‰€æœ‰æ’åˆ—ä¸­ï¼ŒLIS ä¸è¶…è¿‡ 2 çš„æ’åˆ—æ•°</p>
</blockquote>
<p>è®¾ $f_{i,j}$ ä»£è¡¨å·²ç»æ’å…¥äº† $1\sim{i}$ æœ€é•¿ä¸Šå‡å­åºåˆ—çš„ä¸ªæ•°</p>
<p>å‡è®¾ä»å°åˆ°å¤§æ’ï¼Œæ’å…¥äº† $1\sim{i}$ï¼Œä¸‹ä¸€ä¸ªæ’å…¥çš„æ˜¯ $i+1$ï¼Œå‰é¢æ‰€æœ‰çš„æœ€é•¿ä¸Šå‡å­åºåˆ—è¦ä¹ˆæ˜¯1è¦ä¹ˆæ˜¯2ã€‚</p>
<p>æœ€é•¿ä¸Šå‡å­åºåˆ—é•¿åº¦ä¸º1ï¼Œå½“ä¸”ä»…å½“è¿™ä¸ªåºåˆ—æ˜¯é™åºæ’åˆ—ï¼Œç‰¹æ®Šå¤„ç†ä¸€ä¸‹å³å¯ã€‚</p>
<p>æœ€é•¿ä¸Šå‡å­åºåˆ—é•¿åº¦ä¸º2ï¼Œ$i+1$ ä¸€å®šä¸èƒ½æ’å…¥åˆ°ä»»ä½•ä¸€ä¸ªæœ€é•¿ä¸Šå‡å­åºåˆ—çš„å³è¾¹ï¼Œæ‰€ä»¥æˆ‘è¦æ’åˆ°æ‰€æœ‰é•¿åº¦ä¸º2çš„ä¸Šå‡å­åºåˆ—ä¸­æœ€å·¦è¾¹çš„å³ç«¯ç‚¹çš„å·¦è¾¹ã€‚</p>
<p>$f_{i,j}$ ä»£è¡¨å·²ç»æ’å®Œäº† $1\sim{i}$ï¼Œæ­¤æ—¶æœ€é•¿ä¸Šå‡å­åºåˆ—æœ€å·¦ç«¯çš„å³ç«¯ç‚¹æ˜¯ $j$ã€‚</p>
<p>è¿™æ ·å°±å¯ä»¥æšä¸¾ $0\sim{j-1}$ å°±å¯ä»¥äº†ï¼ŒæŠŠ $i+1$ æ’è¿›å»ã€‚</p>
<ul>
<li>$k!&#x3D;0:f_{i+1,j+1}+&#x3D;f_{i,j}$</li>
<li>$k&#x3D;0:f_{i+1,k}+&#x3D;f_{i,j}$</li>
</ul>
<h1 id="åšå¼ˆDP"><a href="#åšå¼ˆDP" class="headerlink" title="åšå¼ˆDP"></a>åšå¼ˆDP</h1><h1 id="DP-çš„å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–"><a href="#DP-çš„å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–" class="headerlink" title="DP çš„å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–"></a>DP çš„å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–</h1><p>å¯¹æœ´ç´  DP è¿›è¡Œç­‰ä»·å˜å½¢ã€‚</p>
<h2 id="æœ€å¤§å­æ®µå’Œ"><a href="#æœ€å¤§å­æ®µå’Œ" class="headerlink" title="æœ€å¤§å­æ®µå’Œ"></a><a class="link"   href="https://www.acwing.com/problem/content/137/" >æœ€å¤§å­æ®µå’Œ<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h2><p>å¯¹äºä¸€ä¸ªå¯¹åº”å³ç«¯ç‚¹ï¼Œè¦æ‰¾åˆ°ä¸€ä¸ªå·¦ç«¯ç‚¹ä½¿å¾—å·¦ç«¯ç‚¹å‰ç¼€å’Œæœ€å°ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">300010</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> s[N], q[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;s[i]);</span><br><span class="line">        s[i] += s[i - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res = INT_MIN;</span><br><span class="line">    <span class="type">int</span> hh = <span class="number">0</span>, tt = <span class="number">0</span>; <span class="comment">// 0 å·å…ƒç´  sum0 = 0</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (q[hh] &lt; i - m) hh++; <span class="comment">// i ä¸ºçª—å£å³ç«¯ç‚¹çš„ä¸‹ä¸€ä¸ªä½ç½®</span></span><br><span class="line">        res = <span class="built_in">max</span>(res, s[i] - s[q[hh]]);</span><br><span class="line">        <span class="keyword">while</span> (hh &lt;= tt &amp;&amp; s[q[tt]] &gt;= s[i]) tt--;</span><br><span class="line">        q[++tt] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="æ—…è¡Œé—®é¢˜"><a href="#æ—…è¡Œé—®é¢˜" class="headerlink" title="æ—…è¡Œé—®é¢˜"></a><a class="link"   href="https://www.acwing.com/problem/content/1090/" >æ—…è¡Œé—®é¢˜<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h2><p>ç ´ç¯æˆé“¾ã€‚</p>
<p>æ‰€æœ‰å‰ç¼€å’Œéƒ½å¤§äºç­‰äºé›¶ï¼Œæ‰èƒ½å®‰å…¨åˆ°è¾¾ã€‚</p>
<p>ä¹Ÿå°±æ˜¯åŒºé—´å’Œæœ€å°å¤§äºç­‰äºé›¶ï¼ŒåŒºé—´é•¿åº¦ä¸º $n$ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">2e6</span> + <span class="number">7</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line">LL s[N];</span><br><span class="line"><span class="type">int</span> o[N], d[N];</span><br><span class="line"><span class="type">int</span> q[N];</span><br><span class="line"><span class="type">bool</span> st[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;o[i], &amp;d[i]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        s[i] = s[i + n] = o[i] - d[i];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n + n; i++)</span><br><span class="line">        s[i] += s[i - <span class="number">1</span>];</span><br><span class="line">    <span class="type">int</span> hh = <span class="number">0</span>, tt = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = n + n; i; i--) <span class="comment">// é¡ºæ—¶é’ˆ</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (hh &lt;= tt &amp;&amp; q[hh] &gt;= i + n) hh++;</span><br><span class="line">        <span class="keyword">while</span> (hh &lt;= tt &amp;&amp; s[q[tt]] &gt;= s[i]) tt--;</span><br><span class="line">        q[++tt] = i; <span class="comment">// åŒ…å« s_i è¦å…ˆæ›´æ–°</span></span><br><span class="line">        <span class="comment">// è¿™é‡Œ i ä¸ºæ»‘åŠ¨çª—å£å·¦ç«¯ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (i &lt;= n) <span class="comment">// å°äºç­‰äº n æ‰èƒ½æ›´æ–°ç­”æ¡ˆ</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (s[q[hh]] &gt;= s[i - <span class="number">1</span>]) st[i] = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    d[<span class="number">0</span>] = d[n]; <span class="comment">// é¢„å¤„ç†å‰ç¼€å’Œ</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        s[i] = s[i + n] = o[i] - d[i - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n + n; i++) s[i] += s[i - <span class="number">1</span>];</span><br><span class="line">    hh = <span class="number">0</span>, tt = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n + n; i++) <span class="comment">// é€†æ—¶é’ˆ</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (hh &lt;= tt &amp;&amp; q[hh] &lt; i - n) hh++;</span><br><span class="line">        <span class="keyword">if</span> (i &gt; n) <span class="comment">// è¿™é‡Œ i ä¸ºæ»‘åŠ¨çª—å£å³ç«¯ç‚¹ä¸‹ä¸€ä½</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (s[q[hh]] &lt;= s[i]) st[i - n] = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (hh &lt;= tt &amp;&amp; s[q[tt]] &lt;= s[i]) tt--;</span><br><span class="line">        q[++tt] = i; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">if</span> (st[i]) <span class="built_in">puts</span>(<span class="string">&quot;TAK&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">puts</span>(<span class="string">&quot;NIE&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="çƒ½ç«ä¼ é€’"><a href="#çƒ½ç«ä¼ é€’" class="headerlink" title="çƒ½ç«ä¼ é€’"></a><a class="link"   href="https://www.acwing.com/problem/content/1091/" >çƒ½ç«ä¼ é€’<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">200005</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> a[N];</span><br><span class="line"><span class="type">int</span> f[N]; <span class="comment">// ç‚¹å‰ i ä¸ªä¸”ç¬¬ i ä¸ªå¿…ç‚¹çš„æœ€å°ä»£ä»·</span></span><br><span class="line"><span class="comment">// f[i] = min(f[j]) (i - m &lt;= j &lt; i) + w[i]</span></span><br><span class="line"><span class="type">int</span> q[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">    <span class="type">int</span> hh = <span class="number">0</span>, tt = <span class="number">0</span>; <span class="comment">// çª—å£å†…ä¸€å¼€å§‹æœ‰ 0 è¿™ä¸ªå…ƒç´ </span></span><br><span class="line">    <span class="comment">// f[0] = 0;</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (q[hh] &lt; i - m) hh++;</span><br><span class="line">        f[i] = f[q[hh]] + a[i];</span><br><span class="line">        <span class="keyword">while</span> (hh &lt;= tt &amp;&amp; f[q[tt]] &gt;= f[i]) tt--;</span><br><span class="line">        q[++tt] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">1e9</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = n - m + <span class="number">1</span>; i &lt;= n; i++) <span class="comment">// æœ€åä¸€æ®µæ”¾ä¸€ä¸ªçƒ½ç«å°</span></span><br><span class="line">        res = <span class="built_in">min</span>(res, f[i]);</span><br><span class="line">    cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="ç»¿è‰²é€šé“"><a href="#ç»¿è‰²é€šé“" class="headerlink" title="ç»¿è‰²é€šé“"></a><a class="link"   href="https://www.acwing.com/problem/content/1092/" >ç»¿è‰²é€šé“<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h2><p>ä¸Šä¸€é“é¢˜åŠ ä¸€ä¸ªäºŒåˆ†ç­”æ¡ˆå³å¯ã€‚</p>
<p>æ³¨æ„è¾¹ç•Œé—®é¢˜ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">5e4</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> w[N];</span><br><span class="line"><span class="type">int</span> q[N];</span><br><span class="line"><span class="type">int</span> f[N]; <span class="comment">// å‰ i é“é¢˜ä¸”ç¬¬ i é“å¿…å†™çš„æœ€å°æ—¶é—´</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(<span class="type">int</span> mid)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> hh = <span class="number">0</span>, tt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (q[hh] &lt; i - mid - <span class="number">1</span>) hh++; <span class="comment">// ç©ºäº† mid é“</span></span><br><span class="line">        f[i] = f[q[hh]] + w[i];</span><br><span class="line">        <span class="keyword">while</span> (hh &lt;= tt &amp;&amp; f[q[tt]] &gt;= f[i]) tt--;</span><br><span class="line">        q[++tt] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = n - mid; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">if</span> (f[i] &lt;= m) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        cin &gt;&gt; w[i];</span><br><span class="line">    <span class="type">int</span> l = <span class="number">0</span>, r = n;</span><br><span class="line">    <span class="keyword">while</span> (l &lt; r)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">check</span>(mid)) r = mid;</span><br><span class="line">        <span class="keyword">else</span> l = mid + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; l &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="ä¿®å‰ªè‰åª"><a href="#ä¿®å‰ªè‰åª" class="headerlink" title="ä¿®å‰ªè‰åª"></a><a class="link"   href="https://www.acwing.com/problem/content/1089/" >ä¿®å‰ªè‰åª<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h2><p>$f_i$ è¡¨ç¤ºä»å‰ $i$ å¤´å¥¶ç‰›ä¸­é€‰ä¸”åˆæ³•çš„æ‰€æœ‰æ–¹æ¡ˆä¸­çš„æœ€å¤§ä»·å€¼ã€‚</p>
<p>ä¸åŒç‚¹ï¼šç¬¬ $i$ å¤´ç‰›é€‰æˆ–è€…ä¸é€‰ã€‚</p>
<p>ä¸é€‰çš„è¯å°±æ˜¯ $f_{i-1}$</p>
<p>é€‰çš„è¯ï¼Œæœ€åä¸€æ®µçš„é•¿åº¦å¯èƒ½æ˜¯ $[1,m-1]$</p>
<p>äºæ˜¯æˆ‘ä»¬ç»´æŠ¤ä¸€æ®µé•¿åº¦ä¸º $m$ çš„æ»‘åŠ¨çª—å£ï¼Œé‡Œé¢å…ƒç´ çš„å€¼ä¸º $f_{j-1}-s_j$ã€‚</p>
<p>è¿™æ ·å½“ $j&#x3D;i-m$ æ—¶åˆšå¥½æ˜¯ $s_i-s_{i-m}$ ä¸º $[i-m+1,i]$ï¼Œè¿™ä¸ªæ—¶å€™ $i-j$ æ˜¯ä¸èƒ½é€‰çš„ï¼Œå› æ­¤åªèƒ½ä¿ç•™ $f_{j-1}$</p>
<p>å³ $f_i&#x3D;f_{i-j-1}+s_i-s_j$</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line">LL s[N];</span><br><span class="line">LL f[N];</span><br><span class="line"><span class="type">int</span> q[N];</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">g</span><span class="params">(<span class="type">int</span> i)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> f[i - <span class="number">1</span>] - s[i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>, &amp;s[i]);</span><br><span class="line">        s[i] += s[i - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> hh = <span class="number">0</span>, tt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (q[hh] &lt; i - m) hh++;</span><br><span class="line">        f[i] = <span class="built_in">max</span>(f[i - <span class="number">1</span>], <span class="built_in">g</span>(q[hh]) + s[i]);</span><br><span class="line">        <span class="keyword">while</span> (hh &lt;= tt &amp;&amp; <span class="built_in">g</span>(q[tt]) &lt;= <span class="built_in">g</span>(i)) tt--;</span><br><span class="line">        q[++tt] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; f[n] &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="ç†æƒ³çš„æ­£æ–¹å½¢"><a href="#ç†æƒ³çš„æ­£æ–¹å½¢" class="headerlink" title="ç†æƒ³çš„æ­£æ–¹å½¢"></a><a class="link"   href="https://www.acwing.com/problem/content/1093/" >ç†æƒ³çš„æ­£æ–¹å½¢<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h2><p>å…ˆçœ‹ä¸€ç»´ï¼Œæ¯ä¸€ä¸ªç‚¹å­˜çš„æ˜¯ä»¥å®ƒä¸ºå³ç«¯ç‚¹é•¿åº¦ä¸º $n$ çš„åŒºé—´çš„æå€¼ã€‚</p>
<p>æˆ‘ä»¬æŠŠæ‰€æœ‰è¡Œå¤„ç†å®Œäº†ä»¥åï¼Œå†å¤„ç†ä¸€éåˆ—å³å¯ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1005</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m, k;</span><br><span class="line"><span class="type">int</span> w[N][N];</span><br><span class="line"><span class="type">int</span> row_max[N][N], row_min[N][N];</span><br><span class="line"><span class="type">int</span> q[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">get_min</span><span class="params">(<span class="type">int</span> a[], <span class="type">int</span> b[], <span class="type">int</span> tot)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> hh = <span class="number">0</span>, tt = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= tot; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (q[hh] &lt;= i - k) hh++; <span class="comment">// åŒ…å«å³ç«¯ç‚¹</span></span><br><span class="line">        <span class="keyword">while</span> (hh &lt;= tt &amp;&amp; a[q[tt]] &gt;= a[i]) tt--;</span><br><span class="line">        q[++tt] = i;</span><br><span class="line">        b[i] = a[q[hh]];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">get_max</span><span class="params">(<span class="type">int</span> a[], <span class="type">int</span> b[], <span class="type">int</span> tot)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> hh = <span class="number">0</span>, tt = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= tot; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (q[hh] &lt;= i - k) hh++;</span><br><span class="line">        <span class="keyword">while</span> (hh &lt;= tt &amp;&amp; a[q[tt]] &lt;= a[i]) tt--;</span><br><span class="line">        q[++tt] = i;</span><br><span class="line">        b[i] = a[q[hh]];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;n, &amp;m, &amp;k);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; j++)</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;w[i][j]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">get_min</span>(w[i], row_min[i], m);</span><br><span class="line">        <span class="built_in">get_max</span>(w[i], row_max[i], m);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">    <span class="type">int</span> a[N], b[N], c[N];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = k; i &lt;= m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++) a[j] = row_min[j][i];</span><br><span class="line">        <span class="built_in">get_min</span>(a, b, n);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++) a[j] = row_max[j][i];</span><br><span class="line">        <span class="built_in">get_max</span>(a, c, n);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = k; j &lt;= n; j++)</span><br><span class="line">            res = <span class="built_in">min</span>(res, c[j] - b[j]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>]]></content>
      <categories>
        <category>ACM</category>
      </categories>
  </entry>
  <entry>
    <title>NOIP-æ•°å­¦</title>
    <url>/915ab73.html</url>
    <content><![CDATA[<h1 id="åŸºç¡€æ•°å­¦"><a href="#åŸºç¡€æ•°å­¦" class="headerlink" title="åŸºç¡€æ•°å­¦"></a>åŸºç¡€æ•°å­¦</h1><h2 id="å–æ¨¡"><a href="#å–æ¨¡" class="headerlink" title="å–æ¨¡"></a>å–æ¨¡</h2><p>ä¸€å¼ å›¾ææ‡‚å–æ¨¡ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202309301506245.webp"
                      alt="image.png|400"
                ></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> a,b,c;</span><br><span class="line">cin&gt;&gt;a&gt;&gt;b&gt;&gt;c;</span><br><span class="line">cout&lt;&lt;(a+b)%c&lt;&lt;endl;</span><br><span class="line">cout&lt;&lt;((a-b)%c+c)%c&lt;&lt;endl;<span class="comment">//è´Ÿæ•°å–æ¨¡</span></span><br><span class="line">cout&lt;&lt;(<span class="number">1ll</span>*a*b)%c&lt;&lt;endl;<span class="comment">//é˜²æ­¢çˆ†intçš„ä¸¤ç§æ–¹æ³•</span></span><br><span class="line">cout&lt;&lt;((<span class="type">long</span> <span class="type">long</span>)a*b)%c&lt;&lt;endl;</span><br></pre></td></tr></table></figure></div>

<p>æ•°å­¦å’Œè®¡ç®—æœºä¸­çš„å–æ¨¡å®ç°æ–¹å¼ä¸åŒï¼Œå¯¹äºæ­£æ•°ï¼Œä¸¤ç§æ–¹å¼å¾—åˆ°çš„ç­”æ¡ˆä¸€æ ·ï¼Œä½†æ˜¯å¯¹äºè´Ÿæ•°å´ä¸åŒã€‚</p>
<p>å¯¹äºä¸‹é¢ä¾‹å­ï¼š</p>
<p>$-3 \bmod 2$</p>
<p>æ•°å­¦å¾—åˆ°çš„ç­”æ¡ˆæ˜¯ï¼š$-3 - \lfloor{-3 &#x2F; 2}\rfloor \times 2 &#x3D; 1$</p>
<p>è®¡ç®—æœºå¾—åˆ°çš„ç­”æ¡ˆæ˜¯ï¼š$-3 - (-3 &#x2F; 2) \times 2 &#x3D; -1$</p>
<p>æ•…è®¡ç®—æœºå¯¹è´Ÿæ•°å–æ¨¡çš„æ—¶å€™ï¼Œéœ€è¦ $((-3 \bmod 2) + 2)\bmod 2$</p>
<p>é€šè¿‡è§„å¾‹æˆ‘ä»¬å‘ç°ï¼Œå½“è¢«æ¨¡æ•°ä¸ºæ­£æ•°æ—¶ï¼Œç­”æ¡ˆæ˜¯éè´Ÿæ•°ï¼›æ¨¡æ•°ä¸ºè´Ÿæ•°æ—¶ï¼Œç­”æ¡ˆæ˜¯éæ­£æ•°ã€‚</p>
<h2 id="é˜¶ä¹˜"><a href="#é˜¶ä¹˜" class="headerlink" title="é˜¶ä¹˜"></a>é˜¶ä¹˜</h2><p><em>nçš„é˜¶ä¹˜ï¼š</em></p>
<p>$n! &#x3D;n\times{(n-1)}\times{(n-2)}\times\ldots\times1$</p>
<p><strong>n!%p</strong></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n,p;</span><br><span class="line">    cin&gt;&gt;n&gt;&gt;p;</span><br><span class="line">    <span class="type">int</span> ans=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        ans*=i;</span><br><span class="line">        ans%=p;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><em>å…¸å‹çš„é”™è¯¯å†™æ³•ï¼š</em></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304290904698.webp"
                      alt="image.png|600"
                ></p>
<h2 id="GCD-LCM"><a href="#GCD-LCM" class="headerlink" title="GCD&amp;LCM"></a>GCD&amp;LCM</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304290908493.webp"
                      alt="image.png|600"
                ></p>
<p><del>å¤ªç†Ÿæ‚‰äº†</del></p>
<p>æ±‚ä¸€ä¸‹gcd</p>
<p>è®¾$gcd(a,b)&#x3D;g$</p>
<p><strong>æ•´é™¤</strong>ï¼š$g|a$ $g$ èƒ½æ•´é™¤ $a$ $a\pmod g&#x3D;0$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304290913704.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304290917006.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304290918595.webp"
                      alt="image.png|600"
                ></p>
<p>$$gcd(a,b)&#x3D;gcd(b,a%b)$$</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">gcd</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(b==<span class="number">0</span>) <span class="keyword">return</span> a;<span class="comment">//ä»»ä½•æ•°å’Œ0çš„æœ€å¤§å…¬å› æ•°ä¸ºè‡ªèº«</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">gcd</span>(b,a%b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304290925998.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304290928411.webp"
                      alt="image.png|600"
                ></p>
<p>1.$b \le \frac a 2$æ—¶ï¼Œ$a% b \le \frac a 2$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304290929042.webp"
                      alt="image.png|600"
                ><br>wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww<br>2.$b \ge \frac a 2$æ—¶ï¼Œ$a% b &#x3D;a-b \le \frac a 2$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304290929060.webp"
                      alt="image.png|600"
                ></p>
<p>æ‰€ä»¥$a%b&lt;\frac1 2 a$</p>
<p>å¤æ‚åº¦ï¼Ÿ</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> n;</span><br><span class="line">    cin&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i;i&lt;=n;i++)</span><br><span class="line">        cin&gt;&gt;a[i];</span><br><span class="line">    <span class="type">int</span> ans=a[<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)</span><br><span class="line">        ans=<span class="built_in">gcd</span>(ans,a[i]);</span><br><span class="line">    cout&lt;&lt;ans&lt;&lt;endl;</span><br></pre></td></tr></table></figure></div>

<p>$O(n+log_{a_{max}})$</p>
<p>$ans$åªä¼šä¸æ–­å˜å°</p>
<p>é™¤$2$çš„æ¬¡æ•°åªæœ‰$log$æ¬¡</p>
<hr>
<p>è‹¥$gcd(a,b)&#x3D;g,lcm(a,b)&#x3D;l$</p>
<p>$l&#x3D;a*b&#x2F;g$</p>
<p><em>å°å¯„å·§</em>ï¼š$a * b &#x2F; gcd(a,b) \to a &#x2F; gcd(a,b) *b$</p>
<p>å…ˆé™¤åä¹˜é˜²æ­¢çˆ†</p>
<h2 id="å¿«é€Ÿå¹‚"><a href="#å¿«é€Ÿå¹‚" class="headerlink" title="å¿«é€Ÿå¹‚"></a>å¿«é€Ÿå¹‚</h2><p>$x^{y} % p$</p>
<p><em>æœ´ç´ çš„ä»£ç ï¼š</em></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=y;i++)</span><br><span class="line">        ans=<span class="number">1ll</span>*ans*x%p;</span><br></pre></td></tr></table></figure></div>

<p>æ¯”å¦‚ç°åœ¨è¦ç®—$x^{37}$</p>
<p>éœ€è¦ä¹˜$36$æ¬¡</p>
<p>$x^{37}$$&#x3D;x^{18^2}\cdot x$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291007280.webp"
                      alt="image.png|600"
                ></p>
<p>æ—¶é—´å¤æ‚åº¦å°±æ˜¯$O(log_n)$</p>
<p>å¯ä»¥é€’å½’æ±‚è§£</p>
<p><em>æœ´ç´ çš„ä»£ç ï¼š</em></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">ksm</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(y==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> z=<span class="built_in">ksm</span>(x,y/<span class="number">2</span>,p);</span><br><span class="line">    z=<span class="number">1ll</span>*z*z%p;</span><br><span class="line">    <span class="keyword">if</span>(y%<span class="number">2</span>==<span class="number">1</span>) z=<span class="number">1ll</span>*z*x%p;</span><br><span class="line">    <span class="keyword">return</span> z;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><strong>ä¼˜åŒ–</strong></p>
<p>ä½è¿ç®—ï¼š <code>if(y&amp;1) z=1ll*z*x%p;</code></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="function">ll <span class="title">ksm</span><span class="params">(ll x, ll y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll res = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(y &gt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(y &amp; <span class="number">1</span>) res = res * x % p;</span><br><span class="line">        x = x * x % p;</span><br><span class="line">        y &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<p>å°é¢˜ç›®:$x,y,p$,ç®—$x*y%p$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291021157.webp"
                      alt="image.png|600"
                ></p>
<h2 id="å¿«é€Ÿä¹˜æ³•"><a href="#å¿«é€Ÿä¹˜æ³•" class="headerlink" title="å¿«é€Ÿä¹˜æ³•"></a>å¿«é€Ÿä¹˜æ³•</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">kscf</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(y==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> z=<span class="built_in">kscf</span>(x,y/<span class="number">2</span>,p);</span><br><span class="line">    z=(z+z)%p;</span><br><span class="line">    <span class="keyword">if</span>(y&amp;<span class="number">1</span>) z=(z+x)%p;<span class="comment">//åˆ¤å¥‡</span></span><br><span class="line">    <span class="keyword">return</span> z;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="çŸ©é˜µ"><a href="#çŸ©é˜µ" class="headerlink" title="çŸ©é˜µ"></a>çŸ©é˜µ</h2><blockquote>
<p>nè¡Œmåˆ—çš„ä¸€ä¸ªä¸œè¥¿</p>
</blockquote>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291041588.webp"
                      alt="image.png|600"
                ></p>
<p>ä¸¤ä¸ªçŸ©é˜µåš<strong>åŠ æ³•</strong>çš„æ¡ä»¶æ˜¯ä¸¤ä¸ªçŸ©é˜µçš„å¤§å°ä¸€æ ·</p>
<p>åšæ³•:</p>
<p>å¯¹åº”ä½ç½®çš„æ•°å­—åŠ èµ·æ¥</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291042209.webp"
                      alt="image.png|600"
                ></p>
<p><strong>å‡æ³•</strong>åŒç†:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291043292.webp"
                      alt="image.png|600"
                ></p>
<p><strong>æ•°ä¹˜</strong>:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291044900.webp"
                      alt="image.png|600"
                ></p>
<p><strong>çŸ©é˜µä¹˜æ³•</strong>:</p>
<p>$$<br>\begin{bmatrix}<br>1 &amp; 2 &amp; 3 \<br>4 &amp; 5 &amp; 6 \<br>7 &amp; 8 &amp; 9 \<br>\end{bmatrix}<br>$$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291048242.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291048036.webp"
                      alt="image.png|600"
                ></p>
<p>$$\begin{bmatrix}1 &amp; 2  \3 &amp; 4  \ \end{bmatrix}\times \begin{bmatrix}1&amp;2&amp;3 \  2 &amp; 3 &amp; 3\ \end{bmatrix}&#x3D;\begin{bmatrix}5&amp;8&amp;9\11&amp;18&amp;21\ \end{bmatrix}$$</p>
<p>ç¬¬ä¸€ä¸ªçš„åˆ—æ•° &#x3D; ç¬¬äºŒä¸ªçš„è¡Œæ•°</p>
<p>ç¬¬ä¸€è¡Œç¬¬ä¸€åˆ—ï¼Œå–å‡ºç¬¬ä¸€ä¸ªçš„ç¬¬ä¸€è¡Œï¼Œç¬¬äºŒä¸ªçš„ç¬¬ä¸€åˆ—</p>
<p>ä¸€ä¸€ç›¸ä¹˜å†ç›¸åŠ </p>
<p><strong>ä»£ç å®ç°</strong>:</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">matrix</span>&#123;</span><br><span class="line">    <span class="type">int</span> n,m;</span><br><span class="line">    <span class="type">int</span> z[<span class="number">23</span>][<span class="number">23</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291059199.webp"
                      alt="image.png|600"
                ></p>
<p>$z$æ•°ç»„ä¸ä¸€å®šä¸º$0$(å—å¾ˆå¤šå› ç´ å½±å“)</p>
<p><strong>æ„é€ å‡½æ•°</strong></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">matrix</span>&#123;</span><br><span class="line">    <span class="type">int</span> n,m;</span><br><span class="line">    <span class="type">int</span> z[<span class="number">23</span>][<span class="number">23</span>];</span><br><span class="line">    <span class="built_in">matrix</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(z,<span class="number">0</span>,<span class="built_in">sizeof</span>(z));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>

<p><strong>é‡è½½è¿ç®—ç¬¦</strong></p>
<p>ä¸ä¼šå½±å“æ­£å¸¸çš„$*$</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">matrix <span class="keyword">operator</span>*(matrix m1,matrix m2)</span><br></pre></td></tr></table></figure></div>

<p><em>è¿™æ ·å†™æœ‰æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ</em></p>
<p>æ¶‰åŠåˆ°ä¸€ä¸ªä¼ å‚çš„é—®é¢˜ï¼š</p>
<p>ä¸ºäº†<strong>é¿å…å ç©ºé—´</strong>ï¼Œå¯ä»¥è¿™æ ·å†™:</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">matrix <span class="keyword">operator</span>*(matrix &amp;m1,matrix &amp;m2)</span><br></pre></td></tr></table></figure></div>

<p>ä¸ºäº†<strong>é¿å…ç®—å‡ºç»“æœä»¥ååŸå€¼è¢«ä¿®æ”¹</strong>ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">matrix <span class="keyword">operator</span>*(<span class="type">const</span> matrix &amp;m1,<span class="type">const</span> matrix &amp;m2)</span><br></pre></td></tr></table></figure></div>

<p>æ¥ä¸‹æ¥æ˜¯<strong>çŸ©é˜µä¹˜æ³•</strong>çš„å‡½æ•°å†…å®¹äº†</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">matrix <span class="keyword">operator</span>*(<span class="type">const</span> matrix &amp;m1,<span class="type">const</span> matrix &amp;m2)</span><br><span class="line">&#123;</span><br><span class="line">    matrix m3;</span><br><span class="line">    m<span class="number">3.</span>n=m<span class="number">1.</span>n;</span><br><span class="line">    m<span class="number">3.</span>m=m<span class="number">2.</span>m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m<span class="number">3.</span>n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=m<span class="number">3.</span>m;j++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>;k&lt;=m<span class="number">1.</span>m;k++)</span><br><span class="line">                m<span class="number">3.</span>z[i][j]+=m<span class="number">1.</span>z[i][k]*m<span class="number">2.</span>z[k][j];</span><br><span class="line">    <span class="keyword">return</span> m3;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><em>ç³Ÿç³•çš„å¤æ‚åº¦:</em>$O(n^3)$ å¯å¤„ç†ç™¾ä½(100~200)çº§åˆ«çš„çŸ©é˜µä¹˜æ³•</p>
<p>å°é¢˜é¢˜ï¼š<a class="link"   href="https://www.luogu.com.cn/problem/P3390" >P3390çŸ©é˜µå¿«é€Ÿå¹‚<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p><strong>memset</strong></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291122556.webp"
                      alt="image.png|600"
                ></p>
<p><strong>ijk</strong></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291127728.webp"
                      alt="image.png|600"
                ></p>
<p><strong>jki</strong></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291128426.webp"
                      alt="image.png|600"
                ></p>
<p><strong>kji</strong></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291128497.webp"
                      alt="image.png|600"
                ></p>
<p><strong>ikj</strong></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291130768.webp"
                      alt="image.png|600"
                ></p>
<p>æšä¸¾é¡ºåºä¼šå½±å“æ—¶é—´å¤æ‚åº¦ï¼Ÿ</p>
<p>æŠŠ$j$æ”¾åœ¨æœ€åæ˜¯æœ€å¿«çš„</p>
<p>åŸå› æ˜¯<strong>ç¼“å­˜æœºåˆ¶</strong></p>
<p>ç¼“å­˜å¾ˆå°ï¼Œä½†æ˜¯å¾ˆå¿«</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291407593.webp"
                      alt="image.png|600"
                ></p>
<p>è¿ç»­æ€§è¶Šé«˜ï¼Œä¹Ÿå°±è¶Šå¿«</p>
<p>å°½å¯èƒ½è®©æœ€åä¸€ç»´ä½œä¸ºå¾ªç¯å˜é‡ï¼Œä»¥æœ€å¤§åŒ–åˆ©ç”¨ç¼“å­˜</p>
<p>$j$å…¨éƒ¨åœ¨ç¬¬äºŒç»´ï¼Œæœ€ä¼˜</p>
<p>$k$åªæœ‰ä¸€ä¸ªåœ¨ç¬¬äºŒç»´ï¼Œæ¬¡ä¼˜</p>
<p>$i$æ²¡æœ‰åœ¨ç¬¬äºŒç»´ï¼Œæœ€ä¸ä¼˜</p>
<p>ç›¸å½“äºå…ˆå¤„ç†ç­”æ¡ˆçŸ©é˜µçš„ç¬¬ä¸€è¡Œï¼Œå¯¹ç¬¬ä¸€è¡Œæ‰« k éä¾¿æ˜¯ç»“æœï¼Œ</p>
<ul>
<li>å¤„ç†ç­”æ¡ˆçŸ©é˜µçš„ç¬¬ä¸€è¡Œ<ul>
<li>ç¬¬ä¸€ä¸ªçŸ©é˜µçš„ç¬¬ä¸€è¡Œçš„ä»»ä½•ä¸€ä¸ªæ•°éƒ½è¦è¢«åŠ ä¸€éï¼Œç¬¬äºŒä¸ªçŸ©é˜µçš„ç¬¬ä¸€åˆ—</li>
</ul>
</li>
</ul>
<p>æ¥ä¸ª<strong>å°ç»ƒä¹ é¢˜</strong>ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291412157.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291413134.webp"
                      alt="image.png|600"
                ></p>
<p>æ±‚$f_n%p$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291417988.webp"
                      alt="image.png|600"
                ></p>
<p><del>æš´åŠ›çš„å†™æ³•</del></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">cin&gt;&gt;n&gt;&gt;p;</span><br><span class="line">    <span class="type">int</span> a=<span class="number">0</span>,b=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> c=a+b;</span><br><span class="line">        <span class="keyword">if</span>(c&gt;=p) c-=p;</span><br><span class="line">        a=b;</span><br><span class="line">        b=c;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div>

<p>$$\begin{bmatrix}f_{i-1}&amp;f_{i-2} \end{bmatrix}\times\begin{bmatrix}1&amp;1\1&amp;0\end{bmatrix}&#x3D;\begin{bmatrix}f_i&amp;f_{i-1}\end{bmatrix}$$</p>
<p>è¿™æ ·æ¨$n$æ¬¡å°±å¯ä»¥å¾—åˆ°ç¬¬$n$é¡¹</p>
<p>ä½†æ˜¯è¿˜ä¸å¦‚ç›´æ¥ç®—</p>
<p>æ€ä¹ˆä¼˜åŒ–ï¼Ÿ</p>
<p>çŸ©é˜µä¹˜æ³•ä¹Ÿæœ‰ç»“åˆå¾‹</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291426869.webp"
                      alt="image.png|600"
                ></p>
<p>è¿™ä¸ªä¸œè¥¿æ˜¯ä¸æ˜¯å¾ˆçœ¼ç†Ÿ</p>
<p>å¯¹äº$B^n$å¯ä»¥è¿›è¡Œä¸€ä¸ª[[NOIP-æ•°å­¦#å¿«é€Ÿå¹‚|å¿«é€Ÿå¹‚]]</p>
<p>å°é¢˜é¢˜<a class="link"   href="https://www.luogu.com.cn/problem/P1962" >P1962æ–æ³¢é‚£å¥‘æ•°åˆ—<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">matrix A,B;</span><br><span class="line">    A.n=<span class="number">1</span>;A.m=<span class="number">2</span>;</span><br><span class="line">    A.z[<span class="number">1</span>][<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">    A.z[<span class="number">1</span>][<span class="number">2</span>]=<span class="number">0</span>;</span><br><span class="line">    B.n=<span class="number">2</span>;B.m=<span class="number">2</span>;</span><br><span class="line">    B.z[<span class="number">1</span>][<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">    B.z[<span class="number">1</span>][<span class="number">2</span>]=<span class="number">1</span>;</span><br><span class="line">    B.z[<span class="number">2</span>][<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">    B.z[<span class="number">2</span>][<span class="number">2</span>]=<span class="number">0</span>;</span><br><span class="line">    matrix C=A*<span class="built_in">jzksm</span>(B,n);</span><br><span class="line">    <span class="type">int</span> ans=C.z[<span class="number">1</span>][<span class="number">2</span>]</span><br></pre></td></tr></table></figure></div>

<p>å¤æ‚åº¦:$log_n$</p>
<p>è™½ç„¶çŸ©é˜µä¹˜æ³•æ˜¯$O(n^3)$,ä½†æ˜¯$B$çŸ©é˜µæ˜¯ä¸ª$2 \times 2$çš„ï¼Œ$2^3$ä¹Ÿå°±æ˜¯$8$ï¼Œå¯å¿½ç•¥</p>
<p>çŸ©é˜µ$B$æ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿ</p>
<p><strong>å°æ —å­</strong></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291437263.webp"
                      alt="image.png|600"
                ></p>
<p>æ‰¾åˆ°èƒ½å¤Ÿå‘åæ¨ä¸€é¡¹çš„çŸ©é˜µ</p>
<p>$$\begin{bmatrix}f_{i-1}&amp;f_{i-2} \end{bmatrix}\times\begin{bmatrix}3&amp;1\-2&amp;0\end{bmatrix}&#x3D;\begin{bmatrix}f_i&amp;f_{i-1}\end{bmatrix}$$</p>
<p><strong>ç›®çš„</strong>:å‘åæ¨ä¸€é¡¹</p>
<p><strong>å†æ¥ä¸€ä¸ªæ —å­</strong></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291440792.webp"
                      alt="image.png|600"
                ></p>
<p>åˆšæ‰çŸ©é˜µå¤§å°ä¸º$2$å› ä¸ºè¿™ä¸€é¡¹çš„ä¿¡æ¯åªä¸<strong>å‰ä¸¤é¡¹</strong>æœ‰å…³</p>
<p>è€Œè¿™ä¸ªå´ä¸å‰ä¸‰é¡¹æœ‰å…³</p>
<p>$$\begin{bmatrix}f_{i-1}&amp;f_{i-2}&amp;f_{i-3}\end{bmatrix}\times\begin{bmatrix}1&amp;0&amp;1\1&amp;0&amp;0 \0&amp;1&amp;0 \end{bmatrix}&#x3D;\begin{bmatrix}f_{i}&amp;f_{i-1}&amp;f_{i-2}\end{bmatrix}$$</p>
<p>å’Œå‰é¢å‡ é¡¹æœ‰å…³ï¼Œé‚£ä¹ˆçŸ©é˜µå¤§å°å°±æ˜¯å‡ </p>
<p>çŸ©é˜µä¹˜æ³•æœ‰äº¤æ¢å¾‹å—ï¼Ÿ</p>
<p><strong>no</strong></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291501408.webp"
                      alt="image.png|600"
                ><br>è¡¥å……ï¼š</p>
<p>çŸ©é˜µå¿«é€Ÿå¹‚åŠ é€Ÿé€’æ¨çš„åº•å±‚åŸç†æƒ³äº†ä¸€ä¼šï¼Œè§‰å¾—å®ƒè·Ÿæ­£å¸¸çš„å¿«é€Ÿå¹‚æ˜¯ä¸€ä¸ªåŸç†ï¼Œéƒ½æ˜¯é€šè¿‡å‡å°‘è¿ç®—ï¼ˆé€’æ¨ï¼‰æ¬¡æ•°æ¥å‡å°‘è¿è¡Œæ—¶é—´ã€‚</p>
<p><strong>åˆæ˜¯ä¸€ä¸ª<del>å°</del>å¤§æ —å­</strong></p>
<blockquote>
<p>ä»¥ä¸‹ä»…ä¸ºç®€è¦å†™æ³•ï¼Œå…·ä½“é¢˜è§£è¯·è§<a class="link"   href="https://white.fallingsakura.top/59e59239/" >P4159 è¿·è·¯<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</blockquote>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291505595.webp"
                      alt="image.png|600"
                ></p>
<p>$n \le 100$</p>
<p>$k\le$ $10^9$</p>
<p>é‚»æ¥çŸ©é˜µå­˜å›¾</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291509604.webp"
                      alt="image.png|600"
                ></p>
<p>$f[i][j]$ä»£è¡¨èµ°äº†$i$æ­¥åˆ°è¾¾$j$çš„æ–¹æ¡ˆæ•°</p>
<p>åˆå§‹åŒ–ï¼š</p>
<p>$f[0][1]&#x3D;1$</p>
<p>$f[0][{2\sim n}]&#x3D;0$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291513293.webp"
                      alt="image.png|600"
                ></p>
<p>ä»£ç ä¸­å¯ä»¥å‡ºç°ç›¸åŒå˜é‡åï¼Œå‰ææ˜¯å®ƒä»¬çš„ä½œç”¨åŸŸä¸åŒã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291518261.webp"
                      alt="image.png|600"
                ></p>
<p>å¦‚ä½•ç²¾ç¡®è®¿é—®ï¼Ÿ</p>
<p><code>::a</code>ä»£è¡¨è®¿é—®å…¨å±€å˜é‡</p>
<p>æ­£å¸¸çš„DPå†™æ³•ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">cin&gt;&gt;n&gt;&gt;k;</span><br><span class="line">   <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">       <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">           cin&gt;&gt;z[i][j];</span><br><span class="line">   <span class="comment">//z[i][j]=0/1;i-&gt;j</span></span><br><span class="line">   f[<span class="number">0</span>][<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">   <span class="keyword">for</span>(<span class="type">int</span> a=<span class="number">1</span>;a&lt;=k;a++)<span class="comment">//èµ°äº†aæ­¥</span></span><br><span class="line">       <span class="keyword">for</span>(<span class="type">int</span> b=<span class="number">1</span>;b&lt;=n;b++)<span class="comment">//èµ°åˆ°äº†b</span></span><br><span class="line">           <span class="keyword">for</span>(<span class="type">int</span> c=<span class="number">1</span>;c&lt;=n;c++)<span class="comment">//ç¬¬a-1æ­¥åœ¨c</span></span><br><span class="line">           &#123;</span><br><span class="line">               <span class="keyword">if</span>(z[c][b]==<span class="number">1</span>) f[a][b]+=f[a<span class="number">-1</span>][c];<span class="comment">//å¦‚æœæœ‰è¾¹</span></span><br><span class="line">           &#125;</span><br><span class="line">   ans=f[k][n];<span class="comment">//èµ°kæ­¥åˆ°n</span></span><br></pre></td></tr></table></figure></div>

<p>$O(n^3)$å¤æ‚åº¦è‚¯å®šè¿‡ä¸äº†</p>
<p>ä¼˜åŒ–ä¸€ä¸‹ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// if(z[c][b]=1) f[a][b]+=f[a-1][c];</span></span><br><span class="line">        f[a][b]+=f[a<span class="number">-1</span>][c]*z[c][b];</span><br></pre></td></tr></table></figure></div>

<p><strong>è§£é‡Šï¼š</strong>$c \to b$æœ‰è¾¹çš„æ—¶å€™ï¼Œ$z[c][b]&#x3D;1$ å°±ç›¸å½“äºè½¬ç§»</p>
<p>$c \to b$æ²¡æœ‰è¾¹çš„æ—¶å€™ï¼Œ$z[c][b]&#x3D;0$ï¼Œå°±ç›¸å½“äºåŠ ä¸Š$0$</p>
<p>é‚£è¿™æ ·åšæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ    <em>â€”â€”åˆ«æ€¥ï¼Œå¾€ä¸‹çœ‹</em></p>
<p>å‡ä¸€ä¸‹ç»´åº¦ï¼Œä¸­é—´å§‹ç»ˆä¸º$1$</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">cin&gt;&gt;n&gt;&gt;k;</span><br><span class="line">   <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">       <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">           cin&gt;&gt;z[i][j];</span><br><span class="line">   <span class="comment">//z[i][j]=0/1;//i-&gt;j</span></span><br><span class="line">   f[<span class="number">0</span>][<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">   <span class="keyword">for</span>(<span class="type">int</span> a=<span class="number">1</span>;a&lt;=k;a++)<span class="comment">//èµ°äº†aæ­¥</span></span><br><span class="line">       <span class="keyword">for</span>(<span class="type">int</span> d=<span class="number">1</span>;d&lt;=<span class="number">1</span>;d++)<span class="comment">//æ— æ„ä¹‰</span></span><br><span class="line">           <span class="keyword">for</span>(<span class="type">int</span> b=<span class="number">1</span>;b&lt;=n;b++)<span class="comment">//èµ°åˆ°äº†b</span></span><br><span class="line">               <span class="keyword">for</span>(<span class="type">int</span> c=<span class="number">1</span>;c&lt;=n;c++)<span class="comment">//ç¬¬a-1æ­¥åœ¨c</span></span><br><span class="line">               &#123;</span><br><span class="line">                   <span class="comment">// if(z[c][b]=1) f[a][b]+=f[a-1][c];</span></span><br><span class="line">                   f[a][d][b]+=f[a<span class="number">-1</span>][d][c]*z[c][b];</span><br><span class="line">               &#125;</span><br><span class="line">   ans=f[k][<span class="number">1</span>][n];</span><br></pre></td></tr></table></figure></div>

<p>åŠ ç»´åº¦ã€æŠŠåˆ¤æ–­å˜ä¸ºç›¸ä¹˜çš„ç›®çš„å°±æ˜¯ä¸ºäº†<strong>æŠŠå½¢å¼å‡‘æˆçŸ©é˜µä¹˜æ³•</strong></p>
<p>$f[i][j][k]$$DP$æ„ä¹‰å®é™…ä¸Šå°±æ˜¯ä»¥$j$ä¸ºèµ·ç‚¹ï¼Œèµ°äº†$i$æ­¥åˆ°è¾¾ç‚¹$k$çš„æ–¹æ¡ˆæ•°,åªä¸è¿‡è¿™é‡Œçš„èµ·ç‚¹æ˜¯$1$</p>
<p>æŠŠ$f[a]$å½“ä½œå˜é‡</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291531519.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291532228.webp"
                      alt="image.png|600"
                ></p>
<p>ç„¶åç”¨ä¸‹çŸ©é˜µå¿«é€Ÿå¹‚å°±æå®šäº†</p>
<p>%% #Qï¼š ä½†æ˜¯ Z è¿™ä¸ªæ•°ç»„æ—¶æ—¶åˆ»åˆ»åœ¨å˜åŒ–å•Š %%</p>
<p>$O(n^{3\times}log k)$</p>
<p><strong>å°é—®é¢˜</strong><a class="link"   href="https://www.luogu.com.cn/problem/P4159" >P4159<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291542660.webp"
                      alt="image.png|600"
                ></p>
<p>$1 \le$ è¾¹æƒ $\le 9$</p>
<p>æ‹†ï¼</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291543666.webp"
                      alt="image.png|600"
                ></p>
<p>å°½é‡å°‘æ‹†</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291549120.webp"
                      alt="image.png|600"
                ></p>
<p>æœ€å¤šå»¶ç”³ä¹ä¸ªç‚¹ï¼ŒåŠ ä¸ŠåŸæ¥çš„ç‚¹ï¼Œæœ€å¤šåä¸ªç‚¹</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291552458.webp"
                      alt="image.png|600"
                ></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">cin&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;   </span><br><span class="line">        z[i][n+(i<span class="number">-1</span>)*<span class="number">9</span><span class="number">+1</span>]=<span class="number">1</span>;<span class="comment">//é“¾</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;<span class="number">9</span>;j++)<span class="comment">//nä¹‹å¤–ç‚¹çš„ç›¸äº’è¿è¾¹</span></span><br><span class="line">        &#123;</span><br><span class="line">            z[n+(i<span class="number">-1</span>)*<span class="number">9</span>+j][n+(i<span class="number">-1</span>)*<span class="number">9</span>+j<span class="number">+1</span>]=<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div>

<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291603778.webp"
                      alt="image.png|600"
                ></p>
<p>æœ€ç»ˆå»ºå‡ºçš„å›¾ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291956964.webp"
                      alt="graph.png|700"
                ></p>
<p>ï¼ˆè·ç¦»ä¸º9çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹å…¶å®æ²¡æœ‰å¿…è¦ï¼‰</p>
<p>ç”±å›¾å¯çŸ¥ï¼Œè¿™ä¸ªçŸ©é˜µ<strong>é•¿åº¦å’Œå®½åº¦æ˜¯åå€çš„n</strong></p>
<p>ç¬¬ä¸€æ­¥æ˜¯æŒ‡$1\to n$</p>
<p>ç¬¬äºŒæ­¥æ˜¯æŒ‡$n+1 \to n+2 \to n+3 \ldots$</p>
<p>å‡è®¾$n&#x3D;5$</p>
<p>åŠ å…¥å¯¹$1\to 4$æœ‰ä¸€æ¡é•¿åº¦ä¸º$6$çš„è¾¹ï¼Œé‚£ä¹ˆå°±æ˜¯ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291959263.webp"
                      alt="graph (1).png|700"
                ></p>
<p>å‡å¦‚æ˜¯$3\to 5$é•¿åº¦ä¸º$9$</p>
<p>é‚£ä¹ˆå°±æ˜¯ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304292001831.webp"
                      alt="graph (2).png|700"
                ></p>
<p>å¯¹é•¿åº¦ä¸º$1$ç‰¹åˆ¤ä¸€ä¸‹,ç›´æ¥è¿è¾¹</p>
<p>å¯¹é•¿åº¦ä¸º$0$ç‰¹åˆ¤ä¸€ä¸‹ï¼Œç›´æ¥<code>continue</code></p>
<p>å‡å¦‚$2 \to 4$é•¿åº¦ä¸º$1$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304292021848.webp"
                      alt="graph (3).png|700"
                ></p>
<h1 id="åˆç­‰æ•°è®º"><a href="#åˆç­‰æ•°è®º" class="headerlink" title="åˆç­‰æ•°è®º"></a>åˆç­‰æ•°è®º</h1><h2 id="è´¨æ•°"><a href="#è´¨æ•°" class="headerlink" title="è´¨æ•°"></a>è´¨æ•°</h2><blockquote>
<p>ç ”ç©¶èŒƒå›´ï¼šæ­£æ•´æ•°</p>
<p>ç´ æ•°:åªæœ‰ä¸¤ä¸ªå› å­</p>
</blockquote>
<p>é™¤äº†è´¨æ•°å°±æ˜¯ <code>å’Œæ•°</code> å’Œ <code>1</code></p>
<p>å¦‚ä½•åˆ¤æ–­$x$æ˜¯ä¸æ˜¯è´¨æ•°</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291616963.webp"
                      alt="image.png|600"
                ></p>
<p>æœ‰å¯èƒ½$x$æ˜¯$1$æˆ–$0$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291617098.webp"
                      alt="image.png|600"
                ></p>
<hr>
<p>ä¸€ä¸ªæ•°çš„å› å­ä¸€å®šéƒ½æ˜¯æˆå¯¹å‡ºç°çš„</p>
<p>$x&#x3D;a\cdot b$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291619810.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291619096.webp"
                      alt="image.png|600"
                ></p>
<p>æ‰€ä»¥åªéœ€è¦æšä¸¾å‰æ ¹å·ä¸ªå³å¯ï¼Œå¤§äº $\sqrt{x}$ çš„è´¨å› å­æœ€åå¤„ç†ä¸€ä¸‹å°±å¯ä»¥äº†ã€‚</p>
<p>ä¸ºä»€ä¹ˆæ²¡æœ‰ä¸¤ä¸ªå¤§äº $\sqrt{x}$ çš„è´¨å› å­å‡ºç°ï¼Ÿ</p>
<p>åè¯æ³•ï¼šå‡å¦‚æœ‰ï¼Œé‚£ä¹ˆå®ƒä»¬çš„ä¹˜ç§¯å·²ç»å¤§äºäº† xï¼Œæ‰€ä»¥ä¸å­˜åœ¨ã€‚</p>
<p><strong>å…¸å‹é”™è¯¯</strong>ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291620535.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291622907.webp"
                      alt="image.png|600"
                ></p>
<p><em>è¿™æ ·ä¼šå¾ˆman</em></p>
<p>å› ä¸ºæ¯æ¬¡éƒ½ä¼šé‡æ–°è°ƒç”¨ä¸€éå‡½æ•°</p>
<p>ä¿®æ”¹ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304291626807.webp"
                      alt="image.png|600"
                ></p>
<p>xæœ€å¤§åªèƒ½åˆ°$x^{16}$</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> a=<span class="number">2</span>;a*a&lt;=x;a++)</span><br><span class="line">    <span class="keyword">if</span>(x%a==<span class="number">0</span>)<span class="comment">//ç¬¬ä¸€ä¸ªè´¨å› å­,æ¯æ¬¡è¿›æ¥éƒ½ä¸€å®šæ˜¯ä¸€ä¸ªè´¨å› å­</span></span><br><span class="line">    &#123;</span><br><span class="line">        cnt++;</span><br><span class="line">        prime[cnt]=a;</span><br><span class="line">        <span class="keyword">while</span>(x%a==<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            num[cnt]++;</span><br><span class="line">            x/=a;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">if</span>(x!=<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">    cnt++;</span><br><span class="line">    prime[cnt]=x;</span><br><span class="line">    num[cnt]=<span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>å°ç»ƒä¹ :<strong>CF45G</strong></p>
<p><strong>å“¥å¾·å·´èµ«çŒœæƒ³</strong>ï¼š</p>
<p><em>å§‹ç»ˆä¸ä¼šè¶…è¿‡ä¸‰ç»„</em></p>
<p>å¯¹äºä»»ä½•ä¸€ä¸ªå¤§äºç­‰äº4çš„å¶æ•°ï¼Œä¸€å®šå¯ä»¥æ‹†æˆä¸¤ä¸ªè´¨æ•°ä¹‹å’Œ</p>
<p>ä»»ä½•ä¸€ä¸ªå¤§äºç­‰äº7çš„å¥‡æ•°ï¼Œä¸€å®šå¯ä»¥æ‹†æˆä¸‰ä¸ªè´¨æ•°ä¹‹å’Œ</p>
<p>åŠ å’Œç®—å‡ºæ¥æ˜¯$x$</p>
<p>å¦‚æœ$x$æ˜¯å¶æ•°ï¼Œé‚£ä¹ˆå°±æ˜¯$2$ç»„ï¼Œ</p>
<p>å¦‚æœ$x$æ˜¯å¥‡æ•°ï¼Œé‚£ä¹ˆè‚¯å®šå°äº$3$ç»„</p>
<p>$x$æœ¬èº«æ˜¯è´¨æ•°æ—¶ç­”æ¡ˆä¸º$1$ç»„</p>
<p>å‰©ä¸‹æƒ…å†µç­”æ¡ˆè¦ä¹ˆä¸º$2$ç»„ï¼Œè¦ä¹ˆä¸º$3$ç»„</p>
<p>ä¸€ä¸ªå¥‡æ•°å¯ä»¥çœ‹æˆä¸€ä¸ªå¥‡æ•°å’Œä¸€ä¸ªå¶æ•°çš„å’Œ</p>
<p>è‹¥$x-2$æ˜¯è´¨æ•°ï¼Œé‚£ä¹ˆå°±æ˜¯$2$ç»„ï¼Œå¦åˆ™å°±å¯ä»¥æ‹†æˆ$3$ç»„</p>
<h2 id="é€†å…ƒ"><a href="#é€†å…ƒ" class="headerlink" title="é€†å…ƒ"></a>é€†å…ƒ</h2><h3 id="é€†å…ƒçš„å¼•å…¥"><a href="#é€†å…ƒçš„å¼•å…¥" class="headerlink" title="é€†å…ƒçš„å¼•å…¥"></a>é€†å…ƒçš„å¼•å…¥</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304300831974.webp"
                      alt="image.png|600"
                ></p>
<p>ç®—å®Œå–æ¨¡ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304300833180.webp"
                      alt="image.png|600"
                ></p>
<p>è¾¹ç®—è¾¹å–æ¨¡ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304300834493.webp"
                      alt="image.png|600"
                ></p>
<p>ç†è®ºä¸Šå§æ¥è¯´å®ƒä¹Ÿåº”è¯¥ç­‰äº$2$</p>
<p>ç°åœ¨æƒ³è®¡ç®—$a \div b%p$</p>
<p>ç°åœ¨è¦æŠŠ</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304300836655.webp"
                      alt="image.png|600"
                ></p>
<p>å¦‚æœèƒ½æ‰¾åˆ°è¿™ä¸ª $c$</p>
<p>$c$ä¹Ÿå°±æ˜¯ $\frac 1 b$</p>
<p>é‚£ä¹ˆ$c$å°±æ˜¯$b$çš„é€†å…ƒ</p>
<p>æˆ‘ä»¬æƒ³ç”¨ä¸€ä¸ªä¹˜æ³•æ¥æ›¿ä»£é™¤æ³•</p>
<hr>
<h3 id="è´¹é©¬å°å®šç†"><a href="#è´¹é©¬å°å®šç†" class="headerlink" title="è´¹é©¬å°å®šç†"></a>è´¹é©¬å°å®šç†</h3><p>å½“$p$æ˜¯<strong>è´¨æ•°</strong>å¹¶ä¸”$1\le a &lt; p$</p>
<p>é‚£ä¹ˆä¸€å®šæœ‰</p>
<p>$$<br>a^{p-1}\bmod p\equiv1<br>$$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304300839102.webp"
                      alt="image.png|600"
                ></p>
<p>$$<br>a^{p-1}\equiv 1 \pmod p<br>$$</p>
<p>è¿™ä¹Ÿå°±æ˜¯<strong>è´¹é©¬å°å®šç†</strong></p>
<p>ä¸¤è¾¹åŒé™¤$a$</p>
<p>$$<br>a^{p-2}\equiv \frac 1 a \pmod  p<br>$$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304300844814.webp"
                      alt="image.png|600"
                ></p>
<p>å››åˆ†ä¹‹ä¸€æ¨¡$p$å°±æ˜¯$4^{p-2}%p$</p>
<p>$$a\div b %p &#x3D;a\times b^{p-2}% p$$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/20230430092107.webp"
                      alt="image.png|600"
                ></p>
<p>é‚£ä¹ˆ$b$çš„$p-2$æ¬¡æ–¹å°±å¯ä»¥ç”¨[[#å¿«é€Ÿå¹‚|å¿«é€Ÿå¹‚]]æ¥æ±‚äº†</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304300848556.webp"
                      alt="image.png|600"
                ></p>
<p>ç¬¬ä¸€ä¸ªæ¡ä»¶æ˜¯$p$<strong>æ˜¯è´¨æ•°</strong></p>
<p><del>ç¬¬äºŒä¸ªæ˜¯aå¤§äºç­‰äº1å°äºp</del>ï¼ˆ$a$ä¹Ÿå¯ä»¥æ¯”$p$å¤§ï¼Œå› ä¸ºä¸€æ¨¡$p$å°±è‚¯å®šæ¯”$p$å°äº†ï¼Œåªè¦å®ƒä»¬<strong>äº’è´¨</strong>å°±å¯ä»¥ï¼‰</p>
<p>å‡å¦‚a&gt;pï¼Œaä¸päº’è´¨ï¼Œé‚£ä¹ˆa%pè¿˜ä¸päº’è´¨å—</p>
<p>ä¾ç„¶äº’è´¨ï¼Œè¿™ä¸å°±æ˜¯è¾—è½¬ç›¸é™¤æ³•ä¹ˆ</p>
<p>$gcd(a,p)&#x3D;1 \to gcd(p,a%p)&#x3D;1$</p>
<p>æ‰€ä»¥ç¬¬äºŒä¸ªæ¡ä»¶æ˜¯$gcd(a,p)&#x3D;1$,ä¹Ÿå°±æ˜¯$a$å’Œ$p$äº’è´¨</p>
<p><strong>äº’è´¨çš„æ¦‚å¿µ</strong>ï¼šä¸¤ä¸ªæ•°çš„å…¬å› æ•°åªæœ‰1</p>
<p>é‚£å‡å¦‚$p$ä¸æ˜¯è´¨æ•°æ€ä¹ˆåŠ</p>
<p>æ–°å®šç†ï¼š<strong>æ¬§æ‹‰å®šç†</strong></p>
<h3 id="æ¬§æ‹‰å®šç†-æ¬§æ‹‰å‡½æ•°"><a href="#æ¬§æ‹‰å®šç†-æ¬§æ‹‰å‡½æ•°" class="headerlink" title="æ¬§æ‹‰å®šç†&amp;æ¬§æ‹‰å‡½æ•°"></a>æ¬§æ‹‰å®šç†&amp;æ¬§æ‹‰å‡½æ•°</h3><p>ä½¿ç”¨æ¡ä»¶ï¼š$gcd(a,p)&#x3D;1$</p>
<p>$$<br>a^{\varphi(p)}\equiv1\pmod p<br>$$</p>
<p>$\varphi(p)$ä¸ºæ¬§æ‹‰å‡½æ•°</p>
<p><strong>å®šä¹‰</strong>ï¼šä¸€åˆ°$p$ä¸­æœ‰å¤šå°‘ä¸ªæ•°ä¸$p$äº’è´¨</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304300854015.webp"
                      alt="image.png|600"
                ></p>
<p>$\varphi (4)\to$ 1 3<br>$\varphi (6)\to$ 1 5</p>
<p>å’Œä¸Šé¢åŒç†ï¼Œä¸¤è¾¹åŒæ—¶é™¤ä»¥$a$</p>
<p>$$<br>a^{\varphi (p)-1}\equiv \frac 1 a \pmod p<br>$$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304300857708.webp"
                      alt="image.png|600"
                ></p>
<p>å½“$p$æ˜¯è´¨æ•°çš„æ—¶å€™ï¼Œ$\varphi (p)&#x3D;p-1$</p>
<p>$$<br>a \div b \bmod p&#x3D;a \times \frac 1 b \bmod p&#x3D;a \times b^{\varphi(p)-1} \bmod p &#x3D; a \times b^{p-2} \bmod p<br>$$</p>
<p>$a$å’Œ$p$ä¸äº’è´¨çš„æ—¶å€™ï¼Œ<strong>ä»¥ä¸Šä¸¤ç§å®šç†æ˜¯ä¸æˆç«‹çš„ï¼Œæ­¤æ—¶é€†å…ƒä¸å­˜åœ¨</strong></p>
<p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬è®¤ä¸ºè¿™ä¸ªç”¨é€†å…ƒæ˜¯ç®—ä¸å‡ºæ¥çš„</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304300900691.webp"
                      alt="image.png|600"
                ></p>
<p>æ¥ä¸‹æ¥é—®é¢˜æ¥äº†ï¼Œ$\varphi (n)$æ€ä¹ˆç®—å‘¢</p>
<p>å‡è®¾$n&#x3D;p_1$</p>
<p>å‡è®¾$p_1$æ˜¯ä¸ªè´¨æ•°ï¼Œè¿™æ—¶å€™$\varphi (n)&#x3D;p-1$</p>
<p>å‡è®¾$n&#x3D;p_1^2$?</p>
<p>$p_1$çš„å€æ•°éƒ½å’Œ$p_1$éƒ½ä¸äº’è´¨</p>
<p>ä¸€å…±æœ‰$p_1$ä¸ªæ•°å’Œ$n$ä¸äº’è´¨</p>
<p>é‚£ä¹ˆ$\varphi(n)$å°±æ˜¯ ${p_{1}^2}-p_1&#x3D;p_1 \times (p1-1)$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304300905869.webp"
                      alt="image.png|600"
                ></p>
<p>é‚£ä¹ˆå‡è®¾ä¸º$p^k$æ—¶ï¼Œæ¯$p_1$ä¸ªæ•°å°±åˆšå¥½æœ‰ä¸€ä¸ªæ˜¯$p_1$çš„å€æ•°</p>
<p>é‚£ä¹ˆæ¯$p_1$ä¸ªæ•°å°±æœ‰$p_1-1$ä¸ªä¸$n$äº’è´¨çš„</p>
<p>ä¸€å…±æœ‰$n$ä¸ªæ•°</p>
<p>æ‰€ä»¥$\varphi(n)&#x3D;\frac n p_{1} \cdot (p_1-1)$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304300908200.webp"
                      alt="image.png|600"
                ></p>
<hr>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304300911470.webp"
                      alt="image.png|600"
                ></p>
<p>å‡è®¾$n&#x3D;p_{1}\times p_2$</p>
<p>$\varphi(n)&#x3D;n- \frac n {p_{1}} - \frac n {p_{2}} + \frac n {p_{1}\times p_2}$</p>
<p>è§£é‡Šä¸€ä¸‹ï¼Œè¿™ä¸ªå¼å­å°±æ˜¯æ€»å…±æœ‰$n$ä¸ªæ•°ï¼Œæ¯$p_1$ä¸ªæ•°å°±ä¼šå‡ºç°ä¸€ä¸ªä¸ä¸$n$äº’è´¨çš„æ•°ï¼ˆ$p_1$çš„å€æ•°ï¼‰ï¼Œæ¯$p_2$ä¸ªæ•°å°±ä¼šå‡ºç°ä¸€ä¸ªä¸ä¸$n$äº’è´¨çš„æ•°ï¼ˆ$p_2$çš„å€æ•°ï¼‰ï¼Œå‡å»ä¸äº’è´¨çš„æ•°å‰©ä¸‹çš„å°±æ˜¯äº’è´¨çš„æ•°ï¼Œæˆ‘ä»¬å‘ç°æ¯$p_{1}\times p_2$ä¸ªæ•°å°±ä¼šå‡ºç°ä¸€ä¸ªä¸ä¸näº’è´¨çš„æ•°ä¸”ä¸º$p_{1}\times p_2$çš„å€æ•°ï¼ˆå…¶å®å°±æ˜¯$n$ï¼‰ï¼Œè¿™ä¸ªæ•°è¢«åˆ äº†ä¸¤æ¬¡ï¼Œæ‰€ä»¥è¦åŠ å›æ¥ä¸€æ¬¡</p>
<p>æå–ä¸€ä¸ª$n$å‡ºæ¥</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304300913285.webp"
                      alt="image.png|600"
                ></p>
<p>å› å¼åˆ†è§£ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304300912307.webp"
                      alt="image.png|600"
                ></p>
<p>æˆ‘ä»¬å‘ç°ï¼š</p>
<p>å½“$n&#x3D;p_1^{k_1}\cdot p_2^{k_2}\cdot p_3^{k_3}\dots\cdot p_t^{k_t}$æ—¶($p$éƒ½æ˜¯è´¨æ•°)(æ— è®º$n$ä¸ºä½•å€¼ï¼Œä¸€å®šèƒ½å‡‘æˆå‡ ä¸ªè´¨å› æ•°å¹‚çš„ä¹˜ç§¯çš„å½¢å¼â€”â€”è´¨å› æ•°åˆ†è§£)</p>
<p>ğŸ“œ $\varphi(n)&#x3D;n\cdot (1-\frac 1 {p_1})(1-\frac 1 {p_2})(1-\frac 1 {p_3})\dots(1-\frac 1 {p_t})$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304300913014.webp"
                      alt="image.png|600"
                ></p>
<p><strong>æ ¹æ®å®¹æ–¥åŸç†</strong></p>
<p><strong>ç°åœ¨è¦æ‰¾çš„å°±æ˜¯$n$çš„æ¯ä¸ªè´¨å› å­,å‡ æ¬¡ä¸ç”¨ç®¡</strong></p>
<p>æ­£ç¡®æ€§çš„è¯ï¼Œä¸¾å‡ ä¸ªä¾‹å­å°±è¡Œäº†ï¼Œæ¯•ç«Ÿï¼Œ<del>OIä¸éœ€è¦è¯æ˜</del></p>
<p><strong>å…ˆé™¤å†ä¹˜é˜²æ­¢èŒƒå›´ç‚¸æ‰</strong></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">get_phi</span><span class="params">(<span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> phi = n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i*i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">if</span>(n%i==<span class="number">0</span>)<span class="comment">//è´¨å› å­,è¯æ˜è§[è´¨å› æ•°åˆ†è§£]</span></span><br><span class="line">        &#123;</span><br><span class="line">            phi=phi/i*(i<span class="number">-1</span>);</span><br><span class="line">            <span class="keyword">while</span>(n%i==<span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                n=n/i;<span class="comment">//æŠŠiçš„å‡ æ¬¡æ–¹å…¨éƒ¨å»æ‰</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">if</span>(n!=<span class="number">1</span>)<span class="comment">//æœ€åä¸€ä¸ªè´¨æ•°æ˜¯nï¼Œå¦‚æœæ˜¯nçš„å¾ˆå¤šæ¬¡æ–¹ï¼Œå¾ªç¯ä¸ä¼šåœæ­¢</span></span><br><span class="line">        phi=phi/n*(n<span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">return</span> phi;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="å°é—®é¢˜ï¼šæ±‚nä¸ªæ•°çš„é€†å…ƒ"><a href="#å°é—®é¢˜ï¼šæ±‚nä¸ªæ•°çš„é€†å…ƒ" class="headerlink" title="å°é—®é¢˜ï¼šæ±‚nä¸ªæ•°çš„é€†å…ƒ"></a>å°é—®é¢˜ï¼šæ±‚nä¸ªæ•°çš„é€†å…ƒ</h3><h4 id="é˜¶ä¹˜çš„åšæ³•"><a href="#é˜¶ä¹˜çš„åšæ³•" class="headerlink" title="é˜¶ä¹˜çš„åšæ³•"></a>é˜¶ä¹˜çš„åšæ³•</h4><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304300921125.webp"
                      alt="image.png|600"
                ></p>
<p>æœ€ç®€å•çš„åšæ³•ï¼š<em>æšä¸¾ä¸€ä¸‹</em></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304300922921.webp"
                      alt="image.png|600"
                ></p>
<p>è¿™ä¹ˆåšçš„å¤æ‚åº¦æ˜¯$O(nlogn)$çš„ï¼Œä½†æ˜¯$n$æ¯”è¾ƒå¤§</p>
<p>å…ˆç®—å‡º$1$åˆ°$n$æ¯ä¸ªæ•°çš„é˜¶ä¹˜ç®—ä¸‹æ¥</p>
<p>åªéœ€è¦ç®—$nï¼$çš„é€†å…ƒ</p>
<p>$n$çš„é€†å…ƒä¹Ÿå°±æ˜¯$\frac 1 n$(æ¨¡æ„ä¹‰ä¸‹)</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304300930964.webp"
                      alt="image.png|600"
                ></p>
<p>æ¯ä¸ªæ•°çš„é˜¶ä¹˜åˆ†ä¹‹$1$ï¼Œä»å³å¾€å·¦æ¨</p>
<p>å†ç›¸ä¹˜ï¼Œå°±æ±‚å¾—é€†å…ƒ</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304300935335.webp"
                      alt="image.png|600"
                ></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*-------------------*/</span></span><br><span class="line">   fac[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">   <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="comment">//1</span></span><br><span class="line">   &#123;</span><br><span class="line">       fac[i]=<span class="number">1ll</span>*fac[i<span class="number">-1</span>]*i%p;</span><br><span class="line">   &#125;</span><br><span class="line">   ifac[n]=<span class="built_in">ksm</span>(fac[n],p<span class="number">-2</span>,p);<span class="comment">//ç®—nçš„é˜¶ä¹˜çš„é€†å…ƒ</span></span><br><span class="line">   <span class="keyword">for</span>(<span class="type">int</span> i=n<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--)<span class="comment">//2</span></span><br><span class="line">   &#123;</span><br><span class="line">       ifac[i]=<span class="number">1ll</span>*ifac[i<span class="number">+1</span>]*(i<span class="number">+1</span>)%p;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="comment">//3</span></span><br><span class="line">   &#123;</span><br><span class="line">       inv[i]=fac[i<span class="number">-1</span>]*ifac[i]%p;<span class="comment">//é™¤ä»¥içš„é˜¶ä¹˜ä¹Ÿå°±æ˜¯ä¹˜ä»¥içš„é˜¶ä¹˜çš„é€†å…ƒ</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">/*-------------------*/</span></span><br></pre></td></tr></table></figure></div>

<p>å¤æ‚åº¦ä¸º$O(n)$</p>
<p>è¿™æ˜¯ç¬¬ä¸€ç§æ–¹æ³•</p>
<h4 id="æ­£æ¨"><a href="#æ­£æ¨" class="headerlink" title="æ­£æ¨"></a>æ­£æ¨</h4><p>é¦–å…ˆ$1$çš„é€†å…ƒå°±æ˜¯$1$</p>
<p>å‡è®¾ä»å·¦å‘å³ä¸€ä¸ªä¸€ä¸ªæ±‚</p>
<p>å½“æˆ‘è¦æ±‚$i$è¿™ä¸ªæ•°çš„æ—¶å€™</p>
<p>é‚£ä¹ˆ$i-1$ä¸ªé€†å…ƒéƒ½å·²ç»æ±‚å¥½äº†</p>
<p>å¯ä»¥æŠŠå®ƒä»¬éƒ½å­˜ä¸‹æ¥</p>
<p><strong>æ¡ä»¶:è´¨æ•°på¤§äºi</strong></p>
<p>$p%i$ä¸€å®šå°äº$i$</p>
<p>è®¾$p&#x3D;ki+r$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304300956374.webp"
                      alt="image.png|600"
                ></p>
<p>å› ä¸º$i$ä¸€å®šä¸æ˜¯$p$çš„å› å­</p>
<p>$1\le r \le i-1$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304300958120.webp"
                      alt="image.png|600"
                ></p>
<p>ç°åœ¨æƒ³ç®—$i$åˆ†ä¹‹ä¸€</p>
<p>ä¸¤è¾¹åŒé™¤$i$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304300958020.webp"
                      alt="image.png|600"
                ></p>
<p>ä¸¤è¾¹åŒé™¤$r$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304300959364.webp"
                      alt="image.png|600"
                ></p>
<p>$r$æ˜¯ä¸ªå°äº$i$çš„æ•°ï¼Œå› æ­¤å®ƒçš„é€†å…ƒä¸€å®šåœ¨ä¹‹å‰æ±‚å‡ºæ¥çš„</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301000198.webp"
                      alt="image.png|600"
                ></p>
<p>å¤æ‚åº¦$O(n)$</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">inv[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>; i &lt;= maxn; ++i)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> k = p / i;</span><br><span class="line">	<span class="type">int</span> r = p % i;</span><br><span class="line">	inv[i] = <span class="number">1ll</span> * k * (-inv[r] + p) % p;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>ç”±äºæ˜¯åœ¨æ¨¡ p æ„ä¹‰ä¸‹çš„è¿ç®—ï¼Œæ‰€ä»¥æ‰€æœ‰é€†å…ƒéƒ½å°äº pï¼Œæ‰€ä»¥åŠ ä¸Š p å°±å¯ä»¥é˜²æ­¢è´Ÿæ•°ã€‚</p>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P3811" >æ¨¡æ¿é¢˜<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h3 id="Miller-Rabin"><a href="#Miller-Rabin" class="headerlink" title="Miller-Rabin"></a>Miller-Rabin</h3><p>åˆ¤æ–­$x$æ˜¯ä¸æ˜¯è´¨æ•°</p>
<p>å¤æ‚åº¦ä¸º$O(\sqrt x)$</p>
<p>å‡å¦‚$x \le 10^{18}$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301008894.webp"
                      alt="image.png|600"
                ></p>
<p>å‡è®¾$n&#x3D;37$</p>
<p>$n-1&#x3D;36$</p>
<p>$36&#x3D;9 \times 2^2$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301010370.webp"
                      alt="image.png|600"
                ></p>
<p>å½“$n$ä¸ºè´¨æ•°çš„æ—¶å€™</p>
<p>è‡³å°‘æœ‰ä¸€æ¡æˆç«‹</p>
<p>$n$ä¸æ˜¯è´¨æ•°çš„æ—¶å€™ä¹Ÿå¯èƒ½æ»¡è¶³ã€‚</p>
<p>å‡å¦‚ä¸€ä¸ªéƒ½ä¸æ»¡è¶³ï¼Œé‚£ä¹ˆä¸€å®šä¸æ˜¯è´¨æ•°ã€‚</p>
<hr>
<p>è¡¥å……è¯æ˜ï¼š</p>
<ol>
<li>Fermat ç´ æ€§æ£€éªŒ</li>
</ol>
<p>ç”±è´¹é©¬å°å®šç†å¯çŸ¥ï¼Œè‹¥ $p$ æ˜¯ç´ æ•°ï¼š$a^{p - 1} \equiv 1 \pmod p$</p>
<p>é‚£ä¹ˆå½“è¿™ä¸ªç­‰å¼æˆç«‹çš„æ—¶å€™ï¼Œ$p$ å°±ä¸€å®šæ˜¯ç´ æ•°ï¼Ÿ</p>
<p>ä¸ä¸€å®šã€‚</p>
<p>æœ‰éƒ¨åˆ†åˆæ•°æ— æ³•è¢«ç­›æ‰ã€‚</p>
<p>è¿™ä¸ªæ—¶å€™æ›´æ¢åº•æ•°ï¼Œå¯ä»¥å¢å¤§å®ƒæ˜¯ç´ æ•°çš„æ¦‚ç‡ï¼Œä½†ä¸ç®¡æ€ä¹ˆæ¢ï¼Œä»ç„¶æœ‰åˆæ•°æ— æ³•è¢«ç­›æ‰ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¼•å…¥å¦ä¸€ä¸ªå®šç†ã€‚</p>
<ol start="2">
<li>äºŒæ¬¡æ¢æµ‹å®šç†</li>
</ol>
<p>å¯¹äºç´ æ•° $p$ è‹¥ $x^{2}\equiv 1 \pmod p$ é‚£ä¹ˆå°äº $p$ çš„è§£åªæœ‰ä¸¤ä¸ªï¼Œ$x_{1}&#x3D; 1, x_{2} &#x3D; p - 1$ã€‚</p>
<p>è¯æ˜ï¼š$x^{2} - 1 \equiv 0 \pmod p\to(x + 1)(x - 1) \equiv 0\pmod p$ ï¼Œ</p>
<p>é‚£ä¹ˆè¦ä¹ˆæ˜¯é›¶ï¼Œè¦ä¹ˆæ˜¯ p çš„å€æ•°ã€‚</p>
<p>æ‰€ä»¥å°äº $p$ çš„è§£å°±æ˜¯è¿™ä¸¤ä¸ªã€‚</p>
<p>ä¸¤è€…ç»“åˆä¸€ä¸‹ï¼š</p>
<p>å…ˆç”¨ Fermat æ£€æµ‹å¾—åˆ° $a^{p - 1} \equiv 1 \pmod p$ï¼Œè¿™æ—¶å€™ä¿è¯ $p - 1$ æ˜¯å¶æ•°ï¼Œä¸ç„¶ p æ˜¯å¶æ•°å°±ç›´æ¥ç­›æ‰ï¼Œé‚£ä¹ˆå°±å¯ä»¥æ‹†åˆ†ä¸º $(a^{\frac{p-1}2})^2\equiv1\pmod{p}$ ï¼Œå°±å¯ä»¥ç”¨äºŒæ¬¡æ¢æµ‹å®šç†æ¥åˆ¤æ–­äº†ã€‚</p>
<p>å¦‚æœè¿˜ç¬¦åˆï¼Œé‚£å°±å¯ä»¥å†è¿›è¡ŒåŒæ ·çš„æ“ä½œï¼Œç›´åˆ°é‡Œé¢çš„æŒ‡æ•°å˜ä¸ºå¥‡æ•°ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æŠŠ $p - 1 &#x3D; u \times 2^t$ï¼ˆu æ˜¯å¥‡æ•°ï¼‰ï¼Œå¯¹ $a^u,a^{u\times2},a^{u\times2^2}$ ç­‰æ•°è¿›è¡Œæ£€éªŒï¼Œå®ƒä»¬çš„è§£è¦ä¹ˆå…¨æ˜¯ä¸€ï¼Œè¦ä¹ˆå‡ºç° p - 1ï¼Œæ³¨æ„ï¼Œä¸€å¼€å§‹æ²¡æå–çš„æ—¶å€™æ˜¯ä¸èƒ½ç­‰äº p - 1 çš„ï¼Œå› ä¸ºè¦æ»¡è¶³è´¹é©¬å°å®šç†ã€‚</p>
<p>æ³¨æ„ç‰¹åˆ¤ a æ˜¯ p çš„å€æ•°çš„æƒ…å†µã€‚</p>
<p><a class="link"   href="https://zhuanlan.zhihu.com/p/349360074" >å‚è€ƒæ–‡ç« <i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>#Q ä¸ºä»€ä¹ˆä»å‡ºç°è§£ä¸º p - 1 åè§£å°±å¿…é¡»å…¨æ˜¯ 1ï¼Ÿ</p>
<p>å‡å¦‚ä¸€ä¸ª$a$åªæˆç«‹æ€§è´¨ä¸€ï¼Œ<del>ä»€ä¹ˆä¹Ÿè¯´æ˜ä¸äº†</del>ï¼Œè¯´æ˜$n$æœ‰å¯èƒ½æ˜¯è´¨æ•°ã€‚</p>
<p>æ¢äº†ä¸€ä¸ª$a$ï¼Œä¸¤ä¸ªæ€§è´¨ä»ç„¶æœ‰ä¸€ä¸ªæˆç«‹ï¼Œé‚£ä¹ˆè¿™ä¸ªæ¦‚ç‡å°±ä¼šæé«˜ã€‚</p>
<p>ä¸æ–­åœ°å¾€é‡Œå¸¦ï¼Œå‡å¦‚ä¸€ç›´æˆç«‹çš„è¯ï¼Œé‚£ä¹ˆæ¦‚ç‡å°±ä¼šä¸æ–­æé«˜ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301018351.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301022385.webp"
                      alt="image.png|600"
                ></p>
<p>åœ¨$i$ä¸æ–­åŠ ä¸€çš„è¿‡ç¨‹ä¸­ $a^d$åœ¨ä¸æ–­åœ°åœ¨å¹³æ–¹</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">mb</span><span class="params">(<span class="type">int</span> n,<span class="type">int</span> a)</span><span class="comment">//æ£€æŸ¥æ˜¯å¦ç¬¦åˆå®šç†ä¸­çš„ä¸€ä¸ªï¼Œç°åœ¨è¦æ±‚då’Œr</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> d=n<span class="number">-1</span>,r=<span class="number">0</span>;<span class="comment">//ä¸æ–­æ‹¿dé™¤ä»¥2</span></span><br><span class="line">    <span class="keyword">while</span>(d%<span class="number">2</span>==<span class="number">0</span>)</span><br><span class="line">        d=d/<span class="number">2</span>,r++;</span><br><span class="line">    <span class="type">int</span> x=<span class="built_in">ksm</span>(a,d,n);</span><br><span class="line">    <span class="keyword">if</span>(x==<span class="number">1</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;r;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//açš„dæ¬¡æ–¹å·²ç»ç®—è¿‡äº†ï¼Œæ¯åŠ ä¸€æ¬¡</span></span><br><span class="line">        <span class="keyword">if</span>(x==n<span class="number">-1</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        x=<span class="number">1ll</span>*x*x%n;<span class="comment">//ä¸ç„¶å°±å¹³æ–¹ä¸€ä¸‹</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>å‡å¦‚ $a^d$ æ»¡è¶³è§£ä¸º $1$ï¼Œé‚£ä¹ˆä¸æ–­æŠŠå®ƒå¹³æ–¹ï¼Œå¾—åˆ°çš„è§£ä¹Ÿå¿…ç„¶ä¸º 1ï¼Œå› æ­¤å¯¹äºç¬¬ä¸€ä¸ªæ¡ä»¶æˆ‘ä»¬åªéœ€è¦æ£€æµ‹ $a^d$ æ˜¯å¦æ»¡è¶³å³å¯ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301024349.webp"
                      alt="image.png|600"
                ></p>
<p>æšä¸¾$d$å’Œ$r$ä»¥åŠå¿«é€Ÿå¹‚å¤æ‚åº¦éƒ½æ˜¯$log_n$çš„</p>
<p>ä¸€åŠæ¦‚ç‡å¯¹ï¼Œä¸€åŠæ¦‚ç‡é”™</p>
<p>$20$æ¬¡æ£€æŸ¥åï¼Œä»ç„¶é”™è¯¯çš„æ¦‚ç‡å°±æ˜¯$\frac 1 {2^{20}}$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301029032.webp"
                      alt="image.png|600"
                ></p>
<p>$a\in1\sim n-1$</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">is_prime</span><span class="params">(<span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n&lt;<span class="number">2</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">23</span>;i++)<span class="comment">//æ­£å¸¸20æ¬¡æ˜¯è¶³å¤Ÿçš„</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> a=<span class="built_in">rand</span>()%(n<span class="number">-1</span>)<span class="number">+1</span>;<span class="comment">//éšæœºæ£€æŸ¥ 1~n-1</span></span><br><span class="line">        <span class="keyword">if</span>(!<span class="built_in">mb</span>(n,a)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>ç¬¬äºŒç§æ–¹æ³•ï¼šå®šä¹‰ä¸€ä¸ª<strong>è´¨æ•°è¡¨</strong></p>
<p>åœ¨$10^{18}$ä»¥å†…è´¨æ•°çš„æ¦‚ç‡æ›´é«˜(<em>å‰äººçš„æ™ºæ…§</em>)</p>
<p>è´¨æ•°è¡¨å¯ä»¥è‡ªå·±å»æœã€‚</p>
<ul>
<li><p>å¯¹äº $2^{32}$ ä»¥å†…çš„åˆ¤ç´ æ•°ï¼Œé€‰ 2, 7, 61 å³å¯</p>
</li>
<li><p>å¯¹äº $2^{64}$ ä»¥å†…çš„åˆ¤ç´ æ•°ï¼Œé€‰ 2, 325, 9375, 28178, 450775, 9780504, 1795265022 å³å¯ã€‚</p>
</li>
<li><p>å¯¹äºè€ƒåœºä¸Šï¼Œé€‰å‰ 12 ä¸ªè´¨æ•°ä½œä¸ºåº•æ•°å³å¯ï¼Œ<br>2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37ï¼Œé€‚ç”¨äº $2^{78}$ ä»¥å†…çš„åˆ¤æ–­ç´ æ•°ã€‚</p>
</li>
</ul>
<p><a class="link"   href="https://www.luogu.com.cn/blog/wangrx/miller-rabin" >å‚è€ƒæ–‡ç« <i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h2 id="EXGCD"><a href="#EXGCD" class="headerlink" title="EXGCD"></a>EXGCD</h2><p>$gcd(a,b)&#x3D;g$</p>
<p><strong>è§£å†³çš„é—®é¢˜</strong> æ˜¯ä¸ºäº†è§£å‡º$ax+by&#x3D;g$</p>
<p>æœªçŸ¥æ•°ä¸ªæ•°æ¯”æ–¹ç¨‹æ•°å¤šçš„æ—¶å€™ï¼Œè¿™ä¸ªæ–¹ç¨‹é€šå¸¸æœ‰æ— æ•°è§£</p>
<p>æˆ‘ä»¬åªéœ€è¦æ‰¾åˆ°ä¸€ç»„è§£</p>
<p>ç”¨è¾—è½¬ç›¸é™¤æ±‚x,y?</p>
<p>$gcd(a,b)\to gcd(b,a%b)$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301058888.webp"
                      alt="image.png|600"
                ></p>
<p>å€’æ¨</p>
<p>å…ˆè®²è®²<strong>æœ€åä¸€å±‚</strong></p>
<p>æœ€ç»ˆä¸€å®šä¼šå¾—åˆ°ï¼š</p>
<p>$gcd(a,0)&#x3D;a$</p>
<p>å› ä¸ºæ¯æ¬¡å¾—åˆ°çš„ä¸€å®šæ˜¯å®ƒä»¬<strong>æœ€å¤§å…¬å› æ•°</strong>çš„å€æ•°</p>
<p>$x \cdot a+y \cdot 0&#x3D;a$</p>
<p>$x&#x3D;1,y&#x3D;0(random)$</p>
<p>å‡è®¾å·²ç»æ‰¾åˆ°äº†$xâ€™ yâ€™$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301100694.webp"
                      alt="image.png|600"
                ></p>
<p>æ€ä¹ˆå˜æˆå·¦è¾¹çš„å¼å­ï¼Ÿ</p>
<p>åªèƒ½æ¨å‡º$y&#x3D;xâ€™$ï¼Œè€Œä¸çŸ¥é“$x$ï¼Œæ‰€ä»¥è¦å¾€ä¸‹åŒ–ç®€</p>
<p>ä½™æ•°&#x3D;è¢«é™¤æ•°-é™¤æ•°ä¹˜å•†</p>
<p>$a% b&#x3D; a - \lfloor \frac a b \rfloor \times b$</p>
<p>æ›¿æ¢ä¸€ä¸‹å¹¶æ•´ç†ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301102376.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301103081.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301104954.webp"
                      alt="image.png|600"
                ></p>
<p>å’ŒåŸæ¥çš„æ¯”å¯¹ä¸€ä¸‹ï¼š</p>
<p>$ax+by&#x3D;g$</p>
<p>$\therefore$</p>
<p>$x&#x3D;yâ€™$</p>
<p>$y&#x3D;xâ€™-yâ€™ \lfloor \frac a b \rfloor$</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">exgcd</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b,<span class="type">int</span> &amp;x,<span class="type">int</span> &amp;y)</span><span class="comment">//g=gcd(a,b),xyé€šè¿‡å–åœ°å€ä¼ å‚</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(b==<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        x=<span class="number">1</span>;</span><br><span class="line">        y=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> a;<span class="comment">//gcd</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> xp,yp;</span><br><span class="line">    <span class="type">int</span> g=<span class="built_in">exgcd</span>(b,a%b,xp,yp);<span class="comment">//æœ€å¤§å…¬å› æ•°//x&#x27;y&#x27;</span></span><br><span class="line">    <span class="comment">// è¿”å›åä¸€å®šæ»¡è¶³xp*b+yp*a%b=g</span></span><br><span class="line">    <span class="comment">// xp*b+yp*(a-b*(a/b))=g</span></span><br><span class="line">    <span class="comment">// xp*b+yp*a-yp*b*(a/b)=g</span></span><br><span class="line">    <span class="comment">// yp*a+(xp-yp*(a/b))*b=g</span></span><br><span class="line">    x=yp;<span class="comment">//y&#x27;</span></span><br><span class="line">    y=xp-yp*(a/b);<span class="comment">//æ¯å±‚çš„xyæ˜¯å˜çš„ï¼Œgä¸€ç›´éƒ½æ˜¯a bçš„gcd</span></span><br><span class="line">    <span class="keyword">return</span> g;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>è¿™æ ·å°±å¯ä»¥æŠŠ$x$ï¼Œ$y$æ±‚å‡ºæ¥</p>
<p>å¦‚æœæƒ³è¦å…¶å®ƒçš„è§£ï¼Œé‚£ä¹ˆåªéœ€è¦æ”¹å˜ä¸€ä¸‹$y$çš„å€¼å°±å¯ä»¥è§£å‡ºå…¶å®ƒçš„è§£</p>
<h3 id="æ€§è´¨"><a href="#æ€§è´¨" class="headerlink" title="æ€§è´¨"></a>æ€§è´¨</h3><blockquote>
<p>$f(x) &#x3D; ax+by$</p>
</blockquote>
<p>$x,y$éƒ½æ˜¯<strong>ä»»æ„æ•´æ•°</strong></p>
<p>è¿™ä¸ªå¼å­èƒ½è¡¨ç¤ºå‡ºçš„<strong>æœ€å°æ­£æ•´æ•°</strong>å°±æ˜¯$gcd(a,b)$</p>
<p>è¯æ˜:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301123858.webp"
                      alt="image.png|600"
                ></p>
<p>$x$ $y$ ä¸ç®¡æ€ä¹ˆå˜ï¼Œç›¸åŠ éƒ½æ˜¯$g$çš„å€æ•°ï¼Œ</p>
<p>ä¸èƒ½è¡¨ç¤ºä»»æ„çš„æ•°ï¼Œ</p>
<p>åªèƒ½è¡¨ç¤º$g$çš„å€æ•°ï¼Œ</p>
<p>æ‰€ä»¥æœ€å°çš„æ­£æ•´æ•°å°±æ˜¯å®ƒè‡ªå·±ã€‚</p>
<p><a class="link"   href="https://zhuanlan.zhihu.com/p/155721651" >è¯¦ç»†è¯æ˜è¿‡ç¨‹<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<hr>
<p>æ¯”å¦‚ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301124607.webp"
                      alt="image.png|600"
                ></p>
<p>è¿™ä¸ªæ–¹ç¨‹æ²¡æœ‰æ•´æ•°è§£ï¼Œ</p>
<p>æ»¡è¶³è¿™ä¸ªæ¡ä»¶çš„å‰æä¸‹ï¼Œ</p>
<p>$gcd(a,b)|z$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301125175.webp"
                      alt="image.png|600"
                ></p>
<p>å®ƒæ‰æœ‰æ•´æ•°è§£ã€‚</p>
<p>é‚£ä¹ˆæ€ä¹ˆè§£ï¼Ÿ</p>
<p>$z$æ˜¯$g$çš„å€æ•°</p>
<p>é‚£ä¹ˆæŠŠ<code>exgcd</code>è§£å‡ºåï¼Œä¸¤è¾¹åŒæ—¶ä¹˜$k$å°±æ˜¯è¿™ä¸ªæ–¹ç¨‹çš„è§£ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301126589.webp"
                      alt="image.png|600"
                ></p>
<h3 id="é€šé¡¹å…¬å¼"><a href="#é€šé¡¹å…¬å¼" class="headerlink" title="é€šé¡¹å…¬å¼"></a>é€šé¡¹å…¬å¼</h3><blockquote>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P1082" >P1082<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</blockquote>
<p>å‡å¦‚ä¸äº’è´¨ï¼Œé‚£ä¹ˆè¿™é“é¢˜å°±æ— è§£ï¼Œæ‰€ä»¥äº’è´¨</p>
<p>$ax\equiv 1 \pmod b$</p>
<p>$ax$ä¸€å®šç­‰äº$yb+1$</p>
<p>$ax-by&#x3D;1$</p>
<p>å’Œ$exgcd$çš„åŒºåˆ«ï¼Ÿ</p>
<p>æ²¡æœ‰åŒºåˆ«</p>
<p>è§£å‡ºæ¥è§£åç»™$y$åŠ ä¸Šè´Ÿå·å°±å¯ä»¥äº†</p>
<p>è¦æ±‚çš„æ—¶$x$</p>
<p>é‚£ä¹ˆæ€ä¹ˆä¿è¯æ­£æ•´æ•°xæœ€å°å‘¢ï¼Ÿ</p>
<p>éšä¾¿æ‰¾åˆ°ä¸€ç»„è§£</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301411776.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301413608.webp"
                      alt="image.png|600"
                ></p>
<p>æŠŠ$x$å˜å¤§$n$</p>
<p>$y$è°ƒå°$m$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301413753.webp"
                      alt="image.png|600"
                ></p>
<p>æˆ‘ä»¬å‘ç°$2n&#x3D;3m$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301415958.webp"
                      alt="image.png|600"
                ></p>
<p>è¿™æ ·å°±å¯ä»¥æŠŠæ‰€æœ‰çš„è§£å†™å‡ºæ¥</p>
<p>è®¾è§£å‡ºä¸€ç»„è§£$x&#x3D;x_0,y&#x3D;y_0$</p>
<p>å³$an&#x3D;bm$</p>
<p>$\frac a b&#x3D;\frac m n$</p>
<p>$$<br>\begin{cases}<br>x&#x3D;x_0+bk \<br>y&#x3D;y_0-ak \<br>\end{cases}<br>$$</p>
<p>è¿™å°±æ˜¯æ‰€æœ‰çš„è§£å—ï¼Ÿ</p>
<p><em>æ˜¾ç„¶ä¸æ˜¯</em></p>
<p>å‡å¦‚$a&#x3D;4ï¼Œb&#x3D;6$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301421189.webp"
                      alt="image.png|600"
                ></p>
<p>è¦ä¿è¯$abk-abk&#x3D;0$åˆè¦ä¿è¯$ab$çš„<strong>æœ€å¤§å…¬å› æ•°</strong>ä¸å˜ï¼Œå¹¶ä¸”ä¿è¯è¦æ•´é™¤ï¼Œæ‰€ä»¥é™¤å»<strong>æœ€å¤§å…¬å› æ•°</strong>æœ€ä¼˜ã€‚</p>
<p>$$<br>\begin{cases}<br>x&#x3D;x_0+{\frac b g}k \<br>y&#x3D;y_0-{\frac a g}k \<br>\end{cases}<br>$$</p>
<p>æˆ‘ä»¬å‘ç°$x% \frac b g&#x3D;x_0$</p>
<p>è¿™é“é¢˜ä¸­$g&#x3D;1$</p>
<p>$x% b &#x3D;x_0$</p>
<p>æ¯ä¸ª$x$éƒ½æ˜¯$b$çš„å€æ•°$+n$</p>
<p>é‚£ä¹ˆæœ€å°çš„æ—¶å€™å°±æ˜¯ $x&#x3D; x \bmod b$ çš„æ—¶å€™ã€‚</p>
<hr>
<p>å‡å¦‚æ–¹ç¨‹ä¸¤è¾¹åŒä¹˜ä¸€ä¸ªç³»æ•° k</p>
<p>æ–¹ç¨‹å˜ä¸ºï¼š</p>
<p>$akx + bky &#x3D; kg$</p>
<p>ç®€å†™ä¸€ä¸‹å°±æ˜¯ï¼š</p>
<p>$Ax + By &#x3D; G$</p>
<p>$$A &#x3D; \frac{G}{g}\times{a},a&#x3D;\frac{g}{G}\times A$$</p>
<p>$$B &#x3D; \frac{G}{g}\times{b},b&#x3D;\frac{g}{G}\times B$$</p>
<p>ç„¶åç”¨ Exgcd è¿›è¡Œæ±‚è§£ï¼Œ</p>
<p>è§£å¾—ï¼š</p>
<p>$$<br>\begin{cases}<br>x&#x3D;x_0 \<br>y&#x3D;y_0<br>\end{cases}<br>$$</p>
<p>è¿™æ˜¯éšä¾¿çš„ä¸€ç»„è§£ï¼Œå¹¶ä¸”ä¸æ˜¯ $Ax + By &#x3D; G$ çš„è§£ï¼Œè€Œæ˜¯ $ax + by &#x3D; g$ çš„è§£ï¼Œå› ä¸ºåœ¨è®¡ç®— $yâ€™$ çš„æ—¶å€™ä¹˜çš„ç³»æ•°æ˜¯ $\lfloor{\frac a b}\rfloor$ ã€‚è€Œ aã€b ç­‰æ¯”å¢åŠ ä¸ä¼šå¯¼è‡´è¿™ä¸ªå€¼æ”¹å˜ï¼Œä¹Ÿä¸ä¼šå¯¼è‡´ $gcd(a, b)$ å‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥æœ€åå¾—åˆ°çš„è§£è¦ä¹˜ä¸Šç³»æ•° $\frac G g &#x3D; k$ æ‰æ˜¯ $Ax + By &#x3D; G$ çš„è§£ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´æ–¹ç¨‹çš„è§£ä¸ºï¼š</p>
<p>$$<br>\begin{cases}<br>x&#x3D;kx_0 \<br>y&#x3D;ky_0<br>\end{cases}<br>$$</p>
<p>å…ˆçœ‹åŸæ¥çš„æ–¹ç¨‹ï¼Œx æœ€å°ä¸ºå¤šå°‘ï¼Ÿ</p>
<p>$$x_0\bmod{\frac b g} &#x3D; x_0\bmod{\frac B G}$$</p>
<p>é‚£ä¹ˆåœ¨æ–°æ–¹ç¨‹é‡Œï¼Œx æœ€å°ä¸ºï¼š</p>
<p>$$<br>\begin{aligned}<br>x_{min}&amp;&#x3D;x_0\times{\frac G g}\bmod{\frac B G\times\frac G g}\ &amp;&#x3D; x_0\times{\frac G g}\bmod{\frac B g}\<br>\end{aligned}<br>$$</p>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P1516" >ç»ƒä¹ é¢˜<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h3 id="ä¸­å›½å‰©ä½™å®šç†"><a href="#ä¸­å›½å‰©ä½™å®šç†" class="headerlink" title="ä¸­å›½å‰©ä½™å®šç†"></a>ä¸­å›½å‰©ä½™å®šç†</h3><p>æœ‰ä¸€å †<strong>åŒä½™æ–¹ç¨‹</strong></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301427824.webp"
                      alt="image.png|600"
                ></p>
<p>æˆ‘ä»¬ç°åœ¨è¦æŠŠå®ƒä»¬åˆå¹¶ä¸ºä¸€ä¸ªæ–¹ç¨‹</p>
<p>è¿™ä¸ªæ–¹ç¨‹å°±æ˜¯æˆ‘ä»¬è¦æ±‚çš„</p>
<p>é¦–å…ˆæƒ³è§£$x$</p>
<p>$x$æœ‰å‡ ä¸ªè§£å‘¢ï¼Ÿ</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301429779.webp"
                      alt="image.png|600"
                ></p>
<p>ä¸€å…±æœ‰$n+1$ä¸ªæœªçŸ¥æ•°</p>
<p>$n$ä¸ªæ–¹ç¨‹</p>
<p>ç†è®ºä¸Šä¼šæœ‰æ— æ•°ç»„è§£</p>
<p>å‡è®¾ç°åœ¨åªæœ‰ä¸¤ä¸ªæ–¹ç¨‹</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301430010.webp"
                      alt="image.png|600"
                ></p>
<p>$x\in{1,16,31\dots}$<br>$x&#x3D;1+15k$</p>
<p>é‚£ä¹ˆæœ€åçš„è§£å°±æ˜¯$x%15&#x3D;1$</p>
<p>ä¸¤ä¸ªåŒä½™æ–¹ç¨‹è§£å‡ºä¸€ä¸ªåŒä½™æ–¹ç¨‹</p>
<p>é‚£ä¹ˆ$n$ä¸ªå‘¢ï¼Ÿ</p>
<p>å¯ä»¥ä¸æ–­æ‹¿ä¸¤ä¸ªåŒä½™æ–¹ç¨‹åˆå¹¶ï¼Œåˆå¹¶$n-1$æ¬¡</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301433401.webp"
                      alt="image.png|600"
                ></p>
<p>æœ€åå¿…ç„¶ä¹Ÿä¼šåªå‰©ä¸‹ä¸€ä¸ªåŒä½™æ–¹ç¨‹</p>
<p>é‚£ä¹ˆæ€ä¹ˆæŠŠä¸¤ä¸ªæ–¹ç¨‹åˆå¹¶ä¸ºä¸€ä¸ªæ–¹ç¨‹å‘¢ï¼Ÿ</p>
<h4 id="å¤§æ•°ç¿»å€æ³•"><a href="#å¤§æ•°ç¿»å€æ³•" class="headerlink" title="å¤§æ•°ç¿»å€æ³•"></a>å¤§æ•°ç¿»å€æ³•</h4><blockquote>
<p>ZHX:æˆ‘å¾ˆæ¨èä½ ä»¬ç”¨å¤§æ•°ç¿»å€æ³•ï¼Œå¥½å†™è¿˜ä¸å®¹æ˜“è¢«å¡ï¼Œä¸åƒEXGCDéš¾å†™è¿˜éš¾è°ƒ</p>
</blockquote>
<p>$$<br>\begin{cases}<br>x_1%p_1&#x3D;a_1 \<br>x_2%p_2&#x3D;a_2 \<br>\end{cases}<br>$$<br>$$\downarrow$$<br>$$x%p&#x3D;a$$</p>
<p>è€ƒè™‘æšä¸¾ï¼Œé‚£ä¹ˆæ€ä¹ˆä¼˜åŒ–å‘¢ï¼Ÿ</p>
<p>å¯ä»¥å¼ºè¡Œè®©å®ƒæ»¡è¶³ç¬¬ä¸€ä¸ªæ–¹ç¨‹ï¼Œå†çœ‹å®ƒæ»¡ä¸æ»¡è¶³ç¬¬äºŒä¸ªæ–¹ç¨‹</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301437414.webp"
                      alt="image.png|600"
                ></p>
<p>åœ¨$a_1$çš„åŸºç¡€ä¸Šä¸æ–­åŠ ä¸Š$p_1$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301440594.webp"
                      alt="image.png|600"
                ></p>
<p>è¿™æ ·å¯¹å—ï¼Ÿ</p>
<p>å‡å¦‚è¿™ä¸ªæ–¹ç¨‹æ— è§£ï¼Œé‚£ä¹ˆå°±ä¼šæ­»å¾ªç¯</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301442450.webp"
                      alt="image.png|600"
                ></p>
<p>è¿™æ—¶å€™$%p2$å°±æ˜¯$a_1$ï¼Œç›¸å½“äºä¸€ä¸ªæ–°çš„å‘¨æœŸ</p>
<p>è¶…è¿‡<strong>æœ€å°å…¬å€æ•°</strong>å°±å¯ä»¥é€€å‡ºå¾ªç¯äº†</p>
<p><strong>æœ€å°å…¬å€æ•°å°±æ˜¯æ–°æ–¹ç¨‹ä¸­è¢«æ¨¡çš„æ•°</strong></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301448021.webp"
                      alt="image.png|600"
                ></p>
<p>$x%15&#x3D;7$</p>
<p>å‡å¦‚è®©è¿™ä¸ª$x$æ¨¡$3$çš„è¯</p>
<p>ä¹Ÿå°±æ˜¯$kp+7%3$,è€Œ$p$åˆæ˜¯$3$çš„å€æ•°ï¼Œæ‰€ä»¥æ»¡è¶³$x%3&#x3D;1$,t åŒç†æ»¡è¶³$x%5&#x3D;2$</p>
<p>äºæ˜¯å°±æ˜¯</p>
<p>$x%l&#x3D;a$</p>
<p>æç«¯æƒ…å†µä¸‹ä¼šè¿è¡Œ$p_2$æ¬¡</p>
<p>æ—¶é—´å¤æ‚åº¦æ˜¯$O(p_2)$æ¬¡</p>
<p><em>å¤§æ•°ç¿»å€æ³•ï¼Ÿ</em></p>
<p>è®©å¤§çš„æ•°ç¿»å€</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301452389.webp"
                      alt="image.png|600"
                ></p>
<p>è®©æšä¸¾æ¬¡æ•°å˜ä¸ºæ›´å°çš„p1</p>
<p>æ—¶é—´æ—¶é—´å¤æ‚åº¦ä¸º$O(min(p1,p2))$</p>
<p>æœ€åè§£å‡ºæ¥çš„$p$æ˜¯æ‰€æœ‰$p$çš„$lcm$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301456104.webp"
                      alt="image.png|600"
                ></p>
<p>å¤æ‚åº¦</p>
<p>å½“$p$äº’è´¨æ—¶å€™</p>
<p>è¦è®©æ‰€æœ‰$p$ç›¸ä¹˜å°äº$10^{18}$</p>
<p>æ‰€ä»¥ä¸€èˆ¬ä¸å¤ªå¯èƒ½ç‚¸æ‰</p>
<p>æƒ³å¡ä¹Ÿä¸æ˜¯å¾ˆå¥½å¡</p>
<h4 id="EXGCDæ³•"><a href="#EXGCDæ³•" class="headerlink" title="EXGCDæ³•"></a>EXGCDæ³•</h4><p>$$<br>\begin{cases}<br>x_1%p_1&#x3D;a_1 \<br>x_2%p_2&#x3D;a_2 \<br>\end{cases}<br>$$</p>
<p>$$<br>\downarrow<br>$$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301515598.webp"
                      alt="image.png|600"
                ></p>
<p>å¯ä»¥åªçœ‹ååŠéƒ¨åˆ†</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301516829.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301517447.webp"
                      alt="image.png|600"
                ></p>
<p>$$ \downarrow$$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301517282.webp"
                      alt="image.png|600"
                ></p>
<p>é€šè¿‡æ‰©å±•æ¬§å‡ é‡Œå¾—æŠŠ$k1ã€k2$è§£å‡ºæ¥</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301957534.webp"
                      alt="image.png|600"
                ></p>
<p>è¿™é‡Œç›¸å½“äº$+(-k_2)$</p>
<p>é‚£ä¹ˆæ±‚å‡ºæ¥ä»¥å$k_2&#x3D;-k_2$å³å¯</p>
<p>æˆ‘æŒ‰ç…§$k_{1}\times p_{1}+k_{2}\times p_{2}&#x3D;a_2-a_1$æ±‚å¾—çš„$x$</p>
<p>æˆ‘ç°åœ¨æƒ³çŸ¥é“$k_{1}\times p_{1}-k_{2}\times p_{2}&#x3D;a_2-a_1$çš„è§£</p>
<p>é‚£ä¹ˆä»¤$k_2&#x3D;-k_2$å³å¯</p>
<h2 id="ç­›æ³•"><a href="#ç­›æ³•" class="headerlink" title="ç­›æ³•"></a>ç­›æ³•</h2><h3 id="åŸƒå¼ç­›"><a href="#åŸƒå¼ç­›" class="headerlink" title="åŸƒå¼ç­›"></a>åŸƒå¼ç­›</h3><p>ç»™ä¸€ä¸ªæ•°$n$</p>
<p>å°½é‡å°‘çš„æ—¶é—´å†…æŠŠ$1\to n$æ‰€æœ‰çš„è´¨æ•°æ±‚å‡ºæ¥</p>
<p>æšä¸¾$a$çš„æ‰€æœ‰å€æ•°</p>
<p>$a$çš„å€æ•°ä¸€å®šä¸æ˜¯è´¨æ•°</p>
<p>æŠŠæ‰€æœ‰æ•°çš„å€æ•°éƒ½æ ‡è®°ä¸€é</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> a=<span class="number">2</span>;a&lt;=n;a++)</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> b=a+a;b&lt;=n;n+=a)<span class="comment">//æšä¸¾açš„æ‰€æœ‰å€æ•°</span></span><br><span class="line">        not_prime[b]=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> a=<span class="number">2</span>;a&lt;=n;a++)</span><br><span class="line">    <span class="keyword">if</span>(not_prime[a]==<span class="literal">false</span>) </span><br><span class="line">        prime[++cnt]=a;</span><br></pre></td></tr></table></figure></div>

<p>å¤æ‚åº¦ï¼š$O(nlogn)$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301540448.webp"
                      alt="image.png|600"
                ></p>
<p>è°ƒå’Œé›†æ•°ï¼Œçº¦ç­‰äºä¸º$logn$</p>
<p>æ‰€ä»¥åŸƒå¼ç­›çš„å¤æ‚åº¦ä¸º$nlogn$</p>
<h3 id="æ¬§æ‹‰ç­›"><a href="#æ¬§æ‹‰ç­›" class="headerlink" title="æ¬§æ‹‰ç­›"></a>æ¬§æ‹‰ç­›</h3><h4 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h4><p>é¦–å…ˆ,$4$æœ‰å¿…è¦æšä¸¾å—ï¼Ÿ</p>
<p>å› ä¸ºæšä¸¾$2$çš„æ ‡è®°çš„æ—¶å€™$4$çš„æ ‡è®°å·²ç»è¢«æ ‡è®°äº†</p>
<p>1.åªéœ€è¦æšä¸¾è´¨æ•°çš„å€æ•°å°±è¡Œ</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> a=<span class="number">2</span>;a&lt;=n;a++)</span><br><span class="line">        <span class="keyword">if</span>(not_prime[a]==flase)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> b=a+a;b&lt;=n;n+=a)<span class="comment">//æšä¸¾açš„æ‰€æœ‰å€æ•°</span></span><br><span class="line">                not_prime[b]=<span class="literal">true</span>;</span><br></pre></td></tr></table></figure></div>

<p>å¤æ‚åº¦:$nloglogn$</p>
<p>è¯æ˜ä¸€ä¸‹ä¸ºä»€ä¹ˆå¯ä»¥æ±‚å€æ•°çš„è¿‡ç¨‹ä¸­æ‰¾è´¨æ•°</p>
<p>å‡è®¾æˆ‘æšä¸¾åˆ°äº†ç¬¬$22$å€</p>
<p>é‚£ä¹ˆæˆ‘$22$ä¹‹å‰çš„æ‰€æœ‰è´¨æ•°ä¸€å®šæ‰¾å®Œäº†</p>
<p>å¦‚æœç¬¬$22$ä¸ªæ²¡è¢«æ ‡è®°ï¼Œå®ƒä¸€å®šä¸å¯èƒ½æ˜¯ä¸€ä¸ªå’Œæ•°</p>
<p>å› ä¸ºå®ƒåªèƒ½è¢«å°äºç­‰äºå®ƒçš„æ•°æ ‡è®°</p>
<p>è€Œä¸èƒ½è¢«$23ã€24$æ ‡è®°</p>
<h4 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h4><p>ç°åœ¨ä¸€ä¸ªæ•°ä»ç„¶æœ‰å¯èƒ½è¢«ç­›å¤šæ¬¡</p>
<p>æ¯”å¦‚$6$ï¼Œä¼šè¢«$2$å’Œ$3$éƒ½ç­›ä¸€æ¬¡</p>
<p>æ¯”å¦‚$30$ï¼Œä¼šè¢«$2$å’Œ$3$å’Œ$5$éƒ½ç­›ä¸€æ¬¡</p>
<p>æ¯ä¸ªæ•°éƒ½ä¼šè¢«å®ƒçš„è´¨å› å­ç­›ä¸€æ¬¡</p>
<p>å› ä¸ºæ¯ä¸ªæ•°è´¨å› å­ä¸ªæ•°ä¸æ˜¯ä¸€ä¸ªï¼Œå› æ­¤å¤§äº$n$</p>
<p>æˆ‘ä»¬è¦ä¿è¯æ¯ä¸ªæ•°åªè¢«ç­›ä¸€æ¬¡</p>
<p>æˆ‘ä»¬è®©å®ƒè¢«æœ€å°çš„è´¨å› å­ç­›æ‰</p>
<p>æ¯”å¦‚$6$åªè¢«$2$ç­›</p>
<p>$55$åªè¢«$5$ç­›</p>
<p><em>çœ‹ä»£ç </em></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)<span class="comment">//å…ˆæšä¸¾å€æ•°</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(not_prime[i]==<span class="literal">false</span>)<span class="comment">//ä¸€å®šæ˜¯è´¨æ•°å—ï¼Ÿæœ‰æ²¡æœ‰å¯èƒ½åªæ˜¯æ²¡è¢«æ ‡ä¸ºtrue</span></span><br><span class="line">    &#123;</span><br><span class="line">        cnt++;</span><br><span class="line">        prime[cnt]=i;<span class="comment">//å­˜è¿›è´¨æ•°è¡¨</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=cnt;j++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> x=prime[j]*i;<span class="comment">//ç­›æ‰ç¬¬jä¸ªè´¨æ•°çš„iå€</span></span><br><span class="line">        <span class="keyword">if</span>(x&gt;n) <span class="comment">//è´¨æ•°è¡¨æ˜¯ä»å°å¾€å¤§æšä¸¾çš„ï¼Œè¿™æ˜¯ç¬¬ä¸€ä¸ªå¤§äºnçš„</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        not_prime[x]=<span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>è¿˜æ˜¯$nloglogn$</p>
<p>åŠ ä¸Šä¸€å¥è¯ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> isprime[N];</span><br><span class="line"><span class="type">int</span> prime[N];</span><br><span class="line"><span class="type">int</span> n, cnt;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(isprime, <span class="literal">true</span>, <span class="built_in">sizeof</span>(isprime));</span><br><span class="line">	isprime[<span class="number">1</span>] = <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (isprime[i]) prime[++cnt] = i;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= cnt &amp;&amp; i * prime[j] &lt;= n; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			isprime[i * prime[j]] = <span class="literal">false</span>;</span><br><span class="line">			<span class="keyword">if</span> (i % prime[j] == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301615037.webp"
                      alt="image.png|600"
                ></p>
<p>é¦–å…ˆæ‰¾å‡ºäº†$i&#x3D;2$</p>
<p>$x&#x3D;4$</p>
<p>$4$å°±ä¸æ˜¯è´¨æ•°</p>
<p>ç¬¬äºŒè½®ï¼Œ$3$ä¹Ÿæ˜¯è´¨æ•°</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301616621.webp"
                      alt="image.png|600"
                ></p>
<p>ä¼šæŠŠ$6$å’Œ$9$ä¹Ÿç­›æ‰</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301617580.webp"
                      alt="image.png|600"
                ></p>
<p>ç­›æ‰$8$ä¹‹åï¼Œ$4$æ˜¯ç¬¬ä¸€ä¸ªè´¨æ•°çš„å€æ•°ï¼Œä¼š<code>break</code></p>
<p>ä¸ä¼šæšä¸¾åˆ°ç¬¬ä¸‰ä¸ªè´¨æ•°</p>
<p>$12$ä¹Ÿå°±æ²¡æœ‰ç­›æ‰</p>
<p>æšä¸¾åˆ°$i&#x3D;6$æ—¶</p>
<p>æ­¤æ—¶iæœ€å°çš„è´¨å› å­å°±æ˜¯$prime[j]$</p>
<p><strong>è¯æ˜ï¼š</strong></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304302021073.webp"
                      alt="image.png|600"
                ></p>
<p>å‡å¦‚æ²¡æœ‰<code>break</code></p>
<p>é‚£ä¹ˆå°±ä¼šæšä¸¾ç¬¬$j+1$ä¸ªè´¨æ•°</p>
<p>$x&#x3D;prime[j+1]*i$</p>
<p>è€Œ$i&#x3D;k \times prime[j]$</p>
<p>$x&#x3D;prime[j+1] \times k \times prime[j]$</p>
<p>ç”±äºè´¨æ•°è¡¨æ˜¯å¾€åé€’å¢çš„ï¼Œå› æ­¤æœ€å°è´¨å› å­å°±æ˜¯ç¬¬ä¸€æ¬¡è¢«æ•´é™¤çš„$prime[j]$</p>
<p><em>å°ç»ƒä¹ </em>ï¼š<a class="link"   href="https://www.luogu.com.cn/problem/P3383" >P3383:çº¿æ€§ç­›ç´ æ•°<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<hr>
<p><em>å¸¸ç”¨å¤§å°ï¼š</em></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301627305.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301628330.webp"
                      alt="image.png|600"
                ></p>
<hr>
<h3 id="æ±‚ç§¯æ€§å‡½æ•°"><a href="#æ±‚ç§¯æ€§å‡½æ•°" class="headerlink" title="æ±‚ç§¯æ€§å‡½æ•°"></a>æ±‚ç§¯æ€§å‡½æ•°</h3><p><strong>å®šä¹‰ï¼š</strong></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301631980.webp"
                      alt="image.png|600"
                ></p>
<p><strong>å‰æ</strong>ï¼š$a$å’Œ$b$äº’è´¨</p>
<p><strong>å®Œå…¨ç§¯æ€§å‡½æ•°ï¼š</strong></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301632192.webp"
                      alt="image.png|600"
                ></p>
<p><strong>ä¸éœ€è¦æ»¡è¶³äº’è´¨</strong>çš„æ¡ä»¶</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301633307.webp"
                      alt="image.png|600"
                ></p>
<p>[[#æ¬§æ‹‰å®šç†|æ¬§æ‹‰å‡½æ•°]]å…¶å®å°±æ˜¯ä¸€ä¸ª<strong>ç§¯æ€§å‡½æ•°</strong></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301636339.webp"
                      alt="image.png|600"
                ></p>
<p>$q$éƒ½æ˜¯è´¨æ•°</p>
<p>$\varphi( )&#x3D;ï¼Ÿ$</p>
<p><strong>è¯æ˜è¿‡ç¨‹ï¼š</strong></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301639198.webp"
                      alt="image.png|600"
                ></p>
<p>æˆ‘ä»¬å‘ç°$\varphi(mn)$çš„ç»“æœæ‹†æˆä¸¤éƒ¨åˆ†ä¹Ÿå°±æ˜¯$n$å’Œ$m$</p>
<p>$O(n)$æ±‚$1\to n$çš„å€¼</p>
<p>$prime[j]$ å’Œ $prime[i]$</p>
<p>æœ‰å¯èƒ½ä¸äº’è´¨</p>
<p>å‡è®¾å®ƒå…¨äº’è´¨ï¼Œå…ˆæŒ‰ç…§å‡½æ•°å®šä¹‰æ±‚</p>
<p>é‚£ä¹ˆ<strong>ä¸äº’è´¨</strong>çš„æ€ä¹ˆå¤„ç†(ä¹Ÿå°±æ˜¯iå’Œ)</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301646087.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301646101.webp"
                      alt="image.png|600"
                ></p>
<p>ç°åœ¨ç®—$\varphi(i\cdot p_j)$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301646256.webp"
                      alt="image.png|600"
                ></p>
<p>$\because$  $i$æ˜¯$p_j$çš„æ•´æ•°å€</p>
<p>$\therefore$  <strong>è´¨å› å­</strong>æ²¡æœ‰å‘ç”Ÿå˜åŒ–,ä¹Ÿå°±æ˜¯$prime[j]$çš„è´¨å› å­å’Œ$i$çš„è´¨å› å­éƒ½æ˜¯$q$,åªæ˜¯æ¬¡æ•°ä¸ä¸€æ ·</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202304301649030.webp"
                      alt="image.png|600"
                ></p>
<p>åé¢é‚£ä¸ªä¸œè¥¿å°±æ˜¯$\varphi(i)$ </p>
<p>æ‰€æœ‰æ•°åˆ†ä¸º1+è´¨æ•°+å’Œæ•°</p>
<p>$\varphi(1)&#x3D;1$</p>
<p>å½“$n$ä¸ºè´¨æ•°ï¼Œ$\varphi(n)&#x3D;n-1$</p>
<p>å’Œæ•°åˆ†ä¸ºä»¥ä¸Šäº’è´¨å’Œä¸äº’è´¨ä¸¤ç§æƒ…å†µ</p>
<h2 id="BSGS-Baby-Step-Giant-Step"><a href="#BSGS-Baby-Step-Giant-Step" class="headerlink" title="BSGS(Baby Step Giant Step)"></a>BSGS(Baby Step Giant Step)</h2><p>$a,b,p$</p>
<p>$p$æ˜¯è´¨æ•°</p>
<p>æ±‚$a^x%p&#x3D;b$</p>
<p>ä¹Ÿå°±æ˜¯$a^x\equiv b \pmod  p$</p>
<p>$a,b,p\le 10^9$</p>
<p>å†™ä¸€ä¸‹æš´åŠ›</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b,<span class="type">int</span> p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> v=<span class="number">1</span>;<span class="comment">//açš„é›¶æ¬¡</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> x=<span class="number">0</span>;;x++)<span class="comment">//ä»0æ¬¡å¼€å§‹æšä¸¾</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(v==b) <span class="keyword">return</span> x;</span><br><span class="line">        v=<span class="number">1ll</span>*v*a%p;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>æšä¸¾åˆ°ç¬¦åˆæ¡ä»¶ä¸ºæ­¢</p>
<p>å‡å¦‚æ— è§£ï¼Œå°±ä¼šæ­»å¾ªç¯</p>
<p>æ€ä¹ˆåˆ¤æ–­æ— è§£ï¼Ÿ</p>
<p>åˆå§‹çŠ¶æ€å°±æ˜¯$1$</p>
<p>å†æ¬¡å‡ºç°è‹¥å¾ªç¯åä¾æ—§æ— è§£ï¼Œé‚£ä¹ˆå°±æ˜¯æ— è§£</p>
<p>$v$çš„èŒƒå›´æ˜¯$0$åˆ°$p-1$</p>
<p>[[#è´¹é©¬å°å®šç†|è´¹é©¬å°å®šç†]]ï¼š</p>
<p>ä¸€å®šä¼šä»1å¼€å§‹å¾ªç¯</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305010839896.webp"
                      alt="image.png|600"
                ></p>
<p>$a^{p-1}%p&#x3D;1$</p>
<p>$a^0%p&#x3D;1$</p>
<p>å¾ªç¯é•¿åº¦ä¸º$p-1$</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b,<span class="type">int</span> p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> v=<span class="number">1</span>;<span class="comment">//açš„é›¶æ¬¡</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> x=<span class="number">0</span>;x&lt;p<span class="number">-1</span>;x++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(v==b) <span class="keyword">return</span> x;</span><br><span class="line">        v=<span class="number">1ll</span>*v*a%p;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>$a^0&#x3D;a^{p-1}&#x3D;1$</p>
<p><em>æ€ä¹ˆä¼˜åŒ–å‘¢ï¼Ÿ</em></p>
<p>ç­”æ¡ˆä¸€å®šä¼šåœ¨$a^{0\to p-1}$ä¸­å‡ºç°</p>
<p>é‚£æˆ‘åˆ†ä¸ªç»„</p>
<p>ç¬¬é›¶ç»„æ˜¯åˆ°ä»$a^0$åˆ°$a^{s-1}$</p>
<p>$s$ä¸ºæ¯ç»„çš„å¤§å°</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305010845006.webp"
                      alt="image.png|600"
                ></p>
<p>æŠŠç¬¬é›¶ç»„çš„æ¯ä¸ªæ•°éƒ½$for$ä¸€ä¸‹</p>
<p>çœ‹ä¸‹è¿™$s$ä¸ªæ•°é‡Œæœ‰æ²¡æœ‰$b$</p>
<p>è¿™æ ·å°±çŸ¥é“ç­”æ¡ˆçš„ä½ç½®åœ¨å“ªé‡Œäº†</p>
<p>å¦‚æœä¸åœ¨ç¬¬é›¶ç»„ï¼Œé‚£ä¹ˆå°±å»çœ‹ç¬¬ä¸€ç»„</p>
<p>è¿˜æ˜¯$for$ä¸€é</p>
<p>$\dots\dots$</p>
<p>è¿˜æ˜¯è¦æšä¸¾$p$æ¬¡</p>
<p>é‚£ä¹ˆç¬¬äºŒæ¬¡æœ‰æ²¡æœ‰æ›´èªæ˜çš„æ‰¾æ³•å‘¢ï¼Ÿ</p>
<p>ç¬¬é›¶ç»„ä¹˜ä»¥$a$çš„$s$æ¬¡æ–¹å°±æ˜¯ç¬¬ä¸€ç»„</p>
<p>å¦‚æœè¦å˜å›å»çš„è¯é‚£å°±æ˜¯ä¹˜ä»¥$a$çš„$-s$æ¬¡æ–¹</p>
<p>å‡å¦‚$b$åœ¨ç¬¬ä¸€ç»„å‡ºç°äº†ï¼Œé‚£ä¹ˆç¬¬é›¶ç»„ä¼šå‡ºç°ä¸‹é¢è¿™ä¸ªä¸œè¥¿</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305010850813.webp"
                      alt="image.png|600"
                ></p>
<p>å…¶å®å°±æ˜¯æ‰¾ç¬¬ä¸€ç»„$b\cdot a^{-s}$</p>
<p>å‡å¦‚$b$åœ¨ç¬¬$i$ç»„å‡ºç°äº†ï¼Œé‚£å°±è¦æ‰¾ç¬¬ä¸€ç»„çš„$a^{-is}$</p>
<p>æŠŠæ¯ä¸€ç»„éƒ½æ˜ å°„åˆ°ç¬¬ä¸€ç»„</p>
<p>è¿™æ ·å°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æŸ¥è¯¢äº†</p>
<p><code>STL</code>æœ‰ä¸€ä¸ªä¸œè¥¿å«<code>set</code>ï¼Œå¯ä»¥å­˜ä¸€å †æ•°ï¼ŒæŸ¥æ‰¾ä¸€ä¸ªæ•°åœ¨è¿™å †æ•°ä¸­æ˜¯å¦å‡ºç°è¿‡</p>
<p><strong>Set</strong></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">begin</span>();<span class="comment">// è¿”å›æŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨</span></span><br><span class="line"><span class="built_in">end</span>();<span class="comment">// è¿”å›æŒ‡å‘è¿­ä»£å™¨çš„æœ€æœ«å°¾å¤„ï¼ˆå³æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®ï¼‰</span></span><br><span class="line"><span class="built_in">clear</span>();<span class="comment">// æ¸…é™¤æ‰€æœ‰å…ƒç´ </span></span><br><span class="line"><span class="built_in">count</span>();<span class="comment">// è¿”å›æŸä¸ªå€¼å…ƒç´ çš„ä¸ªæ•°</span></span><br><span class="line"><span class="built_in">empty</span>();<span class="comment">// å¦‚æœé›†åˆä¸ºç©ºï¼Œè¿”å›true</span></span><br><span class="line"><span class="built_in">equal_range</span>();<span class="comment">//è¿”å›é›†åˆä¸­ä¸ç»™å®šå€¼ç›¸ç­‰çš„ä¸Šä¸‹é™çš„ä¸¤ä¸ªè¿­ä»£å™¨</span></span><br><span class="line"><span class="built_in">erase</span>()<span class="comment">//â€“åˆ é™¤é›†åˆä¸­çš„å…ƒç´ </span></span><br><span class="line"><span class="built_in">find</span>()<span class="comment">//â€“è¿”å›ä¸€ä¸ªæŒ‡å‘è¢«æŸ¥æ‰¾åˆ°å…ƒç´ çš„è¿­ä»£å™¨</span></span><br><span class="line"><span class="built_in">get_allocator</span>()<span class="comment">//â€“è¿”å›é›†åˆçš„åˆ†é…å™¨</span></span><br><span class="line"><span class="built_in">insert</span>()<span class="comment">//â€“åœ¨é›†åˆä¸­æ’å…¥å…ƒç´ </span></span><br><span class="line"><span class="built_in">lower_bound</span>()<span class="comment">//â€“è¿”å›æŒ‡å‘å¤§äºï¼ˆæˆ–ç­‰äºï¼‰æŸå€¼çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨</span></span><br><span class="line"><span class="built_in">key_comp</span>()<span class="comment">//â€“è¿”å›ä¸€ä¸ªç”¨äºå…ƒç´ é—´å€¼æ¯”è¾ƒçš„å‡½æ•°</span></span><br><span class="line"><span class="built_in">max_size</span>()<span class="comment">//â€“è¿”å›é›†åˆèƒ½å®¹çº³çš„å…ƒç´ çš„æœ€å¤§é™å€¼</span></span><br><span class="line"><span class="built_in">rbegin</span>()<span class="comment">//â€“è¿”å›æŒ‡å‘é›†åˆä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„åå‘è¿­ä»£å™¨</span></span><br><span class="line"><span class="built_in">rend</span>()<span class="comment">//â€“è¿”å›æŒ‡å‘é›†åˆä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„åå‘è¿­ä»£å™¨</span></span><br><span class="line"><span class="built_in">size</span>()<span class="comment">//â€“é›†åˆä¸­å…ƒç´ çš„æ•°ç›®</span></span><br><span class="line"><span class="built_in">swap</span>()<span class="comment">//â€“äº¤æ¢ä¸¤ä¸ªé›†åˆå˜é‡</span></span><br><span class="line"><span class="built_in">upper_bound</span>()<span class="comment">//â€“è¿”å›å¤§äºæŸä¸ªå€¼å…ƒç´ çš„è¿­ä»£å™¨</span></span><br><span class="line"><span class="built_in">value_comp</span>()<span class="comment">//â€“è¿”å›ä¸€ä¸ªç”¨äºæ¯”è¾ƒå…ƒç´ é—´çš„å€¼çš„å‡½æ•°</span></span><br></pre></td></tr></table></figure></div>

<p>çœ‹ç­”æ¡ˆæ˜¯å¦åœ¨ç¬¬$i$è¡Œé‡Œé¢,<strong>ç¬¬ä¸€è¡Œæ˜¯ç¬¬$0$è¡Œ</strong></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i*s&lt;=p;i++)<span class="comment">//çœ‹ç­”æ¡ˆæ˜¯å¦åœ¨ç¬¬iè¡Œé‡Œé¢,ç¬¬ä¸€è¡Œæ˜¯ç¬¬0è¡Œ//è¶…è¿‡pæ¬¡æ–¹å°±ä¼šå¼€å§‹å¾ªç¯</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//çœ‹bä¹˜ä»¥açš„-isæ¬¡æ–¹æ˜¯å¦åœ¨ç¬¬é›¶è¡Œå‡ºç°â€”â€”é€†å…ƒ</span></span><br><span class="line">        <span class="type">int</span> c=<span class="number">1ll</span>*b*<span class="built_in">ksm</span>(<span class="built_in">ksm</span>(a,i*s,p),p<span class="number">-2</span>,p)%p;<span class="comment">//å¿«é€Ÿå¹‚</span></span><br><span class="line">        <span class="keyword">if</span>(se.<span class="built_in">count</span>(c)!=<span class="number">0</span>)<span class="comment">//å‡ºç°æ¬¡æ•° 0/1</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//ç­”æ¡ˆåœ¨ç¬¬iè¡Œ,æš´åŠ›ä¸€é</span></span><br><span class="line">            <span class="type">int</span> v=<span class="built_in">ksm</span>(a,i*s,p);</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=i*s;;j++)<span class="comment">//ä¸€å®šä¼šæ‰¾åˆ°ç­”æ¡ˆ</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(v==b) <span class="keyword">return</span> j;<span class="comment">//æ‰¾åˆ°ç­”æ¡ˆ</span></span><br><span class="line">                v=<span class="number">1ll</span>*v*a%p;<span class="comment">//æšä¸¾æ¬¡æ•°</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div>

<p><strong>ç”±äºè¶Šå¾€ä¸‹æ‰¾ç­”æ¡ˆè‚¯å®šå°±è¶Šå¤§ï¼Œé‚£ä¹ˆç¬¬ä¸€æ¬¡æ‰¾åˆ°ä¸€å®šå°±æ˜¯æœ€å°å€¼</strong></p>
<p><strong>æ³¨æ„è¿™é‡Œ$i*s$å¯èƒ½ä¼šçˆ†<code>int</code>ï¼Œè¦å¼€<code>long long</code></strong></p>
<p>ç¬¬ä¸€å±‚å¾ªç¯$\frac ps$æ¬¡</p>
<p>ç¬¬äºŒå±‚å¾ªç¯æšä¸¾è¿™ä¸€ç»„ä¸­æ¯ä¸€ä¸ªæ•°</p>
<p>æœ€åçš„æƒ…å†µå°±æ˜¯$O(s)$</p>
<p>ç¬¬äºŒæ¬¡å¾ªç¯åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œæ‰€ä»¥æ˜¯åŠ æ³•åŸç†</p>
<p>$O(\frac ps+s)$</p>
<p>$O(n+logn)&#x3D;O(n)$</p>
<p>æˆ‘ä»¬åªå…³å¿ƒæ›´å¤§çš„</p>
<p>æ‰€ä»¥å¤æ‚åº¦å°±æ˜¯$O(max(\frac ps,s))$</p>
<p>å¤æ‚åº¦ç”±è¾ƒå¤§å€¼å†³å®š</p>
<p>æ‰€ä»¥$\frac ps&#x3D;s$çš„æ—¶å€™å¤æ‚åº¦æœ€ä¼˜ï¼ˆåŸºæœ¬ä¸ç­‰å¼ï¼‰</p>
<p>$s&#x3D;\sqrt p$</p>
<p><code>insert</code>å’Œ<code>count</code>æ˜¯$log$çš„</p>
<p>è¿™ä¹Ÿå°±æ˜¯åˆ†å—çš„æ€æƒ³</p>
<p>è‹¥è¦è®¿é—®å‡ºç°å¤šå°‘æ¬¡ï¼Œç”¨<code>map</code></p>
<h1 id="ç»„åˆæ•°å­¦"><a href="#ç»„åˆæ•°å­¦" class="headerlink" title="ç»„åˆæ•°å­¦"></a>ç»„åˆæ•°å­¦</h1><h2 id="å¼•å…¥å®šä¹‰å¼"><a href="#å¼•å…¥å®šä¹‰å¼" class="headerlink" title="å¼•å…¥å®šä¹‰å¼"></a>å¼•å…¥å®šä¹‰å¼</h2><p><strong>å°æ —å­ï¼š</strong></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305010917302.webp"
                      alt="image.png|600"
                ></p>
<p>å‡å¦‚æ¡ä»¶æ˜¯<strong>äº’æ–¥</strong>çš„ï¼ˆä¸èƒ½åŒæ—¶æˆç«‹ï¼‰ï¼Œé‚£ä¹ˆå°±æ˜¯åŠ æ³•</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305010918133.webp"
                      alt="image.png|600"
                ></p>
<p>å‰é¢çš„é€‰æ‹©å’Œåé¢çš„é€‰æ‹©æ˜¯ä¸åŒé˜¶æ®µçš„é€‰æ‹©ï¼Œå‰ä¸€é˜¶æ®µçš„æ¡ä»¶å¯¹åç»­æ¡ä»¶çš„é€‰æ‹©æ²¡æœ‰å½±å“</p>
<p>å°±ä¹˜èµ·æ¥</p>
<hr>
<p>ä»ä¸‰ä¸ªäººé€‰å‡ºæ¥ä¸¤ä¸ªäººç«™æˆä¸€åˆ—ï¼Œæœ‰å‡ ç§é€‰æ³•ï¼Ÿ â€”â€”<em>æ’åˆ—</em></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305010922121.webp"
                      alt="image.png|600"
                ></p>
<p>æœ‰å…­ç§é€‰æ³•</p>
<p>é‚£å‡å¦‚ä»$n$ä¸ªäººä¸­é€‰$m$ä¸ªäººç«™æˆä¸€åˆ—,è€ƒè™‘è¿™$m$ä¸ªäºº<strong>å†…éƒ¨çš„é¡ºåº</strong></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305010924291.webp"
                      alt="image.png|600"
                ></p>
<p>$$<br>\begin{aligned}<br>P(n,m)&amp;&#x3D;n\cdot (n-1)\cdot(n-2)\cdot(n-3)\cdot(n-4)\cdot(n-5)\ldots \cdot(n-m+1)\<br>&amp;&#x3D;\frac {n!}{(n-m)!}<br>\end{aligned}<br>$$</p>
<hr>
<p>è¿™æ ·æ˜¯è€ƒè™‘<strong>å†…éƒ¨é¡ºåº</strong>çš„æƒ…å†µ</p>
<p>å‡å¦‚ä¸è€ƒè™‘<strong>å†…éƒ¨çš„é¡ºåº</strong>å‘¢ï¼Ÿ â€”â€”<em>ç»„åˆ</em></p>
<p>$C(n,m)&#x3D;n\cdot (n-1)\cdot(n-2)\cdot(n-3)\cdot(n-4)\cdot(n-5)\dots (n-m+1)$? â€”â€”<em>æ˜¾ç„¶ä¸æ˜¯</em></p>
<p>$1,2$å’Œ$2,1$æ˜¯åŒä¸€ç§æ–¹æ¡ˆï¼Œä¹Ÿå°±æ˜¯$m$ä¸ªäººçš„å†…éƒ¨éšä¾¿æ€ä¹ˆæ’éƒ½å¯ä»¥ï¼Œéƒ½æ˜¯ä¸€ç§æ–¹æ¡ˆ</p>
<p>$m$ä¸ªäººå†…éƒ¨éšä¾¿æ’çš„æ–¹æ¡ˆæ•°å…¶å®å°±æ˜¯è®°å½•é¡ºåºåœ°ä»$m$ä¸ªäººä¸­é€‰$m$ä¸ªäººï¼Œä¹Ÿå°±æ˜¯ï¼š</p>
<p>$$<br>{m}\times{(m-1)}\times{(m-2)}\times{(m-3)}\times{(m-4)}\times{\ldots}\times1<br>$$</p>
<p>æƒ³æƒ³ç¬¬ä¸€ä¸ªäººé€‰çš„æ—¶å€™æœ‰$m$ç§å¯èƒ½</p>
<p>é‚£é€‰ç¬¬äºŒä¸ªäººçš„æ—¶å€™å°±æœ‰$m-1$ç§å¯èƒ½</p>
<p>ä»¥æ­¤ç±»æ¨</p>
<p>å› ä¸ºæ¯æ¬¡é€‰æ‹©éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œæ‰€ä»¥æ¦‚ç‡è¦ç›¸ä¹˜</p>
<p>ä¹Ÿå°±æ˜¯æœ‰$m!$ç§æ–¹æ¡ˆ</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305010929411.webp"
                      alt="image.png|600"
                ></p>
<p>ä¸‰ä¸ªäººå¯ä»¥å¼•ä¼¸ä¸º<strong>å…­ç§æ–¹æ¡ˆ</strong></p>
<p>ä¹Ÿå°±æ˜¯$3ï¼$ç§æ–¹æ¡ˆ</p>
<p>$m$ä¸ªäººå†…éƒ¨å¯ä»¥æœ‰å¤šå°‘ç§é¡ºåºå‘¢ï¼Œç­”æ¡ˆæ˜¯æœ‰$m!$ç§é¡ºåºï¼Œé‚£å°±æœ‰$m!$ç§æ–¹æ¡ˆä¸ºåŒä¸€ç§æ–¹æ¡ˆ</p>
<p>$$<br>\begin{aligned}<br>C(n,m)&amp;&#x3D;\frac {n\cdot (n-1)\cdot(n-2)\cdot(n-3)\cdot(n-4)\cdot(n-5)\dots (n-m+1)}{m!}\<br>&amp;&#x3D;\frac {P(n,m)}{m!}\<br>&amp;&#x3D;\frac {n!}{m!(n-m)!}\<br>\end{aligned}<br>$$</p>
<h2 id="æ€§è´¨-1"><a href="#æ€§è´¨-1" class="headerlink" title="æ€§è´¨"></a>æ€§è´¨</h2><p>$C(n,0)&#x3D;1$</p>
<p>$C(n,n)&#x3D;1$</p>
<p>$P(n,n)&#x3D;n!$</p>
<h3 id="1-C-n-m-C-n-n-m"><a href="#1-C-n-m-C-n-n-m" class="headerlink" title="1.C(n,m)&#x3D;C(n,n-m)"></a>1.C(n,m)&#x3D;C(n,n-m)</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305010935737.webp"
                      alt="image.png|600"
                ></p>
<p>ä¿ç•™$m$ä¸ªå’Œä¸¢æ‰$n-m$ä¸ªæ–¹æ¡ˆæ•°ç›¸åŒ</p>
<p>æˆ–è€…å¸¦è¿›å¼å­ï¼Œä¼šå‘ç°å¼å­ä¸€æ ·</p>
<h3 id="2-ğŸš©é€’æ¨å¼"><a href="#2-ğŸš©é€’æ¨å¼" class="headerlink" title="2.ğŸš©é€’æ¨å¼"></a>2.ğŸš©é€’æ¨å¼</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305010937199.webp"
                      alt="image.png|600"
                ></p>
<p>å®ƒä»¬åˆ†åˆ«ä»£è¡¨ï¼š</p>
<ul>
<li><p>$n$ä¸ªé€‰$m$ä¸ªçš„<strong>æ–¹æ¡ˆæ•°</strong></p>
</li>
<li><p>$n-1$ä¸ªé€‰$m-1$ä¸ªçš„<strong>æ–¹æ¡ˆæ•°</strong></p>
</li>
<li><p>$n-1$é€‰$m$ä¸ªçš„<strong>æ–¹æ¡ˆæ•°</strong></p>
</li>
</ul>
<p>å¯ä»¥ç”¨èƒŒåŒ…çš„æ€è·¯</p>
<p>å¯ä»¥ç”¨ç¬¬$n$ä¸ªç‰©å“è¦<em>é€‰&#x2F;ä¸é€‰</em></p>
<ul>
<li><p>å¦‚æœé€‰çš„è¯ï¼Œæ–¹æ¡ˆæ•°å°±æ˜¯é€‰åœ¨$n-1$ä¸ªæ•°ç§é€‰$m-1$ä¸ªæ•°çš„æ–¹æ¡ˆæ•°ï¼Œä¹Ÿå°±æ˜¯$C(n-1,m-1)$</p>
</li>
<li><p>å¦‚æœä¸é€‰çš„è¯ï¼Œæ–¹æ¡ˆæ•°å°±æ˜¯åœ¨åœ¨$n-1$ä¸ªæ•°ä¸­é€‰$m$ä¸ªæ•°çš„æ–¹æ¡ˆæ•°ï¼Œä¹Ÿå°±æ˜¯$C(n-1,m)$</p>
</li>
</ul>
<p>å› ä¸ºé€‰äº†ä»¥åå°±ä¸èƒ½é€‰äº†</p>
<p>æ‰€ä»¥æ˜¯<em>åŠ æ³•åŸç†</em></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305010941373.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305010945910.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305010946576.webp"
                      alt="image.png|600"
                ></p>
<p>è¿™ä¸å°±æ˜¯<em>æ¨è¾‰ä¸‰è§’</em>å˜›!</p>
<h3 id="3-nä¸ªç‰©å“éšä¾¿é€‰"><a href="#3-nä¸ªç‰©å“éšä¾¿é€‰" class="headerlink" title="3.nä¸ªç‰©å“éšä¾¿é€‰"></a>3.nä¸ªç‰©å“éšä¾¿é€‰</h3><p>$C(n,0)+C(n,1)+C(n,2)+C(n,3)+\dots +C(n,n)&#x3D;2^n$</p>
<ul>
<li><p>$n$ä¸ªç‰©å“é€‰$0$ä¸ªç‰©å“çš„æ–¹æ¡ˆæ•°</p>
</li>
<li><p>*$n$ä¸ªç‰©å“é€‰$1$ä¸ªç‰©å“çš„æ–¹æ¡ˆæ•°</p>
</li>
<li><p>*$n$ä¸ªç‰©å“é€‰$2$ä¸ªç‰©å“çš„æ–¹æ¡ˆæ•°</p>
</li>
<li><p>$n$ä¸ªç‰©å“é€‰$3$ä¸ªç‰©å“çš„æ–¹æ¡ˆæ•°</p>
</li>
<li><p>$n$ä¸ªç‰©å“é€‰$4$ä¸ªç‰©å“çš„æ–¹æ¡ˆæ•°</p>
</li>
</ul>
<p>$\dots$</p>
<ul>
<li>$n$ä¸ªç‰©å“é€‰$n$ä¸ªç‰©å“çš„æ–¹æ¡ˆæ•°</li>
</ul>
<p>ä¹Ÿå°±æ˜¯ä»$n$ä¸ªç‰©å“é‡Œ<strong>ä»»æ„é€‰å¤šå°‘</strong>ä¸ªçš„æ–¹æ¡ˆæ•°</p>
<p>ç¬¬ä¸€ä¸ªç‰©å“è¦ä¹ˆé€‰è¦ä¹ˆä¸é€‰</p>
<p>ä¸€ç›´åˆ°ç¬¬nä¸ªç‰©å“ï¼Œæ¯ä¸ªç‰©å“éƒ½æ˜¯ä¸¤ç§é€‰æ‹©</p>
<p>é‚£å°±æ˜¯$2^n$</p>
<h3 id="4-å¥‡æ–¹æ¡ˆ-å¶æ–¹æ¡ˆ"><a href="#4-å¥‡æ–¹æ¡ˆ-å¶æ–¹æ¡ˆ" class="headerlink" title="4.å¥‡æ–¹æ¡ˆ&#x3D;å¶æ–¹æ¡ˆ"></a>4.å¥‡æ–¹æ¡ˆ&#x3D;å¶æ–¹æ¡ˆ</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011006475.webp"
                      alt="image.png|600"
                ></p>
<p>åŠ åˆ°&#x2F;å‡åˆ°$C(n,n)$ä¸ºæ­¢</p>
<p>ç§»ä¸€ä¸‹é¡¹</p>
<p>å°±æ˜¯é€‰å¶æ•°ä¸ªä¸œè¥¿çš„æ–¹æ¡ˆæ•°ç­‰äºé€‰å¥‡æ•°ä¸ªä¸œè¥¿çš„æ–¹æ¡ˆæ•°</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305010937199.webp"
                      alt="image.png|600"
                ></p>
<p>å¯ä»¥ç”»å‡ºå½“å‰è¿™è¡Œçš„æ¨è¾‰ä¸‰è§’å½¢</p>
<p>æ¯ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªéƒ½æ˜¯$1$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011010633.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011011482.webp"
                      alt="image.png|600"
                ></p>
<p>å¶æ•°ä½ç½®çš„å’Œæ°å¥½æŠŠä¸Šä¸€è¡Œæ¯ä¸€ä¸ªæ•°åŠ äº†èµ·æ¥</p>
<p>é‚£å‡å¦‚æ˜¯<strong>å¥‡æ•°</strong>ï¼Ÿ</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011012723.webp"
                      alt="image.png|600"
                ></p>
<p>ä¹Ÿæ°å¥½æŠŠä¸Šä¸€è¡Œæ‰€æœ‰ä½ç½®åŠ èµ·æ¥</p>
<p><strong>é€‰å¥‡æ•°çš„æ–¹æ¡ˆæ•°&#x3D;é€‰å¶æ•°çš„æ–¹æ¡ˆæ•°&#x3D;</strong>$2^{n-1}$</p>
<h3 id="5-äºŒé¡¹å¼å®šç†"><a href="#5-äºŒé¡¹å¼å®šç†" class="headerlink" title="5.äºŒé¡¹å¼å®šç†"></a>5.äºŒé¡¹å¼å®šç†</h3><p>$(x+y)^0&#x3D;1$</p>
<p>$(x+y)^1&#x3D;x+y$</p>
<p>$(x+y)^2&#x3D;x^2+2xy+y^2$</p>
<p>$(x+y)^3&#x3D;x^3+3x^2y+3xy^2+y^3$</p>
<p>$(x+y)^4&#x3D;x^4+4x^3y+x^2y^2+4xy^3+y^4$</p>
<p>è¿™ä¸ä¹Ÿæ˜¯ä¸€ä¸ª<em>æ¨è¾‰ä¸‰è§’</em>å˜›</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011017334.webp"
                      alt="image.png|600"
                ></p>
<p>æ¯è¡Œä»å·¦åˆ°å³$x$æ¬¡æ•°é€æ¸å‡å°ï¼Œ$y$çš„æ¬¡æ•°é€æ¸å¢åŠ ï¼Œç³»æ•°å°±æ˜¯æ¨è¾‰ä¸‰è§’æ•°</p>
<ul>
<li>$(x+y)^n&#x3D;C(n,0)x^ny^0+C(n,1)x^{n-1}y^1+\dots+C(n,n)x^0y^n$</li>
</ul>
<p>ä½†æ˜¯è¿™æ ·å†™å¾ˆéº»çƒ¦</p>
<p>$\downarrow$</p>
<p><strong>æ±‚å’Œè¿ç®—ç¬¦ï¼š</strong>$\Sigma$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011022670.webp"
                      alt="image.png|600"
                ></p>
<ul>
<li>$&#x3D;\sum^n \limits_{i&#x3D;0}C(n,i)x^{n-i}y^i$</li>
</ul>
<h3 id="6-ğŸ“Œç»„åˆæ•°çš„å·ç§¯ï¼ˆå±•å¼€å¼ï¼‰"><a href="#6-ğŸ“Œç»„åˆæ•°çš„å·ç§¯ï¼ˆå±•å¼€å¼ï¼‰" class="headerlink" title="6.ğŸ“Œç»„åˆæ•°çš„å·ç§¯ï¼ˆå±•å¼€å¼ï¼‰"></a>6.ğŸ“Œç»„åˆæ•°çš„å·ç§¯ï¼ˆå±•å¼€å¼ï¼‰</h3><p>$$<br>\begin{aligned}<br>C(n,m)&amp;&#x3D;C(n-1,m-1)+C(n-1,m)\<br>&amp;&#x3D;C(n-2,m-2)+C(n-2,m-1)+C(n-2,m-1)+C(n-2,m)\<br>&amp;&#x3D;C(n-2,m-2)+2\cdot C(n-2,m-1)+C(n-2,m)\<br>&amp;&#x3D;C(n-3,m-3)+3C(n-3,m-2)+3C(n-3,m-1)+C(n-3,m)\<br>&amp;&#x3D;\dots\dots\<br>&amp;\downarrow \<br>\end{aligned}<br>$$</p>
<p>$$<br>\begin{aligned}<br>C(n,m)&amp;&#x3D;C(k,0)\cdot C(n-k,m-k)+C(k,1)\cdot C(n-k,m-k+1)+C(k,2)\cdot C(n-k,m-k+2)+\dots +C(k,k)\cdot C(n-k,m-k+k)\<br>\downarrow \<br>&amp;&#x3D;\sum^k\limits_{i&#x3D;0}C(k,i)\cdot C(n-k,m-i)<br>\end{aligned}<br>$$</p>
<p>$k$è¡¨ç¤ºå±•å¼€$k$æ¬¡,æˆ‘ä»¬å‘ç°å±•å¼€åå¤šé¡¹å¼çš„ç³»æ•°å°±æ˜¯æ¨è¾‰ä¸‰è§’æ•°</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011029469.webp"
                      alt="image.png|600"
                ></p>
<p>$C(n,m)&#x3D;\sum^k\limits_{i&#x3D;0}C(k,i)\cdot C(n-k,m-k+i)&#x3D;$</p>
<h2 id="äº¿äº›æ•°å­¦é¢˜"><a href="#äº¿äº›æ•°å­¦é¢˜" class="headerlink" title="äº¿äº›æ•°å­¦é¢˜"></a>äº¿äº›æ•°å­¦é¢˜</h2><h3 id="1-ç»„åˆ"><a href="#1-ç»„åˆ" class="headerlink" title="1.ç»„åˆ"></a>1.ç»„åˆ</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011033937.webp"
                      alt="image.png|600"
                > </p>
<p>ä¸€ä¸ªæ•°å¯ä»¥è¢«é€‰<strong>ä»»æ„å¤š</strong>æ¬¡</p>
<p>$\frac {n^m}{m!}$ï¼Ÿ</p>
<p>æ¯ç§æ–¹æ¡ˆ<strong>é‡å¤çš„æ¬¡æ•°</strong>ä¸ä¸€æ ·</p>
<p>æ¯”å¦‚123(<em>123,132,213,231,312,321</em>)ï¼Œæˆ‘æœ‰å…­ç§æ–¹å¼ä¸ºä¸€ç§æ–¹æ¡ˆ</p>
<p>ä½†å‡å¦‚æ˜¯122(<em>122,212,221</em>)ï¼Œæˆ‘åªæœ‰$3$ç§æ–¹å¼ä¸ºä¸€ç§æ–¹æ¡ˆ</p>
<p>æ­£å› ä¸ºæ¯ä¸ªæ•°<strong>å¯ä»¥é‡å¤å¹¶ä¸”é‡å¤çš„æ¬¡æ•°ä¸ä¸€æ ·</strong>ï¼Œå› æ­¤ä¸å¯ä»¥åŒé™¤ä¸€ä¸ªæ•°</p>
<p>é‚£å°±æ˜¯$mä¸ª1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ï¼Œ6$ï¼Ÿ</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011038831.webp"
                      alt="image.png|600"
                ></p>
<p>ä¹Ÿä¸å¯¹ï¼Œæ¯ä¸ª$2$éƒ½æ˜¯ä¸€ä¸ª$2$</p>
<hr>
<p>é¦–å…ˆé€‰$m$ä¸ªæ•°</p>
<p>$a_1a_2a_3a_4a_5a_6â€¦a_m$</p>
<p>æ’ä¸ªåºï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯é€’å¢çš„</p>
<p>å¤§äºç­‰äº$1$å°äºç­‰äº$n$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011041121.webp"
                      alt="image.png|600"
                ></p>
<p>è¿™ä¸ªä¸ç­‰å¼è§£çš„ä¸ªæ•°</p>
<p>ç­”æ¡ˆå°±æ˜¯$C(n,m)$</p>
<p>æ‰€æœ‰çš„æ•°ä»å°äºå·å˜æˆäº†å°äºç­‰äº</p>
<p>ç°åœ¨è¦è§£çš„å°±æ˜¯è¿™ä¸ªæ–¹ç¨‹æœ‰å¤šå°‘ç»„è§£</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011042717.webp"
                      alt="image.png|600"
                ></p>
<p>ç°åœ¨ä¼šè§£å°äºï¼Œè€ƒè™‘æŠŠå°äºç­‰äºè½¬åŒ–ä¸ºå°äº</p>
<p>é‚£æˆ‘å†é€ $m$ä¸ªå˜é‡</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011043630.webp"
                      alt="image.png|600"
                ></p>
<p>æ‰€ä»¥å¸¦è¿›å°äºç­‰äºä¸ç­‰å¼</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011045854.webp"
                      alt="image.png|600"
                ></p>
<p>ä¹Ÿå°±æ˜¯ä»$n+m-1$ä¸ªæ•°ä¸­é€‰$m$ä¸ª</p>
<p>$c$çš„æ–¹æ¡ˆæ•°å°±æ˜¯$C(n+m-1,m)$</p>
<p>æ¯ä¸€ç»„$b$çš„è§£éƒ½å¯¹åº”ç€ä¸€ç»„$c$çš„è§£</p>
<p>æ‰€ä»¥bçš„æ–¹æ¡ˆæ•°ä¹Ÿå°±æ˜¯$C(n+m-1,m)$</p>
<hr>
<p>ç›¸é‚»çš„ä¸èƒ½é€‰çš„æƒ…å†µå‘¢ï¼Ÿ</p>
<h2 id="äº¿ç‚¹ä»£ç é¢˜-å¢å¡æ–¯å®šç†"><a href="#äº¿ç‚¹ä»£ç é¢˜-å¢å¡æ–¯å®šç†" class="headerlink" title="äº¿ç‚¹ä»£ç é¢˜(å¢å¡æ–¯å®šç†)"></a>äº¿ç‚¹ä»£ç é¢˜(å¢å¡æ–¯å®šç†)</h2><p>$n,m,p$</p>
<p>æ±‚$C(n,m)%p$</p>
<p>æ•°æ®èŒƒå›´?</p>
<ol>
<li>$n,m$&lt;&#x3D;$10^{18}$,$P&#x3D;1$</li>
</ol>
<p>è¾“å‡º$0$</p>
<ol start="2">
<li>$n,m\le 1000$ $p$æ— é™åˆ¶</li>
</ol>
<p>é€’æ¨å¼ï¼š</p>
<p>$C(n,m)&#x3D;(C(n-1,m-1)+C(n-1,m))%p$</p>
<ol start="3">
<li>$n,m\le 10^6$,$p$æ˜¯è´¨æ•°</li>
</ol>
<p>å› ä¸º$p$æ˜¯è´¨æ•°äº†ï¼Œæ‰€ä»¥å¯ä»¥ç”¨<strong>é€†å…ƒ</strong></p>
<p>$C(n,m)&#x3D;\frac {n!}{m!\times (n-m)!}$</p>
<p>é™¤æ³•å¯ä»¥ç”¨<strong>é€†å…ƒ</strong>æå®š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011108568.webp"
                      alt="image.png|600"
                ></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">fac[<span class="number">0</span>]=<span class="number">1</span>;<span class="comment">//0!</span></span><br><span class="line">Â  Â  <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">1000000</span>;i++)</span><br><span class="line">Â  Â  Â  Â  fac[i]=<span class="number">1ll</span>*fac[i<span class="number">-1</span>]*i%p;</span><br><span class="line">Â  Â  <span class="built_in">C</span>(n,m)=<span class="number">1ll</span>*fac[n]*<span class="built_in">ksm</span>(fac[m],p<span class="number">-2</span>,p)%p*<span class="built_in">ksm</span>(fac[n-m],p<span class="number">-2</span>,p)%p;</span><br></pre></td></tr></table></figure></div>

<ol start="4">
<li>$n\le 10^9$ $m&lt;&#x3D;1000$ $p$æ— é™åˆ¶</li>
</ol>
<p>å¤§æ¦‚æ˜¯ä¸€ä¸ª$m^2$çº§åˆ«çš„æ‰ç¬¦åˆå‡ºé¢˜äººçš„æ„å›¾</p>
<p><strong>ä¸€ä¸ªé¢˜çš„çªç ´å£å°±æ˜¯æœ€å¥‡æ€ªçš„åœ°æ–¹</strong></p>
<p>å› ä¸º$p$æ— é™åˆ¶ï¼Œæ‰€ä»¥<strong>ä¸ä¸€å®šæ˜¯è´¨æ•°</strong>ï¼Œå¯èƒ½<strong>é€†å…ƒä¸å­˜åœ¨</strong></p>
<p><em>ä¸ç”¨é€’æ¨å¼å¯ä¸å¯ä»¥ï¼Ÿ</em></p>
<p>$m\le n$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011126512.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011119941.webp"
                      alt="image.png|600"
                ></p>
<p>æŠŠèƒ½çº¦çš„å…¨éƒ¨çº¦æ‰</p>
<p>ä¸Šé¢æœ‰$m$é¡¹ï¼Œä¸‹é¢æœ‰$m$é¡¹</p>
<p>æšä¸¾ä¸Šä¸‹ä¸¤é¡¹</p>
<p>æœ€ååˆ†æ¯ä¸€å®šå¯ä»¥è¢«çº¦æˆ$1$</p>
<p>ç­”æ¡ˆå°±æ˜¯æŠŠåˆ†å­ä¹˜èµ·æ¥</p>
<p>å¤æ‚åº¦:$m^2\times logn$</p>
<ol start="5">
<li>$n,m\le 10^9$,$p\le 100$ä¸”ä¸ºè´¨æ•°</li>
</ol>
<p><strong>å¢å¡æ–¯å®šç†</strong></p>
<p>$p$ä¸ºè´¨æ•°</p>
<p>æŠŠ$n$ï¼Œ$m$è½¬æ¢ä¸º$p$è¿›åˆ¶çš„æ•°</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011404855.webp"
                      alt="image.png|600"
                ></p>
<p>æŒ‰ä½å–$C()$å†ç›¸ä¹˜</p>
<p>æ¯”å¦‚ï¼š</p>
<p>$25&#x3D;221$</p>
<p>$C(25,12)%3&#x3D;C(2,1)\cdot C(2,1)\cdot C(1,0)%3$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011407891.webp"
                      alt="image.png|600"
                ></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1. è½¬ä¸ºpè¿›åˆ¶</span></span><br><span class="line">    <span class="keyword">while</span>(n)</span><br><span class="line">    &#123;</span><br><span class="line">        x[<span class="number">0</span>]++;<span class="comment">//x[0]ä»£è¡¨ä½æ•°</span></span><br><span class="line">        x[x[<span class="number">0</span>]]=n%p;</span><br><span class="line">        n=n/p;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(m)</span><br><span class="line">    &#123;</span><br><span class="line">        y[<span class="number">0</span>]++;<span class="comment">//y[0]ä»£è¡¨ä½æ•°</span></span><br><span class="line">        y[y[<span class="number">0</span>]]=m%p;</span><br><span class="line">        m=m/p;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div>

<p>å› ä¸º$n$å¤§äº$m$</p>
<p>æ‰€ä»¥æ­£å¸¸æƒ…å†µä¸‹$n$è½¬æ¢ä¸º$p$è¿›åˆ¶çš„ä½æ•°æ¯”$m$è¦å¤§</p>
<p>æ‰€ä»¥æŒ‰ç…§$n$è½¬åŒ–åçš„ä½æ•°æšä¸¾å°±å¯ä»¥äº†</p>
<p>ä»¥æœ€ä½ä½å¯¹é½ï¼Œé«˜ä½è¡¥é›¶</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼Ÿ</p>
<p>ä¸æ–­é™¤ä»¥$p$</p>
<p>é‚£ä¹ˆå°±æ˜¯$log_p$çš„å¤æ‚åº¦</p>
<p>é‚£å‡å¦‚æ¨¡çš„ä¸æ˜¯è´¨æ•°ï¼ˆè¿™ä¸ªæ•°ä¹Ÿä¸èƒ½æ˜¯æŸä¸ªè´¨æ•°çš„è‹¥å¹²æ¬¡æ–¹ï¼‰</p>
<p>é‚£å…ˆå¯¹å®ƒå…ˆè¿›è¡Œä¸€ä¸ªè´¨å› æ•°åˆ†è§£</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011422004.webp"
                      alt="image.png|600"
                ></p>
<p>è¿™ä¸å°±æ˜¯[[#ä¸­å›½å‰©ä½™å®šç†|ä¸­å›½å‰©ä½™å®šç†]]å˜›</p>
<p>è§£åŒä½™æ–¹ç¨‹å°±å¯ä»¥äº†</p>
<h3 id="1-ç»„åˆæ•°æ‹†è§£"><a href="#1-ç»„åˆæ•°æ‹†è§£" class="headerlink" title="1.ç»„åˆæ•°æ‹†è§£"></a>1.ç»„åˆæ•°æ‹†è§£</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011425063.webp"
                      alt="image.png|600"
                ></p>
<p>$n&#x3D;1+1+1+1+1+1â€¦+(n-k+1)$</p>
<p>åŠ ä¸Š$k-1$ä¸ª$1$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011431364.webp"
                      alt="image.png|600"
                ></p>
<p><strong>ä»»ä½•ä¸€ä¸ªè‡ªç„¶æ•°éƒ½æ˜¯ç»„åˆæ•°</strong></p>
<h3 id="2-æ¯”è¾ƒç»„åˆæ•°å¤§å°"><a href="#2-æ¯”è¾ƒç»„åˆæ•°å¤§å°" class="headerlink" title="2.æ¯”è¾ƒç»„åˆæ•°å¤§å°"></a>2.æ¯”è¾ƒç»„åˆæ•°å¤§å°</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011433838.webp"
                      alt="image.png|600"
                ></p>
<p>æ•°æ®èŒƒå›´:$&lt;&#x3D;1000000$</p>
<p>è§£æ³•ï¼š</p>
<p><strong>log</strong></p>
<p>$log_x(ab)&#x3D;log_a+log_b$</p>
<p>$log_x(\frac ab)&#x3D;log_a-log_b$</p>
<p>$log$å¯ä»¥åæ˜ å¤§å°å…³ç³»</p>
<p>$log{C(n1,m1)}$ $log{C(n2,m2)}$</p>
<p>å‡å¦‚$C_1&lt;C_2$é‚£ä¹ˆä¸€å®šæœ‰$logC_1&lt;logC_2$ï¼Œåä¹‹äº¦ç„¶<br>$$<br>\begin{aligned}<br>logC(n,m)&amp;&#x3D;log\frac{n!} {m!\times (n-m)!}\<br>&amp;&#x3D;log{n!}-log{m!}-log{(n-m)!}\<br>&amp;\downarrow\<br>log{n!} &amp;&#x3D;log1+log2+log3+\dots logn\<br>\end{aligned}<br>$$</p>
<p>è¿™æ ·å°±å¯ä»¥æ±‚å‡º$logC(n,m)$çš„å€¼å°±å¯ä»¥è¿›è¡Œæ¯”è¾ƒå¤§å°äº†</p>
<p><em>ç²¾åº¦è¯¯å·®ï¼Ÿ</em></p>
<p>è¿™ä¸ªæ˜¯åœ¨å°æ•°ç‚¹åå¾ˆå¤šä½äº§ç”Ÿçš„è¯¯å·®</p>
<p>å› æ­¤å¯ä»¥å¿½ç•¥ä¸è®¡</p>
<h3 id="3-æ‰¾æœ€å¤§ç»„åˆæ•°"><a href="#3-æ‰¾æœ€å¤§ç»„åˆæ•°" class="headerlink" title="3.æ‰¾æœ€å¤§ç»„åˆæ•°"></a>3.æ‰¾æœ€å¤§ç»„åˆæ•°</h3><p><a class="link"   href="https://www.luogu.com.cn/problem/P4370" >P4370<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011455419.webp"
                      alt="image.png|600"
                ></p>
<p><strong>å¯¹æŸä¸ªæ•°å–æ¨¡,ä¸éœ€è¦è€ƒè™‘å’Œæ˜¯ä»€ä¹ˆ</strong></p>
<p>æœ€å¤§çš„æ•°ä¸€å®šåœ¨æœ€ä¸‹é¢çš„æœ€ä¸­é—´</p>
<p>æœ€ä¸‹é¢é‚£ä¸å°±æ˜¯ç¬¬$n$è¡Œå˜›ï¼Œä¹Ÿå°±æ˜¯ç¬¬$n$è¡Œçš„æœ€ä¸­é—´$n&#x2F;2$</p>
<p>è¦æ±‚ç»„åˆæ•°ï¼Œè¦ä¹ˆå°±æ˜¯å¸¦å…¥å…¬å¼ï¼Œä½†æ˜¯è¿™é‡Œæ¨¡æ•°ä¸ä¸€å®šä¸ºè´¨æ•°ï¼Œæ‰€ä»¥åªèƒ½ç”¨é€’æ¨å¼</p>
<p>ç¬¬äºŒå¤§çš„ä¸€å®šåœ¨å®ƒçš„å‘¨å›´</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011500778.webp"
                      alt="image.png|600"
                ></p>
<p>ä¸‹ä¸€ä¸ªæœ€å¤§çš„åœ¨ç¬¬äºŒå¤§å’Œç¬¬ä¸€å¤§çš„ç»„åˆæ•°å‘¨å›´</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011501761.webp"
                      alt="image.png|600"
                ></p>
<p>æ€ä¹ˆæ¯”è¾ƒå¤§å°å‘¢ï¼Ÿ</p>
<p>ä¸Šä¸€é“é¢˜å°±è¯´äº†</p>
<p>é‚£å°±å¯ä»¥ç”¨<code>BFS</code>åšäº†</p>
<p>ä½†$k$æ¯”è¾ƒå¤§</p>
<p>å¯ä»¥åŠ å †ä¼˜åŒ–</p>
<h3 id="4-ç»„åˆæ•°é—®é¢˜"><a href="#4-ç»„åˆæ•°é—®é¢˜" class="headerlink" title="4.ç»„åˆæ•°é—®é¢˜"></a>4.ç»„åˆæ•°é—®é¢˜</h3><p><a class="link"   href="https://www.luogu.com.cn/problemP3746" >P3746<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>ä¸€å¼€å§‹çš„$f(n,r)$,å¾€ä¸‹åŒ–ç®€</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011522366.webp"
                      alt="image.png|600"
                >^1121</p>
<p>å±•å¼€$k$æ¬¡</p>
<p>æŒ‰ç…§[[#6.ğŸ“Œç»„åˆæ•°çš„å·ç§¯ï¼ˆå±•å¼€å¼ï¼‰|å±•å¼€å¼]]</p>
<p>$C(n,m)&#x3D;\sum^k\limits_{i&#x3D;0}C(k,i)\cdot C(n-k,m-i)$</p>
<p>$C(nk,ik+r)&#x3D;\sum^k\limits_{j&#x3D;0}$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011524057.webp"
                      alt="image.png|600"
                ></p>
<p>å‡ºç°äº†å¾ˆå¤š$\Sigma$</p>
<p>è¿™ä¸ªå«åš<em>æ±‚å’Œå˜å½¢</em></p>
<p><u>å¸¸ç”¨çš„æŠ€å·§</u>ï¼š</p>
<ol>
<li><strong>å¢åŠ æšä¸¾é‡</strong></li>
<li><strong>äº¤æ¢æšä¸¾é¡ºåº</strong></li>
</ol>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011528564.webp"
                      alt="image.png|600"
                ></p>
<ol start="3">
<li><strong>åˆ†ç¦»æ— å…³å˜é‡</strong></li>
</ol>
<p>ä»€ä¹ˆå«åšåˆ†ç¦»æ— å…³å˜é‡å‘¢ï¼Ÿ</p>
<p>è¿™ä¸ªå¼å­é‡Œå˜å¾—æ˜¯$i$å’Œ$j$</p>
<p>$i$å˜äº†ç¬¬äºŒä¸ªå¼å­å°±ä¼šå˜ï¼Œä½†ç¬¬ä¸€ä¸ªå¼å­ä¸ä¼šå˜</p>
<p>é‚£å°±å¯ä»¥æŠŠç¬¬ä¸€ä¸ªå¼å­æå‡ºå»</p>
<ol start="4">
<li>[[#7.|æ¢å…ƒæ³•]]</li>
</ol>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011531771.webp"
                      alt="image.png|600"
                ></p>
<p>æ±‚å®Œå’Œå†ç»Ÿä¸€å»ä¹˜</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011532366.webp"
                      alt="image.png|600"
                ></p>
<p>è¿™è¿˜æ˜¯ä¸¤å±‚å¾ªç¯</p>
<p>æƒ³æƒ³é¢˜ç›®å¼€å§‹æ—¶è®¾çš„$f$ï¼Œç°åœ¨å·²ç»åŒ–ç®€æˆäº†è¿™æ ·</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011522366.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011533496.webp"
                      alt="image.png|600"
                ></p>
<p>$i,j$æ§åˆ¶çš„æ˜¯åœˆèµ·æ¥çš„éƒ¨åˆ†,è¿™ä¸ªåœ°æ–¹å°±å¯ä»¥æŠŠ$\infty$æ¶ˆæ‰</p>
<p>![[#^1121]]</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011534068.webp"
                      alt="image.png|600"
                ></p>
<p>é‚£å°±èƒ½åŒ–ä¸º</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011535079.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011537221.webp"
                      alt="image.png|600"
                ></p>
<p>è€è§„çŸ©ï¼ŒåŠ ä¸€ç»´ï¼Œå‡‘æˆçŸ©é˜µä¹˜æ³•</p>
<p>ç¬¬ä¸€è¡Œç¬¬$r$åˆ—</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011538082.webp"
                      alt="image.png|600"
                ></p>
<p>ä»¤</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011539247.webp"
                      alt="image.png|600"
                ></p>
<p>$f_0$å°±æ˜¯$n&#x3D;0$æ—¶çš„å€¼ï¼Œå¾€å…¬å¼é‡Œå¸¦å°±å¯ä»¥äº†</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011539727.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011541533.webp"
                      alt="image.png|600"
                ></p>
<h2 id="æŠ½å±‰åŸç†"><a href="#æŠ½å±‰åŸç†" class="headerlink" title="æŠ½å±‰åŸç†"></a>æŠ½å±‰åŸç†</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011546192.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011547914.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011549655.webp"
                      alt="image.png|600"
                ></p>
<p>ä¸€èˆ¬æ¥è®²å°çš„ä¸ºæŠ½å±‰</p>
<p>æ‰€ä»¥$c$æ˜¯æŠ½å±‰ï¼Œ$n$æ˜¯ä¸œè¥¿</p>
<p><strong>é™·é˜±ï¼šé€‰ä»»æ„å¤šä¸ªæ•°ï¼Œä½†ä¸ä¿è¯è¿ç»­ï¼Œä½†å…¶å®è¿ç»­æ›´å¥½åš</strong></p>
<p><strong>å‰ç¼€å’Œï¼š</strong></p>
<p>$n$ä¸ªæ•°çš„å‰ç¼€å’Œä¸€å®šæœ‰$n+1$ä¸ª</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011556589.webp"
                      alt="image.png|600"
                ></p>
<p>$n+1&gt;n\ge c$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011600523.webp"
                      alt="image.png|600"
                ></p>
<p>æŒ‰ç…§æ¨¡$c$ä»¥åçš„æ•°åˆ†ç»„</p>
<p>é‚£å°±æ˜¯ $0 \to c-1$</p>
<p>ä¸€å…±æœ‰$c$ä¸ªæŠ½å±‰</p>
<p>$n+1$ä¸ªå‰ç¼€å’Œï¼ŒæŒ‰ç…§æ¨¡æ•°åˆ†ç»„</p>
<p>é‚£ä¹ˆä¸€å®šæœ‰ä¸€ä¸ªæŠ½å±‰æœ‰ä¸¤ä¸ªå‰ç¼€å’Œ,å‰ç¼€å’Œè‚¯å®šæ˜¯å‡ ä¸ªæ•°ç›¸åŠ </p>
<p>è¿™ä¸¤ä¸ªæ•°æ¨¡$c$æ˜¯åŒä½™çš„</p>
<p>é‚£å®ƒä»¬çš„å·®ä¸€å®šå°±æ˜¯$c$çš„å€æ•°</p>
<p>é‚£å‰ç¼€å’Œä¹‹å·®è‚¯å®šå°±æ˜¯æŸæ®µåŒºé—´çš„å’Œäº†</p>
<h3 id="1-æ­£æ–¹å½¢è¦†ç›–"><a href="#1-æ­£æ–¹å½¢è¦†ç›–" class="headerlink" title="1.æ­£æ–¹å½¢è¦†ç›–"></a>1.æ­£æ–¹å½¢è¦†ç›–</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011613679.webp"
                      alt="image.png|600"
                ></p>
<p>å‡å¦‚$L&#x3D;100$èƒ½ç›–ä½</p>
<p>é‚£$L&#x3D;150$ä¸€å®šä¹Ÿå¯ä»¥ç›–ä½</p>
<p>å‡å¦‚$L&#x3D;100$ä¸èƒ½ç›–ä½</p>
<p>é‚£ä¹ˆ$L&#x3D;50$ä¸€å®šä¹Ÿä¸èƒ½ç›–ä½</p>
<p>è€ƒè™‘<em>äºŒåˆ†ç­”æ¡ˆ</em></p>
<p>é‚£ä¹ˆç°åœ¨é—®é¢˜æ˜¯å·²çŸ¥$L$ï¼Œèƒ½ä¸èƒ½è¦†ç›–æ‰€æœ‰ç‚¹</p>
<p>è¿™é¢˜æœ‰ä¸ªå¾ˆç‰¹æ®Šçš„æ•°å­—$3$</p>
<p>$3$å’ŒæŠ½å±‰åŸç†æœ‰ä»€ä¹ˆå…³ç³»</p>
<p>å¯ä»¥æŠŠå¹³é¢ä¸Šæ‰€æœ‰ç‚¹åˆ†ä¸º<strong>å››å—</strong></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011621702.webp"
                      alt="image.png|600"
                ></p>
<p>æœ€é <em>ä¸Š&#x2F;ä¸‹&#x2F;å·¦&#x2F;å³</em>çš„ç‚¹ä¸ºè¾¹ç•Œ</p>
<p>è‡³å°‘æœ‰<strong>ä¸€ä¸ªæ­£æ–¹å½¢</strong>ä¼šç›–ä½<strong>ä¸¤ä¸ªç‚¹</strong></p>
<p>è¦ä¹ˆ<em>å·¦ä¸Šè§’&#x2F;å³ä¸Šè§’&#x2F;å·¦ä¸‹è§’&#x2F;å³ä¸‹è§’</em></p>
<p>æšä¸¾ä¸€ä¸‹å°±å¯ä»¥äº†</p>
<p>å‡å¦‚æ”¾åœ¨å·¦ä¸‹è§’</p>
<p>ç›–ä½ä¸€ä¸ªåŒºå—å</p>
<p>å‰©ä¸‹çš„ç‚¹è¿˜å¯ä»¥æ„é€ ä¸€ä¸ªå››è¾¹å½¢</p>
<p>ç°åœ¨è¿˜å‰©ä¸¤ä¸ªæ­£æ–¹å½¢</p>
<p>è‡³å°‘æœ‰ä¸€ä¸ªæ­£æ–¹å½¢è‡³å°‘ç›–ä½ä¸¤ä¸ªè¾¹ç•Œç‚¹</p>
<p>å†æšä¸¾ä¸€æ¬¡ï¼ˆæšä¸¾çš„æ˜¯ç›–ä½å“ªä¸ªè§’ï¼Œè€Œä¸æ˜¯ç›–ä½å‡ ä¸ªç‚¹ï¼Œç›–ä½å‡ ä¸ªç‚¹éƒ½ä¸é‡è¦ï¼Œæˆ‘ä»¬æƒ³çŸ¥é“çš„åªæ˜¯æœ€åèƒ½ä¸èƒ½å…¨éƒ½ç›–ä½ï¼‰</p>
<p>å†æŠŠæ²¡æœ‰è¢«ç›–ä½çš„ç‚¹æ‹¿å‡ºæ¥ï¼Œçœ‹çœ‹æœ€åä¸€ä¸ªæ­£æ–¹å½¢èƒ½ä¸èƒ½ç›–ä½å‰©ä¸‹çš„ç‚¹å°±å¯ä»¥äº†</p>
<p>è¿™æ ·å°±å¯ä»¥åˆ¤æ–­èƒ½ä¸èƒ½ç”¨é•¿åº¦ä¸º$L$çš„æ­£æ–¹å½¢èƒ½ä¸èƒ½ç›–ä½äº†</p>
<p>æ¯æ¬¡ç›–ä½å°±è¦é‡æ–°æ±‚ä¸€éè¾¹ç•Œç‚¹ï¼Œä¸º$O(n)$çº§åˆ«</p>
<p>ç„¶åæšä¸¾åå…­ç§æƒ…å†µ</p>
<p>ä¹Ÿå°±æ˜¯$O(16n)$</p>
<p>ä¸ºä»€ä¹ˆæ”¾è§’ä¸Šæ˜¯æœ€ä¼˜çš„ï¼Ÿ</p>
<p>å› ä¸ºå†å¾€å¤–ç§»å°±ä¼šæµªè´¹é¢ç§¯</p>
<p>æ²¡æœ‰ç›–ä½ä»»ä½•ç‚¹</p>
<p>æˆ‘å€’ä¸å¦‚å¾€é‡Œç§»è®©å®ƒç›–ä½æ›´å¤šçš„ç‚¹</p>
<h2 id="å®¹æ–¥åŸç†"><a href="#å®¹æ–¥åŸç†" class="headerlink" title="å®¹æ–¥åŸç†"></a>å®¹æ–¥åŸç†</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011647747.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011647211.webp"
                      alt="image.png|600"
                ></p>
<p>åŠ ä¸Šæ‰€æœ‰ä¸€ä¸ªå¼å­ï¼Œå‡å»æ‰€æœ‰ä¸¤ä¸ªå¼å­ï¼ŒåŠ ä¸Šæ‰€æœ‰ä¸‰ä¸ªå¼å­ï¼Œå‡å»æ‰€æœ‰å››ä¸ªå¼å­</p>
<h3 id="nå¯¹å¤«å¦»é—®é¢˜"><a href="#nå¯¹å¤«å¦»é—®é¢˜" class="headerlink" title="nå¯¹å¤«å¦»é—®é¢˜"></a>nå¯¹å¤«å¦»é—®é¢˜</h3><p>$2n$ä¸ªäººåæˆä¸€åœˆ</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305011650406.webp"
                      alt="image.png|600"
                ></p>
<p>æ¯å¯¹å¤«å¦»ä¸èƒ½ååœ¨ç›¸é‚»çš„ä½ç½®</p>
<p>æ—‹è½¬åç›¸åŒçš„ç®—ä¸€ç§</p>
<p>å‡å¦‚ä¸è¦æ±‚ä¸ç›¸é‚»ï¼Œè®©ä»–ä»¬ä½œä¸ºä¸€æ’</p>
<p><strong>æœ‰ä¸¤ç§è§£é‡Šï¼š</strong></p>
<p><strong>ç¬¬ä¸€ç§ï¼š</strong></p>
<p>ä¸€æ’çš„æ–¹æ¡ˆæ•°æ˜¯$n!$</p>
<p>åæˆä¸€åœˆå‘¢ï¼Ÿ</p>
<p>$n$ä¸ªäººåæˆä¸€åœˆçš„äººå¯ä»¥è½¬å‡ºnç§æ–¹æ¡ˆ</p>
<p>æ‰€ä»¥å°±æ˜¯$n!\div n$</p>
<p>$&#x3D;(n-1)!$</p>
<p><strong>ç¬¬äºŒç§ï¼š</strong></p>
<p>å‡å¦‚ç¬¬ä¸€ä¸ªäººå®šæ­»äº†ï¼Œå‰©ä¸‹$n-1$ä¸ªäººå$n-1$ä¸ªä½ç½®ï¼Œè¿˜æ˜¯$(n-1)!$</p>
<p>å›åˆ°é¢˜ç›®æœ¬èº«çš„è¦æ±‚ä¸Šï¼š<strong>æ¯å¯¹å¤«å¦»éƒ½ä¸èƒ½ç›¸é‚»</strong></p>
<p>åŸæ¥æœ‰$2n$ä¸ªäºº</p>
<p>éšä¾¿åçš„æ–¹æ¡ˆæ•°ï¼š$(2n-1)!$</p>
<p>ä½†è¿™é‡Œé¢åŒ…å«<em>ä¸åˆæ³•</em>çš„æ–¹æ¡ˆæ•°</p>
<p>é‚£å°±æŠŠå®ƒ<strong>å‡å»</strong>å°±å¯ä»¥äº†</p>
<p>æˆ‘å¯ä»¥è®©ä¸€å¯¹å¤«å¦»å¼ºåˆ¶ååœ¨ä¸€èµ·ï¼Œé‚£ä¹ˆè¿™ç§ä¸€å®šä¸åˆæ³•</p>
<p>$n$å¯¹ä¸­é€‰å‡ºä¸€å¯¹å¤«å¦»å¼ºåˆ¶ç›¸é‚»ï¼š$C(n,1)\cdot (2n-2)!$</p>
<p>å¯ä»¥æŠŠå¼ºåˆ¶ç›¸é‚»çœ‹ä½œè®©æŠŠä¸€ä¸ªäººå¼ºåˆ¶ç»‘å®šåˆ°å¦ä¸€ä¸ªäººèº«ä¸Šï¼Œä¹Ÿå°±æ˜¯è®©è¿™$(2n-2)$ä¸ªäººå›´æˆä¸€åœˆåšå…¨æ’åˆ—</p>
<p>è™½ç„¶å¼ºåˆ¶ç›¸é‚»ï¼Œä½†<strong>ç”·å·¦å¥³å³</strong>ï¼Œ<strong>ç”·å³å¥³å·¦</strong>ä¹Ÿæ˜¯ä¸¤ç§æ–¹æ¡ˆ</p>
<p>æ‰€ä»¥è¿˜è¦å†ä¹˜ä»¥$2$ï¼š$C(n,1)\cdot (2n-2)!\cdot 2$</p>
<p>è¿™å°±æ˜¯ç­”æ¡ˆå—ï¼Ÿ</p>
<p>ä½†æœ‰æ²¡æœ‰å¯èƒ½æŠŠä¸€ç§ä¸åˆæ³•çš„æ–¹æ¡ˆåˆ äº†å¤šæ¬¡å‘¢ï¼Ÿ</p>
<p>å¦‚æœä¸€ä¸ªæ–¹æ¡ˆé‡Œï¼Œæ—¢æœ‰ç¬¬ä¸€å¯¹ç›¸é‚»ï¼Œä¹Ÿæœ‰ç¬¬äºŒå¯¹ç›¸é‚»ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ¡ˆä¼šè¢«å‡æ‰ä¸¤æ¬¡</p>
<p>å‘ç°è¢«å¤šå‡äº†</p>
<p>$(2n-1)!-C(n,1)\cdot (2n-2)!\cdot 2+C(n,2)\cdot (2n-3)!\cdot x^2$</p>
<p>æˆ‘ä»¬åˆå‘ç°å¤šåŠ ä¸Šäº†ä¸‰å¯¹å¤«å¦»ç›¸é‚»çš„æ–¹æ¡ˆæ•°</p>
<p>é‚£ä¹ˆå°±ä¸æ–­åŠ åŠ å‡å‡ä¸‹å»ï¼Œæœ€åå†™æˆ$\Sigma$çš„å½¢å¼</p>
<p>æœ‰iå¯¹å¤«å¦»å¼ºåˆ¶ç›¸é‚»</p>
<p>$\sum^n\limits_{i&#x3D;0}C(n,i)\cdot (2n-i-1)!\cdot{2^i}$</p>
<p>é‚£ä¹ˆåŠ å‡å‘¢ï¼Ÿ</p>
<p>è§‚å¯Ÿä¸Šé¢çš„å¼å­</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305020844653.webp"
                      alt="image.png|600"
                ></p>
<p>å‘ç°è§„å¾‹ï¼š<strong>å¥‡æ•°å‡ï¼Œå¶æ•°åŠ </strong></p>
<p>ä¸ºäº†ä½¿å¥‡æ•°å‡ï¼Œå¶æ•°åŠ ï¼Œé‚£ä¹ˆå°±è¦å†åšä¸€ç‚¹ä¿®æ”¹ï¼š</p>
<p>$\sum^n\limits_{i&#x3D;0}C(n,i)\cdot (2n-i-1)!\cdot{2^i}\cdot{(-1)^i}$</p>
<p>æŠŠ$n$å¯¹ä¸ååœ¨ä¸€èµ·çš„é—®é¢˜è½¬æ¢ä¸ºåªé™åˆ¶ä¸€å¯¹ï¼Œä¸¤å¯¹ï¼Œä¸‰å¯¹â€¦â€¦</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305020847026.webp"
                      alt="image.png|600"
                ></p>
<h3 id="xçš„yæ¬¡æ–¹"><a href="#xçš„yæ¬¡æ–¹" class="headerlink" title="xçš„yæ¬¡æ–¹"></a>xçš„yæ¬¡æ–¹</h3><blockquote>
<p><a class="link"   href="https://acm.hdu.edu.cn/showproblem.php?pid=2204" >HDU2204<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P9118" >P9118<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</blockquote>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305020849353.webp"
                      alt="image.png|600"
                ></p>
<p>$y$æœ€å¤§çš„å¤šå°‘ï¼Ÿ</p>
<p>è¦ä¿è¯$2^y&lt;10^{18}$ï¼Œè¿™æ˜¯$x$æœ€å°çš„($1$çš„ä»»æ„æ¬¡æ–¹ç­‰äºå®ƒæœ¬èº«)</p>
<p>é‚£ä¹ˆ$y&lt;64$</p>
<p>$1-100$æœ‰å¤šå°‘ä¸ªæ•°èƒ½ç”¨$x^2$è¡¨ç¤ºï¼Ÿ</p>
<p>è¿™ä¸ªç­”æ¡ˆæ˜¾ç„¶æ˜¯$\sqrt{100}$ä¸ª</p>
<p>é‚£ä¹ˆ$1\to{N}$èƒ½è¡¨ç¤º$x^y$çš„æ•°ä¸€å…±æœ‰$\sqrt[y]{N}$ä¸ª</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305020852314.webp"
                      alt="image.png|600"
                ></p>
<p>é‚£ä¹ˆç­”æ¡ˆæ˜¯è¿™ä¸ªå—ï¼Ÿ</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305020853573.webp"
                      alt="image.png|600"
                ></p>
<p>æ¯”å¦‚$64$ï¼Œ$y&#x3D;2$çš„æ—¶å€™ä¼šè¢«$8$ç®—ä¸€æ¬¡</p>
<p>$y&#x3D;3$çš„æ—¶å€™ä¼šè¢«$4$ç®—ä¸€æ¬¡</p>
<p>$y&#x3D;6$çš„æ—¶å€™ä¼šè¢«$2$ç®—ä¸€æ¬¡</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305020855290.webp"
                      alt="image.png|600"
                ></p>
<p>è¦æŠŠå®ƒå‡æ‰</p>
<p>$-^6\sqrt{N}$</p>
<p>å†³å®š$y$æ¬¡æ˜¯åŠ è¿˜æ˜¯å‡å‘¢ï¼Ÿ</p>
<p>å¯ä»¥ç”¨<del>è«æ¯”ä¹Œæ–¯å‡½æ•°</del></p>
<p>å…ˆæš´åŠ›</p>
<p>å½“ç®—åˆ°$x^2$çš„æ—¶å€™$x^{4,6,8\dots}$éƒ½ä¼šè¢«ç®—</p>
<p>ä¹Ÿå°±æ˜¯$a$çš„å€æ•°éƒ½è¦$+1$ï¼›</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">cin&gt;&gt;n;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> a=<span class="number">2</span>;a&lt;=<span class="number">64</span>;a++)</span><br><span class="line">&#123;</span><br><span class="line">    num[a]=<span class="number">0</span>;<span class="comment">//ä»£è¡¨xçš„aæ¬¡æ–¹è¿™ç§å½¢å¼çš„æ•°è¢«ç®—äº†å‡ æ¬¡ï¼Œå®ƒåº”è¯¥ä¸º1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> a=<span class="number">2</span>;a&lt;=<span class="number">64</span>;a++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//vè¡¨ç¤ºx^aè¿™ç§å½¢å¼çš„æ•°æœ‰å¤šå°‘ä¸ª</span></span><br><span class="line">    <span class="comment">//powè¦ä¸‹å–æ•´ï¼Œä¸èƒ½å››èˆäº”å…¥</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> v=<span class="built_in">pow</span>(n,<span class="number">1.0</span>/a)<span class="number">-1</span>;<span class="comment">//å‡å»1çš„aæ¬¡æ–¹è¿™ä¸ªæ–¹æ¡ˆæ•°ï¼Œå› ä¸º1^aä¼šè¢«ç®—63æ¬¡//pow(x,y)è®¡ç®—xçš„yæ¬¡æ–¹--&gt;å¼€aæ¬¡æ–¹æ ¹ï¼Œå‡å»1æ¬¡æ–¹</span></span><br><span class="line">    <span class="comment">//æŠŠ1å»æ‰</span></span><br><span class="line">    <span class="type">int</span> d=<span class="number">1</span>-num[a];<span class="comment">//ä»£è¡¨è¿™ä¸ªæ•°è¿˜è¦ç®—å‡ æ¬¡/ä¸åº”è¯¥è¢«ç®—å¤šå°‘æ¬¡ï¼Œå› ä¸ºæœ€åè¦è®©æ¯ä¸ªnuméƒ½æ˜¯1//3,2,1,0,-1,-2...</span></span><br><span class="line">    <span class="comment">//d*vå°±æ˜¯å¯¹ç­”æ¡ˆçš„è´¡çŒ®,é€šè¿‡ç®—äº†å¤šå°‘æ¬¡å°±å¯ä»¥çŸ¥é“å®¹æ–¥ç³»æ•°</span></span><br><span class="line">    ans+=v*d;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> b=a;b&lt;=<span class="number">64</span>;b+=a)</span><br><span class="line">    &#123;</span><br><span class="line">        num[b]+=d;<span class="comment">//bè¢«ç®—äº†è¿™ä¹ˆå¤šæ¬¡ï¼Œå°±æŠŠæ‰€æœ‰açš„å€æ•°éƒ½åŠ ä¸Š</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">ans++;<span class="comment">//å› ä¸ºä¸€å¼€å§‹å°±æ²¡ç®—1ï¼Œæ‰€ä»¥è¦åŠ ä¸Š1</span></span><br></pre></td></tr></table></figure></div>

<p>$pow(n,1.0&#x2F;a)&#x3D;\sqrt[a]{n}$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305020930805.webp"
                      alt="image.png|600"
                ></p>
<p>$\because2^{log_2n}&#x3D;n$</p>
<p>$\therefore$åŸå¼$&#x3D;n^{\frac{1}{a}}$</p>
<p>$&#x3D;^a\sqrt{n}$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305020932102.webp"
                      alt="image.png|600"
                ></p>
<p>$log$å’Œ$exp$åœ¨<code>cpp</code>é‡Œéƒ½æ˜¯ä»¥$e$ä¸ºåº•çš„</p>
<p>ä»¥ä»€ä¹ˆä¸ºåº•éƒ½ä¸€æ ·</p>
<p>$exp(x)$å°±æ˜¯$e^x$</p>
<h1 id="çº¿æ€§åŸº"><a href="#çº¿æ€§åŸº" class="headerlink" title="çº¿æ€§åŸº"></a>çº¿æ€§åŸº</h1><h1 id="çŸ©é˜µ-1"><a href="#çŸ©é˜µ-1" class="headerlink" title="çŸ©é˜µ"></a>çŸ©é˜µ</h1><blockquote>
<p>çŸ©é˜µä¹˜æ³•å’Œå‰ç¼€å’Œå¾ˆåƒ</p>
</blockquote>
<h2 id="é«˜æ–¯æ¶ˆå…ƒ"><a href="#é«˜æ–¯æ¶ˆå…ƒ" class="headerlink" title="é«˜æ–¯æ¶ˆå…ƒ"></a>é«˜æ–¯æ¶ˆå…ƒ</h2><p><strong>è§£æ–¹ç¨‹</strong><br>$$<br>\begin{cases}<br>x_1+x_2&#x3D;2\<br>2x_1+3x_2&#x3D;5 \<br>\end{cases}<br>$$</p>
<p>$\begin{cases}{x_1}&#x3D;1\{x_2&#x3D;1}\end{cases}$</p>
<p>å‡å¦‚ç¨ä½œå˜åŒ–å‘¢ï¼Ÿ</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305020937268.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305020939573.webp"
                      alt="image.png|600"
                ></p>
<p>$n$ä¸ªæœªçŸ¥æ•°</p>
<p>è¦è§£å†³$n$å…ƒä¸€æ¬¡æ–¹ç¨‹ï¼Œæ€ä¹ˆè§£ï¼Ÿ</p>
<p>è¦<strong>æŠŠæœªçŸ¥æ•°æ¶ˆå»</strong></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305020941862.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305020941863.webp"
                      alt="image.png|600"
                ></p>
<p>$x1$å°±æ¶ˆå¤±äº†</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305020942049.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305020942601.webp"
                      alt="image.png|600"
                ></p>
<p>$x1$ä¹Ÿæ¶ˆå¤±äº†</p>
<p>$(i)-(1)\cdot\frac{a_{11}}{a_{i1}}$</p>
<p>å¯ä»¥ç”¨ç¬¬$i$ä¸ªæ–¹ç¨‹-ç¬¬ä¸€ä¸ªæ–¹ç¨‹ä¹˜ä»¥$a11$åˆ†ä¹‹$ai1$å°±å¯ä»¥æŠŠæ‰€æœ‰çš„$x1$æ¶ˆæ‰</p>
<p>åªæœ‰$n-1$ä¸ªæ–¹ç¨‹ï¼Œ$n-1$ä¸ªæœªçŸ¥æ•°äº†</p>
<p>ä¸æ–­å‡å»ç¬¬ä¸€è¡Œå°±å¯ä»¥æ¶ˆæ‰$x1$ï¼Œå‰©ä¸‹çš„æ–¹ç¨‹ä¸æ–­å‡å»ç¬¬äºŒè¡Œå°±å¯ä»¥æ¶ˆå»$x2$,$\ldots$</p>
<p>ä¸æ–­è¿™æ ·åšä¸‹å»å°±å¯ä»¥åšæˆä¸€ä¸ªæ–¹ç¨‹ï¼Œä¸€ä¸ªæœªçŸ¥æ•°</p>
<p>è§£å‡ºæ¥åä¸€æ­¥ä¸€æ­¥å¾€å›å¸¦ï¼Œä¹Ÿå¯ä»¥å˜æˆåªå‰©ä¸€ä¸ªæœªçŸ¥æ•°</p>
<p>å†™ä¸€ä¸‹ä»£ç </p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305020951435.webp"
                      alt="image.png|600"
                ></p>
<p><strong>i&#x3D;1</strong></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305020958685.webp"
                      alt="image.png|600"
                ></p>
<p><strong>i&#x3D;2</strong></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021000278.webp"
                      alt="image.png|600"
                ></p>
<p>ä¼šå˜æˆä¸€ä¸ªä¸‰è§’å½¢</p>
<p>æ‰€ä»¥æ¶ˆå…ƒå</p>
<p>æœ€åçš„æ–¹ç¨‹ä¼šåœ¨æœ€åä¸€è¡Œ</p>
<p>ä¸€èˆ¬ä¹Ÿå°±$100\to 200$</p>
<p>é¢˜ç›®ä¿è¯æœ‰å”¯ä¸€è§£</p>
<p>å‡å¦‚$a[i][i]&#x3D;0$?</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021009681.webp"
                      alt="image.png|600"
                ></p>
<p>ä»»ä½•ä¸€ä¸ª$a[i][i]&#x3D;0$</p>
<p>è¿™æ ·æ‹¿ç¬¬ä¸€ä¸ªæ–¹ç¨‹çš„$x1$æ¶ˆå»å…¶å®ƒæ–¹ç¨‹çš„$x1$ï¼Œæ²¡æœ‰åŠæ³•æ¶ˆå…ƒï¼Œå› ä¸ºç¬¬ä¸€ä¸ªæ–¹ç¨‹å‹æ ¹å°±æ²¡æœ‰$x1$</p>
<p>æ‰€ä»¥æˆ‘è¦ç”¨ç¬¬$i$ä¸ªæ–¹ç¨‹æ¶ˆå»$xi$è¦å…ˆä¿è¯æœ‰$xi$</p>
<p>å¯ä»¥äº¤æ¢</p>
<p>ä»£ç :</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">cin&gt;&gt;n;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">        cin&gt;&gt;a[i][j];</span><br><span class="line">    <span class="comment">// cin&gt;&gt;b[i];</span></span><br><span class="line">    cin&gt;&gt;a[i][n<span class="number">+1</span>];<span class="comment">//å­˜b</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">gauss</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//aå­˜ç³»æ•°</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="comment">//æ¶ˆå…ƒ</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=i;j&lt;=n;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[j][i]!=<span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>;k&lt;=n<span class="number">+1</span>;k++)</span><br><span class="line">                    <span class="built_in">swap</span>(a[i][k],a[j][k]);<span class="comment">//äº¤æ¢æ–¹ç¨‹O(1)</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è¦æŠŠxiä»i+1ä¸ªæ–¹ç¨‹åˆ°ç¬¬nä¸ªæ–¹ç¨‹æ¶ˆæ‰</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=i<span class="number">+1</span>;j&lt;=n;j++)</span><br><span class="line">        <span class="comment">//æŠŠxiä»ç¬¬jä¸ªæ–¹ç¨‹å¼€å§‹æ¶ˆæ‰</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">double</span> ratio=a[j][i]/a[i][i];<span class="comment">//æ±‚åº”è¯¥å˜çš„ç³»æ•°</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>;k&lt;=n<span class="number">+1</span>;k++)<span class="comment">//ç®—ä¸Šæ›´æ–°å¸¸æ•°b</span></span><br><span class="line">            &#123;</span><br><span class="line">                a[j][k]-=a[i][k]*ratio;<span class="comment">//æ¯ä¸€ä¸ªä½ç½®éƒ½è¦å¯¹åº”å‡ï¼Œé•¿åº¦ä¸ºn</span></span><br><span class="line">                <span class="comment">//å•ç‹¬å‡bæ¯”è¾ƒéº»çƒ¦</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=n;i&gt;=<span class="number">1</span>;i--)<span class="comment">//è§£æ–¹ç¨‹</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=i<span class="number">+1</span>;j&lt;=n;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            a[i][n<span class="number">+1</span>]-=a[i][j]*x[j];<span class="comment">//æŠŠå·²ç»å›å¸¦çš„æœªçŸ¥æ•°ç§»åˆ°å³è¾¹å»</span></span><br><span class="line">        &#125;</span><br><span class="line">        x[i]=a[i][n<span class="number">+1</span>]/a[i][i];<span class="comment">//è§£ä¸€å…ƒä¸€æ¬¡æ–¹ç¨‹</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>$int$çš„è¯å†™ä¸ç­‰äº$0$å°±å¯ä»¥äº†</p>
<p>ä½†æ˜¯è¿™é‡Œé¢æ‰€æœ‰çš„æ–¹ç¨‹éƒ½æ˜¯<code>double</code>ç±»å‹çš„ï¼Œä¸å¯ä»¥ç”¨<code>!=0</code>æ¥åˆ¤æ–­</p>
<p>åº”è¯¥è¿™æ ·å†™</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="built_in">fabs</span>(a[j][i])&gt; <span class="number">1e-8</span>)<span class="comment">//fabså–ç»å¯¹å€¼ï¼Œåœ¨10^-8ä»¥ä¸Šï¼Œå°±ä¸æ˜¯0</span></span><br><span class="line">......</span><br><span class="line"><span class="type">double</span> ratio=a[j][i]/a[i][i];<span class="comment">//æ±‚åº”è¯¥å˜çš„ç³»æ•°</span></span><br></pre></td></tr></table></figure></div>

<p>ä½†å®é™…ä¸Šè¿™ç§é«˜æ–¯æ¶ˆå…ƒå¾ˆå®¹æ˜“è¢«å¡</p>
<h3 id="ä¸»å…ƒæ¶ˆå…ƒæ³•"><a href="#ä¸»å…ƒæ¶ˆå…ƒæ³•" class="headerlink" title="ä¸»å…ƒæ¶ˆå…ƒæ³•"></a>ä¸»å…ƒæ¶ˆå…ƒæ³•</h3><p>ç²¾åº¦é—®é¢˜</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021035445.webp"
                      alt="image.png|600"
                ></p>
<p>æ¢å“ªä¸ªå‘¢ï¼Ÿ</p>
<p>ä¸€ä¸ªä¼šé™¤ä»¥$0.1$</p>
<p>ä¸€ä¸ªä¼šé™¤ä»¥$10$</p>
<p>æ•°å­¦æ„ä¹‰ä¸Šæ— æ‰€è°“</p>
<p>ä½†ç¬¬äºŒä¸ªä¼šæ›´å¥½</p>
<p>é™¤ä»¥$10$ä¼šæ›´å¥½</p>
<p>å‡å¦‚ç²¾åº¦è¯¯å·®åˆ°äº†$0.01$çš„çº§åˆ«</p>
<p>$0.1$ä¼šä½¿å®ƒæ³¢åŠ¨åˆ°$0.09\to 0.1$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021038924.webp"
                      alt="image.png|600"
                ></p>
<p>ç¬¬äºŒä¸ªæ³¢åŠ¨èŒƒå›´æ›´å°</p>
<p>å› ä¸ºè¯¯å·®ä¼šéšç€æ•°ä¸€èµ·å˜</p>
<p>æ•°å˜å¤§è¯¯å·®ä¹Ÿå°±ä¼šå˜å¤§ï¼Œæ•°å˜å°è¯¯å·®ä¹Ÿä¼šå˜å°</p>
<p>è¿™é‡Œé€‰çš„$a[i][i]$åº”è¯¥è¶Šå¤§è¶Šå¥½</p>
<p><strong>ä¸»å…ƒæ¶ˆå…ƒæ³•ï¼š</strong></p>
<p>æ‰¾åˆ°ç³»æ•°æœ€å¤§çš„é‚£ä¸ªä½œä¸ºè¢«é™¤æ•°ä½¿æœ€ä¼˜çš„</p>
<p>å‡å¦‚ç³»æ•°å’Œè§£éƒ½æ˜¯æ•´æ•°å‘¢ï¼Ÿ</p>
<p>å¯ä»¥å­˜åˆ†å­åˆ†æ¯</p>
<p>ä¹Ÿå¯ä»¥ï¼š</p>
<p>ä¸¾ä¸ªæ —å­ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021044736.webp"
                      alt="image.png|600"
                ></p>
<p>å‡å¦‚è¿˜æ˜¯é‚£ä¹ˆå†™ï¼Œè¦ä¹˜$1.5$å€</p>
<p>é‚£å°±å¯ä»¥æŠŠå®ƒä»¬éƒ½å˜æˆå„è‡ªçš„æœ€å°å…¬å€æ•°</p>
<p>è¿™æ ·å°±å¯ä»¥é¿å…å‡ºç°å°æ•°</p>
<p>ä½†æ˜¯ä¸æ–­æ±‚<code>LCM</code>è¿™æ ·ç³»æ•°å¯èƒ½ä¼šè¶Šæ¥è¶Šå¤§</p>
<p>æ‰€ä»¥è¦å¼€<code>long long</code></p>
<p>è¦æ˜¯<code>long long</code>è¿˜ä¸è¡Œå°±å¾—å»ç”¨<code>double</code>çš„æ–¹æ³•äº†</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">double</span> a[][];</span><br><span class="line">cin&gt;&gt;n;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">        cin&gt;&gt;a[i][j];</span><br><span class="line">    <span class="comment">// cin&gt;&gt;b[i];</span></span><br><span class="line">    cin&gt;&gt;a[i][n<span class="number">+1</span>];<span class="comment">//å­˜b</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">gauss</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//aå­˜ç³»æ•°</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="comment">//æ¶ˆå…ƒ</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=i;j&lt;=n;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[j][i]!=<span class="number">0</span>)</span><br><span class="line">            <span class="comment">// if(fabs(a[j][i])&gt; 1e-8)//fabså–ç»å¯¹å€¼ï¼Œåœ¨10^-8ä»¥ä¸Šï¼Œå°±ä¸æ˜¯0</span></span><br><span class="line">            <span class="comment">// if(fabs(a[j][i])&gt; fabs(a[i][i]))//ç³»æ•°æ›´å¤§ï¼Œå°±ä¼šä½¿è¯¯å·®æ›´å°ï¼Œä¹Ÿå°±æ›´ä¼˜ï¼Œé‚£å°±æ¢</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>;k&lt;=n<span class="number">+1</span>;k++)</span><br><span class="line">                    <span class="built_in">swap</span>(a[i][k],a[j][k]);<span class="comment">//äº¤æ¢æ–¹ç¨‹O(1)</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è¦æŠŠxiä»i+1ä¸ªæ–¹ç¨‹åˆ°ç¬¬nä¸ªæ–¹ç¨‹æ¶ˆæ‰</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=i<span class="number">+1</span>;j&lt;=n;j++)</span><br><span class="line">        <span class="comment">//æŠŠxiä»ç¬¬jä¸ªæ–¹ç¨‹å¼€å§‹æ¶ˆæ‰</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[j][i]==<span class="number">0</span>) comtinue;</span><br><span class="line">            <span class="type">int</span> l=a[i][i]/<span class="built_in">gcd</span>(<span class="built_in">abs</span>(a[i][i]),<span class="built_in">abs</span>(a[j][i]))*a[j][i];<span class="comment">//lcm//å¯èƒ½æœ‰è´Ÿæ•°</span></span><br><span class="line">            <span class="type">int</span> retioi=l/a[i][i];</span><br><span class="line">            <span class="type">int</span> retioj=l/a[j][i];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>;k&lt;=n<span class="number">+1</span>;k++)<span class="comment">//ç®—ä¸Šæ›´æ–°å¸¸æ•°b</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// a[j][k]-=a[i][k]*ratio;//æ¯ä¸€ä¸ªä½ç½®éƒ½è¦å¯¹åº”å‡ï¼Œé•¿åº¦ä¸ºn</span></span><br><span class="line">                a[j][k]=a[j][k]*retioj-a[i][k]*ratioi;</span><br><span class="line">                <span class="comment">//å•ç‹¬å‡bæ¯”è¾ƒéº»çƒ¦</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=n;i&gt;=<span class="number">1</span>;i--)<span class="comment">//è§£æ–¹ç¨‹</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=i<span class="number">+1</span>;j&lt;=n;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            a[i][n<span class="number">+1</span>]-=a[i][j]*x[j];<span class="comment">//æŠŠå·²ç»å›å¸¦çš„æœªçŸ¥æ•°ç§»åˆ°å³è¾¹å»</span></span><br><span class="line">        &#125;</span><br><span class="line">        x[i]=a[i][n<span class="number">+1</span>]/a[i][i];<span class="comment">//è§£ä¸€å…ƒä¸€æ¬¡æ–¹ç¨‹</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="è§£æ–¹ç¨‹"><a href="#è§£æ–¹ç¨‹" class="headerlink" title="è§£æ–¹ç¨‹"></a>è§£æ–¹ç¨‹</h2><p>å¯ä»¥æ€ä¹ˆç”¨é«˜æ–¯æ¶ˆå…ƒå‘¢ï¼Ÿ</p>
<p>è¾“å…¥ä¸€ä¸ªæ•°ï¼Œè¾“å‡ºä¸€ä¸ªæ•°ï¼Œä¸€èˆ¬å¯ä»¥æ‰“è¡¨</p>
<p>æ‰“è¡¨æ‰“ä¸ä¸‹çš„æ—¶å€™å¯ä»¥æ‰¾è§„å¾‹</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021057735.webp"
                      alt="image.png|600"
                ></p>
<p>å‡è®¾ç­”æ¡ˆæ˜¯å…³äº$n$çš„ä¸€æ¬¡æ–¹ç¨‹</p>
<p>å¯ä»¥å¾—åˆ°è‹¥å¹²ä¸ªæ–¹ç¨‹</p>
<p>å‡å¦‚è§„å¾‹ä¸å¯¹</p>
<p>é‚£å°±æŠŠå®ƒå½“æˆ$2$æ¬¡çš„å¼å­</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021100409.webp"
                      alt="image.png|600"
                ></p>
<p>åœ¨æŠŠ$n&#x3D;4$å¸¦è¿›å»</p>
<p>è‹¥è¿˜ä¸æ»¡è¶³</p>
<p>å†å‡å¹‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021101450.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021101127.webp"
                      alt="image.png|600"
                ></p>
<p>æ¬¡æ•°æ¯”è¾ƒä½çš„æ—¶å€™å¯ä»¥æ‰‹è§£</p>
<p>é‚£ä¹ˆå°±å¯ä»¥æšä¸¾è¿™ä¸ªè§„å¾‹æ˜¯å‡ æ¬¡çš„</p>
<p>é‚£å°±æŠŠå®ƒå¸¦åˆ°ä¸‹ä¸€é¡¹å»éªŒè¯</p>
<p>è¿™æ ·å°±å¯ä»¥æ‰¾åˆ°è§„å¾‹</p>
<p>æ¡ä»¶ï¼šä¸€å®šæ˜¯$n$çš„å¤šå°‘æ¬¡æ–¹</p>
<h2 id="çŸ©é˜µæ±‚é€†"><a href="#çŸ©é˜µæ±‚é€†" class="headerlink" title="çŸ©é˜µæ±‚é€†"></a>çŸ©é˜µæ±‚é€†</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021106592.webp"
                      alt="image.png|600"
                ></p>
<p>çŸ©é˜µ$I$å«åšå•ä½çŸ©é˜µ</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021107829.webp"
                      alt="image.png|600"
                ></p>
<p>å‡å¦‚$A\times{B}&#x3D;I$</p>
<p>çŸ©é˜µ$B$æ˜¯çŸ©é˜µ$A$çš„é€†çŸ©é˜µ</p>
<p>çŸ©é˜µ$A$æ˜¯çŸ©é˜µ$B$çš„é€†çŸ©é˜µ</p>
<p>æ€ä¹ˆæ±‚é€†çŸ©é˜µå‘¢ï¼Ÿ</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021110936.webp"
                      alt="image.png|600"
                ></p>
<p>$i&#x3D;j$çš„æ—¶å€™$&#x3D;1$</p>
<p>$i!&#x3D;j$çš„æ—¶å€™$&#x3D;0$</p>
<p>è¿™æ ·æ‰èƒ½ä¿è¯å¾—åˆ°ä¸€ä¸ªå•ä½çŸ©é˜µ</p>
<p>$n^2$ä¸ªæœªçŸ¥æ•°ï¼Œ$n^2$ä¸ªæ–¹ç¨‹ï¼Œè¿™æ ·å°±å¯ä»¥æŠŠé€†çŸ©é˜µæ±‚å‡ºæ¥äº†</p>
<p>é‚£ä¹ˆè¿™ä¸ªçš„å¤æ‚åº¦å°±ä¼šæ˜¯$n^{2^3}$</p>
<p>ä¹Ÿå°±æ˜¯$n^6$</p>
<p>æœ‰äº¿ç‚¹å¤§</p>
<p>æ€ä¹ˆä¼˜åŒ–å‘¢ï¼Ÿ</p>
<p>ç”¨ä¸€ä¸ªå°å°çš„<u>å°æŠ€å·§</u></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021116986.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021117476.webp"
                      alt="image.png|600"
                ></p>
<p>å¯¹è§’çº¿æœ‰ä¸¤ä¸ªæ˜¯$0$ï¼Œå®ƒä»¬æ‰€åœ¨çš„å°çŸ©é˜µï¼Œ$1$å˜æˆäº†å¦ä¸€ä¸ªå¯¹è§’çº¿</p>
<p>è¿™ä¸ªçŸ©é˜µå¯ä»¥<strong>äº¤æ¢ç¬¬äºŒè¡Œå’Œç¬¬ä¸‰è¡Œ</strong></p>
<p><strong>å¯ä»¥åŠ¨æ‰‹ç®—ä¸€ä¸‹</strong></p>
<p>é‚£å‡å¦‚æ˜¯è¿™ä¸ªï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021120083.webp"
                      alt="image.png|600"
                ></p>
<p>å¯¹è§’çº¿ä¸º$1$</p>
<p>å…¶å®å°±æ˜¯æŠŠç¬¬ä¸€è¡Œçš„ä¸¤å€åŠ åˆ°ç¬¬äºŒè¡Œä¸Š</p>
<p>å°±æ˜¯æŠŠæŸä¸€è¡Œçš„è‹¥å¹²å€åŠ åˆ°æŸä¸€è¡Œä¸Šå»</p>
<p>é«˜æ–¯æ¶ˆå…ƒçš„æ ¸å¿ƒæ“ä½œï¼šäº¤æ¢æŸä¸¤è¡Œï¼ŒæŠŠä¸€è¡Œçš„è‹¥å¹²å€åŠ åˆ°æŸä¸€è¡Œä¸Šå»</p>
<p>é«˜æ–¯æ¶ˆå…ƒæ¯ä¸€æ­¥ç›¸å½“äºåšçŸ©é˜µä¹˜æ³•</p>
<p>ä¸€å¼€å§‹æœ‰ä¸ªçŸ©é˜µ$A$</p>
<p>$A\times B&#x3D;I$</p>
<p>ç”¨é«˜æ–¯æ¶ˆå…ƒä¸æ–­æ¶ˆ$A$ï¼ŒæŠŠå®ƒæ¶ˆæˆ$I$</p>
<p>æ­£ç€æ¶ˆé™¤ä¸€éï¼Œå†å€’ç€æ¶ˆé™¤ä¸€é</p>
<p>å°±å¯ä»¥æŠŠçŸ©é˜µåŒ–ä¸º$I$</p>
<p>å…¶å®å°±æ˜¯ä¹˜äº†ä¸ª$B$</p>
<p>æŠŠæ¶ˆå…ƒçš„è¿‡ç¨‹ä¸­æŠŠåŒæ ·çš„æ“ä½œåœ¨çŸ©é˜µ$I$åŒæ ·åšä¸€é</p>
<p>å°±å¯ä»¥æŠŠ$A\times B\to I$,$I\times B\to B$</p>
<p>å°±ç›¸å½“äºå¯¹ä¸€ä¸ª$n\times 2n$çš„çŸ©é˜µæ¶ˆå…ƒ</p>
<p>å·¦è¾¹æ˜¯$A$,å³è¾¹æ˜¯$I$</p>
<h1 id="æ¦‚ç‡å’ŒæœŸæœ›"><a href="#æ¦‚ç‡å’ŒæœŸæœ›" class="headerlink" title="æ¦‚ç‡å’ŒæœŸæœ›"></a>æ¦‚ç‡å’ŒæœŸæœ›</h1><h2 id="æ¦‚ç‡"><a href="#æ¦‚ç‡" class="headerlink" title="æ¦‚ç‡"></a>æ¦‚ç‡</h2><p><strong>æ¦‚ç‡ï¼šä¸€ä»¶äº‹å‘ç”Ÿçš„å¯èƒ½æ€§</strong></p>
<p>ä»€ä¹ˆæ˜¯äº‹ä»¶å‘¢ï¼Ÿ</p>
<p>æ¯”å¦‚æ‰”éª°å­ğŸ²ï¼Œå¯èƒ½æ‰”å‡º${1,2,3,4,5,6}$</p>
<p>è¿™å…­ä¸ªæ•°å«åšæ ·æœ¬ç©ºé—´</p>
<p>æ¯ä¸€ä¸ªå€¼å«åšä¸€ä¸ªæ ·æœ¬ç‚¹</p>
<p><strong>äº‹ä»¶ï¼šå‡ ä¸ªæ ·æœ¬ç‚¹çš„é›†åˆ</strong></p>
<p>$A&#x3D;{1}\to\frac16$ </p>
<p>$A&#x3D;{1,2,3}\to\frac12$</p>
<ol>
<li>äº¤é›†<ol>
<li>$A\cap{B}&#x3D;A\cdot{B}$</li>
<li>$A\cup{B}&#x3D;A+B$</li>
<li>$A-A\cdot B&#x3D;A-B$</li>
</ol>
</li>
</ol>
<p>é‚£$A-B$æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>$A$é‡Œé¢åœ¨$B$ç§å‡ºç°è¿‡çš„æ‰”æ‰</p>
<p>å°±æ˜¯$A$å‡å»$A$å’Œ$B$çš„äº¤é›†</p>
<p>é™¤æ³•å‘¢ï¼Ÿ</p>
<p><strong>é™¤ä»¥ä¸€ä¸ªçŸ©é˜µ&#x3D;ä¹˜ä¸Šå®ƒçš„é€†çŸ©é˜µ</strong></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021310051.webp"
                      alt="image.png|600"
                ></p>
<p>æ¯ä¸ªæ ·æœ¬ç‚¹çš„æ¦‚ç‡ä¸ä¸€å®šæ˜¯ç›¸ç­‰çš„</p>
<p>$A{1,2,3}&#x3D;A{1}+A{2}+A{3}$</p>
<h3 id="æ€§è´¨-2"><a href="#æ€§è´¨-2" class="headerlink" title="æ€§è´¨"></a>æ€§è´¨</h3><p>å‡å¦‚æœ‰ä¸ªäº‹ä»¶æ¦‚ç‡ä¸º$P(A)$</p>
<p>ä»»ä½•ä¸€ä¸ªäº‹ä»¶çš„æ¦‚ç‡éƒ½æ˜¯$0\to 1$çš„ä¸€ä¸ªå®æ•°</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021314630.webp"
                      alt="image.png|600"
                ></p>
<p>æ‰€æœ‰æ ·æœ¬ç‚¹çš„æ¦‚ç‡ä¹‹å’Œä¸º$1$</p>
<p>$P(A)&#x3D;0$,å«åš<strong>ä¸å¯èƒ½äº‹ä»¶</strong></p>
<p>$P(A)&#x3D;1$,å«åš<strong>å¿…ç„¶äº‹ä»¶</strong></p>
<p>$P(A|B)$ <strong>æ¡ä»¶æ¦‚ç‡</strong>ï¼š$B$å‘ç”Ÿçš„æƒ…å†µä¸‹ï¼Œ$A$å‘ç”Ÿçš„æ¦‚ç‡</p>
<p>çœ‹$B$äº‹ä»¶çš„å‘ç”Ÿå¯¹$A$äº§ç”Ÿäº†ä½•ç§å½±å“</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021318047.webp"
                      alt="image.png|600"
                ></p>
<p>$B$äº‹ä»¶æ”¹å˜äº†å®ƒçš„æ ·æœ¬ç©ºé—´</p>
<p>$P(A|B)&#x3D;\frac 13$</p>
<p>å†æ¢ä¸ªæ —å­</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021319834.webp"
                      alt="image.png|600"
                ></p>
<p>$P(A|B)&#x3D;A{1}+A{2}+A{3}&#x3D;\frac{1}{3}+0+\frac{1}{3}&#x3D;\frac 23$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021322346.webp"
                      alt="image.png|600"
                ></p>
<p>$P(A|B)&#x3D;\frac{P(AB)}{P(B)}&#x3D;\frac{\frac{1}{3}}{\frac{1}{2}}&#x3D;\frac{2}{3}$</p>
<p>ä¸€å…±å…­ä¸ªæ ·æœ¬ç‚¹</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021324733.webp"
                      alt="image.png|600"
                ></p>
<hr>
<p><strong>ç‹¬ç«‹äº‹ä»¶</strong></p>
<p>$A$æ˜¯å¦å‘ç”Ÿå’Œ$B$æ˜¯å¦å‘ç”Ÿæ²¡æœ‰å…³ç³»</p>
<p>$P(A)\times P(B)&#x3D;P(AB)$</p>
<p>$P(A|B)\times P(B)&#x3D;P(AB)$</p>
<p>$P(A)&#x3D;P(A|B)$</p>
<p>$A$å‘ç”Ÿçš„æ¦‚ç‡&#x3D;$B$äº‹ä»¶å‘ç”Ÿçš„æƒ…å†µä¸‹$A$å‘ç”Ÿçš„æ¦‚ç‡</p>
<p>å› æ­¤Bæ—¶é—´çš„å‘ç”Ÿå¯¹$A$æ—¶é—´çš„å‘ç”Ÿæ²¡æœ‰å½±å“</p>
<p>è¿™ä¸ªæ—¶å€™è¿™ä¸¤ä¸ªäº‹ä»¶å°±æ˜¯ç‹¬ç«‹çš„</p>
<p>æ¯”å¦‚æ‰”ä¸¤æšéª°å­ğŸ²&#x2F;ç”Ÿä¸¤ä¸ªå­©å­ğŸ‘¶</p>
<h2 id="æœŸæœ›"><a href="#æœŸæœ›" class="headerlink" title="æœŸæœ›"></a>æœŸæœ›</h2><p>æ‰”ä¸€æšéª°å­ğŸ²</p>
<p>æ¯ç§æƒ…å†µå‘ç”Ÿçš„æ¦‚ç‡æ˜¯$\frac {1}{6}$</p>
<p>æ‰”å‡ºæ¥çš„æ•°çš„æœŸæœ›æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021333472.webp"
                      alt="image.png|600"
                ></p>
<p>ç”¨æ¯ä¸€ç§æƒ…å†µçš„è¿™ä¸ªæ•°å»ä¹˜ä»¥è¿™ä¸ªæƒ…å†µçš„æ¦‚ç‡</p>
<p>ç¬¬ä¸€ç§æƒ…å†µå°±æ˜¯$1\times{\frac{1}{6}}$</p>
<p>ç¬¬äºŒç§æƒ…å†µå°±æ˜¯$2\times{\frac{1}{6}}$</p>
<p>$\ldots$</p>
<p>ç¬¬å…­ç§æƒ…å†µå°±æ˜¯$6\times{\frac{1}{6}}$</p>
<p>æŠŠè¿™å…­ä¸ªå¼å­åŠ èµ·æ¥å°±æ˜¯æ•°çš„æœŸæœ›</p>
<p>ä¹Ÿå°±æ˜¯æ‰”å‡ºæ¥æ•°çš„å¹³å‡å€¼</p>
<p>æ¯ä¸ªäº‹ä»¶æœ‰ä¸€ä¸ªæ¦‚ç‡ï¼Œæ¯ä¸ªäº‹ä»¶æœ‰ä¸€ä¸ªæƒå€¼</p>
<p>æƒå€¼$x$æ¦‚ç‡ä¹‹å’Œå°±æ˜¯æœŸæœ›</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021336539.webp"
                      alt="image.png|600"
                ></p>
<p>æ‰”å‡ºæ¥æ•°å¹³æ–¹çš„å¹³å‡å€¼</p>
<p>å‡å¦‚åä¸ªæµ‹è¯•ç‚¹ï¼Œè¾“å‡º$Y&#x2F;N$</p>
<p>å‡å¦‚æˆ‘å†™äº†ä¸ª<code>cout&lt;&lt;Y&lt;&lt;endl;</code></p>
<p>è¿™ä¸ªæœŸæœ›æ˜¯$50$åˆ†</p>
<p>æ¯ä¸ªæµ‹è¯•ç‚¹æœ‰ä¸€åŠæ¦‚ç‡æ˜¯$Y$ä¸€åŠæ¦‚ç‡æ˜¯$N$ï¼Œä¸€ä¸ªæµ‹è¯•ç‚¹æ˜¯ååˆ†</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021339069.webp"
                      alt="image.png|600"
                ></p>
<p>å‡å¦‚æ¦‚ç‡ä¸ä¸€æ ·å‘¢ï¼Ÿ</p>
<p>è¿˜æ˜¯ä¸€æ ·ç®—</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021341638.webp"
                      alt="image.png|600"
                ></p>
<hr>
<h3 id="æ€§è´¨-3"><a href="#æ€§è´¨-3" class="headerlink" title="æ€§è´¨"></a>æ€§è´¨</h3><p>æœŸæœ›çš„å’Œ$&#x3D;$å’Œçš„æœŸæœ›</p>
<p><em>ä¸€æšéª°å­çŒé“…ï¼Œä¸€æšéª°å­ä¸çŒé“…</em></p>
<p>$E$ä»£è¡¨æœŸæœ›</p>
<p>$E[x_1+x_2]$</p>
<p>ä¸¤æšéª°å­æœ‰ä¸‰åå…­ç§æƒ…å†µ</p>
<p>å¾—ç®—ä¸€éä¸‰åå…­ç§</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021346265.webp"
                      alt="image.png|600"
                ></p>
<p>å†æ¥å‡ æšéª°å­å‘¢ï¼Ÿ</p>
<p>è¿™ä¸œè¥¿å°±æ²¡æ³•ç®—äº†</p>
<p>æœŸæœ›çš„å’Œ&#x3D;å’Œçš„æœŸæœ›</p>
<p>$E[x_1+x_2]&#x3D;E[x_1]+E[x_2]$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021349184.webp"
                      alt="image.png|600"
                ></p>
<p>è¿™ä¸ªå¼å­æ°¸è¿œéƒ½å¯ä»¥ç”¨</p>
<p>å³ä½¿æœ‰å…³ç³»ä¹Ÿå¯ä»¥ç”¨</p>
<p>å‡å¦‚è¦ç®—$E[x_1+{x_1}^2]$</p>
<p>å°±æ˜¯$&#x3D;E[x_1]+E[{x_1}^2]$</p>
<p>ä¸å®ƒä»¬ç‹¬ç«‹ä¸ç‹¬ç«‹æ²¡æœ‰å½±å“</p>
<h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><h3 id="1"><a href="#1" class="headerlink" title="1."></a>1.</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021403451.webp"
                      alt="image.png|600"
                ></p>
<p>$P(Black|Red)$</p>
<p>æ¯”å¦‚ä¸¤é¢éƒ½æ˜¯é»‘è‰²çš„å°±è¢«æ’é™¤äº†</p>
<p>å¦ä¸€é¢çš„æ¦‚ç‡æ˜¯é»‘è‰²å’Œçº¢è‰²æ¦‚ç‡çœŸçš„ä¸€æ ·å—ï¼Ÿ</p>
<p>é€‰ç‰Œçš„æ—¶å€™ï¼Œæ”¾å“ªé¢å‘¢ï¼Ÿ</p>
<p>æœ‰å…­ç§æƒ…å†µ</p>
<p>ç¬¬ä¸€å¼ ç‰Œï¼š<code>çº¢|çº¢</code></p>
<p>ç¬¬äºŒå¼ ç‰Œï¼š<code>çº¢|é»‘</code></p>
<p>ç¬¬ä¸‰å¼ ç‰Œï¼š<code>é»‘|é»‘</code></p>
<p>æ¡ä»¶æ¦‚ç‡P(<code>ä¸‹é»‘|ä¸Šçº¢</code>)&#x3D;P(<code>ä¸‹é»‘ä¸Šçº¢</code>)$\div$P(<code>ä¸Šçº¢</code>)</p>
<p>åˆ†å­æ˜¯å…­åˆ†ä¹‹ä¸€</p>
<p>åˆ†æ¯æ˜¯äºŒåˆ†ä¹‹ä¸€</p>
<p>æœ€ç»ˆçš„æ¦‚ç‡å°±æ˜¯ä¸‰åˆ†ä¹‹ä¸€</p>
<p>å› ä¸ºç¬¬ä¸€å¼ ç‰Œä¸¤é¢éƒ½æ˜¯çº¢è‰²ï¼Œæ‹¿å®ƒæ‘†ä¸Šæ¥æ­£é¢æ˜¯çº¢çš„æ¦‚ç‡è¦æ¯”ä¸€çº¢ä¸€é»‘è¿™å¼ ç‰Œæ‘†ä¸Šæ¥æ­£é¢æ˜¯çº¢çš„æ¦‚ç‡è¦é«˜</p>
<h3 id="2"><a href="#2" class="headerlink" title="2."></a>2.</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021410805.webp"
                      alt="image.png|600"
                ></p>
<p>å…¬å¹³ï¼šæ¯ä¸ªäººä¸­å¥–çš„æ¦‚ç‡æ˜¯ä¸€æ ·çš„</p>
<p>ç¬¬ä¸€ä¸ªäººä¸­å¥–çš„æ¦‚ç‡æ˜¯$n$åˆ†ä¹‹ä¸€</p>
<p>ç¬¬äºŒä¸ªäººä¸­å¥–çš„æ¦‚ç‡ï¼šç¬¬ä¸€ä¸ªäººæ²¡ä¸­å¥–çš„æ¦‚ç‡ä¹˜ä»¥ç¬¬äºŒä¸ªäººä¸­å¥–çš„æ¦‚ç‡</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021414382.webp"
                      alt="image.png|600"
                ></p>
<p>ç¬¬ä¸‰ä¸ªäººä¸­å¥–çš„æ¦‚ç‡ï¼šç¬¬ä¸€ä¸ªäººç¬¬äºŒä¸ªäººæ²¡ä¸­å¥–çš„æ¦‚ç‡ä¹˜ä»¥ç¬¬ä¸‰ä¸ªäººä¸­å¥–çš„æ¦‚ç‡</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021415542.webp"
                      alt="image.png|600"
                ></p>
<h3 id="3"><a href="#3" class="headerlink" title="3."></a>3.</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021416567.webp"
                      alt="image.png|600"
                ></p>
<p>æ¡ä»¶æ¦‚ç‡</p>
<p>P(<code>ç”·äºº</code>|<code>è‰²ç›²</code>)&#x3D;P(<code>ç”·äºº</code>$\times$<code>è‰²ç›²</code>)é™¤ä»¥P(<code>è‰²ç›²</code>)</p>
<p>&#x3D;51%x2%&#x2F;51%x2%+49x0.25%</p>
<h3 id="4"><a href="#4" class="headerlink" title="4."></a>4.</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021421358.webp"
                      alt="image.png|600"
                ></p>
<p>(1)å–äº†$2n-m+1$æ¬¡</p>
<p>å“ªä¸ªç©ºäº†ï¼Ÿ</p>
<p>è™½ç„¶å–å³è¾¹çš„æ¦‚ç‡æ¯”å·¦è¾¹å¤§</p>
<p>ä¹Ÿæœ‰å¯èƒ½å·¦è¾¹$(1-p)$å…ˆè¢«å–å®Œ</p>
<ol>
<li>å³è¾¹å£è¢‹ç©ºäº†<ol>
<li>å³è¾¹å–</li>
</ol>
</li>
<li>å·¦è¾¹å£è¢‹ç©ºäº†<ol>
<li>å³è¾¹å–äº†$n-m$æ¬¡</li>
<li>å·¦è¾¹å–äº†$n+1$(åˆå–äº†ä¸€æ¬¡æ‰å‘ç°ç©ºäº†)</li>
<li>ç¬¬ä¸€æ¬¡å–åˆ°å·¦è¾¹å’Œç¬¬äºŒæ¬¡å–å·¦è¾¹çš„æ¦‚ç‡ç›¸åŒ</li>
<li>$(1-p)^{(n+1)}p^{(n-m)}$æŠŠå·¦è¾¹å–å…‰çš„æ¦‚ç‡æ˜¯è¿™ä¸ªä¸œè¥¿å—ï¼Ÿ</li>
<li>$(1-p)^{(n+1)}p^{(n-m)}$è¿™ä¸ªå¼å­çš„æ„æ€å®é™…ä¸Šæ˜¯é¡ºåºå–çš„æ¦‚ç‡ï¼Œå®Œå…¨å¯ä»¥äº¤æ›¿å–,æ˜¯å¯ä»¥æ¢é¡ºåºçš„ï¼Œå·¦äºå·¦ä¹‹é—´æ˜¯ä¸è®¡é¡ºåºçš„ï¼Œä¸€ç§æƒ…å†µçš„æ¦‚ç‡æ˜¯è¿™ä¹ˆå¤šï¼Œé‚£ä¹ˆè¿™ä¹ˆå¤šæƒ…å†µå åŠ èµ·æ¥å°±æ˜¯è¦ä¹˜ä»¥æƒ…å†µæ•°ï¼Œå› ä¸ºä¸è®°é¡ºåºï¼Œæ‰€ä»¥æ˜¯ç»„åˆè€Œä¸æ˜¯æ’åˆ—ï¼ˆä¸æ¸…æ¥šçš„å¯ä»¥å›å»çœ‹[[#ç»„åˆæ•°å­¦|æ’åˆ—å’Œç»„åˆçš„åŒºåˆ«]]ï¼‰ï¼›ä¹˜ä¸ŠC(2n-m,n)å’Œä¹˜ä¸ŠC(2n-m,n-m)å…¶å®æ˜¯ä¸€å›äº‹ï¼Œæ˜¯ç›¸åŒçš„è¿™ä¹ˆå¤šæ¬¡æƒ…å†µï¼Œæ‰€ä»¥æ²¡å¿…è¦ä¹˜ä¸¤é</li>
<li>æœ€åä¸€æ¬¡ä¸€å®šæ˜¯å·¦è¾¹ï¼Œæœ€åå‘ç°çš„æ—¶å€™æ˜¯å·¦è¾¹ï¼Œå‰é¢è¿˜å·®$(2n-m)$æ¬¡å¯ä»¥ä»»æ„(<code>næ¬¡å·¦</code>,<code>(n-m)æ¬¡å³</code>)</li>
<li>$(1-p)^{(n+1)}p^{(n-m)}\cdot C(2n-m,n)$,</li>
<li>ä¸¤é—®ï¼Œæ¯é—®ä¸¤ç§æƒ…å†µï¼Œä¸€å…±æœ‰å››ç§æƒ…å†µï¼Œè¿™åªæ˜¯å…¶ä¸­ä¸€ç§æƒ…å†µï¼Œè®°å¾—ä¹˜ä¸Šç»„åˆçš„æ–¹æ¡ˆæ•°</li>
</ol>
</li>
</ol>
<p>(2)å–äº†$2n-m$æ¬¡</p>
<h3 id="5"><a href="#5" class="headerlink" title="5."></a>5.</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021434242.webp"
                      alt="image.png|600"
                ></p>
<p>æ¢ä¸æ¢éƒ½æ˜¯ä¸€æ ·çš„</p>
<h4 id="å‰ç½®ï¼šä¸‰é—¨é—®é¢˜"><a href="#å‰ç½®ï¼šä¸‰é—¨é—®é¢˜" class="headerlink" title="å‰ç½®ï¼šä¸‰é—¨é—®é¢˜"></a>å‰ç½®ï¼šä¸‰é—¨é—®é¢˜</h4><p>ç°åœ¨æœ‰ä¸‰æ‰‡é—¨ï¼Œä¸€æ‰‡é—¨åé¢æ˜¯è½¦ï¼Œå¦å¤–ä¸¤æ‰‡é—¨åé¢æ˜¯ç¾ŠğŸï¼Œä½ æƒ³è¦è½¦</p>
<p>ä½ é€‰äº†ä¸€ä¸ªé—¨ï¼Œä¸»æŒäººæ‰“å¼€å¦å¤–ä¸¤æ‰‡é—¨ä¸­çš„ä¸€ä¸ª</p>
<p>è¿™æ‰‡é—¨åé¢æ˜¯ç¾ŠğŸ</p>
<p>æ¢äº†æ˜¯ä¸‰åˆ†ä¹‹äºŒ</p>
<p>ä¸æ¢æ˜¯ä¸‰åˆ†ä¹‹ä¸€</p>
<p>å’Œæœ¬é¢˜æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p>
<p>è¿™ä¸ªé—®é¢˜å‡ºåœ¨å°æ³½å’Œä¸»æŒäººä¸Š</p>
<p>å¹¶ä¸æ˜¯åŒä¸€ä¸ªè§’è‰²</p>
<p>ä¸»æŒäººæ˜¯çŸ¥é“å“ªæ‰‡é—¨</p>
<p>ä¸»æŒäººæ²¡æœ‰ä»»ä½•æ¦‚ç‡ä¼šæ‰“å¼€è½¦çš„é‚£æ‰‡é—¨</p>
<p>æˆ‘é€‰ä¸‰ä¸ªé—¨çš„æ¦‚ç‡æ˜¯ä¸€æ ·çš„</p>
<p>æšä¸¾ä¸€ä¸‹ï¼š</p>
<ol>
<li>æˆ‘é€‰äº†ä¸€å·é—¨</li>
</ol>
<p>ä¸æ¢äºŒå·é—¨</p>
<p>ä¸æ¢äºŒå·é—¨</p>
<ol start="2">
<li>é€‰äº†äºŒå·é—¨ ä¸»æŒäººæ‰“å¼€ä¸‰å·é—¨</li>
</ol>
<p>æ¢ä¸€å·é—¨</p>
<ol start="3">
<li>é€‰äº†ä¸‰å·é—¨ï¼Œä¸»æŒäººæ‰“å¼€äºŒå·é—¨</li>
</ol>
<p>æ¢ä¸€å·é—¨</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021442648.webp"
                      alt="image.png|600"
                ></p>
<h4 id="æœ¬é¢˜"><a href="#æœ¬é¢˜" class="headerlink" title="æœ¬é¢˜"></a>æœ¬é¢˜</h4><p>ä¸€å…±å…­ç§æƒ…å†µ</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021444855.webp"
                      alt="image.png|600"
                ></p>
<p>è¿™æ˜¯ä¸€ä¸ªæ¡ä»¶æ¦‚ç‡</p>
<p>å°æ³½æ­»çš„æƒ…å†µä¸‹</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021444194.webp"
                      alt="image.png|600"
                ></p>
<p>æˆ‘æ‹¿åˆ°çš„æ˜¯å¥½è¯</p>
<p>P(<code>å¥½</code>,<code>æŒ‚</code>)é™¤ä»¥P(<code>æŒ‚</code>)</p>
<p>å°æ³½æŒ‚æ‰ï¼Œåˆ†æ¯æ˜¯å…­åˆ†ä¹‹å››</p>
<p>å°è‘±æ´»ä¸‹æ¥ï¼Œå°æ³½æŒ‚æ‰ï¼Œæ‰€ä»¥åˆ†æ¯æ˜¯å…­åˆ†ä¹‹äºŒ</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021445527.webp"
                      alt="image.png|600"
                ></p>
<p>æ¦‚ç‡é—®é¢˜ä¸­ï¼ŒçŸ¥é“çš„ä¿¡æ¯é‡ä¸ä¸€æ ·å°±ä¼šå¯¼è‡´äº‹ä»¶çš„æ¦‚ç‡ä¸ä¸€æ ·</p>
<h3 id="6"><a href="#6" class="headerlink" title="6."></a>6.</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021449897.webp"
                      alt="image.png|600"
                ></p>
<p>å“ªè¾¹æŒ‚æ‰çš„æ¦‚ç‡å°ä¸€äº›å‘¢ï¼Ÿ</p>
<h4 id="1-1"><a href="#1-1" class="headerlink" title="(1)"></a>(1)</h4><p>ç¬¬ä¸€æ¡è·¯ä¸æŒ‚æ‰çš„æ¦‚ç‡&#x3D;${99}^{100}%$</p>
<h4 id="2-1"><a href="#2-1" class="headerlink" title="(2)"></a>(2)</h4><p>ç¬¬äºŒæ¡è·¯æ¯ä¸ªçŸ³å¤´éƒ½ä¸æŒ‚æ‰çš„æ¦‚ç‡æ˜¯$99.9^{1000}%$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021454880.webp"
                      alt="image.png|600"
                ></p>
<p>è¿™ä¸¤ä¸ªè°å¤§ï¼Ÿ</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021454462.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021456219.webp"
                      alt="image.png|600"
                ></p>
<p>$$<br>\because\frac{999}{1000}&gt;\frac{998}{999}&gt;\frac{997}{998}\ldots &gt;\frac{990}{991}<br>$$</p>
<p>$$\therefore{\frac{999}{1000}}^{10}&gt;\frac{999}{1000}\cdot\frac{998}{999}\cdot\frac{997}{998}\ldots \cdot\frac{990}{991}&#x3D;\frac{990}{1000}&#x3D;\frac{99}{100}$$</p>
<h3 id="7"><a href="#7" class="headerlink" title="7."></a>7.</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021507295.webp"
                      alt="image.png|600"
                ></p>
<p>ç»è¿‡åŸç‚¹çš„æ¦‚ç‡ï¼Ÿ</p>
<p>é¦–å…ˆæœ‰ä¸‰ä¸ªé˜¶æ®µ</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021512528.webp"
                      alt="image.png|600"
                ></p>
<p>ç¬¬äºŒé˜¶æ®µçš„æœ«å°¾å’Œç¬¬ä¸‰ä¸ªé˜¶æ®µçš„èµ·ç‚¹å¾ˆå…³é”®</p>
<p>è€Œç¬¬ä¸€ä¸ªé˜¶æ®µå’Œç¬¬äºŒé˜¶æ®µæç«¯æƒ…å†µä¸‹å¯ä»¥èµ°æ— ç©·æ­¥</p>
<p>ä¹Ÿå°±æ˜¯ç¬¬ä¸€è±¡é™æ‰€æœ‰çš„ç‚¹éƒ½æœ‰å¯èƒ½</p>
<p>ä¹Ÿå°±æ˜¯$\sum^{\infty}\limits_{x&#x3D;0}$$\sum^{\infty}\limits_{y&#x3D;0}$</p>
<p>ç¬¬ä¸€é˜¶æ®µèµ°åˆ°$(x,0)$,èµ°$x$æ­¥ï¼Œ$x$æ¬¡åé¢$(1-p)$ï¼Œæ¦‚ç‡ä¸º$(1-p)^x$$\times p$</p>
<p>åœä¸‹æ¥çš„æ¦‚ç‡ï¼Ÿ</p>
<p>ä¹Ÿå°±æ˜¯æŠ›ä¸€æ¬¡æ­£é¢çš„æ¦‚ç‡$p$</p>
<p>ç¬¬äºŒé˜¶æ®µèµ°åˆ°$(x,y)$ï¼Œèµ°$y$æ­¥ï¼Œ$y$æ¬¡åé¢ï¼Œæ¦‚ç‡ä¸º$(1-p)^y\times p$</p>
<p>åœä¸‹æ¥çš„æ¦‚ç‡æ˜¯$p$</p>
<p>èµ°åˆ°$(x,y)$äº†ï¼Œè¦èµ°ç¬¬ä¸‰é˜¶æ®µï¼Œèµ°å›åŸç‚¹</p>
<p>$q$ï¼šå‘å·¦èµ°</p>
<p>$(1-q)$ï¼šå‘ä¸‹èµ°</p>
<p>è¦æŠ›$x+y$æ¬¡æ‰èƒ½å›åˆ°åŸç‚¹</p>
<p>æ°å¥½æŠ›$x$æ¬¡æ­£é¢ï¼Œ$y$æ¬¡åé¢æ‰å¯ä»¥æ°å¥½å›åˆ°åŸç‚¹</p>
<p>$q^x$*$(1-q)^y$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021519554.webp"
                      alt="image.png|600"
                ></p>
<p>ä½†æ˜¯è¿˜æœ‰ç»„åˆé¡ºåºï¼ˆä¸è®¡å†…éƒ¨é¡ºåºï¼Œè¯¦è§[[#ç»„åˆæ•°å­¦|æ’åˆ—ç»„åˆ]]å’Œ[[#4.|ç«æŸ´]]ï¼‰ï¼š$q^x$*$(1-q)^y$$\times C(x+y,x)$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021522894.webp"
                      alt="image.png|600"
                ></p>
<p>åœ¨$x+y$ä¸ªä½ç½®æ‰¾$x$:$C(x+y,x)$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021521918.webp"
                      alt="image.png|600"
                ></p>
<p>åŒ–ç®€å‘¢ï¼Ÿ</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021522343.webp"
                      alt="image.png|600"
                ></p>
<p>[[#4.ç»„åˆæ•°é—®é¢˜|æ±‚å’Œå˜å½¢]]:</p>
<ol start="4">
<li><strong>å˜åŒ–é‡æœ‰ä¸¤ä¸ªï¼š$x$å’Œ$y$ï¼Œä½†æ˜¯$x+y$éšç€$x$ï¼Œ$y$å˜åŒ–ï¼šæ¢å…ƒæ³•</strong></li>
</ol>
<p>ä»¤$t&#x3D;x+y$</p>
<p>$y&#x3D;t-x$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021526859.webp"
                      alt="image.png|600"
                ></p>
<p>æšä¸¾åˆ°$t$</p>
<p>é‚£ä¹ˆæ€ä¹ˆåˆ†ç¦»æ— å…³å˜é‡å‘¢ï¼Ÿ</p>
<p>$p^2$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021527614.webp"
                      alt="image.png|600"
                ></p>
<p>å³è¾¹è¿™ä¸ªä¸œè¥¿æ˜¯ä¸æ˜¯å¾ˆçœ¼ç†Ÿï¼Ÿ</p>
<p>[[#5.äºŒé¡¹å¼å®šç†|äºŒé¡¹å¼å®šç†]]</p>
<p>$(q+1-q)^t$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021529164.webp"
                      alt="image.png|600"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021529617.webp"
                      alt="image.png|600"
                ></p>
<p>è¿™æ˜¯ä¸€ä¸ª<strong>ç­‰æ¯”æ•°åˆ—æ±‚å’Œ</strong></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021530256.webp"
                      alt="image.png|600"
                ></p>
<p>è®¾å®ƒä¸º$x$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021530253.webp"
                      alt="image.png|600"
                ></p>
<p>ä¸¤å¼ä¸€å‡</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021531181.webp"
                      alt="image.png|600"
                ></p>
<p>$a$å°±æ˜¯$(1-p)$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021532567.webp"
                      alt="image.png|600"
                ></p>
<p>ä¸€ä¸ªé›¶ç‚¹å‡ çš„æ•°çš„æ— ç©·æ¬¡æ–¹$&#x3D;0$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021533246.webp"
                      alt="image.png|600"
                ></p>
<p>é‚£ç­”æ¡ˆå°±æ˜¯$p$</p>
<p><strong>å…¨è¿‡ç¨‹ï¼š</strong></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021533868.webp"
                      alt="image.png|600"
                ></p>
<h3 id="8"><a href="#8" class="headerlink" title="8."></a>8.</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021536097.webp"
                      alt="image.png|600"
                ></p>
<p>ä¸‰ä¸ªçŸ©é˜µéƒ½æ˜¯$n\times{n}$çš„</p>
<p>çœ‹æ¥ä¸èƒ½ç›´æ¥ä¹˜ï¼Œ$n^3$ä¼š<code>TLE</code></p>
<p>å¯ä»¥ä¸ç®—æ•´ä¸ªçŸ©é˜µï¼Œå¯ä»¥éšæœºå‡ ä¸ªä½ç½®</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021539959.webp"
                      alt="image.png|600"
                ></p>
<p>å¦‚æœæœ‰ä¸€ä¸ªä½ç½®ä¸ç›¸ç­‰ï¼Œé‚£ä¹ˆä¸€å®šä¸åŒ</p>
<p>ä½†è¿™æ ·å¯ä»¥å—ï¼Ÿ</p>
<p>å‡å¦‚åªæœ‰ä¸€ä¸ªé”™çš„</p>
<p>éšæœºåˆ°é‚£ä¸€ä¸ªé”™çš„æ¦‚ç‡æ˜¯ä¸€ç™¾ä¸‡åˆ†ä¹‹ä¸€</p>
<p>è¿™ä¸ªæ–¹æ³•è¿‡ä¸äº†</p>
<p>æœ‰æ²¡æœ‰ä»€ä¹ˆ<strong>æ­£ç¡®ç‡é«˜ä¸€ç‚¹çš„éšæœºæ–¹æ³•</strong></p>
<p>ç°åœ¨çš„é—®é¢˜æ˜¯çŸ©é˜µ$A$å’Œ$B$æ˜¯ç®—ä¸å‡ºæ¥çš„</p>
<p>é€ ä¸€ä¸ªçŸ©é˜µ$D$</p>
<p>çŸ©é˜µ$D$å¤§å°ä¸º$n\times{1}$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021543345.webp"
                      alt="image.png|600"
                ></p>
<p>çŸ©é˜µä¹˜æ³•æœ‰ç»“åˆå¾‹</p>
<p>å¯ä»¥å…ˆç®—$BD$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021544931.webp"
                      alt="image.png|600"
                ></p>
<p>åè¿‡æ¥å¯¹å—ï¼Ÿ</p>
<p>å‡å¦‚$D$å…¨æ˜¯$0$</p>
<p>æƒ³æƒ³[[NOIP-æ•°å­¦#Miller-Rabin|miller]]</p>
<p>éšæœºä¸€ä¸ª$D$</p>
<p>å‡å¦‚é€šè¿‡ä¸äº†æµ‹è¯•</p>
<p>é‚£å°±ä¸æ˜¯ï¼›å¦‚æœæ˜¯ï¼Œå°±å†éšæœºä¸€ä¸ª$D$</p>
<p>æ‹¿æ¯ä¸ªçŸ©é˜µå»ç®—ä¸€ä¸‹$ABD$å’Œ$CD$</p>
<p>æ¯ç›¸ç­‰ä¸€æ¬¡ï¼Œç›¸ç­‰çš„æ¦‚ç‡å°±ä¼šè¶³å¤Ÿé«˜</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202305021548886.webp"
                      alt="image.png|600"
                ></p>
<p>åŠ æƒæ±‚å’Œå¹¶ä¸”é”™åˆ°ä¸€èµ·çš„æ¦‚ç‡æ˜¯ç›¸å½“ä½çš„</p>
<p>ä¹Ÿå°±æ˜¯è¿™ä¸ªçš„æ­£ç¡®ç‡æ˜¯ç›¸å½“é«˜çš„</p>
<p>$n$è¶Šå¤§ï¼ŒåŠ æƒæ±‚å’Œçš„éšæœºç‡è¶Šé«˜ï¼Œæ­£ç¡®ç‡è¶Šé«˜</p>
]]></content>
      <categories>
        <category>OI</category>
        <category>Note</category>
      </categories>
  </entry>
  <entry>
    <title>ZR ä¸ƒè¿æµ‹</title>
    <url>/6289c257.html</url>
    <content><![CDATA[<h1 id="Day-1"><a href="#Day-1" class="headerlink" title="Day 1"></a>Day 1</h1><h2 id="T1"><a href="#T1" class="headerlink" title="T1"></a>T1</h2><p>ä¸€é“äºŒç»´å‰ç¼€å’Œã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202309030657655.webp"
                      alt="image.png"
                ></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">2005</span>;</span><br><span class="line"><span class="type">int</span> mp[N][N];</span><br><span class="line"><span class="type">int</span> sum[N][N];</span><br><span class="line"><span class="type">int</span> sumRigh[N][N],sumDown[N][N];</span><br><span class="line"><span class="type">char</span> a[N][N];</span><br><span class="line">string s[N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// freopen(&quot;E:/ä¸‹è½½/Compressed/problem_2633/ex_A2.in&quot;,&quot;r&quot;,stdin);</span></span><br><span class="line">    <span class="type">int</span> n, m, h, w, k;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d%d%d&quot;</span>,&amp;n,&amp;m,&amp;h,&amp;w,&amp;k);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s\n&quot;</span>, a[i] + <span class="number">1</span>);</span><br><span class="line">        s[i] = a[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; ++j) <span class="comment">// æ¯ä¸ªç‚¹åªçœ‹å®ƒçš„å³è¾¹å’Œä¸‹è¾¹</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// if(i - 1 &gt;= 1) a[i][j] += (a[i-1][j]!=a[i][j]);</span></span><br><span class="line">            <span class="comment">// if(j - 1 &gt;= 1) a[i][j] += (a[i][j-1]!=a[i][j]);</span></span><br><span class="line">            <span class="keyword">if</span>(i + <span class="number">1</span> &lt;= n) mp[i][j] += (a[i + <span class="number">1</span>][j] != a[i][j]);</span><br><span class="line">            <span class="keyword">if</span>(j + <span class="number">1</span> &lt;= m) mp[i][j] += (a[i][j + <span class="number">1</span>] != a[i][j]);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; ++j) <span class="comment">// æ¯ä¸ªç‚¹åªçœ‹å®ƒçš„å³è¾¹å’Œä¸‹è¾¹</span></span><br><span class="line">        &#123;</span><br><span class="line">            sum[i][j] = sum[i - <span class="number">1</span>][j] + sum[i][j - <span class="number">1</span>] - sum[i - <span class="number">1</span>][j - <span class="number">1</span>] + mp[i][j]; <span class="comment">// printf(&quot;sum[%d][%d] = %d\n&quot;, i, j, sum[i][j])</span></span><br><span class="line">            <span class="keyword">if</span>(a[i][j] != a[i + <span class="number">1</span>][j] &amp;&amp; i + <span class="number">1</span> &lt;= n) sumDown[i][j] = sumDown[i][j - <span class="number">1</span>] + <span class="number">1</span>; <span class="comment">// ä¸‹é¢æ€»å’Œ</span></span><br><span class="line">            <span class="keyword">else</span> sumDown[i][j] = sumDown[i][j - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; ++j)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[i][j] != a[i][j + <span class="number">1</span>] &amp;&amp; j + <span class="number">1</span> &lt;= m) sumRigh[i][j] = sumRigh[i - <span class="number">1</span>][j] + <span class="number">1</span>; <span class="comment">// å³è¾¹æ€»å’Œ</span></span><br><span class="line">            <span class="keyword">else</span> sumRigh[i][j] = sumRigh[i - <span class="number">1</span>][j];</span><br><span class="line">            <span class="comment">// printf(&quot;sum[%d][%d] = %d\n&quot;,i,j,sumRigh[i][j]);</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="type">int</span> now = <span class="number">0</span>,ans = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> x1, y1, x2, y2;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i + h - <span class="number">1</span> &lt;= n; ++i)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j + w - <span class="number">1</span> &lt;= m; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            x1 = i;</span><br><span class="line">            y1 = j;</span><br><span class="line">            x2 = i + h - <span class="number">1</span>;</span><br><span class="line">            y2 = j + w - <span class="number">1</span>;</span><br><span class="line">            now = sum[x2][y2] + sum[x1 - <span class="number">1</span>][y1 - <span class="number">1</span>] - sum[x1 - <span class="number">1</span>][y2] - sum[x2][y1 - <span class="number">1</span>];</span><br><span class="line">            <span class="comment">// for(int l = y1; l &lt;= y2; l++) // æœ€åä¸€è¡Œ</span></span><br><span class="line">            <span class="comment">//     if(a[x2][l] != a[x2 + 1][l] &amp;&amp; x2 + 1 &lt;= n) now--;</span></span><br><span class="line">            now -= sumDown[x2][y2] - sumDown[x2][y1 - <span class="number">1</span>];</span><br><span class="line">            now -= sumRigh[x2][y2] - sumRigh[x1 - <span class="number">1</span>][y2];</span><br><span class="line">            <span class="comment">// for(int l = x1; l &lt;= x2; l++)</span></span><br><span class="line">            <span class="comment">//     if(a[l][y2] != a[l][y2 + 1] &amp;&amp; y2 + 1 &lt;= m) now--;</span></span><br><span class="line">            <span class="keyword">if</span>(now &gt;= k) ans++;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="T2"><a href="#T2" class="headerlink" title="T2"></a>T2</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202309030657593.webp"
                      alt="image.png"
                ></p>
<p>è®° $b_i$ ä¸º $a_{i}$ å’Œ $a_{i-1}$ ä¹‹é—´éœ€è¦å…±åŒå‡æ‰çš„æ¬¡æ•°ï¼Œé‚£ä¹ˆå°±è¦æ»¡è¶³ $b_{i-1}+b_i&#x3D;a_i$ã€‚</p>
<p>ç„¶åè€ƒè™‘æ¯ä¸ª $b_i$ï¼ŒæŠŠå®ƒå˜æˆä¸€ä¸ª $\pm b_0+c$ çš„å½¢å¼ï¼Œå¦‚æœ $n$ æ˜¯å¥‡æ•°ï¼Œé‚£ä¹ˆ $b_{n-1}&#x3D;b_0+c$ ï¼Œç„¶å $b_0+b_{n-1}&#x3D;k$ï¼Œè¿™æ ·å°±å¯ä»¥è§£å‡º $b_0$ ï¼Œç„¶åæ±‚å…¶å®ƒçš„ $b_i$ï¼Œå¦‚æœç®—å‡ºæœ‰ç»“æœå°äºé›¶æˆ–è€…æ˜¯å°æ•°ï¼Œé‚£å°±æ˜¯æ— è§£ï¼Œå¦åˆ™æœ‰è§£ã€‚</p>
<p>å¦‚æœ $n$ æ˜¯å¶æ•°ï¼Œè¿™æ—¶å€™ $b_{n-1}&#x3D;-b_0+c$ï¼Œ$b_0+b_{n-1}&#x3D;k$ï¼Œè¿™æ—¶å€™å¦‚æœå¸¦å…¥çš„è¯å°±ä¼šéƒ½æ¶ˆæ‰ä»€ä¹ˆä¹Ÿè§£ä¸å‡ºæ¥ï¼Œè¿™æ—¶å€™ $c$ å’Œ $k$ æ˜¯ç›¸åŒçš„ï¼Œ</p>
<p>$\pm b_i&#x3D;b_0+c,b_i\ge0$ è¿™æ ·å°±å¯ä»¥æŠŠ $b_0$ è§£å‡ºä¸€ä¸ªèŒƒå›´ï¼Œå¦‚æœè¿™ä¸ªèŒƒå›´å†…æœ‰éè´Ÿæ•´æ•°è§£çš„è¯ï¼Œé‚£å°±æ»¡è¶³æ¡ä»¶ï¼Œå¦åˆ™æ— è§£ã€‚</p>
<p>è€ƒåœºå°±å†™äº†ä¸ª $sum$ æ˜¯å¦ä¸ºå¶æ•°çš„ç‰¹åˆ¤ğŸ¤£ã€‚</p>
<h2 id="T3"><a href="#T3" class="headerlink" title="T3"></a>T3</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202309030742707.webp"
                      alt="image.png"
                ></p>
<p>$f_i&#x3D;\sum_{j\in S} f_{i-j}\times (i-j+1)$ï¼Œå¯ä»¥ç”¨çŸ©é˜µä¹˜æ³•ç»´æŠ¤è¿™ä¸ªåäº”è¡Œçš„çŸ©é˜µã€‚</p>
<p>è€ƒè™‘æ„é€ å·¦è¾¹çš„çŸ©é˜µï¼Œ</p>
<p>æ¯”å¦‚ 1 å­˜åœ¨çš„è¯ï¼Œé‚£ä¹ˆç¬¬ä¸€è¡Œç¬¬ä¸€åˆ—å°±æ˜¯ $i$ï¼Œå› ä¸º $f_i&#x3D;f_{i-1}\times i$ã€‚</p>
<p>ç„¶åå­˜åœ¨çš„è¯å°±å¡« $i-k+1$ ï¼Œä¸ç„¶å°±å¡« 0ï¼Œç„¶åä¸‹é¢å‡ è¡Œè¯¥ä½å­˜åœ¨å°±å¾€åå¡«ä¸€ä½ 1ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯é€’æ¨ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202309030729551.webp"
                      alt="image.png"
                ></p>
<p>è¿™æ—¶å€™å¯ä»¥å°è¯•ä½¿ç”¨çŸ©é˜µå¿«é€Ÿå¹‚ï¼Œä½†æ˜¯è¿™é‡Œçš„æ¯æ¬¡è¦ä¹˜çš„çŸ©é˜µéƒ½ä¸ç›¸åŒï¼Œæ‰€ä»¥ä¸å¯ä»¥é€šè¿‡çŸ©é˜µä¹˜æ³•æ¥ç»´æŠ¤ï¼Œä½†æ˜¯è¿™ä¸ªæ¨¡æ•°éå¸¸ç‰¹æ®Šï¼Œæ¯”è¾ƒå°ï¼Œå¦‚æœåœ¨çŸ©é˜µé‡ŒæŠŠæ¯ä¸ªæ•°éƒ½æ¨¡ä¸€ä¸ª 2027ï¼Œè¿™ä¸ªçŸ©é˜µç¬¬ä¸€è¡Œå…¶å®æ˜¯å¾ªç¯çš„ï¼Œä¸‹é¢æ˜¯ä¸å˜çš„ï¼Œ$n$ å¾ˆå¤§çš„æƒ…å†µä¸‹ä¼šå½¢æˆå¾ˆå¤šä¸ªå¾ªç¯èŠ‚ï¼Œæ¯ä¸ªå¯¹åº”ä¸€ä¸ªçŸ©é˜µä¹˜æ³•ï¼Œç„¶ååé¢å¯èƒ½ä¼šå‰©ä¸€äº›ï¼Œä½†ä¹Ÿä¸ä¼šè¶…è¿‡ 2027ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202309030738609.webp"
                      alt="09XDUSI%$7_RX3%Y1K2(NYS.png"
                ></p>
<p>ç”±äºçŸ©é˜µä¹˜æ³•æ»¡è¶³ç»“åˆå¾‹ï¼Œæ‰€ä»¥å¯ä»¥å…ˆå¤„ç†ä¸€æ®µå¾ªç¯èŠ‚ï¼Œç„¶åå†å¤„ç†çŸ©é˜µå¿«é€Ÿå¹‚ï¼Œæœ€åå†åŠ ä¸Šå¤šå‡ºæ¥çš„çŸ©é˜µã€‚</p>
<p>é€’æ¨å¼ä¹Ÿå¯ä»¥å†™æˆï¼š</p>
<p>$$<br>f_i&#x3D;i\times{\sum f_{i-j}}<br>$$<br>å¦‚æœè¿™æ ·é€’æ¨å‡ºæ¥çš„è¯å°±æ˜¯ $\dfrac{f_{n}}{n}$ï¼Œå› ä¸ºæœ€åä¸€ä¸ªä¸éœ€è¦è€ƒè™‘ï¼Œ</p>
<p>ä½†æ˜¯å¦‚æœ $n$ æ˜¯ 2027 çš„å€æ•°çš„è¯ï¼Œå°±ä¸èƒ½ç›´æ¥æ¨åˆ°ç¬¬ $n$ é¡¹ï¼Œéœ€è¦æ±‚å‡º $n-1$ é¡¹å†æ±‚ç¬¬ $n$ é¡¹ã€‚</p>
<p>è€ƒåœºä»£ç ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod = <span class="number">2027</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e8</span> + <span class="number">3e7</span>;</span><br><span class="line">ll f[N];</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; s;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// freopen(&quot;E:/ä¸‹è½½/Compressed/problem_2635/ex_C2.in&quot;,&quot;r&quot;,stdin);</span></span><br><span class="line">    <span class="type">int</span> n,m;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> a;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a);</span><br><span class="line">        s.<span class="built_in">emplace_back</span>(a);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(s.<span class="built_in">begin</span>(),s.<span class="built_in">end</span>());</span><br><span class="line">    f[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;j : s)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> v = i + j;</span><br><span class="line">            <span class="keyword">if</span>(v &gt; n) <span class="keyword">continue</span>;</span><br><span class="line">            f[v] += f[i] * (i + <span class="number">1</span>) % mod;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>, (f[n] % mod));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>æˆ‘è¿™æ ·é€’æ¨æœ€åå°±ä¸ç”¨ä¹˜ä»¥ä¸€ä¸ª $n$ã€‚</p>
<h2 id="T4"><a href="#T4" class="headerlink" title="T4"></a>T4</h2><blockquote>
<p>äºŒåˆ†ç­”æ¡ˆ</p>
</blockquote>
<p>å¾€é‡Œæ”¾æ•°ï¼Œä½¿å¾—æ¯ä¸¤ä¸ªæ•°ä¹‹é—´çš„å·®éƒ½å°äºç­‰äº $k$ æ˜¯å¦å¯è¡Œã€‚</p>
<p>æ¯ä¸ªæ•°å¯ä»¥å¾€å·¦æ”¾å’Œå¾€å³æ”¾ï¼Œè‚¯å®šæ˜¯æŠŠè¿™ä¸ªåºåˆ—åˆ†æˆå¥½å¤šæ®µï¼Œä¸€äº›æ˜¯å¾€å·¦æ”¾ä¸€äº›æ˜¯å¾€å³æ”¾ï¼Œæ‰€ä»¥æ¯ä¸€æ®µå°±å¯ä»¥ç”¨ RMQ æ±‚ä¸€ä¸ªå·®çš„æœ€å¤§å€¼ï¼Œç”±äºåˆ†ç•Œç‚¹çš„ä½ç½®çŸ¥é“ï¼Œå‰©ä¸‹çš„ä¸œè¥¿å°±å¾ˆå¥½ç»´æŠ¤ï¼Œè€Œä¸”ç›¸é‚»ä¸¤ä¸ªåˆ†ç•Œç‚¹çš„æ•°å·®ä¹Ÿä¸èƒ½è¶…è¿‡ $k$ã€‚</p>
<p>è®° $dp_i$ è¡¨ç¤ºä»¥ $i$ å’Œ $i+1$ ä¸ºä¸€ä¸ªåˆ†ç•Œç‚¹æ—¶æ˜¯å¦å¯è¡Œã€‚</p>
<p>å®ƒå¯ä»¥ä»å‰é¢æœ€è¿œçš„ä¸€ä¸ª $j$ æ»¡è¶³ $f_j&#x3D;1$ è½¬ç§»è€Œæ¥ï¼Œ</p>
<p>è¿™ä¸ª $j$ è¦æ»¡è¶³ $j\sim{i}$ è¿™äº›æ•°çš„å·®çš„æœ€å¤§å€¼å°äºç­‰äº $k$ã€‚</p>
<p>å¹¶ä¸” $a_j-a_{i+1}\le{x}$ï¼Œè¿™æ˜¯å› ä¸ºå¯ä»¥æŠŠåŸåºåˆ—åˆ†ä¸ºè‹¥å¹²æ®µï¼Œè¦ä¹ˆæ˜¯å·¦è¦ä¹ˆæ˜¯å³ï¼Œä¸¤ä¸ªç›¸é‚»çš„åˆ†ç•Œç‚¹ç”±äºæ˜¯æ”¾åœ¨åŒä¸€ç«¯ï¼Œæ‰€ä»¥å®ƒä»¬çš„ç«¯ç‚¹ä¹‹é—´ä¹Ÿéœ€è¦æ»¡è¶³æ¡ä»¶ã€‚</p>
<p>æ»¡è¶³æ¡ä»¶çš„ $a_j$ æ˜¯ä¸€æ®µåŒºé—´ï¼Œä¹Ÿå°±æ˜¯ $a_{i+1}-k\sim{a_{i+1}+k}$ã€‚</p>
<p>è€Œæ»¡è¶³ä»¥ $i$ ä¸ºå³ç«¯ç‚¹çš„åç¼€ä¸”æ»¡è¶³è¿™æ®µåç¼€æœ€å¤§å·®å°äºç­‰äº $k$ å¯ä»¥ç”¨å€å¢æ±‚å‡ºæœ€å°çš„ $j$ ï¼Œç„¶åç”¨çº¿æ®µæ ‘ç»´æŠ¤åˆæ³•çš„åˆ†ç•Œç‚¹ï¼ŒæŸ¥è¯¢ $a_j$ åœ¨æŸæ®µåŒºé—´ä¸­ $j$ çš„æœ€å¤§å€¼å³å¯ã€‚</p>
<p>ä½†æ˜¯ç”±äºå¸¸æ•°é—®é¢˜ï¼Œä¼šè¢«å¡åˆ° 80 åˆ†ã€‚</p>
<hr>
<p>ä¸€ç™¾åˆ†ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202309031923691.webp"
                      alt="image.png"
                ></p>
<p>å®é™…ä¸Šå°±æ˜¯æ²¡æœ‰æ”¾ï¼Œåªæ˜¯ä¸æ–­æ‰©å±•è¿™ä¸¤æ®µåŒºé—´ï¼Œæ¯æ¬¡åˆ¤æ–­ä¸€ä¸‹èŒƒå›´å³å¯ã€‚</p>
<hr>
<p>ä¸ä¼šç¼–äº†ã€‚</p>
<p>è€ƒåœºä»£ç ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e6</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> a[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    deque&lt;<span class="type">int</span>&gt; q;</span><br><span class="line">    q.<span class="built_in">push_back</span>(a[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i] - q.<span class="built_in">front</span>() &lt;= a[i] - q.<span class="built_in">back</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[i] - q.<span class="built_in">back</span>() &lt;= x) q.<span class="built_in">push_back</span>(a[i]);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(a[i] - q.<span class="built_in">front</span>() &lt;= x) q.<span class="built_in">push_front</span>(a[i]);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a[i] - q.<span class="built_in">front</span>() &gt; a[i] - q.<span class="built_in">back</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[i] - q.<span class="built_in">front</span>() &lt;= x) q.<span class="built_in">push_front</span>(a[i]);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(a[i] - q.<span class="built_in">back</span>() &lt;= x) q.<span class="built_in">push_back</span>(a[i]);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// freopen(&quot;E:/ä¸‹è½½/Compressed/problem_2636/ex_D2.in&quot;,&quot;r&quot;,stdin);</span></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="type">int</span> l = <span class="number">0</span>,r = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> minn = <span class="number">0x3f3f3f3f</span>,maxn = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">        minn = <span class="built_in">min</span>(minn, a[i]);</span><br><span class="line">        maxn = <span class="built_in">max</span>(maxn, a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    r = maxn - minn;</span><br><span class="line">    <span class="keyword">while</span>(l &lt; r)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">check</span>(mid)) r = mid;</span><br><span class="line">        <span class="keyword">else</span> l = mid + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, r);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>ç”¨äº†ä¸€ä¸ª deque è¿›è¡Œè´ªå¿ƒæ¨¡æ‹Ÿï¼Œç”šè‡³æœ‰ 55 åˆ†ã€‚</p>
<h1 id="Day2"><a href="#Day2" class="headerlink" title="Day2"></a>Day2</h1><h2 id="T1-1"><a href="#T1-1" class="headerlink" title="T1"></a>T1</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/FallingSakura/Source@main/img/202309101131130.webp"
                      alt="image.png"
                ></p>
<p>é¢˜æ„ç®€åŒ–ï¼š</p>
<p>ç»™ä½ ä¸€ä¸ªåºåˆ—ï¼Œé—®æœ‰å¤šå°‘å¯¹æ•°åœ¨æ¨¡ 200 æ„ä¹‰ä¸‹ç›¸ç­‰ã€‚</p>
<hr>
<p>é‚£å°±å¯¹ $0\sim200$ å†…æ¯ä¸€ä¸ªæ•°å»ºä¸€ä¸ªæ¡¶ï¼Œç­”æ¡ˆå°±æ˜¯ $\sum_{i&#x3D;1}^n {i\choose2}$ã€‚</p>
<p>è®°å¾—å¼€ <code>long long</code>ã€‚</p>
<p>ä»£ç ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">2e5</span> + <span class="number">7</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a[N];</span><br><span class="line">ll ans;</span><br><span class="line"><span class="type">int</span> sum[N][<span class="number">205</span>];</span><br><span class="line">ll c[N][<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>; i &lt;= <span class="number">200000</span>; ++i)</span><br><span class="line">        c[i][<span class="number">2</span>] = <span class="number">1ll</span> * i * (i - <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">        <span class="keyword">if</span>(a[i] &lt; <span class="number">0</span>) a[i] += ((-a[i]/<span class="number">200</span>)<span class="number">+1</span>)*<span class="number">200</span>;</span><br><span class="line">        a[i] %= <span class="number">200</span>;</span><br><span class="line">        sum[i][a[i]]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">init</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">200</span>; j++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = n; i &gt;= <span class="number">1</span>; --i) </span><br><span class="line">            sum[i][j] += sum[i + <span class="number">1</span>][j];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">200</span>; ++i)</span><br><span class="line">        ans += c[sum[<span class="number">1</span>][i]][<span class="number">2</span>];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="T2-1"><a href="#T2-1" class="headerlink" title="T2"></a>T2</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/FallingSakura/Source@main/img/202309101139779.webp"
                      alt="image.png"
                ></p>
<p>è€ƒè™‘è´ªå¿ƒåšæ³•ï¼š</p>
<p>æœ€å°ï¼š</p>
<p>ä»å·¦å¾€å³è€ƒè™‘ï¼Œè¿™ä¸ªäººå¦‚æœå·¦è¾¹å³è¾¹è¿˜æœ‰è‡ªå·±çš„ä½ç½®éƒ½æ²¡æœ‰äººï¼Œé‚£ä¹ˆè‚¯å®šæ˜¯å¾€å³ä¼šæ›´ä¼˜ï¼Œå› ä¸ºå¾€å³å¯èƒ½ä¼šä¸ä¸‹ä¸€ä¸ªäººç›¸é‡ï¼Œè€Œå¾€å·¦æˆ–è€…ä¸åŠ¨æ¦‚ç‡å°±ä¼šå°ã€‚</p>
<p>è€Œå¯¹äºå‘¨å›´æœ‰äººçš„æƒ…å†µï¼Œé‚£å°±ç›´æ¥è¿‡å»å³å¯ã€‚</p>
<hr>
<p>æœ€å¤šï¼š</p>
<p>æœ€å°‘çš„æ—¶å€™æˆ‘ä»¬å°½é‡è®©ä¸€ä¸ªå‘¨å›´éƒ½æ²¡äººçš„äººå¾€å³é ï¼Œé‚£ä¹ˆæœ€å¤šä¸ä»–ç›¸åï¼Œåœ¨ä¸ä¸ä»–äººé‡åˆçš„æƒ…å†µä¸‹ï¼Œä¼˜å…ˆå¾€å·¦é ã€‚</p>
<hr>
<p>DP çš„è¯é‚£å°±ä»¤ $f_{i,0&#x2F;1&#x2F;2}$ ä»£è¡¨è€ƒè™‘å®Œäº†å‰ $i$ ä¸ªä½ç½®å¹¶ä¸”ç¬¬ $i$ ä¸ªä½ç½®æ˜¯å‘å·¦&#x2F;ä¸åŠ¨&#x2F;å‘å³ï¼Œçš„æœ€å°&#x2F;æœ€å¤§æˆ¿å±‹æ•°ï¼Œæœ¬äººå½“æ—¶å°±è¿™ä¹ˆå†™çš„ä½†æ˜¯è½¬ç§»æ–¹ç¨‹çœ‹ä¸Šå»å¾ˆéº»çƒ¦å°±æ²¡æœ‰ä¿¡å¿ƒæ¨ä¸‹å»ï¼Œå†™äº†ä¸€åŠ DP ä¸€åŠè´ªå¿ƒï¼Œå…‰è£æŒ‚åˆ†ã€‚</p>
<h2 id="T3-1"><a href="#T3-1" class="headerlink" title="T3"></a>T3</h2><blockquote>
<p>CF1735C</p>
</blockquote>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/FallingSakura/Source@main/img/202309101202567.webp"
                      alt="image.png"
                ></p>
<p>æœ‰ä¸¤ä¸ªä¸² $S$ å’Œ $T$ï¼Œ å­˜åœ¨ $S\to T$ çš„ä¸€ä¸ªæ˜ å°„å…³ç³»ï¼Œæ˜ å°„å…³ç³»ä¸ºå­—æ¯ä¹‹é—´çš„ä¸€ä¸ªç¯ï¼Œå¤§å°ä¸º 26ã€‚</p>
<p>ç°åœ¨ç»™å®š $T$ï¼Œ æ±‚å­—å…¸åºæœ€å°çš„ $S$ã€‚</p>
<p>å¯ä»¥è€ƒè™‘è´ªå¿ƒçš„åšæ³•ï¼Œä»å‰å¾€åéå†ï¼Œå¯¹äºæ¯ä¸ªç¬¬ä¸€æ¬¡å‡ºç°çš„å­—æ¯ï¼Œå¯»æ‰¾å®ƒå¯¹åº”çš„åˆæ³•çš„ä¸”å­—å…¸åºæœ€å°çš„ä¸€ä¸ªæ˜ å°„ã€‚</p>
<p>è¿™é‡Œåˆæ³•æŒ‡çš„æ˜¯ä¸èƒ½æå‰å½¢æˆç¯ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½åœ¨å¤§å° $&lt;26$ ä¹‹å‰å°±å½¢æˆäº†ç¯ï¼Œæ¯”å¦‚ $\text{ab}$ ä¸èƒ½ä¸ $\text{ba}$ å»ºç«‹ä¸€ä¸ªæ˜ å°„å…³ç³»ï¼Œå› ä¸ºå¦‚æœè¿™æ · $a$ å°±æ˜¯ $b$ çš„ä¸‹ä¸€ä¸ªï¼Œ$b$ ä¹Ÿæ˜¯ $a$ çš„ä¸‹ä¸€ä¸ªï¼Œè¿™æ ·å°±æ„æˆäº†ä¸€ä¸ªäºŒå…ƒç¯ï¼Œå…¶å®ƒå…ƒç´ æ²¡æœ‰åŠæ³•æ’å…¥ï¼Œä¹Ÿå°±ä¸åˆæ³•ã€‚</p>
<p>å½“å‰ç¯çš„å¤§å°å¯ä»¥æ¯æ¬¡å‘å‰è·³ç»Ÿè®¡é•¿åº¦ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¹¶æŸ¥é›†ç»´æŠ¤å¤§å°ã€‚</p>
<p>ä»£ç ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">2e5</span><span class="number">+7</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span> s[N];</span><br><span class="line">map&lt;<span class="type">char</span>,<span class="type">char</span>&gt; mp, az;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> T;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;T);</span><br><span class="line">	<span class="keyword">while</span>(T--)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="type">int</span> n;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, s + <span class="number">1</span>);</span><br><span class="line">		mp.<span class="built_in">clear</span>();</span><br><span class="line">		az.<span class="built_in">clear</span>();</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) <span class="comment">// ä¸ºæ¯ä¸ªå­—ç¬¦å¯»æ‰¾æ˜ å°„</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(mp[s[i]]) <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, mp[s[i]]);</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">for</span>(<span class="type">char</span> t= <span class="string">&#x27;a&#x27;</span> ; t &lt;= <span class="string">&#x27;z&#x27;</span>; t++)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="keyword">if</span>(t == s[i]) <span class="keyword">continue</span>;</span><br><span class="line">					<span class="keyword">if</span>(!az[t]) <span class="comment">// tè¿˜æ²¡æœ‰æ˜ å°„å¯¹è±¡</span></span><br><span class="line">					&#123;</span><br><span class="line">						<span class="type">char</span> tt = t;</span><br><span class="line">						<span class="type">int</span> cnt = <span class="number">0</span>; </span><br><span class="line">						<span class="keyword">while</span>(tt &amp;&amp; tt != s[i])</span><br><span class="line">						&#123;</span><br><span class="line">							cnt++;</span><br><span class="line">							tt=mp[tt]; </span><br><span class="line">						&#125;</span><br><span class="line">						<span class="keyword">if</span>(tt == s[i] &amp;&amp; cnt &lt; <span class="number">25</span>) <span class="keyword">continue</span>; <span class="comment">// åˆ¤æ–­ä¸åˆæ³•æƒ…å†µ</span></span><br><span class="line">						<span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, t); <span class="comment">// å¯ä»¥çš„è¯é‚£ä¹ˆtå°±æ˜¯å­—å…¸åºæœ€å°çš„æ˜ å°„</span></span><br><span class="line">						mp[s[i]] = t;</span><br><span class="line">						az[t] = mp[s[i]];</span><br><span class="line">						<span class="keyword">break</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="T4-1"><a href="#T4-1" class="headerlink" title="T4"></a>T4</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/FallingSakura/Source@main/img/202309101217268.webp"
                      alt="image.png"
                ></p>
<p>é¦–å…ˆæš´åŠ›å¯ä»¥æƒ³åˆ°è·‘ Floyed å…¨æºæœ€çŸ­è·¯ï¼Œæšä¸¾ä¸€ä¸ªä¸­é—´ç‚¹ï¼Œå¤æ‚åº¦ $O(n^3)$</p>
<hr>
<p>$1\to u$ çš„è·¯å¾„å…¶å®åˆ†ä¸ºä¸¤æ®µï¼Œ$1\to p+u\to p$ï¼Œæˆ‘ä»¬è¦æ±‚è¿™ä¸ªè·¯å¾„çš„æœ€å°å€¼ï¼Œ</p>
<p>ç”±äºååŠéƒ¨åˆ†è¾¹æ˜¯åå‘çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å»ºåå‘å›¾ï¼ˆåˆ†å±‚å›¾ï¼‰ï¼Œç„¶ååœ¨åŸå›¾å’Œåå‘å›¾ä¹‹é—´ä¸¤ä¸ªç¼–å·ç›¸åŒçš„ç‚¹ä¹‹é—´å»ºç«‹ä¸€æ¡è¾¹æƒä¸º 0 çš„è¾¹ï¼Œç„¶åä»¥åŸå›¾çš„ 1 å·ç‚¹ä¸ºåŸç‚¹ï¼Œä»¥åå‘å›¾ä¸­çš„æ¯ä¸€ä¸ªç‚¹ä¸ºç»ˆç‚¹è·‘æœ€çŸ­è·¯å³å¯ã€‚</p>
<p>å¤æ‚åº¦å°±æ˜¯ Dijkstra çš„å¤æ‚åº¦ã€‚</p>
<h1 id="Day3"><a href="#Day3" class="headerlink" title="Day3"></a>Day3</h1><h2 id="T1-2"><a href="#T1-2" class="headerlink" title="T1"></a>T1</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202309161947002.webp"
                      alt="image.png"
                ></p>
<p>éšä¾¿æ‰‹æ“å‡ ä¸ªæ ·ä¾‹æˆ‘ä»¬å‘ç°è¿™ä¸ªåºåˆ—é‡Œåªæœ‰ 1 å’Œ 2ã€‚</p>
<p>é‚£ä¹ˆæ€è·¯å°±æ˜¯ï¼š</p>
<p>ä»å·¦å‘å³éå†åŒºé—´ï¼Œè®°å½• 1 çš„ä¸ªæ•°ï¼Œæ‰¾å‡ºæ‰€æœ‰ 2 çš„è¿ç»­åŒºé—´ï¼Œå¦‚æœè¿™ä¸ªåŒºé—´çš„é•¿åº¦æ˜¯å¥‡æ•°ï¼Œé‚£ä¹ˆå°±æŠŠç­”æ¡ˆåŠ ä¸Š $(len+1)&#x2F;2$ï¼ŒåŒæ—¶åˆ¤æ–­å·¦ç«¯ç‚¹çš„å·¦è¾¹æ˜¯å¦ä¸º 1ï¼Œå¦‚æœæ˜¯ï¼Œå°±è¦æŠŠå®ƒå‡å»ï¼Œç„¶åæŠŠè¿™ä¸€ä½çš„ 1 ç»™å‡å»ã€‚</p>
<p>å¦‚æœè¿™ä¸ª 2 çš„åŒºé—´é•¿åº¦æ˜¯å¥‡æ•°ï¼Œé‚£ä¹ˆå°±æŠŠç­”æ¡ˆåŠ ä¸Š $len&#x2F;2$ï¼ŒåŒæ—¶åˆ¤æ–­å·¦ç«¯ç‚¹çš„å·¦è¾¹ 1 ç»™å‡å»ï¼ŒåŒæ—¶æŠŠ 1 çš„ä¸ªæ•°åŠ ä¸€ï¼Œå› ä¸ºæˆ‘ä»¬æŠŠæœ€åä¸€ä¸ªäºŒçœ‹æˆ 1ï¼Œå‡å»ä»¥åå®ƒç›¸å½“äºä¸å˜ï¼Œä¹Ÿå°±æ˜¯æŠŠè¿™ä¸ª 2 ç»™å˜æˆ 1ã€‚</p>
<p>ä»£ç ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">3e7</span> + <span class="number">7</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// int a[] = &#123;0, 1, 2, 2, 1, 2, 2, 2, 1&#125;;</span></span><br><span class="line"><span class="type">int</span> a[N];</span><br><span class="line"><span class="type">int</span> n, s1, s2;</span><br><span class="line">ll s3;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Gen</span><span class="params">(<span class="type">int</span> n, <span class="type">unsigned</span> s1, <span class="type">unsigned</span> s2, <span class="type">unsigned</span> s3)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)&#123;</span><br><span class="line">        s1 ^= s3;</span><br><span class="line">        s3 += <span class="number">3055373123u</span>;</span><br><span class="line">        a[i] = (<span class="number">1</span> &lt;&lt; ((s1 &gt;&gt; s2) &amp; <span class="number">1</span>));</span><br><span class="line">        s2 = (s2 ^ s3) &amp; <span class="number">31</span>;</span><br><span class="line">        s3 = (s3 &gt;&gt; s2) | ((s3 &lt;&lt; (<span class="number">31</span> ^ s2)) &lt;&lt; <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d%lld&quot;</span>, &amp;n, &amp;s1, &amp;s2, &amp;s3);</span><br><span class="line">    <span class="built_in">Gen</span>(n, s1, s2, s3);</span><br><span class="line">    <span class="type">int</span> l = <span class="number">0</span>, r = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> sum1 = <span class="number">0</span>;</span><br><span class="line">    ll ans = <span class="number">0</span>;</span><br><span class="line">    <span class="type">bool</span> fir = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i] == <span class="number">2</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(fir)</span><br><span class="line">            &#123;</span><br><span class="line">                fir = <span class="literal">false</span>;</span><br><span class="line">                l =  r = i;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                r = i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(a[i] == <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            sum1++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>((a[i] == <span class="number">1</span> || i == n) &amp;&amp; !fir) <span class="comment">// ç»“æŸä¸€æ®µ 2 çš„åŒºé—´</span></span><br><span class="line">        &#123;</span><br><span class="line">            fir = <span class="literal">true</span>;</span><br><span class="line">            <span class="type">int</span> len = r - l + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(len &amp; <span class="number">1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                ans += (len + <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">                <span class="keyword">if</span>(a[l - <span class="number">1</span>] == <span class="number">1</span>) sum1--;</span><br><span class="line">                <span class="keyword">if</span>(a[i] == <span class="number">1</span>) sum1--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                ans += len / <span class="number">2</span>;</span><br><span class="line">                <span class="keyword">if</span>(a[l - <span class="number">1</span>] == <span class="number">1</span>) sum1--;</span><br><span class="line">                sum1++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ans += (sum1 + <span class="number">2</span>) / <span class="number">3</span>;</span><br><span class="line">    <span class="comment">// printf(&quot;%d\n&quot;, sum1);</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1 2 2 1 1 ans = 2</span></span><br><span class="line"><span class="comment">// 1 2 2 1 1 1 2 2 2 1 ans = 4</span></span><br><span class="line"><span class="comment">// 2 2 2 2 ans = 3</span></span><br><span class="line"><span class="comment">// 1 2 2 1 2 2 2 1 ans = 4</span></span><br></pre></td></tr></table></figure></div>

<h2 id="T2-2"><a href="#T2-2" class="headerlink" title="T2"></a>T2</h2><blockquote>
<p>ä¸€çœ¼æœ€çŸ­è·¯</p>
</blockquote>
<h2 id="T3-2"><a href="#T3-2" class="headerlink" title="T3"></a>T3</h2><h2 id="T4-2"><a href="#T4-2" class="headerlink" title="T4"></a>T4</h2><h1 id="Day4"><a href="#Day4" class="headerlink" title="Day4"></a>Day4</h1><h2 id="T1-3"><a href="#T1-3" class="headerlink" title="T1"></a>T1</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202309242115447.webp"
                      alt="image.png"
                ></p>
<p>æ™®é€šæ”»å‡»ç»™åˆ°è¡€é‡æœ€å°çš„ï¼Œå†ç°æ”»å‡»ç»™åˆ°è¡€é‡æœ€å¤§çš„ã€‚</p>
<p>æœ‰ä¸ªä¸œè¥¿å«åš [[æ•°æ®ç»“æ„#Multiset|multiset]]ï¼Œå¯ä»¥åœ¨ log çš„æ—¶é—´å†…ç»´æŠ¤ä¸€ä¸ªæœ‰åºçš„åºåˆ—ã€‚</p>
<h2 id="T2-3"><a href="#T2-3" class="headerlink" title="T2"></a>T2</h2><h2 id="T3-3"><a href="#T3-3" class="headerlink" title="T3"></a>T3</h2><h2 id="T4-3"><a href="#T4-3" class="headerlink" title="T4"></a>T4</h2>]]></content>
      <categories>
        <category>ACM</category>
      </categories>
      <tags>
        <tag>Training</tag>
      </tags>
  </entry>
  <entry>
    <title>å›¾è®º</title>
    <url>/34778.html</url>
    <content><![CDATA[<h1 id="åŸºç¡€æ¦‚å¿µ"><a href="#åŸºç¡€æ¦‚å¿µ" class="headerlink" title="åŸºç¡€æ¦‚å¿µ"></a>åŸºç¡€æ¦‚å¿µ</h1><ul>
<li>åº¦ï¼ˆDegreeï¼‰ï¼šä¸€ä¸ªé¡¶ç‚¹ä¸Šçš„åº¦æ˜¯æŒ‡ä¸è¯¥é¡¶ç‚¹ç›¸å…³è”çš„è¾¹çš„æ¡æ•°ï¼Œé¡¶ç‚¹$v$çš„åº¦è®°ä½œ$d(v)$ã€‚</li>
<li>å…¥åº¦ï¼ˆIn-degreeï¼‰å’Œå‡ºåº¦ï¼ˆOut-degreeï¼‰ï¼šå¯¹äºæœ‰å‘å›¾æ¥è¯´ï¼Œä¸€ä¸ªé¡¶ç‚¹çš„åº¦å¯ç»†åˆ†ä¸ºå…¥åº¦å’Œå‡ºåº¦ã€‚é¡¶ç‚¹çš„å…¥åº¦æ˜¯æŒ‡ä¸å…¶å…³è”çš„å„è¾¹ä¹‹ä¸­ï¼Œä»¥å…¶ä¸ºç»ˆç‚¹çš„è¾¹æ•°ï¼›å‡ºåº¦åˆ™æ˜¯ç›¸å¯¹çš„æ¦‚å¿µï¼ŒæŒ‡ä»¥è¯¥é¡¶ç‚¹ä¸ºèµ·ç‚¹çš„è¾¹æ•°ã€‚</li>
<li>è‡ªç¯ï¼ˆLoopï¼‰ï¼šè‹¥ä¸€æ¡è¾¹çš„ä¸¤ä¸ªé¡¶ç‚¹ä¸ºåŒä¸€ä¸ªé¡¶ç‚¹ï¼Œåˆ™æ­¤è¾¹ç§°ä¹‹ä¸ºè‡ªç¯ã€‚</li>
<li>è·¯å¾„ï¼ˆPathï¼‰ï¼šåœ¨å›¾ä¸Šéšä¾¿èµ°ï¼Œèµ°å‡ºæ¥çš„å°±æ˜¯è·¯å¾„ã€‚</li>
<li>ç¯ï¼šèµ·ç‚¹&#x3D;ç»ˆç‚¹çš„è·¯å¾„ã€‚</li>
<li>ç®€å•è·¯å¾„ï¼šæ¯ä¸ªç‚¹è‡³å¤šèµ°ä¸€æ¬¡çš„è·¯å¾„ï¼ˆç‚¹ä¸èƒ½é‡å¤ï¼Œè¾¹å¯ä»¥ï¼‰ã€‚</li>
<li>ç®€å•ç¯ï¼šå»æ‰èµ·ç‚¹ç»ˆç‚¹åå˜æˆç®€å•è·¯å¾„ï¼ˆèµ·ç‚¹ç»ˆç‚¹å¯ä»¥èµ°ä¸¤éï¼‰ã€‚</li>
<li>å®Œå…¨å›¾ï¼šæ‰€æœ‰ç‚¹ä¹‹é—´éƒ½æœ‰è¾¹ã€‚è¯¥å›¾æœ‰$n$ä¸ªé¡¶ç‚¹ï¼Œ$\dfrac{n\times(n-1)}{2}$æ¡è¾¹ã€‚</li>
</ul>
<p>æ— å‘å›¾æ€»åº¦æ•°ä¸€å®šæ˜¯å¶æ•°ï¼Œå› ä¸ºä»ä»€ä¹ˆéƒ½æ²¡æœ‰å¼€å§‹æ¯æ¬¡åŠ ä¸€æ¡è¾¹ï¼Œå°±æœ‰ä¸¤ä¸ªç‚¹çš„åº¦æ•°åŠ ä¸€ã€‚</p>
<h1 id="ç‰¹æ®Šçš„å›¾"><a href="#ç‰¹æ®Šçš„å›¾" class="headerlink" title="ç‰¹æ®Šçš„å›¾"></a>ç‰¹æ®Šçš„å›¾</h1><ul>
<li><p>æ ‘ï¼šæ— ç¯ï¼Œæ— å‘ï¼Œè¿é€š$n$ä¸ªç‚¹çš„æ ‘$n-1$æ¡è¾¹ã€‚<br>  æ— ç¯ï¼Œæ— å‘ï¼Œä¸è¿é€šï¼Ÿâ€”â€”æ£®æ—ï¼ˆæ¯ä¸ªè¿é€šå—éƒ½æ˜¯ä¸€ä¸ªæ ‘ï¼‰ã€‚<br>  æ— ç¯ï¼Œè¿é€šï¼Œæœ‰å‘ï¼Ÿâ€”â€”æœ‰å‘å›¾çš„æ ‘ã€‚</p>
<ul>
<li>å¤–å‘æ ‘ï¼šè¾¹éƒ½æŒ‡å‘å¶å­èŠ‚ç‚¹çš„æ ‘</li>
<li><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202302181130889.webp"
                      alt="image.webp"
                ></li>
<li>å†…å‘æ ‘ï¼šè¾¹éƒ½æŒ‡å‘æ ¹çš„æ ‘</li>
<li><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202302181131257.webp"
                      alt="image.webp"
                ><br>  æœ‰ç¯ï¼Œæ— å‘ï¼Œè¿é€šï¼Ÿâ€”â€”ç« é±¼å›¾&#x2F;åŸºç¯æ ‘ã€‚</li>
</ul>
<p>  ç« é±¼ï¼ˆ$n$æ¡è¾¹ï¼‰å˜æ ‘ï¼šæ–­æ‰ç¯ä¸Šçš„ä¸€æ¡è¾¹ã€‚</p>
<p>  æ ‘å˜ç« é±¼ï¼šä»»æ„è¿æ¥ä¸€ç»„è¾¹ã€‚</p>
<p>  æ‰©å±•â€”â€”<em>æ ‘å½¢DP</em>ã€‚</p>
<p>  <strong>æ²¡æœ‰ä¸Šå¸çš„èˆä¼šplus</strong> ï¼š</p>
<ul>
<li><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202302181139263.webp"
                      alt="image.webp"
                ><br>  ä¸å¯æ–­ç¯ä¸ºæ ‘ï¼ˆæ•°æ®èŒƒå›´ï¼‰ã€‚</li>
</ul>
<p>  1.å¯¹ç¯ä¸Šçš„æ¯ä¸€ä¸ªç‚¹åšä¸€æ¬¡ æ ‘å½¢DP<br>  2.ç¯å½¢DP</p>
<ul>
<li><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202302181148138.webp"
                      alt="image.webp"
                ><br>  ä»£è¡¨é€‰åˆ°ç¯ä¸Šç¬¬å‡ ä¸ªç‚¹&#x2F;ç¬¬iä¸ªç‚¹é€‰æ²¡é€‰&#x2F;ç¬¬1ä¸ªç‚¹é€‰æ²¡é€‰ã€‚</li>
<li><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202302181150117.webp"
                      alt="image.webp"
                ></li>
</ul>
</li>
</ul>
<p>å¦‚ä½•æ‰¾ç¯å‘¢ï¼Ÿ</p>
<p>ä»æ ¹èŠ‚ç‚¹å¼€å§‹ DFSï¼Œ</p>
<p>ç›´åˆ°ä»æŸä¸€ä¸ªç‚¹èµ°åˆ°äº†å®ƒçš„ç¥–å…ˆï¼Œ</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202302191854777.webp"
                      alt="image.webp"
                ></p>
<p>å¦‚æœ DFS é€”ä¸­æ‰¾åˆ°äº†è¿™ä¸ªç‚¹çš„ç¥–å…ˆï¼Œ</p>
<p>é‚£ä¹ˆå°±åå‘è·³ä¸æ–­åœ°è·³åˆ°ä»–çš„çˆ¶äº²ï¼Œ</p>
<p>ç›´åˆ°æ‰¾åˆ°è¿™ä¸ªç‚¹ï¼Œ</p>
<p>é‚£ä¹ˆç»å†çš„æ‰€æœ‰ç‚¹ä¾¿ç»„æˆäº†ä¸€ä¸ªç¯ã€‚</p>
<ul>
<li><p>ä»™äººæŒå›¾</p>
<ul>
<li>è¾¹ä»™äººæŒå›¾ï¼šæŠŠæ¯ä¸€ä¸ªç‚¹éƒ½æ¢æˆä¸€ä¸ªç¯ï¼Œè¾¹æ˜¯ç”¨æ¥è¿æ¥ä¸åŒçš„ç¯çš„ã€‚</li>
<li>ç‚¹ä»™äººæŒå›¾ï¼šç”¨ç‚¹è¿æ¥çš„ä»™äººæŒå›¾ã€‚</li>
<li>ä¸€èˆ¬ä¹Ÿæ˜¯ DP é¢˜ã€‚</li>
<li>åšæ³•ï¼šæ ‘å½¢DP ç¯å½¢DPäº¤æ›¿è¿›è¡Œï¼šæ ‘å½¢â€”â€”ç¯å½¢â€”â€”æ ‘å½¢ã€‚</li>
<li><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202302191918711.webp"
                      alt="image.webp"
                ></li>
</ul>
</li>
<li><p>æœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰ï¼š</p>
<ul>
<li>DPï¼šçŠ¶æ€çœ‹ä½œç‚¹ï¼Œè½¬ç§»çœ‹ä½œè¾¹ï¼Œå…¶å® DP å°±æ˜¯ DAGã€‚</li>
</ul>
</li>
<li><p>äºŒåˆ†å›¾ï¼ˆæ— å‘å›¾ï¼‰ï¼šï¼ˆ<em>æŸ“è‰²é—®é¢˜</em>ï¼šä¸€ä¸ªç‚¹å’Œå®ƒç›¸é‚»çš„ç‚¹çš„é¢œè‰²ä¸€å®šä¸åŒçš„å›¾ï¼‰å›¾åˆ†ä¸ºå·¦è¾¹å’Œå³è¾¹ä¸¤ä¸ªéƒ¨åˆ†ï¼Œæ‰€æœ‰è¾¹éƒ½åœ¨ä¸­é—´ï¼Œå·¦è¾¹å³è¾¹å†…éƒ¨éƒ½æ²¡æœ‰è¾¹ã€‚</p>
</li>
<li><p>æ–¹æ ¼å›¾ï¼š</p>
<ul>
<li><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202302191930716.webp"
                      alt="image.webp"
                ></li>
<li>ç±»ä¼¼å›½é™…è±¡æ£‹çš„æ£‹ç›˜ã€‚</li>
</ul>
</li>
</ul>
<h2 id="äºŒåˆ†å›¾åˆ¤å®š"><a href="#äºŒåˆ†å›¾åˆ¤å®š" class="headerlink" title="äºŒåˆ†å›¾åˆ¤å®š"></a>äºŒåˆ†å›¾åˆ¤å®š</h2><p><strong>æ ‘æ˜¯äºŒåˆ†å›¾</strong>ã€‚</p>
<p>åªéœ€è¦æŠŠæ·±åº¦ä¸ºå¥‡æ•°çš„ç‚¹æ”¾åœ¨å·¦è¾¹ï¼Œ</p>
<p>æ·±åº¦ä¸ºå¶æ•°çš„ç‚¹æ”¾åœ¨å³è¾¹ï¼ˆæ²¡æœ‰ä¸Šå¸çš„èˆä¼šï¼‰ï¼Œ</p>
<p>é‚£ä¹ˆè¾¹ä¸€å®šå…¨åœ¨ä¸­é—´ã€‚</p>
<p>ä»€ä¹ˆå›¾ä¸æ˜¯äºŒåˆ†å›¾å‘¢ï¼Ÿ</p>
<p>æœ‰å¥‡ç¯çš„å›¾å°±ä¸€å®šä¸æ˜¯ï¼Œæ²¡æœ‰å¥‡ç¯å°±æ˜¯ï¼ˆç¯ä¸Šçš„ç‚¹æ•°æ˜¯å¥‡æ•°ï¼‰ï¼Œ</p>
<p>ä»£ç æ€è·¯ï¼šéšä¾¿æ‰¾åˆ°ä¸€ä¸ªç‚¹æŠŠå®ƒæŸ“æˆç™½è‰²ï¼Œå†æŸ“ç›¸é‚»çš„ç‚¹ã€‚</p>
<p>ä½•æ—¶ç»“æŸï¼Ÿ</p>
<p>æŸ“å®Œä»¥åå‘ç°ç›¸é‚»æœ‰ä¸è‡ªå·±é¢œè‰²ç›¸åŒçš„ç‚¹ï¼Œé‚£ä¹ˆå°±ä¸æ˜¯äºŒåˆ†å›¾ã€‚</p>
<p><strong>äºŒåˆ†å›¾ä¸ä¸€å®šè¿é€šã€‚</strong></p>
<h1 id="å›¾çš„å­˜å‚¨"><a href="#å›¾çš„å­˜å‚¨" class="headerlink" title="å›¾çš„å­˜å‚¨"></a>å›¾çš„å­˜å‚¨</h1><h2 id="é‚»æ¥çŸ©é˜µ"><a href="#é‚»æ¥çŸ©é˜µ" class="headerlink" title="é‚»æ¥çŸ©é˜µ"></a>é‚»æ¥çŸ©é˜µ</h2><p>$f[i]  [j]$ä»£è¡¨ä»$i$åˆ°$j$æœ‰è¾¹ã€‚</p>
<ul>
<li>å¥½å¤„ï¼šè¯¢é—®å¿«ï¼Œå¥½å†™ã€‚</li>
<li>åå¤„ï¼šç©ºé—´è¾ƒå¤§ï¼Œæ²¡æœ‰åŠæ³•å¤„ç†é‡è¾¹ã€‚</li>
</ul>
<h2 id="è¾¹è¡¨ï¼ˆé“¾å¼å‰å‘æ˜Ÿï¼‰"><a href="#è¾¹è¡¨ï¼ˆé“¾å¼å‰å‘æ˜Ÿï¼‰" class="headerlink" title="è¾¹è¡¨ï¼ˆé“¾å¼å‰å‘æ˜Ÿï¼‰"></a>è¾¹è¡¨ï¼ˆé“¾å¼å‰å‘æ˜Ÿï¼‰</h2><ul>
<li>å»ºç«‹$n$ä¸ªé“¾è¡¨</li>
<li>è§<a class="link"   href="https://blog.csdn.net/acdreamers/article/details/16902023" >æ·±åº¦ç†è§£é“¾å¼å‰å‘æ˜Ÿ_ACdreamersçš„åšå®¢-CSDNåšå®¢_é“¾å¼å‰å‘æ˜Ÿ<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
<li><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202302191940590.webp"
                      alt="image.webp"
                ></li>
<li><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202302191940046.webp"
                      alt="image.webp"
                ></li>
</ul>
<p><strong>æ—¢ç„¶ä¼šå­˜å›¾äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬åšä¸€ä¸‹ç« é±¼å›¾DPå§ï¼</strong></p>
<p>å¯¹ç¯ä¸Šçš„æ¯ä¸€ä¸ªç‚¹åšä¸€ä¸ª æ ‘å½¢DP</p>
<p>ä¿è¯ä¸è¦ DFS åˆ°ç¯ä¸Š</p>
<p>åšå®Œ æ ‘å½¢DP åå†å¯¹ç¯åšä¸€ä¸ª ç¯å½¢DP é‚£ä¹ˆå°±åšå®Œäº†</p>
<h1 id="æœ€çŸ­è·¯"><a href="#æœ€çŸ­è·¯" class="headerlink" title="æœ€çŸ­è·¯"></a>æœ€çŸ­è·¯</h1><ul>
<li>å•æºæœ€çŸ­è·¯ï¼ˆä¸€ä¸ªç‚¹åˆ°å…¶ä»–æ‰€æœ‰ç‚¹ï¼‰<ul>
<li>ä¸‰è§’ä¸ç­‰å¼$(dist i,k &lt;&#x3D; dist i,j+dist j,k)$</li>
<li><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202302192122110.webp"
                      alt="image.webp"
                ></li>
</ul>
</li>
<li>å¤šæºæœ€çŸ­è·¯ï¼ˆå¤šä¸ªç‚¹åˆ°æ‰€æœ‰ç‚¹çš„æœ€çŸ­è·¯â€”â€”<del>å¤šæ¬¡å•æºæœ€çŸ­è·¯</del>ï¼‰</li>
</ul>
<h2 id="Floyedâ€”â€”å¤šæºæœ€çŸ­è·¯-DP"><a href="#Floyedâ€”â€”å¤šæºæœ€çŸ­è·¯-DP" class="headerlink" title="Floyedâ€”â€”å¤šæºæœ€çŸ­è·¯(DP)"></a>Floyedâ€”â€”å¤šæºæœ€çŸ­è·¯(DP)</h2><p><strong>æ¡ä»¶</strong>ï¼šè¾¹æƒå¤§äºç­‰äº0 ã€‚</p>
<p>$F i,j,k$ä»£è¡¨ä»$j$èµ°åˆ°$k$ä¸­é—´ç»è¿‡çš„æ¯ä¸ªç‚¹ç¼–å·éƒ½å°äº$i$ã€‚</p>
<p>ç°åœ¨åˆåŠ äº†ä¸€æ¡è¾¹ã€‚</p>
<p>è¿™æ¡è¾¹å¯é€‰å¯ä¸é€‰ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202302192129552.webp"
                      alt="image.webp"
                ></p>
<p>ä½†æ˜¯$i$å¯ä»¥é€šè¿‡æšä¸¾è§£å†³ã€‚</p>
<p>è¿›è¡Œä¸€ä¸ª<strong>çŠ¶æ€å‹ç¼©</strong>ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202302192133270.webp"
                      alt="image.webp"
                ></p>
<p>æ³¨æ„è¦å…ˆæšä¸¾ä¸­é—´ç‚¹ã€‚</p>
<h2 id="Bellman-Ford"><a href="#Bellman-Ford" class="headerlink" title="Bellman-Ford"></a>Bellman-Ford</h2><p>é¦–å…ˆï¼Œ$i$åˆ°$j$ä¹‹é—´æœ€çŸ­è·¯ä¸€å®šä¸è¶…è¿‡$n-1$æ¡è¾¹ï¼Œ</p>
<p>æ¯æ¬¡å¾ªç¯æšä¸¾æ‰€æœ‰çš„è¾¹æ¥è¿›è¡Œæ¾å¼›æ“ä½œï¼Œåé¢çš„è¾¹ä¼šè¢«å‰é¢çš„è¾¹æ›´æ–°ã€‚</p>
<p>å³ä½¿æœ€å·®çš„é¡ºåºï¼Œå€’ç€éå†ï¼Œå¯¼è‡´æ¯æ¬¡åªèƒ½æ›´æ–°ä¸€æ¡è¾¹ï¼Œé‚£æœ€å¤šä¹Ÿä¸ä¼šè¶…è¿‡ $n-1$ æ¬¡æ“ä½œã€‚</p>
<p>æ‰€ä»¥å°±å¾—åˆ°äº†å¦‚ä¸‹ä»£ç ï¼Œ</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202302252234022.webp"
                      alt="image.webp"
                ></p>
<p>æ˜¯ä¸æ˜¯è‚¥è‚ ç®€å•æã€‚</p>
<p>ä»£ç ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 10000007</span></span><br><span class="line"><span class="type">int</span> n,dist[maxn],m,first[maxn];</span><br><span class="line"><span class="type">int</span> s[maxn],e[maxn],d[maxn];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;s[i],&amp;e[i],&amp;d[i]);<span class="comment">//èµ·ç‚¹ï¼Œç»ˆç‚¹ï¼Œé•¿åº¦</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">memset</span>(dist,<span class="number">0x3f</span>,<span class="built_in">sizeof</span>(dist));</span><br><span class="line">    dist[<span class="number">1</span>]=<span class="number">0</span>;<span class="comment">//èµ·ç‚¹è·ç¦»</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)<span class="comment">//æœ€å¤šn-1æ¡è¾¹,æœ€å¤šæ¾å¼›n-1æ¬¡ï¼Œå› ä¸ºå¦‚æœå€’ç€æ¥çš„è¯ï¼Œæ‰€æœ‰ç‚¹çš„distéƒ½æœªçŸ¥ï¼Œæ¯æ¬¡åªèƒ½æ›´æ–°ä¸€ä¸ªç‚¹ï¼Œå› æ­¤æ¯è½®ä¼šè‡³å°‘æ¾å¼›ä¸€ä¸ªç‚¹</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=m;j++)<span class="comment">//æšä¸¾è¾¹</span></span><br><span class="line">        &#123;</span><br><span class="line">            dist[e[j]]=<span class="built_in">min</span>(dist[e[j]],dist[s[j]]+d[j]);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>ä½†æ˜¯å¤æ‚åº¦æ¯” Dijkstra é«˜ã€‚</p>
<p>ä½†æ˜¯å®ƒèƒ½å¤„ç†è´Ÿè¾¹æƒå’Œè´Ÿç¯ï¼Œå› ä¸ºå®ƒæ¯ä¸€æ¡è¾¹éƒ½ä¼šçœ‹$n-1$æ¬¡ï¼Œä¿è¯ä¸ä¼šæ¼æ‰æ›´ä¼˜è§£ã€‚</p>
<p>å¦‚æœè¿›è¡Œ $n-1$ æ¬¡æ¾å¼›åè¿˜èƒ½è¿›è¡Œç¬¬ $n$ æ¬¡æ¾å¼›ï¼Œé‚£ä¹ˆå°±æœ‰è´Ÿç¯ã€‚</p>
<p>å› ä¸ºå‡å¦‚ä¸€å¼ å›¾æ‰€æœ‰çš„ç‚¹çš„æœ€çŸ­è·¯éƒ½è¢«æ±‚äº†å‡ºæ¥ï¼Œå¹¶ä¸”å…¶ä¸­ä¸å­˜åœ¨è´Ÿç¯ï¼Œè¿™æ—¶éå†æ¯ä¸€æ¡è¾¹è¿›è¡Œæ¾å¼›æ“ä½œï¼Œæˆ‘ä»¬ä¼šå‘ç°ä»€ä¹ˆä¹Ÿä¸ä¼šå‘ç”Ÿã€‚</p>
<p>è‹¥ä»…ä»…å‡ºç°äº†è´Ÿè¾¹æƒï¼Œå…¶å®ä¹Ÿä»€ä¹ˆéƒ½ä¸ä¼šå‘ç”Ÿã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307201352241.webp"
                      alt="graph (2).png"
                ></p>
<p>å¯¹äºè¿™æ ·ä¸€å¼ å›¾ï¼Œè¿›å…¥ç¯ä»¥åä¼šå‘ç°ï¼šæ¯æ¡è¾¹è¢«æ¾å¼›ä¸€éåï¼Œæ¯ä¸ªç‚¹çš„ $dist$ å€¼éƒ½æ˜¯å›ºå®šçš„ï¼Œæ— æ³•è¢«æ›´æ–°ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307201353906.webp"
                      alt="graph (3).png"
                ></p>
<p>è€Œå¯¹äºè¿™æ ·ä¸€å¼ æœ‰è´Ÿç¯çš„å›¾ï¼Œå½“éå†å›åŸç‚¹è¿™æ¡è¾¹æ—¶ï¼Œä¼šå‘ç°å®ƒçš„$dist$å˜å°äº†ï¼Œé‚£ä¹ˆåœ¨ä¸‹ä¸€æ¬¡çš„æ¾å¼›æ“ä½œä¸­ï¼Œå°±ä¼šæœ‰è¾¹å—åˆ°è¿™æ¡è¾¹çš„å½±å“è€Œå˜å°ã€‚</p>
<p>æ ¹æ®è´Ÿç¯çš„å®šä¹‰ï¼š<strong>è¾¹æƒå’Œä¸ºè´Ÿæ•°çš„ç¯</strong>ã€‚æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œå…¶å®å…³é”®å°±æ˜¯åœ¨äºä»è¿›å…¥ç¯åˆ°å›åˆ°èµ·ç‚¹çš„é‚£ä¸€åˆ»ï¼Œèµ·ç‚¹çš„$dist$æœ‰æ²¡æœ‰è¢«æ›´æ–°ï¼Œè€Œå¦‚æœè¾¹æƒå’Œä¸ºè´Ÿæ•°çš„è¯ï¼Œé‚£ä¹ˆè¯¥ç‚¹ä¸€å®šä¼šè¢«æ›´æ–°ï¼Œè¿›è€Œè¿›å…¥ä¸€ç§å¾ªç¯ï¼Œç¯ä¸Šçš„æœ€çŸ­è·ç¦»ä¸æ–­å˜å°ï¼Œä¸æ–­ç»•åœˆåœˆï¼Œåˆ°æœ€åå˜æˆè´Ÿæ— ç©·ã€‚</p>
<p>å¯¼è‡´äº†è´Ÿç¯è¿å‡ºå»çš„ç‚¹æœ€çŸ­è·¯å¾„éƒ½æ˜¯è´Ÿæ— ç©·ã€‚</p>
<h2 id="SPFA"><a href="#SPFA" class="headerlink" title="SPFA"></a>SPFA</h2><blockquote>
<p>å…³äºSPFA ï¼Œå®ƒæ­»äº†ã€‚</p>
</blockquote>
<p>å’Œ BFS ä¸ä¸€æ ·çš„åœ°æ–¹å°±æ˜¯ä¸€ä¸ªç‚¹å¯èƒ½è¢«æ‰”è¿›é˜Ÿåˆ—å¤šæ¬¡ï¼Œ</p>
<p>å®é™…ä¸Šå°±æ˜¯ Bellman-Ford çš„é˜Ÿåˆ—ä¼˜åŒ–ï¼Œ</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202302252245462.webp"
                      alt="image.webp"
                ></p>
<p>å¤æ‚åº¦$O(nm)$è¿‘ä¼¼$O(m)$</p>
<p>å¦‚æœè¾¹æƒå¤§äºç­‰äºé›¶ï¼Œä¸€å®šæ˜¯ç”¨ Dijkstra$+$å †ã€‚</p>
<p>å¦‚æœå°äºé›¶é‚£å°±æ˜¯ SPFA ã€‚</p>
<h3 id="åŒç«¯é˜Ÿåˆ—ä¼˜åŒ–"><a href="#åŒç«¯é˜Ÿåˆ—ä¼˜åŒ–" class="headerlink" title="åŒç«¯é˜Ÿåˆ—ä¼˜åŒ–"></a>åŒç«¯é˜Ÿåˆ—ä¼˜åŒ–</h3><p>åœ¨æ¾å¼›æ“ä½œçš„æ—¶å€™ï¼Œå‡å¦‚è¿™æ¡è¾¹çš„ç»ˆç‚¹æ²¡è¢«æ ‡è®°ï¼Œå‡å¦‚ç»ˆç‚¹çš„distå€¼æ¯”é˜Ÿå¤´è¦å¤§ï¼Œé‚£å°±æ”¾åœ¨é˜Ÿå°¾ï¼Œå¦‚æœæ¯”é˜Ÿå¤´å°ï¼Œé‚£å°±åŠ åœ¨é˜Ÿå¤´ã€‚</p>
<p>ä»£ç ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=fir[now];i;i=ed[i].nxt)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> v=ed[i].to;</span><br><span class="line">            <span class="keyword">if</span>(dist[v]&gt;dist[now]+ed[i].val)</span><br><span class="line">            &#123;</span><br><span class="line">                dist[v]=dist[now]+ed[i].val;</span><br><span class="line">                <span class="keyword">if</span>(!righ[v])</span><br><span class="line">                &#123;</span><br><span class="line">                    righ[v]=<span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">if</span>(!q.<span class="built_in">empty</span>()&amp;&amp;dist[q.<span class="built_in">front</span>()]&lt;dist[v]) q.<span class="built_in">push_back</span>(v);<span class="comment">//é˜Ÿåˆ—ä¸ç©ºé˜²æ­¢REï¼Œå°çš„å°±æ”¾åœ¨é˜Ÿå¤´ï¼Œå¤§çš„å°±æ”¾åœ¨é˜Ÿå°¾</span></span><br><span class="line">                    <span class="keyword">else</span> q.<span class="built_in">push_front</span>(v);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="Dijkstra"><a href="#Dijkstra" class="headerlink" title="Dijkstra"></a>Dijkstra</h2><blockquote>
<p>å›¾ä¸Šè¾¹æƒå¤§äºç­‰äº0 ã€‚</p>
</blockquote>
<p>å¤æ‚åº¦ $O(n^2+m)$ã€‚</p>
<p>è®°$dist_i$ä»£è¡¨ä»èµ·ç‚¹åˆ°$i$çš„æœ€çŸ­è·ç¦»ã€‚</p>
<p>$1$å·ç‚¹åˆ°è‡ªå·±è·ç¦»ä¸º$0$ã€‚</p>
<p>å…¶ä»–ç‚¹ä¸ºæ— ç©·å¤§ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303112229422.webp"
                      alt="image.webp"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303112230818.webp"
                      alt="image.webp"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202302221108718.webp"
                      alt="image.webp"
                ></p>
<p>æŠŠä¸€å·ç‚¹æ”¾åˆ°å³è¾¹ï¼Œ</p>
<p>è¿›è¡Œä¸€ä¸ª<strong>æ¾å¼›æ“ä½œï¼Œ</strong></p>
<p>â€œç”¨å·²çŸ¥æ›´æ–°æœªçŸ¥â€ã€‚</p>
<p>ç”¨å·²çŸ¥æœ€çŸ­è·¯çš„ç‚¹æ›´æ–°æœªçŸ¥æœ€çŸ­è·¯çš„ç‚¹ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202302221113575.webp"
                      alt="image.webp"
                ></p>
<p>ç”¨<strong>distæœ€çŸ­çš„ç‚¹</strong>å»æ›´æ–°å…¶ä»–ç‚¹ï¼Œ</p>
<p>æ›´æ–°è¿‡æœ€çŸ­è·ç¦»çš„ç‚¹ä¸ä¼šè¢«å†æ¬¡æ›´æ–°</p>
<p>å› ä¸ºè¾¹æƒå¤§äºç­‰äº$0$ï¼Œ</p>
<p>å‡å¦‚$j$èµ°åˆ°$i$ï¼Œ</p>
<p>å¹¶ä¸”$dist[i]$ &lt; $dist[j]$ï¼Œ</p>
<p>$j$ä¸å¯èƒ½èµ°å‡ºæ¯”$dist[i]$ è¿˜çŸ­çš„è·¯ï¼Œ</p>
<p>å› æ­¤$dist[i]$ ä¸ä¼šè¢«æ›´æ–°ã€‚</p>
<h3 id="Dijkstra-Heapä¼˜åŒ–"><a href="#Dijkstra-Heapä¼˜åŒ–" class="headerlink" title="Dijkstra+Heapä¼˜åŒ–"></a>Dijkstra+Heapä¼˜åŒ–</h3><p>1.è¯¢é—®æœ€å°å€¼ã€‚</p>
<p>2.åˆ é™¤æœ€å°å€¼ã€‚</p>
<p>3.ä¿®æ”¹æŸäº›å€¼ã€‚</p>
<p>å¤§æ ¹å †ï¼šä»¿å‡½æ•° <code>greater&lt;int&gt;</code></p>
<p>ç”¨ <code>pair</code> çš„è¯é»˜è®¤æ˜¯æŒ‰ç…§ <code>first</code> æ’åºï¼Œå…¶æ¬¡æŒ‰ç…§ <code>second</code> æ’åºã€‚</p>
<p>å¯ä»¥ä½¿ç”¨å †&#x2F;çº¿æ®µæ ‘ã€‚</p>
<p>ä»£ç ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 1000007</span></span><br><span class="line"><span class="type">int</span> dist[maxn],first[maxn];</span><br><span class="line"><span class="type">int</span> n,m,s;</span><br><span class="line"><span class="type">bool</span> righ[maxn];<span class="comment">//è¿™ä¸ªç‚¹æœ‰æ²¡æœ‰æ”¾åˆ°å³è¾¹å»</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">point</span>&#123;</span><br><span class="line">    <span class="type">int</span> p,d;<span class="comment">//åŸç‚¹åˆ°pçš„æœ€çŸ­è·ç¦»ä¸ºd</span></span><br><span class="line">    <span class="built_in">point</span>()&#123;&#125;</span><br><span class="line">    <span class="built_in">point</span>(<span class="type">int</span> a,<span class="type">int</span> b)&#123;p=a;d=b;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>&lt;(<span class="type">const</span> point &amp;a,<span class="type">const</span> point &amp;b)<span class="comment">//STLé»˜è®¤å¤§æ ¹å †ï¼Œä¸Šé¢æ˜¯å¤§çš„</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> a.d&gt;b.d;<span class="comment">//å°æ ¹å †</span></span><br><span class="line">&#125;</span><br><span class="line">priority_queue&lt;point&gt; heap;</span><br><span class="line"><span class="comment">//æ¾å¼›æ“ä½œ</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> e,next;</span><br><span class="line">    <span class="type">int</span> d;<span class="comment">//é•¿åº¦</span></span><br><span class="line">&#125;ed[maxn];</span><br><span class="line"><span class="type">int</span> cnt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add_edge</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v,<span class="type">int</span> w)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cnt++;</span><br><span class="line">    ed[cnt].next=first[u];</span><br><span class="line">    ed[cnt].e=v;</span><br><span class="line">    ed[cnt].d=w;</span><br><span class="line">    first[u]=cnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dijkstra</span><span class="params">(<span class="type">int</span> s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(dist,<span class="number">0x3f</span>,<span class="built_in">sizeof</span>(dist));<span class="comment">//å…¨éƒ¨éƒ½èµ‹å€¼ä¸ºæœ€å¤§å€¼</span></span><br><span class="line">    dist[s]=<span class="number">0</span>;<span class="comment">//såˆ°s</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        heap.<span class="built_in">push</span>(<span class="built_in">point</span>(i,dist[i]));<span class="comment">//å¯ä»¥æ— å˜é‡å</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span>(righ[heap.<span class="built_in">top</span>().p])<span class="comment">//æœ‰äº›ç‚¹è¢«æ‹¿åˆ°äº†å³è¾¹ä½†æ˜¯å·¦è¾¹æ²¡æœ‰åˆ é™¤</span></span><br><span class="line">            heap.<span class="built_in">pop</span>();</span><br><span class="line">        point now=heap.<span class="built_in">top</span>();</span><br><span class="line">        heap.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="type">int</span> p=now.p;</span><br><span class="line">        <span class="comment">// int d=now.d;//æœªåŠ å †ä¼˜åŒ–ç‰ˆï¼Œæ‰¾åˆ°ç›®å‰distæœ€å°çš„ç‚¹</span></span><br><span class="line">        <span class="comment">// int p=-1;//ä»£è¡¨è¿˜æ²¡é€‰ä»»ä½•ç‚¹</span></span><br><span class="line">        <span class="comment">// for(int j=1;j&lt;=n;j++)//å¾ªç¯åå°±æ‰¾åˆ°äº†åœ¨å·¦è¾¹æœ€çŸ­è·¯æœ€å°çš„ç‚¹</span></span><br><span class="line">        <span class="comment">// &#123;</span></span><br><span class="line">        <span class="comment">//     if(!righ[j]&amp;&amp;(p==-1||dist[p]&gt;dist[j]))//righ[]ä»£è¡¨æœ‰æ²¡æœ‰æ”¾åˆ°å³è¾¹å»</span></span><br><span class="line">        <span class="comment">//         p=j;</span></span><br><span class="line">        righ[p]=<span class="number">1</span>;<span class="comment">//æ”¾åˆ°å³è¾¹ï¼Œæšä¸¾å‡ºè¾¹</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=first[p];j; j=ed[j].next)<span class="comment">//ed[j].eå³ä¸ºpçš„ä¸‹ä¸€ä¸ªç‚¹</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> e=ed[j].e;</span><br><span class="line">            <span class="type">int</span> d=dist[p]+ed[j].d;</span><br><span class="line">            <span class="keyword">if</span>(dist[e]&gt;d)</span><br><span class="line">            &#123;</span><br><span class="line">                dist[e]=d;</span><br><span class="line">                heap.<span class="built_in">push</span>(<span class="built_in">point</span>(e,d));<span class="comment">//æ”¹ä¸äº†é‚£å°±ä¸¢ä¸€ä¸ªæ–°å…ƒç´ è¿›å»</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// dist[ed[j].e]= min(dist[ed[j].e],dist[p]+ed[j].d);//æˆ–è€…è¿™æ ·</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;n,&amp;m,&amp;s);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> u,v,w;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;u,&amp;v,&amp;w);</span><br><span class="line">        <span class="built_in">add_edge</span>(u,v,w);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">dijkstra</span>(s);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(dist[i]==<span class="number">1061109567</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            cout&lt;&lt;<span class="number">2147483647</span>&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,dist[i]);</span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>ç”±äº Dijkstra é‡‡ç”¨çš„æ˜¯è´ªå¿ƒç­–ç•¥ï¼Œæ¯ä¸ªç‚¹åªè¢«åŠ å…¥å †ä¸­ä¸€æ¬¡ï¼Œè¿™æ ·çš„è¯ä¸€æ—¦å‡ºç°è´Ÿç¯ï¼Œé‚£ä¹ˆæ˜æ˜å¯ä»¥ç»•å¾ˆå¤šåœˆè®©è·¯å¾„é•¿åº¦å˜ä¸ºè´Ÿæ— ç©·ï¼Œä½†æ˜¯ Dijkstra åªä¼šè·‘ä¸€éï¼Œå¯¼è‡´è´ªå¿ƒæœ€ä¼˜å¾—å‡ºç­”æ¡ˆé”™è¯¯ã€‚</p>
<p>è´Ÿè¾¹æƒä¹Ÿæ˜¯åŒç†ï¼Œå‡å¦‚å½“å‰æœ€å°çš„$dist$å€¼çš„ç‚¹å¹¶æ²¡æœ‰è¿æ¥è´Ÿè¾¹æƒçš„ç‚¹ï¼Œé‚£ä¹ˆ Dijkstra å°±ä¸ä¼šè€ƒè™‘ä¸åœ¨è€ƒè™‘èŒƒå›´ä¹‹å†…çš„è´Ÿè¾¹ï¼Œä½†å¾€å¾€è¿™ç§æ—¶å€™é€‰æ›´å¤§çš„$dist$ç‚¹æ¥è·å–è¯¥è´Ÿè¾¹ä¼šæ›´ä¼˜ã€‚</p>
<p>ä¾‹å¦‚è¯¥å›¾ï¼Œæ±‚ A åˆ° B çš„æœ€çŸ­è·¯ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307201200333.webp"
                      alt="image.png"
                ></p>
<p>æœ€å°è·ç¦»ä¸º2ï¼Œä½†æ˜¯ Djkstra ä¼šè®¤ä¸ºæ˜¯4ã€‚</p>
<p>å †çš„åšæ³•ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰ï¼š</p>
<p>$$(n+m)  \times  log(n+m)$$</p>
<p>æ‰‹å†™å †ï¼š$$(n+m)\times log_n$$<em>(æ–æ³¢é‚£å¥‘å †ä¼šæ›´å¿«)</em></p>
<h2 id="Johnson"><a href="#Johnson" class="headerlink" title="Johnson"></a>Johnson</h2><blockquote>
<p>ä¸€ç§å¤šæºæœ€çŸ­è·¯ç®—æ³•</p>
</blockquote>
<p>æ–°å»ºä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹é›¶å·ç‚¹ï¼ŒæŠŠå®ƒå‘å…¶å®ƒæ‰€æœ‰ç‚¹è¿æ¥ä¸€æ¡è¾¹æƒä¸º 0 çš„è¾¹ï¼Œ</p>
<p>ç„¶åç”¨ Bellman-Ford æ±‚å‡º 0 å·ç‚¹åˆ°å…¶å®ƒæ‰€æœ‰ç‚¹çš„æœ€çŸ­è·¯ï¼Œè®°ä¸º $h_i$ã€‚</p>
<p>è®¾å­˜åœ¨ä¸€æ¡ä» $u$ åˆ° $v$ æƒå€¼ä¸º $w$ çš„è¾¹ï¼ŒæŠŠå®ƒçš„æƒå€¼è®¾ç½®ä¸º $w+h_u-h_v$ï¼Œè¿™æ ·ä»¥æ¯ä¸ªç‚¹ä¸ºèµ·ç‚¹ï¼Œè·‘ $n$ é Dijkstra å°±å¯ä»¥æ±‚å‡ºä»»æ„ä¸¤ç‚¹é—´çš„æœ€çŸ­è·¯äº†ã€‚</p>
<p>å¦‚æœä¸è¿™æ ·å¤„ç†ï¼Œå°†ä¼šå¯¼è‡´è´Ÿè¾¹æƒã€‚</p>
<p>åœ¨æ–°å›¾ä¸Šè·‘ Dijkstra åï¼Œå¯¹äº $u\to{v}$ çš„è·¯å¾„ï¼Œç»“æœæ˜¯åŸæ¥çš„æœ€çŸ­è·¯ $+,h_s-h_t$ï¼Œæ‰€ä»¥æœ€åè¿˜è¦å† $-h_s+h_t$ æ‰èƒ½å¾—åˆ°æ­£ç¡®æœ€çŸ­è·¯ã€‚</p>
<p>åŸå›¾ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202309022153246.webp"
                      alt="graph.png"
                ></p>
<p>æ–°å›¾ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202309022154468.webp"
                      alt="graph (1).png"
                ></p>
<p>ä¸€å¼€å§‹çš„é¢„å¤„ç†ï¼Œåˆ°è¶…çº§æºç‚¹çš„æœ€çŸ­è·ç¦»è¦ä¹ˆå°±æ˜¯é›¶ï¼Œè¦ä¹ˆå°±æ˜¯è´Ÿæ•°ï¼Œæ‰€ä»¥ä¸éœ€è¦åˆå§‹æ•°ç»„ä¸ºæå¤§å€¼ã€‚</p>
<p>ä½†æ˜¯å¦‚æœæ˜¯SPFAçš„è¯ï¼Œéœ€è¦åˆ¤æ–­æ˜¯å¦æœ‰æ›´æ–°è¿‡ï¼Œä¸ç„¶ä¸ä¼šå…¥é˜Ÿï¼Œæ‰€ä»¥è¿˜æ˜¯è¦æ ‡è®°åˆå§‹ä¸ºæå¤§å€¼ã€‚</p>
<p>ä»£ç ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e4</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> M = <span class="number">6e3</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m, edcnt;</span><br><span class="line"><span class="type">int</span> h[N];</span><br><span class="line"><span class="type">int</span> s[N],t[N],d[N];</span><br><span class="line"><span class="type">int</span> fir[N];</span><br><span class="line"><span class="type">int</span> dist[N];</span><br><span class="line"><span class="type">bool</span> vis[N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> to, val, nxt;</span><br><span class="line">&#125;e[(M &lt;&lt; <span class="number">1</span>) + N];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">point</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> id,len;</span><br><span class="line">    <span class="built_in">point</span>()&#123;&#125;</span><br><span class="line">    <span class="built_in">point</span>(<span class="type">int</span> a,<span class="type">int</span> b):<span class="built_in">id</span>(a),<span class="built_in">len</span>(b)&#123;&#125;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span> &lt; (<span class="type">const</span> point &amp;x)<span class="type">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> len &gt; x.len;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Add</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> v, <span class="type">int</span> w)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++edcnt].nxt = fir[u];</span><br><span class="line">    e[edcnt].to = v;</span><br><span class="line">    e[edcnt].val = w;</span><br><span class="line">    fir[u] = edcnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Dijkstra</span><span class="params">(<span class="type">int</span> s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(dist, <span class="number">0x3f</span>, <span class="built_in">sizeof</span>(dist));</span><br><span class="line">    <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in">sizeof</span>(vis));</span><br><span class="line">    dist[s] = <span class="number">0</span>;</span><br><span class="line">    priority_queue&lt;point&gt; q;</span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>()) q.<span class="built_in">pop</span>();</span><br><span class="line">    q.<span class="built_in">push</span>(<span class="built_in">point</span>(s,<span class="number">0</span>));</span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        point now = q.<span class="built_in">top</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">if</span>(vis[now.id]) <span class="keyword">continue</span>;</span><br><span class="line">        vis[now.id] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = fir[now.id]; i; i = e[i].nxt)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> v = e[i].to;</span><br><span class="line">            <span class="type">int</span> d = dist[now.id] + e[i].val;</span><br><span class="line">            <span class="keyword">if</span>(d &lt; dist[v])</span><br><span class="line">            &#123;</span><br><span class="line">                dist[v] = d;</span><br><span class="line">                <span class="keyword">if</span>(!vis[v]) q.<span class="built_in">push</span>(<span class="built_in">point</span>(v,dist[v]));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; ++i)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;s[i],&amp;t[i],&amp;d[i]);</span><br><span class="line">    <span class="type">int</span> tot = m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        s[++tot] = <span class="number">0</span>;</span><br><span class="line">        t[tot] = i;</span><br><span class="line">        d[tot] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) <span class="comment">// å¤šåŠ äº†ä¸€ä¸ªæºç‚¹ï¼Œæ‰€ä»¥æœ€å¤šæ¾å¼› n æ¬¡</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n + m; ++j) <span class="comment">// n+mæ¡è¾¹</span></span><br><span class="line">            h[t[j]] = <span class="built_in">min</span>(h[t[j]], h[s[j]] + d[j]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n + m; ++j)</span><br><span class="line">        <span class="keyword">if</span>(h[t[j]] &gt; h[s[j]] + d[j])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;-1&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; ++i)</span><br><span class="line">        <span class="built_in">Add</span>(s[i], t[i], d[i] + h[s[i]] - h[t[i]]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">Dijkstra</span>(i);</span><br><span class="line">        ll ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; ++j)</span><br><span class="line">            ans += j * (dist[j] == <span class="number">0x3f3f3f3f</span> ? <span class="number">1e9</span> : dist[j] - h[i] + h[j]);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e4</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> M = <span class="number">6e3</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m, edcnt;</span><br><span class="line"><span class="type">int</span> h[N];</span><br><span class="line"><span class="type">int</span> fir[N];</span><br><span class="line"><span class="type">int</span> dist[N];</span><br><span class="line"><span class="type">bool</span> vis[N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> to, val, nxt, from;</span><br><span class="line">&#125;e[(M &lt;&lt; <span class="number">1</span>) + N];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">point</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> id,len;</span><br><span class="line">    <span class="built_in">point</span>()&#123;&#125;</span><br><span class="line">    <span class="built_in">point</span>(<span class="type">int</span> a,<span class="type">int</span> b):<span class="built_in">id</span>(a),<span class="built_in">len</span>(b)&#123;&#125;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span> &lt; (<span class="type">const</span> point &amp;x)<span class="type">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> len &gt; x.len;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Add</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> v, <span class="type">int</span> w)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++edcnt].nxt = fir[u];</span><br><span class="line">    e[edcnt].from = u;</span><br><span class="line">    e[edcnt].to = v;</span><br><span class="line">    e[edcnt].val = w;</span><br><span class="line">    fir[u] = edcnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">SPFA</span><span class="params">(<span class="type">int</span> s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">bool</span> inque[N];</span><br><span class="line">    <span class="type">int</span> times[N];</span><br><span class="line">    <span class="built_in">memset</span>(times, <span class="number">0</span>, <span class="built_in">sizeof</span>(times));</span><br><span class="line">    <span class="built_in">memset</span>(inque, <span class="number">0</span>, <span class="built_in">sizeof</span>(inque));</span><br><span class="line">    <span class="built_in">memset</span>(h, <span class="number">0x3f</span>, <span class="built_in">sizeof</span>(h));</span><br><span class="line">    queue&lt;<span class="type">int</span>&gt; q;</span><br><span class="line">    times[s] = <span class="number">1</span>;</span><br><span class="line">    h[s] = <span class="number">0</span>;</span><br><span class="line">    q.<span class="built_in">push</span>(s);</span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> now = q.<span class="built_in">front</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        inque[now] = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = fir[now]; i; i = e[i].nxt)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> v = e[i].to;</span><br><span class="line">            <span class="type">int</span> d = h[now] + e[i].val;</span><br><span class="line">            <span class="keyword">if</span>(d &lt; h[v])</span><br><span class="line">            &#123;</span><br><span class="line">                h[v] = d;</span><br><span class="line">                <span class="keyword">if</span>(!inque[v])</span><br><span class="line">                &#123;</span><br><span class="line">                    inque[v] = <span class="literal">true</span>;</span><br><span class="line">                    q.<span class="built_in">push</span>(v);</span><br><span class="line">                    times[v]++;</span><br><span class="line">                    <span class="keyword">if</span>(times[v] &gt; n)</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Dijkstra</span><span class="params">(<span class="type">int</span> s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(dist, <span class="number">0x3f</span>, <span class="built_in">sizeof</span>(dist));</span><br><span class="line">    <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in">sizeof</span>(vis));</span><br><span class="line">    dist[s] = <span class="number">0</span>;</span><br><span class="line">    priority_queue&lt;point&gt; q;</span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>()) q.<span class="built_in">pop</span>();</span><br><span class="line">    q.<span class="built_in">push</span>(<span class="built_in">point</span>(s,<span class="number">0</span>));</span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        point now = q.<span class="built_in">top</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">if</span>(vis[now.id]) <span class="keyword">continue</span>;</span><br><span class="line">        vis[now.id] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = fir[now.id]; i; i = e[i].nxt)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> v = e[i].to;</span><br><span class="line">            <span class="type">int</span> d = dist[now.id] + e[i].val;</span><br><span class="line">            <span class="keyword">if</span>(d &lt; dist[v])</span><br><span class="line">            &#123;</span><br><span class="line">                dist[v] = d;</span><br><span class="line">                <span class="keyword">if</span>(!vis[v]) q.<span class="built_in">push</span>(<span class="built_in">point</span>(v,dist[v]));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> u, v, w;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;u, &amp;v, &amp;w);</span><br><span class="line">        <span class="built_in">Add</span>(u, v, w);</span><br><span class="line">    &#125;   </span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">        <span class="built_in">Add</span>(<span class="number">0</span>, i, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span>(!<span class="built_in">SPFA</span>(<span class="number">0</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;-1&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; ++i)</span><br><span class="line">        e[i].val += h[e[i].from] - h[e[i].to];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">Dijkstra</span>(i);</span><br><span class="line">        ll ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; ++j)</span><br><span class="line">            ans += j * (dist[j] == <span class="number">0x3f3f3f3f</span> ? <span class="number">1e9</span> : dist[j] - h[i] + h[j]);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="è´Ÿç¯åˆ¤å®š"><a href="#è´Ÿç¯åˆ¤å®š" class="headerlink" title="è´Ÿç¯åˆ¤å®š"></a>è´Ÿç¯åˆ¤å®š</h2><p>æ•´ä¸ªç¯æƒå€¼çš„å’Œä¸ºè´Ÿ</p>
<ol>
<li>åš SPFA æ—¶å€™å¯ä»¥å¤šè®°ä¸€ä¸ª$cnt_i$<br> ä»£è¡¨åˆ°è¿™ä¸ªç‚¹çš„æœ€çŸ­è·¯ç»å†äº†å‡ æ¡è¾¹<br> å¦‚æœè¿™ä¸ªæ•°é‡è¶…è¿‡äº†$n-1$ï¼Œè¯´æ˜æœ‰è´Ÿç¯</li>
<li>å¦‚æœä¸€ä¸ªç‚¹å…¥é˜Ÿè¶…è¿‡$n-1$æ¬¡ï¼Œä¹Ÿè¯´æ˜æœ‰è´Ÿç¯<br> åœ¨SPFAä¸­å…¥é˜Ÿä¸€æ¬¡è¯´æ˜åœ¨Bellman-Fordä¸­è¢«æ›´æ–°ä¸€æ¬¡ï¼Œå…¥é˜Ÿæ¬¡æ•°$\le$æ›´æ–°æ¬¡æ•°ã€‚</li>
</ol>
<h2 id="å·®åˆ†çº¦æŸ"><a href="#å·®åˆ†çº¦æŸ" class="headerlink" title="å·®åˆ†çº¦æŸ"></a>å·®åˆ†çº¦æŸ</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202302261942380.webp"
                      alt="image.webp"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202302262023262.webp"
                      alt="image.webp"
                ></p>
<p>å¯¹åº”æœ€çŸ­è·¯ä¸­çš„ $d &lt;&#x3D; dist [i]+w[i]$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202302262026480.webp"
                      alt="image.webp"
                ></p>
<p>æœ€å¤§å€¼å¯¹åº”æœ€çŸ­è·¯</p>
<p>è§£é‡Šï¼š</p>
<p>å¯¹äºæ¯ä¸€ä¸ª $a_i$ ï¼Œéƒ½æœ‰ä¸€ä¸ª$a_i$-$a_j$$\leqslant$$k_i$ </p>
<p>ä¹Ÿå°±æ˜¯$a_i$$\leqslant$$a_j$+$k_i$ </p>
<p>è¿™ä¸å°±æ˜¯æœ€çŸ­è·¯ä¸­çš„æ¾å¼›æ“ä½œå˜›ï¼</p>
<p>è¦ä½¿è¿™äº›æ¡ä»¶éƒ½æ»¡è¶³</p>
<p>å¼å­ä¸Šä¸‹ç›¸åŠ </p>
<p>é‚£ä¹ˆä¸€å®šæ˜¯å¯¹æ¯ä¸€ä¸ªä¸ç­‰å¼çš„å³é¢ä¹‹å’Œå–ä¸€ä¸ª$min$</p>
<p>ä¹Ÿå°±æ˜¯æ±‚ä¸€ä¸ª<del>æœ€å°å€¼</del>æœ€çŸ­è·¯</p>
<hr>
<p>é‚£ä¹ˆåŒç†</p>
<p>æœ€å°å€¼å¯¹åº”æœ€é•¿è·¯</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202302262039228.webp"
                      alt="image.webp"
                ></p>
<h1 id="æ ‘ä¸Šå·®åˆ†"><a href="#æ ‘ä¸Šå·®åˆ†" class="headerlink" title="æ ‘ä¸Šå·®åˆ†"></a>æ ‘ä¸Šå·®åˆ†</h1><blockquote>
<p>ä¾‹å­ï¼šå¯¹äºæ ‘ä¸Šçš„ä¸€äº›è·¯å¾„è¿›è¡Œè®¿é—®ï¼Œé—®ä¸€æ¡è·¯å¾„ä¸Šçš„ç‚¹è¢«è®¿é—®çš„æ¬¡æ•°ã€‚</p>
</blockquote>
<p>æ¯æ¬¡æœ‰ä¸€ä¸ª $s,t$ çš„è¯¢é—®ï¼Œå¯ä»¥æ‰¾åˆ°å®ƒä»¬çš„å…¬å…±ç¥–å…ˆ lcaï¼Œç„¶åè¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">d[s]++;</span><br><span class="line">d[t]++;</span><br><span class="line">d[lca]--;</span><br><span class="line">d[fa[lca]]--;</span><br></pre></td></tr></table></figure></div>

<p>è¿™æ ·è®¿é—®å€¼çš„æ—¶å€™ï¼Œè®¿é—®ä»¥è¯¥èŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘å’Œå³å¯ã€‚</p>
<p>è€Œå‡å¦‚å¯¹è¾¹å·®åˆ†ï¼Œå¯ä»¥æŠŠè¾¹æƒå¯¹åº”åˆ°è¾ƒæ·±çš„ç‚¹ä¸Šï¼Œç„¶åå°±å¯ä»¥å¾—åˆ°ä¸€ä¸‹æ“ä½œï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">d[s]++;</span><br><span class="line">d[t]++;</span><br><span class="line">d[lca] -= <span class="number">2</span>;</span><br></pre></td></tr></table></figure></div>

<hr>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P3128" >P3128<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">5e4</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, k, ans;</span><br><span class="line"><span class="type">int</span> cf[N];</span><br><span class="line"><span class="type">int</span> dep[N];</span><br><span class="line"><span class="type">int</span> fir[N];</span><br><span class="line"><span class="type">int</span> st[N][<span class="number">25</span>];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> nxt, to;</span><br><span class="line">&#125;e[N &lt;&lt; <span class="number">1</span>];</span><br><span class="line"><span class="type">int</span> cnt;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++cnt].to = v;</span><br><span class="line">    e[cnt].nxt = fir[u];</span><br><span class="line">    fir[u] = cnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs1</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> fa)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = fir[u]; i; i = e[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> v = e[i].to;</span><br><span class="line">        <span class="keyword">if</span>(v == fa) <span class="keyword">continue</span>;</span><br><span class="line">        st[v][<span class="number">0</span>] = u;</span><br><span class="line">        dep[v] = dep[u] + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= <span class="number">23</span>; j++)</span><br><span class="line">            st[v][j] = st[st[v][j - <span class="number">1</span>]][j - <span class="number">1</span>];</span><br><span class="line">        <span class="built_in">dfs1</span>(v, u);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">lca</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(dep[u] &lt; dep[v]) <span class="built_in">swap</span>(u, v);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">23</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">        <span class="keyword">if</span>(dep[st[u][i]] &gt;= dep[v])</span><br><span class="line">            u = st[u][i];</span><br><span class="line">    <span class="keyword">if</span>(u == v) <span class="keyword">return</span> u;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">23</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">        <span class="keyword">if</span>(st[u][i] != st[v][i])</span><br><span class="line">            u = st[u][i], v = st[v][i];</span><br><span class="line">    <span class="keyword">return</span> st[u][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">dfs2</span><span class="params">(<span class="type">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> sum = cf[u];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = fir[u]; i; i = e[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> v = e[i].to;</span><br><span class="line">        <span class="keyword">if</span>(v == st[u][<span class="number">0</span>]) <span class="keyword">continue</span>;</span><br><span class="line">        sum += <span class="built_in">dfs2</span>(v);</span><br><span class="line">        ans = <span class="built_in">max</span>(ans, sum);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cf[x]++;</span><br><span class="line">    cf[y]++;</span><br><span class="line">    <span class="type">int</span> l = <span class="built_in">lca</span>(x, y);</span><br><span class="line">    cf[l]--;</span><br><span class="line">    cf[st[l][<span class="number">0</span>]]--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;k);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; i++) </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> u, v;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;u, &amp;v);</span><br><span class="line">        <span class="built_in">add</span>(u, v);</span><br><span class="line">        <span class="built_in">add</span>(v, u);</span><br><span class="line">    &#125;</span><br><span class="line">    dep[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">dfs1</span>(<span class="number">1</span>, <span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= k; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> x, y;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;x, &amp;y);</span><br><span class="line">        <span class="built_in">update</span>(x, y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">dfs2</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="æ ‘ä¸Šåºåˆ—"><a href="#æ ‘ä¸Šåºåˆ—" class="headerlink" title="æ ‘ä¸Šåºåˆ—"></a>æ ‘ä¸Šåºåˆ—</h1><p>æ ‘çš„å­˜å‚¨æ–¹å¼ï¼š å½“ä½œæ— å‘å›¾</p>
<p>æ¦‚å¿µç•¥</p>
<p>è‡ªå·±ä¹Ÿæ˜¯è‡ªå·±çš„ç¥–å…ˆ</p>
<h2 id="æœ€è¿‘å…¬å…±ç¥–å…ˆé—®é¢˜ï¼ˆLCAï¼‰"><a href="#æœ€è¿‘å…¬å…±ç¥–å…ˆé—®é¢˜ï¼ˆLCAï¼‰" class="headerlink" title="æœ€è¿‘å…¬å…±ç¥–å…ˆé—®é¢˜ï¼ˆLCAï¼‰"></a>æœ€è¿‘å…¬å…±ç¥–å…ˆé—®é¢˜ï¼ˆLCAï¼‰</h2><p>å…¬å…±ç¥–å…ˆï¼šä¸¤ä¸ªç‚¹ç¥–å…ˆçš„äº¤é›†</p>
<p>æœ€è¿‘ï¼šæœ€é ä¸‹çš„å…¬å…±ç¥–å…ˆ</p>
<p>æœ€è¿‘å…¬å…±ç¥–å…ˆæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ</p>
<p>åˆ¤æ–­ä¸¤ä¸ªç‚¹æ€ä¹ˆèµ°</p>
<p>é‚£ä¹ˆæ€ä¹ˆæ±‚å‘¢ï¼Ÿ</p>
<p>æš´åŠ›ï¼Ÿ</p>
<p>è‹¥å‡å®š $p1 p2$ æ·±åº¦ç›¸åŒ</p>
<p>å¯ä»¥è®©å·¦å³ä¸¤ç‚¹åŒæ—¶å‘ä¸Šè·³</p>
<p>æŸæ—¶åˆ»ä¸¤ç‚¹é‡åˆ</p>
<p>æ„å‘³ç€é‡åˆ°äº†å…¬å…±ç¥–å…ˆ</p>
<ol>
<li>è°ƒæ•´æ·±åº¦</li>
<li>ä¸€èµ·è·³</li>
</ol>
<p>ä¼˜åŒ–ï¼š</p>
<p>æ…¢æ˜¯å› ä¸ºä¸€æ­¥ä¸€æ­¥è·³çš„</p>
<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è€ƒè™‘æ¯æ¬¡å¯ä»¥æ¯æ¬¡å¤šè·³å‡ æ­¥</p>
<h3 id="å€å¢æ±‚LCA"><a href="#å€å¢æ±‚LCA" class="headerlink" title="å€å¢æ±‚LCA"></a>å€å¢æ±‚LCA</h3><p>$f [i]  [j]$ è¡¨ç¤ºä» $i$ å‘ä¸Šè·³ $2^j$ æ­¥ä¼šè·³åˆ°å“ªä¸ªç‚¹ </p>
<p>éœ€è¦é¢„å¤„ç†</p>
<p>$f[i]   [0]&#x3D;fa[i]$</p>
<p>$2^j$&#x3D;$2^{j-1}$ + $2^{j-1}$</p>
<p>$f[i]   [j]&#x3D;f[   [i]   [j-1]   ]   [j-1]$</p>
<p>å‘ä¸Šè·³ $2^{j-1}$ æ­¥å†è·³ä¸€é</p>
<p>é‚£ä¹ˆæ±‚å‡ºæ¥å¯ä»¥æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ</p>
<p>æ±‚ $p1$ å’Œ $p2$ ä¹‹é—´çš„è¾¹æƒæœ€å°å€¼</p>
<p>æœ€å°å€¼ï¼Ÿ</p>
<p>ä¸æ”¯æŒä¿®æ”¹æ“ä½œã€‚</p>
<h3 id="DFS-åºæ±‚-LCA"><a href="#DFS-åºæ±‚-LCA" class="headerlink" title="DFS åºæ±‚ LCA"></a>DFS åºæ±‚ LCA</h3><p>å¯¹äº $u$ å’Œ $v$ çš„ $lca$ï¼Œåœ¨ dfs åºä¸Š $lca$ ä¸€å®šåœ¨ $u$ å’Œ $v$ ä¹‹é—´ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥ç»´æŠ¤ dfs åºåŒºé—´æœ€å°çš„ç‚¹çš„çˆ¶èŠ‚ç‚¹å³ $lca$ã€‚</p>
<p>æ³¨æ„åŒºé—´é•¿åº¦æœ¬æ¥ä¸º $dfsn_{y}-dfsn_x+1$ï¼Œä½†æ˜¯ç”±äºæŸ¥è¯¢çš„æ˜¯ $[dfsn_x+1,dfsn_y]$ï¼Œæ‰€ä»¥åŒºé—´é•¿åº¦ä¸º $dfsn_y-dfsn_x$ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">5e5</span> + <span class="number">8</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> idx, n, m, root, cnt;</span><br><span class="line"><span class="type">int</span> dfsn[N], st[<span class="number">25</span>][N], fir[N];</span><br><span class="line"><span class="type">int</span> Log2[N];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> to, nxt;</span><br><span class="line">&#125;e[N &lt;&lt; <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Log2[<span class="number">0</span>] = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        Log2[i] = Log2[i / <span class="number">2</span>] + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> dfsn[x] &lt; dfsn[y] ? x : y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++cnt].to = v;</span><br><span class="line">    e[cnt].nxt = fir[u];</span><br><span class="line">    fir[u] = cnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> fa)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    dfsn[u] = ++idx;</span><br><span class="line">    st[<span class="number">0</span>][idx] = fa; <span class="comment">// ä»¥ idx ä¸ºèµ·ç‚¹é•¿åº¦ä¸º (1 &lt;&lt; i) çš„åŒºé—´å†… dfsn æœ€å°çš„ç‚¹çš„çˆ¶äº²</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = fir[u]; i; i = e[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> v = e[i].to;</span><br><span class="line">        <span class="keyword">if</span> (v == fa) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="built_in">dfs</span>(v, u);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">lca</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == y) <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">if</span> (dfsn[x] &gt; dfsn[y]) <span class="built_in">swap</span>(x, y);</span><br><span class="line">    <span class="type">int</span> d = Log2[dfsn[y] - dfsn[x]]; <span class="comment">// +1 -1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">get</span>(st[d][dfsn[x] + <span class="number">1</span>], st[d][dfsn[y] - (<span class="number">1</span> &lt;&lt; d) + <span class="number">1</span>]); <span class="comment">// [dfsn_u + 1, dfsn_v]</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;n, &amp;m, &amp;root);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>, u, v; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;u, &amp;v);</span><br><span class="line">        <span class="built_in">add</span>(u, v);</span><br><span class="line">        <span class="built_in">add</span>(v, u);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">init</span>();</span><br><span class="line">    <span class="built_in">dfs</span>(root, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= Log2[n]; i++) <span class="comment">// Log2[i] ä¸‹å–æ•´</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j + (<span class="number">1</span> &lt;&lt; i) - <span class="number">1</span> &lt;= n; j++)</span><br><span class="line">            st[i][j] = <span class="built_in">get</span>(st[i - <span class="number">1</span>][j], st[i - <span class="number">1</span>][j + (<span class="number">1</span> &lt;&lt; (i - <span class="number">1</span>))]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>, u, v; i &lt;= m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;u, &amp;v);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">lca</span>(u, v));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="æ ‘çš„åºåˆ—åŒ–-å¹¶ä¸æ˜¯å®Œæ•´çš„çº¿æ®µæ ‘"><a href="#æ ‘çš„åºåˆ—åŒ–-å¹¶ä¸æ˜¯å®Œæ•´çš„çº¿æ®µæ ‘" class="headerlink" title="æ ‘çš„åºåˆ—åŒ–(å¹¶ä¸æ˜¯å®Œæ•´çš„çº¿æ®µæ ‘)"></a>æ ‘çš„åºåˆ—åŒ–(å¹¶ä¸æ˜¯å®Œæ•´çš„çº¿æ®µæ ‘)</h2><ul>
<li>æ ‘çŠ¶æ•°ç»„</li>
<li>çº¿æ®µæ ‘</li>
</ul>
<h3 id="1-DFSåº"><a href="#1-DFSåº" class="headerlink" title="1.DFSåº"></a>1.DFSåº</h3><ul>
<li>ä½œç”¨ï¼šæ ‘ä¸Šå­æ ‘æŸ¥è¯¢ä¿®æ”¹<ul>
<li><ol>
<li>ä»¥$P$ä¸ºæ ¹å­æ ‘æƒå€¼å’Œ</li>
</ol>
</li>
<li><ol start="2">
<li>æŠŠä»¥$P$ä¸ºæ ¹çš„å­æ ‘å…¨éƒ¨åŠ ä¸ŠæŸä¸€ä¸ªå€¼</li>
</ol>
</li>
<li><ol start="3">
<li>æŠŠæ ¹æ¢æˆ$P$</li>
</ol>
</li>
</ul>
</li>
</ul>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303111506405.webp"
                      alt="image.webp"
                ></p>
<p>ä»»ä½•ä¸€æ®µå­æ ‘éƒ½å¯¹åº”ä¸€æ®µåºåˆ—ä¸Šçš„åŒºé—´</p>
<ol>
<li>é€’å½’æ±‚å‡º</li>
<li>BFS æ±‚å‡º</li>
</ol>
<p>ä»£ç è§ $VScode$</p>
<p>åºåˆ—æ˜¯å†™å¥½äº†ï¼Œé‚£ä¹ˆæ€æ ·å®ç°å®ƒçš„ä½œç”¨å‘¢ï¼Ÿ</p>
<p>$1.$ $2.$éƒ½å¥½è¯´</p>
<p>ä½†æ˜¯3.æ€ä¹ˆå®ç°å‘¢</p>
<p>ä¼šæ”¹å˜ dfs åº</p>
<p>è§£å†³æ–¹æ³•ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303112037146.webp"
                      alt="image.webp"
                ></p>
<p>åªæ¢ä¸€æ¬¡</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303112038613.webp"
                      alt="image.webp"
                ></p>
<p>å“ªäº›ç‚¹çš„å­æ ‘ä¼šå‘ç”Ÿå˜åŒ–ï¼Ÿ</p>
<p>åªæœ‰$1$å·ç‚¹åˆ°$p$å·ç‚¹è·¯å¾„ä¸Šçš„ç‚¹çš„å­æ ‘æ‰ä¼šå‘ç”Ÿå˜åŒ–</p>
<p>ä¸ä¼šå½±å“å…¶å®ƒç‚¹</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303112051568.webp"
                      alt="image.webp"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303112055185.webp"
                      alt="image.webp"
                ></p>
<p>æŠŠä¸€æ®µåŒºé—´çš„è¯¢é—®æ”¹æˆä¸¤æ®µåŒºé—´çš„è¯¢é—®å°±å¯ä»¥äº†</p>
<hr>
<h3 id="2-æ‹¬å·åºåˆ—"><a href="#2-æ‹¬å·åºåˆ—" class="headerlink" title="2.æ‹¬å·åºåˆ—"></a>2.æ‹¬å·åºåˆ—</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303112058427.webp"
                      alt="image.webp"
                ></p>
<p>å®ƒèƒ½è§£å†³ä»€ä¹ˆæ ·çš„é—®é¢˜å‘¢ï¼Ÿ</p>
<p><strong>é“¾ä¸Šæ“ä½œ</strong></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303112104130.webp"
                      alt="image.webp"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303112105384.webp"
                      alt="image.webp"
                ></p>
<p>ç”¨ LCA æŠŠè¿™æ®µé“¾åˆ†æˆä¸¤éƒ¨åˆ†</p>
<p>è¿™æ ·å°±å¯ä»¥åˆ†åˆ«è¿›è¡Œæ±‚è§£ï¼ˆ <del>å¯èƒ½LCAè¢«ç®—äº†ä¸¤æ¬¡ï¼Œå‡å»ä¸€ä¸ªå°±å¯ä»¥äº†</del> ï¼‰</p>
<p>$5 \to 1$</p>
<p>$1 \to 9$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303112108436.webp"
                      alt="image.webp"
                ></p>
<p>é“¾æ±‚å’Œè½¬æ¢ä¸ºä¸¤ç«¯åŒºé—´æ±‚å’Œ</p>
<p>åªèƒ½ç”¨æ¥æ±‚é“¾çš„å’Œ</p>
<p>ä¸èƒ½æ±‚æœ€å¤§å€¼æœ€å°å€¼</p>
<p>å¯ä»¥ç”¨å€å¢æ¥åš</p>
<h1 id="ç”Ÿæˆæ ‘"><a href="#ç”Ÿæˆæ ‘" class="headerlink" title="ç”Ÿæˆæ ‘"></a>ç”Ÿæˆæ ‘</h1><ul>
<li>æ¦‚å¿µï¼š$n$ä¸ªç‚¹ä¸­æ‰¾$n-1$æ¡è¾¹ï¼Œä½¿å®ƒç»„æˆä¸€é¢—æ ‘</li>
</ul>
<h2 id="1-Prim"><a href="#1-Prim" class="headerlink" title="1.Prim"></a>1.Prim</h2><blockquote>
<p>æ¯æ¬¡é€‰æ‹©ä¸ç”Ÿæˆæ ‘è¿™ä¸ªè¿é€šå—çš„æœ€å°çš„ä¸€æ¡è¿æ¥çš„è¾¹ï¼ŒåŠ åˆ°è¿™ä¸ªè¿é€šå—å†…ã€‚</p>
</blockquote>
<p>ç»´æŠ¤ä¸¤ä¸ªé›†åˆï¼š</p>
<p>å·¦è¾¹çš„é›†åˆï¼šè¿˜æ²¡æœ‰åŠ åˆ°ç”Ÿæˆæ ‘ä¸­çš„ç‚¹</p>
<p>å³è¾¹çš„é›†åˆï¼šåŠ åˆ°ç”Ÿæˆæ ‘çš„ç‚¹</p>
<p>$dist$ æ•°ç»„ï¼šç‚¹iç»è¿‡ä¸€æ¡è¾¹åˆ°<strong>ç”Ÿæˆæ ‘</strong>ä¸Šçš„æœ€çŸ­è·ç¦»</p>
<p>èµ°ä¸åˆ°å°±æ˜¯æ— ç©·å¤§ï¼ˆåˆå§‹åŒ–ï¼‰</p>
<p>ä¸€å¼€å§‹ç”Ÿæˆæ ‘ä¸Šæ˜¯æ²¡æœ‰ç‚¹çš„</p>
<p>æ‰€ä»¥ç‚¹ $1$ çš„ $dist$ å°±æ˜¯ $0$</p>
<p>ç„¶åç”¨ä¸€å·ç‚¹æ›´æ–°å…¶ä»–ç‚¹</p>
<p><strong>æ¯è½®é€‰å·¦è¾¹ $dist$ å€¼æœ€å°çš„ç‚¹åŠ åˆ°å³è¾¹ç„¶åç”¨å®ƒæ¥æ›´æ–°å…¶å®ƒç‚¹</strong></p>
<p>æŠŠæ‰€æœ‰ç‚¹éƒ½æ”¾åˆ°å³è¾¹ä»¥åå°±åšå®Œäº†</p>
<p>è¿™å°±æ˜¯<strong>PRIM</strong>ç®—æ³•ï¼ˆ<del>Djkstraçš„å­ªç”Ÿå…„å¼Ÿ</del>ï¼‰</p>
<p>å®ƒä¸ Dijkstra æœ€å¤§çš„ä¸åŒå°±æ˜¯ Dijkstra ç»´æŠ¤çš„æ˜¯åˆ°èµ·ç‚¹çš„è·ç¦»ï¼Œè€Œ Prim ç»´æŠ¤çš„æ˜¯åˆ°å·²ç»ç”Ÿæˆçš„æœ€å°ç”Ÿæˆæ ‘çš„è¿é€šå—çš„è·ç¦»ã€‚</p>
<p>å †ä¼˜åŒ–ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303112233270.webp"
                      alt="image.webp"
                ></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">prim</span><span class="params">(<span class="type">int</span> s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(dist, <span class="number">0x3f</span>, <span class="built_in">sizeof</span>(dist));</span><br><span class="line">    dist[s] = <span class="number">0</span>;</span><br><span class="line">    heap.<span class="built_in">push</span>(<span class="built_in">point</span>(s, dist[s]));</span><br><span class="line">    <span class="keyword">while</span> (heap.<span class="built_in">size</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">auto</span> t = heap.<span class="built_in">top</span>();</span><br><span class="line">        heap.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">if</span> (vis[t.p]) <span class="keyword">continue</span>;</span><br><span class="line">        vis[t.p] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = fir[t.p]; i; i = ed[i].next)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> v = ed[i].e;</span><br><span class="line">            <span class="keyword">if</span> (ed[i].d &lt; dist[v])</span><br><span class="line">            &#123;</span><br><span class="line">                dist[v] = ed[i].d;</span><br><span class="line">                heap.<span class="built_in">push</span>(<span class="built_in">point</span>(v, dist[v]));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>$n^2$ ä»£ç ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">prim</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    vis[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++) dist[i] = graph[<span class="number">1</span>][i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j ++)</span><br><span class="line">    &#123;</span><br><span class="line">            <span class="type">int</span> minc = INF, p;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(vis[i] == <span class="number">0</span> &amp;&amp; dist[i] &lt; minc)</span><br><span class="line">                &#123;</span><br><span class="line">                    minc = dist[i];</span><br><span class="line">                    p = i;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(minc == INF) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">            vis[p] = <span class="number">1</span>;</span><br><span class="line">            res += dist[p];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(vis[i] == <span class="number">0</span> &amp;&amp; dist[i] &gt; graph[p][i])</span><br><span class="line">                    dist[i] = graph[p][i];</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>å¤æ‚åº¦ï¼š$O((N+M)logN)$ é€‚åˆç¨ å¯†å›¾ï¼Œä¹Ÿå°±æ˜¯ç‚¹å°‘äºè¾¹ã€‚</p>
<h2 id="2-Kruskal"><a href="#2-Kruskal" class="headerlink" title="2.Kruskal"></a>2.Kruskal</h2><h3 id="å‰ç½®ï¼šå¹¶æŸ¥é›†"><a href="#å‰ç½®ï¼šå¹¶æŸ¥é›†" class="headerlink" title="å‰ç½®ï¼šå¹¶æŸ¥é›†"></a>å‰ç½®ï¼šå¹¶æŸ¥é›†</h3><p>æ”¯æŒä¸¤ç§æ“ä½œï¼š</p>
<ul>
<li>æŸ¥è¯¢ä¸¤å…ƒç´ æ˜¯å¦åœ¨åŒä¸€é›†åˆä¸­</li>
<li>åˆå¹¶ä¸¤é›†åˆ</li>
</ul>
<p>ä»£ç ä¹Ÿæ˜¯ååˆ†çš„å¥½å†™å•Š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303121559302.webp"
                      alt="image.webp"
                ></p>
<p>å‡å¦‚æ˜¯æ¡é“¾å‘¢ï¼Ÿ</p>
<p>é‚£è¿™æ ·å°±å¤ªæ…¢äº†</p>
<p>æˆ‘ä»¬å¯ä»¥è¿›è¡Œä¸€äº›ä¼˜åŒ–</p>
<h4 id="å¯å‘å¼åˆå¹¶"><a href="#å¯å‘å¼åˆå¹¶" class="headerlink" title="å¯å‘å¼åˆå¹¶"></a>å¯å‘å¼åˆå¹¶</h4><p>ä¹‹å‰ä¸æ˜¯è°éƒ½å¯ä»¥åšçˆ¶äº²å—</p>
<p>ç°åœ¨è°çš„å­æ ‘å¤§ï¼Œè°å°±æ˜¯çˆ¶äº²</p>
<h4 id="æŒ‰ç§©åˆå¹¶"><a href="#æŒ‰ç§©åˆå¹¶" class="headerlink" title="æŒ‰ç§©åˆå¹¶"></a>æŒ‰ç§©åˆå¹¶</h4><p>è°çš„æ·±åº¦å¤§ï¼Œè°å°±æ˜¯çˆ¶äº²</p>
<h4 id="è·¯å¾„å‹ç¼©"><a href="#è·¯å¾„å‹ç¼©" class="headerlink" title="è·¯å¾„å‹ç¼©"></a>è·¯å¾„å‹ç¼©</h4><p>ä¸æ”¹å˜åˆå¹¶è¿‡ç¨‹</p>
<p>ä½†åœ¨<code>get_root</code>æ‰¾æ ¹çš„æ—¶å€™</p>
<p>æŠŠæ‰€æœ‰ç‚¹çš„çˆ¶äº²éƒ½å˜æˆæ ¹</p>
<p>å› ä¸ºæˆ‘ä»¬ä¸å…³å¿ƒæ ‘ä¸Šçš„çˆ¶å­å…³ç³»ï¼Œæˆ‘ä»¬åªå…³å¿ƒæ ¹æ˜¯è°</p>
<p><strong>è´ªå¿ƒ+å¹¶æŸ¥é›†</strong></p>
<h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><p>å°†è¾¹ä»å°åˆ°å¤§æ’åºï¼Œä»å°åˆ°å¤§æ¯æ¬¡æŒ‘ä¸€ä¸ªåŠ å…¥åˆ°æœ€å°ç”Ÿæˆæ ‘ä¸­ï¼Œè‹¥å½¢æˆç¯åˆ™è·³è¿‡ï¼Œåˆ¤æ–­ç¯å¯ä»¥ç”¨å¹¶æŸ¥é›†å®ç°ã€‚</p>
<p>å½“åœ¨è¾¹æ•°è¿œå¤§äºç‚¹æ•°çš„ç¨ å¯†å›¾ä¸­ï¼ŒKruskal ä¼šé‡å¤åˆ¤æ–­ä¸€äº›è¾¹å¯¼è‡´è¶…æ—¶ï¼Œè¿™æ—¶ Prim æ›´ä¼˜ã€‚</p>
<p>æ‰€ä»¥ Kruskal é€‚åˆè¾¹æ•°è¾ƒå°‘çš„ç¨€ç–å›¾ã€‚</p>
<h4 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h4><p><a class="link"   href="https://www.acwing.com/problem/content/1142/" >AcWing1140<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">110</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> w[N][N];</span><br><span class="line"><span class="type">int</span> dist[N];</span><br><span class="line"><span class="type">bool</span> st[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">prim</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(dist, <span class="number">0x3f</span>, <span class="built_in">sizeof</span>(dist));</span><br><span class="line">    dist[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> t = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">            <span class="keyword">if</span>(!st[j] &amp;&amp; (t == <span class="number">-1</span> || dist[t] &gt; dist[j]))</span><br><span class="line">                t = j;</span><br><span class="line">        res += dist[t];</span><br><span class="line">        st[t] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">            dist[j] = <span class="built_in">min</span>(dist[j], w[t][j]);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">            cin &gt;&gt; w[i][j];</span><br><span class="line">    cout &lt;&lt; <span class="built_in">prim</span>() &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><a class="link"   href="https://www.acwing.com/problem/content/1143/" >AcWing1141<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">110</span>, M = <span class="number">210</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ±‚åŸå›¾çš„æœ€å°ç”Ÿæˆâ€œæ£®æ—â€</span></span><br><span class="line"><span class="comment">// æ€»è¾¹æƒå‡å»ç”Ÿæˆçš„è¾¹æƒå³å¯</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> p[N];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a, b, w;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span> &lt; (<span class="type">const</span> edge &amp;t) <span class="type">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> w &lt; t.w;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;e[M];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(p[x] != x) p[x] = <span class="built_in">find</span>(p[x]);</span><br><span class="line">    <span class="keyword">return</span> p[x];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) p[i] = i;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> a, b, c;</span><br><span class="line">        cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;</span><br><span class="line">        e[i] = &#123;a, b, c&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(e + <span class="number">1</span>, e + <span class="number">1</span> + m);</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> a = <span class="built_in">find</span>(e[i].a), b = <span class="built_in">find</span>(e[i].b), w = e[i].w;</span><br><span class="line">        <span class="keyword">if</span>(a != b) p[a] = b;</span><br><span class="line">        <span class="keyword">else</span> res += w; <span class="comment">// åœ¨æ‰¾æœ€å°ç”Ÿæˆæ ‘çš„æ—¶å€™æŠŠä¸éœ€è¦çš„è¾¹ç»™å­˜èµ·æ¥å°±å¥½äº†</span></span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><a class="link"   href="https://www.acwing.com/problem/content/1144/" >AcWing1142<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">310</span>, M = <span class="number">11111</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> p[N];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a, b, w;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span> &lt; (<span class="type">const</span> edge &amp;t) <span class="type">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> w &lt; t.w;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;e[M];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(p[x] != x) p[x] = <span class="built_in">find</span>(p[x]);</span><br><span class="line">    <span class="keyword">return</span> p[x];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) p[i] = i;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">        cin &gt;&gt; e[i].a &gt;&gt; e[i].b &gt;&gt; e[i].w;</span><br><span class="line">    <span class="built_in">sort</span>(e, e + m);</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> a = <span class="built_in">find</span>(e[i].a), b = <span class="built_in">find</span>(e[i].b);</span><br><span class="line">        <span class="type">int</span> w = e[i].w;</span><br><span class="line">        <span class="keyword">if</span>(a != b)</span><br><span class="line">        &#123;</span><br><span class="line">            p[a] = b;</span><br><span class="line">            res = w;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; n - <span class="number">1</span> &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><a class="link"   href="https://www.acwing.com/problem/content/1145/" >AcWing1143<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">2200</span>, M = <span class="number">10010</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> p[N];</span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a, b, w;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span> &lt; (<span class="type">const</span> edge &amp;t) <span class="type">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> w &lt; t.w;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;e[M];</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›¸å½“äºç¼©ç‚¹ï¼Œå˜å®Œä»¥åæ±‚ä¸€ä¸ªæœ€å°ç”Ÿæˆæ ‘</span></span><br><span class="line"><span class="comment">// å…¶å®ç›´æ¥è·‘æœ€å°ç”Ÿæˆæ ‘å³å¯</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x != p[x]) p[x] = <span class="built_in">find</span>(p[x]);</span><br><span class="line">    <span class="keyword">return</span> p[x];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) p[i] = i;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> g, u, v, w;</span><br><span class="line">        cin &gt;&gt; g &gt;&gt; u &gt;&gt; v &gt;&gt; w;</span><br><span class="line">        <span class="keyword">if</span>(g == <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> a = <span class="built_in">find</span>(u), b = <span class="built_in">find</span>(v);</span><br><span class="line">            p[a] = b;</span><br><span class="line">            res += w;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> e[++cnt] = &#123;u, v, w&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(e + <span class="number">1</span>, e + <span class="number">1</span> + cnt);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= cnt; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> a = <span class="built_in">find</span>(e[i].a), b = <span class="built_in">find</span>(e[i].b);</span><br><span class="line">        <span class="keyword">if</span>(a != b)</span><br><span class="line">        &#123;</span><br><span class="line">            p[a] = b;</span><br><span class="line">            res += e[i].w;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><a class="link"   href="https://www.acwing.com/problem/content/1146/" >AcWing1144<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1010</span>, M = <span class="number">2e6</span> + <span class="number">7</span>; <span class="comment">// ä¸¥æ ¼æ¥è¯´æœ€å¤šæœ‰ 2mn - m - n æ¡è¾¹</span></span><br><span class="line"><span class="comment">// ç”±äºè¾¹æƒåªæœ‰ä¸¤ç§ï¼Œæ‰€ä»¥ç›´æ¥æŒ‰ç…§é¡ºåºå»ºè¾¹å³å¯ï¼Œæ— éœ€æ’åº</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> ids[N][N];</span><br><span class="line"><span class="type">int</span> p[N * N];</span><br><span class="line"><span class="type">int</span> cnt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a, b, w;</span><br><span class="line">&#125;e[M];</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨æ„ï¼šå¦‚æœè¾¹æƒå¯æ­£å¯è´Ÿï¼Œæ‰€ä»¥ä¸ä¸€å®šæ˜¯æœ€å°ç”Ÿæˆæ ‘çš„é—®é¢˜</span></span><br><span class="line"><span class="comment">// è€Œè¿™ä¸ªé—®é¢˜è¾¹è‚¯å®šè¶Šå°‘è¶Šå¥½</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x != p[x]) p[x] = <span class="built_in">find</span>(p[x]);</span><br><span class="line">    <span class="keyword">return</span> p[x];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">get_edges</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> dx[] = &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>&#125;;</span><br><span class="line">    <span class="type">int</span> dy[] = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">-1</span>&#125;;</span><br><span class="line">    <span class="type">int</span> dw[] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>&#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> z = <span class="number">0</span>; z &lt; <span class="number">2</span>; z++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; j++)</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> u = <span class="number">0</span>; u &lt; <span class="number">4</span>; u++)</span><br><span class="line">                    <span class="keyword">if</span>((u &amp; <span class="number">1</span>) == z)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="type">int</span> x = i + dx[u], y = j + dy[u];</span><br><span class="line">                        <span class="type">int</span> w = dw[u];</span><br><span class="line">                        <span class="keyword">if</span>(x &lt; <span class="number">0</span> || x &gt; n || y &lt; <span class="number">0</span> || y &gt; m) <span class="keyword">continue</span>;</span><br><span class="line">                        <span class="type">int</span> a = ids[i][j], b = ids[x][y];</span><br><span class="line">                        <span class="keyword">if</span>(a &lt; b) e[++cnt] = &#123;a, b, w&#125;;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> x1, y1, x2, y2;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>, t = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; j++, t++)</span><br><span class="line">            ids[i][j] = t;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n * m; i++)</span><br><span class="line">        p[i] = i;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; x1 &gt;&gt; y1 &gt;&gt; x2 &gt;&gt; y2)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> a = ids[x1][y1], b = ids[x2][y2];</span><br><span class="line">        p[<span class="built_in">find</span>(a)] = <span class="built_in">find</span>(b);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">get_edges</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= cnt; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> a = <span class="built_in">find</span>(e[i].a), b = <span class="built_in">find</span>(e[i].b), w = e[i].w;</span><br><span class="line">        <span class="keyword">if</span>(a != b)</span><br><span class="line">        &#123;</span><br><span class="line">            p[a] = b;</span><br><span class="line">            res += w;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h4 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h4><ul>
<li>ä»»æ„ä¸€é¢—æœ€å°ç”Ÿæˆæ ‘ä¸€å®šå¯ä»¥åŒ…å«æ— å‘å›¾ä¸­æœ€å°çš„è¾¹ã€‚</li>
<li>ç»™å®šä¸€å¼ æ— å‘å›¾ï¼Œè‹¥ä»ä¸­é€‰å‡ºå°äº $n - 1$ æ¡è¾¹ä½¿å…¶æ„æˆä¸€ä¸ªç”Ÿæˆæ£®æ—ï¼Œç„¶åå†ä»å‰©ä¸‹çš„è¾¹ä¸­é€‰å– $m - k$ æ¡è¾¹ä½¿å¾—å®ƒæˆä¸ºä¸€é¢—ç”Ÿæˆæ ‘ï¼Œå¹¶ä¸”é€‰å‡ºçš„æƒå€¼ä¹‹å’Œæœ€å°ã€‚é‚£ä¹ˆè¯¥ç”Ÿæˆæ ‘ä¸€å®šå¯ä»¥åŒ…å«è¿™ $m - k$ æ¡è¾¹ä¸­è¿æ¥ç”Ÿæˆæ£®æ—çš„ä¸¤ä¸ªä¸è¿é€šèŠ‚ç‚¹çš„æƒå€¼æœ€å°çš„è¾¹ï¼ˆç›¸å½“äºç¼©ç‚¹åæ±‚æœ€å°ç”Ÿæˆæ ‘ï¼‰ã€‚</li>
</ul>
<p><a class="link"   href="https://www.acwing.com/problem/content/1148/" >AcWing1146<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>è™šæ‹Ÿæºç‚¹çš„æ€æƒ³ã€‚</p>
<p>è®©è¿™ $n + 1$ ä¸ªç‚¹è¿é€šï¼Œæ±‚ä¸ªæœ€å°ç”Ÿæˆæ ‘å³å¯ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">310</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> w[N][N];</span><br><span class="line"><span class="type">int</span> dist[N];</span><br><span class="line"><span class="type">bool</span> st[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">prim</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(dist, <span class="number">0x3f</span>, <span class="built_in">sizeof</span>(dist));</span><br><span class="line">    dist[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> t = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt;= n + <span class="number">1</span>; j ++)</span><br><span class="line">            <span class="keyword">if</span>(!st[j] &amp;&amp; (t == <span class="number">-1</span> || dist[t] &gt; dist[j]))</span><br><span class="line">                t = j;</span><br><span class="line">        st[t] = <span class="literal">true</span>;</span><br><span class="line">        res += dist[t];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt;= n; j++) dist[j] = <span class="built_in">min</span>(dist[j], w[t][j]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;w[<span class="number">0</span>][i]);</span><br><span class="line">        w[i][<span class="number">0</span>] = w[<span class="number">0</span>][i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;w[i][j]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">prim</span>());</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><a class="link"   href="https://www.acwing.com/problem/content/1147/" >AcWing1145<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>å¯ä»¥å…ˆäºŒåˆ†åéå†ã€‚</p>
<p>ä¹Ÿå¯ä»¥ç”¨å¹¶æŸ¥é›†ç»´æŠ¤è¿é€šå—çš„æ•°é‡ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">510</span>, M = N * N / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; PII;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> x first </span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> y second</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰¾ä¸€ä¸ªæœ€å°çš„ d å€¼ï¼Œä½¿å¾—å°†æ‰€æœ‰ &gt; d çš„è¾¹åˆ å®Œåè¿é€šå—çš„ä¸ªæ•° &lt;= k</span></span><br><span class="line"><span class="comment">// ç”¨å¹¶æŸ¥é›†ç»´æŠ¤è¿é€šå—æ•°é‡å³å¯ï¼Œå½“å®ƒç­‰äº k æ—¶ï¼Œæ­¤æ—¶çš„è¾¹æƒå°±æ˜¯ç­”æ¡ˆ</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, k, m;</span><br><span class="line">PII q[M];</span><br><span class="line"><span class="type">int</span> p[N];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a, b;</span><br><span class="line">    <span class="type">double</span> w;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span> &lt; (<span class="type">const</span> edge &amp;t) <span class="type">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> w &lt; t.w;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;e[M];</span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">dist</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> dx = q[a].x - q[b].x;</span><br><span class="line">    <span class="type">int</span> dy = q[a].y - q[b].y;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sqrt</span>(dx * dx + dy * dy);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x != p[x]) p[x] = <span class="built_in">find</span>(p[x]);</span><br><span class="line">    <span class="keyword">return</span> p[x];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; k;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) cin &gt;&gt; q[i].x &gt;&gt; q[i].y;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt; i; j++)</span><br><span class="line">            e[++m] = &#123;i, j, <span class="built_in">dist</span>(i, j)&#125;;</span><br><span class="line">    <span class="built_in">sort</span>(e + <span class="number">1</span>, e + m + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) p[i] = i;</span><br><span class="line">    <span class="type">int</span> cnt = n;</span><br><span class="line">    <span class="type">double</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(cnt == k) <span class="keyword">break</span>; <span class="comment">// é˜²æ­¢äº†ä¸€å¼€å§‹ k = cnt çš„æƒ…å†µ</span></span><br><span class="line">        <span class="type">int</span> a = <span class="built_in">find</span>(e[i].a), b = <span class="built_in">find</span>(e[i].b);</span><br><span class="line">        <span class="type">double</span> w = e[i].w;</span><br><span class="line">        <span class="keyword">if</span>(a != b)</span><br><span class="line">        &#123;</span><br><span class="line">            p[a] = b;</span><br><span class="line">            cnt--;</span><br><span class="line">            res = w; <span class="comment">// é˜²æ­¢äº† k = 0 çš„æƒ…å†µ</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%.2lf\n&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><a class="link"   href="https://www.acwing.com/problem/content/348/" >AcWing346<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>æ¯æ¬¡åˆå¹¶è¿é€šå—çš„æ—¶å€™ï¼Œè¦æŠŠè¿™ä¸¤ä¸ªè¿é€šå—å˜æˆä¸€å¼ å®Œå…¨å›¾ï¼Œè¿™æ ·åˆå¹¶åˆ°æœ€åå¾—åˆ°çš„ä¹Ÿæ˜¯å®Œå…¨å›¾ã€‚</p>
<p>åŠ è¾¹ï¼Œæœ€å°åªèƒ½åŠ åŸæ¥çš„è¾¹æƒåŠ ä¸€ï¼Œå› ä¸ºè¦ä¿è¯æœ€å°ç”Ÿæˆæ ‘ä¸å˜ä¸”å”¯ä¸€ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">6010</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> M = (N * N) &gt;&gt; <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> p[N], siz[N];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a, b, w;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span> &lt; (<span class="type">const</span> edge &amp;t) <span class="type">const</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> w &lt; t.w;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;e[M];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x != p[x]) p[x] = <span class="built_in">find</span>(p[x]);</span><br><span class="line">    <span class="keyword">return</span> p[x];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; n;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; i++)</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;e[i].a, &amp;e[i].b, &amp;e[i].w);</span><br><span class="line">        <span class="built_in">sort</span>(e + <span class="number">1</span>, e + n);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) p[i] = i, siz[i] = <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> a = <span class="built_in">find</span>(e[i].a), b = <span class="built_in">find</span>(e[i].b);</span><br><span class="line">            <span class="type">int</span> w = e[i].w;</span><br><span class="line">            <span class="keyword">if</span>(a != b)</span><br><span class="line">            &#123;</span><br><span class="line">                res += (siz[a] * siz[b] - <span class="number">1</span>) * (w + <span class="number">1</span>);</span><br><span class="line">                siz[b] += siz[a];</span><br><span class="line">                p[a] = b;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><a class="link"   href="https://www.acwing.com/problem/content/1150/" >AcWing1148<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>ä¸¥æ ¼æ¬¡å°ç”Ÿæˆæ ‘ã€‚</p>
<ol>
<li>å…ˆæ±‚æœ€å°ç”Ÿæˆæ ‘ï¼Œç„¶åä¾æ¬¡æšä¸¾åˆ å»æœ€å°ç”Ÿæˆæ ‘ä¸­çš„è¾¹å†è·‘æœ€å°ç”Ÿæˆæ ‘ã€‚</li>
</ol>
<p>è¿™æ ·åšæ˜¯ $O(mlogm + nm)$ </p>
<p>è¿™æ ·åšå¾—åˆ°çš„åªæ˜¯æ¬¡å°ç”Ÿæˆæ ‘ï¼Œä¸ä¿è¯ä¸¥æ ¼æ¬¡å°ã€‚</p>
<ol start="2">
<li>å…ˆæ±‚æœ€å°ç”Ÿæˆæ ‘ï¼Œç„¶åä¾æ¬¡æšä¸¾éæ ‘è¾¹ï¼Œç„¶åå°†è¯¥è¾¹åŠ å…¥æ ‘ä¸­ï¼ŒåŒæ—¶ä»æ ‘ä¸­è¿™ä¸ªç¯ä¸Šä»»æ„å»æ‰ä¸€æ¡è¾¹ï¼Œä½¿å¾—æœ€ç»ˆçš„å›¾æ˜¯ä¸€é¢—æ ‘ï¼Œé‚£ä¹ˆä¸€å®šèƒ½æ±‚å‡ºæ¬¡å°ç”Ÿæˆæ ‘ã€‚</li>
</ol>
<p>è¦ä¿è¯æ±‚å¾—æ˜¯ä»…æ¬¡äºæœ€å°çš„æœ€å°ï¼Œæ‰€ä»¥åˆ å»çš„è¾¹è¦å°½å¯èƒ½å¤§ï¼Œå…¶å®å°±æ˜¯æ±‚æ ‘ä¸Šä»»æ„ä¸¤ç‚¹é—´çš„ä¸€ä¸ªæå€¼ï¼Œè¿™ä¸ªå¯ä»¥ç”¨å€å¢æ¥åšï¼Œä¹Ÿå¯ä»¥æš´åŠ›é¢„å¤„ç†ã€‚</p>
<p>å¤æ‚åº¦ï¼š $n^{2}+m$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202310051540963.webp"
                      alt="image.png"
                ></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">510</span>, M = <span class="number">10010</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m, cnt;</span><br><span class="line"><span class="type">int</span> p[N];</span><br><span class="line"><span class="type">int</span> dist[N][N];</span><br><span class="line"><span class="type">int</span> dist2[N][N];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a, b, w;</span><br><span class="line">    <span class="type">bool</span> f = <span class="literal">false</span>;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span> &lt; (<span class="type">const</span> edge &amp;t) <span class="type">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> w &lt; t.w;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;ed[M];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> nxt, to, val;</span><br><span class="line">&#125;e[N &lt;&lt; <span class="number">1</span>]; <span class="comment">// å»ºæ ‘å³å¯</span></span><br><span class="line"><span class="type">int</span> fir[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> v, <span class="type">int</span> w)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++cnt].to = v;</span><br><span class="line">    e[cnt].nxt = fir[u];</span><br><span class="line">    e[cnt].val = w;</span><br><span class="line">    fir[u] = cnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x != p[x]) p[x] = <span class="built_in">find</span>(p[x]);</span><br><span class="line">    <span class="keyword">return</span> p[x];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> fa, <span class="type">int</span> maxd, <span class="type">int</span> maxd2, <span class="type">int</span> d[], <span class="type">int</span> d2[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    d[u] = maxd, d2[u] = maxd2;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = fir[u]; i; i = e[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> v = e[i].to;</span><br><span class="line">        <span class="keyword">if</span>(v == fa) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="type">int</span> td1 = maxd, td2 = maxd2; <span class="comment">// ä¿è¯æ¯æ¬¡å¾ªç¯ td1 å’Œ td2 åˆå€¼ä¸€æ ·</span></span><br><span class="line">        <span class="keyword">if</span>(e[i].val &gt; td1)</span><br><span class="line">        &#123;</span><br><span class="line">            td2 = td1;</span><br><span class="line">            td1 = e[i].val;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(e[i].val &lt; maxd &amp;&amp; e[i].val &gt; maxd2) td2 = e[i].val;</span><br><span class="line">        <span class="built_in">dfs</span>(v, u, td1, td2, d, d2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> a, b, w;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;a, &amp;b, &amp;w);</span><br><span class="line">        ed[i] = &#123;a, b, w&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(ed + <span class="number">1</span>, ed + m + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) p[i] = i;</span><br><span class="line">    ll sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> a = ed[i].a, b = ed[i].b;</span><br><span class="line">        <span class="type">int</span> pa = <span class="built_in">find</span>(a), pb = <span class="built_in">find</span>(b), w = ed[i].w;</span><br><span class="line">        <span class="keyword">if</span>(pa != pb)</span><br><span class="line">        &#123;</span><br><span class="line">            p[pa] = pb;</span><br><span class="line">            sum += w;</span><br><span class="line">            <span class="built_in">add</span>(a, b, w);</span><br><span class="line">            <span class="built_in">add</span>(b, a, w);</span><br><span class="line">            ed[i].f = <span class="literal">true</span>; <span class="comment">// æ˜¯æ ‘è¾¹</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ll res = <span class="number">1e18</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) <span class="built_in">dfs</span>(i, <span class="number">-1</span>, <span class="number">-1e9</span>, <span class="number">-1e9</span>, dist[i], dist2[i]);</span><br><span class="line">    <span class="comment">// å½“å‰ç‚¹ç¼–å·ï¼Œçˆ¶èŠ‚ç‚¹ç¼–å·ï¼Œå½“å‰è¾¹æƒæœ€å¤§å€¼</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">        <span class="keyword">if</span>(!ed[i].f)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> a = ed[i].a, b = ed[i].b, w = ed[i].w;</span><br><span class="line">            <span class="keyword">if</span>(w &gt; dist[a][b])</span><br><span class="line">                res = <span class="built_in">min</span>(res, sum + w - dist[a][b]);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(w &gt; dist2[a][b]) res = <span class="built_in">min</span>(res, sum + w - dist2[a][b]);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="3-æ¬¡å°ç”Ÿæˆæ ‘"><a href="#3-æ¬¡å°ç”Ÿæˆæ ‘" class="headerlink" title="3.æ¬¡å°ç”Ÿæˆæ ‘"></a>3.æ¬¡å°ç”Ÿæˆæ ‘</h2><p>æˆ‘ä»¬å‘ç°æ¬¡å°ç”Ÿæˆæ ‘è‚¯å®šæ˜¯é€šè¿‡æœ€å°ç”Ÿæˆæ ‘æ¥æ±‚çš„ï¼ˆæ›¿æ¢ä¸€æ¡è¾¹ï¼‰</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303121644918.webp"
                      alt="image.webp"
                ></p>
<p>è·¯å¾„ä¸Šæ‰¾åˆ°æœ€å¤§çš„ V1 è¿›è¡Œæ›¿æ¢</p>
<p>æ¢ä¸º$V_2$</p>
<p>æ€ä¹ˆæ‰¾æœ€å¤§çš„è¾¹å‘¢ï¼Ÿ</p>
<p>è¿›è¡Œä¸€ä¸ªå€å¢ LCA</p>
<p>åœ¨ LCA çš„è¿‡ç¨‹ä¸­æ‰¾åˆ°æœ€å¤§å€¼</p>
<p>1.å…ˆæ±‚æœ€å°ç”Ÿæˆæ ‘</p>
<p>2.ç”¨éæ ‘ä¸Šçš„è¾¹æ›¿æ¢æ ‘ä¸Šé“¾çš„æœ€å¤§å€¼</p>
<p>3.æ±‚æœ€å¤§å€¼å¯ä»¥ç”¨ LCA æ¥åš</p>
<p>æˆ‘ä¸å€å¢æ±‚äº†</p>
<p>æˆ‘æš´åŠ›ï¼</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303121650480.webp"
                      alt="image.webp"
                ></p>
<p>$O(nm)$</p>
<p>å› ä¸º Kruscal æ±‚çš„æ—¶å€™å¯¹æ¯æ¡è¾¹æ’äº†ä¸ªåº</p>
<p>æ‰€ä»¥å¯ä»¥ç”¨æ’çš„åºå¯¹éæ ‘è¾¹ä»å°åˆ°å¤§å»æšä¸¾</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303121653816.webp"
                      alt="image.webp"
                ></p>
<p>ä»¥è¿™å¼ å›¾ä¸ºä¾‹</p>
<p>å…ˆä¸€ç‚¹ç‚¹æ±‚ä¸€ä¸ª$V_1$ï¼Œä¹Ÿå°±æ˜¯åŠ ç²—çš„è¾¹</p>
<p>ç„¶å$V_2$ä»…æ¬¡å¤§äº$V_1$</p>
<p>æˆ‘ä»¬å‘ç°åœ¨$V_2$çš„é“¾ä¸Šæœ‰ä¸¤æ¡åŠ ç²—çš„è¾¹ï¼Œä¹Ÿå°±æ˜¯æ±‚$V_1$çš„æ—¶å€™è®¿é—®è¿‡äº†</p>
<p>å‡å¦‚ç”¨$V_2$æ›¿æ¢æ‰è¿™ä¸¤æ¡åŠ ç²—è¾¹ä¸­çš„ä¸€æ¡ï¼Œé‚£ä¹ˆä¼šä¸ä¼šæ˜¯æ¬¡å°ç”Ÿæˆæ ‘</p>
<p>è®¾åŠ ç²—è¾¹ä¸­çš„ä¸€æ¡é•¿åº¦ä¸º$a$</p>
<p>é‚£ä¹ˆåˆ†åˆ«æ›¿æ¢åæ ‘çš„å˜åŒ–</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303121656465.webp"
                      alt="image.webp"
                ></p>
<p>å¾ˆæ˜æ˜¾ï¼Œåœ¨$V_1$çš„æ—¶å€™å°±æ›¿æ¢$a$æ¯”åœ¨$V_2$çš„æ—¶å€™å†æ›¿æ¢$a$è¿˜è¦å°</p>
<p>è€Œåœ¨$V_1$çš„æ—¶å€™å¹¶æ²¡æœ‰æ›¿æ¢$a$</p>
<p>æ‰€ä»¥$V_2$æ›¿æ¢äº†$a$ä¸€å®šä¸ä¼šæ˜¯æ¬¡å°çš„</p>
<p>å› ä¸ºæ‹¿$V_1$æ›¿æ¢$a$æ˜¯æ›´ä¼˜çš„</p>
<p>æ¢è€Œè¨€ä¹‹</p>
<p>ä¸€æ¡è¾¹ä¹‹å‰å·²ç»è¢«æ›´å°çš„è¾¹åˆ¤æ–­è¿‡äº†</p>
<p>æ‹¿æ›´å¤§çš„è¾¹å»åˆ¤æ–­å·²ç»åˆ¤æ–­è¿‡çš„è¾¹æ˜¯æ²¡æœ‰æ„ä¹‰çš„</p>
<p>ä¹Ÿå°±æ˜¯æŠŠéæ ‘è¾¹ä»å°åˆ°å¤§æšä¸¾</p>
<p>æ•´ä¸ªæ ‘ä¸Šçš„è¾¹æœ€å¤šåªéœ€è¦è¢«åˆ¤æ–­ä¸€æ¬¡å°±å¤Ÿäº†</p>
<p>æ‰€ä»¥å¤æ‚åº¦å°±å˜ä¸ºäº†$O(m+n)$</p>
<p>é‚£æ€ä¹ˆä¿è¯åªåˆ¤æ–­ä¸€æ¬¡å‘¢ï¼Ÿ</p>
<p><del>éå†ä¸€æ¬¡å°±æŠŠå®ƒåˆ æ‰</del></p>
<p>å½“ç„¶æ˜¯ç”¨å¹¶æŸ¥é›†å’¯</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303121703782.webp"
                      alt="image.webp"
                ></p>
<p>å‡è®¾è¿™æ˜¯ç¬¬ä¸€æ¬¡éå†</p>
<p>é‚£ä¹ˆå°±æŠŠè¿™æ¡è·¯å¾„ä¸Šçš„ç‚¹å¹¶ä¸ºä¸€ä¸ªé›†åˆ</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303121704207.webp"
                      alt="image.webp"
                ></p>
<p>ç¬¬äºŒæ¬¡éå†</p>
<p>å› ä¸ºå³ä¸‹è§’çš„é‚£ä¸ªç‚¹æ›´æ·±ï¼Œå› æ­¤å‘ä¸Šè·³</p>
<p>å‘ç°è·³åˆ°äº†ä¹‹å‰å·²ç»è·³åˆ°è¿‡çš„ç‚¹</p>
<p>é‚£ä¹ˆå°±ç›´æ¥è·³åˆ°å®ƒçš„ç¥–å…ˆ</p>
<p>ä¹Ÿå°±æ˜¯å‘ä¸Šè·³ä¸€æ­¥</p>
<p>å°±æŠŠå®ƒåŠ åˆ°å®ƒçˆ¶äº²çš„å¹¶æŸ¥é›†é‡Œ</p>
<p>å†è·³åˆ°å®ƒçˆ¶äº²çš„ç¥–å…ˆä½ç½®</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303121706757.webp"
                      alt="image.webp"
                ></p>
<p>æ¢å¥è¯è¯´</p>
<p>å‡å¦‚æŸæ¡è¾¹å·²ç»è¢«è€ƒè™‘è¿‡äº†</p>
<p>é‚£ä¹ˆå°±æŠŠå®ƒè¿æ¥çš„ä¸¤ä¸ªç‚¹åŠ åˆ°åŒä¸€ä¸ªå¹¶æŸ¥é›†ä¸­</p>
<p>è¿™æ ·å°±å¯ä»¥ä¿è¯æ¯ä¸ªç‚¹åªè®¿é—®äº†ä¸€æ¬¡</p>
<p>å¹¶æŸ¥é›†$O(1)$æŸ¥è¯¢</p>
<h1 id="æ¬§æ‹‰è·¯"><a href="#æ¬§æ‹‰è·¯" class="headerlink" title="æ¬§æ‹‰è·¯"></a>æ¬§æ‹‰è·¯</h1><h2 id="æ¬§æ‹‰è·¯å¾„"><a href="#æ¬§æ‹‰è·¯å¾„" class="headerlink" title="æ¬§æ‹‰è·¯å¾„"></a>æ¬§æ‹‰è·¯å¾„</h2><p>ä¸€æ¡è·¯å¾„ç»è¿‡æ‰€æœ‰çš„è¾¹ä¸”åªç»è¿‡ä¸€æ¬¡ã€‚</p>
<p>è‹¥èµ·ç‚¹å’Œç»ˆç‚¹ç›¸åŒï¼Œåˆ™ç§°ä¹‹ä¸º<strong>æ¬§æ‹‰å›è·¯</strong>ã€‚</p>
<p>æ— å‘å›¾å­˜åœ¨æ¬§æ‹‰å›è·¯çš„æ¡ä»¶ï¼šæ‰€æœ‰ç‚¹çš„åº¦æ•°éƒ½ä¸ºå¶æ•°ã€‚</p>
<p>æ— å‘å›¾å­˜åœ¨æ¬§æ‹‰è·¯å¾„ï¼š æ°æœ‰ä¸¤ä¸ªç‚¹åº¦æ•°ä¸ºå¥‡æ•°ï¼ˆèµ·ç‚¹å’Œç»ˆç‚¹ï¼‰ã€‚</p>
<p>æœ‰å‘å›¾å­˜åœ¨æ¬§æ‹‰å›è·¯ï¼šæ‰€æœ‰ç‚¹éƒ½æ»¡è¶³ <strong>å…¥åº¦ç­‰äºå‡ºåº¦</strong>ã€‚</p>
<p>æœ‰å‘å›¾å­˜åœ¨æ¬§æ‹‰è·¯å¾„ï¼šæ°æœ‰ä¸€ä¸ªç‚¹å…¥åº¦æ¯”å‡ºåº¦å¤šä¸€ï¼ˆç»ˆç‚¹ï¼‰ï¼Œå¦ä¸€ä¸ªç‚¹å‡ºåº¦æ¯”å…¥åº¦å¤šä¸€ï¼Œå…¶ä½™ç‚¹å…¥åº¦å’Œå‡ºåº¦ç›¸åŒã€‚</p>
<h2 id="Hierholzer"><a href="#Hierholzer" class="headerlink" title="Hierholzer"></a>Hierholzer</h2><p>ä»èµ·ç‚¹å¼€å§‹ DFS ï¼Œç„¶åæšä¸¾å®ƒçš„å‡ºè¾¹ï¼Œç»§ç»­ DFS ã€‚</p>
<p>èµ°è¿‡çš„è¾¹éƒ½æ ‡è®°ï¼ˆåˆ è¾¹ï¼‰ï¼Œé‡åˆ°èµ°è¿‡çš„è¾¹å°±<code>continue</code>ã€‚</p>
<p>å›æº¯çš„æ—¶å€™å†å‹å…¥æ ˆå†…ï¼Œå› ä¸ºå¦‚æœä¸€å¼€å§‹å°±å‹æ ˆï¼Œ</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307191517951.webp"
                      alt="image.png"
                ></p>
<p>çœ‹è¿™å¼ å›¾ï¼Œ$1\to{2}\to{3}$ï¼Œ</p>
<p>éå†åˆ° $3$ çš„æ—¶å€™ï¼Œé‚£ä¹ˆæ ˆå†…ç°åœ¨å°±æ˜¯ $1 2 3$ã€‚</p>
<p>ç„¶åå†éå† $3$ çš„å‡ºè¾¹ï¼Œä¸‡ä¸€é€‰äº† $3\to{1}$ è¿™æ¡è¾¹ï¼Œé‚£ä¹ˆå†æŠŠ 1 åŠ å…¥æ ˆä¸­ï¼Œå‘ç°æ²¡æ³•èµ°äº†ï¼Œå›æº¯ï¼Œæ¥ç€éå†å‰©ä¸‹çš„è¾¹ï¼Œè¿™æ—¶æˆ‘ä»¬å‘ç°ç­”æ¡ˆæ˜¯é”™çš„ï¼Œå› ä¸º $3\to{1}$ è¿™æ¡è¾¹å‡ºç°çš„æ—¶æœºå¾ˆå°´å°¬ï¼Œå¦‚æœå®ƒç°åœ¨å°±å‡ºç°äº†ï¼Œé‚£ä¹ˆå°±æ²¡æ³•éå† $4$ å’Œ $5$ äº†ï¼Œè€Œç”±äºå›æº¯æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥æ‚”æ£‹ï¼Œæ¥è°ƒæ•´å®ƒå‡ºç°çš„é¡ºåºä½¿å…¶åˆç†ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å›æº¯åå†è®©å®ƒè¿›æ ˆï¼Œå› ä¸ºè¿™æ ·çš„è¯éå†åˆ° $1$ å‘ç°æ²¡æ³•èµ°çš„æ—¶å€™ï¼Œ$1$ ä¼šè¢«åŠ å…¥æ ˆï¼Œè€Œ $3$ ä¸ä¼šï¼Œå› ä¸ºå®ƒè¿˜æœ‰å…¶å®ƒå‡ºè¾¹è¦éå†ï¼Œè¿™æ ·å°±å¯ä»¥ç»™ $1$ è¿™ä¸ªç»ˆç‚¹é¢„ç•™ä¸€ä¸ªâ€œä¸Šä¸€ä¸ªç‚¹â€çš„ä½ç½®ï¼Œç›´åˆ°ä» $3\to{5}\to{4}\to{3}$ çš„æ—¶å€™ï¼Œ$3$ ä¼šè¢«åŠ å…¥æ ˆï¼Œè¿™æ—¶ $3\to{1}$ è¿™æ¡è¾¹å‡ºç°çš„é¡ºåºå°±æ­£ç¡®äº†ï¼Œå› ä¸º $3$ çš„æ‰€æœ‰å‡ºè¾¹éƒ½å·²ç»éå†å®Œäº†ï¼Œä¸ä¼šå‡ºç°å…¶å®ƒè¾¹è¦å‡ºç°åœ¨å®ƒä¹‹å‰çš„æƒ…å†µï¼Œç„¶åå¾€å‰å›æº¯ä¹Ÿæ˜¯åŒç†ã€‚</p>
<p>å†ä¸¾ä¸ªä¾‹å­ä¾¿äºç†è§£ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307191529974.webp"
                     
                ></p>
<p>å¯¹äºè¿™æ ·ä¸€å¼ å›¾ï¼Œ</p>
<p>å¦‚æœå…ˆé€’å½’åå‹æ ˆï¼Œé‚£ä¹ˆå¾—åˆ°çš„æ¬§æ‹‰è·¯å¾„ä¸ºï¼š</p>
<p>$${9}\to{6}\to{3}\to{2}\to{1}\to{4}\to{2}\to{5}\to{6}\to{7}\to{8}\to{5}\to{4}$$</p>
<p>å¦‚æœå…ˆå‹æ ˆåé€’å½’ï¼Œå¾—åˆ°çš„æ¬§æ‹‰è·¯å¾„ä¸ºï¼š</p>
<p>$${9}\to{6}\to{3}\to{2}\to{1}\to{4}\to{2}\to{5}\to{4}\to{6}\to{7}\to{8}\to{5}$$</p>
<p>è¿™é‡ŒååŠæ®µåº”è¯¥æ˜¯ ${5}\to{6}\to{7}\to{8}\to{5}\to{4}$ï¼Œä½†æ˜¯å¦‚æœåœ¨$5$å¤„å¾€ä¸‹é€’å½’çš„æ—¶å€™é€’å½’åˆ° $4$ ç›´æ¥å‹æ ˆï¼Œå°±ä¼šå¯¼è‡´åé¢ ${5}\to{6}\to{7}\to{8}$  è¿™ä¸ªç¯ä¸èƒ½æ’åœ¨å®ƒå‰é¢ã€‚</p>
<p>å¯¹äºæœ‰å‘å›¾ï¼Œæœ€åå‹æ ˆçš„æ˜¯å‰å‡ ä¸ªè¢«éå†çš„ï¼Œå› æ­¤ç­”æ¡ˆæ˜¯åçš„ï¼Œæƒ³åŠæ³• <code>reverse</code> ä¸€ä¸‹å°±å¥½äº†ã€‚</p>
<p><strong>ä»£ç ï¼š</strong></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n,m,st,cnt;</span><br><span class="line"><span class="type">int</span> d[<span class="number">1000</span>][<span class="number">1000</span>],ans[<span class="number">1000</span>],f[<span class="number">1000</span>];</span><br><span class="line">stack&lt;<span class="type">int</span>&gt; S;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> v=<span class="number">1</span>;v&lt;=n;v++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(d[u][v])</span><br><span class="line">        &#123;</span><br><span class="line">            d[u][v]--,d[v][u]--;<span class="comment">//åˆ è¾¹</span></span><br><span class="line">            <span class="built_in">dfs</span>(v);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    S.<span class="built_in">push</span>(u);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> p=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> a,b;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;a,&amp;b);</span><br><span class="line">        d[a][b]++,d[b][a]++;</span><br><span class="line">        f[a]++,f[b]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// cout&lt;&lt;f[i]&lt;&lt;endl;</span></span><br><span class="line">        <span class="keyword">if</span>(f[i]%<span class="number">2</span>==<span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            st=i;</span><br><span class="line">            cnt++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(cnt!=<span class="number">2</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;No&quot;</span>&lt;&lt;endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;st&lt;&lt;endl;</span><br><span class="line">    <span class="comment">// S.push(st);</span></span><br><span class="line">    <span class="built_in">dfs</span>(st);</span><br><span class="line">    <span class="keyword">while</span>(!S.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        ans[++p]=S.<span class="built_in">top</span>();</span><br><span class="line">        S.<span class="built_in">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">reverse</span>(ans<span class="number">+1</span>,ans+p<span class="number">+1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=p;i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,ans[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 9 12</span></span><br><span class="line"><span class="comment">// 1 2</span></span><br><span class="line"><span class="comment">// 1 4</span></span><br><span class="line"><span class="comment">// 2 4</span></span><br><span class="line"><span class="comment">// 2 5</span></span><br><span class="line"><span class="comment">// 4 5</span></span><br><span class="line"><span class="comment">// 2 3</span></span><br><span class="line"><span class="comment">// 5 6</span></span><br><span class="line"><span class="comment">// 3 6</span></span><br><span class="line"><span class="comment">// 6 7</span></span><br><span class="line"><span class="comment">// 7 8</span></span><br><span class="line"><span class="comment">// 8 5</span></span><br><span class="line"><span class="comment">// 6 9</span></span><br></pre></td></tr></table></figure></div>

<p>å¯¹äºé“¾å¼å‰å‘æ˜Ÿï¼Œä¹Ÿå¯ä»¥è¿™æ ·å†™ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> edcnt = <span class="number">1</span>;</span><br><span class="line">stack&lt;<span class="type">int</span>&gt; ans;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = head[x];i;i = nex[i])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> y = to[i];</span><br><span class="line">        <span class="keyword">if</span>(vis[i]) <span class="keyword">continue</span>;</span><br><span class="line">        vis[i] = <span class="number">1</span>;</span><br><span class="line">        vis[i ^ <span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">dfs</span>(y);</span><br><span class="line">    &#125;</span><br><span class="line">    ans.<span class="built_in">push</span>(x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>è¿˜å¯ä»¥è¿™æ ·å†™</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">ola</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=fir[x];i;i=fir[x])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> v=e[i].to;</span><br><span class="line">        fir[x]=e[i].nxt;</span><br><span class="line">        <span class="built_in">ola</span>(v);</span><br><span class="line">    &#125;</span><br><span class="line">    S.<span class="built_in">push</span>(x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>è¿™æ ·å°±ç›¸å½“äºç›´æ¥åœ¨åŸå›¾ä¸Šè¿›è¡Œä¿®æ”¹äº†ã€‚</p>
<h2 id="ç»ƒä¹ é¢˜"><a href="#ç»ƒä¹ é¢˜" class="headerlink" title="ç»ƒä¹ é¢˜"></a>ç»ƒä¹ é¢˜</h2><p><strong>BZOJ3724 Krolestwoï¼š</strong></p>
<p><a href="">é¢˜è§£</a></p>
<p><a class="link"   href="https://www.acwing.com/problem/content/description/368/" >AcWing366<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>æœ¬é¢˜å»ºç«‹åŒå‘è¾¹çš„æœ‰å‘å›¾ï¼Œè¾¹æ•°$\times{2}$ï¼Œè®°å¾—ç©ºé—´å¼€ä¸¤å€ï¼Œç„¶åæ˜“å¾—æ¯ä¸ªç‚¹çš„å…¥åº¦éƒ½ç­‰äºå‡ºåº¦ï¼Œé‚£ä¹ˆå°±åœ¨è¿™ä¸Šé¢å½“æˆæœ‰å‘å›¾çš„æ¬§æ‹‰å›è·¯å°±å¯ä»¥äº†ã€‚</p>
<p><a class="link"   href="https://white.fallingsakura.top/451678749/" >é¢˜è§£<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h1 id="DAGæ‹“æ‰‘æ’åº"><a href="#DAGæ‹“æ‰‘æ’åº" class="headerlink" title="DAGæ‹“æ‰‘æ’åº"></a>DAGæ‹“æ‰‘æ’åº</h1><blockquote>
<p>æœ‰å‘æ— ç¯å›¾å¯ä»¥ç§°ä½œæ‹“æ‰‘å›¾</p>
</blockquote>
<p><strong>æ‹“æ‰‘åºåˆ—</strong>ï¼šæ‰€æœ‰çš„è¾¹éƒ½æ˜¯ä»å‰æŒ‡å‘åçš„ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307181013336.webp"
                      alt="image.png"
                ></p>
<p>å¹¶ä¸æ˜¯æ‰€æœ‰å›¾éƒ½æœ‰æ‹“æ‰‘åºï¼Œæœ‰ç¯å°±ä¸è¡Œã€‚</p>
<ol>
<li>ç»Ÿè®¡æ¯ä¸ªç‚¹çš„å…¥åº¦</li>
<li>å°†æ‰€æœ‰å…¥åº¦ä¸º $0$ çš„ç‚¹å…¥é˜Ÿ</li>
<li>BFSï¼ˆå–å‡ºé˜Ÿå¤´å…ƒç´ ï¼Œéå†æ‰€æœ‰å®ƒçš„å‡ºè¾¹ï¼‰</li>
</ol>
<p>å‡è®¾ $t\to{j}$ï¼Œ</p>
<p>$d_j$ ä»£è¡¨ $j$ çš„å…¥åº¦ã€‚</p>
<p>å…¥åº¦ä¸º $0$ è¯´æ˜æ²¡æœ‰ä»»ä½•ä¸€ç‚¹åœ¨æˆ‘å‰é¢ã€‚</p>
<p>æ‰€æœ‰å…¥åº¦ä¸º $0$ çš„ç‚¹éƒ½å¯ä»¥å½“ä½œèµ·ç‚¹ã€‚</p>
<p>æ‰€ä»¥ç¬¬ä¸€æ­¥å°±æ˜¯æŠŠæ‰€æœ‰å…¥åº¦ä¸º $0$ çš„ç‚¹å…¥é˜Ÿã€‚</p>
<p>ç„¶åå–å‡ºé˜Ÿå¤´ï¼Œæšä¸¾å‡ºè¾¹ã€‚</p>
<p>ç„¶ååˆ æ‰è¿™æ¡è¾¹ï¼ˆ$t\to{j}$ï¼‰</p>
<p>å°±æ˜¯ $d[j]-1$.</p>
<p>å‡å¦‚å…¥åº¦ä¸º $0$ å°±è®©å®ƒå…¥é˜Ÿ</p>
<p>å¦‚æœæœ‰ç¯</p>
<p>é‚£ä¹ˆä¸€å®šæœ‰ä¸€äº›ç‚¹ä¸ä¼šå…¥é˜Ÿ</p>
<p>å¦‚æœä¸€ä¸ªå›¾ä¸Šå¹¶æ²¡æœ‰ç¯</p>
<p>é‚£ä¹ˆå°±å¯ä»¥æŠŠå®ƒæ‹“æ‰‘æ‰</p>
<p>ä¸€ä¸ªæœ‰å‘æ— ç¯å›¾ä¸€å®šæœ‰å…¥åº¦ä¸º$0$çš„ç‚¹</p>
<p>åè¯æ³•ï¼š</p>
<p>å‡å¦‚æ¯ä¸ªç‚¹çš„å…¥åº¦éƒ½ä¸ä¸º$0$</p>
<p>é‚£ä¹ˆä¸€å®šå¯ä»¥æ²¿ç€æŸä¸ªç‚¹æ— ç©·æ— å°½çš„å¾€ä¸Šæ‰¾</p>
<p>å‡å¦‚ä¸€å…±$n$ä¸ªç‚¹</p>
<p>å½“æ‰¾åˆ°ç¬¬$n+1$çš„ç‚¹æ—¶è¿™ä¸ªå›¾å°±å‡ºç°äº†ç¯</p>
<p>æ‰€ä»¥æœ‰å‘æ— ç¯å›¾è‡³å°‘å­˜åœ¨ä¸€ä¸ªå…¥åº¦ä¸ºé›¶çš„ç‚¹</p>
<p>æŠŠå®ƒä½œä¸ºçªç ´å£</p>
<p><em>æŒ–å¢™è„š</em></p>
<p>åŠ å…¥é˜Ÿåˆ—çš„é¡ºåºå°±æ˜¯æ‹“æ‰‘åºåˆ—</p>
<h1 id="DFSæ ‘"><a href="#DFSæ ‘" class="headerlink" title="DFSæ ‘"></a>DFSæ ‘</h1><p>ç”Ÿæˆè¿‡ç¨‹ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307200910137.gif"
                     
                ></p>
<p>ç”Ÿæˆç»“æœï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307200911360.webp"
                      alt="image.png"
                ></p>
<p>é¦–å…ˆæˆ‘ä»¬å®šä¹‰ç”Ÿæˆçš„è¾¹ä¸ºæ ‘è¾¹ï¼ŒæŒ‡å‘ç¥–å…ˆçš„è¾¹ç§°ä½œå›è¾¹ï¼Œ</p>
<p>éå†æ—¶é‡åˆ°å­æ ‘èŠ‚ç‚¹çš„è¾¹å«åšå‰å‘è¾¹ï¼Œéå†æ—¶é‡åˆ°è®¿é—®è¿‡çš„éç¥–å…ˆèŠ‚ç‚¹å½¢æˆçš„è¾¹å«åšæ¨ªå‰è¾¹ã€‚</p>
<p>è§‚å¯Ÿè¿™æ£µæ ‘ï¼Œæˆ‘ä»¬ä¸éš¾å‘ç°ä¸€äº›ç»“è®ºï¼š</p>
<ol>
<li>ç”Ÿæˆæ ‘ä¸­ï¼Œå›è¾¹è¿æ¥çš„ä¸€å®šæ˜¯å­å­™èŠ‚ç‚¹ã€‚å¦‚æœè¿æ¥çš„æ˜¯å…„å¼ŸèŠ‚ç‚¹ï¼Œé‚£ä¹ˆè‚¯å®šä¼šæ²¿ç€è¿™æ¡â€œå›è¾¹â€ç»§ç»­ DFS ä¸‹å»ï¼Œé‚£ä¹ˆè¿™æ¡å›è¾¹å°†ä¼šæˆä¸ºæ ‘è¾¹ï¼Œâ€œå…„å¼Ÿâ€èŠ‚ç‚¹ä¹Ÿä¸å†æ˜¯å…„å¼Ÿå…³ç³»ï¼Œè€Œæ˜¯å­å­™å…³ç³»ã€‚</li>
<li>å½“æ ‘è¾¹ $u\to{v}$ ä¸å­˜åœ¨è¿æ¥å®ƒç¥–å…ˆå’Œå®ƒçš„å­å­™èŠ‚ç‚¹çš„å›è¾¹æ—¶ï¼Œå®ƒæ˜¯æ¡¥ã€‚</li>
<li>å›è¾¹ä¸€å®šä¸æ˜¯æ¡¥ã€‚</li>
<li>å‡å¦‚æ— å‘è¿é€šå›¾æœ‰æ¡¥ï¼Œé‚£ä¹ˆå°±ä¸å¯èƒ½ä½¿æ¯æ¡è¾¹ç»™å®šä¸€ä¸ªæ–¹å‘åæˆä¸ºä¸€ä¸ªå¼ºè¿é€šå›¾ã€‚å› ä¸ºå‡å®š $uv$ æ¡¥çš„æ–¹å‘æ˜¯ $u\to{v}$ï¼Œé‚£ä¹ˆæ­¤æ—¶å°±ä¸å­˜åœ¨ $v\to{u}$ çš„ä¸€æ¡è·¯å¾„ã€‚</li>
<li>å‡å¦‚æ— å‘è¿é€šå›¾æ— æ¡¥ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿æ¯æ¡è¾¹ç»™å®šä¸€ä¸ªæ–¹å‘åæˆä¸ºä¸€ä¸ªå¼ºè¿é€šå›¾ï¼Œä½¿æ ‘è¾¹å‡å‘ä¸‹ï¼Œå›è¾¹å‡å‘ä¸Šã€‚</li>
<li>æ ¹èŠ‚ç‚¹å¯ä»¥ç§»åŠ¨åˆ°ä»»æ„èŠ‚ç‚¹ï¼Œä»»æ„èŠ‚ç‚¹éƒ½å¯ä»¥å›åˆ°æ ¹èŠ‚ç‚¹ã€‚</li>
<li>å›è¾¹å’Œæ¨ªå‰è¾¹çš„ç»ˆç‚¹æ—¶é—´æˆ³ä¸€å®šå¤§äºèµ·ç‚¹ã€‚</li>
<li>å¯¹äºæ¯ä¸ªå¼ºè¿é€šåˆ†é‡ä¸­çš„ dfs ç”Ÿæˆæ ‘ï¼Œå¿…ç„¶å­˜åœ¨ä¸€ä¸ªç‚¹æ˜¯å…¶å®ƒæ‰€æœ‰ç‚¹çš„ç¥–å…ˆï¼Œå³æ ¹èŠ‚ç‚¹ $u$ æ˜¯ dfs åºæœ€å°çš„ç‚¹ï¼Œè‹¥å­˜åœ¨ä¸€ä¸ªç‚¹$v$ä¸åœ¨ä»¥$u$ä¸ºæ ¹çš„æ ‘ä¸­ï¼Œé‚£ä¹ˆä¸€å®šå­˜åœ¨ä¸€æ¡ $u\to{v}$ çš„å›è¾¹æˆ–è€…æ¨ªå‰è¾¹ï¼Œè€Œè¿™ä¸¤ç§è¾¹å‡ºç°åˆ™æ„å‘³ç€ $v$ ä¸€å®šåœ¨ä¹‹å‰è¢«è®¿é—®è¿‡ï¼Œè€Œè¿™ä¸ $u$ dfs åºæœ€å°çŸ›ç›¾ã€‚</li>
</ol>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307262202871.webp"
                      alt="graph (4).png"
                ></p>
<p>æ¯”å¦‚æœ¬å›¾ä¸­$5\to{2}$ä¸ºå›è¾¹ï¼Œ$1\to{5}$ ä¸ºå‰å‘è¾¹ï¼Œ$3\to{4}$ä¸ºæ ‘è¾¹ã€‚</p>
<p>è€Œæ”¹å˜ä¸€ä¸‹ dfs çš„é¡ºåºé‚£ä¹ˆ dfs ç”Ÿæˆæ ‘çš„å½¢æ€å°†ä¼šä¸åŒã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307262213841.webp"
                      alt="graph (5).png"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307262213510.webp"
                      alt="graph (6).png"
                ></p>
<p>æ¯”å¦‚ä¸Šé¢ä¸¤å›¾ã€‚</p>
<p>ä»…æ”¹å˜äº†éå†é¡ºåºï¼Œç”Ÿæˆçš„ dfs æ ‘çš„å½¢æ€ä¾¿ä¸åŒï¼Œæ¯æ¡è¾¹çš„æ€§è´¨ä¹Ÿå¯èƒ½ä¸åŒã€‚</p>
<h1 id="è¿é€šæ€§"><a href="#è¿é€šæ€§" class="headerlink" title="è¿é€šæ€§"></a>è¿é€šæ€§</h1><h2 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h2><blockquote>
<p><a class="link"   href="https://blog.csdn.net/doubleguy/article/details/109264374" >å›¾è§£ç†è§£æ›´ä½³<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</blockquote>
<ul>
<li>ç‚¹çš„è¿é€šæ€§ï¼šæ— å‘å›¾ä¸­ï¼Œè‹¥ç‚¹ $i$ åˆ°ç‚¹ $j$ æœ‰è·¯å¾„ï¼Œé‚£ä¹ˆ $i$ å’Œ $j$ å°±æ˜¯è¿é€šçš„ã€‚</li>
<li>è¿é€šå›¾ï¼šæ— å‘å›¾ä¸­ï¼Œä»»æ„ä¸¤ç‚¹é—´å‡æœ‰è·¯å¾„ã€‚</li>
<li>è¿é€šåˆ†é‡ï¼šåˆ†é‡å…¶å®å°±æ˜¯å­å›¾ï¼Œç‰¹æŒ‡æ— å‘å›¾ã€‚<strong>æ— å‘å›¾</strong>çš„è¿é€šåˆ†é‡æ˜¯å®ƒçš„<strong>æœ€å¤§è¿é€šå­å›¾</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹äºä¸€ä¸ªç‚¹è”“å»¶å‡ºå»çš„æ‰€æœ‰è¾¹ï¼Œä¸èƒ½å†å¾€ä¸ŠåŠ è¾¹äº†ï¼Œè€Œä¸æ˜¯è¾¹æ•°æœ€å¤šçš„è¿é€šå­å›¾ï¼Œå› æ­¤ä¸€ä¸ªæ— å‘å›¾å¯ä»¥æœ‰å¤šä¸ªè¿é€šåˆ†é‡ï¼Œ<strong>è¿é€šåˆ†é‡</strong>ä¹Ÿå«åš<strong>è¿é€šå—</strong>ã€‚ä¹Ÿå«åš<strong>æå¤§è¿é€šåˆ†é‡</strong>ï¼Œæ˜¯ä¸€ä¸ªæ¦‚å¿µã€‚ä»»ä½•è¿é€šå›¾çš„è¿é€šåˆ†é‡æœ‰ä¸”åªæœ‰ä¸€ä¸ªï¼Œå³å®ƒæœ¬èº«ã€‚<strong>æå°è¿é€šåˆ†é‡</strong>æ˜¯åœ¨ä¿æŒè¿é€šæ€§çš„å‰æä¸‹çš„æœ€å°å­å›¾ï¼Œå½¢æ€æ˜¯ä¸€æ£µæ ‘ã€‚</li>
<li>å¼ºè¿é€šå›¾ï¼šç‰¹æŒ‡<strong>æœ‰å‘å›¾</strong>ã€‚æœ‰å‘å›¾ä¸­ï¼Œç‚¹ $i$ åˆ°ç‚¹ $j$ æœ‰è·¯å¾„ï¼Œåˆ™ç§°è¿™ä¸¤ç‚¹å¼ºè¿é€šã€‚è‹¥ä»»æ„ä¸€å¯¹é¡¶ç‚¹ä¹‹é—´æ˜¯å¼ºè¿é€šçš„ï¼Œé‚£ä¹ˆå°±æ˜¯å¼ºè¿é€šå›¾ã€‚</li>
<li>å¼ºè¿é€šåˆ†é‡ï¼šæœ‰å‘å›¾ä¸­çš„æå¤§å¼ºè¿é€šå­å›¾ã€‚ä¸ä¸Šé¢ç±»ä¼¼çš„ï¼Œæå¤§å¼ºè¿é€šåˆ†é‡ä¸æå°è¿é€šåˆ†é‡ã€‚</li>
<li>ç”Ÿæˆæ ‘ï¼šè¿é€šå›¾ä¸­åŒ…å«æ‰€æœ‰é¡¶ç‚¹çš„æå°è¿é€šå­å›¾ã€‚</li>
<li>æ¡¥ï¼šæ— å‘å›¾ä¸­ï¼Œè‹¥åˆ é™¤äº†ä¸€æ¡è¾¹ï¼Œæ•´ä¸ªå›¾çš„è¿é€šåˆ†é‡å‘ç”Ÿäº†æ”¹å˜ï¼Œé‚£ä¹ˆè¿™æ¡è¾¹å°±æ˜¯æ¡¥ã€‚æ¡¥å…¶å®å°±æ˜¯è¿é€šå„ä¸ªè¿é€šå—ä¹‹é—´çš„å”¯ä¸€çš„è¾¹ã€‚</li>
<li>ç”Ÿæˆæ£®æ—ï¼šå³ä¸€ä¸ªéè¿é€šå›¾ä¸­ï¼ŒåŒ…å«å¤šä¸ªè¿é€šå—ï¼Œæ¯ä¸ªè¿é€šå—çš„ç”Ÿæˆæ ‘æ‰€ç»„æˆçš„é›†åˆã€‚</li>
</ul>
<h2 id="Tarjanæ±‚å¼ºè¿é€šåˆ†é‡"><a href="#Tarjanæ±‚å¼ºè¿é€šåˆ†é‡" class="headerlink" title="Tarjanæ±‚å¼ºè¿é€šåˆ†é‡"></a>Tarjanæ±‚å¼ºè¿é€šåˆ†é‡</h2><blockquote>
<p>æœ‰å‘å›¾æ±‚ SCC</p>
</blockquote>
<p>æˆ‘ä»¬ç»´æŠ¤ä¸¤ä¸ªå˜é‡ï¼š</p>
<p>$dfn_i$ ä»£è¡¨ç¬¬ $i$ å·ç‚¹çš„éå†æ¬¡åºï¼ˆæ—¶é—´æˆ³ï¼‰ï¼Œä¹Ÿå°±æ˜¯ç¬¬å‡ ä¸ªè¢«æœç´¢åˆ°çš„ã€‚</p>
<p>$low_i$ ä»£è¡¨ç¬¬ $i$ å·ç‚¹ç»è¿‡æœ€å¤šä¸€æ¡éæ ‘è¾¹å¯è¾¾çš„ä¸å®ƒå¼ºè¿é€šçš„ç‚¹çš„ dfs åºï¼Œ</p>
<p>$low(p)$ å¯ä»¥é€šè¿‡ DP å¾—åˆ°ï¼Œ</p>
<p>å¯¹äºæŸä¸ªä»¥ $p$ ä¸ºèµ·ç‚¹çš„è¾¹ $p\to{q}$</p>
<p>å¦‚æœ $q$ æœªè®¿é—®è¿‡ï¼Œåˆ™ $q$ åœ¨ $p$ çš„å­æ ‘ä¸Šï¼Œå¦‚æœæŸèŠ‚ç‚¹ $r$ ä» $q$ èµ·å¯ä»¥ç»è¿‡æœ€å¤šä¸€æ¡å›è¾¹å¯ä»¥åˆ°è¾¾ï¼Œé‚£ä¹ˆä» $p$ å¼€å§‹ä¹Ÿå¯ä»¥åˆ°è¾¾ï¼ˆå…ˆä» $p$ åˆ° $q$ å†ä» $q$ åˆ° $r$ï¼‰ï¼Œæ‰€ä»¥å¯ä»¥å…ˆé€’å½’å¤„ç† $q$ï¼Œç„¶åæ›´æ–°$low(p)&#x3D;\min(low(p),low(q))$ã€‚</p>
<p>å¦‚æœ $q$ å·²ç»è®¿é—®è¿‡ï¼Œå¹¶ä¸” $p$ ä¸ $q$ å¼ºè¿é€šï¼Œé‚£ä¹ˆ $low(p)&#x3D;\min(low(p),dfsn(q))$ï¼Œå…¶å®å°±æ˜¯è®¿é—®åˆ°äº†éæ ‘è¾¹ã€‚</p>
<p>å¼ºè¿é€šæ€§ä¸å­˜åœ¨ä¼ é€’æ€§ã€‚æ¯”å¦‚ $u$ $v$ ä¹‹é—´å¼ºè¿é€šï¼Œ$v$ $q$ ä¹‹é—´å¼ºè¿é€šï¼Œé‚£ä¹ˆ $u$ $q$ ä¹‹é—´ä¸ä¸€å®šå¼ºè¿é€šï¼Œ$u\rightarrow v \leftarrow q$ï¼Œå› æ­¤åªèƒ½ç”¨ $q$ çš„ $dfsn$ æ¥æ›´æ–° $p$ çš„ $low$ã€‚</p>
<p>é‚£ä¹ˆæˆ‘æ€ä¹ˆç¡®å®šä¸€ä¸ªç‚¹æ˜¯å¦å¯è¾¾å‘¢ï¼Ÿ</p>
<p>å› ä¸ºå›è¾¹å’Œæ¨ªå‰è¾¹éƒ½æŒ‡å‘ dfs åºè¾ƒå°çš„èŠ‚ç‚¹ï¼Œè€Œå‰å‘è¾¹åˆä¸å½±å“ä¸Šè¿°è½¬ç§»æ–¹ç¨‹ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦ç¡®å®šå“ªäº›ç‚¹æ¯”è¯¥ç‚¹çš„ dfs åºå°åˆ‡èƒ½åˆ°è¾¾è¯¥ç‚¹ï¼Œè¿™å¯ä»¥ç”¨ä¸€ä¸ªæ ˆæ¥ç»´æŠ¤ã€‚</p>
<p>æ¯æ¬¡æœåˆ°æ–°ç‚¹å°±è®©å®ƒå…¥æ ˆï¼Œå¯¹ç‚¹ $p$ çš„å­æ ‘æœç´¢ç»“æŸæ—¶ï¼Œè‹¥$low(p)&#x3D;n&lt;dfsn(p)$ï¼Œè®¾ dfs åºä¸º $n$ çš„ç‚¹ä¸º $q$ï¼Œåˆ™ $p$ ç‚¹å¯è¾¾çš„ $q$ ç‚¹éƒ½å¯è¾¾ï¼ˆ$q$ æ˜¯ $p$ çš„å­æ ‘ä¸­ç»è¿‡ä¸è¶…è¿‡ä¸€æ¡éæ ‘è¾¹èƒ½å¤Ÿåˆ°è¾¾çš„ dfs åºæœ€å°çš„ç‚¹ï¼Œè¿™ä¹ˆè¯´ $q$ æ˜¯ $p$ çš„ç¥–å…ˆï¼‰ï¼Œè€Œ $q$ å¯èƒ½ä¸æ­¢ $p$ è¿™ä¸€é¢—å­æ ‘ï¼Œæ‰€ä»¥ $p$ åº”å½“ç•™åœ¨æ ˆå†…ï¼Œå› ä¸ºå®ƒä»¬éƒ½å¯èƒ½é€šè¿‡ $p$ å¼ºè¿é€šï¼Œéƒ½å¯èƒ½æ˜¯ä¸€ä¸ªå¼ºè¿é€šåˆ†é‡ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæ ˆå†…çš„å…ƒç´ æ˜¯å½“å‰æœç´¢åˆ°çš„å¯èƒ½ä¸ºå¼ºè¿é€šåˆ†é‡çš„å…ƒç´ ï¼Œä¸€ä¸ªæ ‘åœ¨æ²¡æœ‰æŠŠå®ƒçš„è‹¥å¹²å­æ ‘æœç´¢å®Œå…¨çš„æƒ…å†µä¸‹ï¼Œä¹‹å‰æœç´¢çš„æ ‘çš„å­æ ‘ä¸ä¼šå‡ºæ ˆï¼Œå‡ºæ ˆå³æ„å‘³ç€æ‰¾åˆ°äº†ä¸€ä¸ªå¼ºè¿é€šåˆ†é‡ï¼Œå½“ä¸”ä»…å½“è¿”å›æ—¶å‘ç°$low(p)&#x3D;dfsn(p)$ã€‚</p>
<p>æ˜¾ç„¶ï¼Œè¿™æ ·ç»´æŠ¤çš„æ ˆå†…å…ƒç´ çš„ $dfsn$ æ˜¯é€’å¢çš„ã€‚</p>
<p>æ¯ä¸ªç‚¹çš„ $low()$ å€¼åˆå§‹åŒ–ä¸ºå®ƒçš„ $dfsn$ã€‚</p>
<p>æˆ‘ä»¬å®é™…ä¸Šåœ¨æ‰¾çš„æ¯ä¸ªèŠ‚ç‚¹çš„ $low()$ å€¼å°±æ˜¯å®ƒåœ¨å®ƒæ‰€åœ¨çš„å¼ºè¿é€šåˆ†é‡çš„æ ¹èŠ‚ç‚¹çš„ $dfsn$ã€‚</p>
<p>ä¸€ä¸ªç‚¹çš„å­æ ‘æœç´¢å®Œæ¯•æ—¶ï¼Œå®ƒçš„ $low()$ æ‰ä¼šè¢«æ›´æ–°ã€‚</p>
<p>å¾—åˆ°çš„å¼ºè¿é€šåˆ†é‡ç¼–å·çš„é¡ºåºç¬¦åˆæ‹“æ‰‘åºï¼ˆç¼–å·è¶Šå°ï¼Œæ‹“æ‰‘åºè¶Šé åï¼‰ã€‚</p>
<p>æŠŠæ¯ä¸ªå¼ºè¿é€šåˆ†é‡ç¼©ä¸ºä¸€ä¸ªç‚¹ä¹‹åï¼Œå¾—åˆ°çš„æ˜¯ä¸€å¼ <strong>æœ‰å‘æ— ç¯å›¾</strong>ï¼Œå› ä¸ºåªè¦èƒ½éå†åˆ°å…¶ä¸­ä¸€ä¸ªç‚¹ï¼Œå°±ä¸€å®šèƒ½éå†åˆ°è¯¥å¼ºè¿é€šåˆ†é‡çš„æ‰€æœ‰ç‚¹ã€‚</p>
<p><strong>å¼ºè¿é€šåˆ†é‡ä¸­</strong>ï¼Œtarjan å…³æ³¨çš„æ˜¯<strong>åœ¨ä¸åœ¨ä¸€ä¸ªå¼ºè¿é€šåˆ†é‡å†…</strong>ã€‚</p>
<p>è€Œ<strong>å‰²ç‚¹å‰²è¾¹</strong>é—®é¢˜ä¸­å…³æ³¨<strong>æœç´¢å­æ ‘çš„ä¸ªæ•°</strong>ã€‚</p>
<p>ä»£ç ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e5</span><span class="number">+7</span>;</span><br><span class="line">stack&lt;<span class="type">int</span>&gt; s;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; g[N];</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; g_2[N];</span><br><span class="line"><span class="comment">//csccä»£è¡¨å¼ºè¿é€šåˆ†é‡çš„æ•°é‡ï¼Œsccä»£è¡¨æ¯ä¸ªç‚¹æ‰€å±çš„å¼ºè¿é€šåˆ†é‡çš„ç¼–å·ï¼Œinsä»£è¡¨æ˜¯å¦åœ¨æ ˆä¸­</span></span><br><span class="line"><span class="type">int</span> dfsn[N],low[N],ins[N],scc[N],deep,cscc,n;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">tarjan</span><span class="params">(<span class="type">int</span> p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    low[p]=dfsn[p]=++deep;</span><br><span class="line">    ins[p]=<span class="number">1</span>;</span><br><span class="line">    s.<span class="built_in">push</span>(p);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;q:g[p])<span class="comment">//éå†å‡ºè¾¹</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(!dfsn[q])<span class="comment">//æœªè®¿é—®</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">tarjan</span>(q);</span><br><span class="line">            low[p]=<span class="built_in">min</span>(low[p],low[q]);</span><br><span class="line">        &#125;<span class="comment">//è®¿é—®è¿‡ä¸”qå¯è¾¾pï¼Œå› ä¸ºæ ˆä¸­å…ƒç´ å¼ºè¿é€š</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(ins[q]) low[p]=<span class="built_in">min</span>(low[p],dfsn[q]);<span class="comment">//æ³¨æ„è¿™é‡Œä¸ºä»€ä¹ˆæ˜¯dfsn[q]è€Œä¸æ˜¯low[q]</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(low[p]==dfsn[p])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> top=<span class="number">0</span>;</span><br><span class="line">        cscc++;</span><br><span class="line">        <span class="keyword">while</span>(top!=p)</span><br><span class="line">        &#123;</span><br><span class="line">            top=s.<span class="built_in">top</span>();</span><br><span class="line">            s.<span class="built_in">pop</span>();</span><br><span class="line">            ins[top]=<span class="number">0</span>;</span><br><span class="line">            scc[top]=cscc;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="comment">//åŸå›¾ä¸ä¸€å®šæ˜¯å¼ºè¿é€šå›¾ï¼Œå› æ­¤æ¯ä¸ªèŠ‚ç‚¹éƒ½è¦çœ‹ä¸€é</span></span><br><span class="line">        <span class="keyword">if</span>(!dfsn[i])<span class="comment">//æœªè®¿é—®è¿‡</span></span><br><span class="line">            <span class="built_in">tarjan</span>(i);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> j:g[i])<span class="comment">//ä»¥iä¸ºèµ·ç‚¹çš„å‡ºè¾¹</span></span><br><span class="line">            <span class="keyword">if</span>(scc[i]!=scc[j])<span class="comment">//å¦‚æœä¸æ˜¯ä¸€ä¸ªå¼ºè¿é€šåˆ†é‡ï¼Œé‚£å°±å¯ä»¥æŠŠä¸¤ä¸ªå¼ºè¿é€šåˆ†é‡å½“ä½œä¸¤ä¸ªç‚¹è¿æ¥èµ·æ¥</span></span><br><span class="line">                g_2[scc[i]].<span class="built_in">push_back</span>(scc[j]);<span class="comment">//jæ˜¯içš„å‡ºè¾¹ï¼Œå³jçš„å¼ºè¿é€šåˆ†é‡æ˜¯içš„å¼ºè¿é€šåˆ†é‡çš„å‡ºè¾¹</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>é‡è¾¹ä¸è‡ªç¯å¯¹äºæœ‰å‘å›¾æ±‚å¼ºè¿é€šåˆ†é‡æ¥è¯´æ²¡æœ‰å½±å“ã€‚</p>
<h2 id="Tarjanæ±‚å‰²ç‚¹ä¸æ¡¥"><a href="#Tarjanæ±‚å‰²ç‚¹ä¸æ¡¥" class="headerlink" title="Tarjanæ±‚å‰²ç‚¹ä¸æ¡¥"></a>Tarjanæ±‚å‰²ç‚¹ä¸æ¡¥</h2><blockquote>
<p>æ— å‘å›¾</p>
</blockquote>
<p>é¦–å…ˆæˆ‘ä»¬æ¥æ˜ç¡®ä¸€ä¸‹è¿™ä¸¤ä¸ªæ¦‚å¿µçš„å®šä¹‰ï¼š</p>
<ul>
<li>å‰²ç‚¹ï¼šåˆ å»è¿™ä¸ªç‚¹ä¼šä½¿æ— å‘å›¾çš„è¿é€šåˆ†é‡æ•°å¢åŠ ã€‚</li>
<li>æ¡¥ï¼ˆå‰²è¾¹ï¼‰ï¼šåˆ å»è¿™æ¡è¾¹ä¼šä½¿æ— å‘å›¾çš„è¿é€šåˆ†é‡æ•°å¢åŠ ã€‚</li>
</ul>
<p>é‚£ä¹ˆæˆ‘æ€»ä¸èƒ½æŠŠæ¯æ¡è¾¹å’Œæ¯ä¸ªç‚¹éƒ½åˆ æ‰çœ‹çœ‹å§ï¼Œè¿™æ ·è‚¯å®šè¡Œä¸é€šã€‚</p>
<p>å¦‚ä½•æ±‚å‰²ç‚¹ä¸å‰²è¾¹ï¼Ÿ</p>
<h3 id="å‰²ç‚¹"><a href="#å‰²ç‚¹" class="headerlink" title="å‰²ç‚¹"></a>å‰²ç‚¹</h3><p>åœ¨æ— å‘å›¾ä¸­ï¼Œ$low$ å€¼ä¸ºä¸ç»è¿‡çˆ¶äº²èŠ‚ç‚¹èƒ½åˆ°è¾¾çš„ dfsn æœ€å°çš„èŠ‚ç‚¹ ï¼Œæ¢å¥è¯è¯´ï¼Œæ˜¯ç»è¿‡ä»¥è‡ªèº«ä¸ºæ ¹èŠ‚ç‚¹çš„å­æ ‘ä¸­è‡³å¤šä¸€æ¡éæ ‘è¾¹èƒ½å¤Ÿåˆ°è¾¾çš„æœ€å° dfs åºçš„ç‚¹ã€‚</p>
<p>æ— å‘å›¾ä¸­ï¼Œåªéœ€è¦è€ƒè™‘å›è¾¹ï¼Œå› ä¸ºæ— å‘å›¾çš„ dfs æ ‘ä¸å­˜åœ¨æ¨ªå‰è¾¹å’Œå‰å‘è¾¹ã€‚</p>
<p>è®¾ä»¥ $p$ ä¸ºæ ¹çš„å­æ ‘ä¸º $subtree(p)$ï¼Œé‚£ä¹ˆ $low(p)$ å°±æ˜¯ $subtree(p)$ ä¸­çš„ç‚¹å’Œé€šè¿‡ä¸€æ¡å›è¾¹èƒ½åˆ°è¾¾ $subtree(p)$ çš„ç‚¹ä¸­ $dfsn$ æœ€å°çš„å€¼ã€‚</p>
<p>è‹¥ $p$ å­˜åœ¨ä¸€ä¸ªå­èŠ‚ç‚¹ $q$ æ»¡è¶³ $low(q)\ge{dfsn(p)}$ï¼Œè¯´æ˜ $q$ æ— æ³•é€šè¿‡å®ƒçš„å­æ ‘<strong>é€ƒ</strong>åˆ°æ¯” $p$ dfs åºæ›´å°çš„èŠ‚ç‚¹ã€‚æ‰€ä»¥ $q$ æƒ³è¦åˆ°è¾¾çˆ¶äº²èŠ‚ç‚¹å¤–é¢çš„ç‚¹ï¼Œä¹Ÿå°±æ˜¯<strong>é€ƒ</strong>å‡ºå»ï¼Œåªèƒ½é€šè¿‡å®ƒçš„çˆ¶äº²èŠ‚ç‚¹ä¹Ÿå°±æ˜¯ $p$ ç‚¹ï¼Œå› æ­¤åªè¦åˆ å» $p$ ç‚¹ï¼Œ$q$ å’Œ $dfsn$ å°äº $p$ çš„ç‚¹å°±åˆ†å¼€äº†ï¼Œå› æ­¤ $p$ æ˜¯ä¸€ä¸ªå‰²ç‚¹ã€‚</p>
<p>é‚£$q$æ˜¯ä¸æ˜¯å‰²ç‚¹å‘¢ï¼Ÿä¸ä¸€å®šæ˜¯ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307281815999.webp"
                      alt="image.png"
                ></p>
<p>è¿™æ ·ä¸€å¼ å›¾ï¼Œæœ‰é¢œè‰²çš„éƒ½æ˜¯å‰²ç‚¹&#x2F;å‰²è¾¹ï¼ˆæ³¨ï¼šå·¦è¾¹ä»ä¸‹å¾€ä¸Šç¬¬ä¸‰ä¸ªç‚¹åº”è¯¥ä¹Ÿæ˜¯å‰²ç‚¹ï¼‰ã€‚</p>
<p>å¾ˆæ˜æ˜¾å‰²ç‚¹çš„çˆ¶äº²æˆ–å„¿å­ä¸ä¸€å®šä¹Ÿæ˜¯å‰²ç‚¹ã€‚</p>
<p>ä¸¤ä¸ªå‰²ç‚¹ä¹‹é—´ä¹Ÿä¸ä¸€å®šæ˜¯å‰²è¾¹ã€‚</p>
<p>å‰²è¾¹çš„ä¸¤ç«¯ä¹Ÿä¸ä¸€å®šæ˜¯å‰²ç‚¹ã€‚</p>
<p>è¿™é‡Œå¼•å…¥ä¸€ä¸ªç»“è®ºï¼šå‰²è¾¹ä¸¤ç«¯ç‚¹éƒ½æ˜¯å‰²ç‚¹å½“ä¸”ä»…å½“å»æ‰è¿™æ¡å‰²è¾¹åå¾—åˆ°çš„è¿é€šå—å¤§å°éƒ½ $\ge{2}$ï¼Œå› ä¸ºå¶å­ä¸å¯èƒ½ä¸ºå‰²ç‚¹ã€‚</p>
<p>æ‰€ä»¥é‡å¤ä¸€éï¼š$p$ çš„å­èŠ‚ç‚¹ $q$ æ»¡è¶³ $low(q)\ge{dfsn(p)}$ï¼Œé‚£ä¹ˆè¯´æ˜ $p$ æ˜¯å‰²ç‚¹ã€‚</p>
<p>è¿˜æœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå½“ $p$ æ˜¯ dfs æ ‘çš„æ ¹èŠ‚ç‚¹æ—¶ï¼Œä¸å­˜åœ¨æ¯” $p$ dfs åºæ›´å°çš„ç‚¹ã€‚</p>
<p>å› æ­¤å¯¹äº<strong>æ ¹èŠ‚ç‚¹</strong>ï¼Œè‹¥æœ‰ä¸¤ä¸ªä»¥ä¸Šå­èŠ‚ç‚¹ï¼Œé‚£å°±æ˜¯å‰²ç‚¹ã€‚</p>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P3388" >P3388 å‰²ç‚¹<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e6</span><span class="number">+7</span>;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; e[N];</span><br><span class="line"><span class="type">int</span> dfsn[N],low[N];</span><br><span class="line"><span class="type">int</span> cnt;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; point;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">tarjan</span><span class="params">(<span class="type">int</span> p,<span class="type">bool</span> root=<span class="literal">true</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> tot=<span class="number">0</span>;</span><br><span class="line">    low[p]=dfsn[p]=++cnt;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;q:e[p])<span class="comment">//æšä¸¾pçš„å‡ºè¾¹</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(!dfsn[q])<span class="comment">//è¿™ä¸ªç‚¹æ²¡è®¿é—®è¿‡</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">tarjan</span>(q,<span class="literal">false</span>);<span class="comment">//é€’å½’ï¼Œå¹¶ä¸”è¿™ä¸ªç‚¹ä¸æ˜¯æ ¹</span></span><br><span class="line">            low[p]=<span class="built_in">min</span>(low[p],low[q]);<span class="comment">//æ›´æ–°çˆ¶èŠ‚ç‚¹çš„lowå€¼</span></span><br><span class="line">            tot+=(low[q]&gt;=dfsn[p]);<span class="comment">//å­èŠ‚ç‚¹çš„lowå€¼æ¯”çˆ¶èŠ‚ç‚¹çš„dfsåºè¿˜è¦å¤§ï¼Œé‚£å°±æŠŠéœ€è¦pçš„æ— æ³•é€ƒè„±çš„å­æ ‘ä¸ªæ•°åŠ ä¸€</span></span><br><span class="line">            <span class="comment">//éœ€è¦pçš„å­æ ‘æ˜¯æŒ‡åˆ å»påå­æ ‘æ— æ³•ä¸å¤–ç•Œè”ç³»</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span><span class="comment">//è®¿é—®è¿‡ï¼Œé‚£å°±å¯¹lowå€¼å–min</span></span><br><span class="line">        &#123;</span><br><span class="line">            low[p]=<span class="built_in">min</span>(low[p],dfsn[q]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(tot&gt;root)<span class="comment">//æ˜¯æ ¹é‚£å°±è¦å¤§äº1ï¼Œå¦åˆ™å°±è¦å¤§äº0</span></span><br><span class="line">        point.<span class="built_in">push_back</span>(p);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n,m;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="å‰²è¾¹"><a href="#å‰²è¾¹" class="headerlink" title="å‰²è¾¹"></a>å‰²è¾¹</h3><blockquote>
<p>å‰²è¾¹ï¼Œä¹Ÿå«åšæ¡¥ï¼Œå®šä¹‰ä¹‹å‰è¯´è¿‡ã€‚</p>
</blockquote>
<p>è¾ƒå‰²ç‚¹ï¼Œä¿®æ”¹ä¸€ä¸‹$low$çš„å®šä¹‰ï¼š</p>
<ul>
<li>ç»è¿‡ä»¥è‡ªèº«ä¸ºæ ¹èŠ‚ç‚¹çš„å­æ ‘ä¸­è‡³å¤šä¸€æ¡éæ ‘è¾¹èƒ½å¤Ÿåˆ°è¾¾çš„æœ€å° dfs åºçš„ç‚¹ï¼Œ<strong>å…¶ä¸­éæ ‘è¾¹ä¸åŒ…æ‹¬å„¿å­åˆ°çˆ¶äº²çš„åå‘è¾¹</strong>ã€‚</li>
</ul>
<p>æ‰€ä»¥å¯¹äº$low_q&gt;dfn_p$ï¼Œé‚£ä¹ˆ$p\leftrightarrow{q}$è¿™æ¡è¾¹å°±æ˜¯æ¡¥ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e6</span><span class="number">+7</span>;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; e[N];</span><br><span class="line"><span class="type">int</span> dfsn[N],low[N],fa[N];</span><br><span class="line"><span class="type">int</span> cnt;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; point;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">tarjan_0</span><span class="params">(<span class="type">int</span> p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    low[p]=dfsn[p]=++cnt;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;q:e[p])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(!dfsn[q])</span><br><span class="line">        &#123;</span><br><span class="line">            fa[q]=p;</span><br><span class="line">            <span class="built_in">tarjan_0</span>(q);</span><br><span class="line">            low[p]=<span class="built_in">min</span>(low[p],low[q]);</span><br><span class="line">            <span class="keyword">if</span>(low[q]&gt;dfsn[p]) bridges.<span class="built_in">emplace_back</span>(p,q);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(fa[p]!=q) low[p]=<span class="built_in">min</span>(low[p],dfsn[q]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n,m;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>å®ƒå’Œå‰²ç‚¹çš„åŒºåˆ«åœ¨äºå®ƒä¸èƒ½åˆ°å®ƒçš„çˆ¶äº²ã€‚</p>
<h3 id="ç‚¹åŒè¿é€šåˆ†é‡"><a href="#ç‚¹åŒè¿é€šåˆ†é‡" class="headerlink" title="ç‚¹åŒè¿é€šåˆ†é‡"></a>ç‚¹åŒè¿é€šåˆ†é‡</h3><blockquote>
<p>v-DCC</p>
</blockquote>
<p>æ˜¯æ»¡è¶³å›¾ä¸­ä¸åŒ…å«ä»»æ„å‰²ç‚¹çš„æå¤§è¿é€šå­å›¾ã€‚</p>
<p>å³åˆ å»ä»»ä½•ä¸€ä¸ªç‚¹ä¸ä¼šä½¿è¿™ä¸ªå›¾çš„è¿é€šæ€§å‘ç”Ÿæ”¹å˜ã€‚</p>
<p>ä¸€ä¸ªå­¤ç«‹çš„ç‚¹æ˜¯ä¸€ä¸ªç‚¹åŒè¿é€šåˆ†é‡ï¼Œä¸¤ä¸ªå‰²ç‚¹æ˜¯ä¸€ä¸ªç‚¹åŒè¿é€šåˆ†é‡ã€‚</p>
<p>å¯¹äºè‡ªç¯ï¼Œæˆ‘ä»¬ç‰¹åˆ¤æ‰å³å¯ï¼Œå®é™…ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªå­¤ç«‹ç‚¹ã€‚</p>
<p><strong>å¯¹äºä¸åŒçš„ä¸¤ä¸ªç‚¹åŒä¹‹é—´æœ‰ä¸”åªæœ‰ä¸€ä¸ªå…¬å…±ç‚¹ï¼Œä¸”è¿™ä¸ªç‚¹å°±æ˜¯å‰²ç‚¹ã€‚</strong></p>
<p>å‡å¦‚æœ‰å¤šä¸ªå…¬å…±ç‚¹ï¼Œé‚£ä¹ˆåˆ é™¤ä»»æ„ä¸€ä¸ªå…¬å…±ç‚¹ï¼Œä¸¤ä¸ªç‚¹åŒä¹‹é—´è¿˜æ˜¯å¯ä»¥ç›¸äº’è¿é€šï¼Œé‚£ä¹ˆå®ƒä»¬å°±å¯ä»¥åˆå¹¶ä¸ºä¸€ä¸ªå¤§çš„ç‚¹åŒï¼Œå› æ­¤æœ‰ä»¥ä¸Šç»“è®ºã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬æ±‚ç‚¹åŒè¿é€šåˆ†é‡ä¹Ÿå°±æ˜¯æ±‚æ¯ä¸ªå‰²ç‚¹çš„å­æ ‘ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">5e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> M = <span class="number">2e6</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m, edcnt, cnt, cdcc;</span><br><span class="line"><span class="type">int</span> fir[N], low[N], dfsn[N];</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; dcc[N];</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; point;</span><br><span class="line">stack&lt;<span class="type">int</span>&gt; s;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> to, nxt;</span><br><span class="line">&#125;e[M &lt;&lt; <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++edcnt].to = v;</span><br><span class="line">    e[edcnt].nxt = fir[u];</span><br><span class="line">    fir[u] = edcnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">tarjan</span><span class="params">(<span class="type">int</span> p, <span class="type">bool</span> root = <span class="literal">true</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> tot = <span class="number">0</span>;</span><br><span class="line">    dfsn[p] = low[p] = ++cnt;</span><br><span class="line">    s.<span class="built_in">push</span>(p);</span><br><span class="line">    <span class="keyword">if</span> (root &amp;&amp; fir[p] == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        dcc[++cdcc].<span class="built_in">emplace_back</span>(p);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = fir[p]; i; i = e[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> q = e[i].to;</span><br><span class="line">        <span class="keyword">if</span> (!dfsn[q])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">tarjan</span>(q, <span class="literal">false</span>);</span><br><span class="line">            low[p] = <span class="built_in">min</span>(low[p], low[q]);</span><br><span class="line">            <span class="keyword">if</span> (low[q] &gt;= dfsn[p])</span><br><span class="line">            &#123;</span><br><span class="line">                tot++;</span><br><span class="line">                <span class="keyword">if</span> (tot &gt; root) point.<span class="built_in">push_back</span>(p);</span><br><span class="line">                cdcc++;</span><br><span class="line">                <span class="type">int</span> top = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span> (top != q)</span><br><span class="line">                &#123;</span><br><span class="line">                    top = s.<span class="built_in">top</span>();</span><br><span class="line">                    s.<span class="built_in">pop</span>();</span><br><span class="line">                    dcc[cdcc].<span class="built_in">emplace_back</span>(top);</span><br><span class="line">                &#125;</span><br><span class="line">                dcc[cdcc].<span class="built_in">emplace_back</span>(p);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> low[p] = <span class="built_in">min</span>(low[p], dfsn[q]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> u, v;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;u, &amp;v);</span><br><span class="line">        <span class="keyword">if</span> (u == v) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="built_in">add</span>(u, v);</span><br><span class="line">        <span class="built_in">add</span>(v, u);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">if</span> (!dfsn[i])</span><br><span class="line">            <span class="built_in">tarjan</span>(i);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, cdcc);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= cdcc; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, (<span class="type">int</span>)dcc[i].<span class="built_in">size</span>());</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;j : dcc[i])</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot; %d&quot;</span>, j);</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="è¾¹åŒè¿é€šåˆ†é‡"><a href="#è¾¹åŒè¿é€šåˆ†é‡" class="headerlink" title="è¾¹åŒè¿é€šåˆ†é‡"></a>è¾¹åŒè¿é€šåˆ†é‡</h3><blockquote>
<p>e-DCC</p>
</blockquote>
<p>ä¸ç‚¹åŒç±»ä¼¼ï¼Œå³ä¸å«å‰²è¾¹çš„æœ€å¤§å­å›¾ã€‚</p>
<p>ä½†æ˜¯è¿™ä¸ªæ˜¯ä¸èƒ½é€šè¿‡åå‘è¾¹å›åˆ°çˆ¶äº²ï¼Œè€Œé‡è¾¹å…¶å®å±äºéæ ‘è¾¹æ˜¯å¯ä»¥èµ°çš„ï¼Œå› æ­¤ä¸å¯ä»¥é€šè¿‡åˆ¤ $fa$ æ¥åˆ¤æ–­ä¸èƒ½å›åˆ°çˆ¶äº²ï¼Œè¦é€šè¿‡åˆ¤æ–­åå‘è¾¹çš„æ–¹å¼ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">5e5</span> + <span class="number">7</span>, M = <span class="number">2e6</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m, cnt, edcnt = <span class="number">1</span>, cdcc;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; dcc[N];</span><br><span class="line">stack&lt;<span class="type">int</span>&gt; s;</span><br><span class="line"><span class="type">int</span> fir[N], low[N], dfsn[N];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> to, nxt;</span><br><span class="line">&#125;e[M &lt;&lt; <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++edcnt].to = v;</span><br><span class="line">    e[edcnt].nxt = fir[u];</span><br><span class="line">    fir[u] = edcnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">tarjan</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> f)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    low[p] = dfsn[p] = ++cnt;</span><br><span class="line">    s.<span class="built_in">push</span>(p);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = fir[p]; i; i = e[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> q = e[i].to;</span><br><span class="line">        <span class="keyword">if</span> (!dfsn[q])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">tarjan</span>(q, i);</span><br><span class="line">            low[p] = <span class="built_in">min</span>(low[p], low[q]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (i != (f ^ <span class="number">1</span>)) low[p] = <span class="built_in">min</span>(low[p], dfsn[q]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (low[p] == dfsn[p])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> top = <span class="number">0</span>;</span><br><span class="line">        cdcc++;</span><br><span class="line">        <span class="keyword">while</span> (top != p)</span><br><span class="line">        &#123;</span><br><span class="line">            top = s.<span class="built_in">top</span>();</span><br><span class="line">            s.<span class="built_in">pop</span>();</span><br><span class="line">            dcc[cdcc].<span class="built_in">emplace_back</span>(top);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> u, v;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;u, &amp;v);</span><br><span class="line">        <span class="keyword">if</span> (u == v) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="built_in">add</span>(u, v);</span><br><span class="line">        <span class="built_in">add</span>(v, u);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">if</span> (!dfsn[i])</span><br><span class="line">            <span class="built_in">tarjan</span>(i, <span class="number">-1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, cdcc);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= cdcc; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, (<span class="type">int</span>)dcc[i].<span class="built_in">size</span>());</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;j : dcc[i])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot; %d&quot;</span>, j);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="ç»ƒä¹ é¢˜1"><a href="#ç»ƒä¹ é¢˜1" class="headerlink" title="ç»ƒä¹ é¢˜1"></a>ç»ƒä¹ é¢˜1</h1><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303122017234.webp"
                      alt="image.webp"
                ></p>
<p>ç”¨åœ¨ä¸€æ¡è¾¹ä¸Šæ˜¯æœ€ä¼˜çš„</p>
<p>æšä¸¾æ¯æ¡è¾¹ï¼Œçœ‹çœ‹æŠŠæ‰€æœ‰èŠ±è´¹éƒ½ç”¨åœ¨å®ƒèº«ä¸Šèƒ½é™ä½å¤šå°‘ä»£ä»·</p>
<p>å¦‚æœæ˜¯æ ‘è¾¹ï¼Œé‚£ä¹ˆç›´æ¥å‡å»</p>
<p>å¦‚æœéæ ‘è¾¹ï¼Œé‚£å°±å’Œé“¾ä¸Šæœ€å¤§å€¼ä½œå·®ï¼Œä½¿å·®å€¼æœ€å¤§ï¼ˆä¹Ÿå°±æ˜¯å‡å°åœ°æœ€å¤§ï¼‰</p>
<h1 id="ç»ƒä¹ é¢˜2"><a href="#ç»ƒä¹ é¢˜2" class="headerlink" title="ç»ƒä¹ é¢˜2"></a>ç»ƒä¹ é¢˜2</h1><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303122031634.webp"
                      alt="image.webp"
                ></p>
<p>å…ˆæ±‚ç”Ÿæˆæ ‘ä¸­ç™½è‰²è¾¹æœ€å°‘æœ‰å¤šå°‘æ¡</p>
<p>å…¶æ¬¡ç®—ç”Ÿæˆæ ‘ä¸­ç™½è‰²è¾¹æœ€å¤šæœ‰å¤šå°‘æ¡</p>
<p>ä¹Ÿå°±æ˜¯ç™½è¾¹ä¼˜å…ˆè·‘ä¸€é Kruscal</p>
<p>å†é»‘è¾¹ä¼˜å…ˆè·‘ä¸€è¾¹ Kruscal</p>
<p>å¦‚æœå­˜åœ¨ä¸€ä¸ªæ–æ³¢é‚£å¥‘æ•°å¤„äºè¿™ä¸ªæœ€å¤§å€¼å’Œæœ€å°å€¼çš„åŒºé—´å†…</p>
<p>é‚£ä¹ˆå°±å­˜åœ¨è¿™æ ·ä¸€é¢—ç”Ÿæˆæ ‘</p>
<p>å¦åˆ™ä¸å­˜åœ¨</p>
<p>å› ä¸ºç™½è¾¹æœ€å°åˆ°ç™½è¾¹æœ€å¤šçš„è¿‡ç¨‹å°±æ˜¯ä¸€æ¡æ¡æŠŠé»‘è¾¹æ›¿æ¢æˆç™½è¾¹çš„è¿‡ç¨‹</p>
<h1 id="ç»ƒä¹ é¢˜3"><a href="#ç»ƒä¹ é¢˜3" class="headerlink" title="ç»ƒä¹ é¢˜3"></a>ç»ƒä¹ é¢˜3</h1><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303122047616.webp"
                      alt="image.webp"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303122046326.webp"
                      alt="image.webp"
                ></p>
<p>ä½¿å®ƒä»¬å·®åˆ†åºåˆ—$&#x3D;0$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303122051449.webp"
                      alt="image.webp"
                ></p>
<p>è®©è¿™$m$ä¸ªå€¼ç›¸åŒ</p>
<p>åœ¨<strong>å·®åˆ†åºåˆ—</strong>ä¸­ä½“ç°ä¸ºå‰é¢çš„æŸä¸ªå€¼åŠ ä¸Šxï¼Œåé¢çš„æŸä¸ªå€¼å‡å»x</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303122058923.webp"
                      alt="image.webp"
                ></p>
<p>åœ¨è¿™æ®µå·®åˆ†åºåˆ—ä¸­ï¼Œå’Œæ˜¯ä¸å˜çš„</p>
<p>å¦‚æœæ˜¯æœ‰è§£çš„ï¼Œé‚£ä¹ˆé¦–å…ˆè¦ä¿è¯è¿™$m$é¡¹çš„å’Œç­‰äº$0$</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202303122059718.webp"
                      alt="image.webp"
                ></p>
]]></content>
      <categories>
        <category>ACM</category>
      </categories>
  </entry>
  <entry>
    <title>åŸºç¡€ç®—æ³•</title>
    <url>/af411f31.html</url>
    <content><![CDATA[<h1 id="å°ºå–æ³•"><a href="#å°ºå–æ³•" class="headerlink" title="å°ºå–æ³•"></a>å°ºå–æ³•</h1><p>å…¶å®å°±æ˜¯åŒæŒ‡é’ˆæ³•ã€‚</p>
<p>ç»™ä¸€é“ä¾‹é¢˜æ‰¾æ‰¾æ„Ÿè§‰å§ï¼š</p>
<p><a class="link"   href="http://acm.hdu.edu.cn/showproblem.php?pid=2029" >HDU2029åˆ¤æ–­å›æ–‡ä¸²<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">while</span>(n--)</span><br><span class="line">    &#123;</span><br><span class="line">        string s;</span><br><span class="line">        cin&gt;&gt;s;</span><br><span class="line">        <span class="type">bool</span> ans=<span class="literal">true</span>;</span><br><span class="line">        <span class="type">int</span> i=<span class="number">0</span>,j=s.<span class="built_in">size</span>()<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">while</span>(i&lt;j)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(s[i]!=s[j])</span><br><span class="line">            &#123;</span><br><span class="line">                ans=<span class="literal">false</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            i++,j--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(ans) cout&lt;&lt;<span class="string">&quot;yes&quot;</span>&lt;&lt;endl;</span><br><span class="line">        <span class="keyword">else</span> cout&lt;&lt;<span class="string">&quot;no&quot;</span>&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>å°ºå–æ³•å¯ä»¥è§£å†³æ»‘åŠ¨çª—å£é—®é¢˜ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œæ•°ç»„å»é‡ã€‚</p>
<p>æŒ‡é’ˆä¸å¤Ÿçš„æ—¶å€™å¯ä»¥åŠ ï¼›</p>
<h1 id="äºŒåˆ†æ³•"><a href="#äºŒåˆ†æ³•" class="headerlink" title="äºŒåˆ†æ³•"></a>äºŒåˆ†æ³•</h1><blockquote>
<p>è¿™æ˜¯ä¸€ç§éå¸¸è€ƒéªŒè¾¹ç•Œå¤„ç†ç»†èŠ‚çš„ä¸€ç§ç®—æ³•ã€‚</p>
</blockquote>
<p><a class="link"   href="https://blog.csdn.net/weixin_43305485/article/details/122347842" >STL<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxn=<span class="number">100000</span><span class="number">+10</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> INF=<span class="number">2</span>*<span class="built_in">int</span>(<span class="number">1e9</span>)<span class="number">+10</span>;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LL long long</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">cmd</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a&gt;b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> num[<span class="number">6</span>]=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">15</span>,<span class="number">34</span>&#125;; </span><br><span class="line">	<span class="built_in">sort</span>(num,num<span class="number">+6</span>);                           <span class="comment">//æŒ‰ä»å°åˆ°å¤§æ’åº </span></span><br><span class="line">	<span class="type">int</span> pos1=<span class="built_in">lower_bound</span>(num,num<span class="number">+6</span>,<span class="number">7</span>)-num;    <span class="comment">//è¿”å›æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå¤§äºæˆ–ç­‰äºè¢«æŸ¥æ•°çš„å€¼ </span></span><br><span class="line">	<span class="type">int</span> pos2=<span class="built_in">upper_bound</span>(num,num<span class="number">+6</span>,<span class="number">7</span>)-num;    <span class="comment">//è¿”å›æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå¤§äºè¢«æŸ¥æ•°çš„å€¼</span></span><br><span class="line">	cout&lt;&lt;pos1&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;num[pos1]&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;pos2&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;num[pos2]&lt;&lt;endl;</span><br><span class="line">	<span class="built_in">sort</span>(num,num<span class="number">+6</span>,cmd);                      <span class="comment">//æŒ‰ä»å¤§åˆ°å°æ’åº</span></span><br><span class="line">	<span class="type">int</span> pos3=<span class="built_in">lower_bound</span>(num,num<span class="number">+6</span>,<span class="number">7</span>,<span class="built_in">greater</span>&lt;<span class="type">int</span>&gt;())-num;  <span class="comment">//è¿”å›æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå°äºæˆ–ç­‰äºè¢«æŸ¥æ•°çš„å€¼ </span></span><br><span class="line">	<span class="type">int</span> pos4=<span class="built_in">upper_bound</span>(num,num<span class="number">+6</span>,<span class="number">7</span>,<span class="built_in">greater</span>&lt;<span class="type">int</span>&gt;())-num;  <span class="comment">//è¿”å›æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå°äºè¢«æŸ¥æ•°çš„å€¼ </span></span><br><span class="line">	cout&lt;&lt;pos3&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;num[pos3]&lt;&lt;endl;</span><br><span class="line">	cout&lt;&lt;pos4&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;num[pos4]&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;	</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure></div>

<p>å…¶å®ä¹Ÿæœ‰ä¸€ç§å¯ä»¥ä¸ç”¨ <code>greater&lt;int&gt;()</code> ä»¿å‡½æ•°çš„æ–¹æ³•ï¼š</p>
<ul>
<li>å°äºç­‰äºï¼šæŸ¥æ‰¾æœ€å°çš„å¤§äºæŸæ•°çš„ä¸‹æ ‡(upper_bound) - 1</li>
<li>å°äºï¼šæŸ¥æ‰¾æœ€å°çš„å¤§äºç­‰äºæŸæ•°çš„ä¸‹æ ‡(lower_bound) - 1</li>
</ul>
<p>åœ¨è¿™é‡Œä¸å¤šèµ˜è¿°ï¼Œåªå¯æ„ä¼šä¸å¯è¨€ä¼ ã€‚</p>
<h2 id="ç»ƒä¹ ï¼š"><a href="#ç»ƒä¹ ï¼š" class="headerlink" title="ç»ƒä¹ ï¼š"></a>ç»ƒä¹ ï¼š</h2><p><a class="link"   href="https://www.luogu.com.cn/problem/P1462#submit" >P1462é€šå¾€å¥¥æ ¼ç‘ç›çš„é“è·¯<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p><code>äºŒåˆ†+æœ€çŸ­è·¯</code></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">50005</span>,M=<span class="number">1000005</span>;</span><br><span class="line"><span class="type">int</span> n,m,b;</span><br><span class="line"><span class="type">int</span> f[N],fir[N],cnt,dist[N],righ[N];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span>&#123;</span><br><span class="line">    <span class="type">int</span> next,to,w;</span><br><span class="line">&#125;e[M];</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MAX=<span class="number">1e9</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v,<span class="type">int</span> w)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++cnt].next=fir[u];</span><br><span class="line">    e[cnt].to=v;</span><br><span class="line">    e[cnt].w=w;</span><br><span class="line">    fir[u]=cnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line">    <span class="type">int</span> p,d;</span><br><span class="line">    <span class="built_in">node</span>()&#123;&#125;</span><br><span class="line">    <span class="built_in">node</span>(<span class="type">int</span> a,<span class="type">int</span> b)&#123;p=a;d=b;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>&lt;(<span class="type">const</span> node &amp;a,<span class="type">const</span> node &amp;b)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> a.d&gt;b.d;</span><br><span class="line">&#125;</span><br><span class="line">priority_queue&lt;node&gt;q;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">dijksta</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x&lt;f[<span class="number">1</span>]) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        dist[i]=<span class="number">1e9</span>;</span><br><span class="line">    <span class="built_in">memset</span>(righ,<span class="number">0</span>,<span class="built_in">sizeof</span>(righ));</span><br><span class="line">    dist[<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        q.<span class="built_in">push</span>(<span class="built_in">node</span>(i,dist[i]));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span>(righ[q.<span class="built_in">top</span>().p]) q.<span class="built_in">pop</span>();</span><br><span class="line">        node now=q.<span class="built_in">top</span>();</span><br><span class="line">        <span class="type">int</span> p=now.p;</span><br><span class="line">        righ[p]=<span class="number">1</span>;</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=fir[p];j;j=e[j].next)</span><br><span class="line">        &#123;  </span><br><span class="line">            <span class="type">int</span> v=e[j].to;</span><br><span class="line">            <span class="keyword">if</span>(f[v]&gt;x) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="type">int</span> d=e[j].w+dist[p];</span><br><span class="line">            <span class="keyword">if</span>(d&lt;dist[v])</span><br><span class="line">            &#123;</span><br><span class="line">                dist[v]=d;</span><br><span class="line">                </span><br><span class="line">                q.<span class="built_in">push</span>(<span class="built_in">node</span>(v,d));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(dist[n]&lt;=b) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">erfen</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> l=<span class="number">1</span>,r=MAX,mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> c;</span><br><span class="line">    <span class="keyword">while</span>(l&lt;=r)</span><br><span class="line">    &#123;</span><br><span class="line">        c=<span class="built_in">dijksta</span>(mid);</span><br><span class="line">        <span class="keyword">if</span>(c!=<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            r=mid<span class="number">-1</span>;</span><br><span class="line">            mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            l=mid<span class="number">+1</span>;</span><br><span class="line">            mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> l;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;n,&amp;m,&amp;b);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;f[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> a,b,c;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;a,&amp;b,&amp;c);</span><br><span class="line">        <span class="built_in">add</span>(a,b,c);</span><br><span class="line">        <span class="built_in">add</span>(b,a,c);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">dijksta</span>(MAX)==<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;AFK&quot;</span>&lt;&lt;endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;<span class="built_in">erfen</span>()&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P1824" >P1824è¿›å‡»çš„å¥¶ç‰›<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxn=<span class="number">1e9</span>;</span><br><span class="line"><span class="type">int</span> a[<span class="number">1000010</span>],n,c;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">P</span><span class="params">(<span class="type">int</span> d)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> k=<span class="number">0</span>,last=-maxn;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i]-last&gt;=d)</span><br><span class="line">        &#123;</span><br><span class="line">            last=a[i];</span><br><span class="line">            k++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> k&gt;=c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;c);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(a<span class="number">+1</span>,a+n<span class="number">+1</span>);</span><br><span class="line">    <span class="type">int</span> l=<span class="number">0</span>,r=<span class="number">1e9</span>,ans,mid;</span><br><span class="line">    <span class="keyword">while</span>(l&lt;=r)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">P</span>(mid=l + r &gt;&gt; <span class="number">1</span>))</span><br><span class="line">            ans=mid,l=mid<span class="number">+1</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            r=mid<span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,ans);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P1419" >P1419<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">100005</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n,s,t;</span><br><span class="line"><span class="type">int</span> a[<span class="number">100050</span>];</span><br><span class="line"><span class="type">double</span> sum[N];</span><br><span class="line"><span class="type">int</span> q[N];</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(<span class="type">double</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> l=<span class="number">1</span>,r=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="comment">//é¢„å¤„ç†å‰ç¼€å’Œï¼ˆ-kï¼‰</span></span><br><span class="line">    &#123;</span><br><span class="line">        sum[i]=sum[i<span class="number">-1</span>]+a[i]*<span class="number">1.0</span>-k;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=s,p=<span class="number">0</span>;i&lt;=n;i++,p++)<span class="comment">//å•è°ƒé˜Ÿåˆ—</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span>(r&gt;=l&amp;&amp;sum[q[r]]&gt;sum[p]) r--;</span><br><span class="line">        q[++r]=p;</span><br><span class="line">        <span class="keyword">while</span>(i-q[l]&gt;t)++l;</span><br><span class="line">        <span class="keyword">if</span>(sum[i]-sum[q[l]]&gt;=<span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin&gt;&gt;n;</span><br><span class="line">    cin&gt;&gt;s&gt;&gt;t;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="type">double</span> l=<span class="number">-1e4</span>,r=<span class="number">1e4</span>,mid;</span><br><span class="line">    <span class="keyword">while</span>(r-l&gt;<span class="number">1e-5</span>)<span class="comment">//å®æ•°äºŒåˆ†</span></span><br><span class="line">    &#123;</span><br><span class="line">        mid=(l+r)/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">check</span>(mid)) l=mid;</span><br><span class="line">        <span class="keyword">else</span> r=mid;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%.3f\n&quot;</span>,l);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<p><a class="link"   href="http://poj.org/problem?id=3122" >POJ3122<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">double</span> PI=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="type">double</span> a[<span class="number">100000</span>];</span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(<span class="type">double</span> mid)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> sum=<span class="number">0</span>;<span class="comment">//èƒ½åˆ‡çš„PIEæ€»æ•°</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        sum+=(<span class="type">int</span>)(a[i]/mid);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(sum&gt;=m) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;t);</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">        m++;</span><br><span class="line">        <span class="type">double</span> maxp=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> r;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;r);</span><br><span class="line">            a[i]=PI*r*r;</span><br><span class="line">            <span class="keyword">if</span>(maxp&lt;a[i]) maxp=a[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">double</span> l=<span class="number">0</span>,r=maxp;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">100</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">double</span> mid=l+(r-l)/<span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">check</span>(mid)) l=mid;</span><br><span class="line">            <span class="keyword">else</span> r=mid;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%.4f\n&quot;</span>,l);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P1083" >P1083<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e6</span><span class="number">+117</span>;</span><br><span class="line"><span class="type">int</span> r[N],d[N],s[N],t[N],pre[N],ne[N];</span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(<span class="type">int</span> mid)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(pre,<span class="number">0</span>,<span class="built_in">sizeof</span>(pre));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=mid;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        pre[s[i]]+=d[i];</span><br><span class="line">        pre[t[i]<span class="number">+1</span>]-=d[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        ne[i]=ne[i<span class="number">-1</span>]+pre[i];<span class="comment">//åˆ©ç”¨å·®åˆ†æ•°ç»„æ±‚å½“å¤©è¦ç§Ÿçš„æ•™å®¤</span></span><br><span class="line">        <span class="keyword">if</span>(ne[i]&gt;r[i]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>,&amp;r[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld%lld&quot;</span>,&amp;d[i],&amp;s[i],&amp;t[i]);</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">check</span>(m))</span><br><span class="line">    &#123;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;0&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> l=<span class="number">1</span>,r=m;</span><br><span class="line">    <span class="keyword">while</span>(l&lt;r)<span class="comment">//ç­‰äºåä¸ç”¨åˆ¤æ–­</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">check</span>(mid)) l=mid<span class="number">+1</span>;</span><br><span class="line">        <span class="keyword">else</span> r=mid;<span class="comment">//æ³¨æ„ç»†èŠ‚</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;-1\n%lld&quot;</span>,l);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P2678" >P2678<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> L,N,M;</span><br><span class="line"><span class="type">int</span> ans;</span><br><span class="line"><span class="type">int</span> stone[<span class="number">500005</span>];</span><br><span class="line"><span class="type">int</span> s[<span class="number">100000005</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">f</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="type">int</span> size=<span class="number">0</span>,take=<span class="number">0</span>;</span><br><span class="line">	s[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=N;++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(stone[i]-s[size]&lt;x)</span><br><span class="line">		&#123;</span><br><span class="line">			take++;</span><br><span class="line">			<span class="keyword">continue</span>;<span class="comment">//å»æ‰ </span></span><br><span class="line">		&#125;</span><br><span class="line">		s[++size]=stone[i];	</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(L-s[size]&lt;x)</span><br><span class="line">	&#123;</span><br><span class="line">		size--;</span><br><span class="line">		take++;        </span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> take&lt;=M;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;L,&amp;N,&amp;M);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=N;++i)</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;stone[i]);</span><br><span class="line">	<span class="type">int</span> left=<span class="number">0</span>,right=L<span class="number">+1</span>;</span><br><span class="line">	<span class="keyword">while</span>(left<span class="number">+1</span>&lt;right)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="type">int</span> mid=(left+right)/<span class="number">2</span>;</span><br><span class="line">		<span class="keyword">if</span>(<span class="built_in">f</span>(mid)==<span class="number">1</span>)</span><br><span class="line">			left=mid;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			right=mid;</span><br><span class="line">	&#125;</span><br><span class="line">	ans=left;<span class="comment">//***</span></span><br><span class="line">	cout&lt;&lt;ans;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<hr>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P1314" >P1314<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">2e5</span><span class="number">+7</span>;</span><br><span class="line"><span class="type">long</span> <span class="type">long</span> ans=<span class="number">1e12</span><span class="number">+7</span>;</span><br><span class="line"><span class="type">int</span> n,m,s,maxn=<span class="number">-1</span>,sum;</span><br><span class="line"><span class="type">int</span> w[N],v[N],l[N],r[N];</span><br><span class="line"><span class="type">int</span> ren[N],rev[N],y;<span class="comment">//æ•°é‡å‰ç¼€å’Œï¼Œä»·å€¼å‰ç¼€å’Œï¼Œy</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(<span class="type">int</span> mid)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    y=<span class="number">0</span>,sum=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(ren,<span class="number">0</span>,<span class="built_in">sizeof</span>(ren));</span><br><span class="line">    <span class="built_in">memset</span>(rev,<span class="number">0</span>,<span class="built_in">sizeof</span>(rev));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(w[i]&gt;=mid) ren[i]=ren[i<span class="number">-1</span>]<span class="number">+1</span>,rev[i]=rev[i<span class="number">-1</span>]+v[i];</span><br><span class="line">        <span class="keyword">else</span> ren[i]=ren[i<span class="number">-1</span>],rev[i]=rev[i<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">        y+=(ren[r[i]]-ren[l[i]<span class="number">-1</span>])*(rev[r[i]]-rev[l[i]<span class="number">-1</span>]);</span><br><span class="line">    sum=<span class="built_in">llabs</span>(y-s);</span><br><span class="line">    <span class="keyword">if</span>(y&gt;s) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin&gt;&gt;n&gt;&gt;m&gt;&gt;s;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>,&amp;w[i],&amp;v[i]);</span><br><span class="line">        maxn=<span class="built_in">max</span>(maxn,w[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>,&amp;l[i],&amp;r[i]);</span><br><span class="line">    <span class="type">int</span> l=<span class="number">0</span>,r=maxn;</span><br><span class="line">    <span class="keyword">while</span>(l&lt;=r)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> m=l+(r-l)/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">check</span>(m)) l=m<span class="number">+1</span>;</span><br><span class="line">        <span class="keyword">else</span> r=m<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">if</span>(sum&lt;ans) ans=sum;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h1 id="ä¸‰åˆ†æ³•"><a href="#ä¸‰åˆ†æ³•" class="headerlink" title="ä¸‰åˆ†æ³•"></a>ä¸‰åˆ†æ³•</h1><h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><p><a class="link"   href="https://www.luogu.com.cn/problem/P3382" >P3382<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">double</span> eps=<span class="number">1e-6</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">double</span> a[<span class="number">20</span>];</span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">f</span><span class="params">(<span class="type">double</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">double</span> s=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=n;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">        s=s*x+a[i];</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">double</span> l,r;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%lf%lf&quot;</span>,&amp;n,&amp;l,&amp;r);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=n;i&gt;=<span class="number">0</span>;i--) <span class="built_in">scanf</span>(<span class="string">&quot;%lf&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="keyword">while</span>(r-l&gt;eps)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">double</span> k=(r-l)/<span class="number">3.0</span>;</span><br><span class="line">        <span class="type">double</span> m1=l+k;</span><br><span class="line">        <span class="type">double</span> m2=r-k;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">f</span>(m1)&gt;<span class="built_in">f</span>(m2)) r=m2;</span><br><span class="line">        <span class="keyword">else</span> l=m1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%.5f\n&quot;</span>,l);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P3745" >P3745<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e5</span><span class="number">+7</span>;</span><br><span class="line"><span class="type">int</span> n,m,t[N],b[N];</span><br><span class="line">ll A,B,C,ans;</span><br><span class="line"><span class="function">ll <span class="title">calc1</span><span class="params">(<span class="type">int</span> p)</span><span class="comment">//å°†æœ€æ™šå…¬å¸ƒæˆç»©çš„æ—¶é—´è°ƒæ•´åˆ°pæ‰€äº§ç”Ÿçš„ä¸æ„‰å¿«åº¦</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll x=<span class="number">0</span>,y=<span class="number">0</span>;<span class="comment">//xä»£è¡¨èƒ½æå‰æ”¹å®Œå·å­çš„[æ€»æå‰å¤©æ•°å’Œ]ä½†æ˜¯ç”±äºä¸æ„‰å¿«åº¦åªç”±æœ€åæ”¹å®Œå·å­çš„é‚£ä¸€å¤©å†³å®šï¼Œæ‰€ä»¥å¯ä»¥å°†æå‰æ”¹å®Œçš„å¤©æ•°å»¶åè€Œä½¿æ¨è¿Ÿæ”¹å®Œçš„å¤©æ•°æå‰</span></span><br><span class="line">    <span class="comment">//yä»£è¡¨æ¨è¿Ÿæ”¹å®Œå·å­çš„[æ€»æ¨è¿Ÿå¤©æ•°å’Œ]ï¼Œæ„å‘³ç€å¯ä»¥é€‰æ‹©ç”¨xæ¥å¡«è¡¥yï¼Œä½¿æ•´ä½“å¹³å‡ï¼Œä½¿æœ€æ™šé‚£ä¸€å¤©å°½å¯èƒ½é å‰</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(b[i]&lt;p) x+=p-b[i];</span><br><span class="line">        <span class="keyword">else</span> y+=b[i]-p;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(A&lt;B)<span class="comment">//å¦‚æœæ“ä½œAï¼ˆäº¤æ¢äº’è¡¥ï¼‰çš„ä»£ä»·æ›´ä½ï¼Œé‚£å°±èƒ½äº¤æ¢å³äº¤æ¢ï¼Œä¸èƒ½äº¤æ¢å†æ–°æ·»äººæ‰‹</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">min</span>(x,y)*A+(y-<span class="built_in">min</span>(x,y))*B;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> y*B;<span class="comment">//ä¸å¦‚ç›´æ¥æ·»äººæ‰‹ä»£ä»·æ›´ä½</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">calc2</span><span class="params">(<span class="type">int</span> p)</span><span class="comment">//æ‰€æœ‰åŒå­¦çš„åœ¨æœ€åä¸€å¤©äº§ç”Ÿçš„ä¸æ„‰å¿«æ€»å’Œ</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(t[i]&lt;p) sum+=(p-t[i])*C;<span class="comment">//æ¨è¿Ÿçš„å¤©æ•°*C</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin&gt;&gt;A&gt;&gt;B&gt;&gt;C&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;t[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;b[i]);</span><br><span class="line">    <span class="built_in">sort</span>(b<span class="number">+1</span>,b+m<span class="number">+1</span>);</span><br><span class="line">    <span class="built_in">sort</span>(t<span class="number">+1</span>,t+n<span class="number">+1</span>);</span><br><span class="line">    <span class="keyword">if</span>(C&gt;=<span class="number">1e16</span>)<span class="comment">//å…¨éƒ¨è¡¥å……è€å¸ˆä¹Ÿæ¯”è®©å­¦ç”Ÿä¸æ»¡æ„æ›´ä¼˜ï¼Œé‚£å°±è°ƒè€å¸ˆè®©å­¦ç”Ÿæ»¡æ„</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,<span class="built_in">calc1</span>(t[<span class="number">1</span>]));</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ans=<span class="number">1e16</span>;</span><br><span class="line">    <span class="type">int</span> l=<span class="number">1</span>,r=N;</span><br><span class="line">    <span class="keyword">while</span>(r-l&gt;<span class="number">2</span>)<span class="comment">//ä¸‰åˆ†å¾—åˆ°æœ€å°å€¼æ‰€åœ¨çš„å¤©çš„åºå·çš„åŒºé—´</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> m1=l+(r-l)/<span class="number">3</span>;</span><br><span class="line">        <span class="type">int</span> m2=r-(r-l)/<span class="number">3</span>;</span><br><span class="line">        ll c1=<span class="built_in">calc1</span>(m1)+<span class="built_in">calc2</span>(m1);</span><br><span class="line">        ll c2=<span class="built_in">calc1</span>(m2)+<span class="built_in">calc2</span>(m2);</span><br><span class="line">        <span class="keyword">if</span>(c1&lt;=c2) r=m2;</span><br><span class="line">        <span class="keyword">else</span> l=m1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=l;i&lt;=r;i++)<span class="comment">//æšä¸¾</span></span><br><span class="line">    &#123;</span><br><span class="line">        ll x=<span class="built_in">calc1</span>(i)+<span class="built_in">calc2</span>(i);</span><br><span class="line">        ans=<span class="built_in">min</span>(ans,x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,ans);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>


<hr>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P1883" >P1883<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p><del>å’•å’•å’•</del></p>
<h1 id="å€å¢ä¸ST"><a href="#å€å¢ä¸ST" class="headerlink" title="å€å¢ä¸ST"></a>å€å¢ä¸ST</h1><p><strong>è¶…çº§å¿«çš„é€Ÿåº¦ï¼š</strong>$O(log_2n)$</p>
<blockquote>
<p>åŸç†ä¸äºŒåˆ†æ³•ç›¸å¯¹ï¼Œä¸å¤šèµ˜è¿°ã€‚</p>
</blockquote>
<h2 id="å€å¢"><a href="#å€å¢" class="headerlink" title="å€å¢"></a>å€å¢</h2><p>åˆ©ç”¨äºŒè¿›åˆ¶çš„â€œç‰¹æ€§â€ï¼Œå¯ä»¥å°†ä¸€ä¸ªæ•°å±•å¼€å¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„â€œå€å¢å½¢å¼â€ã€‚</p>
<h3 id="ä¹ é¢˜"><a href="#ä¹ é¢˜" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h3><p><a class="link"   href="https://www.luogu.com.cn/problem/P4155" >P4155<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>è¿™é“é¢˜æœ‰é“æ€è·¯ç›¸ä»¿çš„é¢˜ç›®å¯ä»¥å…ˆåšä¸€ä¸‹ï¼š<a class="link"   href="https://www.luogu.com.cn/problem/P1803" >P1803<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p><strong>å¯¹äºæœ¬é¢˜ï¼š</strong></p>
<ol>
<li>æ–­ç¯ä¸ºé“¾ã€‚</li>
<li>è´ªå¿ƒï¼šé€‰æ‹©ä¸€ä¸ªåŒºé—´ï¼Œä¸‹ä¸€ä¸ªåŒºé—´çš„å·¦ç«¯ç‚¹å¿…é¡»<strong>å°äºç­‰äº</strong>è¿™ä¸ªåŒºé—´çš„å³ç«¯ç‚¹ï¼Œå…¶ä¸­æ»¡è¶³æ¡ä»¶çš„ä¸‹ä¸€ä¸ªåŒºé—´çš„å³ç«¯ç‚¹æœ€å¤§ä¸ºæœ€ä¼˜ã€‚</li>
<li>å€å¢ï¼šå¿«é€ŸæŸ¥è¯¢èµ°$2^i$æ­¥æ‰€èƒ½åˆ°è¾¾çš„æœ€ä¼˜çš„åŒºé—´ï¼Œé¿å…æš´åŠ›æšä¸¾ã€‚</li>
</ol>
<p>å®šä¹‰<code>go[s][i]</code> è¡¨ç¤ºä»ç¬¬sä¸ªåŒºé—´å‡ºå‘ï¼Œèµ°$2^i$ä¸ªæœ€ä¼˜åŒºé—´æ‰€åˆ°è¾¾çš„åŒºé—´ï¼ˆæˆ˜å£«çš„èŒƒå›´ï¼‰ã€‚</p>
<p>æ‰€ä»¥é¦–å…ˆéœ€è¦é¢„å¤„ç†å‡º<code>go[][]</code>ã€‚</p>
<p><em>å¤æ‚åº¦ï¼š</em>$nlog_2n$</p>
<p><strong>é€’æ¨å¼ï¼š</strong><code>go[s][i]=go[go[s][i-1]][i-1]</code></p>
<p><em>æ€»å¤æ‚åº¦ï¼š</em>$2nlog_2n$</p>
<p><strong>codeï¼š</strong></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">4e5</span><span class="number">+1</span>;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">yum</span>&#123;</span><br><span class="line">    <span class="type">int</span> id,l,r;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span>&lt;(<span class="type">const</span> yum x) <span class="type">const</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> l&lt;x.l;<span class="comment">//ä»¥å·¦ç«¯ç‚¹æœ€å°çš„ä¸ºç¬¬ä¸€ä¸ª</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;w[N*<span class="number">2</span>];</span><br><span class="line"><span class="type">int</span> n2;<span class="comment">//æ–­ç¯ä¸ºé“¾åçš„é“¾é•¿</span></span><br><span class="line"><span class="type">int</span> go[N][<span class="number">20</span>],res[N];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> nxt=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n2;i++)<span class="comment">//è´ªå¿ƒæ±‚æ¯ä¸ªåŒºé—´çš„ä¸‹ä¸€ä¸ªåŒºé—´</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span>(nxt&lt;=n2&amp;&amp;w[nxt].l&lt;=w[i].r)</span><br><span class="line">            nxt++;</span><br><span class="line">        go[i][<span class="number">0</span>]=nxt<span class="number">-1</span>;<span class="comment">//å› ä¸ºç»“æŸå¾ªç¯æ—¶å¤šåŠ äº†1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;(<span class="number">1</span>&lt;&lt;i)&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n2;j++)</span><br><span class="line">            go[j][i]=go[go[j][i<span class="number">-1</span>]][i<span class="number">-1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">get</span><span class="params">(<span class="type">int</span> x)</span><span class="comment">//ä»xå‡ºå‘</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> len=w[x].l+m,cur=x,ans=<span class="number">1</span>;<span class="comment">//lenä¸ºä»¥xä¸ºèµ·ç‚¹æœ€è¿œèƒ½èµ°åˆ°çš„ä½ç½®ï¼Œansä¸ºåˆå§‹çš„èµ·ç‚¹æˆ˜å£«</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="built_in">log2</span>(N);i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> pos=go[cur][i];</span><br><span class="line">        <span class="keyword">if</span>(pos&amp;&amp;w[pos].r&lt;len)</span><br><span class="line">        &#123;</span><br><span class="line">            ans+=<span class="number">1</span>&lt;&lt;i;<span class="comment">//åŒºé—´æ•°ï¼ˆå³æˆ˜å£«æ•°ï¼‰</span></span><br><span class="line">            cur=pos;<span class="comment">//è·³åˆ°è¿™ä¸ªåŒºé—´</span></span><br><span class="line">        &#125;</span><br><span class="line">        res[w[x].id]=ans<span class="number">+1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        w[i].id=i;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;w[i].l,&amp;w[i].r);</span><br><span class="line">        <span class="keyword">if</span>(w[i].r&lt;w[i].l) w[i].r+=m;<span class="comment">//è‹¥å³ç«¯ç‚¹æ¯”å·¦ç«¯ç‚¹å°ï¼Œåˆ™è¯´æ˜è¿™æ®µåŒºé—´åŒ…å«éœ€è¦æ–­ç¯çš„ç‚¹ï¼Œé‚£å°±æ–­ï¼Œä½¿å¾—è¿™æ®µåŒºé—´åœ¨é“¾ä¸Šå¯ä»¥æ­£å¸¸è¡¨ç¤º</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(w<span class="number">+1</span>,w<span class="number">+1</span>+n);</span><br><span class="line">    n2=n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        n2++;</span><br><span class="line">        w[n2]=w[i];</span><br><span class="line">        w[n2].l=w[i].l+m;<span class="comment">//å¤åˆ¶ä¸€ä»½</span></span><br><span class="line">        w[n2].r=w[i].r+m;<span class="comment">//å¤åˆ¶æ˜¯ä¸ºäº†å¯¹äº8~2--&gt;8~12çš„è¿™ç§è¶…å‡ºåŒºé—´çš„é€’æ¨çš„æ­£ç¡®æ€§</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">init</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="built_in">get</span>(i);<span class="comment">//è®¡ç®—ä»¥æ¯åæˆ˜å£«ä¸ºèµ·ç‚¹çš„æœ€å°‘äººæ•°</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,res[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="ST"><a href="#ST" class="headerlink" title="ST"></a>ST</h2><blockquote>
<p>STç®—æ³•åŸºäºå€å¢åŸç†ï¼Œé€‚ç”¨äºæ±‚è§£é™æ€ç©ºé—´çš„åŒºé—´æœ€å€¼æŸ¥è¯¢ï¼ˆRMQï¼‰ã€‚</p>
</blockquote>
<p><strong>RMQé—®é¢˜</strong>ï¼šç»™å®šé•¿åº¦ä¸ºnçš„é™æ€æ•°åˆ—ï¼Œåšmæ¬¡æŸ¥è¯¢ï¼Œæ¯æ¬¡ç»™å®šä¸€æ®µåŒºé—´<code>[L,R]</code>ï¼Œæ±‚è¿™æ®µåŒºé—´ä¸­çš„æœ€å€¼ã€‚</p>
<p>ä»¥æœ€å°å€¼ä¸ºä¾‹ï¼š</p>
<p>è‹¥ä¸€ä¸ªå¤§åŒºé—´èƒ½è¢«ä¸¤ä¸ªå°åŒºé—´è¦†ç›–ï¼Œé‚£ä¹ˆå¤§åŒºé—´çš„æœ€å€¼ç­‰äºä¸¤ä¸ªå°åŒºé—´çš„æœ€å€¼çš„æœ€å€¼ï¼ˆé‡åˆä¸å½±å“ï¼‰ã€‚</p>
<p>äºæ˜¯å¾—åˆ°åŸºæœ¬æ€è·¯ï¼š</p>
<ol>
<li>å°†åºåˆ—æ‹†åˆ†ä¸ºè‹¥å¹²ä¸ªå°åŒºé—´ï¼Œå¹¶é¢„å¤„ç†å°åŒºé—´çš„æœ€å€¼ã€‚</li>
<li>å¯¹ä»»æ„åŒºé—´è¿›è¡Œæœ€å€¼æŸ¥è¯¢ï¼Œåªéœ€è¦æ‰¾åˆ°è¦†ç›–å®ƒçš„ä¸¤ä¸ªå°åŒºé—´ï¼Œç”±ä¸¤ä¸ªå°åŒºé—´çš„æœ€å€¼å¾—å‡ºã€‚</li>
</ol>
<p>å®šä¹‰<code>dp[s][k]=min(dp[s][k-1],dp[s+(1&lt;&lt;(k-1))][k-1])</code>ï¼Œ</p>
<p>ä»£è¡¨ä»$s$å¼€å§‹çš„$2^k$çš„åŒºé—´æœ€å€¼ä¸ºä»så¼€å§‹çš„$2^{k-1}$åŒºé—´å’Œä»$s+2^{k-1}$å¼€å§‹çš„$2^{k-1}$åŒºé—´çš„æœ€å€¼ã€‚</p>
<p>é€’æ¨å…³ç³»å®é™…æ˜¯ä¸€ä¸ª<code>DP</code>çš„è¿‡ç¨‹ï¼Œå¤æ‚åº¦$nlogn$ã€‚</p>
<hr>
<p>åŒºé—´<code>[L,R]</code>çš„é•¿åº¦ä¸º<code>len=R-l+1</code>ï¼Œä¸¤ä¸ªå°åŒºé—´çš„é•¿åº¦éƒ½ä¸ºxï¼Œä½¿å¾—$x\le{len}$å¹¶ä¸”$2x\ge{len}$ï¼Œè¿™æ ·å¯ä»¥ä¿è¯è¦†ç›–ã€‚</p>
<p>äºæ˜¯ä»¤$x&#x3D;2^k$ï¼Œ$k&#x3D;log_2(x)$ï¼Œç”±äºkæ˜¯å‘ä¸‹å–æ•´çš„ï¼Œäºæ˜¯èƒ½æ»¡è¶³$x\le{len}$å¹¶ä¸”$2x\ge{len}$çš„æ¡ä»¶ã€‚</p>
<p>å½“ç„¶ä¹Ÿå¯ä»¥å†™ä½œ$k&#x3D;(int)(log(double(R-L+1))&#x2F;log(2.0))$ï¼ˆåˆ©ç”¨æ¢åº•å…¬å¼ï¼‰ã€‚</p>
<p>å¦‚æœå«Œåº“å‡½æ•°æ…¢çš„è¯ä¹Ÿå¯ä»¥è‡ªå·±å†™logå‡½æ•°ã€‚</p>
<p><strong>ST:</strong></p>
<p>$$<br>nlogn-(\sum^{logn}_{i&#x3D;1}2^i)<br>$$</p>
<hr>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P2251" >P2251<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*Set*/</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="comment">using namespace std;</span></span><br><span class="line"><span class="comment">set&lt;pair&lt;int,int&gt; &gt; S;</span></span><br><span class="line"><span class="comment">int n ,m,a[100005]; </span></span><br><span class="line"><span class="comment">int main()</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">	cin&gt;&gt;n&gt;&gt;m;</span></span><br><span class="line"><span class="comment">	for(int i=1;i&lt;=n;i++)</span></span><br><span class="line"><span class="comment">	&#123;</span></span><br><span class="line"><span class="comment">		scanf(&quot;%d&quot;,&amp;a[i]);</span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">	for(int i=1;i&lt;=n;i++)</span></span><br><span class="line"><span class="comment">	&#123;</span></span><br><span class="line"><span class="comment">		S.insert(make_pair(a[i],i));</span></span><br><span class="line"><span class="comment">		if(i&gt;=m) </span></span><br><span class="line"><span class="comment">		&#123;</span></span><br><span class="line"><span class="comment">			if(i&gt;m)</span></span><br><span class="line"><span class="comment">				S.erase(make_pair(a[i-m],i-m));</span></span><br><span class="line"><span class="comment">			printf(&quot;%d\n&quot;,(*S.begin()).first);</span></span><br><span class="line"><span class="comment">		&#125;</span></span><br><span class="line"><span class="comment"> 	&#125;</span></span><br><span class="line"><span class="comment"> 	return 0;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="type">int</span> a[<span class="number">100005</span>];</span><br><span class="line"><span class="type">int</span> st[<span class="number">100005</span>][<span class="number">23</span>];</span><br><span class="line"><span class="type">int</span> LOG2[<span class="number">100005</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    LOG2[<span class="number">0</span>]=<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) LOG2[i]=LOG2[i&gt;&gt;<span class="number">1</span>]<span class="number">+1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        st[i][<span class="number">0</span>]=a[i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;(<span class="number">1</span>&lt;&lt;i)&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j+(<span class="number">1</span>&lt;&lt;i)<span class="number">-1</span>&lt;=n;j++)</span><br><span class="line">            st[j][i]=<span class="built_in">min</span>(st[j][i<span class="number">-1</span>],st[j+(<span class="number">1</span>&lt;&lt;(i<span class="number">-1</span>))][i<span class="number">-1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">qe</span><span class="params">(<span class="type">int</span> l,<span class="type">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> k=LOG2[r-l<span class="number">+1</span>];</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">min</span>(st[l][k],st[r-(<span class="number">1</span>&lt;&lt;k)<span class="number">+1</span>][k]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="built_in">init</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n-m<span class="number">+1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,<span class="built_in">qe</span>(i,i+m<span class="number">-1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>ä¸Šé¢æ³¨é‡Šçš„åšæ³•æ˜¯ç”¨<code>set</code>ç»´æŠ¤äº†ä¸€ä¸ªé•¿åº¦ä¸º<code>m</code>çš„åºåˆ—ï¼Œåˆ©ç”¨<code>set</code>è‡ªåŠ¨æ’åºçš„æœºåˆ¶å’Œå®šå€¼åˆ é™¤çš„åŠŸèƒ½å®ç°ï¼Œ<code>pair</code>æ˜¯ä¸ºäº†é˜²æ­¢é‡å¤ã€‚</p>
<p>ç„¶ååˆ å¤´å»å°¾ï¼Œæ¯æ¬¡è¾“å‡ºç¬¬ä¸€ä¸ªå°±æ˜¯æœ€å°çš„ã€‚</p>
<p><code>st</code>åšæ³•æ²¡å•¥å¥½è¯´çš„ã€‚</p>
<hr>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P1816" >P1816<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e5</span><span class="number">+7</span>;</span><br><span class="line"><span class="type">int</span> a[N],st[N][<span class="number">23</span>];</span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">        st[i][<span class="number">0</span>]=a[i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;(<span class="number">1</span>&lt;&lt;i)&lt;=m;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j+(<span class="number">1</span>&lt;&lt;i)<span class="number">-1</span>&lt;=m;j++)</span><br><span class="line">            st[j][i]=<span class="built_in">min</span>(st[j][i<span class="number">-1</span>],st[j+(<span class="number">1</span>&lt;&lt;(i<span class="number">-1</span>))][i<span class="number">-1</span>]);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">qe</span><span class="params">(<span class="type">int</span> l,<span class="type">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> k=(<span class="type">int</span>)<span class="built_in">log2</span>(r-l<span class="number">+1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">min</span>(st[l][k],st[r-(<span class="number">1</span>&lt;&lt;k)<span class="number">+1</span>][k]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;m,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="built_in">init</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> l,r;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;l,&amp;r);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,<span class="built_in">qe</span>(l,r));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>æ¿å­é¢˜ï¼Œæ²¡å•¥å¥½è¯´çš„ã€‚</p>
<hr>
<p>å…³äºSTçš„ä¸€äº›ç†è§£ï¼š</p>
<p><code>st[i][j]</code>ä»£è¡¨ä»¥$i$ä¸ºèµ·ç‚¹ï¼Œé•¿åº¦ä¸º$2^j$çš„åŒºé—´ä¸­çš„æœ€å€¼å¤§å°ï¼ˆåŒ…å«$i$è¿™ä¸ªç«¯ç‚¹ï¼‰</p>
<p><code>st[j][i]=min(st[j][i-1],st[j+(1&lt;&lt;(i-1))][i-1]);</code></p>
<p>æ‰€ä»¥é¢„å¤„ç†çš„æ—¶å€™è¿™ä¸ªæ˜¯ç›´æ¥åŠ ä¸ŠåŒºé—´é•¿åº¦ã€‚</p>
<p><code>min(st[l][k],st[r-(1&lt;&lt;k)+1][k]);</code></p>
<p>è€Œè®¿é—®çš„æ—¶å€™è¦å‡å»é•¿åº¦å†åŠ ä¸€ã€‚</p>
<hr>
<h1 id="å‰ç¼€å’Œ"><a href="#å‰ç¼€å’Œ" class="headerlink" title="å‰ç¼€å’Œ"></a>å‰ç¼€å’Œ</h1><blockquote>
<p><code>sum[i]=sum[i-1]+a[i]</code></p>
</blockquote>
<p><code>sum[i]</code>å³å…ƒç´ aåœ¨$[0,i]$çš„åŒºé—´å’Œï¼Œè¿™æ ·å°±å¯ä»¥å¿«é€Ÿè¿›è¡ŒåŒºé—´æ±‚å’Œäº†ã€‚</p>
<p><code>sum[l~r]=sum[r]-sum[l-1]</code></p>
<h2 id="äºŒé˜¶å‰ç¼€å’Œ"><a href="#äºŒé˜¶å‰ç¼€å’Œ" class="headerlink" title="äºŒé˜¶å‰ç¼€å’Œ"></a>äºŒé˜¶å‰ç¼€å’Œ</h2><p>è®¾ï¼š</p>
<ul>
<li>$A$ æ˜¯åŸæ•°ç»„</li>
<li>$B$ æ˜¯ $A$ çš„å‰ç¼€å’Œï¼Œå³ $B_x&#x3D;\sum_{i&#x3D;1}^xA_i$</li>
<li>$C$ æ˜¯ $B$ çš„å‰ç¼€å’Œï¼Œå³ $C_x&#x3D;\sum_{i&#x3D;1}^xB_i$</li>
</ul>
<p>å¯¹äº $A_i\leftarrow A_i+1$ è¿™ä¸€æ“ä½œï¼Œ$B_i\sim B_{x}$ éƒ½ä¼šåŠ ä¸€ï¼Œå³ $C_{x}\leftarrow C_{x}+(x - i + 1)\times1$</p>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P4868" >ç»ƒä¹ <i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lowbit(x) (x &amp; (-x))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">7</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line">LL a[N];</span><br><span class="line">LL B[N], C[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">addB</span><span class="params">(<span class="type">int</span> x, LL v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = x; i &lt;= n; i += <span class="built_in">lowbit</span>(i))</span><br><span class="line">        B[i] += v;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">addC</span><span class="params">(<span class="type">int</span> x, LL v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = x; i &lt;= n; i += <span class="built_in">lowbit</span>(i))</span><br><span class="line">        C[i] += v;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">queryB</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    LL res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = x; i; i -= <span class="built_in">lowbit</span>(i))</span><br><span class="line">        res += B[i];</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">queryC</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    LL res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = x; i; i -= <span class="built_in">lowbit</span>(i))</span><br><span class="line">        res += C[i];</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">addB</span>(x, v);</span><br><span class="line">    <span class="built_in">addC</span>(x, <span class="number">1ll</span> * x * v);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">query</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">queryB</span>(x) * (x + <span class="number">1</span>) - <span class="built_in">queryC</span>(x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>, &amp;a[i]);</span><br><span class="line">        <span class="built_in">update</span>(i, a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (m--)</span><br><span class="line">    &#123;</span><br><span class="line">        string s;</span><br><span class="line">        cin &gt;&gt; s;</span><br><span class="line">        <span class="keyword">if</span> (s == <span class="string">&quot;Query&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> x;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;x);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, <span class="built_in">query</span>(x));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (s == <span class="string">&quot;Modify&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> x, v;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;x, &amp;v);</span><br><span class="line">            <span class="built_in">update</span>(x, v - a[x]);</span><br><span class="line">            a[x] = v;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="ä¸‰é˜¶å‰ç¼€å’Œ"><a href="#ä¸‰é˜¶å‰ç¼€å’Œ" class="headerlink" title="ä¸‰é˜¶å‰ç¼€å’Œ"></a>ä¸‰é˜¶å‰ç¼€å’Œ</h2><p>è®¾ï¼š</p>
<ul>
<li>$A$ æ˜¯åŸæ•°ç»„</li>
<li>$B$ æ˜¯ $A$ çš„å‰ç¼€å’Œï¼Œå³ $B_x&#x3D;\sum_{i&#x3D;1}^xA_i$</li>
<li>$C$ æ˜¯ $B$ çš„å‰ç¼€å’Œï¼Œå³ $C_x&#x3D;\sum_{i&#x3D;1}^xB_i$</li>
<li>$D$ æ˜¯ $C$ çš„å‰ç¼€å’Œï¼Œå³ $D_x&#x3D;\sum_{i&#x3D;1}^xC_i$</li>
</ul>
<p>å¯¹äº $A_i\leftarrow A_i+1$ è¿™ä¸€æ“ä½œï¼Œ$C_{j}$ ä¼šå˜æˆ $C_{j}+(j - i + 1)\times1$</p>
<p>å³ $D_x$ ä¼šå˜æˆ $D_x+1+2+\dots+(x-i+1)$ï¼Œå³ $D_x+\frac{(x-i+1)\times(x-i+2)}{2}$</p>
<p>$$<br>C_x&#x3D;\sum_{i&#x3D;1}^xB_i&#x3D;\sum_{i&#x3D;1}^x(x-i+1)\times{A_i}<br>$$</p>
<p>$$<br>D_x&#x3D;\sum_{i&#x3D;1}^{x} \dfrac{(i^2-3i)A_i-2xiA_i+(x^2+3x+2)A_i}{2}<br>$$</p>
<p>ä¹Ÿå¯ä»¥è¿™æ ·å†™ï¼š</p>
<p>$$<br>D_x&#x3D;\sum_{i &#x3D; 1}^{x}\dfrac{i^2A_i-(2x+3i)A_i+(x^2+3x+2)A_i}{2}<br>$$</p>
<p>ç»´æŠ¤ $i^2A_i,iA_i,Ai$ å³å¯ã€‚</p>
<p><a class="link"   href="https://www.luogu.com.cn/problem/AT_abc256_f" >ç»ƒä¹ <i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lowbit(x) (x &amp; (-x))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">2e5</span> + <span class="number">7</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MOD = <span class="number">998244353</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> inv = <span class="number">499122177</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, q;</span><br><span class="line">LL A[N];</span><br><span class="line">LL B[N], C[N], D[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">addB</span><span class="params">(<span class="type">int</span> x, LL v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = x; i &lt;= n; i += <span class="built_in">lowbit</span>(i))</span><br><span class="line">        B[i] = (B[i] + v) % MOD;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">addC</span><span class="params">(<span class="type">int</span> x, LL v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = x; i &lt;= n; i += <span class="built_in">lowbit</span>(i))</span><br><span class="line">        C[i] = (C[i] + v) % MOD;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">addD</span><span class="params">(<span class="type">int</span> x, LL v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = x; i &lt;= n; i += <span class="built_in">lowbit</span>(i))</span><br><span class="line">        D[i] = (D[i] + v) % MOD;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(LL x, LL v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">addB</span>(x, v);</span><br><span class="line">    <span class="built_in">addC</span>(x, <span class="number">1ll</span> * v * x % MOD);</span><br><span class="line">    <span class="built_in">addD</span>(x, ((<span class="number">1ll</span> * x * x - <span class="number">3ll</span> * x) % MOD + MOD % MOD) * <span class="number">1ll</span> * v % MOD);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">queryB</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    LL res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = x; i; i -= <span class="built_in">lowbit</span>(i))</span><br><span class="line">        res = (res + B[i]) % MOD;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">queryC</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    LL res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = x; i; i -= <span class="built_in">lowbit</span>(i))</span><br><span class="line">        res = (res + C[i]) % MOD;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">queryD</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    LL res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = x; i; i -= <span class="built_in">lowbit</span>(i))</span><br><span class="line">        res = (res + D[i]) % MOD;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">query</span><span class="params">(LL x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ((<span class="built_in">queryD</span>(x) - <span class="number">1ll</span> * x * <span class="number">2</span> % MOD * <span class="built_in">queryC</span>(x) % MOD + </span><br><span class="line">           (<span class="number">1ll</span> * x * x + <span class="number">1ll</span> * <span class="number">3</span> * x + <span class="number">2</span>) % MOD * <span class="built_in">queryB</span>(x) % MOD) % MOD + MOD) % MOD;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;q);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>, &amp;A[i]);</span><br><span class="line">        <span class="built_in">update</span>(i, A[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (q--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> op;</span><br><span class="line">        LL x, y;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;op);</span><br><span class="line">        <span class="keyword">if</span> (op == <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>, &amp;x, &amp;y);</span><br><span class="line">            <span class="built_in">update</span>(x, (y - A[x] + MOD) % MOD);</span><br><span class="line">            A[x] = y;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (op == <span class="number">2</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>, &amp;x);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, (<span class="number">1ll</span> * <span class="built_in">query</span>(x) * inv) % MOD);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>ä¸æ­¤ç±»ä¼¼çš„è¿˜æœ‰ä¸€é¢˜~</p>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P8313" >P8313<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p><a class="link"   href="https://www.cnblogs.com/lnwhl/p/16640878.html" >é¢˜è§£<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lowbit(x) (x &amp; (-x))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">2e5</span> + <span class="number">7</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line">LL ans;</span><br><span class="line"><span class="type">int</span> a[N], S[N];</span><br><span class="line">LL C[N &lt;&lt; <span class="number">1</span>], D[N &lt;&lt; <span class="number">1</span>], E[N &lt;&lt; <span class="number">1</span>];</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; num;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; loc[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> x, LL v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = x; i &lt;= <span class="number">2</span> * n + <span class="number">1</span>; i += <span class="built_in">lowbit</span>(i))</span><br><span class="line">	&#123;</span><br><span class="line">		C[i] += v;</span><br><span class="line">		D[i] += <span class="number">1ll</span> * v * x;</span><br><span class="line">		E[i] += <span class="number">1ll</span> * v * x * x;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">query</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	LL res = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = x; i; i -= <span class="built_in">lowbit</span>(i))</span><br><span class="line">		res += <span class="number">1ll</span> * C[i] * (<span class="number">1ll</span> * x * x + <span class="number">3ll</span> * x + <span class="number">2</span>) - <span class="number">1ll</span> * D[i] * (<span class="number">2</span> * x + <span class="number">3</span>) + E[i];</span><br><span class="line">	res &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">lower_bound</span>(num.<span class="built_in">begin</span>(), num.<span class="built_in">end</span>(), x) - num.<span class="built_in">begin</span>() + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">		num.<span class="built_in">push_back</span>(a[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">sort</span>(num.<span class="built_in">begin</span>(), num.<span class="built_in">end</span>());</span><br><span class="line">	num.<span class="built_in">erase</span>(<span class="built_in">unique</span>(num.<span class="built_in">begin</span>(), num.<span class="built_in">end</span>()), num.<span class="built_in">end</span>());</span><br><span class="line">	<span class="type">int</span> cnt = (<span class="type">int</span>)num.<span class="built_in">size</span>();</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) <span class="comment">// ç¦»æ•£åŒ–</span></span><br><span class="line">		a[i] = <span class="built_in">find</span>(a[i]);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">		loc[a[i]].<span class="built_in">emplace_back</span>(i); <span class="comment">// è®°å½•æ¯ç§èœå“å‡ºç°çš„ä½ç½®</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">// for (int i = 1; i &lt;= cnt; i++)</span></span><br><span class="line">	<span class="comment">// &#123;</span></span><br><span class="line">	<span class="comment">// 	for (int j = 1; j &lt;= n; j++)</span></span><br><span class="line">	<span class="comment">// 		S[j] = S[j - 1] + (a[j] == i);</span></span><br><span class="line">	<span class="comment">// 	add(n + 1, 1); // l = 0 æ—¶ï¼ŒB = 0 å‡ºç°äº† 1 æ¬¡</span></span><br><span class="line">	<span class="comment">// 	for (int j = 1; j &lt;= n; j++)</span></span><br><span class="line">	<span class="comment">// 	&#123;</span></span><br><span class="line">	<span class="comment">// 		ans += query(S[j] * 2 - j + n + 1 - 1);</span></span><br><span class="line">	<span class="comment">// 		add(S[j] * 2 - j + n + 1, 1);</span></span><br><span class="line">	<span class="comment">// 	&#125;</span></span><br><span class="line">	<span class="comment">// 	add(n + 1, -1);</span></span><br><span class="line">	<span class="comment">// 	for (int j = 1; j &lt;= n; j++)</span></span><br><span class="line">	<span class="comment">// 		add(S[j] * 2 - j + n + 1, -1);</span></span><br><span class="line">	<span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= cnt; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		loc[i].<span class="built_in">push_back</span>(n + <span class="number">1</span>); <span class="comment">// å¤„ç†æœ€åä¸€æ®µåŒºé—´</span></span><br><span class="line">		<span class="type">int</span> last = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; (<span class="type">int</span>)loc[i].<span class="built_in">size</span>(); j++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="type">int</span> s = <span class="number">2</span> * j - last + n + <span class="number">1</span>; <span class="comment">// ç­‰å·®åºåˆ—çš„å¼€å¤´</span></span><br><span class="line">			<span class="type">int</span> t = <span class="number">2</span> * j - loc[i][j] + <span class="number">1</span> + n + <span class="number">1</span>; <span class="comment">// ç­‰å·®åºåˆ—çš„æœ«å°¾</span></span><br><span class="line">			ans += <span class="built_in">query</span>(s - <span class="number">1</span>) - (t &gt;= <span class="number">2</span> ? <span class="built_in">query</span>(t - <span class="number">2</span>) : <span class="number">0</span>); <span class="comment">// æŸ¥è¯¢ä¸‰é˜¶å‰ç¼€å’Œ</span></span><br><span class="line">			<span class="built_in">add</span>(t, <span class="number">1</span>);</span><br><span class="line">			<span class="built_in">add</span>(s + <span class="number">1</span>, <span class="number">-1</span>); <span class="comment">// å…¬å·®ä¸ºä¸€çš„ç­‰å·®åºåˆ—ä¸‹æ ‡è¿ç»­ï¼Œ[s,t] åŒºé—´åŠ </span></span><br><span class="line">			last = loc[i][j];</span><br><span class="line">		&#125;</span><br><span class="line">		last = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; (<span class="type">int</span>)loc[i].<span class="built_in">size</span>(); j++) <span class="comment">// é‡ç½®æ ‘çŠ¶æ•°ç»„</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="type">int</span> s = <span class="number">2</span> * j - last + n + <span class="number">1</span>;</span><br><span class="line">			<span class="type">int</span> t = <span class="number">2</span> * j - loc[i][j] + <span class="number">1</span> + n + <span class="number">1</span>;</span><br><span class="line">			<span class="built_in">add</span>(t, <span class="number">-1</span>);</span><br><span class="line">			<span class="built_in">add</span>(s + <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">			last = loc[i][j];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, ans);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="å·®åˆ†"><a href="#å·®åˆ†" class="headerlink" title="å·®åˆ†"></a>å·®åˆ†</h1><blockquote>
<p>å·®åˆ†æ˜¯å‰ç¼€å’Œçš„é€†è¿ç®—ï¼Œå®ƒå°†åŒºé—´ä¿®æ”¹è½¬åŒ–ä¸ºç«¯ç‚¹ä¿®æ”¹ã€‚</p>
</blockquote>
<h2 id="ä¸€ç»´å·®åˆ†"><a href="#ä¸€ç»´å·®åˆ†" class="headerlink" title="ä¸€ç»´å·®åˆ†"></a>ä¸€ç»´å·®åˆ†</h2><p>å®šä¹‰å·®åˆ†æ•°ç»„<code>D[]</code>ï¼Œ<code>D[i]=a[i]-a[i-1]</code>ã€‚</p>
<p><strong>æŸ¥è¯¢ï¼š</strong></p>
<p>$$<br>a[k]&#x3D;\sum^{k}_{i&#x3D;1}D[i]<br>$$</p>
<p>ä¹Ÿå°±æ˜¯å¯¹å·®åˆ†æ•°ç»„æ±‚å‰ç¼€å’Œã€‚</p>
<p><strong>åŒºé—´ä¿®æ”¹ï¼š</strong></p>
<p>å°†åŒºé—´$[l,r]$çš„æ¯ä¸ªå…ƒç´ éƒ½åŠ $d$ï¼Œ</p>
<p>åªéœ€è¦ï¼š</p>
<p><code>D[l]+=d,D[r+1]-=d</code></p>
<p>è¿™æ ·å°±å¯ä»¥ä¿è¯ï¼š</p>
<ol>
<li>$1\le{x}&lt;l$ï¼Œ$a[x]$ä¸å˜ã€‚</li>
<li>$l\le{x}\le{r}$ï¼Œ$a[x]$å¢åŠ $d$ã€‚</li>
<li>$r&lt;x\le{n}$ï¼Œ$a[x]$ä¸å˜ã€‚</li>
</ol>
<p>$n$ä¸ªæ•°$m$æ¬¡åŒºé—´ä¿®æ”¹+ä¸€æ¬¡æŸ¥è¯¢å¤æ‚åº¦ï¼š$O(mn)\to{O(m+n)}$</p>
<p><em>å·®åˆ†å¯¹äºå•ç‚¹æŸ¥è¯¢ä¸æ˜¯å¾ˆé«˜æ•ˆï¼Œè¿™æ—¶å€™å°±éœ€è¦çº¿æ®µæ ‘æˆ–è€…æ ‘çŠ¶æ•°ç»„äº†ã€‚</em></p>
<hr>
<h3 id="ä¹ é¢˜ï¼š"><a href="#ä¹ é¢˜ï¼š" class="headerlink" title="ä¹ é¢˜ï¼š"></a>ä¹ é¢˜ï¼š</h3><p><a class="link"   href="https://acm.hdu.edu.cn/showproblem.php?pid=1556" >HDU1556<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e5</span><span class="number">+7</span>;</span><br><span class="line"><span class="type">int</span> D[N];</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(D,<span class="number">0</span>,<span class="built_in">sizeof</span>(D));</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> l,r;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;l,&amp;r);</span><br><span class="line">            D[l]++,D[r<span class="number">+1</span>]--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            D[i]=D[i<span class="number">-1</span>]+D[i];</span><br><span class="line">            <span class="keyword">if</span>(i!=n) <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,D[i]);</span><br><span class="line">            <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,D[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="äºŒç»´å·®åˆ†"><a href="#äºŒç»´å·®åˆ†" class="headerlink" title="äºŒç»´å·®åˆ†"></a>äºŒç»´å·®åˆ†</h2><blockquote>
<p>ç‚¹æ‰©å±•ä¸ºé¢</p>
</blockquote>
<p>å·®åˆ†æ•°ç»„çš„å‰ç¼€å’Œï¼š</p>
<p>$a[i][j]$ä»£è¡¨ç‚¹$(1,1)$åˆ°ç‚¹$(i,j)$çš„çŸ©å½¢çš„é¢ç§¯ï¼ˆæ‰€æœ‰å…ƒç´ ä¹‹å’Œï¼‰ï¼›</p>
<p>å·®åˆ†ï¼š</p>
<p><code>D[i][j]=a[i][j]-a[i-1][j]-a[i][j-1]+a[i-1][j-1]</code></p>
<p>aå°±æ˜¯å¤§çŸ©å½¢ï¼ŒDå°±æ˜¯å¤§çŸ©å½¢ä¸­çš„å°çŸ©å½¢ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307121530704.webp"
                     
                ></p>
<p><strong>åŒºé—´ä¿®æ”¹</strong></p>
<p>å°†ç‚¹$(x_1,y_1),(x_2,y_2)$å›´æˆçš„ä¸€æ®µåŒºé—´ä¸­æ¯ä¸ªå…ƒç´ éƒ½åŠ ä¸Š$d$ï¼Œéœ€è¦ï¼š</p>
<ul>
<li><code>D[x1][y1]+=d</code></li>
<li><code>D[x1][y2+1]-=d</code></li>
<li><code>D[x2+1][y1]-=d</code></li>
<li><code>D[x2+1][y2+1]+=d//è¢«å‡äº†ä¸¤æ¬¡çš„åœ°æ–¹éœ€è¦åŠ å›æ¥ä¸€æ¬¡</code></li>
</ul>
<p>å¤„ç†çš„æ—¶å€™å¯ä»¥ç›´æ¥æŠŠ$D$æ•°ç»„å½“æˆ$a$æ¥æ›´æ–°ï¼Œä»¥æ­¤èŠ‚çœç©ºé—´ï¼Œå› ä¸ºæ˜¯ä»å‰å¾€åæ›´æ–°ï¼Œåé¢çš„å€¼éœ€è¦å‰é¢çš„å€¼ï¼Œå‰é¢çš„å€¼ä¸éœ€è¦åé¢çš„å€¼ï¼Œæ‰€ä»¥äº’ä¸å½±å“ã€‚</p>
<h3 id="ä¹ é¢˜ï¼š-1"><a href="#ä¹ é¢˜ï¼š-1" class="headerlink" title="ä¹ é¢˜ï¼š"></a>ä¹ é¢˜ï¼š</h3><p><a class="link"   href="https://www.luogu.com.cn/problem/P3397" >P3397<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="type">int</span> D[<span class="number">5005</span>][<span class="number">5005</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">while</span>(m--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> x1,y1,x2,y2;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d%d&quot;</span>,&amp;x1,&amp;y1,&amp;x2,&amp;y2);</span><br><span class="line">        D[x1][y1]+=<span class="number">1</span>;</span><br><span class="line">        D[x1][y2<span class="number">+1</span>]-=<span class="number">1</span>;</span><br><span class="line">        D[x2<span class="number">+1</span>][y1]-=<span class="number">1</span>;</span><br><span class="line">        D[x2<span class="number">+1</span>][y2<span class="number">+1</span>]+=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            D[i][j]+=D[i<span class="number">-1</span>][j]+D[i][j<span class="number">-1</span>]-D[i<span class="number">-1</span>][j<span class="number">-1</span>];</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,D[i][j]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>å…¶ä¸­ï¼Œè®¡ç®—å‰ç¼€å’Œå¯ä»¥è¿™æ ·æ›¿æ¢ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;n;j++)</span><br><span class="line">        D[i][j<span class="number">+1</span>]+=D[i][j];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">        D[i<span class="number">+1</span>][j]+=D[i][j];</span><br></pre></td></tr></table></figure></div>

<p>å³æ¨ªå‘çºµå‘åˆ†åˆ«å¤„ç†å‰ç¼€å’Œã€‚</p>
<p>ä¹Ÿå¯ä»¥è¿™æ ·å†™ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">        D[i][j]+=D[i][j<span class="number">-1</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">        D[i][j]+=D[i<span class="number">-1</span>][j];</span><br></pre></td></tr></table></figure></div>

<p>äºŒç»´å‰ç¼€å’Œçš„åº”ç”¨ï¼š</p>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P2280" >P2280<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">5001</span>;<span class="comment">//åæ ‡èŒƒå›´ï¼š1~5001</span></span><br><span class="line"><span class="type">int</span> n,m,ans=<span class="number">-1</span>;</span><br><span class="line"><span class="type">int</span> sum[<span class="number">5007</span>][<span class="number">5007</span>];<span class="comment">//é˜²è¶Šç•Œ</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> x,y,v;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;x,&amp;y,&amp;v);</span><br><span class="line">        sum[++x][++y]+=v;<span class="comment">//å°†åæ ‡èŒƒå›´ç”±0~5000æ”¹ä¸º1~5001</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=N;i++)<span class="comment">//äºŒä½å‰ç¼€å’Œï¼Œåæ ‡èŒƒå›´å†…éƒ½éœ€è¦å¤„ç†</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;N;j++)</span><br><span class="line">            sum[i][j<span class="number">+1</span>]+=sum[i][j];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=N;j++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;N;i++)</span><br><span class="line">            sum[i<span class="number">+1</span>][j]+=sum[i][j];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=m;i&lt;=N;i++)<span class="comment">//å¯¹äºåæ ‡èŒƒå›´å†…åœ°æ¯¯å¼æœç´¢</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=m;j&lt;=N;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> p=sum[i][j]-sum[i-m][j]-sum[i][j-m]+sum[i-m][j-m];</span><br><span class="line">            ans=<span class="built_in">max</span>(ans,p);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h2 id="äºŒé˜¶å·®åˆ†"><a href="#äºŒé˜¶å·®åˆ†" class="headerlink" title="äºŒé˜¶å·®åˆ†"></a>äºŒé˜¶å·®åˆ†</h2><p><a class="link"   href="https://white.fallingsakura.top/3298283925/" >è¿™æ˜¯ä¸€ä¸ªé“¾æ¥<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h1 id="ç¦»æ•£åŒ–"><a href="#ç¦»æ•£åŒ–" class="headerlink" title="ç¦»æ•£åŒ–"></a>ç¦»æ•£åŒ–</h1><p>å¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¹¶ä¸å…³å¿ƒå…ƒç´ çš„ç»å¯¹å¤§å°ï¼Œæˆ‘ä»¬å…³å¿ƒå®ƒä»¬çš„ç›¸å¯¹å¤§å°ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¯¹å®ƒä»¬è¿›è¡Œç¦»æ•£åŒ–å¤„ç†ã€‚</p>
<p>ç¦»æ•£åŒ–çš„å…·ä½“æ­¥éª¤ï¼š</p>
<ol>
<li>æ’åº</li>
<li>ç¼–å·</li>
<li>å½’ä½</li>
</ol>
<p><strong>ä»£ç ï¼š</strong></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">500</span>;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">data</span>&#123;</span><br><span class="line">    <span class="type">int</span> val,id;</span><br><span class="line">&#125;olda[N];</span><br><span class="line"><span class="type">int</span> newa[N];</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">cmp</span><span class="params">(data x,data y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x.val&lt;y.val;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;olda[i].val);</span><br><span class="line">        olda[i].id=i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(olda<span class="number">+1</span>,olda<span class="number">+1</span>+n,cmp);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        newa[olda[i].id]=i;</span><br><span class="line">        <span class="keyword">if</span>(olda[i].val==olda[i<span class="number">-1</span>].val)</span><br><span class="line">            newa[olda[i].id]=newa[olda[i<span class="number">-1</span>].id];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,newa[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>ä¹Ÿå¯ä»¥ä¸é¢„å¤„ç†å‡ºæ¥ï¼Œé€šè¿‡åº“å‡½æ•°æ’åºã€åˆ¤é‡ï¼Œç”¨çš„æ—¶å€™äºŒåˆ†æŸ¥æ‰¾å³å¯ã€‚</p>
<p>è¿™æ˜¯<strong>ä¿åº</strong>çš„å†™æ³•ï¼Œä¹Ÿå°±æ˜¯æ˜ å°„åå…ƒç´ ä¹‹é—´å¤§å°å…³ç³»ä¸å˜ã€‚</p>
<p>è‹¥æ˜¯ä¸éœ€è¦ä¿åºï¼Œé‚£ä¹ˆ <code>map</code> æˆ–è€…<em>å“ˆå¸Œè¡¨</em>å°±éƒ½å¯ä»¥åšï¼Œå¥½å†™å¾ˆå¤šã€‚</p>
<h1 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h1><p><em>å¸¸è§æ’åºç®—æ³•ï¼š</em></p>
<ul>
<li>é€‰æ‹©</li>
<li>æ’å…¥</li>
<li>å†’æ³¡</li>
<li>å½’å¹¶</li>
<li>å¿«æ’</li>
<li>å †æ’</li>
<li>è®¡æ•°</li>
<li>åŸºæ•°</li>
<li>æ¡¶æ’</li>
<li><del>sort()</del></li>
</ul>
<h2 id="æ¡¶æ’"><a href="#æ¡¶æ’" class="headerlink" title="æ¡¶æ’"></a>æ¡¶æ’</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span>* <span class="title">arr_sort</span><span class="params">(<span class="type">int</span> *arr,<span class="type">int</span> n)</span> <span class="comment">// æ•°ç»„åœ°å€ï¼Œé•¿åº¦</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> maxValue = arr[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(arr[i] &gt; maxValue)</span><br><span class="line">        &#123;</span><br><span class="line">            maxValue = arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">const</span> <span class="type">int</span> bucketCnt = <span class="number">10</span>;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; buckets[bucketCnt];</span><br><span class="line">    <span class="type">int</span> bucketSize = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(maxValue)</span><br><span class="line">    &#123;</span><br><span class="line">        maxValue /= <span class="number">10</span>;</span><br><span class="line">        bucketSize *= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    bucketSize /= <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> idx = arr[i] / bucketSize;</span><br><span class="line">        buckets[idx].<span class="built_in">push_back</span>(arr[i]);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="built_in">int</span>(buckets[idx].<span class="built_in">size</span>())<span class="number">-1</span>; j &gt; <span class="number">0</span>; --j)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(buckets[idx][j] &lt; buckets[idx][j<span class="number">-1</span>])</span><br><span class="line">                <span class="built_in">swap</span>(buckets[idx][j], buckets[idx][j<span class="number">-1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>, k = <span class="number">0</span>; i &lt; bucketCnt; ++i)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="built_in">int</span>(buckets[i].<span class="built_in">size</span>()); ++j)</span><br><span class="line">            arr[k++] = buckets[i][j];</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span>* <span class="title">ArrSort</span><span class="params">(<span class="type">int</span> *arr, <span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> maxv;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">        maxv = <span class="built_in">max</span>(maxv,arr[i]);</span><br><span class="line">    <span class="type">const</span> <span class="type">int</span> bcnt = <span class="number">10</span>;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; buc[bcnt];</span><br><span class="line">    <span class="type">int</span> bsize = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(maxv)</span><br><span class="line">    &#123;</span><br><span class="line">        maxv /= <span class="number">10</span>;</span><br><span class="line">        bsize *= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    bsize /= <span class="number">10</span>; <span class="comment">// æŒ‰ç…§æœ€å¤§å€¼çš„å€¼åŸŸåˆ†ä¸ºåä»½</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> idx = arr[i] / bsize; <span class="comment">// å…ˆæŠŠå…ƒç´ ä¸¢åˆ°æ¡¶é‡Œ</span></span><br><span class="line">        buc[idx].<span class="built_in">emplace_back</span>(arr[i]);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="built_in">int</span>(buc[idx].<span class="built_in">size</span>())<span class="number">-1</span>; j &gt; <span class="number">0</span>; --j) <span class="comment">// ä»æ–°åŠ å…¥çš„ä½ç½®å¼€å§‹éå†</span></span><br><span class="line">            <span class="keyword">if</span>(buc[idx][j] &lt; buc[idx][j<span class="number">-1</span>]) <span class="built_in">swap</span>(buc[idx][j], buc[idx][j<span class="number">-1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>, k = <span class="number">1</span>; i &lt; bcnt; ++i)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="built_in">int</span>(buc[i].<span class="built_in">size</span>()); ++j)</span><br><span class="line">            arr[k++] = buc[i][j];</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="type">int</span>* a;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    a = (<span class="type">int</span>*)<span class="built_in">malloc</span>(<span class="built_in">sizeof</span>(<span class="type">int</span>)*n<span class="number">+4</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    a = <span class="built_in">ArrSort</span>(a,n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, a[i]);</span><br><span class="line">    <span class="built_in">free</span>(a);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 5</span></span><br><span class="line"><span class="comment">// 10 2093 293 281 3940</span></span><br></pre></td></tr></table></figure></div>

<p>å…ˆåˆ†æ¡¶ï¼Œè¿™é‡ŒæŒ‰ç…§åä¸ªæ¥åˆ†ã€‚</p>
<p>ç„¶åæŠŠå…ƒç´ ä¸¢åˆ°å®ƒå¯¹åº”çš„æ¡¶å†…ï¼Œç„¶åå¯¹æ¡¶å†…è¿›è¡Œæ’åºï¼Œè¿™é‡Œä½¿ç”¨æ’å…¥æ’åºã€‚</p>
<p>ç„¶åæŒ‰é¡ºåºåˆå¹¶å³å¯ã€‚</p>
<h1 id="æ’åˆ—"><a href="#æ’åˆ—" class="headerlink" title="æ’åˆ—"></a>æ’åˆ—</h1><h2 id="STL"><a href="#STL" class="headerlink" title="STL"></a>STL</h2><p><code>next_permutation()</code>å‡½æ•°ï¼Œè¯¥å‡½æ•°å†…å‰ä¸¤ä¸ªå‚æ•°ä¸ºå·¦å¼€å³é—­çš„ä¸€ä¸ªæ’åˆ—åŒºé—´çš„æŒ‡é’ˆï¼ˆå¦‚<code>s.begin(),s.end()</code>ï¼‰ï¼Œè¿”å›å€¼ä¸º<code>bool</code>ç±»å‹ï¼Œè¡¨ç¤ºæœ‰æ— ä¸‹ä¸€ä¸ªæ’åˆ—ï¼Œæ’åˆ—åçš„ç»“æœä¼šè¿”å›åŸåºåˆ—ä¸­å¹¶è¦†ç›–ã€‚</p>
<h1 id="åˆ†å—"><a href="#åˆ†å—" class="headerlink" title="åˆ†å—"></a>åˆ†å—</h1><blockquote>
<p>åˆ†å—æ˜¯ä¸€ç§é«˜æ•ˆçš„æ€æƒ³ï¼Œå¸¸ç”¨æ¥å¤„ç†åŒºé—´é—®é¢˜ã€‚</p>
</blockquote>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> sq = <span class="built_in">sqrt</span>(n);</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= sq; ++i)</span><br><span class="line">&#123;</span><br><span class="line">    st[i] = n / sq * (i - <span class="number">1</span>) + <span class="number">1</span>; <span class="comment">// st[i]è¡¨ç¤ºiå·å—çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡</span></span><br><span class="line">    ed[i] = n / sq * i; <span class="comment">// ed[i]è¡¨ç¤ºiå·å—çš„æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>sqrt ä»£è¡¨åˆ†çš„å—çš„ä¸ªæ•°ï¼Œæ¯ä¸ªå—çš„é•¿åº¦ä¸ä¸€å®šä¸º sqrtï¼Œä¾‹å¦‚$n&#x3D;12$ã€‚</p>
<p>ä½†æ˜¯åºåˆ—é•¿åº¦ä¸ä¸€å®šæ˜¯å®Œå…¨å¹³æ–¹æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠæœ€åä¸€å°å—å½’å…¥åˆ°åŸæ¥çš„æœ€åä¸€å—ä¸­å—ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">ed[sq]=n;</span><br></pre></td></tr></table></figure></div>

<p>ç„¶åå°±æ˜¯ä¸ºæ¯ä¸ªå…ƒç´ ç¡®å®šå®ƒæ‰€å±äºçš„å—ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= sq; ++i)</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = st[i]; j &lt;= ed[i]; ++j)</span><br><span class="line">        bel[j] = i; <span class="comment">// è¡¨ç¤ºjå·å…ƒç´ å½’å±äºiå—</span></span><br></pre></td></tr></table></figure></div>

<p>å¤„ç†æ¯ä¸ªå—çš„å¤§å°ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= sq; ++i)</span><br><span class="line">    size[i] = ed[i] - st[i] + <span class="number">1</span>;</span><br></pre></td></tr></table></figure></div>

<h2 id="ä¾‹é¢˜"><a href="#ä¾‹é¢˜" class="headerlink" title="ä¾‹é¢˜"></a>ä¾‹é¢˜</h2><blockquote>
<p>çº¿æ®µæ ‘èƒ½åšçš„ï¼Œä¸ºä»€ä¹ˆæˆ‘åˆ†å—ä¸è¡Œï¼Ÿ</p>
</blockquote>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P3372" >P3372 ã€æ¨¡æ¿ã€‘çº¿æ®µæ ‘ 1<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e5</span><span class="number">+8</span>;</span><br><span class="line"><span class="type">int</span> a[N];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">block</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> st,ed,sum,add;</span><br><span class="line">&#125;e[N&gt;&gt;<span class="number">1</span>];</span><br><span class="line"><span class="type">int</span> n,m,bel[N];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> sq=<span class="built_in">sqrt</span>(n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=sq;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        e[i].st=n/sq*(i<span class="number">-1</span>)<span class="number">+1</span>;</span><br><span class="line">        e[i].ed=n/sq*i;</span><br><span class="line">    &#125;</span><br><span class="line">    e[sq].ed=n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=sq;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=e[i].st;j&lt;=e[i].ed;j++)</span><br><span class="line">            bel[j]=i,e[i].sum+=a[j];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">modify</span><span class="params">(<span class="type">int</span> l,<span class="type">int</span> r,<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(bel[l]==bel[r])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=l;i&lt;=r;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            a[i]+=x;</span><br><span class="line">            e[bel[l]].sum+=x;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=l;i&lt;=e[bel[l]].ed;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        a[i]+=x;</span><br><span class="line">        e[bel[l]].sum+=x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=e[bel[r]].st;i&lt;=r;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        a[i]+=x;</span><br><span class="line">        e[bel[r]].sum+=x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=bel[l]<span class="number">+1</span>;i&lt;bel[r];i++)</span><br><span class="line">        e[i].add+=x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">query</span><span class="params">(<span class="type">int</span> l,<span class="type">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> s=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(bel[l]==bel[r])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=l;i&lt;=r;i++)</span><br><span class="line">            s+=a[i]+e[bel[l]].add;</span><br><span class="line">        <span class="keyword">return</span> s;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=l;i&lt;=e[bel[l]].ed;i++)</span><br><span class="line">        s+=a[i]+e[bel[i]].add;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=e[bel[r]].st;i&lt;=r;i++)</span><br><span class="line">        s+=a[i]+e[bel[r]].add;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=bel[l]<span class="number">+1</span>;i&lt;bel[r];i++)</span><br><span class="line">        s+=e[i].sum+e[i].add*(e[i].ed-e[i].st<span class="number">+1</span>);</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="built_in">init</span>();</span><br><span class="line">    <span class="keyword">while</span>(m--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> op,x,y,k;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld%lld&quot;</span>,&amp;op,&amp;x,&amp;y);</span><br><span class="line">        <span class="keyword">if</span>(op==<span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>,&amp;k);</span><br><span class="line">            <span class="built_in">modify</span>(x,y,k);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,<span class="built_in">query</span>(x,y));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>å—¯ï¼Œæ¯”çº¿æ®µæ ‘å¥½çœ‹ä¸å°‘ï¼Œä»£ç ä¹Ÿç®€æ´ï¼Œæ€ç»´éš¾åº¦ä¹Ÿä¸é«˜ã€‚</p>
<p>ä¸è¿‡å®ƒä»¬éƒ½æœ‰åŒºé—´æ ‡è®°è¿™ä¸ªå°æŠ€å·§ã€‚</p>
<h2 id="åˆ†å—æ–¹å¼"><a href="#åˆ†å—æ–¹å¼" class="headerlink" title="åˆ†å—æ–¹å¼"></a>åˆ†å—æ–¹å¼</h2><p><strong>ç¬¬ä¸€ç§ï¼š</strong></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> sq = <span class="built_in">sqrt</span>(n);</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= sq; ++i)</span><br><span class="line">&#123;</span><br><span class="line">    st[i] = n / sq * (i - <span class="number">1</span>) + <span class="number">1</span>; <span class="comment">// st[i]è¡¨ç¤ºiå·å—çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡</span></span><br><span class="line">    ed[i] = n / sq * i; <span class="comment">// ed[i]è¡¨ç¤ºiå·å—çš„æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>è¿™é‡Œçš„ sq ä¸ºå—çš„æ•°é‡ï¼Œæ ¹æ®å—çš„æ•°é‡æ¥å‡æ‘Šå—çš„é•¿åº¦ï¼Œç‰¹åˆ«åœ°ï¼Œæœ€åä¸€ä¸ªä¸å®Œæ•´çš„å—å°†è¢«å½’å¹¶åˆ°åŸæ¥çš„æœ€åçš„å—ä¸­ã€‚</p>
<p>å°ä¼˜åŒ–ï¼šç”±äºæ˜¯ $\sqrt{n}$ ä¸ªå—ï¼Œå› æ­¤å¯ä»¥å¼€ $\frac{n}{2}$ ç©ºé—´å°±è¶³å¤Ÿã€‚</p>
<p><strong>ç¬¬äºŒç§ï¼š</strong></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    cin &gt;&gt; a[i];</span><br><span class="line">    id[i] = (i - <span class="number">1</span>) / len + <span class="number">1</span>;</span><br><span class="line">    s[id[i]] += a[i];</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></div>

<p>è¿™ä¸ªçš„ len ä¸ºå—çš„é•¿åº¦ï¼Œæ ¹æ®é•¿åº¦æ¥å†³å®šå—çš„ä¸ªæ•°ã€‚</p>
<hr>
]]></content>
      <categories>
        <category>ACM</category>
      </categories>
  </entry>
  <entry>
    <title>å¯¹æ‹</title>
    <url>/835730ca.html</url>
    <content><![CDATA[<h1 id="å¯¹æ‹"><a href="#å¯¹æ‹" class="headerlink" title="å¯¹æ‹"></a>å¯¹æ‹</h1><p>å‚è€ƒï¼š<a class="link"   href="https://www.cnblogs.com/EdisonBa/p/13509379.html" >å‚è€ƒæ–‡ç« 1<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> <a class="link"   href="https://www.cnblogs.com/EdisonBa/p/17589796.html" >å‚è€ƒæ–‡ç« 2<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h2 id="æ•°æ®"><a href="#æ•°æ®" class="headerlink" title="æ•°æ®"></a>æ•°æ®</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;sys/timeb.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function">ll <span class="title">Rand</span><span class="params">(ll mod)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll ans = INT_MAX;</span><br><span class="line">    <span class="keyword">return</span> ans * <span class="built_in">rand</span>() % mod + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">_timeb</span> T;</span><br><span class="line">    _ftime(&amp;T);</span><br><span class="line">    <span class="built_in">srand</span>(T.millitm); <span class="comment">// T.millitm ä¸ºæ¯«ç§’çº§éšæœºæ•°çš„ç§å­</span></span><br><span class="line">    <span class="function">mt19937 <span class="title">rd</span><span class="params">(T.millitm)</span></span>; </span><br><span class="line">    ofstream file;</span><br><span class="line">    file.<span class="built_in">open</span>(<span class="string">&quot;a.in&quot;</span>);</span><br><span class="line">    <span class="type">int</span> a = <span class="built_in">rd</span>(), b = <span class="built_in">rd</span>();</span><br><span class="line">    file &lt;&lt; a &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; b;</span><br><span class="line">    file.<span class="built_in">close</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>æˆ–è€…ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;sys/timeb.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function">ll <span class="title">Rand</span><span class="params">(ll mod)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll ans = INT_MAX;</span><br><span class="line">    <span class="keyword">return</span> ans * <span class="built_in">rand</span>() % mod + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">_timeb</span> T;</span><br><span class="line">    _ftime(&amp;T);</span><br><span class="line">    <span class="built_in">srand</span>(T.millitm);</span><br><span class="line">    <span class="function">mt19937 <span class="title">rd</span><span class="params">(T.millitm)</span></span>;</span><br><span class="line">    <span class="built_in">freopen</span>(<span class="string">&quot;a.in&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line">    <span class="type">int</span> a = <span class="built_in">rd</span>(), b = <span class="built_in">rd</span>();</span><br><span class="line">    cout &lt;&lt; a &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; b;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="æš´åŠ›"><a href="#æš´åŠ›" class="headerlink" title="æš´åŠ›"></a>æš´åŠ›</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">freopen</span>(<span class="string">&quot;a.in&quot;</span>, <span class="string">&quot;r&quot;</span>, stdin);</span><br><span class="line">    <span class="built_in">freopen</span>(<span class="string">&quot;a.out&quot;</span>, <span class="string">&quot;w&quot;</span>, stdout);</span><br><span class="line">    <span class="type">int</span> a, b;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;a, &amp;b);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, a + b);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="å¾…æµ‹"><a href="#å¾…æµ‹" class="headerlink" title="å¾…æµ‹"></a>å¾…æµ‹</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">freopen</span>(<span class="string">&quot;a.in&quot;</span>, <span class="string">&quot;r&quot;</span>, stdin);</span><br><span class="line">    <span class="built_in">freopen</span>(<span class="string">&quot;a.ans&quot;</span>, <span class="string">&quot;w&quot;</span>, stdout);</span><br><span class="line">    <span class="type">int</span> a, b;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;a, &amp;b);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, a + b);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="å¯¹æ‹-1"><a href="#å¯¹æ‹-1" class="headerlink" title="å¯¹æ‹"></a>å¯¹æ‹</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> ok = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> n = <span class="number">20</span>;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;cd E:/CodeProgram/CPP/Makers/Test/&amp;g++ std.cpp -o std.exe&amp;g++ baoli.cpp -o baoli.exe&amp;g++ make.cpp -o make.exe&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">system</span>(<span class="string">&quot;cd E:/CodeProgram/CPP/Makers/Test/&amp;make.exe&amp;baoli.exe&quot;</span>);</span><br><span class="line">        <span class="type">double</span> begin = <span class="built_in">clock</span>();</span><br><span class="line">        <span class="built_in">system</span>(<span class="string">&quot;cd E:/CodeProgram/CPP/Makers/Test/&amp;std.exe&quot;</span>);</span><br><span class="line">        <span class="type">double</span> end = <span class="built_in">clock</span>();</span><br><span class="line">        <span class="type">double</span> t = end - begin;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">system</span>(<span class="string">&quot;cd E:/CodeProgram/CPP/Makers/Test/&amp;fc a.out a.ans&quot;</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;æµ‹è¯•ç‚¹ #%d Wrong Answer\n&quot;</span>,i);</span><br><span class="line">            fstream file;</span><br><span class="line">            <span class="type">int</span> a, b ;</span><br><span class="line">            file.<span class="built_in">open</span>(<span class="string">&quot;E:/CodeProgram/CPP/Makers/Test/a.in&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span>(file.<span class="built_in">good</span>() &amp;&amp; file.<span class="built_in">is_open</span>())</span><br><span class="line">                file &gt;&gt; a &gt;&gt; b;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;è¾“å…¥ï¼š%d %d\n\n&quot;</span>, a, b);</span><br><span class="line">            file.<span class="built_in">close</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(t &gt; <span class="number">1000</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;æµ‹è¯•ç‚¹ #%d Time Limited Exeeded ç”¨æ—¶ %.1fms\n\n&quot;</span>, i, t);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;æµ‹è¯•ç‚¹ #%d Accepted ç”¨æ—¶ %1.lfms\n\n&quot;</span>, i, t);</span><br><span class="line">            ok++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;-------------------------------\n\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="type">double</span> res = <span class="number">100.0</span> * ok / n;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;å…± %d ç»„æµ‹è¯•æ•°æ®ï¼ŒAC æ•°æ® %d ç»„ï¼Œå¾—åˆ†ï¼š%.1lfã€‚\n&quot;</span>, n, ok, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>ACM</category>
      </categories>
  </entry>
  <entry>
    <title>å­—ç¬¦ä¸²</title>
    <url>/3023808606.html</url>
    <content><![CDATA[<h1 id="String"><a href="#String" class="headerlink" title="String"></a>String</h1><h2 id="å£°æ˜"><a href="#å£°æ˜" class="headerlink" title="å£°æ˜"></a>å£°æ˜</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">string str1;   <span class="comment">//é»˜è®¤æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="function">string <span class="title">str2</span><span class="params">(<span class="string">&quot;abc&quot;</span>)</span></span>;  <span class="comment">//ä¼ å…¥stringæˆ–è€…c_str</span></span><br><span class="line"><span class="function">string <span class="title">str3</span><span class="params">(<span class="number">4</span>, <span class="string">&#x27;a&#x27;</span>)</span></span>;  <span class="comment">//4ä¸ªå­—ç¬¦aæ„å»ºæˆstring</span></span><br><span class="line"><span class="function">string <span class="title">str4</span><span class="params">(str2, <span class="number">1</span>)</span></span>;  <span class="comment">//ä»str2çš„ä½ç½®1å¼€å§‹æ„é€ </span></span><br><span class="line"><span class="function">string <span class="title">str5</span><span class="params">(str<span class="number">2.</span>begin(), str<span class="number">2.</span>end())</span></span>;  <span class="comment">//ä»str2çš„è¿­ä»£å™¨å¼€å§‹æ„é€ </span></span><br><span class="line">cout &lt;&lt; str2 &lt;&lt; endl &lt;&lt; str3 &lt;&lt; endl&lt;&lt; str4 &lt;&lt; endl&lt;&lt;str5&lt;&lt;endl;</span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">abc</span><br><span class="line">aaaa</span><br><span class="line">bc</span><br><span class="line">abc</span><br></pre></td></tr></table></figure></div>

<h2 id="æ‹¼æ¥"><a href="#æ‹¼æ¥" class="headerlink" title="æ‹¼æ¥"></a>æ‹¼æ¥</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">+=</span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">string <span class="title">str1</span><span class="params">(<span class="string">&quot;str1&quot;</span>)</span></span>;</span><br><span class="line">str<span class="number">1.</span><span class="built_in">append</span>(<span class="string">&quot;123&quot;</span>);  <span class="comment">//ç›´æ¥æ·»åŠ å­—ç¬¦ä¸²è‡³å°¾éƒ¨</span></span><br><span class="line">cout &lt;&lt; str1 &lt;&lt; endl;</span><br><span class="line">str<span class="number">1.</span><span class="built_in">append</span>(<span class="string">&quot;1230&quot;</span>, <span class="number">2</span>); <span class="comment">//ä»å‚æ•°å­—ç¬¦ä¸²èµ·å§‹ä½ç½®å¼€å§‹æ·»åŠ 2ä¸ªå­—ç¬¦åˆ°str1</span></span><br><span class="line">cout &lt;&lt; str1 &lt;&lt; endl;</span><br><span class="line"><span class="function">string <span class="title">str2</span><span class="params">(<span class="string">&quot;str2&quot;</span>)</span></span>;</span><br><span class="line">str<span class="number">1.</span><span class="built_in">append</span>(str2, <span class="number">0</span>, <span class="number">1</span>);  <span class="comment">//æŠŠstr2çš„åŒºé—´[0,1)çš„å­—ç¬¦æ·»åŠ è‡³str1</span></span><br><span class="line">cout &lt;&lt; str2 &lt;&lt; endl &lt;&lt; str1 &lt;&lt; endl;</span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">str1123</span><br><span class="line">str112312</span><br><span class="line">str2</span><br><span class="line">str112312s</span><br></pre></td></tr></table></figure></div>

<h2 id="Push-Back"><a href="#Push-Back" class="headerlink" title="Push_Back"></a>Push_Back</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">a.<span class="built_in">puah_back</span>(<span class="string">&#x27;a&#x27;</span>);</span><br></pre></td></tr></table></figure></div>

<h2 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">string <span class="title">str1</span><span class="params">(<span class="string">&quot;string1&quot;</span>)</span></span>;</span><br><span class="line">str<span class="number">1.</span><span class="built_in">erase</span>(<span class="number">0</span>, <span class="number">1</span>); <span class="comment">//åˆ é™¤æŒ‡å®šåŒºé—´</span></span><br><span class="line">cout &lt;&lt; str1 &lt;&lt; endl;</span><br><span class="line">str<span class="number">1.</span><span class="built_in">erase</span>(<span class="number">2</span>);  <span class="comment">//æŒ‡å®šåˆ é™¤çš„èµ·å§‹ä½ç½®ï¼Œç›´è‡³æœ«å°¾</span></span><br><span class="line">cout &lt;&lt; str1 &lt;&lt; endl;</span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">tring1</span><br><span class="line">tr</span><br></pre></td></tr></table></figure></div>

<h2 id="å¼¹å‡º"><a href="#å¼¹å‡º" class="headerlink" title="å¼¹å‡º"></a>å¼¹å‡º</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">str.<span class="built_in">pop_back</span>();</span><br></pre></td></tr></table></figure></div>

<h2 id="æ¸…ç©º"><a href="#æ¸…ç©º" class="headerlink" title="æ¸…ç©º"></a>æ¸…ç©º</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">str.<span class="built_in">clear</span>();</span><br></pre></td></tr></table></figure></div>

<h2 id="æŸ¥è¯¢"><a href="#æŸ¥è¯¢" class="headerlink" title="æŸ¥è¯¢"></a>æŸ¥è¯¢</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">str.<span class="built_in">find</span>(<span class="string">&quot;tata&quot;</span>);</span><br></pre></td></tr></table></figure></div>

<h2 id="åˆ‡å‰²"><a href="#åˆ‡å‰²" class="headerlink" title="åˆ‡å‰²"></a>åˆ‡å‰²</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">string <span class="title">str1</span><span class="params">(<span class="string">&quot;string1string1&quot;</span>)</span></span>;</span><br><span class="line">string temp = str<span class="number">1.</span><span class="built_in">substr</span>(<span class="number">1</span>, <span class="number">2</span>);  <span class="comment">//æŒ‡å®šåŒºé—´çš„å­—ä¸²</span></span><br><span class="line">cout &lt;&lt; temp &lt;&lt; endl;</span><br><span class="line">string temp2 = str<span class="number">1.</span><span class="built_in">substr</span>(<span class="number">1</span>);  <span class="comment">//ä»æŒ‡å®šä½ç½®å¼€å§‹åˆ‡å‰²è‡³å°¾éƒ¨</span></span><br><span class="line">cout &lt;&lt; temp2 &lt;&lt; endl;</span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">tr</span><br><span class="line">tring1string1</span><br></pre></td></tr></table></figure></div>

<h2 id="æ•°å­—è½¬æ¢"><a href="#æ•°å­—è½¬æ¢" class="headerlink" title="æ•°å­—è½¬æ¢"></a>æ•°å­—è½¬æ¢</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">string <span class="title">str1</span><span class="params">(<span class="string">&quot;124&quot;</span>)</span></span>;</span><br><span class="line">cout &lt;&lt; <span class="built_in">stoi</span>(str1) &lt;&lt; endl; <span class="comment">//è½¬ä¸ºæ•´æ•°</span></span><br><span class="line">cout &lt;&lt; <span class="built_in">stof</span>(<span class="built_in">string</span>(<span class="string">&quot;124.3&quot;</span>)) &lt;&lt; endl;<span class="comment">//è½¬ä¸ºæµ®ç‚¹å‹</span></span><br><span class="line">string str = <span class="built_in">to_string</span>(<span class="number">124</span>); <span class="comment">//æ•°å­—è½¬ä¸ºå­—ç¬¦ä¸²</span></span><br><span class="line">cout &lt;&lt; str &lt;&lt; endl;</span><br><span class="line">str = <span class="built_in">to_string</span>(<span class="number">13.4</span>);</span><br><span class="line">cout &lt;&lt; str &lt;&lt; endl;</span><br></pre></td></tr></table></figure></div>

<h1 id="STL"><a href="#STL" class="headerlink" title="STL"></a>STL</h1><h2 id="strcmp"><a href="#strcmp" class="headerlink" title="strcmp"></a>strcmp</h2><p>æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">char</span> op[<span class="number">20</span>];</span><br><span class="line"><span class="built_in">strcmp</span>(op, <span class="string">&quot;osne&quot;</span>);</span><br></pre></td></tr></table></figure></div>

<p>ç›¸ç­‰ï¼Œè¿”å›å€¼ä¸º 0</p>
<p>å‰è€…å¤§äºåè€…ï¼Œè¿”å›å€¼ä¸ºæ­£æ•°</p>
<p>å‰è€…å°äºåè€…ï¼Œè¿”å›å€¼ä¸ºè´Ÿæ•°</p>
<h1 id="KMP"><a href="#KMP" class="headerlink" title="KMP"></a>KMP</h1><blockquote>
<p>æ¨èé˜…è¯»ï¼š<a class="link"   href="https://zhuanlan.zhihu.com/p/105629613" >ç®—æ³•å­¦ä¹ ç¬”è®°(13): KMPç®—æ³•<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</blockquote>
<p>KMP æ˜¯ä¸€ç§å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ï¼Œå®ƒå¯ä»¥åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²(S)ä¸­æ‰¾å‡ºæ‰€æœ‰å¦ä¸€ä¸ªå­—ç¬¦ä¸²(T)çš„å‡ºç°ã€‚</p>
<p>å¦‚æœæ˜¯æš´åŠ›åŒ¹é…çš„è¯ï¼Œé‡åˆ°ä¸åŒ¹é…çš„ä¸€ä¸ªå­—ç¬¦ï¼Œå°±å¾—æŠŠTå­—ç¬¦ä¸²ç›¸å¯¹Så‘å³ç§»åŠ¨ä¸€ä½ï¼ŒåŒæ—¶å°†TæŒ‡é’ˆå½’é›¶ï¼ŒSæŒ‡é’ˆä¸Tå¯¹é½è¿›è¡Œé‡æ–°åŒ¹é…ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202308121137853.webp"
                      alt="image.png"
                ></p>
<p>ä½†æ˜¯è¿™æ ·æç«¯æƒ…å†µä¸‹å¤æ‚åº¦ä¼šè¾¾åˆ° $O(nm)$ï¼Œæ˜¯æ— æ³•æ¥å—çš„ï¼Œäºæ˜¯ KMP ç®—æ³•åº”è¿è€Œç”Ÿï¼Œå®ƒå¯ä»¥å°†å·²ç»åŒ¹é…çš„éƒ¨åˆ†è¿›è¡Œé‡å¤åˆ©ç”¨ï¼Œè€Œä¸æ˜¯åƒæš´åŠ›é‚£æ ·å‚»å‚»çš„æ¸…é›¶ã€‚</p>
<p>KMP ç®—æ³•ä¸­å®šä¹‰äº†ä¸€ä¸ª $pmt$ æ•°ç»„ï¼Œ$pmt_i$ ä»£è¡¨å­—ç¬¦ä¸²çš„å‰ $i+1$ ä½ï¼ˆå…¶å®å°±æ˜¯ $S_{0\sim{i}}$ï¼Œå› ä¸ºå­—ç¬¦ä¸²ä¸‹æ ‡æ˜¯ä» 0 å¼€å§‹çš„ï¼‰<strong>çš„ Border é•¿åº¦</strong>ã€‚</p>
<p>Border ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²<strong>å‰ç¼€ä¸åç¼€æœ€é•¿åŒ¹é…çš„éƒ¨åˆ†</strong>ï¼Œä¾‹å¦‚ $\text{abacaba}$ï¼Œå®ƒçš„ Border å°±æ˜¯ $\text{aba}$ï¼Œé•¿åº¦ä¸º 3ã€‚</p>
<p>æ‰€ä»¥æ¯æ¬¡åŒ¹é…å¤±è´¥ä¹‹åå°±å¯ä»¥æŠŠTä¸²å·²ç»åŒ¹é…çš„éƒ¨åˆ†å˜ä¸ºå®ƒçš„ Borderï¼Œå‡å¦‚Tä¸²å½“å‰åŒ¹é…åˆ°ä¸‹æ ‡ä¸º$i$ï¼Œé‚£ä¹ˆå°±ç›¸å½“äºæŠŠTä¸²å‘å³å¹³ç§»äº† $i-strlen(Border_i)+1$ ä½ï¼Œè¿™æ ·å°±å¯ä»¥åˆ©ç”¨ä¹‹å‰å·²ç»åŒ¹é…çš„éƒ¨åˆ†ç»§ç»­åŒ¹é…è€Œæ— éœ€å½’é›¶ã€‚</p>
<p>æ³¨æ„ Border çš„é•¿åº¦ä¸è¶…è¿‡è‡ªèº«å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚</p>
<p>ä»£ç å®ç°å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>,j=<span class="number">0</span>;i&lt;s.<span class="built_in">length</span>();i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">while</span> (j&amp;&amp;s[i]!=t[j]) j=pmt[j<span class="number">-1</span>];<span class="comment">//ä¸æ–­å‘å‰è·³ï¼Œå¦‚æœæ²¡æœ‰çš„è¯ï¼Œæœ€åä¼šè·³åˆ°0</span></span><br><span class="line">    <span class="keyword">if</span> (s[i]==t[j]) j++;<span class="comment">//å½“å‰ä½åŒ¹é…</span></span><br><span class="line">    <span class="keyword">if</span> (j==t.<span class="built_in">length</span>())<span class="comment">//å·²ç»å®Œå…¨åŒ¹é…äº†ä¸€æ¬¡ï¼Œåˆ©ç”¨å·²åŒ¹é…çš„éƒ¨åˆ†å»æ‰¾ä¸‹ä¸ªå®Œå…¨åŒ¹é…</span></span><br><span class="line">        j=pmt[j<span class="number">-1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>ä¸¾ä¸ªä¾‹å­ï¼Œ$S&#x3D;\text{ABCABACABCAB},T&#x3D;\text{ABCAB}$ï¼Œå…ˆé¢„å¤„ç†å‡º $T$  å¯¹åº”çš„ $pmt$ï¼š</p>
<table>
<thead>
<tr>
<th align="center">$pmt$</th>
<th align="center">$Border$</th>
</tr>
</thead>
<tbody><tr>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">1</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">1</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">2</td>
</tr>
</tbody></table>
<p>ç„¶åè¿›è¡ŒåŒ¹é…ï¼Œè®¾ $i$ ä¸º $S$ çš„æŒ‡é’ˆï¼Œ$j$ ä¸º $T$ çš„æŒ‡é’ˆï¼Œé‚£ä¹ˆå½“ $i&#x3D;j&#x3D;4$ çš„ä¹‹åç¬¬ä¸€æ¬¡åŒ¹é…å®Œæˆï¼Œè¿™æ—¶å€™ $i&#x3D;4,j&#x3D;5,j&#x3D;pmt_{j-1}&#x3D;2$ï¼Œç„¶å $i&#x3D;5$ï¼Œå°±å¯ä»¥æŠŠ $AB$ è¿™ä¸ªå‰ç¼€ç»™åˆ©ç”¨èµ·æ¥äº†ï¼Œæ³¨æ„ $j$ å§‹ç»ˆæ˜¯å¾…åŒ¹é…é¡¹ï¼Œè¦æ¯”å·²ç»åŒ¹é…çš„å¤š $1$ï¼Œè€Œå½“ $j&#x3D;length_t$ çš„æ—¶å€™ï¼Œè¯´æ˜å‰ $j$ ä¸ªéƒ½å·²ç»åŒ¹é…å®Œäº†ï¼Œç°åœ¨åœ¨çœ‹ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥æ˜¯è¦è·³å›åˆ° $pmt_{j-1}$ï¼Œå…¶ä¸­å› ä¸ºå­—ç¬¦ä¸²ä» $0$ å¼€å§‹å­˜åœ¨ä¸å°‘ç»†èŠ‚ï¼Œè¯·è‡ªè¡Œç†è§£ã€‚</p>
<p>é‚£ä¹ˆ $pmt$ æ€ä¹ˆæ±‚å‘¢ï¼Ÿ</p>
<p>ç›¸å½“äºæ‹¿è‡ªå·±å’Œè‡ªå·±è¿›è¡ŒåŒ¹é…ï¼Œä»£ç å¦‚ä¸‹ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>,j=<span class="number">0</span>;i&lt;t.<span class="built_in">length</span>();i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">while</span>(j&amp;&amp;t[i]!=t[j]) j=pmt[j<span class="number">-1</span>];</span><br><span class="line">    <span class="keyword">if</span> (t[i]==t[j]) j++;</span><br><span class="line">    pmt[i]=j;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>å½“ç„¶ä¹Ÿæœ‰å¦ä¸€ç§å†™æ³•ï¼Œæ˜¯å­˜æœ€é•¿ Border çš„å³ç«¯ç‚¹ä¸‹æ ‡ï¼Œè®°ä¸º $nxt_i$ï¼Œä¸å­˜é•¿åº¦ç±»ä¼¼ï¼Œæ‹¿ä¾‹é¢˜ä¸¾ä¾‹ï¼š</p>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P3435" >P3435<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">char</span> a[<span class="number">1000005</span>];</span><br><span class="line"><span class="type">int</span> nxt[<span class="number">1000005</span>];</span><br><span class="line"><span class="type">long</span> <span class="type">long</span> ans;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,a);</span><br><span class="line">    <span class="built_in">memset</span>(nxt,<span class="number">-1</span>,<span class="built_in">sizeof</span>(nxt));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>,j=<span class="number">-1</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span>(j&gt;<span class="number">-1</span>&amp;&amp;a[i]!=a[j<span class="number">+1</span>]) j=nxt[j];</span><br><span class="line">        <span class="keyword">if</span>(a[i]==a[j<span class="number">+1</span>]) j++;</span><br><span class="line">        nxt[i]=j;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>,j=<span class="number">1</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span>(nxt[j]&gt;<span class="number">-1</span>) j=nxt[j];</span><br><span class="line">        <span class="keyword">if</span>(nxt[i]&gt;<span class="number">-1</span>) nxt[i]=j;</span><br><span class="line">        ans+=i-j;</span><br><span class="line">        j=i<span class="number">+1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">char</span> a[<span class="number">1000005</span>];</span><br><span class="line"><span class="type">int</span> pmt[<span class="number">1000005</span>];</span><br><span class="line"><span class="type">long</span> <span class="type">long</span> ans;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,a);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>,j=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span>(j&amp;&amp;a[i]!=a[j]) j=pmt[j<span class="number">-1</span>];</span><br><span class="line">        <span class="keyword">if</span>(a[i]==a[j]) j++;</span><br><span class="line">        pmt[i]=j;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>,j=<span class="number">2</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span>(pmt[j<span class="number">-1</span>]) j=pmt[j<span class="number">-1</span>];</span><br><span class="line">        <span class="keyword">if</span>(pmt[i]) pmt[i]=j;</span><br><span class="line">        ans+=i-j<span class="number">+1</span>;</span><br><span class="line">        j=i<span class="number">+2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>è¿™é“é¢˜è§£æ³•å°±æ˜¯å¯¹æ¯ä¸ªå‰ç¼€æ‰¾å‡ºå®ƒçš„æœ€å° Border çš„é•¿åº¦ï¼Œç„¶åæ‹¿å½“å‰å‰ç¼€é•¿åº¦å‡å»è¿™ä¸ªæœ€å° Border çš„é•¿åº¦ï¼Œå†æŠŠæ¯ä¸ªå‰ç¼€çš„ç­”æ¡ˆåŠ èµ·æ¥å°±æ˜¯æœ€åçš„ç­”æ¡ˆï¼Œç»†èŠ‚è§ä»£ç ï¼Œæœ‰åŠ©äºåŠ æ·±å¯¹ KMP ä¸¤ç§å†™æ³•çš„ç†è§£ã€‚</p>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P2375" >P2375åŠ¨ç‰©å›­<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e6</span><span class="number">+10</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod=<span class="number">1e9</span><span class="number">+7</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">char</span> a[N];</span><br><span class="line"><span class="type">int</span> nxt[N],num[N];</span><br><span class="line"><span class="type">long</span> <span class="type">long</span> ans;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">while</span>(n--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,a<span class="number">+1</span>);</span><br><span class="line">        ans=<span class="number">1</span>;</span><br><span class="line">        num[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> l=<span class="built_in">strlen</span>(a<span class="number">+1</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>,j=<span class="number">0</span>;i&lt;=l;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span>(j&amp;&amp;a[i]!=a[j<span class="number">+1</span>]) j=nxt[j];</span><br><span class="line">            <span class="keyword">if</span>(a[i]==a[j<span class="number">+1</span>]) j++;</span><br><span class="line">            nxt[i]=j;</span><br><span class="line">            num[i]=num[j]<span class="number">+1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>,j=<span class="number">0</span>;i&lt;=l;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span>(j&amp;&amp;a[i]!=a[j<span class="number">+1</span>]) j=nxt[j];</span><br><span class="line">            <span class="keyword">if</span>(a[i]==a[j<span class="number">+1</span>]) j++;</span><br><span class="line">            <span class="keyword">while</span>((j&lt;&lt;<span class="number">1</span>)&gt;i) j=nxt[j];</span><br><span class="line">            ans=ans*(num[j]<span class="number">+1</span>)%mod;</span><br><span class="line">            <span class="comment">// printf(&quot;%d\n&quot;,num[j]);</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,ans);</span><br><span class="line">        <span class="comment">// for(int i=1;i&lt;=l;i++) printf(&quot;%d\n&quot;,num[i]);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>å…ˆæŠŠæ‰€æœ‰çš„åç¼€æ•°é‡å’Œéƒ½æ±‚å‡ºæ¥ï¼Œè¿™ä¸ªå¯ä»¥é€šè¿‡é€’æ¨å…³ç³»æ±‚å‡ºï¼Œå³$sum_i&#x3D;sum_{nxt_i}+1$ã€‚</p>
<p>ç„¶åå†åŒ¹é…å¤„ç†ä¸€æ¬¡ï¼ŒåŒ¹é…çš„è¿‡ç¨‹ä¸­çš„æ—¶å€™å¯¹äºæ¯ä¸€ä¸ª$j$ï¼Œä¸€æ—¦è¶…è¿‡å½“å‰å­—ç¬¦ä¸²é•¿åº¦çš„ä¸€åŠï¼Œå°±å¾€å‰è·³ç›´åˆ°é•¿åº¦å°äºå­—ç¬¦ä¸²çš„ä¸€åŠå¹¶ç´¯åŠ ç­”æ¡ˆã€‚</p>
<h1 id="EXKMP-Z"><a href="#EXKMP-Z" class="headerlink" title="EXKMP(Z)"></a>EXKMP(Z)</h1><blockquote>
<p>Z ç®—æ³•åˆè¢«å«åšæ‰©å±• KMP ç®—æ³•ï¼Œå…¶æ ¸å¿ƒæ˜¯ Z å‡½æ•°ã€‚<br><a class="link"   href="https://zhuanlan.zhihu.com/p/403256847" >å›¾ç‰‡æ¥æº<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</blockquote>
<p>$Z_i$å®šä¹‰ä¸ºå­—ç¬¦ä¸²ä¸$i$ä½ç½®åˆ°å­—ç¬¦ä¸²æœ«å°¾ä¸æ•´ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å…¬å…±å‰ç¼€çš„é•¿åº¦ï¼Œå³å¤„ç†æ¯ä¸€ä¸ªåç¼€ä¸åŸå­—ç¬¦ä¸²çš„ LCPï¼ˆæœ€é•¿å…¬å…±å‰ç¼€ï¼‰ã€‚</p>
<p>è´´ä¸€å¼ å›¾ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202308141535579.webp"
                      alt="image.png"
                ></p>
<p>ç‰¹åˆ«åœ°ï¼Œä»¤$Z_0&#x3D;0$ã€‚</p>
<p>å‡è®¾$Z_i\ne0$ï¼Œå®šä¹‰åŒºé—´$[i,i+Z_i-1]$ä¸ºä¸€ä¸ª$\text{Z-Box}$ï¼Œé‚£ä¹ˆ$Z-Box$ä¸€å®šæ˜¯è¿™ä¸ªå­—ç¬¦ä¸²çš„ä¸€ä¸ªå‰ç¼€ã€‚</p>
<p>æˆ‘ä»¬ä»å·¦å‘å³æšä¸¾$i$ï¼Œå¹¶ç»´æŠ¤å³ç«¯ç‚¹æœ€å¤§çš„ $Z-Box$ å’Œå®ƒå¯¹åº”çš„å·¦ç«¯ç‚¹ï¼Œè¿™é‡Œä¿è¯$l\le{i}$ã€‚</p>
<p>é‚£ä¹ˆå°±æœ‰ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š</p>
<ul>
<li>$i&gt;r$ï¼Œè¿™è¯´æ˜æˆ‘å½“å‰çš„$Z-Box$å·¦ç«¯ç‚¹éƒ½æ¯”ä¹‹å‰çš„å³ç«¯ç‚¹è¦å¤§ï¼Œæ‰€ä»¥æ²¡æœ‰ä»€ä¹ˆå¯ä»¥åˆ©ç”¨çš„ï¼Œå°±åªèƒ½æš´åŠ›å¾€åæšä¸¾å‡ºå½“å‰çš„ $Z-Box$ å¹¶ç»´æŠ¤ä¿¡æ¯ã€‚</li>
<li>$i\le{r}$ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¯¹å·²ç»æ±‚å‡ºçš„ $lcp$ è¿›è¡Œåˆ©ç”¨ï¼Œè§ä¸‹å›¾è§£é‡Šï¼š</li>
</ul>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307302329248.webp"
                      alt="image.png"
                ></p>
<p>é»‘è‰²ä¸ºåŸåºåˆ—ï¼Œæˆ‘ç°åœ¨è¦æ±‚æ¯ä¸€ä¸ªåç¼€ä¸åŸåºåˆ—çš„ lcpï¼Œå³æœ€å¤§å…¬å…±å‰ç¼€ã€‚</p>
<p>æ¯”å¦‚æˆ‘ç°åœ¨è¦æ±‚ç²‰è‰²ç‚¹çš„ lcpï¼Œ</p>
<p>ä½†æ˜¯å‘ç°è¿™ä¸ªç‚¹åœ¨å½“å‰æœ€å¤§lcpçš„å³ç«¯ç‚¹çš„èŒƒå›´å†…ï¼ˆçº¢è‰²çº¿ï¼‰ï¼Œå³æˆ‘ä»¬çŸ¥é“äº†ç°è‰²ä¸é»‘è‰²çš„ lcpï¼Œè€Œç°è‰²ä¸è“è‰²çš„ç²‰è‰²éƒ¨åˆ†åˆç›¸åŒï¼Œäºæ˜¯è“è‰²å’Œé»‘è‰²çš„ç²‰è‰²éƒ¨åˆ†ä¹Ÿç›¸åŒã€‚</p>
<p>è€Œå¯¹äºç²‰è‰²éƒ¨åˆ†ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†ç»¿è‰²ä¸çš„ lcpï¼Œç»¿è‰²&lt;ç²‰è‰²ï¼Œç›¸åŒä½ç½®çš„ç»¿è‰²&#x3D;ç²‰è‰²ï¼Œäºæ˜¯ç»¿è‰²çš„ lcp å°±å¯ä»¥è¢«ç²‰è‰²ç‚¹ç»§æ‰¿ï¼›å‡å¦‚ç»¿è‰²&gt;ç²‰è‰²ï¼Œä½†æ˜¯è¶…å‡ºéƒ¨åˆ†åœ¨è“è‰²éƒ¨åˆ†ä¸­ä¸ä¸€å®šç›¸åŒï¼Œå› æ­¤æœ€å¤šèƒ½ç»§æ‰¿åˆ°ç²‰è‰²çš„è¾¹ç•Œå¤„ï¼Œå› æ­¤ç»¿è‰²çš„ lcpçš„å³ç«¯ç‚¹ä¸‹æ ‡è¦ä¸ç²‰è‰²å³ç«¯ç‚¹ä¸‹æ ‡å–$\min$åç»§æ‰¿ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">char</span> s[<span class="number">1000005</span>];</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> z[<span class="number">100005</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    n=<span class="built_in">strlen</span>(s);</span><br><span class="line">    z[<span class="number">0</span>]=n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>,l=<span class="number">0</span>,r=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(z[i-l]&lt;r-i<span class="number">+1</span>)<span class="comment">//å½“å‰å·²ç»ç›¸åŒçš„éƒ¨åˆ†æ¯”å·²çŸ¥lcpè¦å¤§</span></span><br><span class="line">            z[i]=z[i-l];</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            z[i]=<span class="built_in">max</span>(r-i<span class="number">+1</span>,<span class="number">0</span>);</span><br><span class="line">            <span class="keyword">while</span>(i+z[i]&lt;n&amp;&amp;s[z[i]]==s[i+z[i]]) z[i]++;</span><br><span class="line">            l=i,r=i+z[i]<span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>æ³¨æ„ $l,r$ çš„å®šä¹‰ï¼Œä»–ä»¬çš„åˆå§‹å€¼è¦æ¯”åˆå§‹å˜é‡å°‘ 1ã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œ$r$ æ˜¯å•è°ƒä¸å‡çš„ï¼Œæ¯æ¬¡å†…å±‚å¾ªç¯éƒ½ä¼šä½¿ $r$ åŠ ä¸€ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸º$O(n)$ã€‚</p>
<h1 id="Manacher"><a href="#Manacher" class="headerlink" title="Manacher"></a>Manacher</h1><blockquote>
<p>ä¸€ç§è§£å†³å›æ–‡ä¸²é—®é¢˜çš„ç®—æ³•</p>
</blockquote>
<p>å›æ–‡ä¸²åˆ†ä¸ºå¥‡å›æ–‡ä¸²å’Œå¶å›æ–‡ä¸²ï¼Œè€Œå¶å›æ–‡ä¸²ä¸å­˜åœ¨å›ºå®šçš„å›æ–‡ä¸­å¿ƒï¼Œå› æ­¤å°±è¦è¿›è¡Œä¸€äº›å¤„ç†ï¼Œåœ¨å­—ç¬¦é—´åŠ ä¸Šä¸€äº›å…¶ä»–å­—ç¬¦ï¼Œæ¯”å¦‚<code>#</code>æˆ–è€…<code>$</code>ã€‚</p>
<p>å¥‡å›æ–‡ä¸²$\text{abcba}&#x3D;\text{$a$b$c$b$a$}$</p>
<p>è¿™æ ·å¯¹äºä¸€ä¸ªå¶å›æ–‡ä¸²$\text{abccba}$ï¼Œå°±å¯ä»¥å¤„ç†ä¸º$\text{$a$b$c$c$b$a$}$ï¼Œè¿™æ ·å°±å¯ä»¥ç”¨å¥‡å›æ–‡ä¸²çš„å¤„ç†æ–¹æ³•æ¥å¤„ç†å¶å›æ–‡ä¸²äº†ã€‚</p>
<p>è®¾æ•°ç»„ $d_i$ ä¸ºä»¥ $s_i$ ä¸ºä¸­å¿ƒçš„å¥‡å›æ–‡ä¸²çš„æ•°é‡ï¼Œé•¿åº¦åˆ†åˆ«ä¸º $1,3,\dots,2d_i-1$ï¼ŒManacher å°±å¯ä»¥ $O(n)$ å¤„ç†å‡ºè¿™ä¸ªæ•°ç»„ã€‚</p>
<p>è€Œä»¥ $i$ ä¸ºä¸­å¿ƒçš„æœ€é•¿å›æ–‡ä¸²çš„é•¿åº¦å°±ä¸º $d_i-1$ã€‚</p>
<p>Manacher çš„æ€æƒ³ä¸ Z ç®—æ³•å¾ˆåƒï¼Œéƒ½æ˜¯ç»´æŠ¤äº†ä¸€ä¸ªæœ€è¿œçš„å³ç«¯ç‚¹ï¼Œä¸è¿‡åœ¨ Manacher é‡Œç»´æŠ¤çš„æ˜¯å³ç«¯ç‚¹æœ€å¤§çš„å¥‡å›æ–‡ä¸²ï¼Œ</p>
<p>å½“æšä¸¾åˆ°ä¸€ä¸ª $i$ æ—¶ï¼Œæˆ‘ä»¬è¿›è¡Œåˆ†ç±»è®¨è®ºï¼š</p>
<ul>
<li>$i&gt;r$ï¼Œé‚£å°±æš´åŠ›è®¡ç®—$d_i$ï¼Œå¹¶ç»´æŠ¤$l,r$ã€‚</li>
<li>$i\le{r}$ï¼Œé‚£ä¹ˆå°±å¯ä»¥æ‰¾è¿™ä¸ª$r$æ‰€åœ¨å›æ–‡ä¸²çš„å›æ–‡ä¸­å¿ƒï¼Œè¿™æ ·å°±å¯ä»¥æ‰¾åˆ°å®ƒçš„å¯¹ç§°ç‚¹ï¼Œè®¾è¿™ä¸ªå¯¹ç§°ç‚¹ä¸º $j$ï¼Œå¦‚æœä»¥ $j$ ä¸ºå›æ–‡ä¸­å¿ƒçš„å›æ–‡ä¸²å·¦ç«¯ç‚¹å¤§äº $l$ï¼Œé‚£ä¹ˆè¯´æ˜ $d_j$ æ˜¯è¢«å½“å‰è¿™ä¸ªå›æ–‡ä¸²å®Œå…¨åŒ…å«çš„äº†ï¼Œè€Œå¯¹ç§°ä½ç½®å¯¹åº”ç›¸ç­‰ï¼Œå› æ­¤å¯ä»¥ç›´æ¥ç»§æ‰¿ï¼Œ$d_i&#x3D;d_j$ã€‚<ul>
<li>å¦‚æœä»¥ $j$ ä¸ºå›æ–‡ä¸­å¿ƒçš„å›æ–‡ä¸²å·¦ç«¯ç‚¹å°äºç­‰äº $l$ï¼Œé‚£ä¹ˆåªèƒ½çŸ¥é“ $i$ çš„å›æ–‡ä¸²å³ç«¯ç‚¹è‡³å°‘ä¸º $j-l+1$æˆ–è€… $r-i+1$ï¼Œå‰©ä½™éƒ¨åˆ†å¯ä»¥æš´åŠ›è§£å†³ã€‚</li>
</ul>
</li>
</ul>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> d[<span class="number">1000005</span>];</span><br><span class="line"><span class="type">char</span> s[<span class="number">1000005</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>,l=<span class="number">0</span>,r=<span class="number">-1</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> j=l+r-i;<span class="comment">//å¯¹ç§°ç‚¹</span></span><br><span class="line">        <span class="type">int</span> dj=j&gt;=<span class="number">0</span>?d[j]:<span class="number">0</span>;<span class="comment">//ä¸èƒ½è¶Šç•Œ</span></span><br><span class="line">        d[i]=<span class="built_in">max</span>(<span class="built_in">min</span>(dj,r-i<span class="number">+1</span>),<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">if</span>(j-dj&lt;l)<span class="comment">//j-dj+1&lt;=l</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span>(i-d[i]&gt;=<span class="number">0</span>&amp;&amp;i+d[i]&lt;n&amp;&amp;s[i-d[i]]==s[i+d[i]]) d[i]++;</span><br><span class="line">            l=i-d[i]<span class="number">+1</span>,r=i+d[i]<span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>ä¸ºäº†ä½¿è‡ªå·±æœ¬èº«ä¹Ÿèƒ½è¢«ç®—ä¸Šï¼Œæ‰€ä»¥åˆå§‹ $r$ ä¸º-1ã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œ$r$ æ˜¯å•è°ƒä¸å‡çš„ï¼Œæ¯æ¬¡å†…å±‚å¾ªç¯éƒ½ä¼šä½¿ $r$ åŠ ä¸€ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸º$O(n)$ã€‚</p>
<h1 id="Trieæ ‘"><a href="#Trieæ ‘" class="headerlink" title="Trieæ ‘"></a>Trieæ ‘</h1><p>å­—å…¸æ ‘ï¼Œå¯ä»¥ç†è§£ä¸º $n$ å‰æ ‘ï¼Œ$n$ å–å†³äºå­—ç¬¦çš„ç§ç±»ã€‚</p>
<p>æ¨¡æ¿ï¼š</p>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P8306#submit" >P8306<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">3e6</span><span class="number">+10</span>;</span><br><span class="line"><span class="type">int</span> t,cnt=<span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> nxt[N][<span class="number">80</span>];</span><br><span class="line"><span class="type">int</span> val[N];</span><br><span class="line"><span class="type">char</span> a[N];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// memset(nxt,0,sizeof(nxt));</span></span><br><span class="line">    <span class="comment">// memset(val,0,sizeof(val));</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=x;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        val[i]=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=<span class="number">77</span>;j++)</span><br><span class="line">            nxt[i][j]=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cnt=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(<span class="type">const</span> string &amp;s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> cur=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;c:s)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(!nxt[cur][c-<span class="string">&#x27;0&#x27;</span>]) nxt[cur][c-<span class="string">&#x27;0&#x27;</span>]=++cnt;</span><br><span class="line">        cur=nxt[cur][c-<span class="string">&#x27;0&#x27;</span>];</span><br><span class="line">        val[cur]++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">query</span><span class="params">(<span class="type">const</span> string &amp;s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> cur=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;c:s)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(!nxt[cur][c-<span class="string">&#x27;0&#x27;</span>]) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        cur=nxt[cur][c-<span class="string">&#x27;0&#x27;</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> val[cur];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin&gt;&gt;t;</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> n,q;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;q);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            string s;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,a);</span><br><span class="line">            s=a;</span><br><span class="line">            <span class="built_in">insert</span>(s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=q;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            string s;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,a);</span><br><span class="line">            s=a;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,<span class="built_in">query</span>(s));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">init</span>(cnt);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>ä¾‹é¢˜ï¼š</p>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P2580" >P2580<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n,cnt,q;</span><br><span class="line"><span class="type">char</span> a[<span class="number">100</span>];</span><br><span class="line"><span class="type">int</span> nxt[<span class="number">1000005</span>][<span class="number">26</span>];</span><br><span class="line"><span class="type">int</span> vis[<span class="number">1000005</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(nxt,<span class="number">0</span>,<span class="built_in">sizeof</span>(nxt));</span><br><span class="line">    cnt=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(<span class="type">const</span> string &amp;s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> cur=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;c:s)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(!nxt[cur][c-<span class="string">&#x27;a&#x27;</span>]) nxt[cur][c-<span class="string">&#x27;a&#x27;</span>]=++cnt;</span><br><span class="line">        cur=nxt[cur][c-<span class="string">&#x27;a&#x27;</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">query</span><span class="params">(<span class="type">const</span> string &amp;s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> cur=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;c:s)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(!nxt[cur][c-<span class="string">&#x27;a&#x27;</span>]) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        cur=nxt[cur][c-<span class="string">&#x27;a&#x27;</span>];</span><br><span class="line">        vis[cur]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">26</span>;i++)</span><br><span class="line">        <span class="keyword">if</span>(vis[nxt[cur][i]]) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(vis[cur]&gt;<span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,a);</span><br><span class="line">        string s=a;</span><br><span class="line">        <span class="built_in">insert</span>(s);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;q);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=q;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,a);</span><br><span class="line">        string s=a;</span><br><span class="line">        <span class="type">int</span> op=<span class="built_in">query</span>(s);</span><br><span class="line">        <span class="keyword">if</span>(op==<span class="number">0</span>) <span class="built_in">printf</span>(<span class="string">&quot;WRONG\n&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(op==<span class="number">1</span>) <span class="built_in">printf</span>(<span class="string">&quot;REPEAT\n&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(op==<span class="number">2</span>) <span class="built_in">printf</span>(<span class="string">&quot;OK\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="å¯æŒä¹…åŒ–-Trie-æ ‘"><a href="#å¯æŒä¹…åŒ–-Trie-æ ‘" class="headerlink" title="å¯æŒä¹…åŒ– Trie æ ‘"></a>å¯æŒä¹…åŒ– Trie æ ‘</h2><p>å¯¹äºå±äºä¿®æ”¹çš„ä½†æ˜¯å·²æœ‰èŠ‚ç‚¹ï¼Œå¤åˆ¶ç²˜è´´ã€‚</p>
<p>å¯¹äºä¸å±äºä¿®æ”¹ä½†æ˜¯åŸæ¥æœ‰çš„èŠ‚ç‚¹ï¼Œç›´æ¥è¿æ¥ï¼ˆç›¸å½“äºå¤åˆ¶ç²˜è´´çš„æ—¶å€™ç›´æ¥æŠŠå±æ€§å¤åˆ¶äº†è¿‡æ¥ï¼‰ã€‚</p>
<p>å¯¹äºå±äºä¿®æ”¹çš„æ–°èŠ‚ç‚¹ï¼Œæ–°å»ºä¸€ä¸ªèŠ‚ç‚¹ã€‚</p>
<p>éƒ½æ˜¯å¯¹äºä¸Šä¸€ä¸ªç‰ˆæœ¬çš„æ“ä½œã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202310042006238.webp"
                      alt="image.png"
                ></p>
<p>æ¯æ¬¡å…ˆå¾—åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼Œç„¶åå¼€ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼ŒæŠŠæ ¹èŠ‚ç‚¹å…ˆå…‹éš†è¿‡æ¥ã€‚</p>
<p>ç„¶åéå†æ¯ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœæœ‰å°±å¤åˆ¶ç²˜è´´ï¼Œæ²¡æœ‰å°±æ–°å»ºã€‚</p>
<p><a class="link"   href="https://www.acwing.com/problem/content/258/" >AcWing256<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>æ€ä¹ˆåˆ¤æ–­å·¦ç•Œï¼Ÿ</p>
<p>è®°å½•ä¸€ä¸‹æ¯ä¸ªèŠ‚ç‚¹çš„å­æ ‘é‡Œçš„ä¸‹æ ‡æœ€å¤§å€¼å³å¯ã€‚</p>
<p>æ€ä¹ˆåˆ¤æ–­å³ç•Œï¼Ÿçœ‹ç¬¬ $r$ ä¸ªç‰ˆæœ¬å³å¯ï¼Œå¯æŒä¹…åŒ–ã€‚</p>
<p>å‰ç¼€å’Œå¤„ç†ï¼š</p>
<p>$ans&#x3D;s_N\oplus{s_{p - 1}}\oplus x$</p>
<p>äºæ˜¯æˆ‘ä»¬åœ¨ $l\sim r$ ä¸­è´ªå¿ƒåœ°æ‰¾åˆ°è¿™æ ·ä¸€ä¸ª $p - 1$ å³å¯ï¼Œä¹Ÿå°±æ˜¯åœ¨ $l-1\sim r-1$ ä¸­æ‰¾ä¸€ä¸ª $p$ï¼Œä½¿å¾—ä»–ä»¬çš„å¼‚æˆ–å€¼æœ€å¤§ã€‚</p>
]]></content>
      <categories>
        <category>ACM</category>
      </categories>
  </entry>
  <entry>
    <title>SNOIP-å¬è¯¾ç®€è®°</title>
    <url>/87022c29.html</url>
    <content><![CDATA[<blockquote>
<p>æœ¬æ–‡ä»…ä¸ºç¬”è®°çš„ç®€ç•¥éƒ¨åˆ†ï¼Œå…¶ä¸­ä¸€äº›è¾ƒä¸ºå®Œæ•´çš„å·²ç‹¬ç«‹æˆæ–‡ï¼Œ è¯·ç§»æ­¥è‡³å¯¹åº”æ–‡ç« ã€‚</p>
</blockquote>
<h1 id="Day1"><a href="#Day1" class="headerlink" title="Day1"></a>Day1</h1><h2 id="1-4089-å¤§å˜´ä¹Œé¸¦"><a href="#1-4089-å¤§å˜´ä¹Œé¸¦" class="headerlink" title="1.4089:Â å¤§å˜´ä¹Œé¸¦"></a>1.4089:Â å¤§å˜´ä¹Œé¸¦</h2><p><strong>æ¡¶ï¼Œå‰ç¼€å’Œï¼Œä½è¿ç®—</strong></p>
<hr>
<p>æˆ‘ä»¬è¦æ‰¾<code>k%(sum[r]^sum[l-1])==0</code>ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæŠŠkçš„å› å­è®°å½•ä¸€éï¼Œå­˜åˆ°væ•°ç»„ä¸­ï¼Œç„¶åæšä¸¾è¿™ä¸ªå› å­<code>v[j]</code>ï¼Œé‚£ä¹ˆå°±æ˜¯æ‰¾<code>sum[r]^sum[l-1]==v[j]</code>ï¼Œæ ¹æ®å¼‚æˆ–çš„æ€§è´¨ï¼Œé‚£ä¹ˆå°±æ˜¯<code>sum[l-1]==v[j]^sum[r]</code>ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦æ‰¾åˆ°è¿™ä¸ªlçš„å‰ç¼€å¼‚æˆ–å’Œå‡ºç°çš„æ¬¡æ•°å°±å¯ä»¥äº†ã€‚</p>
<p>è€Œæ¯ç»è¿‡ä¸€ä¸ªç‚¹ï¼Œå°±æŠŠå®ƒå¯¹åº”çš„å‰ç¼€å¼‚æˆ–å’Œå‡ºç°çš„æ¬¡æ•°åŠ ä¸€ã€‚</p>
<p>ä¸€ä¸ªæ•°çš„å› å­æœ€å¤šå¤§æ¦‚æ˜¯$\sqrt(n)$ä¸ªï¼Œå› æ­¤å¤æ‚åº¦æ˜¯$O(n\sqrt(n))$ã€‚</p>
<h2 id="2-4090-è‰¾è"><a href="#2-4090-è‰¾è" class="headerlink" title="2.4090:Â è‰¾è"></a>2.4090:Â è‰¾è</h2><p><strong>çº¿æ®µæ ‘</strong></p>
<hr>
<p>åªéœ€è¦ç»´æŠ¤é•¿åº¦ä¸º2å’Œ3çš„æœ€å¤§å­æ®µï¼Œ</p>
<p>çº¿æ®µæ ‘ç»´æŠ¤åŒºé—´å†…æ‰€æœ‰é•¿åº¦ä¸º2çš„è¿ç»­å­æ®µä¸­æœ€å¤§å’ŒåŒºé—´å†…æ‰€æœ‰é•¿åº¦ä¸º3çš„è¿ç»­å­æ®µä¸­æœ€å¤§ã€‚</p>
<p>å› ä¸ºä»»æ„ä¸€ä¸ªåŒºé—´éƒ½å¯ä»¥è¢«åˆ†æˆä¸¤æ®µä¸åŒçš„åŒºé—´ï¼Œè¿™ä¸¤ä¸ªåŒºé—´çš„å¹³å‡å€¼ä¸€å®šæœ‰ä¸€ä¸ªå¤§äºç­‰äºåŸæ¥çš„åŒºé—´ï¼Œå¦ä¸€ä¸ªåŒºé—´çš„å¹³å‡å€¼å°äºç­‰äºåŸæ¥çš„å¹³å‡å€¼ï¼Œæ‰€ä»¥è¿™ä¹ˆä¸æ–­å»ä¸‹å»ï¼Œç›´åˆ°å‰©ä¸‹ä¸‰ä¸ªï¼Œé‚£ä¹ˆå‡å¦‚åˆ†å‡ºæ¥çš„é‚£ä¸€ä¸ªç‚¹æ¯”åŸæ¥çš„å¤§ï¼Œä½†æ˜¯å‰©ä¸‹çš„ä¸¤ä¸ªæ¯”åŸæ¥çš„å°ï¼Œç”±äºä¸€ä¸ªç‚¹ä¸èƒ½ç‹¬ç«‹ä¸ºä¸€ä¸ªåŒºé—´ï¼Œå› æ­¤è¦ä¿ç•™ä¸‰ä¸ªã€‚</p>
<p>åˆå¹¶çš„æ—¶å€™åˆ†ä¸¤ç§æƒ…å†µè®¨è®ºï¼Œ</p>
<p>åŒºé—´åŠ çš„æ—¶å€™å°±åˆ†åˆ«ä¸¤å€ä¸‰å€åŠ ã€‚</p>
<p>æˆ‘ä»¬æ¯ä¸ªåŒºé—´è®°å½•ä¸€ä¸‹å·¦ç«¯çš„ä¸¤ä¸ªå€¼å’Œå³ç«¯çš„ä¸¤ä¸ªå€¼ï¼Œåˆå¹¶çš„æ—¶å€™æ¯”è¾ƒä¸€ä¸‹åŸæ¥ä¸¤ä¸ªåŒºé—´çš„æœ€å¤§å€¼å’Œäº¤ç•Œå¤„æ–°äº§ç”Ÿçš„å€¼æ¯”è¾ƒä¸€ä¸‹å–æœ€å¤§å°±å¯ä»¥äº†ã€‚</p>
<h2 id="3-4091-æ²™å¥ˆæœµ"><a href="#3-4091-æ²™å¥ˆæœµ" class="headerlink" title="3.4091:Â æ²™å¥ˆæœµ"></a>3.4091:Â æ²™å¥ˆæœµ</h2><p><strong>åˆ†å—</strong></p>
<hr>
<p>é¦–å…ˆé¢˜æ„æ˜¯è¦æ‰¾ä¸€å®šèŒƒå›´å†…çš„æ¯ä¸€ä¸ªå°åŒºé—´ï¼Œæ¯ä¸ªå°åŒºé—´çš„ç­”æ¡ˆæ˜¯è¿™æ®µåŒºé—´å†…ä¸åŒçš„å€¼çš„ä¸ªæ•°ï¼ˆè‰²å—æ•°ï¼ŒåŒä¸€ä¸ªæ•°ä¸ºä¸€ä¸ªè‰²å—ï¼Œè‰²å—æ•°çš„å‰ç¼€å’Œéœ€è¦é¢„å¤„ç†æ–¹ä¾¿åŒºé—´æŸ¥è¯¢ï¼‰ï¼Œç„¶åæ±‚è¿™äº›åŒºé—´ç­”æ¡ˆçš„å’Œã€‚</p>
<p>é‡‡ç”¨åˆ†å—çš„æ€æƒ³</p>
<p>æŠŠåºåˆ—åˆ†æˆæ ¹å·ä¸ªå—ï¼Œæ¯ä¸ªå—é•¿åº¦å¤§æ¦‚ä¸º$\sqrt(n)$</p>
<p>ç»´æŠ¤ä¸€ä¸ª$a$ä»£è¡¨$i$ä¹‹å‰çš„æ¯ä¸ª$1$åˆ°$i$è¿™ä¸ªä½ç½®çš„æŸ“è‰²æ®µæ•°</p>
<p>ç”¨<code>A[x]</code>ä»£è¡¨å½“å‰ä½ç½®å‘å·¦æ‰€æœ‰ç­”æ¡ˆç´¯ç§¯å’Œï¼ˆç±»ä¼¼äºå‰ç¼€å’Œä¸€æ ·çš„ä¸œè¥¿ï¼‰ã€‚</p>
<p>ç”¨<code>B[x]</code>ä»£è¡¨å½“å‰ä½ç½®å‘å³äº§ç”Ÿæ‰€æœ‰ç­”æ¡ˆçš„ç´¯è®¡å’Œ</p>
<p>ç”¨<code>C[x]</code>ä»£è¡¨å½“å‰å—çš„xçš„ä¸ªæ•°</p>
<p>ç”¨<code>D[x]</code>ä»£è¡¨å½“å‰å—çš„ç­”æ¡ˆ</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307241912656.webp"
                      alt="image.png"
                ></p>
<p>å½“å‰ä½ç½®å‘å·¦ç´¯è®¡äº§ç”Ÿçš„ç­”æ¡ˆä¸ºçº¢è‰²æ®µåŠ å’Œã€‚</p>
<p>æ¯é‡åˆ°ä¸€ä¸ª$x$å°±éœ€è¦å°†å…¶Aç´¯åŠ åˆ°å½“å‰å—çš„æ€»ç­”æ¡ˆä¸­ï¼Œ</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307242232020.webp"
                      alt="image.png"
                ></p>
<p>æ¯ä¸ªé¢œè‰²å…¶å®å°±æ˜¯$a$çš„ä¸€ç§çŠ¶æ€ï¼Œ</p>
<p>é‚£ä¹ˆæ€ä¹ˆè½¬ç§»å‘¢ï¼Ÿ</p>
<p>ç®—å‡ºä¸¤ä¸ªç›¸é‚»çš„xä¹‹é—´çš„ç­”æ¡ˆå†ä¹˜ä»¥ä¹‹å‰å‡ºç°xçš„æ¬¡æ•°ï¼Œç´¯åŠ åˆ°Aä¸Š</p>
<p>æ­£ç€æŠŠè¿™ä¸ªåŒºé—´æšä¸¾ä¸€éå¾—åˆ°Açš„å€¼å’Œå½“å‰å—æ€»å…±çš„ç­”æ¡ˆï¼Œ</p>
<p>åˆå¹¶å—çš„æ—¶å€™ï¼Œå·¦è¾¹çš„å—å¯¹äºå³è¾¹ä¼šäº§ç”Ÿç­”æ¡ˆï¼Œå³è¾¹çš„å—å¯¹äºå·¦è¾¹ä¼šäº§ç”Ÿç­”æ¡ˆï¼Œ</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307241925497.webp"
                      alt="image.png"
                ></p>
<p>æŸ¥è¯¢çš„æ—¶å€™ï¼ˆä¸´æ—¶å˜é‡ansï¼‰ï¼š</p>
<p><code>ans+=l.A[x]*r.C[x]+r.B[x]*l.C[x]+l.C[x]*r.C[x]*(!l.r==r.l)</code></p>
<p><code>new.A=l.A+r.A*l.C</code></p>
<p>å¦‚æœé‡åˆ°å•ç‚¹ä¿®æ”¹ï¼Œé‚£ä¹ˆå°±é‡ç½®ä¸€ä¸‹å½“å‰å—ï¼Œå¤æ‚åº¦ä¸º<code>sqrt(n)</code>ï¼Œ</p>
<p>ä¸€å¼€å§‹éœ€è¦æŠŠæ¯ä¸ªå—æ‰«ä¸€éï¼ŒæŠŠæ¯ä¸ªA,B,C,Déƒ½é¢„å¤„ç†ä¸€éï¼Œè¿˜è¦é¢„å¤„ç†ä¸€ä¸ªåŒºé—´ä¸åŒè‰²å—æ•°çš„å‰ç¼€å’Œï¼Œå› ä¸ºä»è¿™ä¸ªç‚¹åˆ°ä¸Šä¸€ä¸ªç‚¹äº§ç”Ÿçš„ç­”æ¡ˆå³ä¸ºè¿™æ®µåŒºé—´å†…è‰²å—æ•°ï¼Œ$O(1)$æŸ¥è¯¢</p>
<h2 id="4-4092-ç»’ç»’é¸¹"><a href="#4-4092-ç»’ç»’é¸¹" class="headerlink" title="4.4092:Â ç»’ç»’é¸¹"></a>4.4092:Â ç»’ç»’é¸¹</h2><p><strong>æ ‘é“¾å‰–åˆ†ï¼ŒDFSåº</strong></p>
<p>æ ‘é“¾å‰–åˆ†ï¼š</p>
<p>dfsåºå¯ä»¥ä¿è¯å¯¹ä»»ä½•ä¸€ä¸ªç‚¹çš„å­æ ‘éƒ½æ˜¯åºåˆ—ä¸­çš„ä¸€æ®µåŒºé—´ã€‚</p>
<p>é‡å„¿å­ï¼šå­æ ‘å¤§å°æœ€å¤§çš„å„¿å­</p>
<p>é‡é“¾ä¸Šæ¯å–ä¸€ä¸ªåŒºé—´éƒ½æ˜¯åœ¨dfsåºä¸Šä¸€æ®µè¿ç»­çš„åŒºé—´</p>
<p>å¾€ä¸Šè·³ä¸€æ¬¡è½»è¾¹è‡³å°‘ä¼šç¿»å€</p>
<p>é‚£ä¹ˆè·¯å¾„æœ€å¤šå°±å¯ä»¥é€šè¿‡$log$ä¸ªåŒºé—´è¿æ¥èµ·æ¥</p>
<p>ç»´æŠ¤ä¸€ä¸‹å½“å‰ä½ç½®çš„iè¿˜è¦è·³å‡ æ­¥æ‰ä¼šè·³åˆ°é‡é“¾å¤´</p>
<p>ç”¨å°æ ¹å †ç»´æŠ¤fçš„æœ€å°å€¼ï¼Œå†å¼€ä¸ªå…¨å±€æ ‡è®°ã€‚</p>
<h2 id="ä¹ é¢˜"><a href="#ä¹ é¢˜" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h2><p><strong>DFSåº</strong></p>
<h1 id="Day2"><a href="#Day2" class="headerlink" title="Day2"></a>Day2</h1><h2 id="1"><a href="#1" class="headerlink" title="1."></a>1.</h2><p><strong>none</strong></p>
<hr>
<p>å¤ªç®€å•äº†æ²¡å•¥å¥½è¯´çš„</p>
<h2 id="2"><a href="#2" class="headerlink" title="2."></a>2.</h2><p><strong>DPï¼Œæ ‘çŠ¶æ•°ç»„</strong></p>
<p>æ±‚é•¿åº¦ä¸º$k+1$çš„æœ€é•¿ä¸Šå‡å­åºåˆ—çš„æ–¹æ¡ˆæ•°ã€‚</p>
<p>$f_i$ä»£è¡¨ä»¥$i$ä¸ºç»“å°¾çš„æœ€é•¿ä¸Šå‡å­åºåˆ—ï¼Œ</p>
<p>$i$çš„å€¼å¯ä»¥ç”±$j$çš„çŠ¶æ€è½¬ç§»è¿‡æ¥ã€‚</p>
<p>é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä»¤$f_{i,j}$è¡¨ç¤ºä»¥$i$ç»“å°¾é•¿åº¦ä¸º$j$çš„æœ€é•¿ä¸Šå‡å­åºåˆ—çš„æ–¹æ¡ˆæ•°ã€‚</p>
<p>é‚£ä¹ˆå¦‚æœä¸€ä¸ª$y$çš„ä½ç½®é•¿åº¦ä¸º$j$å¯ä»¥è¢«æ›´æ–°ï¼Œé‚£ä¹ˆå®ƒçš„ä¸Šä¸€ä¸ªä½ç½®$x$é•¿åº¦ä¸º$j-1$å¯ä»¥æ›´æ–°å®ƒï¼Œä¹Ÿå°±æ˜¯ç´¯åŠ ä¸Š$x$çš„ç­”æ¡ˆã€‚</p>
<p>å› æ­¤è¦æ›´æ–°éœ€è¦æ»¡è¶³çš„æ¡ä»¶æ˜¯$a[y]&gt;a[x]$ï¼Œæ›´æ–°ç»™$f_x$ çš„å€¼å°±æ˜¯æ‰€æœ‰æ»¡è¶³è¿™ä¸ªæ¡ä»¶çš„$y$çš„å’Œã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307251915829.webp"
                      alt="image.png"
                ></p>
<p>å³å›¾ä¸­æ‰€æœ‰çš„$x$çš„$f$å€¼éƒ½éœ€è¦ç´¯åŠ ã€‚</p>
<p>é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å¼€ä¸€ä¸ªäºŒå…ƒç»„æ¥ç»´æŠ¤è¿™ä¸ªå…³ç³»ï¼Œ</p>
<p>$(a_i,f_i)$</p>
<p>è¿™æ ·å…¶å®å°±æ˜¯åœ¨æ‰¾$a_i$å·¦è¾¹çš„æ‰€æœ‰çš„$f_j$çš„å’Œã€‚</p>
<p>æ€ä¹ˆä¿è¯$j&lt;i$ï¼Ÿ</p>
<p>æ˜¯ä»å‰å¾€åæ’å…¥çš„ã€‚</p>
<p>ç”¨æ ‘çŠ¶æ•°ç»„ä¼˜åŒ–åŒºé—´æ±‚å’Œé—®é¢˜ã€‚</p>
<p>ç”±äº$k&#x3D;11$ï¼Œå› æ­¤éœ€è¦å¼€$11$ä¸ªæ ‘çŠ¶æ•°ç»„æ¥ç»´æŠ¤è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>æ¯æ¬¡æ›´æ–°ç¬¬$j$å±‚æ—¶ï¼Œéœ€è¦è®¿é—®ç¬¬$j-1$å±‚æ ‘çŠ¶æ•°ç»„ã€‚</p>
<h2 id="3"><a href="#3" class="headerlink" title="3."></a>3.</h2><p><strong>æ ‘ä¸Šå€å¢ï¼Œæ ‘ä¸ŠåŒºé—´</strong></p>
<hr>
<p>$i$è¡¨ç¤ºæœ€åä¸€ä¸ªé€‰æ‹©çš„åŒºé—´çš„å³ç«¯ç‚¹ï¼Œ</p>
<p>$f_i$è¡¨ç¤ºæœ€å¤šèƒ½é€‰çš„åŒºé—´ï¼Œä¼˜å…ˆé€‰çŸ­çš„åŒºé—´ï¼Œ</p>
<p>å¯¹iè€Œè¨€ï¼Œæ‰¾åˆ°ä¸€ä¸ªæœ€å¤§çš„jä½¿å¾—åŒºé—´å’Œä¸º0ï¼Œå³å³ç«¯ç‚¹å’Œå·¦ç«¯ç‚¹å·¦è¾¹çš„å‰ç¼€å’Œç›¸åŒ</p>
<p>è®°å½•ä¸€ä¸ªlastä¸ºä¸Šæ¬¡å’Œiå‰ç½®å’Œç›¸åŒçš„ç‚¹çš„ä½ç½®ï¼Œ</p>
<p>iä¸€å®šä»j-1è½¬ç§»è¿‡æ¥ä¹ˆï¼Ÿ</p>
<p>ä¸ä¸€å®šï¼Œå› ä¸ºä¸Šä¸€æ®µä¸ä¸€å®šä»¥j-1ç»“å°¾</p>
<p>é‚£å°±æŠŠjä¹‹å‰çš„åŒºé—´çš„få€¼å–ä¸ªmaxæ¥æ›´æ–°$f_i$</p>
<p>$$f_i&#x3D;max(f_j)+1$$</p>
<p>é‚£ä¹ˆqæ¬¡è¯¢é—®å°±éœ€è¦é€šè¿‡æ•°æ®ç»“æ„æ¥ä¼˜åŒ–å¤æ‚åº¦</p>
<p>ä»¥æ¯ä¸ªiç»“å°¾çš„åŒºé—´æœ€å¤šåªæœ‰ä¸€ä¸ªæœ‰æ„ä¹‰ï¼Œå³æœ€å°çš„ï¼Œ</p>
<p>é‚£ä¹ˆæ€»å…±å°±æœ‰nä¸ªåŒºé—´æœ‰æ„ä¹‰ï¼Œå°†å®ƒé¢„å¤„ç†å‡ºæ¥ï¼Œç„¶åå»ºæ ‘</p>
<p>ä»¥iç»“å°¾çš„åŒºé—´forä¸€éå°±å¯ä»¥é€šè¿‡lastç»´æŠ¤æœ€å°çš„è¿™ä¸ªåŒºé—´</p>
<p>é€‰å®Œä¸€ä¸ªåŒºé—´åå°±å¯ä»¥é€‰å³ç«¯ç‚¹æœ€å°çš„åŒºé—´</p>
<p>æ‰€ä»¥è¯´é€‰å®Œä»¥åé€‰ä¸‹ä¸€ä¸ªåŒºé—´æ˜¯ä¸€ä¸ªå›ºå®šçš„è¿‡ç¨‹</p>
<p>é¢„å¤„ç†</p>
<p>è¿™æ ·å‡ºæ¥ä»¥åå°±æ˜¯ä¸€æ£µæ ‘</p>
<p>ç¬¬ä¸€ä¸ªçš„æ˜¯å·¦ç«¯ç‚¹å¤§äºlå³ç«¯ç‚¹æœ€å°çš„åŒºé—´</p>
<p>ç„¶åä¸€ç›´èµ°ç›´åˆ°è¶…å‡ºr</p>
<p>å€å¢æ±‚è§£å°±å¯ä»¥äº†</p>
<h2 id="T22526-Princess-Principal"><a href="#T22526-Princess-Principal" class="headerlink" title="T22526 Princess Principal"></a>T22526 Princess Principal</h2><p><strong>æ ‘ä¸Šå€å¢ï¼Œæ ‘ä¸ŠåŒºé—´</strong></p>
<hr>
<p>ä»å·¦ç«¯å¼€å§‹ä¸æ–­é€‰æœ€é•¿çš„åŒºé—´</p>
<p>ä»å·¦ç«¯ä¸æ–­è¿è¾¹</p>
<p>é‚£å°±ä»å·¦è¾¹å¼€å§‹ä¸æ–­è·³ï¼Œè¿™æ ·å°±å¯ä»¥å€å¢å¤„ç†äº†</p>
<h2 id="4"><a href="#4" class="headerlink" title="4."></a>4.</h2><p><strong>å¹³è¡¡æ ‘ï¼ŒåŒºé—´æ±‚å’Œ</strong></p>
<p>ä¸èƒ½æšä¸¾åŒºé—´</p>
<p>iä¸ºåˆ†ç•Œç‚¹</p>
<p>ä»¥iå¼€å§‹çš„å‰ç¼€å’Œä»¥iç»“æŸçš„åç¼€åŒºé—´</p>
<p>ä¸¤ä¸¤ç»„åˆæˆçš„åŒºé—´ï¼Œ</p>
<p>å·¦è¾¹å¯¹åº”æœ€å¤§å‰ç¼€ï¼Œ</p>
<p>å³è¾¹å¯¹åº”æœ€å¤§åç¼€ï¼Œ</p>
<p>åªéœ€è¦æŠŠå·¦è¾¹çš„æ‰€æœ‰æœ€å¤§å‰ç¼€å’Œå³è¾¹çš„æœ€å¤§åç¼€çš„å’Œä¹˜èµ·æ¥</p>
<p>æ±‚çš„æ—¶å€™å°±éœ€è¦ä»å‰å¾€åæšä¸¾ä¸€éï¼Œè¾¹æ±‚å‰ç¼€å’Œè¾¹å–max</p>
<p>ç»´æŠ¤ä¸€ä¸ªé›†åˆS</p>
<p>Sä¸­ï¼šç»´æŠ¤å½“å‰åŒºé—´é™¤å»æœ€å¤§å‰ç¼€çš„å’Œ</p>
<p>é‚£ä¹ˆè¿™ä¸ªä¸œè¥¿å¤§äº0å°±éœ€è¦æ›´æ–°</p>
<p>é‚£ä¹ˆiå˜ä¸ºi+1åï¼Œæ¯ä¸ªå…ƒç´ éƒ½$+&#x3D;a[i+1]$</p>
<p>ç¬¬äºŒä¸ªæ“ä½œï¼š</p>
<p>æ‰¾å‡ºæ‰€æœ‰xï¼Œy&gt;0</p>
<p>ä¿®æ”¹ä¸ºx+y,0</p>
<p>æ¯æ¬¡æ’å…¥åˆ™ä¿®æ”¹å…¨å±€æ ‡è®°</p>
<p>æ’å…¥çš„æ•°è¦å‡å»å½“å‰çš„tag</p>
<p>tagè¦åŠ ä¸Šå½“å‰æ’å…¥çš„æ•°</p>
<p>ä¸€å¼€å§‹å®ƒä»¬çš„æœ€å¤§å‰ç¼€æ˜¯ä¸ä¸€æ ·çš„</p>
<p>åªè¦åç¼€è¢«æ›´æ–°ä¸€æ¬¡ï¼Œé‚£ä¹ˆå°±ä¸ä¼šå†ä¸åŒï¼Œé‚£ä¹ˆå°±å¯ä»¥åˆå¹¶åŒºé—´</p>
<p>åˆå¹¶ä»¥åyçš„å’Œå°±å¯ä»¥çŸ¥é“äº†ï¼Œ</p>
<p>å…¶å®å°±å¼€ä¸€ä¸ªä¸´æ—¶å˜é‡ï¼Œç„¶åæ‰«çš„è¿‡ç¨‹ä¸­æŠŠæœ€å¤§å‰ç¼€å’Œçš„æ€»å’Œè®°å½•ä¸‹æ¥å°±å¯ä»¥äº†</p>
<p>è®°å½•ä¸€ä¸‹å·²ç»åˆå¹¶çš„åŒºé—´çš„æ•°é‡</p>
<p>è¿™æ ·æ­£ç€æ‰«ä¸€éï¼Œå€’ç€æ‰«ä¸€éï¼Œç„¶åä¸¤ä¸ªä¹˜èµ·æ¥å°±å¯ä»¥äº†</p>
<h2 id="P2344"><a href="#P2344" class="headerlink" title="P2344"></a>P2344</h2><p><strong>æ ‘çŠ¶æ•°ç»„ï¼ŒDP</strong></p>
<p>è®¾$f_i$è¡¨ç¤º$1$åˆ°$i$çš„å‰ç¼€åˆ’åˆ†æˆè‹¥å¹²ä¸ªå­åŒºé—´ä½¿å®ƒ$\ge0$</p>
<p>å‰é¢æœ‰ä¸ª$j$ä½¿å¾—$f_j\ge0$</p>
<p>ä¹Ÿå°±æ˜¯$pre_i-pre_{j-1}\ge{0}$</p>
<p>$pre_{j-1}\le{pre_i}$</p>
<p>çš„$f_{j-1}$çš„å’Œã€‚</p>
<p>é‚£å°±å’Œä¸Šé¢T2ç±»ä¼¼äº†ï¼Œæ ‘çŠ¶æ•°ç»„ç»´æŠ¤ä¸€ä¸ªäºŒå…ƒç»„$(pre_{i},f_{i})$æ±‚æ»¡è¶³ä¸Šè¿°æ¡ä»¶çš„$f_{j-1}$çš„å’Œã€‚</p>
<h2 id="P1725"><a href="#P1725" class="headerlink" title="P1725"></a>P1725</h2><p><strong>DP+å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–</strong></p>
<h2 id="P3572"><a href="#P3572" class="headerlink" title="P3572"></a>P3572</h2><p>é£åˆ°iæœ€å°çš„ä»£ä»·ä¸º$f_i$</p>
<p>ä¸€ä¸ªç‚¹å¯ä»¥åˆ°ä¸€ä¸ªåŒºé—´</p>
<p>æˆ‘ä»¬å€’è¿‡æ¥ï¼Œå…¶å®å°±æ˜¯ä»ä¸€ä¸ªåŒºé—´ä¸­é£è¿‡æ¥</p>
<p>å¯ä»¥ç”¨å•è°ƒé˜Ÿåˆ—ç»´æŠ¤dpæœ€å°å€¼</p>
<p>ä»¥dpå€¼æœ€å°ä¸ºç¬¬ä¸€å…³é”®å­—ï¼Œæ ‘çš„é«˜åº¦æœ€å¤§ä¸ºç¬¬äºŒå…³é”®å­—ï¼Œç»´æŠ¤è¿™æ ·ä¸€ä¸ª</p>
<p>å‡å¦‚dpå€¼ä¸€æ ·ï¼Œé‚£ä¹ˆé«˜åº¦è¶Šé«˜è¶Šä¼˜</p>
<p>å‡å¦‚dpå€¼ä¸åŒï¼Œé‚£ä¹ˆdpå€¼è¶Šå°è¶Šä¼˜ï¼ˆç›¸å¯¹äºnçš„dpå€¼ï¼‰</p>
<h2 id="P5658"><a href="#P5658" class="headerlink" title="P5658"></a>P5658</h2><p><strong>æ ‘</strong></p>
<p>$f_i$ä»£è¡¨ä»iåˆ°æ ¹æœ‰å¤šå°‘åˆæ³•çš„å­ä¸²</p>
<p>æ˜¯ç”±å®ƒçˆ¶äº²è½¬ç§»æ¥çš„</p>
<p>æ¯”å®ƒçˆ¶äº²å°±å¤šäº†ä¸ªç‚¹ï¼Œä¹Ÿå°±æ˜¯å¤šå‡ºäº†æ‰€æœ‰ä»¥iä¸ºç»“æŸç‚¹çš„å­åŒºé—´</p>
<p>$g_i$ä»£è¡¨ä»¥iç»“å°¾çš„åˆ°æ ¹çš„åˆæ³•åŒºé—´çš„ä¸ªæ•°ã€‚</p>
<p>å‡å¦‚æ˜¯ï¼ˆï¼Œé‚£ä¹ˆå°±æ˜¯0</p>
<p>å‡å¦‚æ˜¯ï¼‰</p>
<p>å‡å¦‚jå’Œiè¿™æ®µåŒºé—´æ„æˆåŒ¹é…çš„æ‹¬å·ä¸²</p>
<p>$g_i$&#x3D;$g_{j-1}+1$</p>
<p>é‚£ä¹ˆæˆ‘ä»¬içš„dpå€¼å°±ç­‰äºjçˆ¶äº²çš„dpå€¼+1</p>
<p>æˆ‘ä»¬è¦ç»´æŠ¤ä¸€ä¸ªæ ˆä½¿å¾—å®ƒdfsçš„æ—¶å€™å’Œå›æº¯çš„æ—¶å€™çš„çŠ¶æ€ç›¸åŒ</p>
<p>å› ä¸ºåŒ¹é…çš„æ—¶å€™æˆ‘ä»¬ä¼šå¼¹å‡ºä¸¤ä¸ªæ‹¬å·ï¼Œä¼šå¯¼è‡´å¤šå¼¹å‡ºï¼Œéœ€è¦è®°å½•ï¼Œå›æº¯çš„æ—¶å€™å†æ’å…¥</p>
<h1 id="Day3"><a href="#Day3" class="headerlink" title="Day3"></a>Day3</h1><h2 id="1-å¼€å…³"><a href="#1-å¼€å…³" class="headerlink" title="1.å¼€å…³"></a>1.å¼€å…³</h2><p><strong>BFSå¹¿æœ</strong></p>
<p>$s^{16}\times{16}$</p>
<h2 id="2-1"><a href="#2-1" class="headerlink" title="2."></a>2.</h2><p><strong>æœ€å°ç”Ÿæˆæ ‘</strong></p>
<hr>
<p>ä¸éœ€è¦é€‰å‡ºæ¥$sum$</p>
<p>åŠ çš„æ—¶å€™æ³¨æ„ä¸€ä¸‹æœ‰æ²¡æœ‰è¶…è¿‡xå°±å¯ä»¥äº†</p>
<p>ä¸éœ€è¦ç®—å‡ºæ¥ï¼Œ</p>
<h2 id="3-1"><a href="#3-1" class="headerlink" title="3."></a>3.</h2><p><strong>æœ€çŸ­è·¯</strong></p>
<h2 id="4-1"><a href="#4-1" class="headerlink" title="4."></a>4.</h2><p><strong>åŒˆç‰™åˆ©ç®—æ³•</strong></p>
<hr>
<p>ç‚¹æƒä»å¤§åˆ°å°æ’åº</p>
<p>è´ªå¿ƒé€‰</p>
<h2 id="å…¶å®ƒ"><a href="#å…¶å®ƒ" class="headerlink" title="å…¶å®ƒ"></a>å…¶å®ƒ</h2><p>æ–°çŸ©é˜µä¹˜æ³•</p>
<p>$C_{i,j}&#x3D;A^k$</p>
<p>å…¶å®å°±æ˜¯é™åˆ¶äº†è¾¹æ•°çš„Floyedï¼Œkä¸ºè¾¹æ•°</p>
<p>$C_{i,j}&#x3D;\min(A_{i,k}+B_{k,j})$</p>
<p>ä»¤ç‚¹åŒä¸ºæ–¹ç‚¹ï¼Œå…¶ä»–ä¸ºåœ†ç‚¹ï¼Œç„¶ååœ¨å®ƒä»¬ä¹‹é—´è¿è¾¹ï¼Œé‚£ä¹ˆæœ€ç»ˆå¾—åˆ°çš„ä¸€å®šæ˜¯ä¸ªæ ‘</p>
<hr>
<h2 id="æˆ‘çš„æ‹“æ‰‘"><a href="#æˆ‘çš„æ‹“æ‰‘" class="headerlink" title="æˆ‘çš„æ‹“æ‰‘"></a>æˆ‘çš„æ‹“æ‰‘</h2><p>ç¼©ç‚¹</p>
<p>ç‚¹åŒ è¾¹åŒ </p>
<p>æ ‘ä¸Šå·®åˆ†</p>
<p>åœ†æ–¹æ ‘</p>
<p>å“ˆå¯†é¡¿è·¯</p>
<p>ç«èµ›å›¾</p>
<p>DP</p>
<p>DAGDP</p>
<h1 id="Day4"><a href="#Day4" class="headerlink" title="Day4"></a>Day4</h1><h2 id="1-1"><a href="#1-1" class="headerlink" title="1."></a>1.</h2><p>DFS</p>
<h2 id="2-2"><a href="#2-2" class="headerlink" title="2."></a>2.</h2><p>é¡ºç€è¾¹ ç‚¹ç¼–å·æ˜¯é€’å‡çš„</p>
<p>ä»ç‚¹iå³è¾¹è·³åˆ°iå·ç‚¹çš„æ¦‚ç‡æ°¸è¿œæ˜¯$\frac{1}{i}$ï¼Œæ‰€ä»¥åœ¨æ‰€æœ‰ç‚¹ä¸­ç—…æ¯’çš„æƒ…å†µä¸‹ï¼Œè®©ä»–ä»¬æ’æˆä¸€æ¡é“¾çš„æ¦‚ç‡å°±æ˜¯</p>
<p>ç»™å®šä¸€ä¸ª$1\sim{n}$çš„å­é›†$S$ï¼Œè¯¢é—®è‹¥$i$çš„çˆ¶äº²åœ¨$[1,i-1]$ä¸­ç­‰æ¦‚ç‡ç”Ÿæˆï¼Œé‚£ä¹ˆä»æœ€åä¸€ä¸ªç‚¹åˆ°ä¸€å·ç‚¹ç»è¿‡æ‰€æœ‰$S$ä¸­çš„èŠ‚ç‚¹çš„æ¦‚ç‡ï¼Œç­”æ¡ˆå¯¹$998244353$å–æ¨¡ã€‚</p>
<p>é¦–å…ˆï¼Œ$i+1$åˆ°$i$çš„æ¦‚ç‡æ˜¯$\frac{1}{i}$ï¼Œ$i+1$çš„çˆ¶äº²æ˜¯$i$çš„æ¦‚ç‡æ˜¯$\frac{1}{i}$ï¼›</p>
<p>$i+2$åˆ°$i$çš„æ¦‚ç‡æ˜¯ç›´æ¥è·³åˆ°$i$çš„æ¦‚ç‡åŠ ä¸Šå…ˆè·³åˆ°$i+1$å†è·³åˆ°$i$ï¼Œä¹Ÿå°±æ˜¯ $\frac{1}{i+1}+\frac{1}{i+1}\times{\frac{1}{i}}&#x3D;\frac{1}{i}$ï¼Œé€šè¿‡æ•°å­¦å½’çº³æ³•å¾—çŸ¥ï¼Œ$i$å³è¾¹çš„ç‚¹è·³åˆ°$i$çš„æ¦‚ç‡éƒ½æ˜¯$\frac{1}{i}$ã€‚</p>
<p>ç”±äºæ¯æ¬¡è·³è¿™äº›æ—¶é—´æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œæ‰€ä»¥åŸé¢˜ç­”æ¡ˆä¸ºï¼š</p>
<p>$$\prod_{i&#x3D;1}^{m-1}{\frac{1}{x_i}}$$</p>
<p>æœ€åä¸€ä¸ªåˆ†æ•°å–æ¨¡ä¸è¦å¿˜äº†æ±‚é€†å…ƒã€‚</p>
<h2 id="3-2"><a href="#3-2" class="headerlink" title="3."></a>3.</h2><p>é¢˜æ„ï¼šå¯¹äºä¸€ä¸ªæ— å‘å›¾ï¼Œè®©ä½ ç»™å®šæ¯æ¡è¾¹æ–¹å‘ï¼Œä½¿å¾—æ¯ä¸ªèŠ‚ç‚¹çš„å…¥åº¦ä¸ºå¶æ•°ã€‚</p>
<p>é¦–å…ˆï¼Œå£«å…µäººæ•°ä¸€å®šè¦æ˜¯å¶æ•°ï¼Œå¦åˆ™ä¸ç®¡æ€ä¹ˆåˆ†é…ä¹Ÿä¸€å®šæ— æ³•åˆ†å…¨ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¾¹çš„æ•°é‡ä¸ºå¶æ•°ã€‚</p>
<p>å¯¹äºä¸€é¢—æ ‘ï¼Œå¶å­èŠ‚ç‚¹æ˜¯ç»å¯¹ä¸èƒ½å»çš„ï¼Œå› ä¸ºè¿™æ ·ä¸å¯èƒ½æ˜¯å¶æ•°ã€‚é‚£å°±ä»å¶å­èŠ‚ç‚¹å¼€å§‹ï¼Œå£«å…µå‘ä¸Šèµ°ï¼Œå¦‚æœå½“å‰ç‚¹å£«å…µæ•°æ˜¯å¥‡æ•°ï¼Œé‚£å°±è®©å®ƒä¸Šé¢çš„è¾¹çš„å£«å…µå‘ä¸‹èµ°åˆ°è¿™ä¸ªç‚¹ï¼Œå¦åˆ™å°±å‘ä¸Šèµ°ã€‚</p>
<p>è¿™æ ·å°±å¯ä»¥ç»´æŠ¤æ‰€æœ‰éæ ¹çš„ç‚¹çš„å£«å…µæ•°éƒ½ä¸ºå¶æ•°ï¼Œç”±äºå£«å…µæ€»æ•°ä¸ºå¶æ•°ï¼Œé‚£ä¹ˆæ ¹èŠ‚ç‚¹æœ€åä¹Ÿä¸€å®šæ˜¯å¶æ•°ã€‚</p>
<p>ä½†æ˜¯è¿™æ ·ä¸€å¼ æ— å‘å›¾ä¸ä¸€å®šæ˜¯æ ‘ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å»ºä¸€é¢— DFS æ ‘ï¼Œæ— å‘å›¾ä¸­ï¼Œ DFS ç”Ÿæˆæ ‘ä»…å­˜åœ¨æ ‘è¾¹å’Œå›è¾¹ï¼Œæ‰€ä»¥å¯¹äºæ¯ä¸ªå›è¾¹ï¼Œæˆ‘ä»¬è®©å®ƒå›åˆ°æ·±åº¦æ›´å¤§çš„ç‚¹ï¼Œå‰©ä¸‹çš„å°±å’Œæ ‘ä¸Šæ˜¯ä¸€æ¨¡ä¸€æ ·çš„äº†ã€‚</p>
<h2 id="4-2"><a href="#4-2" class="headerlink" title="4."></a>4.</h2><p>æœ‰ä¸€äº›ä»å³å‘å·¦æ‰«çš„æ¿€å…‰ç‚®ï¼Œå‡å¦‚æ‰“åˆ°äº†é˜²æŠ¤ç½©ï¼Œé‚£ä¹ˆè¿™ä¸ªæ¿€å…‰ç‚®å°±ä¼šå¤±æ•ˆã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307272301332.webp"
                      alt="image.png"
                ></p>
<p>å¯¹äºç¬¬$i$ä¸ªè®¾å¤‡ï¼Œæˆ‘ä»¬å®šä¹‰$r_i&#x3D;\min_{i\in{[l_j,r_j]}}(r_j)$ï¼Œä¹Ÿå°±æ˜¯èƒ½æ‰“åˆ°ç¬¬$i$å·ç‚¹çš„æ¿€å…‰ç‚®ä¸­å³ç«¯ç‚¹æœ€å°çš„$r$ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨è¿™é‡Œæ”¾ä¸€ä¸ªé˜²æŠ¤ç½©å°±ä¸€å®šå¯ä»¥ä¿æŠ¤$i$ä¸å—æ”»å‡»ã€‚</p>
<p>è€Œåœ¨$[i,r_i]$ä¸­é€‰å–ä¸€ä¸ª$j$ï¼Œé‚£ä¹ˆ$r_j\le{r_i}$ï¼Œè¿™æ˜¯å› ä¸º$r_i$æ˜¯ä¸€å®šè¦†ç›–$j$çš„ï¼Œè‹¥æ²¡æœ‰æ¯”è¿™ä¸ªè¿˜å°çš„$r_j$ï¼Œé‚£ä¹ˆ$r_j&#x3D;r_i$ï¼Œå¦åˆ™$r_j$å°±ä¼šæ¯”$r_i$æ›´å°ã€‚</p>
<p>è€Œå¯¹äº$j&gt;r_i$ï¼Œé‚£ä¹ˆ$r_j&gt;r_i$ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å¾—å‡ºï¼šæ‰€æœ‰çš„åŒºé—´è¦ä¹ˆäº’ç›¸åŒ…å«ï¼Œè¦ä¹ˆæ— äº¤ï¼Œæ‰€ä»¥å°±å¯ä»¥æ ¹æ®è¿™æ ·çš„å…³ç³»å»ºä¸€é¢—æ ‘ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307272310020.webp"
                      alt="image.png"
                ></p>
<p>åœ¨æ ‘ä¸Šè¿›è¡Œä»¥ç‚¹æƒå’Œä¸ºæ ‡å‡†çš„é•¿é“¾å‰–åˆ†ï¼Œå‡å¦‚ä¸€æ¡è·¯å¾„ä¸Šæ”¾äº†ä¸€ä¸ªé˜²æŠ¤ç½©ï¼Œé‚£ä¹ˆè¿™æ¡è·¯å¾„å°±æ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºè£…ç½®åœ¨åŒºé—´çš„æœ€å·¦ç«¯ï¼Œè¿™æ ·æ¯æ¬¡è´ªå¿ƒåœ°é€‰$k$ä¸ªé•¿é“¾å°±å¯ä»¥ä½¿ä¿æŠ¤çš„æƒå€¼å’Œæœ€å¤§ï¼Œä»è€Œä½¿ç ´åçš„æƒå€¼å’Œæœ€å°ã€‚</p>
<h2 id="æ ‘ä¸Šå·®åˆ†"><a href="#æ ‘ä¸Šå·®åˆ†" class="headerlink" title="æ ‘ä¸Šå·®åˆ†"></a>æ ‘ä¸Šå·®åˆ†</h2><p>ä¸€æ¡è·¯å¾„ï¼Œå¯¹äºå¶å­èŠ‚ç‚¹+1ï¼Œç»ˆç‚¹çš„çˆ¶äº²èŠ‚ç‚¹-1ï¼Œæ±‚å’Œåªéœ€è¦æ±‚ç»ˆç‚¹çš„å­æ ‘å’Œå°±å¯ä»¥äº†ã€‚</p>
<h2 id="LCAå°æŠ€å·§"><a href="#LCAå°æŠ€å·§" class="headerlink" title="LCAå°æŠ€å·§"></a>LCAå°æŠ€å·§</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307271624631.webp"
                      alt="image.png"
                ></p>
<p>æ¯”å¦‚è¦æ±‚é»‘è‰²ç‚¹$u$å’Œç²‰è‰²ç‚¹$v$çš„$lca$çš„æ·±åº¦ï¼Œé‚£ä¹ˆå°±å¯ä»¥æŠŠä»$u$åˆ°æ ¹çš„è·¯å¾„ä¸Šçš„ç‚¹æƒéƒ½åŠ ä¸€ï¼Œç„¶åæ±‚$v$åˆ°æ ¹çš„è·¯å¾„ä¸Šç‚¹æƒçš„å’Œã€‚ï¼ˆåˆå§‹ç‚¹æƒéƒ½æ˜¯0ï¼‰</p>
<p>é‚£ä¹ˆå¯¹äº$\sum_{i\in{S}}dep_{lca(i,z)}$ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¯æ¬¡æŠŠ$i$åˆ°æ ¹è·¯å¾„ä¸Šçš„èŠ‚ç‚¹ç‚¹æƒåŠ ä¸€ï¼Œæœ€åç»Ÿè®¡$z$åˆ°æ ¹èŠ‚ç‚¹è·¯å¾„ç‚¹æƒå’Œï¼Œè¿™æ ·å°±å¯ä»¥æŠŠæ‰€æœ‰$lca$çš„æ·±åº¦å’Œæ±‚è§£å‡ºæ¥ã€‚</p>
<p>è€Œå¯¹äº$\sum_{i&#x3D;l}^r{dep_{lca(i,z)}}$å°±å¯ä»¥é€šè¿‡å‰ç¼€å’Œ$\sum_{i&#x3D;1}^{r}dep_{lca{(i,z)}}-\sum_{i&#x3D;1}^{l-1}dep_{lca_{(i,z)}}$æ±‚è§£ã€‚</p>
<h2 id="é•¿é“¾å‰–åˆ†"><a href="#é•¿é“¾å‰–åˆ†" class="headerlink" title="é•¿é“¾å‰–åˆ†"></a>é•¿é“¾å‰–åˆ†</h2><p>é•¿è¾¹ç»„æˆé•¿é“¾ï¼Œ</p>
<p>è‡³å°‘èƒ½æŸ¥$len$çº§ç¥–å…ˆï¼Œ$len$ä¸ºè¯¥é•¿é“¾é•¿åº¦ï¼Œ</p>
<p>ä¸€ä¸ªé•¿é“¾è‚¯å®šèƒ½è·³åˆ°ä¸‹ä¸€ä¸ªé•¿åº¦å’Œå®ƒç›¸åŒçš„<strong>ä¸‹ä¸€æ®µé•¿é“¾</strong>ã€‚</p>
<p>é‚£ä¹ˆå‡å¦‚$k\le{len}$é‚£ä¹ˆå°±å¯ä»¥å¾ˆè½»æ˜“åœ°æŸ¥è¯¢$k$çº§ç¥–å…ˆï¼Œ</p>
<p>ç±»ä¼¼STçš„é¢„å¤„ç†ï¼Œæˆ‘ä»¬ä»¤$p&#x3D;\lfloor{log_j}\rfloor$ï¼Œé‚£ä¹ˆæˆ‘ä»¬å…ˆè·³$2^p$æ­¥ï¼Œå†è·³$k-w^p$æ­¥ï¼Œé‚£ä¹ˆå°±å¯ä»¥è·³åˆ°äº†ã€‚</p>
<p>å‡å¦‚ç¬¬äºŒæ¬¡è·³å‡ºäº†å½“å‰çš„é•¿é“¾ï¼Œæ²¡å…³ç³»ï¼Œè¿˜å¯ä»¥è·³åˆ°ä¸‹ä¸€æ¡é•¿åº¦åŒæ ·ä¸º$len$çš„é•¿é“¾çš„æ®µï¼Œè¿™æ ·å°±å¯ä»¥æŸ¥åˆ°äº†ã€‚</p>
<h2 id="æ ‘çš„é‡å¿ƒ"><a href="#æ ‘çš„é‡å¿ƒ" class="headerlink" title="æ ‘çš„é‡å¿ƒ"></a>æ ‘çš„é‡å¿ƒ</h2><p>æ‰€æœ‰ç‚¹åˆ°è¿™ä¸ªç‚¹çš„è·ç¦»ä¹‹å’Œæœ€å°ï¼Œé‚£ä¹ˆè¿™ä¸ªç‚¹å°±æ˜¯é‡å¿ƒã€‚</p>
<p>æ ‘çš„é‡å¿ƒå°±æ˜¯ä»ä¸Šå¾€ä¸‹éå†æ‰¾åˆ°çš„æœ€æ·±çš„æ»¡è¶³å­æ ‘ç‚¹æƒå’Œ$\ge{\frac{\sum_{i}d_i}{2}}$çš„ç‚¹ã€‚</p>
<p>é‚£æˆ‘ä»¬æŠŠè¿™æ£µæ ‘ç»™åºåˆ—åŒ–ï¼Œæšä¸¾å®ƒçš„å‰ç¼€åŒºé—´ï¼Œç›´åˆ°æ‰¾åˆ°ç¬¬ä¸€ä¸ªå³ç«¯ç‚¹$r$ä½¿å¾—$\sum[1,r]\ge{\frac{\sum_{i}d_i}{2}}$ï¼Œé‚£ä¹ˆç°åœ¨å°±æœ‰ä¸¤ç§æƒ…å†µï¼Œç¬¬ä¸€ç§å°±æ˜¯è¿™ä¸ªç‚¹åœ¨é‡å¿ƒçš„å­æ ‘ä¸­ï¼Œç¬¬äºŒç§æ˜¯å®ƒä¸åœ¨é‡å¿ƒçš„å­æ ‘ä¸­ã€‚å‡å¦‚å®ƒä¸åœ¨é‡å¿ƒçš„å­æ ‘ä¸­ï¼Œé‚£ä¹ˆä¸­å¿ƒçš„å­æ ‘è¦ä¹ˆåœ¨å·¦è¾¹çš„åŒºé—´ï¼Œä½†æ˜¾ç„¶ä¸å¯èƒ½ï¼Œå› ä¸ºåœ¨$r$ä¹‹å‰çš„åŒºé—´éƒ½ä¸æ»¡è¶³$\ge{\frac{\sum_{i}d_i}{2}}$çš„æ¡ä»¶ï¼Œé‚£å°±åªå¯èƒ½æ˜¯åœ¨åé¢çš„åŒºé—´ï¼Œåé¢çš„åŒºé—´é‚£å°±ä»ä¸€ä¸ªéé›¶çš„ç‚¹å¼€å§‹æ‰¾äº†ï¼Œå¦åˆ™å°±æ‰¾åˆšæ‰åŠ å…¥çš„æœ€åä¸€ä¸ªç‚¹ï¼ˆå³æ»¡è¶³æ¡ä»¶çš„æœ€å°çš„$r$ï¼‰ã€‚</p>
<h1 id="Day5"><a href="#Day5" class="headerlink" title="Day5"></a>Day5</h1><h2 id="1-2"><a href="#1-2" class="headerlink" title="1."></a>1.</h2><p>ä»¤$f_{i,j,k,0&#x2F;1}$è¡¨ç¤ºèµ°åˆ°$(i,j)$å¼‚æˆ–å’Œä¸º$k$ä¸”è¿˜å‰©$0&#x2F;1$é¢—çç çš„æ–¹æ¡ˆæ•°ã€‚</p>
<p>é€’æ¨å¼ä¸ºï¼š</p>
<p>$$<br>f_{i,j,k,0}&#x3D;f_{i-1,j,k,1}+f_{i,j-1,k,1}+f_{i-1,j,k\oplus{a_{i,j}},0}+f_{i,j-1,{k\oplus{a_{i,j}}},0}<br>$$</p>
<p>$$<br>f_{i,j,k,1}&#x3D;f_{i-1,j,{k\oplus{a_{i,j}}},1}+f_{i,j-1,{k\oplus{a_{i,j}}},1}<br>$$</p>
<p>æœ€åç­”æ¡ˆå°±æ˜¯$\sum_{k&#x3D;1}^{127}f_{n,m,k,0}\times{k}$ã€‚</p>
<h2 id="2-3"><a href="#2-3" class="headerlink" title="2."></a>2.</h2><p>å®šä¹‰$f_i$æ˜¯ä»ä»¥$i$ä¸ºæ ¹çš„å­æ ‘ä¸­é€‰å‡ºå•è°ƒé€’å‡çš„è·¯å¾„çš„æ–¹æ¡ˆæ•°ï¼Œ$g_i$æ˜¯ä»ä»¥$i$ä¸ºæ ¹çš„å­æ ‘ä¸­é€‰å‡ºå•è°ƒé€’å¢çš„è·¯å¾„çš„æ–¹æ¡ˆæ•°ã€‚</p>
<p>å¯¹äºæ¯ä¸ªèŠ‚ç‚¹ä¸€å¼€å§‹$f,g$å€¼éƒ½ä¸º$1$ï¼Œå› ä¸ºå®ƒä»¬è¿˜æ²¡æœ‰å‡å¦‚ä»»ä½•å…¶å®ƒèŠ‚ç‚¹ï¼Œåªèƒ½é€‰è‡ªå·±çš„æ–¹æ¡ˆæ•°ä¸º$1$ã€‚ç„¶åå¼€å§‹$dfs$ï¼Œåœ¨å›æº¯çš„æ—¶å€™å¤„ç†$f_i+&#x3D;\sum_{i&gt;k}f_k,g_i+&#x3D;\sum_{i&lt;k}g_k$ï¼Œ$k$åœ¨$i$çš„å­æ ‘å†…ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307282200291.webp"
                      alt="image.png"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307282222439.webp"
                      alt="image.png"
                ></p>
<p>é€’å½’çš„æ—¶å€™é€‰å–ä¸€ä¸ªç‚¹ä½œä¸ºè¦é€‰çš„ä¸¤ä¸ªç‚¹çš„ LCA ï¼Œç„¶åé€‰å–ç¦»è¿™ä¸ªç‚¹æœ€è¿‘çš„ä¸¤ä¸ªç‚¹è®¾ä¸º$x,y$ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦é¦–å…ˆåˆå¹¶$x$å’Œ$lca$ï¼Œä¹Ÿå°±æ˜¯æ›´æ–°$lca$çš„ä¿¡æ¯ï¼ˆ$f,g$ï¼‰ï¼Œç„¶ååˆå¹¶å®Œä¹‹åè¿™å°±æ˜¯ä¸€ä¸ªæ–°çš„é›†åˆï¼Œé‚£ä¹ˆå°±å¯ä»¥æŠŠå®ƒå’Œä»¥$y$ä¸ºæ ¹çš„å­æ ‘è¿›è¡Œåˆå¹¶ï¼Œåˆå¹¶çš„æ—¶å€™åˆ†åˆ«æšä¸¾ä¸¤ä¸ªé›†åˆä¸­çš„ç‚¹$i,j$ï¼Œå‡å¦‚$i&lt;j$ï¼Œé‚£ä¹ˆç­”æ¡ˆç´¯åŠ å°±æ˜¯$ans+&#x3D;f_x\times{g_y}$ï¼Œå› ä¸ºæ˜¯$i\to{j}$çš„ä¸€æ¡è·¯å¾„ï¼Œæ‰€ä»¥$i$åˆ°$x$æ˜¯å•è°ƒé€’å‡çš„ã€‚ç›¸ååœ°ï¼Œå¦‚æœ$i&gt;j$ï¼Œé‚£ä¹ˆå°±æ˜¯$ans+&#x3D;f_y\times{g_x}$ã€‚</p>
<p>å…ˆåˆå¹¶ lca å’Œå®ƒçš„ç¬¬ä¸€ä¸ªå­æ ‘ï¼Œä¹Ÿå°±æ˜¯ç›®å‰çŸ¥é“$1$å­æ ‘çš„ä¿¡æ¯ä»¥åŠæ ¹èŠ‚ç‚¹$0$<strong>å½“å‰çš„</strong>ä¿¡æ¯ï¼Œå¾ˆæ˜¾ç„¶$1$æ²¡æœ‰å…¶å®ƒå­æ ‘ï¼Œå®ƒçš„ä¿¡æ¯ä¸ä¼šå†è¢«æ›´æ–°ï¼Œè€Œ$0$è¿˜æ˜¯æœ‰å…¶å®ƒå­æ ‘çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒçš„$f,g$ä»…é™äºå½“å‰éå†åˆ°çš„å­æ ‘ï¼Œå³$1$ã€‚</p>
<p>é‚£ä¹ˆæˆ‘ä»¬å†æšä¸¾å…¶å®ƒå­æ ‘ï¼Œå®é™…ä¸Šå°±æ˜¯ä¸æ–­åˆå¹¶è¿é€šå—æ›´æ–°ä¿¡æ¯çš„åŒæ—¶å¹¶ç´¯åŠ ç­”æ¡ˆã€‚</p>
<p>è¿™æ ·å…¨éƒ¨åˆå¹¶å®Œåï¼Œ$ans$å°±æ˜¯ç­”æ¡ˆã€‚</p>
<h2 id="3-3"><a href="#3-3" class="headerlink" title="3."></a>3.</h2><p><strong>æ•°ä½ DP</strong></p>
<hr>
<p>é¦–å…ˆé¢˜æ„æ˜¯è®©ä½ æ‰¾å‡ºæ‰€æœ‰çš„åºåˆ—ï¼Œè¿™ä¸ªåºåˆ—æ»¡è¶³é•¿åº¦ä¸º$n$åºåˆ—å’Œç­‰äº$m$ï¼Œåºåˆ—ä¸­çš„æ¯ä¸ªæ•°éƒ½æ»¡è¶³$\in{[0,m]}$çš„èŒƒå›´ï¼Œè¯¥åºåˆ—çš„ä»·å€¼ä¸ºè¯¥åºåˆ—ä¸­æ‰€æœ‰çš„æ•°çš„å¼‚æˆ–å’Œï¼Œç­”æ¡ˆæ˜¯æ‰€æœ‰æƒ…å†µçš„å¼‚æˆ–å’Œçš„æ±‚å’Œ$\pmod{1e9+9}$ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥æ¥çœ‹åºåˆ—ä¸­$n$ä¸ªæ•°å’Œ$m$çš„äºŒè¿›åˆ¶è¡¨ç¤ºï¼Œå®šä¹‰$f_{i,j}$ä¸ºè€ƒè™‘å®Œå‰$i$ä½ï¼Œä¸”ç¬¬$i$ä½çš„å’Œç­‰äº$m$çš„è¿™ä¸€ä½ï¼Œä¸‹ä¸€ä½è¿›ä½ä¸º$j$çš„æ–¹æ¡ˆæ•°ï¼Œ$g_{i,j}$è¡¨ç¤ºè€ƒè™‘å®Œå‰$i$ä½ï¼Œä¸”ç¬¬$i$ä½çš„å’Œç­‰äº$m$çš„è¿™ä¸€ä½ï¼Œä¸‹ä¸€ä½è¿›ä½ä½$j$çš„æ‰€æœ‰æ–¹æ¡ˆå¼‚æˆ–å’Œçš„æ±‚å’Œã€‚</p>
<p>å› ä¸ºæˆ‘ä»¬è¦ä¿è¯åºåˆ—å’Œä¸º$m$ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ä¿è¯äºŒè¿›åˆ¶ä¸‹æ¯ä¸€ä½åŠ èµ·æ¥éƒ½ç­‰äº$m$çš„è¿™ä¸€ä½ã€‚</p>
<p>ç„¶åæˆ‘ä»¬æšä¸¾ä¸€ä¸ª$k$ä»£è¡¨ç¬¬$i$ä½æˆ‘è¦åœ¨$1\sim{n}$ä¸­å¡«å¤šå°‘ä¸ª1ã€‚</p>
<p>é‚£ä¹ˆ$f_{i+1,{\lfloor\frac{j+k}{2}}\rfloor}&#x3D;f_{i,j}\times{C(^{n}_{k})}$ï¼Œå…¶ä¸­$C$ä¸ºç»„åˆæ•°ï¼Œæ„ä¸ºåŸæ¥çš„æ–¹æ¡ˆæ•°ï¼Œåœ¨$i$è¿™ä½åˆäº§ç”Ÿäº†$C(^{n}{k})$ç§å¯èƒ½ï¼Œç”±äºç›¸äº’ç‹¬ç«‹æ€§ï¼Œå› æ­¤ä¸‹ä¸€ä½çš„æ–¹æ¡ˆæ•°æ˜¯å®ƒä»¬ç›¸ä¹˜ã€‚</p>
<p>å‡å¦‚$k$æ˜¯å¶æ•°ï¼Œé‚£ä¹ˆè¿™ä¸€ä½å¼‚æˆ–èµ·æ¥ä¸€å®šæ˜¯$0$ï¼Œæ‰€ä»¥ä¸ä¼šäº§ç”Ÿæ–°çš„è´¡çŒ®ï¼Œæœ‰çš„åªæ˜¯æ–°çš„æƒ…å†µï¼Œæ‰€ä»¥å°±ç›¸å½“äºæœ‰è‹¥å¹²ä¸ª$g_{i,j}$åŠ äº†èµ·æ¥ç»„æˆäº†æ–°çš„çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯ï¼š</p>
<p>$$<br>g_{i+1,{\lfloor\frac{j+k}{2}}\rfloor}&#x3D;g_{i,j}\times{C(^{n}_{k})}<br>$$</p>
<p>å‡å¦‚$k$æ˜¯å¥‡æ•°ï¼Œé‚£ä¹ˆè¿™ä¸€ä½å¼‚æˆ–èµ·æ¥ä¸€å®šæ˜¯$1$ï¼Œè€Œç¬¬$i+1$ä½åŠ ä¸€ï¼Œäº§ç”Ÿçš„è´¡çŒ®æ˜¯$2^{i+1}$ï¼Œæ‰€ä»¥ä¼šäº§ç”Ÿæƒ…å†µæ•°$\times$æ¯ç§æƒ…å†µçš„è´¡çŒ®ï¼Œä¹Ÿå°±æ˜¯ï¼š</p>
<p>$$<br>g_{i+1,{\lfloor\frac{j+k}{2}\rfloor}}&#x3D;g_{i,j}+2^{i+1}\times{f_{i,j}}\times{C(^n_k)}<br>$$</p>
<p>æ‰€ä»¥æœ€åçš„ç­”æ¡ˆå°±æ˜¯$g_{logm,0}$ã€‚</p>
<h2 id="4-3"><a href="#4-3" class="headerlink" title="4."></a>4.</h2><p>ç±»ä¼¼åœ°ï¼Œæ¯ä¸ªäººä¼šå»èƒ½å»çš„æ¡£æ¬¡æœ€é«˜çš„åº—ï¼Œå®šä¹‰$f_{i,j}$ä¸ºåªè€ƒè™‘$[i,j]$è¿™ä¸ªåŒºé—´é‡Œçš„äººæ‰€èƒ½å¾—åˆ°çš„æœ€å¤§æ”¶ç›Šæ˜¯ä»€ä¹ˆï¼Œæšä¸¾æ ‡å‡†æœ€é«˜çš„åº—$k$ï¼Œå®šä¹‰$g_{k,t}$ä¸ºæœ‰$t$äººåˆ°ç¬¬$k$å®¶åº—ï¼Œ$t$ä¸ºèƒ½åˆ°è¾¾$k$çš„äººæ•°ï¼Œé‚£ä¹ˆ$f_{i,j}&#x3D;f_{i,k-1}+f_{k+1,j}+g_{k,t}$ã€‚</p>
<p>$g$è¡¨ç¤ºåˆç†é€‰æ‹©ç¬¬$k$å®¶åº—çš„æ¡£æ¬¡ä½¿å¾—æ”¶ç›Šæœ€å¤§çš„æ”¶ç›Šã€‚</p>
<p>$t&#x3D;S_{i,j}-S_{i,k-1}-S_{k+1,j}$</p>
<p>æ¥ä¸‹æ¥å°±æ˜¯æ±‚å‡ºæ‰€æœ‰çš„$g_{k,t}$ï¼Œç”¨$c_i$è¡¨ç¤º$i$çš„èŠ±è´¹ï¼Œ$h_j$ä»£è¡¨æœ‰$j$ä¸ªäººæ¥çš„æœ€é«˜æ”¶ç›Šï¼Œä¹Ÿå°±æ˜¯$g_{k,j}$ã€‚</p>
<p>$h_j&#x3D;max(i\times{j}-c_i)$ï¼Œ</p>
<p>$i_1&lt;i_2$</p>
<p>$i_1\times{j-c_{i_1}}$</p>
<p>$i_2\times{j-c_{i_2}}$</p>
<p>2æ¯”1ä¼˜çš„æ—¶å€™ï¼Œå¾€å2éƒ½ä¼šæ¯”1ä¼˜ï¼Œç”±äº2çš„æ–œç‡æ¯”1æ–œç‡å¤§ï¼Œäº¤ç‚¹ä¹‹å2æ›´ä¼˜</p>
<p>å‡å¦‚$i_1\times{j_1}-c_1\ge{i_2\times{j_2}-c_2}$</p>
<p>è¿™æ ·å¤„ç†å®Œä¹‹åå‡½æ•°çš„æ–œç‡æ˜¯å•è°ƒé€’å¢çš„ï¼Œ</p>
<p>å¾€åä¼˜è§£ä¸ä¸€å®šæ˜¯è¿ç»­çš„ï¼Œä¼˜å…ˆé€‰æ–œç‡å¤§çš„ã€‚</p>
<p>æ‰€ä»¥ç»´æŠ¤çš„æ˜¯æ‰€æœ‰å¯èƒ½æˆä¸ºæœ€ä¼˜è§£çš„æ–œçº¿ï¼Œè¢«è¦†ç›–çš„æ²¡å¿…è¦ç»´æŠ¤ï¼ˆè¦†ç›–å¯ä»¥é€šè¿‡å‡½æ•°å›¾åƒçš„äº¤ç‚¹ä½ç½®æ¥åˆ¤æ–­ï¼‰ï¼Œç»´æŠ¤å¯ä»¥ç”¨å•è°ƒæ ˆã€‚</p>
<p>æœ€åå¤„ç†å‡ºæ¥å°±æ˜¯ä¸€ä¸ªæ°¸è¿œæœ€ä¼˜çš„åˆ†æ®µå‡½æ•°ã€‚</p>
<h2 id="å¿«ä¹"><a href="#å¿«ä¹" class="headerlink" title="å¿«ä¹"></a>å¿«ä¹</h2><p>å®šä¹‰$S_{i,j}$ä¸ºå®Œå…¨åŒ…å«åœ¨$[i,j]$åŒºé—´å†…çš„çº¿æ®µçš„ä¸ªæ•°(äººæ•°)ï¼Œè¿™æ ·å°±å¯ä»¥çº¿æ€§æ±‚å®Œå…¨åŒ…å«åœ¨$[i,j]$å†…å¹¶ä¸”åŒ…å«æˆ‘æšä¸¾çš„$k\in[i,j]$çš„ä¸€ä¸ªåŒºé—´ï¼Œä¹Ÿå°±æ˜¯$S_{i,j}-S_{i,k-1}-S_{k+1,j}$ ,$k$ä¸ºæˆ‘æšä¸¾çš„å‡è®¾æœ€å¤§å€¼ï¼Œè®©è¿™äº›èƒ½åˆ°$k$çš„åŒºé—´éƒ½åˆ°$k$ï¼Œç„¶åæ±‚ä¸€ä¸‹è¿™æ®µåŒºé—´ã€‚</p>
<h2 id="å‡Œä¹±"><a href="#å‡Œä¹±" class="headerlink" title="å‡Œä¹±"></a>å‡Œä¹±</h2><p>å¦‚ä½•é€‰æ‹©ä¸€ç§åˆ‡æ³•ä½¿å¾—è¿™ä¸ªçŸ©é˜µå‡Œä¹±åº¦æœ€å°</p>
<p>$f_{1,1,i,m}\le{f_{1,1,i+1,m}}$ï¼Œ</p>
<p>ä¹Ÿå°±æ˜¯è¯´æ˜¯å•è°ƒä¸é™çš„ï¼Œ</p>
<p>æ‰€ä»¥æœ€å¤§å°±æ˜¯</p>
<p>$g_{i,j,k,l}&#x3D;x$å·¦ä¸Šè§’$(i,j)$ï¼Œå³ä¸Šè§’$(i,k)$ï¼Œæœ€å¤§çš„æ•°æ»¡è¶³$f_{i,j,x,k}\le{l}$ï¼ˆå·¦ä¸Šè§’å³ä¸‹è§’ï¼ŒçŸ©é˜µå‡Œä¹±åº¦$\le{l}$ï¼Œ</p>
<p>å‡å¦‚æ¨ªç€åˆ‡ï¼Œä¸Šä¸‹ä¸¤ä¸ªçŸ©é˜µéƒ½å°äºç­‰äºl-1</p>
<p>$g_{i,j,k,l-1}&#x3D;y$</p>
<p>ä¸‹é¢</p>
<p>$g_{y+1,j,k,l-1}&#x3D;x$</p>
<p>$g_{i,j,k,l}&#x3D;g_{g_{i,j,k,{l-1}}+1,j,k,{l-1}}$</p>
<p>ç«–ç€åˆ‡ï¼š</p>
<p>$$g_{i,j,k,l}&#x3D;max(y),y&#x3D;min(g_{i,j,y,l-1},g_{i+1,y+1,k,l-1})$$</p>
<p>å› ä¸ºå°±è¦åˆ‡åœ¨ä¸‹è¾¹ç•Œè¾ƒå°çš„é‚£ä¸€ä¸ªçŸ©é˜µï¼Œå› æ­¤è¦å–min</p>
<p>$h_y&#x3D;min(g_{i,j,y,l-1},g_{i+1,y+1,k,l-1})$</p>
<p>$h_y$æ˜¯å…ˆå¢åå‡çš„ã€‚</p>
<p>$g_{i,j,k,l}\ge{g_{i,j,k+1,l}}$</p>
<p>ç›¸å½“äºé¢ç§¯ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œå®½è¶Šå¤§ï¼Œé«˜è¶Šé•¿ã€‚</p>
<p>åœ¨ä¸­é—´ç«–ç€åˆ‡äº†ä¸€åˆ€ï¼Œå·¦è¾¹éšç€å®½ä¸æ–­å¢å¤§ï¼Œé«˜æ˜¯ä¸æ–­å‡å°çš„ï¼Œå³è¾¹ç›¸åï¼Œ</p>
<p>æ‰€ä»¥$h_y$çš„ç¬¬ä¸€é¡¹æ˜¯å•è°ƒä¸å¢çš„ï¼Œç¬¬äºŒé¡¹æ˜¯å•è°ƒä¸å‡çš„ï¼Œ</p>
<p>åŠ ä¸Šä¸€ä¸ªå–minæ“ä½œï¼Œå°†ä¼šå­˜åœ¨ä¸€ä¸ªåˆ†ç•Œç‚¹ï¼Œä½¿å¾—å…¶å›¾åƒä¸ºä¸€ä¸ªå•å³°å‡½æ•°ï¼Œ</p>
<p>è®¾åˆ†ç•Œç‚¹ä¸º$z$ï¼Œ$z$å·¦ä¾§ç¬¬ä¸€é¡¹å¤§äºç­‰äºç¬¬äºŒé¡¹ï¼Œ$z$å³ä¾§ç¬¬ä¸€é¡¹å°äºç­‰äºç¬¬äºŒé¡¹</p>
<p>å› æ­¤$h_y$æ˜¯å…ˆå¢åå‡çš„ï¼Œå¯ä»¥é€šè¿‡äºŒåˆ†æŸ¥æ‰¾è¿™ä¸ªåˆ†ç•Œçº¿ï¼Œç„¶åæ¯”è¾ƒå®ƒä¸Šé¢å’Œä¸‹é¢çš„å€¼è°æ›´å¤§ã€‚</p>
<p>$O(N&#x3D;n^3logn\times{logn})$</p>
<h2 id="P9387"><a href="#P9387" class="headerlink" title="P9387"></a>P9387</h2><p>$4k\oplus{4k+1}\oplus{4k+2}\oplus{4k+3}&#x3D;0$</p>
<p>è¿™æ ·å°±å¯ä»¥å¿«é€Ÿå¤„ç†å‡º$x$çš„å€¼ã€‚</p>
<p>æˆ‘ä»¬è®¾$f_{i,j,k&#x3D;0&#x2F;1,t&#x3D;0&#x2F;1}$è¡¨ç¤ºæˆ‘è€ƒè™‘äº†äºŒè¿›åˆ¶çš„å‰$i$ä½$(0\sim{i})$ï¼Œå½“å‰ä½å°†å‘ä¸‹è¿›ä½çš„å€¼æ˜¯$j,j\in{0\sim{n}}$ï¼Œ$k$è¡¨ç¤º$b$æ˜¯å¦å¤§äº$0$ï¼š$true&#x2F;false$ï¼Œ$t$è¡¨ç¤ºå‰$i$ä½æ˜¯å¦å¤§äº$n$ï¼Œæ­¤æ—¶çš„æ–¹æ¡ˆæ•°ã€‚</p>
<p>ï¼ˆ$b$å¤§äºæˆ–ç­‰äº$0$ï¼‰</p>
<p>é‚£å°±å¯ä»¥ä»ä½ä½åˆ°é«˜ä½è¿›è¡Œ DP äº†ï¼Œåˆå§‹æ—¶$f_{-1,0,0,0}&#x3D;1$</p>
<p>è½¬ç§»æ–¹ç¨‹æ˜¯ï¼š</p>
<p>$$<br>f_{i+1,y,O_b|t,0&#x2F;1}+&#x3D;f_{i,j,t,k}<br>$$</p>
<p>è¿™é‡Œ$y&#x3D;\lfloor\frac{O_a+O_b+O_c+j}{2}\rfloor$ã€‚</p>
<p>$O_x$ä»£è¡¨$x$çš„å½“å‰è¿™ä¸€ä½çš„å€¼ï¼Œç”±äºè¦æ»¡è¶³$(a+b+c)\oplus{a}\oplus{c}&#x3D;x$ï¼Œå› æ­¤è®¾$z&#x3D;{O_a+O_b+O_c}\pmod{2}$ï¼Œ$z\oplus{O_a}\oplus{O_c}&#x3D;O_x$ã€‚è€Œè¿™ä½çš„$O_a,O_b,O_c$åˆ†åˆ«æšä¸¾ä¸€ä¸‹å°±å¥½äº†ï¼Œé€‰å‡ºç¬¦åˆè¿™ä¸ªæ¡ä»¶çš„è¿›è¡Œè½¬ç§»ã€‚</p>
<p>$n$ä¸ªäºŒè¿›åˆ¶æ•°åŠ èµ·æ¥æœ€å¤šè¿›$n-1$ä½ï¼Œä¸‰ä¸ªæ•°æœ€å¤šè¿›$2$ä½ã€‚</p>
<p>è‡³äº$\le{n}$ï¼Œå‡å¦‚ä¸‹ä¸€ä½å°äº$n$çš„ä¸‹ä¸€ä½ï¼Œé‚£ä¹ˆå°±æ˜¯å°äº<br>$n$ï¼Œä¸º$0$ï¼Œå‡å¦‚ä¸‹ä¸€ä½å’Œ$n$ç›¸åŒï¼Œé‚£å°±ç»§æ‰¿ä¸Šä¸€ä¸ªçŠ¶æ€ï¼Œå› ä¸ºè¿˜è¦æ¥ç€æ¯”ä¸‹å»ï¼Œå¦‚æœä¸‹ä¸€ä½æ¯”$n$å¤§ï¼Œé‚£å°±æ˜¯å¤§äºï¼Œä¸º$1$ã€‚</p>
<p>æœ€åçš„ç­”æ¡ˆå°±æ˜¯$f_{60,0,1,0}$ï¼Œå› ä¸º$1e18$çš„äºŒè¿›åˆ¶ä½æ•°ä¸ä¼šè¶…è¿‡$60$ä½ã€‚</p>
<h1 id="Day6"><a href="#Day6" class="headerlink" title="Day6"></a>Day6</h1><h2 id="1-3"><a href="#1-3" class="headerlink" title="1."></a>1.</h2><h2 id="2-4"><a href="#2-4" class="headerlink" title="2."></a>2.</h2><h2 id="3-4"><a href="#3-4" class="headerlink" title="3."></a>3.</h2><h2 id="4-4"><a href="#4-4" class="headerlink" title="4."></a>4.</h2><h2 id="å¢å¡æ–¯å®šç†"><a href="#å¢å¡æ–¯å®šç†" class="headerlink" title="å¢å¡æ–¯å®šç†"></a>å¢å¡æ–¯å®šç†</h2><p>å¯¹äº$n,m$å’Œè´¨æ•°$p$ï¼Œæœ‰$C(^n_m)\equiv{C(^{\lfloor\frac{n}{p}\rfloor}<em>{\lfloor\frac{m}{p}\rfloor})C(^{n%p}</em>{m%p})}$</p>
<p>$p&#x3D;2$æ—¶ï¼Œ$C(n,m)&#x3D;1,n\ge{m}$ï¼Œæ‰€ä»¥$m$ç¬¬$i$ä½ä¸º1æ—¶ï¼Œ$n$çš„ç¬¬$i$ä½ä¸º1ï¼Œ$m$çš„ç¬¬$i$ä½ä¸º$0$æ—¶ï¼Œ$n$çš„ç¬¬$i$ä½ä¸º$0&#x2F;1$ï¼Œæ‰€ä»¥$n&amp;m&#x3D;1$ã€‚</p>
<h2 id="æ¬§æ‹‰å‡½æ•°"><a href="#æ¬§æ‹‰å‡½æ•°" class="headerlink" title="æ¬§æ‹‰å‡½æ•°"></a>æ¬§æ‹‰å‡½æ•°</h2><p>$\phi(n)&#x3D;\prod^{t}_{i&#x3D;1}(p_i-1)p_i^{a_i-1}&#x3D;n\cdot (1-\frac 1 {p_1})(1-\frac 1 {p_2})(1-\frac 1 {p_3})\dots(1-\frac 1 {p_t})$</p>
<p>$n&#x3D;p_1^{a_1}p_2^{a_2}\dots{p_t^{a_t}}$</p>
<p>$1-\frac{1}{p_1}&#x3D;\frac{p_1-1}{p_1}$</p>
<p>ç›¸ä¹˜å³å¾—ã€‚</p>
<h2 id="P2261ä½™æ•°æ±‚å’Œ"><a href="#P2261ä½™æ•°æ±‚å’Œ" class="headerlink" title="P2261ä½™æ•°æ±‚å’Œ"></a>P2261ä½™æ•°æ±‚å’Œ</h2><p>å¯¹äº$n\in[1,1e7]$ï¼Œæ±‚$ans_n&#x3D;\sum_{i&#x3D;1}^n{n}\mod{i}$ã€‚</p>
<p>æ¥æ±‚è§£ä¸€ä¸‹é€’æ¨å¼ï¼š</p>
<p>$ans_n-ans_{n-1}&#x3D;\sum^{n-1}<em>{i&#x3D;1}{n}\bmod{i}-\sum</em>{i&#x3D;1}^{n-1}{n-1}\bmod{i}$ã€‚</p>
<p>è¿™é‡Œç¬¬ä¸€é¡¹ä¹‹æ‰€ä»¥æšä¸¾åˆ°$n-1$æ˜¯å› ä¸ºæšä¸¾åˆ°$n$ä¼šä½¿$n\bmod{n}&#x3D;0$æ‰€ä»¥å°±çœæ‰äº†ã€‚</p>
<p>æ¥ç€åŒ–ç®€ï¼š</p>
<p>$$<br>\begin{aligned}<br>ans_n-ans_{n-1}&amp;&#x3D;\sum^{n-1}<em>{i&#x3D;1}{n}\bmod{i}-\sum</em>{i&#x3D;1}^{n-1}{n-1}\bmod{i}\<br>&amp;&#x3D;\sum_{i&#x3D;1}^{n-1}[(n%{i})-(n-1)%{i}]\<br>&amp;&#x3D;n-1-\sum_{i&#x3D;1}^{n-1}i\times[n%{i}&#x3D;0]\<br>&amp;&#x3D;2n-1-\sum_{i&#x3D;1}^{n}i\times[n%{i}&#x3D;0]\<br>&amp;&#x3D;2n-1-\sigma_k(n)\<br>\<br>\therefore ans_n&amp;&#x3D;ans_{n-1}+2n-1-\sigma_k(n)<br>\end{aligned}<br>$$</p>
<p>ç„¶åå°±å¯ä»¥çº¿æ€§é€’æ¨äº†ã€‚</p>
<h2 id="åŸT4"><a href="#åŸT4" class="headerlink" title="åŸT4"></a>åŸT4</h2><p>æ±‚Â $f_i&#x3D;\sum_{j&#x3D;0}^{m}j^i$  </p>
<p>é‚£ä¹ˆæˆ‘ä»¬å…ˆæ±‚ä¸€ä¸‹Â $\sum_{j&#x3D;0}^m(j+1)^i$  </p>
<p>é‚£ä¹ˆè¿™ä¸ªæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ  </p>
<p>å®é™…ä¸Šæ˜¯Â $f_i-0^i+(m+1)^i$  </p>
<p>å› ä¸ºè¿™æ ·å®é™…ä¸Šæ˜¯æšä¸¾äº†Â $1-m+1$  </p>
<p>ç›¸å½“åœ¨åŸæ¥çš„æšä¸¾åŸºç¡€ä¸Šå°‘æšä¸¾äº†Â $0$Â ä½†æ˜¯å¤šæšä¸¾äº†Â $m+1$  </p>
<p>é‚£æˆ‘ä»¬æ¥ç€å¾€ä¸‹å¤„ç†è¿™ä¸ªå¼å­ </p>
<p>$$<br>\begin{aligned}<br>&amp;f_i-0^i+(m+1)^i\<br>&amp;&#x3D;\sum_{j&#x3D;0}^m(j+1)^iÂ \<br>&amp;&#x3D;\sum_{j&#x3D;0}^{m}\sum_{k&#x3D;0}^{i}C_i^kÂ j^kÂ \<br>&amp;&#x3D;\sum_{k&#x3D;0}^{i}C_i^k\sum_{j&#x3D;0}^{m}j^kÂ \<br>&amp;&#x3D;\sum_{k&#x3D;0}^{i}C_i^kf_k\<br>&amp;&#x3D;\sum_{k&#x3D;0}^{i-2}C_i^kf_k+C_i^{i-1}f_{i-1}+C_i^if_i\<br>&amp;&#x3D;\sum_{k&#x3D;0}^{i-2}C_i^kf_k+if_{i-1}+f_i\<br>\thereforeÂ &amp;if_{i-1}&#x3D;Â (m+1)^i-0^i-\sum_{k&#x3D;0}^{i-2}C_i^kf_k<br>\end{aligned}<br>$$</p>
<p>è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†é€’æ¨å¼</p>
<h2 id="é”™æ’"><a href="#é”™æ’" class="headerlink" title="é”™æ’"></a>é”™æ’</h2><p>å¯¹äºæ¯ä¸ª$n$ï¼Œæ±‚å‡ºæœ‰å¤šå°‘é•¿åº¦ä¸º$n$çš„æ’åˆ—ï¼Œä½¿å¾—$p_i!&#x3D;i$ã€‚</p>
<p>æˆ‘ä»¬è®¾æŸä¸ªä½ç½®ä½¿å¾—$p_j&#x3D;n$ï¼Œé‚£ä¹ˆå°±åˆ†æƒ…å†µè®¨è®ºï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307292358909.webp"
                      alt="image.png"
                ></p>
<ol>
<li>å‡è®¾$p_n&#x3D;j$ï¼Œæ‰€ä»¥ç°åœ¨æœ‰ä¸¤å¯¹é”™æ’å·²ç»ç¡®å®šäº†ï¼Œé‚£å°±æ˜¯ä»å‰©ä¸‹çš„$n-2$ä¸ªæ•°ä¸­é€‰é”™æ’ï¼Œè€Œ$j$çš„ä½ç½®æœ‰$n-1$ç§å¯èƒ½ï¼Œä¹Ÿå°±æ˜¯$f_{n-2}\times(n-1)$ã€‚</li>
<li>å‡è®¾$p_n!&#x3D;j$ï¼Œæˆ‘ä»¬æŠŠ$p_n$ç§»åˆ°$p_j$çš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯è¯´æœ‰$p_j!&#x3D;p_j$ï¼Œæ‰€ä»¥æœ‰ä¸€å¯¹é”™æ’å·²ç»ç¡®å®šäº†ï¼Œè¿˜å‰©$n-1$å¯¹ï¼Œé‚£ä¹ˆå°±æ˜¯$f_{n-1}\times(n-1)$</li>
</ol>
<p>äºæ˜¯$f_n&#x3D;f_{n-2}\times(n-1)+f_{n-1}\times(n-1)$ã€‚</p>
<h2 id="è§£æ–¹ç¨‹"><a href="#è§£æ–¹ç¨‹" class="headerlink" title="è§£æ–¹ç¨‹"></a>è§£æ–¹ç¨‹</h2><p>è®¡ç®—$\sum_{i&#x3D;1}^{n}x_i&#x3D;m,x_i\ge{1}$çš„è§£çš„ä¸ªæ•°ã€‚</p>
<h3 id="éš”æ¿æ³•"><a href="#éš”æ¿æ³•" class="headerlink" title="éš”æ¿æ³•"></a>éš”æ¿æ³•</h3><p>æŠŠä¸€ä¸ª1çœ‹ä½œä¸€ä¸ªå°çƒ</p>
<p>é—´éš™æ’éš”æ¿</p>
<p>åˆ†ç»„</p>
<p>ç»„åˆæ•°</p>
<p>$C(m-1,n-1)$</p>
<h3 id="å®é™…æ„ä¹‰"><a href="#å®é™…æ„ä¹‰" class="headerlink" title="å®é™…æ„ä¹‰"></a>å®é™…æ„ä¹‰</h3><p>é€‰ä»£è¡¨å…ƒ</p>
<p>è®¾$l_i,r_i$</p>
<p>æ¯ä¸€å¯¹$l_i,r_i$å¯¹åº”ç€ä¸€ä¸ªä»£è¡¨å…ƒï¼Œå³æ–¹æ¡ˆ</p>
<p>$x_i&#x3D;l_i+r_i+1$</p>
<p>$\sum{x_i}&#x3D;m$</p>
<p>è®¾$l,r$éƒ½ä¸º$y$</p>
<p>$\sum(l_i+r_i)&#x3D;m-n$</p>
<p>é‚£å°±æ˜¯$\sum^{2n}_{i&#x3D;1}y_i&#x3D;m-n$</p>
<p>yéƒ½åŠ ä¸€</p>
<p>$\sum^{2n}_{i&#x3D;1}(y_i+1)&#x3D;m-n+2n$</p>
<p>è®¾$y_i+1&#x3D;z_i$</p>
<p>$\sum_{i&#x3D;1}^{2n}z_i&#x3D;m+n$</p>
<p>$C(m+n-1,2n-1)$</p>
<h2 id="ç¿»æŠ˜æ³•"><a href="#ç¿»æŠ˜æ³•" class="headerlink" title="ç¿»æŠ˜æ³•"></a>ç¿»æŠ˜æ³•</h2><p>é‡åˆ°å‡½æ•°å›¾åƒå°±æŠŠå‰©ä¸‹çš„è·¯å¾„ç¿»æŠ˜</p>
<p>è¿™æ ·æ—¢å¯ä»¥æ±‚è§£ä¸åˆæ³•çš„æ–¹æ¡ˆæ•°äº†</p>
<p>$C(n-k,m+k)$</p>
<h1 id="Day7"><a href="#Day7" class="headerlink" title="Day7"></a>Day7</h1><h2 id="1-4"><a href="#1-4" class="headerlink" title="1."></a>1.</h2><p>æ ¹æ®ç›¸å¯¹å…³ç³»åˆ†ä¸‰ç§æƒ…å†µè®¨è®ºå€’æ¨å‡ºä¹‹å‰çš„ä½ç½®ã€‚</p>
<h2 id="2-5"><a href="#2-5" class="headerlink" title="2."></a>2.</h2><p>æ¯æ®µçš„ä¸‹ä¸€ä¸ªä¸å½“å‰å­—ç¬¦çš„å…³ç³»éƒ½æ˜¯ç›¸åŒçš„ï¼Œ</p>
<p>å…¶å®å°±æ˜¯å­—ç¬¦åŒ¹é…ï¼ŒKMP</p>
<h2 id="3-5"><a href="#3-5" class="headerlink" title="3."></a>3.</h2><p>è´¨å› æ•°åˆ†è§£</p>
<p>å¯¹äºæ¯ä¸ªè´¨æ•°çš„æŒ‡æ•°ç›¸åŠ èµ·æ¥ï¼Œåˆ¤æ–­æ¯ä¸ªæŒ‡æ•°æ˜¯ä¸æ˜¯kçš„å€æ•°å°±å¯ä»¥äº†ã€‚</p>
<p>é‚£ä¹ˆå¯ä»¥</p>
<p>ç»´æŠ¤æ¯ä¸€ä½æ¨¡kç­‰äºå¤šå°‘ã€‚</p>
<p>æŠŠæ¯ä¸ªåŒºé—´ç»´æŠ¤æˆå‰ç¼€å’Œçš„å½¢å¼ï¼Œ</p>
<p>é‚£ä¹ˆåŒºé—´æ±‚å•†é‚£å°±æ˜¯æŒ‡æ•°ç›¸å‡æ¨¡kç­‰äº0</p>
<p>æ‰€ä»¥å°±æ˜¯ä¸¤ä¸ªå‰ç¼€æ¨¡kæ„ä¹‰ä¸‹æ˜¯ç›¸ç­‰çš„</p>
<p>ç»´æŠ¤ä¸€ä¸‹æ¨¡æ„ä¹‰ä¸‹çš„å“ˆå¸Œå°±å¯ä»¥äº†</p>
<p>æ¯ä¸€ä½éƒ½æ˜¯0~k-1</p>
<p>é€’æ¨çš„æ—¶å€™åŠ ä¸€ä¸ªæ•°å°±è¿›è¡Œå“ˆå¸Œå¤„ç†ã€‚</p>
<p>é‚£ä¹ˆæ€ä¹ˆå¯¹ä¸€ä¸ªæ•°å¿«é€Ÿè¿›è¡Œè´¨å› æ•°åˆ†è§£ï¼Œ</p>
<p>å…ˆç”¨çº¿æ€§ç­›é¢„å¤„ç†å‡ºæ¯ä¸ªæ•°çš„æœ€å°è´¨å› å­ï¼Œç„¶åå¯¹æ¯ä¸ªæ•°åˆ†åˆ«é™¤ä¸€ä¸‹å°±å¯ä»¥äº†ã€‚</p>
<p>å“ˆå¸Œå€¼è¦å¼€å¤§ä¸€äº›</p>
<h2 id="4-5"><a href="#4-5" class="headerlink" title="4."></a>4.</h2><p>Alice n&#x2F;2ä¸Šå–æ•´</p>
<p>Bob n&#x2F;2ä¸‹å–æ•´</p>
<p>$\sum{v_i}+\sum{lcp(i,j)}$</p>
<p>å¯ä»¥dfsè®°å¿†åŒ–æœç´¢ä¸€ä¸‹ã€‚</p>
<p>å¯¹æ¯ä¸ªä¸²è¿›è¡Œèµ‹å€¼ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç›´æ¥è¿›è¡Œç‚¹æƒç›¸å‡</p>
<p>$v_i+\frac{1}{2}\sum_j{lcp(s_i,s_j)}$</p>
<p>è¿™æ ·èƒ½ä¿è¯ä¸¤ä¸ªç‚¹åŠ èµ·æ¥æ­£å¥½lcpè¢«åŠ äº†ä¸€é</p>
<p>è¿™æ ·sortä¸€ä¸‹ç„¶åè®¡ç®—å³å¯</p>
<h2 id="KMP"><a href="#KMP" class="headerlink" title="KMP"></a>KMP</h2><p>å­—ç¬¦ä¸²ä¸¥æ ¼åŒ¹é…</p>
<p>å‰åŠéƒ¨åˆ†å’ŒååŠéƒ¨åˆ†</p>
<p>å‡å¦‚å·²ç»çŸ¥é“äº†ä¸€ä¸ªé•¿ä¸²çš„borderï¼Œé‚£ä¹ˆåŠ ä¸Šä¸€ä¸ªå­—ç¬¦ï¼Œé‚£å°±ç»§ç»­æ¯”è¾ƒä¸‹ä¸€ä¸ªå­—ç¬¦</p>
<p>è¿™ä¹ˆè¯´åŒæ—¶å»æ‰æœ€åä¸€ä¸ªå­—ç¬¦ä¹Ÿæ˜¯ç›¸åŒçš„ã€‚</p>
<p>å¯¹äºä¸€ä¸ªæ›´é•¿çš„ä¸²ï¼Œé‚£ä¹ˆå®ƒçš„borderæ˜¯è¢«æ¯”å®ƒçŸ­çš„borderæ›´æ–°è€Œæ¥çš„ã€‚</p>
<p>ä¹Ÿå°±æ˜¯ç”¨çŸ­ä¸²çš„borderæ¨åˆ°é•¿ä¸²çš„border</p>
<p>è®¾nxt_iè¡¨ç¤ºé•¿åº¦ä¸ºiçš„å‰ç¼€borderé•¿åº¦</p>
<p>ä¸€ä¸ªä¸²å¯ä»¥æœ‰å¾ˆå¤šborderï¼Œæ’åºåå°çš„borderæ˜¯å¤§çš„borderçš„border</p>
<p>é‚£ä¹ˆå°±ç»´æŠ¤æ¯ä¸€ä¸ªborderçš„çŠ¶æ€</p>
<p>ä»ä¸‹å¾€ä¸Šæšä¸¾çœ‹çœ‹å“ªä¸ªborderçš„ä¸‹ä¸€ä¸ªå­—ç¬¦æ˜¯åŒ¹é…çš„</p>
<p>å­—ç¬¦ä¸²åŒ¹é…</p>
<p>åˆ¤æ–­måœ¨nä¸­å‡ºç°äº†å‡ æ¬¡</p>
<p>ä¸€ä¸ªæ˜¯hashï¼Œä¸€ä¸ªæ˜¯kmp</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307301513197.webp"
                      alt="image.png"
                ></p>
<h2 id="P3193"><a href="#P3193" class="headerlink" title="P3193"></a>P3193</h2><p>dp_i,jè¡¨ç¤ºè€ƒè™‘å®Œå‰iä¸ªå­—ç¬¦ç›®å‰åŒ¹é…é•¿åº¦ä¸ºjï¼ŒåŒ¹é…å¯ä»¥ç”¨KMP</p>
<p>åªè¦ä¿è¯j&lt;tå°±å¯ä»¥ä¿è¯</p>
<p>ç„¶åæŠŠé€’æ¨è½¬åŒ–ä¸ºçŸ©é˜µå¿«é€Ÿå¹‚å°±å¯ä»¥äº†</p>
<h2 id="hash"><a href="#hash" class="headerlink" title="hash"></a>hash</h2><p>æ¯”è¾ƒä¸¤ä¸ªä¸œè¥¿ä¸€ä¸ä¸€æ ·ã€‚</p>
<p>ç±»ä¼¼äºç¼–ç çš„è¿‡ç¨‹ã€‚</p>
<p>$\sum{s_i\times{b^i}}$</p>
<p>å¯¹äºå­—æ¯ä¸²ï¼Œæ¯ä¸ªå­—ç¬¦ä¸²å½“æˆä¸€ä¸ª26è¿›åˆ¶çš„æ•°ï¼Œb&#x3D;26</p>
<p>è¿™ä¹ˆå¤§çš„æ•°è‚¯å®šæ˜¯å­˜ä¸ä¸‹çš„ï¼Œé‚£å°±æ‰¾ä¸€ä¸ªå¤§æ•°å–æ¨¡</p>
<p>æœ‰$\frac{1}{p}$çš„æ¦‚ç‡ç›¸ç­‰ã€‚</p>
<p>ä¼˜ç‚¹ï¼š</p>
<p>åˆ¤æ–­tåœ¨sçš„æŸä¸ªä½ç½®æ˜¯å¦å‡ºç°</p>
<p>å¦‚ä½•å¿«é€Ÿå¾—åˆ°å­—ä¸²çš„å“ˆå¸Œå€¼ï¼Ÿ</p>
<p>å‰ç¼€å’Œé¢„å¤„ç†</p>
<p>ä¹Ÿå°±æ˜¯åŒºé—´æ±‚å’Œ</p>
<p>$hash_i&#x3D;hash_{i-1}\times{b}+s_i$</p>
<p>$\sum_{i&#x3D;1}^n{s_i\times{b^{n-i}}}$</p>
<h2 id="P2312"><a href="#P2312" class="headerlink" title="P2312"></a>P2312</h2><p>è®©å·¦è¾¹å³è¾¹åŒæ—¶æ¨¡ä¸Šä¸€ä¸ªå¤§è´¨æ•°ï¼Œç„¶åæˆ‘ä»¬æ±‚ä¸€ä¸‹åœ¨æ¨¡æ„ä¹‰ä¸‹æ˜¯å¦ç­‰äº0å°±å¯ä»¥äº†ã€‚</p>
<p>å¯ä»¥è®¾å¤šä¸ªæ¨¡æ•°ï¼Œå¢åŠ æ­£è§£çš„æ¦‚ç‡ã€‚</p>
<h2 id="P5537"><a href="#P5537" class="headerlink" title="P5537"></a>P5537</h2><p>å¯¹äºèµ°åˆ°æ¯ä¸ªèŠ‚ç‚¹ï¼Œè·¯å¾„ä¼šäº§ç”Ÿä¸€ä¸ªåºåˆ—ï¼Œè¿™ä¸ªåºåˆ—æ˜¯å”¯ä¸€çš„ï¼Œ</p>
<p>æ¯ä¸€ä¸ªç‚¹éƒ½å¯¹åº”ä¸€ä¸ªæ“ä½œåºåˆ—ï¼Œ</p>
<p>å¹¶ä¸”è¿™ä¸ªåºåˆ—éƒ½å”¯ä¸€ç¡®å®šè¿™ä¸ªèŠ‚ç‚¹ã€‚</p>
<p>å¯¹äºæ“ä½œåºåˆ—ï¼Œè‹¥å®Œå…¨ç›¸ç­‰ï¼Œé‚£ä¹ˆåˆ°è¾¾çš„ç‚¹ç›¸ç­‰ã€‚</p>
<p>æ¯æ¬¡å¯¹äºè¿™ä¸ª$[l,r]$æ“ä½œåºåˆ—è¿›è¡Œä¸€ä¸ªäºŒåˆ†ã€‚</p>
<p>è¿™ä¸ªå…·æœ‰å•è°ƒæ€§ï¼Œå› ä¸ºå‡å¦‚åˆ°è¿™ä¸ªæ“ä½œåºåˆ—çš„æŸä¸ªå‰ç¼€å·²ç»èµ°ä¸é€šäº†ï¼Œé‚£ä¹ˆåé¢çš„ä¹Ÿä¸€å®šèµ°ä¸é€šã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬è¦æ‰¾çš„èƒ½èµ°é€šçš„åºåˆ—é•¿åº¦æœ€é•¿å€¼ã€‚</p>
<p>å¯¹äºæ¯ä¸ªç‚¹éƒ½å¤„ç†å‡ºå®ƒå¯¹åº”çš„æ“ä½œåºåˆ—ã€‚</p>
<p>æ ¹èŠ‚ç‚¹æ˜¯xï¼Ÿ</p>
<p>ä¹Ÿå°±æ˜¯å…ˆåˆ°xå†åˆ°è¦åˆ°çš„ç‚¹ï¼Œå†è¿›è¡Œæ‹¼æ¥ã€‚</p>
<p>å¯ä»¥ç”¨çº¿æ®µæ ‘ç»´æŠ¤ï¼Œå¯ä»¥åˆå¹¶ä¸¤ä¸ªå“ˆå¸Œå€¼</p>
<p>$h_1+h_2+\sum{B^{S_1}}$</p>
<h2 id="Manacher"><a href="#Manacher" class="headerlink" title="Manacher"></a>Manacher</h2><p>ä¸­é—´ç‚¹å¾ˆé‡è¦</p>
<p>ä¸€ä¸ªå›æ–‡ä¸²ä¸¤è¾¹åŒæ—¶æ“ä½œå¯ä»¥æ”¹å˜é•¿åº¦</p>
<p>æ¥äºŒåˆ†ä¸€ä¸‹è¿™ä¸ªæœ€é•¿é•¿åº¦</p>
<p>å›æ–‡ä¸­å¿ƒ</p>
<p>å›æ–‡åŠå¾„</p>
<p>abcba</p>
<p>!#a#b#c#b#a</p>
<p>æ„Ÿå¹å·æ˜¯è¾¹ç•Œ</p>
<p>b#b</p>
<p>è¿™æ ·å›æ–‡ä¸­å¿ƒå°±å¾ˆæ˜¾ç„¶äº†ã€‚</p>
<p>æ ¸å¿ƒæ€æƒ³ï¼š<strong>æ±‚æ¯ä¸ªç‚¹çš„å›æ–‡åŠå¾„</strong></p>
<p>å›æ–‡åŠå¾„å³å¯¹åº”å›æ–‡å­ä¸²çš„é•¿åº¦</p>
<p>å‡è®¾ä¹‹å‰æœ‰ä¸²è¦†ç›–åˆ°äº†æˆ‘è¿™ä¸ªç‚¹ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¯¹ç§°è¿‡å»ï¼Œæœ€å¤§ä¸ºè¦†ç›–åŒºé—´çš„å³ç«¯ç‚¹ï¼Œæœ€å¤§ç»§æ‰¿åˆ°å³ç«¯ç‚¹ï¼Œä¹Ÿå°±æ˜¯ç»§æ‰¿å¯¹ç§°ç‚¹å›æ–‡åŠå¾„çš„ä¿¡æ¯ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307302223107.webp"
                      alt="image.png"
                ></p>
<p>å¯¹äºè¿™å¼ å›¾ï¼Œçº¢è‰²ç‚¹çš„å›æ–‡åŠå¾„å·²ç»æ±‚å‡ºæ¥äº†ï¼Œä¹Ÿå°±æ˜¯å¯¹åº”çº¢è‰²çš„åŒºé—´ï¼Œä¸‹é¢æˆ‘å¾€åæšä¸¾ï¼Œå‘ç°è¦æ±‚é»‘è‰²ç‚¹çš„å›æ–‡åŠå¾„çš„æ—¶å€™ï¼Œè¿™ä¸ªç‚¹åœ¨çº¢è‰²ç‚¹çš„å›æ–‡åŠå¾„å†…ï¼Œè¿™å°±æ„å‘³ç€çº¢è‰²åŒºé—´å†…æœ‰ç‚¹ä¸å…¶å¯¹ç§°ï¼Œè€Œå¯¹ç§°çš„ç°è‰²ç‚¹åœ¨ä¹‹å‰å·²ç»è¢«å¤„ç†è¿‡äº†ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥ç»§æ‰¿ç°è‰²ç‚¹çš„å›æ–‡åŠå¾„ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä¸ç”¨å†æšä¸¾ä¸€éäº†ï¼Œ<del>å°‘èµ°å‡ åå¹´å¼¯è·¯</del>ã€‚</p>
<p>å‡å¦‚ç°è‰²ç‚¹çš„å›æ–‡åŠå¾„å¹¶æ²¡æœ‰è¶…è¿‡çº¢è‰²ç‚¹ï¼Œé‚£ä¹ˆé»‘è‰²ç‚¹çš„ç»§æ‰¿åˆ°çš„å›æ–‡åŠå¾„ä¹Ÿä¸ä¼šè¶…è¿‡çº¢è‰²åŒºé—´ã€‚</p>
<p>å‡å¦‚ç°è‰²ç‚¹çš„å›æ–‡åŠå¾„è¶…è¿‡äº†çº¢è‰²ç‚¹ï¼Œé‚£ä¹ˆé»‘è‰²ç‚¹çš„ç»§æ‰¿åˆ°çš„å›æ–‡åŠå¾„åªèƒ½åˆ°çº¢è‰²ç‚¹çš„å›æ–‡åŠå¾„çš„è¾¹ç•Œï¼Œå› ä¸ºå†å¾€å¤–é»‘è‰²ç‚¹å’Œç°è‰²ç‚¹å°±ä¸æ˜¯å¯¹ç§°çš„äº†ã€‚</p>
<p>å› æ­¤æ€»ç»“ä¸‹æ¥å°±æ˜¯ç»§æ‰¿åˆ°çš„å›æ–‡åŠå¾„çš„ä½ç½®è¦å’Œçº¢è‰²ç‚¹å›æ–‡åŠå¾„çš„ä½ç½®å–ä¸ª$\min$ã€‚</p>
<h2 id="HDU5371"><a href="#HDU5371" class="headerlink" title="HDU5371"></a>HDU5371</h2><p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸ºnçš„æ•°åˆ— ï¼Œç°åœ¨è¦æ±‚ä½ æ‰¾å‡ºæœ€é•¿çš„å½¢ä¼¼$s+s^R+s$çš„å­ä¸²ï¼Œ$s^R$æ˜¯$s$çš„åä¸²ã€‚</p>
<p>ä¸¤ä¸ªå›æ–‡ä¸­å¿ƒã€‚</p>
<p>åªè¦ä¸¤ä¸ªå›æ–‡åŠå¾„å¯ä»¥äº’ç›¸è¦†ç›–åˆ°å½¼æ­¤çš„å›æ–‡ä¸­å¿ƒï¼Œé‚£ä¹ˆå°±å¯ä»¥æ»¡è¶³æ¡ä»¶ã€‚</p>
<p>ä½¿æ»¡è¶³è¿™ä¸ªæ¡ä»¶ä¸‹ä½¿ä¸¤ä¸ªå›æ–‡ä¸­å¿ƒé—´è·æœ€å¤§å°±å¯ä»¥äº†ã€‚</p>
<p>$S_2-r_2\le{S_1}$</p>
<h2 id="P6216"><a href="#P6216" class="headerlink" title="P6216"></a>P6216</h2><p>$t$åœ¨$s$ä¸­å“ªäº›ä½ç½®å‡ºç°äº†å¯ä»¥ç”¨ KMP ã€‚</p>
<p>å¯¹æ¯ä¸ªä½ç½®å¤„ç†å‡º$s_2$æ˜¯å¦å¯ä»¥ä»è¿™é‡Œå¼€å§‹åˆ°å®Œå…¨åŒ¹é…ï¼Œ</p>
<p>ä¹Ÿå°±æ˜¯å¯¹äºæ¯ä¸€ä¸ª$s_2$åŒ¹é…çš„ä½ç½®ï¼Œæˆ‘åœ¨å®ƒåŒ¹é…çš„å·¦ç«¯ç‚¹çš„ä½ç½®åŠ ä¸€ã€‚</p>
<p>æŸ¥è¯¢æ—¶å³ç«¯ç‚¹è¦å‡å»$s_2$çš„é•¿åº¦ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯åŒºé—´å†…çš„â€œ1â€éƒ½æ˜¯åˆæ³•çš„ï¼Œè¿™æ ·å°±å¯ä»¥å»æ‰¾åŒºé—´é‡Œ1çš„ä¸ªæ•°æ¥è®¡ç®—$s_2$å‡ºç°çš„æ¬¡æ•°ï¼Œ</p>
<p>ç„¶åæšä¸¾è¿™ä¸ªç‚¹çš„å›æ–‡ä¸­å¿ƒï¼Œ</p>
<p>æ‰€æœ‰å›æ–‡å­ä¸²çš„å…¬å·®ä¸º$1$ï¼Œ</p>
<p>å³ç«¯ç‚¹åŒæ—¶å‡å»$s_2$çš„é•¿åº¦åå…¬å·®ä¾ç„¶æ˜¯1.</p>
<p>å·¦å³ç«¯ç‚¹éƒ½æ˜¯ç­‰å·®æ•°åˆ—ã€‚</p>
<p>å¯ä»¥ç”¨å‰ç¼€å’Œä¼˜åŒ–ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307302254026.webp"
                      alt="image.png"
                ></p>
<p>ç„¶åæˆ‘ä»¬å…¶å®å°±æ˜¯è¦æ±‚å‰©ä¸‹çš„è¿™ä¸ªä¸‰è§’å½¢ä¸­æ‰€æœ‰ç‚¹çš„å’Œã€‚</p>
<p>$\sum_{i&#x3D;l}^{r-|s_2|+1}a_i\times(r-|s_2|-i+1)$</p>
<h2 id="P5446"><a href="#P5446" class="headerlink" title="P5446"></a>P5446</h2><p>$R\le{S}$æ—¶ï¼Œæ»¡è¶³æ¡ä»¶çš„$R$ä¸€å®šæ˜¯$S$çš„å‰ç¼€ï¼Œæ‰€ä»¥æˆ‘ä»¬æšä¸¾$S$ çš„å‰ç¼€ï¼Œ</p>
<p>è‹¥å¯¹äºæ¯ä¸ªæšä¸¾çš„$R$ï¼Œå¯¹å®ƒè¿›è¡Œä¸æ–­ç¿»è½¬ï¼Œè‹¥å¾—åˆ°çš„$R$ä¸æ˜¯$S$çš„å‰ç¼€ï¼Œé‚£å°±è·³è¿‡ã€‚</p>
<p>å¯¹äºæœ€åä¸€æ­¥ï¼Œæ˜¯å…³äº$R$å³ç«¯ç‚¹ä¸ºä¸­å¿ƒçš„å›æ–‡ä¸²ï¼Œåˆ¤æ–­ä¸€ä¸‹å³å¯ ï¼Œå¦‚æœå¯ä»¥å°±å¯ä»¥åˆ¤æ–­è¿™ä¸ª R ä¸²æ˜¯å¦å¯ä»¥ã€‚</p>
<h2 id="Trieæ ‘"><a href="#Trieæ ‘" class="headerlink" title="Trieæ ‘"></a>Trieæ ‘</h2><p>æ ‘å½¢ç»“æ„ï¼Œ</p>
<p>ä»æ ¹èµ°åˆ°åº•é‚£å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œ</p>
<p>å¯ä»¥æ’å…¥å­—ç¬¦ä¸²ï¼Œ</p>
<p>æ²¡æœ‰å‡ºè¾¹å°±æ–°å»ºä¸€æ¡ï¼Œ</p>
<p>æ‰€ä»¥å°±å¯ä»¥ç”¨ä¸€æ£µæ ‘è¡¨ç¤ºè¿™ä¸ªé›†åˆï¼Œ</p>
<p>å³ä¸€ä¸ªå­—å…¸æ ‘ï¼Œ</p>
<p>å¯ä»¥æ±‚ lcpï¼Œ</p>
<p>å³ä¸¤ä¸ªç‚¹ lca çš„æ·±åº¦ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307302309042.webp"
                      alt="image.png"
                ><br>å¯¹äºè¿™é¢—Trieæ ‘ä¸Šçš„å­—ç¬¦ä¸²$\text{aba}$å’Œ$\text{abc}$ï¼Œå®ƒä»¬çš„lcaæ˜¯$b$ï¼Œ$b$çš„æ·±åº¦æ˜¯$2$ï¼Œå› æ­¤å®ƒä»¬çš„çš„$lcp$é•¿åº¦å°±æ˜¯2ã€‚</p>
<h3 id="01Trie"><a href="#01Trie" class="headerlink" title="01Trie"></a>01Trie</h3><p>å„ç§æ“ä½œä¸€æ ·ï¼Œå­—ç¬¦é›†å˜æˆäº†0å’Œ1ã€‚</p>
<p>å¯ä»¥è¿›è¡ŒäºŒè¿›åˆ¶æ“ä½œ</p>
<p>è¿™æ ·å°±å¯ä»¥å¯¹æŸä¸ªæ•°å¾—åˆ°å¼‚æˆ–å€¼æœ€å¤§ã€‚</p>
<p>å› ä¸ºå‡å¦‚ä¸€ä¸ªæ ‘äºŒè¿›åˆ¶è¡¨ç¤ºä¸º$10110$ï¼Œé‚£ä¹ˆæˆ‘å°±å¯ä»¥è´ªå¿ƒåœ°é€‰æ‹©æ¯ä½ï¼Œå¦‚æœå¯ä»¥æˆ‘åœ°æœ€ä¼˜é€‰æ‹©æ˜¯$01001$ï¼Œå‡å¦‚æŸä¸€ä½ä¸Šæ²¡æœ‰æˆ‘æƒ³è¦çš„ï¼ˆåºåˆ—ä¸­æ²¡æœ‰è¯¥æ•°ï¼‰ï¼Œé‚£å°±åˆ«æ— é€‰æ‹©ï¼Œä½†è¿™æ ·ä¸€ä¸ªæµç¨‹ä¸‹æ¥æˆ‘å¾—åˆ°çš„æ˜¯æœ€ä¼˜è§£ã€‚</p>
<p>è¿›è¡Œä¸€ä¸ªè´ªå¿ƒ</p>
<h2 id="P3065"><a href="#P3065" class="headerlink" title="P3065"></a>P3065</h2><p>å»ºä¸€æ£µæ ‘ï¼Œ</p>
<p>æŠŠå°äºå·æ¢åšæœ‰å‘è¾¹ï¼Œ</p>
<p>è·‘æ‹“æ‰‘æ’åºï¼Œ</p>
<p>å‡ºç°ç¯äº†è¿™æ¡è·¯å°±èµ°ä¸é€šï¼Œå‡å¦‚ä¹‹å‰å·²ç»æœ‰$a&lt;b&lt;c$ï¼Œ</p>
<p>åé¢åˆä»$c\to{a}$ï¼Œè¯´æ˜$c&lt;a$ï¼Œé‚£ä¹ˆå°±äº§ç”Ÿäº†çŸ›ç›¾ï¼Œé‚£ä¹ˆè¿™æ¡è·¯å°±ä¸èƒ½ç»§ç»­å¾€ä¸‹èµ°ã€‚</p>
<h2 id="CF178F3"><a href="#CF178F3" class="headerlink" title="CF178F3"></a>CF178F3</h2><p>æ ‘å½¢èƒŒåŒ…é—®é¢˜ã€‚</p>
<p>$nS_ik$</p>
<p>$dep_x\times{a}\times{b}$</p>
<p>$nk$</p>
<p>$n$ä¸ªèŠ‚ç‚¹è½¬ç§»ï¼Œå…¶å®ƒçš„èŠ‚ç‚¹å¤åˆ¶ï¼Œå› ä¸ºåªæœ‰ä¸€ä¸ªå„¿å­</p>
<h2 id="P4551"><a href="#P4551" class="headerlink" title="P4551"></a>P4551</h2><p>æŠŠä¸€æ¡è·¯å¾„æ‹†æˆä¸¤æ®µï¼Œ</p>
<p>é‚£å°±æ˜¯$s$åˆ°æ ¹çš„å¼‚æˆ–å’Œå¼‚æˆ–ä¸Š$t$åˆ°æ ¹çš„å¼‚æˆ–å’Œï¼Œ</p>
<p>è¿™ä¸ªåˆ°æ ¹çš„å¼‚æˆ–å’Œå¯ä»¥ dfs å¤„ç†ä¸€éï¼Œ</p>
<p>è¦æ‰¾åˆ°ä¸€ä¸ª$d_y$å¼‚æˆ–ä¸Š$d_x$æœ€å¤§</p>
<p>å¯¹ä¸€ä¸ªæ•°æ±‚å¼‚æˆ–å’Œæœ€å¤§ï¼Œè¯·é—®å¦ä¸€ä¸ªæ•°ï¼Ÿ</p>
<p>é‚£å°±å¯ä»¥å»º01trieäº†ã€‚</p>
<h2 id="å¯æŒä¹…åŒ–"><a href="#å¯æŒä¹…åŒ–" class="headerlink" title="å¯æŒä¹…åŒ–"></a>å¯æŒä¹…åŒ–</h2><p>æ±‚$l,r$å»ºå‡ºtrieæ ‘</p>
<p>ç‰ˆæœ¬æ€æƒ³ï¼Œ</p>
<p>æˆ‘æœ‰$q$æ¬¡ä¿®æ”¹ï¼Œé‚£å°±æœ‰$q$ä¸ªç‰ˆæœ¬çš„ trie æ ‘ï¼Œ</p>
<p>æ’å…¥å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œæ–°å»ºä¸€ä¸ªéƒ¨åˆ† trie æ ‘ï¼Œè¿™ä¸ªtrie æ ‘ä¸Šåªä¿ç•™ä¿¡æ¯æ”¹å˜çš„èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯æ–°åŠ çš„èŠ‚ç‚¹å’Œè¢«å½±å“åˆ°çš„åŸæ¥çš„èŠ‚ç‚¹ï¼Œ</p>
<p>æ¯ä¸ªç‰ˆæœ¬çš„trieæ ‘åªéœ€è¦è®°å½•æ ¹èŠ‚ç‚¹çš„ä¿¡æ¯ã€‚</p>
<p>å¯¹äºæ²¡å—åˆ°æ–°èŠ‚ç‚¹å½±å“çš„èŠ‚ç‚¹ï¼Œç›´æ¥å¯¹å®ƒä»¬è¿æ¥å³å¯ï¼Œ</p>
<p>åŸæ¥çš„æŸ¥è¯¢å¯ä»¥ç…§å¸¸è¿›è¡Œã€‚</p>
<h2 id="P5283"><a href="#P5283" class="headerlink" title="P5283"></a>P5283</h2><p>æšä¸¾å³ç«¯ç‚¹ï¼Œæ‰¾åˆ°ä½¿å¾—å¼‚æˆ–å’Œæœ€å¤§çš„å·¦ç«¯ç‚¹ã€‚</p>
<p>å¯¹äº$S_i$æ‰¾åˆ°ä¸€ä¸ª$max_{j&lt;i}S_i{\oplus}S_j$</p>
<p>è¾¹æŸ¥è¾¹æ’å…¥å³ç«¯ç‚¹ï¼Œç”¨å¯æŒä¹…åŒ–çº¿æ®µæ ‘ã€‚</p>
<p>æœ€å¤§å€¼è¢«é€‰åï¼Œæ¬¡å¤§å€¼æ‰æœ‰å¯èƒ½æˆä¸ºç­”æ¡ˆï¼Œç±»ä¼¼äºè¶…çº§é’¢ç´</p>
<p>ç»´æŠ¤l,rï¼ŒæŒ‰ç…§vç”¨ä¼˜å…ˆé˜Ÿåˆ—æ’åº</p>
<p>å¤§åŒºé—´å°±ä¼šå˜æˆä¸¤ä¸ªå°åŒºé—´ï¼ŒåŒºé—´å†…çš„å¼‚æˆ–æœ€å¤§å€¼å¯ä»¥ç”¨01trieè§£å†³</p>
<h2 id="Exkmp"><a href="#Exkmp" class="headerlink" title="Exkmp"></a>Exkmp</h2><p>ç»´æŠ¤æœ€å³ç«¯ç‚¹ä½¿å¾—ä¹‹å‰çš„lcpå»¶ä¼¸åˆ°è¿™ä¸ªç«¯ç‚¹ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307302329248.webp"
                      alt="image.png"
                ></p>
<p>é»‘è‰²ä¸ºåŸåºåˆ—ï¼Œæˆ‘ç°åœ¨è¦æ±‚æ¯ä¸€ä¸ªåç¼€ä¸åŸåºåˆ—çš„ lcpï¼Œå³æœ€å¤§å…¬å…±å‰ç¼€ã€‚</p>
<p>æ¯”å¦‚æˆ‘ç°åœ¨è¦æ±‚ç²‰è‰²ç‚¹çš„ lcpï¼Œ</p>
<p>ä½†æ˜¯å‘ç°è¿™ä¸ªç‚¹åœ¨å½“å‰æœ€å¤§lcpçš„å³ç«¯ç‚¹çš„èŒƒå›´å†…ï¼ˆçº¢è‰²çº¿ï¼‰ï¼Œå³æˆ‘ä»¬çŸ¥é“äº†ç°è‰²ä¸é»‘è‰²çš„ lcpï¼Œè€Œç°è‰²ä¸è“è‰²çš„ç²‰è‰²éƒ¨åˆ†åˆç›¸åŒï¼Œäºæ˜¯è“è‰²å’Œé»‘è‰²çš„ç²‰è‰²éƒ¨åˆ†ä¹Ÿç›¸åŒã€‚</p>
<p>è€Œå¯¹äºç²‰è‰²éƒ¨åˆ†ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†ç»¿è‰²ä¸çš„ lcpï¼Œç»¿è‰²&lt;ç²‰è‰²ï¼Œç›¸åŒä½ç½®çš„ç»¿è‰²&#x3D;ç²‰è‰²ï¼Œäºæ˜¯ç»¿è‰²çš„ lcp å°±å¯ä»¥è¢«ç²‰è‰²ç‚¹ç»§æ‰¿ï¼›å‡å¦‚ç»¿è‰²&gt;ç²‰è‰²ï¼Œä½†æ˜¯è¶…å‡ºéƒ¨åˆ†åœ¨è“è‰²éƒ¨åˆ†ä¸­ä¸ä¸€å®šç›¸åŒï¼Œå› æ­¤æœ€å¤šèƒ½ç»§æ‰¿åˆ°ç²‰è‰²çš„è¾¹ç•Œå¤„ï¼Œå› æ­¤ç»¿è‰²çš„ lcpçš„å³ç«¯ç‚¹ä¸‹æ ‡è¦ä¸ç²‰è‰²å³ç«¯ç‚¹ä¸‹æ ‡å–$\min$åç»§æ‰¿ã€‚</p>
<p>è€Œå¯¹äºå­—ç¬¦ä¸²$b$ä¸å­—ç¬¦ä¸²$a$çš„æ¯ä¸ªåç¼€çš„ lcp ï¼Œå°±å¯ä»¥æŠŠ$a$æ¥åˆ°$b$çš„åé¢ï¼Œç„¶åä»é•¿åº¦ä¸º$a$çš„åç¼€å¼€å§‹æ‰«å°±å¯ä»¥äº†ã€‚</p>
<p>æ¯æ¬¡ç»´æŠ¤çš„å°±æ˜¯å½“å‰ lcp å»¶å±•åˆ°çš„æœ€å¤§å³ç«¯ç‚¹ä»¥åŠå½“å‰çš„é€’æ¨æ•°ç»„ï¼Œä¹Ÿå°±æ˜¯ç”¨åˆ°çš„ç»¿è‰²çš„ lcp çš„é•¿åº¦ã€‚</p>
<p>åç¼€é•¿åº¦ç”±é•¿æšä¸¾åˆ°çŸ­ï¼Œç¬¬ä¸€æ¬¡æ²¡æœ‰å¯ä»¥ç»§æ‰¿çš„ï¼Œé‚£å°±åªèƒ½è‡ªå·±æ‰«ä¸€éäº†ã€‚</p>
<h2 id="P7114"><a href="#P7114" class="headerlink" title="P7114"></a>P7114</h2><p>$n-border&#x3D;len$</p>
<p>Cå³ä¸º$S-(AB)^i$</p>
<p>Cæ˜¯ç¡®å®šçš„ï¼ŒCä¸­å¥‡æ•°çš„ä¸ªæ•°å¾ˆå¥½æ±‚ï¼Œ</p>
<p>ç„¶åæšä¸¾ä¸€ä¸ªABçš„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯å¾ªç¯èŠ‚çš„é•¿åº¦ï¼Œå†æšä¸¾ä¸€ä¸ªå¾ªç¯çš„æ¬¡æ•°ï¼Œ</p>
<p>è‹¥$len|n$ï¼Œé‚£ä¹ˆ$len$å³å¾ªç¯èŠ‚ï¼Œç”¨è¿™ä¸ªåˆ¤æ–­æˆ‘ä»¬æšä¸¾çš„ABé•¿åº¦æ˜¯å¦åˆæ³•ã€‚</p>
<p>ABä¼šåœ¨è¿™ä¸ªå¾ªç¯èŠ‚å†…å‡ºç°ï¼ŒAå‡ºç°çš„é¢‘ç‡ä¸º$1\sim{len-1}$ï¼Œæ‰€ä»¥å°±æšä¸¾æ‰€æœ‰çš„Aï¼Œ</p>
<p>ç„¶åç”¨æ¡¶è®°å½•æ¯ä¸ªå¥‡æ•°å‡ºç°çš„æ¬¡æ•°ï¼ŒåŠ èµ·æ¥ï¼Œçœ‹çœ‹æ˜¯å¦æ»¡è¶³$F(A)&lt;F(C)$ï¼Œé‚£å°±ç´¯åŠ ç­”æ¡ˆã€‚</p>
<h1 id="Day8"><a href="#Day8" class="headerlink" title="Day8"></a>Day8</h1><h2 id="1-5"><a href="#1-5" class="headerlink" title="1."></a>1.</h2><p>æ ‘å½¢ DP</p>
<p>è®¾$f_x$ä»£è¡¨ä»$x$å‡ºå‘åˆ°å…¶å­æ ‘å†…æœ€é•¿é“¾çš„é•¿åº¦ã€‚</p>
<p>è½¬ç§»å°±æ˜¯$f_x&#x3D;\max(f_x,f_y+(a_x\oplus{a_y}))$</p>
<p>$ans&#x3D;\max(ans,f_x+f_y+(a_x\oplus{a_y}))$</p>
<h2 id="2-6"><a href="#2-6" class="headerlink" title="2."></a>2.</h2><p>ç”¨$f_{x,y}$ä»£è¡¨ä»$y$å‡ºå‘åˆ°$x$çš„è·¯å¾„æ¡æ•°ã€‚</p>
<p>å¯ä»¥æ‹“æ‰‘æ’åºå¹¶è½¬ç§»ã€‚</p>
<p>è‹¥$z$æ˜¯$x$çš„ä¸€ä¸ªå‰é©±ï¼Œé‚£ä¹ˆ$f_{x,y}+&#x3D;f_{z,y}$</p>
<p>ç”±äºæˆ‘ä»¬åªå…³å¿ƒå¥‡å¶æ€§ï¼Œå› æ­¤åªè®°å½•0 1å°±å¯ä»¥äº†ï¼Œè½¬ç§»å°±æ˜¯$f_{x,y}&#x3D;f_{x,y}\oplus{f_{z,y}}$ã€‚</p>
<p>ç”¨bitsetç»´æŠ¤å°±å¯ä»¥äº†ã€‚</p>
<h2 id="3-6"><a href="#3-6" class="headerlink" title="3."></a>3.</h2><p>$dp_x$è¡¨ç¤ºè®©$x$å€¼ä¸º1çš„æœ€å°‘å­æ ‘ä¸­$1$çš„ä¸ªæ•°ã€‚</p>
<p>çœ‹ä¸‹$dp_1$æ˜¯å¦å¤§äº1çš„ä¸ªæ•°ã€‚</p>
<h2 id="4-6"><a href="#4-6" class="headerlink" title="4."></a>4.</h2><p>å‰iä¸ªæ•°å·²ç»åˆ†æˆäº†jä¸ªé›†åˆçš„æ–¹æ¡ˆæ•°ï¼Œè½¬ç§»ï¼š</p>
<p>$S_{n,m}&#x3D;S_{n-1,m}\times{m}+S_{n-1,m-1}$</p>
<p>æ ‘ä¸Šï¼Ÿ</p>
<p>æŒ‰ç…§bfsåº DP</p>
<p>$S_{3,k}$</p>
<p>$S_{4,k}&#x3D;S_{3,k}\times{k-2}+S_{3,k-1}$</p>
<p>$S_{n,m}&#x3D;S_{n-1,m}\times{m-dep}+S_{n,m-1}$</p>
<p>è¦ä¹ˆå°±åŠ åˆ°å‰©ä¸‹çš„é›†åˆï¼Œè¦ä¹ˆå°±è‡ªå·±æ–°å¼€ä¸€ä¸ªé›†åˆã€‚</p>
<p>ä»ä¸Šåˆ°ä¸‹ DPã€‚</p>
<p>è¿™æ ·å°±èƒ½ä¿è¯DPåˆ°ä¸€ä¸ªç‚¹çš„æ—¶å€™ï¼Œå®ƒçš„ç¥–å…ˆå·²ç»å¤„ç†å¥½äº†ã€‚</p>
<h2 id="P3304"><a href="#P3304" class="headerlink" title="P3304"></a>P3304</h2><p>æ±‚æœ‰å¤šå°‘æ¡è¾¹æ»¡è¶³æ‰€æœ‰ç›´å¾„éƒ½ç»è¿‡è¯¥è¾¹ã€‚</p>
<ul>
<li>ç›´å¾„æ˜¯ä¸€å®šæœ‰äº¤ç‚¹ã€‚</li>
<li>å¦‚æœåˆ†å‰äº†ï¼Œé‚£ä¹ˆä¸¤ç«¯æ˜¯ä¸€æ ·é•¿çš„ï¼Œå¦åˆ™å°±å¯ä»¥æœ‰æ›´å¤§çš„ç›´å¾„ã€‚</li>
<li>ä¸¤ä¸ªæ ‘ï¼Œä¸¤ä¸ªç›´å¾„ï¼Œå°†ä¸¤æ£µæ ‘çš„æ ¹èŠ‚ç‚¹è¿æ¥èµ·æ¥ï¼Œä¸€å…±å¯èƒ½æœ‰å…­æ¡ç›´å¾„ã€‚</li>
</ul>
<p>ä»æ ‘ä¸ŠæŸä¸ªç‚¹dfsï¼Œæ·±åº¦æœ€æ·±çš„ç‚¹ä¸€å®šæ˜¯æŸä¸ªç›´å¾„çš„ç«¯ç‚¹ï¼Œ</p>
<p>æŸ¥è·¯å¾„é•¿åº¦ç›´æ¥æŸ¥LCAå°±å¯ä»¥äº†ã€‚</p>
<p>å…ˆæ‰¾å‡ºæ¥ä¸€æ¡ç›´å¾„ï¼Œ</p>
<p>ä»å³ç«¯ç‚¹ DFSï¼Œ</p>
<p>å¯¹æ¯ä¸ªç‚¹è®°å½•å®ƒåˆ°å­æ ‘é‡Œæœ€æ·±çš„ä¸€æ¡é“¾ï¼Œ</p>
<p>ç„¶åå¦‚æœå’Œå½“å‰ç‚¹åˆ°å³ç«¯ç‚¹çš„é•¿åº¦ç›¸åŒï¼Œé‚£ä¹ˆå°±å¯ä»¥æ›¿ä»£ï¼Œ</p>
<p>æ‰§è¡Œå®Œæ‰€æœ‰çš„æ“ä½œåä¸»é“¾ä¸Šå‰©ä¸‹çš„å°±æ˜¯å…¬å…±çš„è¾¹ã€‚</p>
<h2 id="P3177"><a href="#P3177" class="headerlink" title="P3177"></a>P3177</h2><p>ä¸€æ¡è¾¹è¢«å¤šå°‘ä¸ªç‚¹å¯¹ç»è¿‡å°±æ˜¯å®ƒçš„è´¡çŒ®ã€‚</p>
<p>å…¶å®å°±æ˜¯è¿™æ¡è¾¹å·¦å³ä¸¤è¾¹é»‘è‰²ç‚¹çš„å¯¹æ•°åŠ ä¸Šç™½è‰²ç‚¹çš„å¯¹æ•°ã€‚</p>
<p>è®¾$f_{x,t}$è¡¨ç¤ºåœ¨xå­æ ‘å†…é€‰äº†tä¸ªé»‘ç‚¹ï¼Œæœ€å°è´¡çŒ®æ˜¯ã€‚</p>
<p>æ–°åŠ å­æ ‘yï¼Œ</p>
<p>$f_{x,a+b}+&#x3D;f_{x,a}+f_{y,b}+v(x,y)$</p>
<p>$a(k-a)+(S-a)\times{(n-S)-(k-a)}$</p>
<p>åˆå¹¶çš„æ—¶å€™$a:0\sim{S}$</p>
<p>næ–¹ä¸ªç‚¹å¯¹ï¼Œé‚£å°±æ˜¯næ–¹</p>
<h2 id="P3174"><a href="#P3174" class="headerlink" title="P3174"></a>P3174</h2><p>$f_x$è¡¨ç¤ºä»xå¼€å§‹å‘å­æ ‘é‡Œæ‰¾ä¸€æ¡é“¾ä½¿è¿™ä¸ªæ¯›æ¯›è™«æœ€å¤§ã€‚</p>
<p>æšä¸¾å„¿å­</p>
<p>$f_x&#x3D;f_y+sum_x+1-1$</p>
<p>åœ¨lcaå¤„åˆå¹¶</p>
<p>æ‰¾æœ€å¤§çš„ä¸¤ä¸ª$f_y$</p>
<p>$f_x&#x3D;f_{y_1}+f_{y_2}+sum_x-1(+1)$çˆ¶èŠ‚ç‚¹</p>
<h2 id="CF1153D"><a href="#CF1153D" class="headerlink" title="CF1153D"></a>CF1153D</h2><p>$dp_x$è¡¨ç¤ºxä¸º1å„¿å­æœ€å°å¡«1çš„ä¸ªæ•°ï¼Œ</p>
<p>å¯¹äºmaxå’Œminåˆ†åˆ«è®¨è®º</p>
<hr>
<p>è®¾$dp_x$è®¾xåœ¨å­æ ‘ä¸­æœ‰sä¸ªå¶å­ï¼Œxæœ€å¤šèƒ½æ’å¤šå°‘åã€‚</p>
<p>1:</p>
<p>$f_x&#x3D;\max(s-\min(s_i-f_i))$</p>
<p>0:</p>
<p>$f_x&#x3D;\sum{(f_i-1)}+1$</p>
<h2 id="P3523"><a href="#P3523" class="headerlink" title="P3523"></a>P3523</h2><p>å¯¹KäºŒåˆ†ï¼Œ</p>
<p>ä¹Ÿå°±æ˜¯ä»¥æ¯ä¸ªæˆ‘é€‰çš„ç‚¹ä¸ºä¸­å¿ƒï¼ŒKä¸ºåŠå¾„å½¢æˆä¸€ç‰‡è¦†ç›–åŒºï¼Œå¦‚æœèƒ½å…¨éƒ¨è¦†ç›–å…¨éƒ¨å…³é”®ç‚¹ï¼Œé‚£è¿™ä¸ªKå°±å¯ä»¥æ»¡è¶³ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307312019283.webp"
                      alt="image.png"
                ></p>
<p>å¦‚ä¸Šå›¾ï¼Œçº¢è‰²ç‚¹ä¸ºå…³é”®ç‚¹ï¼Œè“è‰²ç‚¹ä¸ºæˆ‘é€‰çš„èŠ‚ç‚¹ï¼Œè“è‰²âšªä¸ºå½“å‰è¦†ç›–åŒºï¼Œæ˜¾ç„¶ï¼Œä¸Šå›¾ä¸ºä¸€ç§åˆæ³•çš„æ–¹æ¡ˆã€‚</p>
<p>å¯¹äºæ¯ä¸€ä¸ªç‚¹å’Œä¸€ä¸ªKï¼Œä¸€å®šæ˜¯è®©ä¸€ä¸ªå…³é”®ç‚¹å†è¦†ç›–èŒƒå›´è¾¹ç•Œè¢«è¦†ç›–åˆ°æ˜¯æœ€ä¼˜çš„ï¼Œå› æ­¤æˆ‘ä»¬è¦è®©è¿™äº›å…³é”®ç‚¹åˆšå¥½å¡ä¸Šè¿™äº›è¾¹ç•Œï¼Œè¿™æ ·å°±å¯ä»¥ä½¿å®ƒå¯ä»¥è¦†ç›–åˆ°æ›´è¿œçš„ç‚¹ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬å®šä¹‰$f_x$ä»£è¡¨xå­æ ‘ä¸­æœ€è¿œè¿˜æ²¡æœ‰è¦†ç›–çš„ç‚¹çš„ä½ç½®ï¼Œå¦‚æœè¿™ä¸ªè·ç¦»ç­‰äºKäº†ï¼Œæˆ‘å°±åœ¨è¿™é‡Œé€‰ä¸€ä¸ªç‚¹ã€‚</p>
<p>å®šä¹‰$g_x$ä»£è¡¨è¦†ç›–åˆ°çš„æœ€è¿‘çš„å·²ç»é€‰çš„ç‚¹ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307312224158.webp"
                      alt="image.png"
                ></p>
<p>å¦‚æœæŸä¸ªå…³é”®ç‚¹åˆ°$y$çš„è·ç¦»å³$f_x+g_x\le{K}$ï¼Œé‚£ä¹ˆè¿™ä¸ªå…³é”®ç‚¹å°±ä¼šè¢«æ³¢åŠã€‚</p>
<p>é‚£ä¹ˆå°±å¯ä»¥æ›´æ–°$f_x&#x3D;-INF,g_x&#x3D;0$</p>
<h2 id="1453"><a href="#1453" class="headerlink" title="1453"></a>1453</h2><p>åŸºç¯æ ‘</p>
<p>æ ‘ä¸Šé—®é¢˜æ˜¯æ±‚è§£<strong>æœ€å¤§ç‹¬ç«‹é›†</strong></p>
<p>è®¾$f_{x,0&#x2F;1}$xè¿™ä¸ªç‚¹é€‰&#x2F;ä¸é€‰ï¼Œå­æ ‘çš„æœ€å¤§æƒå€¼</p>
<p>é€‰äº†é‚£å°±æ˜¯xçš„æƒå€¼åŠ ä¸Šå„¿å­éƒ½ä¸èƒ½é€‰</p>
<p>å¯¹æ¯ä¸ªå­æ ‘åšä¸€ä¸ªDPï¼Œæ¯ä¸ªç‚¹å¯¹åº”é€‰è¿™ä¸ªç‚¹å¯¹åº”çš„æƒå€¼å’Œä¸é€‰è¿™ä¸ªç‚¹å¯¹åº”çš„æƒå€¼ã€‚</p>
<h2 id="P4381"><a href="#P4381" class="headerlink" title="P4381"></a>P4381</h2><p>è®¾$f_x$è¡¨ç¤ºä»$x$åˆ°å…¶å­æ ‘çš„æœ€é•¿è·¯å¾„æ˜¯å¤šå°‘ã€‚</p>
<p>æ–­ç¯ä¸ºé“¾ï¼Œè®°å½•é“¾ä¸Šçš„è·¯å¾„å‰ç¼€å’Œ$S$ï¼Œç­”æ¡ˆå°±æ˜¯</p>
<p>æšä¸¾ $y$å¹¶ç»´æŠ¤$x$çš„å‰ç¼€æœ€å¤§å€¼</p>
<h2 id="CF187E"><a href="#CF187E" class="headerlink" title="CF187E"></a>CF187E</h2><p>é€‰äº†æ ¹èŠ‚ç‚¹ä¹‹åï¼Œç­”æ¡ˆå°±æ˜¯æ¯ä¸ªç‚¹çš„å­æ ‘å¤§å°ä¹‹å’Œã€‚</p>
<p><strong>æ¢æ ¹DP</strong></p>
<p>$f_y&#x3D;f_x+n-2\times{size_y}$</p>
<p>æŠŠxæ¢åˆ°å„¿å­yä¸Šã€‚</p>
<h2 id="P2986"><a href="#P2986" class="headerlink" title="P2986"></a>P2986</h2><p>æ¢æ ¹DP</p>
<p>$f_y&#x3D;f_x+size_x\times{w}-size_y\times{w}$</p>
<h2 id="P4438"><a href="#P4438" class="headerlink" title="P4438"></a>P4438</h2><p>å¯¹æ¯ä¸ªç‚¹è®°å½•x yæœ‰å¤šå°‘ï¼Œ</p>
<p>$f_{x,j,k}$xèŠ‚ç‚¹ï¼Œjä¸ªlï¼Œkä¸ªrçš„è´¡çŒ®å¤§å°ã€‚</p>
<h2 id="P2014"><a href="#P2014" class="headerlink" title="P2014"></a>P2014</h2><p>åœ¨xçš„å­æ ‘ä¸­é€‰äº†å¤§å°ä¸ºiçš„å­æ ‘å¾—åˆ°çš„æœ€å¤§ä»·å€¼</p>
<p>$dp_{x,i+j}&#x3D;dp_{x,i}+dp_{y,j}$</p>
<p>$dp_{x,1}&#x3D;a_x$</p>
<p>$O(n^2)$</p>
<p>åªè¦ä¸‹æ ‡å°äºç­‰äº$size$ï¼Œé‚£ä¹ˆå°±æ˜¯ä¸¤ä¸¤é…å¯¹$n^2$çš„</p>
<h2 id="LOJ160"><a href="#LOJ160" class="headerlink" title="LOJ160"></a>LOJ160</h2><p>dfs åºâ€”â€”ådfsä¼˜åŒ–èƒŒåŒ…</p>
<p>å…ˆ dfs å­æ ‘ï¼Œå†æŠŠæ ¹è®¡å…¥ã€‚</p>
<p>åªæœ‰é€’å½’å®Œäº†å­æ ‘ï¼Œæ ¹èŠ‚ç‚¹æ‰ä¼šè¢«å‡å¦‚</p>
<p>$dp_{x,i}$ã€€dfsåºåˆ°äº†xåœ¨è¿™é‡Œï¼Œæ€»é€’å½’å®Œçš„å­æ ‘ä¸ºiçš„æ–¹æ¡ˆ</p>
<p>$dp_{x,i}&#x3D;\max(dp_{x-size_x,i},dp_{x-1,i-w_i}+v_i)$</p>
<h2 id="P1080"><a href="#P1080" class="headerlink" title="P1080"></a>P1080</h2><p>$a_i,b_i$</p>
<p>äº¤æ¢ï¼šå¾®æ‰°æ³•</p>
<p>æŠŠæ‰€æœ‰çš„äººçš„$a_ib_i$æ’åº</p>
<h2 id="P3574"><a href="#P3574" class="headerlink" title="P3574"></a>P3574</h2><p>è®¾$f_x$ä¸ºåªèµ°xå­æ ‘ä¸­çš„ç‚¹ï¼Œæ‰€æ±‚çš„æœ€å°å€¼ã€‚</p>
<p>$dp_i+2\sum_{i&lt;j}size+1$</p>
<p>ç±»ä¼¼äºå›½ç‹çš„æ¸¸æˆ</p>
<p>$b_j+a_i\le{b_i+a_j}$</p>
<p>$a_i-b_i$è¶Šå°è¶Šæ”¾åˆ°å‰é¢ã€‚   </p>
<h1 id="Day9"><a href="#Day9" class="headerlink" title="Day9"></a>Day9</h1><p><strong>NONE</strong></p>
<h1 id="Day10"><a href="#Day10" class="headerlink" title="Day10"></a>Day10</h1><h2 id="1-6"><a href="#1-6" class="headerlink" title="1."></a>1.</h2><h2 id="2-7"><a href="#2-7" class="headerlink" title="2."></a>2.</h2><p>è®¾$dp_{i,j}$ä¸ºä»æŸä¸ª1å¼€å§‹èµ°åˆ°i,jçš„æœ€å°èŠ±è´¹ã€‚</p>
<p>è€Œæ¯ä¸€å±‚ç‚¹ç‰¹åˆ«å¤šçš„æ—¶å€™å°±å¯ä»¥ç”¨å¤šæºæœ€çŸ­è·¯ã€‚</p>
<p>$f_{i,j}&#x3D;\min({f_{i_1,j_1}}+|i-i_1|+|j-j_1|)$</p>
<p>ä»¤$f^1_{i,j}&#x3D;\min({f^1{i_1,j_1}})+i+j$</p>
<p>ç„¶åå°±å¯ä»¥å°†ç¬¬ä¸€ç»´æ’åºï¼Œ</p>
<p>ç„¶åæŸ¥è¯¢çš„æ—¶å€™å°±ç›¸å½“äºæŸ¥è¯¢ç¬¬äºŒç»´çš„åŒºé—´æœ€å°å€¼ï¼Œè¿™æ ·å°±å¯ä»¥ç”¨çº¿æ®µæ ‘æˆ–è€…æ ‘çŠ¶æ•°ç»„æ¥åšã€‚</p>
<p>æ’å…¥ç‚¹çš„ä¼˜å…ˆçº§è¦æ¯”æŸ¥è¯¢çš„ä¼˜å…ˆçº§é«˜ã€‚</p>
<p>å°±å¯ä»¥åˆ†æˆä¸¤ä¸ªè±¡é™æ¥å¤„ç†ï¼Œ$x&lt;0&#x2F;x&gt;0$ã€‚</p>
<h2 id="3-7"><a href="#3-7" class="headerlink" title="3."></a>3.</h2><p>æš´åŠ›æšä¸¾ç‚¹å¯¹å¯ä»¥$n^2$è§£å†³ã€‚</p>
<p>å¯ä»¥å…ˆæŠŠä¸€ä¸ªç‚¹å’Œå®ƒæ‰€æœ‰äº’è´¨çš„ç‚¹éƒ½é¢„å¤„ç†å‡ºæ¥ã€‚</p>
<p>å¯¹æ¯ä¸ªç‚¹ç»´æŠ¤ä¸€ä¸‹åˆ°æ ¹æœ‰å¤šå°‘äº’è´¨çš„ç‚¹ã€‚</p>
<p>ç„¶åå°±å¯ä»¥ç”¨æ ‘ä¸Šå·®åˆ†ï¼Œ$O(n^2)$é¢„å¤„ç†,$O(1)$æŸ¥è¯¢ã€‚</p>
<p>æˆ‘ä»¬åªå…³å¿ƒè´¨å› å­çš„ç§ç±»ï¼Œè€Œä¸æ˜¯ä¸ªæ•°ã€‚</p>
<p>é‚£ä¹ˆå…¶å®å°±æ˜¯ä¸¤ä¸ªé›†åˆçš„äº¤é›†ä¸ºç©ºã€‚</p>
<p>å®¹æ–¥ï¼Ÿ</p>
<p>$(^{r-l+1}<em>2)-\sum_P(^{cut_p}<em>2)+\sum</em>{PQ}(^{cut</em>{PQ}}<em>2)-\sum</em>{PQR}(^{cut_{PQR}}_2)$</p>
<p>åŠ å…¥å…ƒç´ ï¼Ÿ</p>
<p>åˆ å»å…ƒç´ ï¼Ÿ</p>
<h2 id="è«é˜Ÿ"><a href="#è«é˜Ÿ" class="headerlink" title="è«é˜Ÿ"></a>è«é˜Ÿ</h2><p>ä¸€ä¸ªåºåˆ—ï¼Œé•¿åº¦ä¸ºnï¼Œæ¯æ¬¡åŒºé—´è¯¢é—®ã€‚</p>
<p>å…ˆæŠŠè¿™äº›è¯¢é—®æŒ‰ç…§æŸç§æ–¹å¼æ‰“ä¹±é¡ºåºã€‚</p>
<h2 id="pair"><a href="#pair" class="headerlink" title="pair"></a>pair</h2><h2 id="KD-Tree"><a href="#KD-Tree" class="headerlink" title="KD-Tree"></a>KD-Tree</h2><h2 id="Unordered-Map"><a href="#Unordered-Map" class="headerlink" title="Unordered Map"></a>Unordered Map</h2><h1 id="Day11"><a href="#Day11" class="headerlink" title="Day11"></a>Day11</h1><h2 id="1-7"><a href="#1-7" class="headerlink" title="1."></a>1.</h2><p>æŒ‰ç…§aæ’åº</p>
<p>ç»´æŠ¤å‰ç¼€å’Œ</p>
<p>æšä¸¾rçš„åŒæ—¶æ›´æ–°ä¸læœ‰å…³çš„å˜é‡çš„æœ€å°å€¼</p>
<h2 id="2-8"><a href="#2-8" class="headerlink" title="2."></a>2.</h2><p>ä»¤fä¸ºé•¿åº¦ä¸ºiæœ‰jä¸ªé¡¶çš„ä¸ªæ•°</p>
<p>æ¯æ¬¡æ’å…¥æ–°æ’åˆ—çš„æœ€å¤§å€¼ï¼Œ</p>
<p>æ’å…¥å†åŸæœ¬çš„é¡¶æ—è¾¹é¡¶çš„æ•°ä¸ä¼šå˜ï¼Œ</p>
<p>æœ€å·¦è¾¹å’Œæœ€å³è¾¹ä¹Ÿä¸ä¼šå˜ï¼Œå…¶å®ƒåœ°æ–¹é¡¶çš„æ•°é‡å°±ä¼šåŠ ä¸€ã€‚</p>
<h2 id="3-8"><a href="#3-8" class="headerlink" title="3."></a>3.</h2><p>å°†ç‚¹æŒ‰$x_i$æ’åºã€‚</p>
<p>$dp_{i,0&#x2F;1}$è¡¨ç¤ºç¬¬ä»¥iä¸ªç‚¹ä¸ºç«¯ç‚¹å‘å·¦&#x2F;å‘å³çš„æ–¹æ¡ˆæ•°ã€‚</p>
<h2 id="4-7"><a href="#4-7" class="headerlink" title="4."></a>4.</h2><p>å‡å¦‚$a_i&lt;a_j$ï¼Œåœ¨æ»¡è¶³$i&lt;k&lt;j$çš„æƒ…å†µä¸‹ï¼Œ$a_k&gt;a_i$ï¼Œè¿™ä¸ªæ—¶å€™ä»¥$k,j$ä½œä¸ºå‰ä¸¤ä½æ›´ä¼˜ï¼Œå› ä¸ºå¤§å°å’Œç¬¬ä¸‰ä¸ªæ•°çš„é€‰æ‹©èŒƒå›´ï¼›</p>
<p>å‡å¦‚$a_i&gt;a_j$ï¼Œä¸­é—´å­˜åœ¨ä¸€ä¸ª$k$æ»¡è¶³$a_k&gt;a_j$ï¼Œè¿™ä¸ªæ—¶å€™$i,k$æ›´ä¼˜ã€‚</p>
<p>æ‰€ä»¥è¿™ä¸ªæ—¶å€™å¯¹ä¸€ä¸ªç‚¹ï¼Œé€‰å·¦è¾¹&#x2F;å³è¾¹çš„ç¬¬ä¸€ä¸ªæ¯”å®ƒå¤§çš„æ•°æ›´ä¼˜ã€‚</p>
<p>æœ‰ç”¨çš„å‰ä¸¤ä¸ªæ•°åªæœ‰$O(n)$ä¸ªã€‚</p>
<p>å¯¹è¯¢é—®æŒ‰ç…§å·¦ç«¯ç‚¹ä»å¤§åˆ°å°æ’åºã€‚</p>
<p>å¯¹åºåˆ—ä»å³å‘å·¦æ‰«æï¼Œæ¯æ¬¡æ‰¾ä¸€ä¸ªcçš„æœ€å¤§åç¼€ï¼Œä¹Ÿå°±æ˜¯æ‰¾åˆ°$a_i+a_j$çš„æœ€å¤§å€¼ï¼Œæ¥å’Œæˆ‘å½“å‰çš„è¿™ä¸ªç‚¹$k$åŒ¹é…ï¼Œè€Œ$k&gt;&#x3D;$æŸä¸ªæ•°ï¼Œæ‰€ä»¥æ˜¯æœ€å¤§åç¼€ï¼Œç”¨çº¿æ®µæ ‘ç»´æŠ¤ã€‚ </p>
<h2 id="P8819"><a href="#P8819" class="headerlink" title="P8819"></a>P8819</h2><p>ç»™æ¯ä¸ªç‚¹éšæœºä¸€ä¸ªæƒå€¼ï¼Œ</p>
<p>ç»Ÿè®¡æ‰€æœ‰èµ·ç‚¹çš„ç‚¹æƒå’Œå’Œæ‰€æœ‰ç‚¹çš„ç‚¹æƒå’Œã€‚</p>
<p>å¦‚æœç›¸ç­‰ï¼Œé‚£ä¹ˆè¯´æ˜ç¬¦åˆã€‚</p>
<p>é‚£ä¹ˆå°±ç»´æŠ¤æ¯ä¸ªç‚¹ä»¥å®ƒä¸ºç»ˆç‚¹çš„æ¿€æ´»è¾¹çš„èµ·ç‚¹çš„æƒå€¼å’Œä¸æ¯ä¸ªç‚¹ä»¥å®ƒä¸ºç»ˆç‚¹çš„å¤±æ´»è¾¹çš„èµ·ç‚¹çš„æƒå€¼å’Œï¼Œç„¶åæ¯æ¬¡è¿›è¡Œè¿™ç§æ“ä½œçš„æ—¶å€™ç»™å¯¹åº”åŠ ä¸Šæˆ–è€…å‡å»å¯¹åº”æƒå€¼å’Œå³å¯ã€‚</p>
<h1 id="Day12"><a href="#Day12" class="headerlink" title="Day12"></a>Day12</h1><h2 id="1-8"><a href="#1-8" class="headerlink" title="1."></a>1.</h2><p>æµ·åº•é«˜é“</p>
<h2 id="2-9"><a href="#2-9" class="headerlink" title="2."></a>2.</h2><p>åŒDay7 T1</p>
<h2 id="3-9"><a href="#3-9" class="headerlink" title="3."></a>3.</h2><p>æ¯ä¸ªç‚¹è®°å½•ä»¥å®ƒä¸ºå·¦ä¸Šè§’&#x2F;å³ä¸‹è§’ä¸ºé¡¶ç‚¹çš„æ­£æ–¹å½¢çš„æœ€å¤§è¾¹é•¿ï¼Œ</p>
<p>é‚£ä¹ˆè¾¹é•¿åŒºé—´å°±æ˜¯$l\sim{l_{i,j}}$ ã€‚</p>
<p>å¦‚æœç»„æˆæ­£æ–¹å½¢ï¼Œé‚£ä¹ˆä¸¤ç‚¹å¤„äºå¯¹è§’çº¿ä½ç½®ï¼Œå†åˆ¤æ–­å·¦ä¸Šè§’çš„é•¿åº¦æ˜¯å¦åˆæ³•å’Œå³ä¸‹è§’é•¿åº¦æ˜¯å¦åˆæ³•ã€‚</p>
<p>ä¸‰ä¸ªæ¡ä»¶ï¼š</p>
<p>$l_{x_1,y_1}\ge{x_2-x_1}$</p>
<p>$r_{x_2,y_2}\ge{x_2-x_1}$</p>
<p>$x_2-x_1\ge{l}$</p>
<p>æ‰€ä»¥å°±æšä¸¾å¯¹è§’çº¿ï¼Œç®—å¯¹è§’çº¿ä¸Šçš„ä¸¤ä¸ªç‚¹</p>
<p>æšä¸¾$x_2$ï¼Œçœ‹æœ‰å‡ ä¸ªåˆæ³•çš„$x_1$</p>
<p>é‚£å°±åˆ†åˆ«ç®—$1\sim{l-1}$å’Œ$1\sim{r}$æ‰€æœ‰$\ge{x_2-l_{x_1,y_1}}$çš„ç‚¹ï¼Œ$O(1)$æŸ¥è¯¢ã€‚</p>
<p>å¯ä»¥æ ‘çŠ¶æ•°ç»„</p>
<h2 id="4-8"><a href="#4-8" class="headerlink" title="4."></a>4.</h2><blockquote>
<p>åˆæ˜¯å…¨æ’åˆ—</p>
</blockquote>
<p>$dp_{i,j}$ä»£è¡¨è€ƒè™‘äº†å‰iä¸ªæ•°ï¼Œé€‰æ‹©æƒ…å†µä¸ºjï¼ˆäºŒè¿›åˆ¶ä¸‹è¡¨ç¤ºï¼Œ0ä»£è¡¨æœªé€‰ï¼Œ1å¾…é€‰å·²é€‰ï¼‰ï¼Œè¿™ç§æƒ…å†µä¸‹çš„é€†åºå¯¹æ•°ã€‚</p>
<p>çŠ¶å‹ DP</p>
]]></content>
      <categories>
        <category>ACM</category>
      </categories>
      <tags>
        <tag>Training</tag>
      </tags>
  </entry>
  <entry>
    <title>æœç´¢</title>
    <url>/fb242f20.html</url>
    <content><![CDATA[<h1 id="DFS-BFS"><a href="#DFS-BFS" class="headerlink" title="DFS&amp;BFS"></a>DFS&amp;BFS</h1><blockquote>
<p>å¹¿åº¦ä¼˜å…ˆæœç´¢ä¸æ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œè¿™é‡Œä¸å¤šèµ˜è¿°ã€‚</p>
</blockquote>
<p><strong>æ—¶é—´ï¼š</strong> å·®ä¸å¤šï¼Œéƒ½é«˜äº$O(n+m)$</p>
<p><strong>ç©ºé—´ï¼š</strong> BFS ç©ºé—´æ¶ˆè€—è¿œå¤§äº DFSï¼Œå¯¹äºä¸€ä¸ªæ»¡äºŒå‰æ ‘ï¼Œæ¯å‡ºé˜Ÿä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°±ä¼šå…¥é˜Ÿä¸¤ä¸ªèŠ‚ç‚¹ï¼Œåœ¨ç¬¬ $k$ å±‚æ—¶å°†ä¼šæ¶ˆè€— $2^k$ çš„ç©ºé—´ï¼Œ512MB çš„ç©ºé—´æœ€å¤šåªèƒ½åˆ° 29 å±‚ã€‚</p>
<p>æ€»ç»“ï¼šDFS é€‚åˆæ‰¾ä»»æ„å¯è¡Œè§£ï¼ŒBFS é€‚åˆæ‰¾å…¨å±€æœ€ä¼˜è§£ã€‚</p>
<h1 id="DFS"><a href="#DFS" class="headerlink" title="DFS"></a>DFS</h1><h2 id="è¿é€šæ€§"><a href="#è¿é€šæ€§" class="headerlink" title="è¿é€šæ€§"></a>è¿é€šæ€§</h2><blockquote>
<p>å®½æœï¼šqueue<br>æ·±æœï¼šstack</p>
</blockquote>
<p>ä¸€èˆ¬è§£å†³éå†&#x2F;è¿é€šæ€§é—®é¢˜ï¼ŒDFS&#x2F;BFS éƒ½å¯ä»¥åšã€‚</p>
<p>æ·±æœåªèƒ½çŸ¥é“æ˜¯å¦è¿é€šï¼Œä½†ä¸ä¿è¯æœ€çŸ­è·ç¦»ã€‚</p>
<p>è€Œæ·±æœçš„ç é‡æ¯”è¾ƒå°‘ã€‚</p>
<p><a class="link"   href="https://www.acwing.com/activity/content/problem/content/1480/" >AcWing1112<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">110</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">char</span> g[N][N];</span><br><span class="line"><span class="type">bool</span> st[N][N];</span><br><span class="line"><span class="type">int</span> xa, ya, xb, yb;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Dfs</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(g[x][y] == <span class="string">&#x27;#&#x27;</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(x == xb &amp;&amp; y == yb) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    st[x][y] = <span class="literal">true</span>;</span><br><span class="line">    <span class="type">int</span> dx[] = &#123;<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>&#125;, dy[] = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">-1</span>&#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> a = x + dx[i], b = y + dy[i];</span><br><span class="line">        <span class="keyword">if</span>(a &lt; <span class="number">0</span> || a &gt;= n || b &lt; <span class="number">0</span> || b &gt;= n) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">if</span>(st[a][b]) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">Dfs</span>(a, b)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> T;</span><br><span class="line">    cin &gt;&gt; T;</span><br><span class="line">    <span class="keyword">while</span>(T--)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; n;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) cin &gt;&gt; g[i];</span><br><span class="line">        <span class="built_in">memset</span>(st, <span class="number">0</span>, <span class="built_in">sizeof</span>(st));</span><br><span class="line">        cin &gt;&gt; xa &gt;&gt; ya &gt;&gt; xb &gt;&gt; yb;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">Dfs</span>(xa, ya)) <span class="built_in">printf</span>(<span class="string">&quot;YES\n&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;NO\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><a class="link"   href="https://www.acwing.com/activity/content/problem/content/1481/" >A1113<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span> </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">25</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">char</span> g[N][N];</span><br><span class="line"><span class="type">bool</span> st[N][N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">DFS</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> cnt = <span class="number">1</span>;</span><br><span class="line">    st[x][y] = <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> dx[] = &#123;<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>&#125;, dy[] = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">-1</span>&#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> a = x + dx[i], b = y + dy[i];</span><br><span class="line">        <span class="keyword">if</span>(a &lt; <span class="number">0</span> || a &gt;= n || b &lt; <span class="number">0</span> || b &gt;= m) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">if</span>(g[a][b] != <span class="string">&#x27;.&#x27;</span>) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">if</span>(st[a][b]) <span class="keyword">continue</span>;</span><br><span class="line">        cnt += <span class="built_in">DFS</span>(a, b);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; m &gt;&gt; n, n || m)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(st, <span class="number">0</span>, <span class="built_in">sizeof</span>(st));</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">            cin &gt;&gt; g[i];</span><br><span class="line">        <span class="type">int</span> x, y;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; ++j)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(g[i][j] == <span class="string">&#x27;@&#x27;</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    x = i;</span><br><span class="line">                    y = j;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="built_in">DFS</span>(x, y) &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="æœç´¢é¡ºåº"><a href="#æœç´¢é¡ºåº" class="headerlink" title="æœç´¢é¡ºåº"></a>æœç´¢é¡ºåº</h2><p>å°½å¯èƒ½åœ°å‡å°‘åˆ†æ”¯ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202310022038275.webp"
                      alt="image.png"
                ></p>
<p><a class="link"   href="https://www.acwing.com/problem/content/1118/" >AcWing1116<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">11</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> ans;</span><br><span class="line"><span class="type">bool</span> st[N][N];</span><br><span class="line"><span class="type">int</span> dx[] = &#123;<span class="number">-2</span>, <span class="number">-1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">-1</span>, <span class="number">-2</span>&#125;;</span><br><span class="line"><span class="type">int</span> dy[] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">-1</span>, <span class="number">-2</span>, <span class="number">-2</span>, <span class="number">-1</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DFS</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> sum)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(sum == n * m)</span><br><span class="line">    &#123;</span><br><span class="line">        ans++;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(st[x][y]) <span class="keyword">return</span>;</span><br><span class="line">    st[x][y] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> a = x + dx[i], b = y + dy[i];</span><br><span class="line">        <span class="keyword">if</span>(a &lt; <span class="number">0</span> || a &gt;= n || b &lt; <span class="number">0</span> || b &gt;=m) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">if</span>(st[a][b]) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="built_in">DFS</span>(a, b, sum + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    st[x][y] = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> T;</span><br><span class="line">    cin &gt;&gt; T;</span><br><span class="line">    <span class="keyword">while</span>(T--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> x, y;</span><br><span class="line">        cin &gt;&gt; n &gt;&gt; m &gt;&gt; x &gt;&gt; y;</span><br><span class="line">        ans = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">DFS</span>(x, y, <span class="number">1</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><a class="link"   href="https://www.acwing.com/problem/content/description/1119/" >AcWing1117<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">21</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line">string word[N];</span><br><span class="line"><span class="type">int</span> g[N][N];</span><br><span class="line"><span class="type">int</span> used[N];</span><br><span class="line"><span class="type">int</span> ans;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DFS</span><span class="params">(string dragon, <span class="type">int</span> last)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ans = <span class="built_in">max</span>((<span class="type">int</span>)dragon.<span class="built_in">size</span>(), ans);</span><br><span class="line">    used[last]++;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">        <span class="keyword">if</span>(g[last][i] &amp;&amp; used[i] &lt; <span class="number">2</span>)</span><br><span class="line">            <span class="built_in">DFS</span>(dragon + word[i].<span class="built_in">substr</span>(g[last][i]), i);</span><br><span class="line">    used[last]--;</span><br><span class="line">    <span class="comment">// cout &lt;&lt; dragon &lt;&lt; endl;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) cin &gt;&gt; word[i];</span><br><span class="line">    <span class="type">char</span> start;</span><br><span class="line">    cin &gt;&gt; start;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            string a = word[i], b = word[j];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k = <span class="number">1</span>; k &lt; <span class="built_in">min</span>(a.<span class="built_in">size</span>(), b.<span class="built_in">size</span>()); ++k)</span><br><span class="line">                <span class="keyword">if</span>(a.<span class="built_in">substr</span>(a.<span class="built_in">size</span>() - k, k) == b.<span class="built_in">substr</span>(<span class="number">0</span>, k))</span><br><span class="line">                &#123;</span><br><span class="line">                    g[i][j] = k;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">        <span class="keyword">if</span>(word[i][<span class="number">0</span>] == start)</span><br><span class="line">            <span class="built_in">DFS</span>(word[i], i);</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><a class="link"   href="https://www.acwing.com/problem/content/1120/" >P1118<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯ä»¥æ”¾çš„æ—¶å€™å°±æ²¡æœ‰å¿…è¦åŠ </span></span><br><span class="line"><span class="comment">// å› ä¸ºå‡å¦‚æ–°åŠ ä¸€ä¸ªç»„æœ€åå¾—åˆ°äº†æœ€ä¼˜è§£ï¼Œå®Œå…¨å¯ä»¥æ”¾åˆ°ä¸Šä¸€ç»„ä¹Ÿä½¿å¾—æœ€ä¼˜è§£æˆç«‹</span></span><br><span class="line"><span class="comment">// æ‰€ä»¥å°±ä¾æ¬¡åŠ ï¼ŒåŠ æ»¡ä¸ºæ­¢ï¼Œå¹¶ä¸”ä¸è€ƒè™‘é¡ºåºï¼Œé‚£ä¹ˆå°±è¦æŒ‰ç…§ç»„åˆçš„é¡ºåºæœç´¢ã€‚</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> p[N];</span><br><span class="line"><span class="type">int</span> group[N][N];</span><br><span class="line"><span class="type">bool</span> st[N];</span><br><span class="line"><span class="type">int</span> ans = N;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">gcd</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(b == <span class="number">0</span>) <span class="keyword">return</span> a;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">gcd</span>(b, a % b);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(<span class="type">int</span> group[], <span class="type">int</span> gc, <span class="type">int</span> i)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; gc; ++j)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">gcd</span>(p[group[j]], p[i]) &gt; <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DFS</span><span class="params">(<span class="type">int</span> g, <span class="type">int</span> gc, <span class="type">int</span> tc, <span class="type">int</span> start)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(g &gt;= ans) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(tc == n)</span><br><span class="line">        ans = g;</span><br><span class="line">    <span class="type">bool</span> flag = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = start; i &lt; n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(!st[i] &amp;&amp; <span class="built_in">check</span>(group[g], gc, i))</span><br><span class="line">        &#123;</span><br><span class="line">            st[i] = <span class="literal">true</span>;</span><br><span class="line">            group[g][gc] = i;</span><br><span class="line">            <span class="built_in">DFS</span>(g, gc + <span class="number">1</span>, tc + <span class="number">1</span>, i + <span class="number">1</span>);</span><br><span class="line">            st[i] = <span class="literal">false</span>;</span><br><span class="line">            flag = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(flag) <span class="built_in">DFS</span>(g + <span class="number">1</span>, <span class="number">0</span>, tc, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) cin &gt;&gt; p[i];</span><br><span class="line">    <span class="built_in">DFS</span>(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>); <span class="comment">// å…ˆæœç¬¬ä¸€ç»„ï¼Œç»„å†…ç›®å‰æœ‰0ä¸ªå…ƒç´ ï¼Œä¸€å…±æœäº†0ä¸ªå…ƒç´ ï¼Œ ä»0ä¸‹æ ‡å¼€å§‹æœ</span></span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="å‰ªæ"><a href="#å‰ªæ" class="headerlink" title="å‰ªæ"></a>å‰ªæ</h2><p>ä¸ç®¡ä»€ä¹ˆæœç´¢ï¼Œéƒ½å¯ä»¥å¯¹åº”å‡ºä¸€ä¸ªæœç´¢æ ‘ï¼Œå¦‚æœä¸­é—´å¯ä»¥åˆ¤æ–­è¿™ä¸ªå­æ ‘ä¸€å®šä¸åˆæ³•ï¼Œé‚£ä¹ˆå°±æ²¡å¿…è¦æ¥ç€å¾€ä¸‹æœäº†ã€‚</p>
<ol>
<li>ä¼˜åŒ–æœç´¢é¡ºåº</li>
</ol>
<p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åº”è¯¥å…ˆæœç´¢åˆ†æ”¯è¾ƒå°‘çš„èŠ‚ç‚¹ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202310030551562.webp"
                      alt="image.png"
                ></p>
<ol start="2">
<li>æ’é™¤ç­‰æ•ˆå†—ä½™</li>
</ol>
<p>ä¸æœç´¢é‡å¤çš„çŠ¶æ€ï¼Œä¸è€ƒè™‘é¡ºåºçš„è¯å°±é‡‡ç”¨ç»„åˆçš„æ–¹æ³•æ¥æœç´¢ã€‚</p>
<ol start="3">
<li>å¯è¡Œæ€§å‰ªæ</li>
</ol>
<p>æœåˆ°ä¸€åŠå‘ç°ä¸åˆæ³•äº†ã€‚</p>
<ol start="4">
<li>æœ€ä¼˜æ€§å‰ªæ</li>
</ol>
<p>å½“æœç€å‘ç°ä¸€å®šä¸æ˜¯æœ€ä¼˜è§£ï¼Œé‚£ä¹ˆå°±ä¸ç»§ç»­æœäº†</p>
<ol start="5">
<li>è®°å¿†åŒ–æœç´¢</li>
</ol>
<p>å…¶å®å°±æ˜¯ DP</p>
<hr>
<p><a class="link"   href="https://www.acwing.com/problem/content/167/" >AcWing165<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> w[N];</span><br><span class="line"><span class="type">int</span> sum[N];</span><br><span class="line"><span class="type">int</span> ans = N;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DFS</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(k &gt;= ans) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(u == n)</span><br><span class="line">    &#123;</span><br><span class="line">        ans = k;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; k; ++i)</span><br><span class="line">        <span class="keyword">if</span>(sum[i] + w[u] &lt;= m)</span><br><span class="line">        &#123;</span><br><span class="line">            sum[i] += w[u];</span><br><span class="line">            <span class="built_in">DFS</span>(u + <span class="number">1</span>, k);</span><br><span class="line">            sum[i] -= w[u];</span><br><span class="line">        &#125;</span><br><span class="line">    sum[k] = w[u];</span><br><span class="line">    <span class="built_in">DFS</span>(u + <span class="number">1</span>, k + <span class="number">1</span>);</span><br><span class="line">    sum[k] = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¯é€’å½’ä¸€å±‚ï¼Œå°±å¯ä»¥æ”¾ä¸€ä¸ªå°çŒ«ï¼Œæ‰€ä»¥æ”¾åˆ°ç¬¬ n å±‚çš„æ—¶å€™å°±æ”¾å®Œäº†</span></span><br><span class="line"><span class="comment">// å¯¹äºä»»ä½•ä¸€ä¸ªæ–¹æ¡ˆéƒ½å¯ä»¥è¢«æšä¸¾åˆ°</span></span><br><span class="line"><span class="comment">// å¯¹äºä¸€ä¸ªæ¯”è¾ƒè½»çš„çŒ«ï¼Œå’Œä¸€ä¸ªé‡çš„ï¼Œé‡çš„å¯ä»¥ä½¿é€‰æ‹©æ•°å‡å°‘ï¼Œæ‰€ä»¥è¦ä»å¤§åˆ°å°æ’åº</span></span><br><span class="line"><span class="comment">// è¶…è½½äº†è¦ç æ‰</span></span><br><span class="line"><span class="comment">// è¶…è¿‡äº†å½“å‰æœ€ä¼˜ç­”æ¡ˆï¼Œç æ‰</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) cin &gt;&gt; w[i];</span><br><span class="line">    <span class="built_in">sort</span>(w, w + n);</span><br><span class="line">    <span class="built_in">reverse</span>(w, w + n);</span><br><span class="line">    <span class="built_in">DFS</span>(<span class="number">0</span>, <span class="number">0</span>); <span class="comment">// å½“å‰å°çŒ«çš„ä¸‹æ ‡ï¼Œå½“å‰ç”¨äº†å‡ è¾†è½¦</span></span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><a class="link"   href="https://www.acwing.com/problem/content/168/" >AcWing166<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure></div>

<p><a class="link"   href="https://www.acwing.com/problem/content/168/" >AcWing166<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// #include &lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lowbit(x) ((x) &amp; (-x))</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// éšæ„é€‰æ‹©ç©ºæ ¼å­ï¼Œæšä¸¾ç©ºæ ¼å­å’Œå®ƒä¸Šé¢å¯ä»¥å¡«çš„æ•°å­—</span></span><br><span class="line"><span class="comment">// å¡«å®Œçš„æ—¶å€™å°±æœå®Œäº†</span></span><br><span class="line"><span class="comment">// ä¼˜åŒ–æœç´¢é¡ºåºï¼š é€‰æ‹©å“ªä¸ªç©ºæ ¼å­ï¼Ÿä¼˜å…ˆé€‰æ‹©å¯ä»¥å¡«çš„æ•°è¾ƒå°‘çš„æ ¼å­</span></span><br><span class="line"><span class="comment">// å¯è¡Œæ€§å‰ªæ</span></span><br><span class="line"><span class="comment">// ä½è¿ç®—ï¼šçŠ¶æ€å‹ç¼©ï¼Œæ¥è¡¨ç¤ºæ¯ä¸€è¡Œçš„çŠ¶æ€</span></span><br><span class="line"><span class="comment">// lowbit å¿«é€Ÿæ‰¾æœ€åä¸€ä¸ª1</span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">9</span>, M = <span class="number">1</span> &lt;&lt; N;</span><br><span class="line"><span class="type">int</span> ones[M], mp[M];</span><br><span class="line"><span class="type">int</span> row[N], col[N], cell[<span class="number">3</span>][<span class="number">3</span>]; <span class="comment">// åˆ†åˆ«ä»£è¡¨è¿™ä¸€è¡Œ/è¿™ä¸€åˆ—/è¿™ä¸€ä¸ªä¹å®«æ ¼é‡Œè¿˜å¯ä»¥å¡«å“ªäº›æ•°ï¼ŒçŠ¶æ€å‹ç¼©</span></span><br><span class="line"><span class="type">char</span> str[<span class="number">100</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; N; ++i)</span><br><span class="line">        row[i] = col[i] = (<span class="number">1</span> &lt;&lt; N) - <span class="number">1</span>; <span class="comment">// ä¸€å¼€å§‹æ¯ä¸€è¡Œæ¯ä¸€åˆ—çš„æ¯ä¸€ä¸ªä½ç½®éƒ½å¯ä»¥æ”¾</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; ++i)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">3</span>; ++j)</span><br><span class="line">            cell[i][j] = (<span class="number">1</span> &lt;&lt; N) - <span class="number">1</span>; <span class="comment">// æ¯ä¸€ä¸ªä¹å®«æ ¼çš„æ¯ä¸€ä¸ªä½ç½®éƒ½å¯ä»¥æ”¾</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> row[x] &amp; col[y] &amp; cell[x / <span class="number">3</span>][y / <span class="number">3</span>];<span class="comment">//å“ªäº›æ•°èƒ½å¡«ï¼Œä¸ä¸€ä¸‹</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">draw</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> t, <span class="type">bool</span> is_set)</span> <span class="comment">//ä¿®æ”¹/æ¸…ç©º</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(is_set) str[x * N + y] = <span class="string">&#x27;1&#x27;</span> + t;</span><br><span class="line">    <span class="keyword">else</span> str[x * N + y] = <span class="string">&#x27;.&#x27;</span>;</span><br><span class="line">    <span class="type">int</span> v = <span class="number">1</span> &lt;&lt; t;</span><br><span class="line">    <span class="keyword">if</span>(!is_set) v = -v;</span><br><span class="line">    row[x] -= v; <span class="comment">// tå¯ä»¥ç”¨çš„ä½ç½®è¢«å æ®</span></span><br><span class="line">    col[y] -= v;</span><br><span class="line">    cell[x / <span class="number">3</span>][y / <span class="number">3</span>] -= v;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">DFS</span><span class="params">(<span class="type">int</span> cnt)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!cnt) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="type">int</span> minv = <span class="number">10</span>; <span class="comment">// æœ€å¤šæœ‰ä¹ä¸ªåˆ†æ”¯ï¼Œå–æœ€å°å€¼ï¼Œåˆå§‹å€¼è®¾ä¸º10</span></span><br><span class="line">    <span class="type">int</span> x, y;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; N; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; N; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(str[i * N + j] == <span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">int</span> state = <span class="built_in">get</span>(i, j); <span class="comment">// å¾—åˆ°è¿™ä¸ªçŠ¶æ€æœ‰å¤šå°‘ä¸ª1</span></span><br><span class="line">                <span class="keyword">if</span>(ones[state] &lt; minv)</span><br><span class="line">                &#123;</span><br><span class="line">                    minv = ones[state];</span><br><span class="line">                    x = i, y = j;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> state = <span class="built_in">get</span>(x, y);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = state; i; i -= <span class="built_in">lowbit</span>(i))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> t = mp[<span class="built_in">lowbit</span>(i)];</span><br><span class="line">        <span class="built_in">draw</span>(x, y, t, <span class="literal">true</span>);</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">DFS</span>(cnt - <span class="number">1</span>)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="built_in">draw</span>(x, y, t, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; N; ++i) mp[<span class="number">1</span> &lt;&lt; i] = i; <span class="comment">// æ¯ä¸ªçŠ¶æ€å¯¹åº”ç€ç¬¬å‡ ä¸ªä½ç½®è¢«é€‰</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1</span> &lt;&lt; N; ++i)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; N; ++j)</span><br><span class="line">            ones[i] += i &gt;&gt; j &amp; <span class="number">1</span>; <span class="comment">// è¿™ä¸ªçŠ¶æ€æœ‰å¤šå°‘ä¸ª1</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, str), str[<span class="number">0</span>] != <span class="string">&#x27;e&#x27;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">init</span>();</span><br><span class="line">        <span class="type">int</span> cnt = <span class="number">0</span>; <span class="comment">// æœ‰å¤šå°‘ç©ºä½</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>, k = <span class="number">0</span>; i &lt; N; ++i)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; N; ++j, ++k)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(str[k] != <span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="type">int</span> t = str[k] - <span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">                    <span class="built_in">draw</span>(i, j, t, <span class="literal">true</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> cnt++;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="built_in">DFS</span>(cnt);</span><br><span class="line">        <span class="built_in">puts</span>(str);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><a class="link"   href="https://www.acwing.com/problem/content/description/169/" >AcWing167<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">70</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> w[N], sum, length;</span><br><span class="line"><span class="type">bool</span> st[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">DFS</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> s, <span class="type">int</span> start)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(u * length == sum) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span>(s == length) <span class="keyword">return</span> <span class="built_in">DFS</span>(u + <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="comment">// å‰ªæ 3-1 æŒ‰ç…§ç»„åˆæ–¹å¼æšä¸¾</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = start; i &lt; n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(st[i]) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">if</span>(s + w[i] &gt; length) <span class="keyword">continue</span>;</span><br><span class="line">        st[i] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">DFS</span>(u, s + w[i], i + <span class="number">1</span>)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        st[i] = <span class="literal">false</span>;</span><br><span class="line">        <span class="comment">// å‰ªæ 3-3 è¿™æ ¹è¦æ‹¼çš„æœ¨æ£’ç¬¬ä¸€ä¸ªæœ¨æ£å°±ä¸è¡Œæ²¡å¿…è¦çœ‹</span></span><br><span class="line">        <span class="keyword">if</span>(!s) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="comment">// å‰ªæ 3-4 è¿™æ ¹è¦æ‹¼çš„æœ¨æ£’æœ€åä¸€ä¸ªæœ¨æ£ä¸è¡Œä¹Ÿæ²¡å¿…è¦çœ‹</span></span><br><span class="line">        <span class="keyword">if</span>(s + w[i] == length) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="type">int</span> j = i;</span><br><span class="line">        <span class="comment">// å‰ªæ 3-2 ç›¸åŒé•¿åº¦çš„ä¸è¡Œçš„æ²¡å¿…è¦é‡å¤çœ‹</span></span><br><span class="line">        <span class="keyword">while</span>(j &lt; n &amp;&amp; w[j] == w[i]) j++;</span><br><span class="line">        i = j - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; n, n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(st, <span class="number">0</span>, <span class="built_in">sizeof</span>(st));</span><br><span class="line">        sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; w[i];</span><br><span class="line">            sum += w[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">sort</span>(w, w + n);</span><br><span class="line">        <span class="built_in">reverse</span>(w, w + n); <span class="comment">// å‰ªæ2 ä»å¤§åˆ°å°æšä¸¾ï¼Œå‡å°‘åˆ†æ”¯</span></span><br><span class="line">        length = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// å½“å‰æ‹¼çš„è¿™æ ¹æœ¨æ£’çš„ç¼–å·ï¼Œå½“å‰æ‹¼çš„è¿™æ ¹æœ¨æ£’çš„é•¿åº¦ï¼Œä»ç¬¬å‡ æ ¹æœ¨æ£å¼€å§‹æ‹¼</span></span><br><span class="line">            <span class="keyword">if</span>(sum % length == <span class="number">0</span> &amp;&amp; <span class="built_in">DFS</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)) <span class="comment">// å‰ªæ1 åªæœ‰èƒ½æ•´é™¤æ‰æ˜¯åˆæ³•çš„</span></span><br><span class="line">            &#123;</span><br><span class="line">                cout &lt;&lt; length &lt;&lt; endl;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            length++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="è¿­ä»£åŠ æ·±"><a href="#è¿­ä»£åŠ æ·±" class="headerlink" title="è¿­ä»£åŠ æ·±"></a>è¿­ä»£åŠ æ·±</h2><p>æœç´¢æ ‘å¯èƒ½ä¼šæ¯”è¾ƒæ·±ï¼Œä½†åˆæ³•æ–¹æ¡ˆåœ¨ä¸€ä¸ªæ¯”è¾ƒæµ…çš„ä½ç½®ã€‚</p>
<p>é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä¸€å±‚ä¸€å±‚åœ°æœï¼Œä¸æ–­å¢å¤§æœç´¢åŒºï¼Œæœ‰ç‚¹åƒ BFSã€‚</p>
<p>å®½æœç©ºé—´æ˜¯æŒ‡æ•°çº§åˆ«çš„ï¼Œè€Œè¿­ä»£åŠ æ·±çš„å¤æ‚åº¦æ˜¯çº¿æ€§çš„ã€‚</p>
<p>å…¶å®å°±æ˜¯æŒ‰ç…§ BFS æ–¹å¼æ‰©å±•ï¼ŒæŒ‰ç…§ DFS çš„æ–¹å¼æœç´¢ã€‚</p>
<p><a class="link"   href="https://www.acwing.com/problem/content/172/" >AcWing170<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>æ¯”å¦‚è¿™é“é¢˜ï¼Œæœ€å¤§å¯ä»¥åˆ°è¾¾ 100 å±‚ï¼Œä½†æ˜¯æœ€å¿« 7 å±‚å°±å¯ä»¥åˆ°è¾¾ï¼Œæ‰€ä»¥æ²¡å¿…è¦æœé‚£ä¹ˆå¤šï¼Œå°±å¯ä»¥ç”¨è¿­ä»£åŠ æ·±æ¥åšã€‚</p>
<p>å‰ªæï¼š</p>
<ol>
<li>ä¼˜å…ˆæšä¸¾è¾ƒå¤§çš„æ•°ã€‚</li>
<li>æ’é™¤ç­‰æ•ˆå†—ä½™ï¼Œæšä¸¾ä¸‹ä¸€ä¸ªæ•°çš„æ—¶å€™ï¼Œå¯ä»¥æšä¸¾ä¹‹å‰ä¸¤ä¸ªæ•°çš„å’Œã€‚åˆ¤æ–­ä¸€ä¸‹æ¯ä¸ªæ•°æœ‰æ²¡æœ‰è¢«æšä¸¾è¿‡ã€‚</li>
</ol>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">110</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> path[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">DFS</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> depth)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(u &gt; depth)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="type">bool</span> st[N] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">if</span>(path[u - <span class="number">1</span>] == n) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = u - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = i; j &gt;=<span class="number">0</span>; j--)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> s = path[i] + path[j];</span><br><span class="line">            <span class="keyword">if</span>(s &gt; n || s &lt;= path[u - <span class="number">1</span>] || st[s]) <span class="keyword">continue</span>;</span><br><span class="line">            st[s] = <span class="literal">true</span>;</span><br><span class="line">            path[u] = s;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">DFS</span>(u + <span class="number">1</span>, depth)) <span class="keyword">return</span> <span class="literal">true</span>; </span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    path[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; n, n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> depth = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(!<span class="built_in">DFS</span>(<span class="number">1</span>, depth)) depth++;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; depth; ++i)</span><br><span class="line">            cout &lt;&lt; path[i] &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="åŒå‘DFS"><a href="#åŒå‘DFS" class="headerlink" title="åŒå‘DFS"></a>åŒå‘DFS</h2><p>ä¸åŒå‘ BFS åŸç†ç›¸åŒã€‚</p>
<p><a class="link"   href="https://www.acwing.com/problem/content/173/" >AcWing171<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>è¿™ä¸ªé¢˜ä¸èƒ½ç”¨èƒŒåŒ…å†™ï¼Œå› ä¸ºä½“ç§¯å¾ˆå¤§ã€‚</p>
<p>é‚£å°±çˆ†æœï¼Œä»¥æ­¤æšä¸¾æ¯ä¸ªç‰©å“é€‰æˆ–è€…ä¸é€‰ï¼Œé‚£å°±æ˜¯ $2^{46}$ï¼Œæƒ³æƒ³ä¼˜åŒ–ã€‚</p>
<p>å…ˆçœ‹çœ‹å‰ä¸€åŠç‰©å“èƒ½å‡‘å‡ºæ¥çš„é‡é‡æœ‰å“ªäº›ã€‚</p>
<p>é‚£ä¹ˆå°±æ˜¯ $2^{23}$ å¯ä»¥æ’åº+åˆ¤é‡ã€‚</p>
<p>ç„¶åå†æšä¸¾åä¸€åŠçš„ç‰©å“é€‰&#x2F;ä¸é€‰ï¼Œ</p>
<p>é‚£å°±çœ‹ä¸‹åé¢æœ‰æ²¡æœ‰ $s + l \le w$</p>
<p>é‚£å¦‚ä½•æ‰¾åˆ°ä¸€ä¸ªå°äºç­‰äºæŸä¸ªæ•°çš„æœ€å¤§å€¼å‘¢ï¼ŸäºŒåˆ†ã€‚</p>
<p>$2^{\frac{N}{2}}+2^{\frac{N}{2}}\times{\frac{N}{2}}$ï¼Œå…¶å®å°±æ˜¯å…ˆçˆ†æœå‡ºå‰ä¸€åŠï¼Œç„¶åæŠŠå®ƒå­˜ä¸‹æ¥ï¼Œå†çˆ†æœåä¸€åŠï¼Œç”¨åˆ°å‰ä¸€åŠçš„æ—¶å€™ç›´æ¥æŸ¥å°±å¯ä»¥äº†ï¼Œç›¸å½“äºç©ºé—´æ¢æ—¶é—´ã€‚</p>
<p>ç”±äºç¬¬äºŒéƒ¨åˆ†éœ€è¦ç”¨åˆ°äºŒåˆ†ï¼Œæ‰€ä»¥ä¸€å¼€å§‹å¯ä»¥å¤šé¢„å¤„ç†ä¸€äº›ï¼Œé™ä½æ€»ä½“æ—¶é—´å¤æ‚åº¦ã€‚</p>
<p>æšä¸¾é¡ºåºï¼šå…ˆæšä¸¾å¤§çš„æ•°ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202310031557311.webp"
                      alt="image.png|400"
                ></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">46</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> w[N];</span><br><span class="line"><span class="type">int</span> k;</span><br><span class="line"><span class="type">int</span> weights[<span class="number">1</span> &lt;&lt; <span class="number">25</span>], cnt = <span class="number">1</span>; <span class="comment">// weights[0] = 0</span></span><br><span class="line"><span class="type">int</span> ans;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DFS1</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(u == k)</span><br><span class="line">    &#123;</span><br><span class="line">        weights[cnt++] = s;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">DFS1</span>(u + <span class="number">1</span>, s);</span><br><span class="line">    <span class="keyword">if</span>((ll)s + w[u] &lt;= m) <span class="built_in">DFS1</span>(u + <span class="number">1</span>, s + w[u]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DFS2</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(u == n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> l = <span class="number">0</span>, r = cnt - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(l &lt; r)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> mid = l + r + <span class="number">1</span> &gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(weights[mid] &lt;= m - s) l = mid;</span><br><span class="line">            <span class="keyword">else</span> r = mid - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ans = <span class="built_in">max</span>(ans, weights[l] + s);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">DFS2</span>(u + <span class="number">1</span>, s);</span><br><span class="line">    <span class="keyword">if</span>((ll)s + w[u] &lt;= m) <span class="built_in">DFS2</span>(u + <span class="number">1</span>, s + w[u]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; m &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) cin &gt;&gt; w[i];</span><br><span class="line">    <span class="built_in">sort</span>(w, w + n);</span><br><span class="line">    <span class="built_in">reverse</span>(w, w + n);</span><br><span class="line">    k = n / <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">DFS1</span>(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">sort</span>(weights, weights + cnt);</span><br><span class="line">    cnt = <span class="built_in">unique</span>(weights, weights + cnt) - weights;</span><br><span class="line">    <span class="built_in">DFS2</span>(k, <span class="number">0</span>);</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="IDA-Star"><a href="#IDA-Star" class="headerlink" title="IDA-Star"></a>IDA-Star</h2><blockquote>
<p>ä¸€èˆ¬é…åˆè¿­ä»£åŠ æ·±æ¥åš</p>
</blockquote>
<p>æœ‰ä¸€ä¸ªå±‚æ•°ä¸Šé™ï¼Œåœ¨æ¯ä¸ªèŠ‚ç‚¹çš„ä½ç½®ï¼Œéƒ½è¦é¢„ä¼°ä¸€ä¸‹æœ€å°‘éœ€è¦å¤šå°‘æ­¥æ‰èƒ½å¾—åˆ°æˆ‘æƒ³è¦çš„ç­”æ¡ˆã€‚</p>
<p>å¦‚æœä¸€å®šåœ¨å±‚æ•°ä¸Šé™ä¹‹å¤–çš„è¯ï¼Œé‚£ä¹ˆå°±è¦æ‰©å¤§èŒƒå›´ï¼Œè¿™ä¹Ÿç›¸å½“äºè¿­ä»£åŠ æ·±çš„ä¸€ä¸ªå‰ªæã€‚</p>
<p>åªéœ€è¦ä¿è¯<strong>ä¼°ä»·å‡½æ•°å°äºç­‰äºçœŸå®å€¼</strong>å³å¯ï¼Œé‚£ä¹ˆæ­£ç¡®æ€§å°±æ˜¯å¾ˆæ˜¾ç„¶çš„ã€‚</p>
<p>è€Œä¸”ä¸éœ€è¦ä¼˜å…ˆé˜Ÿåˆ—ï¼Œæ‰€ä»¥ç é‡æ¯”è¾ƒå°ã€‚</p>
<p><a class="link"   href="https://www.acwing.com/problem/content/182/" >AcWing180<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>å¯¹äºä¸€æ®µé•¿åº¦ä¸º $i$ çš„åŒºé—´ï¼Œä¸€å…±æœ‰ $n - i + 1$ ç§é€‰æ‹©ï¼Œç„¶åå‰©ä¸‹ $n - i$ æœ¬ä¹¦ï¼Œè¿˜å‰©ä¸‹ $n - i$ ä¸ªç©ºè£†ï¼Œæ‰€ä»¥ä¸€å…±æœ‰ $(n-i+1)\times(n-i)$ ç§é€‰æ‹©ï¼Œ</p>
<p>äºæ˜¯ä¸€å…±æœ‰ $\sum_{i &#x3D; 1}^n(n-i+1)\times(n-i)$ ç§é€‰æ‹©ã€‚</p>
<p>è¿™é‡Œé¢æ˜¯æœ‰é‡å¤çš„ï¼Œæ¯”å¦‚ç›¸å¯¹ä½ç§»æ˜¯ç­‰æ•ˆçš„ã€‚</p>
<p>æ‰€ä»¥è¦é™¤ä»¥äºŒã€‚</p>
<p>$\frac{1\times2+2\times3+\dots+n\times(n+1)}{2}&#x3D;\frac{n\times(n-1)\times(n-2)}{3 \times2}$</p>
<p>ä¹Ÿå°±æ˜¯æ¯æ¬¡æœ‰ 560 ç§é€‰æ‹©ï¼Œä¸€å…±æœ€å¤šé€‰å››æ¬¡ï¼Œæ‰€ä»¥ç†è®ºå¤æ‚åº¦ä¸º $560^4$ï¼Œå¦‚æœç”¨åŒå‘å¹¿æœ&#x2F;åŒå‘æ·±æœä¹Ÿå¯ä»¥è¿‡ã€‚</p>
<p>æœ€å°‘æ’å¤šå°‘æ¬¡ï¼Ÿ</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202310040505446.webp"
                      alt="image.png"
                ></p>
<p>æ¯æ¬¡ä¼šæ›´æ”¹ 3 ä¸ªåç»§ï¼Œç»Ÿè®¡ä¸€ä¸‹åºåˆ—ä¸­æ‰€æœ‰éœ€è¦è¢«æ›´æ”¹çš„åç»§ï¼Œé‚£ä¹ˆæœ€å°æ›´æ”¹æ¬¡æ•°å°±æ˜¯ $\lceil\frac{tot}{3}\rceil$ å¯ä»¥ä½œä¸ºä¼°ä»·å‡½æ•°ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202310040555098.webp"
                      alt="image.png"
                ></p>
<p>#Q ä¸ºä»€ä¹ˆè¿™æ ·ä¼šTLEï¼Ÿï¼Ÿï¼Ÿ</p>
<p>å› ä¸ºåˆ¤æ–­æ¡ä»¶åº”è¯¥å…ˆåˆ¤æ–­æ·±åº¦å†å» DFSã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">15</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> q[N];</span><br><span class="line"><span class="type">int</span> w[<span class="number">5</span>][N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">f</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> tot = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i + <span class="number">1</span> &lt; n; ++i)</span><br><span class="line">        <span class="comment">// tot += (q[i + 1] != q[i] + 1);</span></span><br><span class="line">        <span class="keyword">if</span>(q[i + <span class="number">1</span>] != q[i] + <span class="number">1</span>) tot++;</span><br><span class="line">    <span class="keyword">return</span> (tot + <span class="number">2</span>) / <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">DFS</span><span class="params">(<span class="type">int</span> depth, <span class="type">int</span> max_depth)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(depth + <span class="built_in">f</span>() &gt; max_depth) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">f</span>() == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> l = <span class="number">0</span>; l + i - <span class="number">1</span> &lt; n; l++)</span><br><span class="line">    <span class="comment">// for(int l = 0; l &lt; n; l++)</span></span><br><span class="line">    <span class="comment">//     for(int r = l; r &lt; n; r++)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> r = l + i - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k = r + <span class="number">1</span>; k &lt; n; k++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">memcpy</span>(w[depth], q, <span class="built_in">sizeof</span>(q));</span><br><span class="line">                <span class="type">int</span> y = l;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> x = r + <span class="number">1</span>; x &lt;= k; x++, y++)</span><br><span class="line">                    q[y] = w[depth][x];</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> x = l; x &lt;= r; x++, y++)</span><br><span class="line">                    q[y] = w[depth][x];</span><br><span class="line">                <span class="keyword">if</span>(<span class="built_in">DFS</span>(depth + <span class="number">1</span>, max_depth)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                <span class="built_in">memcpy</span>(q, w[depth], <span class="built_in">sizeof</span>(w[depth]));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;q[i]);</span><br><span class="line">        <span class="type">int</span> depth = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(depth &lt; <span class="number">5</span> &amp;&amp; !<span class="built_in">DFS</span>(<span class="number">0</span>, depth)) depth++; <span class="comment">// åˆ¤æ–­é¡ºåºä¸è¦é”™äº†ï¼</span></span><br><span class="line">        <span class="keyword">if</span>(depth &gt;= <span class="number">5</span>)</span><br><span class="line">            <span class="built_in">puts</span>(<span class="string">&quot;5 or more&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, depth);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><a class="link"   href="https://www.acwing.com/problem/content/183/" >AcWing181<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>æŠŠä¸­é—´çš„å…«ä¸ªæ ¼å­å˜æˆåŒä¸€ä¸ªæ•°ï¼Œè¾“å‡ºæœ€çŸ­çš„ä¸€ä¸ªæ“ä½œåºåˆ—ï¼ˆå­—å…¸åºæœ€å°ï¼‰ï¼›</p>
<p>å¹¶ä¸”è¾“å‡ºæœ€åå˜æˆäº†ä»€ä¹ˆæ•°å­—ã€‚</p>
<p>æŒ‰ç…§å­—å…¸åºæšä¸¾å»çˆ†æœå°±å¯ä»¥å¾—åˆ°å­—å…¸åºæœ€å°çš„æ“ä½œã€‚</p>
<p>å¯èƒ½çš„æ“ä½œæ·±åº¦ä¼šå¾ˆæ·±ï¼Œä½†æ˜¯æœ€ç»ˆç­”æ¡ˆä¸ä¼šå¾ˆæ·±ï¼Œå¾ˆé€‚åˆè¿­ä»£åŠ æ·±ã€‚</p>
<p>ä¼°ä»·å‡½æ•°ï¼š</p>
<p>å¯¹äºä¸­é—´å…«ä¸ªæ ¼å­æ¯æ¬¡æŠŠä¸€ä¸ªæ ¼å­æ‹‰å‡ºå»ï¼Œå†æ‹‰è¿›æ¥ï¼Œç›¸å½“äºæ¯æ¬¡åªèƒ½æ”¹å˜ä¸€ä¸ªæ ¼å­çš„å€¼ã€‚</p>
<p>ç„¶åæ¯æ¬¡ç»Ÿè®¡ä¸€ä¸‹ä¸­é—´å…«ä¸ªæ ¼å­é‡Œå‡ºç°æœ€å¤šçš„æ•°ï¼Œç”¨ 8 å‡å»å®ƒå°±æ˜¯ä¼°ä»·ï¼Œä¹Ÿå°±æ˜¯æœ€å°‘éœ€è¦æ“ä½œçš„æ¬¡æ•°ã€‚</p>
<p>å¯¹äºæ“ä½œï¼Œå¯ä»¥äººå·¥æ‰“ä¸€ä¸ªè¡¨ï¼Œå¯¹æ¯ä¸€ä¸ªæ“ä½œçš„åºåˆ—å†™å‡ºæ¥ã€‚</p>
<p>å°ä¼˜åŒ–ï¼šå¦‚æœä¸Šä¸€æ¬¡æ‹‰äº†ä¸€ä¸‹ï¼Œè¿™æ¬¡ä¸èƒ½æ˜¯åå‘æ“ä½œã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202310040616980.webp"
                      alt="image.png"
                ></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">24</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> op[<span class="number">8</span>][<span class="number">7</span>] = &#123;</span><br><span class="line">    &#123;<span class="number">0</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">11</span>, <span class="number">15</span>, <span class="number">20</span>, <span class="number">22</span>&#125;,</span><br><span class="line">    &#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">8</span>, <span class="number">12</span>, <span class="number">17</span>, <span class="number">21</span>, <span class="number">23</span>&#125;,</span><br><span class="line">    &#123;<span class="number">10</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>&#125;,</span><br><span class="line">    &#123;<span class="number">19</span>, <span class="number">18</span>, <span class="number">17</span>, <span class="number">16</span>, <span class="number">15</span>, <span class="number">14</span>, <span class="number">13</span>&#125;,</span><br><span class="line">    &#123;<span class="number">23</span>, <span class="number">21</span>, <span class="number">17</span>, <span class="number">12</span>, <span class="number">8</span>, <span class="number">3</span>, <span class="number">1</span>&#125;,</span><br><span class="line">    &#123;<span class="number">22</span>, <span class="number">20</span>, <span class="number">15</span>, <span class="number">11</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">0</span>&#125;,</span><br><span class="line">    &#123;<span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>&#125;,</span><br><span class="line">    &#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>&#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> opposite[] = &#123;<span class="number">5</span>, <span class="number">4</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">2</span>&#125;;</span><br><span class="line"><span class="type">int</span> center[] = &#123;<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>&#125;;</span><br><span class="line"><span class="type">int</span> q[N];</span><br><span class="line"><span class="type">int</span> path[<span class="number">100</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">f</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// static?</span></span><br><span class="line">    <span class="type">int</span> sum[<span class="number">4</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; ++i) sum[q[center[i]]]++;</span><br><span class="line">    <span class="type">int</span> s = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">3</span>; ++i) s = <span class="built_in">max</span>(sum[i], s);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">8</span> - s;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operate</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> t = q[op[x][<span class="number">0</span>]];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++) q[op[x][i]] = q[op[x][i + <span class="number">1</span>]];</span><br><span class="line">    q[op[x][<span class="number">6</span>]] = t;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">DFS</span><span class="params">(<span class="type">int</span> depth, <span class="type">int</span> max_depth, <span class="type">int</span> last)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(depth + <span class="built_in">f</span>() &gt; max_depth) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">f</span>() == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++)</span><br><span class="line">        <span class="keyword">if</span>(last != opposite[i]) <span class="comment">// é˜²æ­¢ç¬¬ä¸€æ¬¡-1</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">operate</span>(i);</span><br><span class="line">            path[depth] = i;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">DFS</span>(depth + <span class="number">1</span>, max_depth, i)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            <span class="built_in">operate</span>(opposite[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; q[<span class="number">0</span>], q[<span class="number">0</span>])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; N; i++) cin &gt;&gt; q[i];</span><br><span class="line">        <span class="type">int</span> depth = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(!<span class="built_in">DFS</span>(<span class="number">0</span>, depth, <span class="number">-1</span>)) depth++;</span><br><span class="line">        <span class="keyword">if</span>(!depth) <span class="built_in">printf</span>(<span class="string">&quot;No moves needed&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; depth; i++)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, path[i] + <span class="string">&#x27;A&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n%d\n&quot;</span>, q[<span class="number">6</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="BFS"><a href="#BFS" class="headerlink" title="BFS"></a>BFS</h1><blockquote>
<p>åˆ†ä¸ºæœ€çŸ­è·ç¦»ï¼ˆèµ°è¿·å®«ï¼‰å’Œæœ€å°æ­¥æ•°ä¸¤ç±»é—®é¢˜</p>
</blockquote>
<ul>
<li>å¯ä»¥è§£å†³æ±‚æœ€å°çš„é—®é¢˜ã€‚</li>
<li>åŸºäºè¿­ä»£ï¼Œä¸ä¼šçˆ†æ ˆã€‚</li>
</ul>
<p><strong>æœ€çŸ­è·ç¦»ï¼š</strong></p>
<p>åœ¨ä¸€ä¸ªäºŒç»´çŸ©é˜µä¸­ä»æŸä¸ªç‚¹èµ°åˆ°å¦ä¸€ä¸ªç‚¹çš„æœ€çŸ­è·ç¦»ï¼Œæ‰€æœ‰è¾¹æƒç›¸åŒã€‚</p>
<p><strong>æœ€å°æ­¥æ•°ï¼š</strong></p>
<p>ç§»åŠ¨åœ°å›¾ï¼Œä½¿å¾—åœ°å›¾ä»åŸæ¥çš„å˜æˆå¦ä¸€ç§åœ°å›¾æ‰€éœ€è¦çš„æœ€å°æ­¥æ•°ï¼Œæ¯ä¸ªçŠ¶æ€æ˜¯ä¸€ä¸ªç‚¹ï¼ŒçŠ¶æ€çš„è½¬ç§»å¯¹åº”è¾¹æƒä¸º1ï¼Œä¹Ÿå°±æ˜¯æ±‚ä»ä¸€ä¸ªçŠ¶æ€è½¬ç§»åˆ°å¦ä¸€ä¸ªçŠ¶æ€æ‰€éœ€è¦çš„æœ€å°ä»£ä»·ã€‚</p>
<h2 id="Flood-Fill"><a href="#Flood-Fill" class="headerlink" title="Flood Fill"></a>Flood Fill</h2><blockquote>
<p>é¡¾åæ€ä¹‰ï¼Œæ´ªæ°´å¡«å……</p>
</blockquote>
<p>æ¯æ¬¡é€‰æ‹©ä¸€ä¸ªæ–°åŠ çš„æ ¼å­ï¼Œçœ‹çœ‹å‘¨å›´æ˜¯å¦æœ‰å¯ä»¥æ‰©å±•çš„æ ¼å­ã€‚</p>
<p>å¯ä»¥åœ¨çº¿æ€§æ—¶é—´å†…æ‰¾åˆ°æŸä¸ªç‚¹æ‰€åœ¨çš„è¿é€šå—ã€‚</p>
<p>ä¾‹é¢˜ï¼š</p>
<p><a class="link"   href="https://www.acwing.com/problem/content/description/1099/" >AcWing1097<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>ç»Ÿè®¡è¿é€šå—çš„æ•°é‡ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// #include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> x first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> y second</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; PII;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1010</span>, M = N * N;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m, cnt;</span><br><span class="line"><span class="type">char</span> g[N][N];</span><br><span class="line"><span class="type">bool</span> vis[N][N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Bfs</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    queue&lt;PII&gt; q;</span><br><span class="line">    q.<span class="built_in">push</span>(&#123;x, y&#125;);</span><br><span class="line">    vis[x][y] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        PII t = q.<span class="built_in">front</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = t.x - <span class="number">1</span>; i &lt;= t.x + <span class="number">1</span>; ++i)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = t.y - <span class="number">1</span>; j &lt;= t.y + <span class="number">1</span>; ++j)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(i == t.x &amp;&amp; j == t.y) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">if</span>(i &lt; <span class="number">0</span> || i &gt; n - <span class="number">1</span> || j &lt; <span class="number">0</span> || j &gt; m - <span class="number">1</span>) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">if</span>(g[i][j] == <span class="string">&#x27;.&#x27;</span> || vis[i][j]) <span class="keyword">continue</span>;</span><br><span class="line">                vis[i][j] = <span class="literal">true</span>;</span><br><span class="line">                q.<span class="built_in">push</span>(&#123;i, j&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, g[i]);</span><br><span class="line">    <span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; ++j)</span><br><span class="line">            <span class="keyword">if</span>(g[i][j] == <span class="string">&#x27;W&#x27;</span> &amp;&amp; !vis[i][j])</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">Bfs</span>(i, j);</span><br><span class="line">                cnt++;</span><br><span class="line">            &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, cnt);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<p><a class="link"   href="https://www.acwing.com/problem/content/1100/" >AcWing1098<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>ç»Ÿè®¡è¿é€šå—çš„æ•°é‡åŠå¤§å°ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> x first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> y second</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; PII;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">55</span>, M = N * N;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> g[N][N];</span><br><span class="line"><span class="type">bool</span> vis[N][N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Bfs</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> dx[] = &#123;<span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>&#125;, dy[] = &#123;<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>&#125;;</span><br><span class="line">    queue&lt;PII&gt; q;</span><br><span class="line">    <span class="type">int</span> area = <span class="number">0</span>;</span><br><span class="line">    q.<span class="built_in">push</span>(&#123;x, y&#125;);</span><br><span class="line">    vis[x][y] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        PII t = q.<span class="built_in">front</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        area++;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> nx = t.x + dx[i], ny = t.y + dy[i];</span><br><span class="line">            <span class="keyword">if</span>(nx &lt; <span class="number">1</span> || nx &gt; n || ny &lt; <span class="number">0</span> || ny &gt; m) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>(vis[nx][ny]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>((g[t.x][t.y] &gt;&gt; i) &amp; <span class="number">1</span>) <span class="keyword">continue</span>; <span class="comment">// å½“å‰ä½ç½®æ˜¯å¢™</span></span><br><span class="line">            q.<span class="built_in">push</span>(&#123;nx, ny&#125;);</span><br><span class="line">            vis[nx][ny] = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> area;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; ++j)</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;g[i][j]);</span><br><span class="line">    <span class="type">int</span> cnt = <span class="number">0</span>, area = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(!vis[i][j])</span><br><span class="line">            &#123;</span><br><span class="line">                area = <span class="built_in">max</span>(area, <span class="built_in">Bfs</span>(i, j));</span><br><span class="line">                cnt++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n%d\n&quot;</span>, cnt, area);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<p><a class="link"   href="https://www.acwing.com/problem/content/1108/" >AcWing1106<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>ä¸€ä¸ªè¿é€šå—å‘¨å›´æ²¡æœ‰æ¯”å®ƒä½çš„ï¼Œå®ƒå°±æ˜¯å±±å³°ï¼›</p>
<p>å‘¨å›´æ²¡æœ‰æ¯”å®ƒé«˜çš„ï¼Œå®ƒå°±æ˜¯å±±è°·ã€‚</p>
<p>æ±‚å±±å³°å±±è°·çš„æ•°é‡ã€‚</p>
<p>ç»Ÿè®¡æ¯ä¸ªè¿é€šå—ï¼Œç»Ÿè®¡çš„æ—¶å€™åˆ¤æ–­å®ƒå’Œå‘¨å›´æ ¼å­çš„å…³ç³»</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> x first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> y second</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1010</span>;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; PII;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> h[N][N];</span><br><span class="line"><span class="type">bool</span> vis[N][N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Bfs</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">bool</span> &amp;has_higher, <span class="type">bool</span> &amp;has_lower)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    queue&lt;PII&gt; q;</span><br><span class="line">    q.<span class="built_in">push</span>(&#123;x, y&#125;);</span><br><span class="line">    vis[x][y] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        PII t = q.<span class="built_in">front</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span>  i = t.x - <span class="number">1</span>; i &lt;= t.x + <span class="number">1</span>; ++i)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = t.y - <span class="number">1</span>; j &lt;= t.y + <span class="number">1</span>; ++j)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(i &lt; <span class="number">1</span> || i &gt; n || j &lt; <span class="number">1</span> || j &gt; n) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">if</span>(h[i][j] != h[t.x][t.y])</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span>(h[i][j] &gt; h[t.x][t.y]) has_higher = <span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">else</span> has_lower = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(!vis[i][j])</span><br><span class="line">                &#123;</span><br><span class="line">                    q.<span class="built_in">push</span>(&#123;i, j&#125;);</span><br><span class="line">                    vis[i][j] = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; ++j)</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;h[i][j]);</span><br><span class="line">    <span class="type">int</span> peak = <span class="number">0</span>, valley = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(vis[i][j]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="type">bool</span> has_higher = <span class="literal">false</span>, has_lower = <span class="literal">false</span>;</span><br><span class="line">            <span class="built_in">Bfs</span>(i, j, has_higher, has_lower);</span><br><span class="line">            <span class="keyword">if</span>(!has_higher) peak++;</span><br><span class="line">            <span class="keyword">if</span>(!has_lower) valley++;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>, peak, valley);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="æœ€çŸ­è·¯æ¨¡å‹"><a href="#æœ€çŸ­è·¯æ¨¡å‹" class="headerlink" title="æœ€çŸ­è·¯æ¨¡å‹"></a>æœ€çŸ­è·¯æ¨¡å‹</h2><p>æ‰€æœ‰è¾¹æƒéƒ½ç›¸åŒï¼Œé‚£ä¹ˆå°±æœ‰ä¸ªæ€§è´¨ï¼Œç”±å®½æœç¬¬ä¸€æ¬¡æœåˆ°çš„å°±æ˜¯æœ€çŸ­çš„è·¯ã€‚</p>
<p>å°è¯æ˜ï¼Œç»™ä¸€ä¸ªè¾¹æƒä¸º 1 çš„å›¾ï¼š</p>
<ol>
<li>ä¸¤æ®µæ€§ï¼šé˜Ÿåˆ—ä¸­ç›¸é‚»çš„ä¸¤ä¸ªä½ç½®åˆ°èµ·ç‚¹çš„æœ€çŸ­è·ç¦»æœ€å¤šå·®ä¸€ã€‚</li>
<li>å•è°ƒæ€§ï¼šå‰é¢éƒ½æ˜¯æ¯”è¾ƒå°çš„ä¸€æ®µï¼Œåé¢éƒ½æ˜¯æ¯”è¾ƒå¤§çš„ä¸€æ®µã€‚<ol>
<li>åˆå§‹ï¼šå°±ä¸€ä¸ªç‚¹ï¼Œåˆ°èµ·ç‚¹è·ç¦»ä¸º 0 ã€‚</li>
<li>å‡è®¾å½“å‰æ»¡è¶³ï¼Œå–å‡ºä¸€ä¸ª x ï¼Œç„¶åæŠŠå®ƒæ‰©å±•å‡ºçš„æ²¡æœ‰èµ°è¿‡çš„ç‚¹éƒ½æ”¾åˆ°é˜Ÿå°¾ï¼Œè¿™æ ·ä¸€ä¸ªé˜Ÿåˆ—ä»ç„¶æ»¡è¶³æ€§è´¨ã€‚</li>
</ol>
</li>
</ol>
<p>ç±»æ¯”ä¸€ä¸‹å †ä¼˜åŒ–çš„ Dijkstra ç®—æ³•ï¼Œå½“é˜Ÿåˆ—ä¸ç©ºæ—¶ï¼Œæ¯æ¬¡é€‰å‡ºå †é¡¶ï¼Œæšä¸¾å®ƒèƒ½åˆ°çš„è¾¹ï¼Œç„¶åæ›´æ–°ä¸€éï¼Œå‡ºé˜Ÿæ—¶ä¸€å®šæ˜¯æœ€å°å€¼ã€‚</p>
<p>ä¹ é¢˜ï¼š</p>
<p><a class="link"   href="https://www.acwing.com/problem/content/1078/" >AcWing1076<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>æ±‚å·¦ä¸Šè§’åˆ°å³ä¸‹è§’çš„æœ€çŸ­è·¯å¾„ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> x first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> y second</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1010</span>;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; PII;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> g[N][N];</span><br><span class="line">PII pre[N][N];</span><br><span class="line">PII ans[N * N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Bfs</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> dx[] = &#123;<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>&#125;;</span><br><span class="line">    <span class="type">int</span> dy[] = &#123;<span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>&#125;;</span><br><span class="line">    queue&lt;PII&gt; q;</span><br><span class="line">    q.<span class="built_in">push</span>(&#123;x, y&#125;);</span><br><span class="line">    <span class="built_in">memset</span>(pre, <span class="number">-1</span>, <span class="built_in">sizeof</span>(pre));</span><br><span class="line">    pre[x][y] = &#123;n, n&#125;; <span class="comment">// æ ‡è®°ä¸‹è¢«éå†è¿‡äº†</span></span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        PII t = q.<span class="built_in">front</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> nx = t.x + dx[i];</span><br><span class="line">            <span class="type">int</span> ny = t.y + dy[i];</span><br><span class="line">            <span class="keyword">if</span>(nx &lt; <span class="number">1</span> || nx &gt; n || ny &lt; <span class="number">1</span> || ny &gt; n) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>(g[nx][ny]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>(pre[nx][ny].x != <span class="number">-1</span>) <span class="keyword">continue</span>; <span class="comment">// è¢«éå†è¿‡äº†</span></span><br><span class="line">            q.<span class="built_in">push</span>(&#123;nx, ny&#125;);</span><br><span class="line">            pre[nx][ny] = t;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; ++j)</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;g[i][j]);</span><br><span class="line">    <span class="built_in">Bfs</span>(n, n);</span><br><span class="line">    <span class="function">PII <span class="title">end</span><span class="params">(<span class="number">1</span>, <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>, end.x - <span class="number">1</span>, end.y - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span>(end.x == n &amp;&amp; end.y == n) <span class="keyword">break</span>;</span><br><span class="line">        end = pre[end.x][end.y];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<p><a class="link"   href="https://www.acwing.com/problem/content/190/" >AcWing188<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>èµ°è·¯æ–¹å¼å˜æˆäº†ä¸­å›½è±¡æ£‹çš„é©¬çš„æ­¥ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> x first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> y second</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">155</span>;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; PII;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">char</span> g[N][N];</span><br><span class="line"><span class="type">int</span> dist[N][N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Bfs</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> dx[] = &#123;<span class="number">2</span>, <span class="number">2</span>, <span class="number">-2</span>, <span class="number">-2</span>, <span class="number">1</span>, <span class="number">-1</span>, <span class="number">1</span>, <span class="number">-1</span>&#125;;</span><br><span class="line">    <span class="type">int</span> dy[] = &#123;<span class="number">1</span>, <span class="number">-1</span>, <span class="number">1</span>, <span class="number">-1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">-2</span>, <span class="number">-2</span>&#125;;</span><br><span class="line">    <span class="type">int</span> sx, sy;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; ++j)</span><br><span class="line">            <span class="keyword">if</span>(g[i][j] == <span class="string">&#x27;K&#x27;</span>)</span><br><span class="line">                sx = i, sy = j;</span><br><span class="line">    queue&lt;PII&gt; q;</span><br><span class="line">    <span class="built_in">memset</span>(dist, <span class="number">-1</span>, <span class="built_in">sizeof</span>(dist));</span><br><span class="line">    dist[sx][sy] = <span class="number">0</span>;</span><br><span class="line">    q.<span class="built_in">push</span>(&#123;sx, sy&#125;);</span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        PII t = q.<span class="built_in">front</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> nx = t.x + dx[i];</span><br><span class="line">            <span class="type">int</span> ny = t.y + dy[i];</span><br><span class="line">            <span class="keyword">if</span>(nx &lt; <span class="number">0</span> || nx &gt;= n || ny &lt; <span class="number">0</span> || ny &gt;= m) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>(g[nx][ny] == <span class="string">&#x27;*&#x27;</span>) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>(dist[nx][ny] != <span class="number">-1</span>) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>(g[nx][ny] == <span class="string">&#x27;H&#x27;</span>) <span class="keyword">return</span> dist[t.x][t.y] + <span class="number">1</span>;</span><br><span class="line">            q.<span class="built_in">push</span>(&#123;nx, ny&#125;);</span><br><span class="line">            dist[nx][ny] = dist[t.x][t.y] + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;m, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, g[i]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">Bfs</span>());</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<p><a class="link"   href="https://www.acwing.com/problem/content/1102/" >AcWing1100<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, k;</span><br><span class="line"><span class="type">int</span> dist[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Bfs</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(dist, <span class="number">-1</span>, <span class="built_in">sizeof</span>(dist));</span><br><span class="line">    queue&lt;<span class="type">int</span>&gt; q;</span><br><span class="line">    q.<span class="built_in">push</span>(n);</span><br><span class="line">    dist[n] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> t = q.<span class="built_in">front</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">if</span>(t == k) <span class="keyword">return</span> dist[k];</span><br><span class="line">        <span class="keyword">if</span>(t + <span class="number">1</span> &lt; N &amp;&amp; dist[t + <span class="number">1</span>] == <span class="number">-1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            dist[t + <span class="number">1</span>] = dist[t] + <span class="number">1</span>;</span><br><span class="line">            q.<span class="built_in">push</span>(t + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(t - <span class="number">1</span> &gt;= <span class="number">0</span> &amp;&amp; dist[t - <span class="number">1</span>] == <span class="number">-1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            dist[t - <span class="number">1</span>] = dist[t] + <span class="number">1</span>;</span><br><span class="line">            q.<span class="built_in">push</span>(t - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(t * <span class="number">2</span> &lt; N &amp;&amp; dist[t * <span class="number">2</span>] == <span class="number">-1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            dist[t * <span class="number">2</span>] = dist[t] + <span class="number">1</span>;</span><br><span class="line">            q.<span class="built_in">push</span>(t * <span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// int t;</span></span><br><span class="line">    <span class="comment">// cin &gt;&gt; t;</span></span><br><span class="line">    <span class="comment">// while(t--)</span></span><br><span class="line">    <span class="comment">// &#123;</span></span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;k);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">Bfs</span>());</span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="å¤šæºBFS"><a href="#å¤šæºBFS" class="headerlink" title="å¤šæºBFS"></a>å¤šæºBFS</h2><p><a class="link"   href="https://www.acwing.com/problem/content/175/" >AcWing173<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>æ±‚æ¯ä¸ªç‚¹åˆ°æ‰€æœ‰ 1 çš„è·ç¦»çš„æœ€å°å€¼ã€‚</p>
<p>åˆ†åˆ«è¾“å‡ºè¿™äº›æœ€å°å€¼ã€‚</p>
<hr>
<p>æœ´ç´ çš„åšæ³•ï¼šåˆ†åˆ«ä»¥æ¯ä¸ª 1 ä¸ºèµ·ç‚¹éå†æ•´å¼ å›¾ï¼Œä¿ç•™è¯¥ç‚¹çš„è·ç¦»æœ€å°å€¼ï¼Œå¤æ‚åº¦ä¸º $O(n^2)$ </p>
<p>æŒ‰ç…§æœ€çŸ­è·¯çš„æ€è·¯ï¼Œå¯ä»¥å»ºä¸€ä¸ªè™šæ‹Ÿæºç‚¹ï¼ŒæŠŠå®ƒåƒæ¯ä¸ª 1 è¿æ¥ä¸€æ¡é•¿åº¦ä¸º 0 çš„è¾¹ï¼Œç„¶åè·‘æœ€çŸ­è·¯ã€‚</p>
<hr>
<p>BFSï¼š</p>
<p>ä¸€å¼€å§‹æŠŠæ‰€æœ‰ 1 çš„è·ç¦»åˆå§‹åŒ–ä¸º 0 å¹¶åŠ åˆ°é˜Ÿåˆ—é‡Œï¼Œç„¶ååé¢å°±å’Œæœç´¢ä¸€æ ·äº†ã€‚</p>
<p>ä¸€ä¸ªç‚¹ç¬¬ä¸€æ¬¡å‡ºé˜Ÿæ—¶ä¸€å®šæ˜¯æœ€å°å€¼ï¼Œè¯æ˜æ–¹æ³•åŒä¸Šã€‚</p>
<p>æ‰€ä»¥æ¯ä¸ªç‚¹åªä¼šè¢«æ›´æ–°ä¸€æ¬¡ã€‚</p>
<p><a class="link"   href="https://www.acwing.com/problem/content/175/" >A173<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; PII;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> x first </span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> y second</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1010</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">char</span> g[N][N];</span><br><span class="line"><span class="type">int</span> dist[N][N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">BFS</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(dist, <span class="number">-1</span>, <span class="built_in">sizeof</span>(dist));</span><br><span class="line">    queue&lt;PII&gt; q;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(g[i][j] == <span class="string">&#x27;1&#x27;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                dist[i][j] = <span class="number">0</span>;</span><br><span class="line">                q.<span class="built_in">push</span>(&#123;i, j&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> dx[] = &#123;<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>&#125;;</span><br><span class="line">    <span class="type">int</span> dy[] = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">-1</span>&#125;;</span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">auto</span> t = q.<span class="built_in">front</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> nx = t.x + dx[i];</span><br><span class="line">            <span class="type">int</span> ny = t.y + dy[i];</span><br><span class="line">            <span class="keyword">if</span>(nx &lt; <span class="number">0</span> || nx &gt;= n || ny &lt; <span class="number">0</span> || ny &gt;= m) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>(dist[nx][ny] != <span class="number">-1</span>) <span class="keyword">continue</span>;</span><br><span class="line">            dist[nx][ny] = dist[t.x][t.y] + <span class="number">1</span>;</span><br><span class="line">            q.<span class="built_in">push</span>(&#123;nx, ny&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, g[i]);</span><br><span class="line">    <span class="built_in">BFS</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; ++j)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, dist[i][j]);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="æœ€å°æ­¥æ•°æ¨¡å‹"><a href="#æœ€å°æ­¥æ•°æ¨¡å‹" class="headerlink" title="æœ€å°æ­¥æ•°æ¨¡å‹"></a>æœ€å°æ­¥æ•°æ¨¡å‹</h2><blockquote>
<p>æŠŠæŸä¸ªä¸œè¥¿ä»æŸä¸ªçŠ¶æ€è½¬ç§»åˆ°å¦å¤–æŸä¸ªçŠ¶æ€éœ€è¦çš„æœ€å°‘æ­¥æ•°ã€‚</p>
</blockquote>
<p><a class="link"   href="https://www.acwing.com/problem/content/1109/" >A1107<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202309171957729.webp"
                      alt="image.png"
                ></p>
<p>ç»™å®šç›®æ ‡çŠ¶æ€ï¼Œè®¡ç®—æœ€å°‘æ“ä½œæ¬¡æ•°ä»¥åŠæ“ä½œè¿‡ç¨‹ï¼Œæ“ä½œè¿‡ç¨‹æŒ‰ç…§å­—å…¸åºæœ€å°è¾“å‡ºã€‚</p>
<p>ä¸€èˆ¬å­—å…¸åºä¸æ˜¯ä¸ºäº†å¢åŠ éš¾åº¦ï¼Œè€Œæ˜¯ä¸ºäº†å¥½è¯„ï¼Œæ­£å¸¸å†™ä¸€èˆ¬å°±ç¬¦åˆæ¡ä»¶ã€‚</p>
<p><del>å½“ç„¶å¯ä»¥ç”¨åº·æ‰˜å±•å¼€æ¥åšã€‚</del></p>
<p>å­˜çŠ¶æ€ï¼Ÿå“ˆå¸Œ</p>
<p>ç”¨ unordered_map æ¥åšå“ˆå¸Œï¼Œå®ƒé€‚åˆæŸ¥è¯¢ï¼Œè€Œä¸€èˆ¬çš„ map é€‚åˆå­˜å‚¨ï¼Œè¯¦æƒ…å¯ä»¥çœ‹ <a class="link"   href="https://blog.csdn.net/zou_albert/article/details/106983268" >unordered_map<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>ï¼›</p>
<p>å­—å…¸åºé—®é¢˜æ‰©å±•çŠ¶æ€çš„æ—¶å€™æŒ‰ç…§ ABC çš„é¡ºåºå»æ‰©å±•å³å¯ã€‚</p>
<p>å› ä¸ºè¿™æ ·èƒ½ä¿è¯ç¬¬ä¸€æ¬¡æœåˆ°çš„æ°¸è¿œæ˜¯å­—å…¸åºæœ€å°å¹¶ä¸”æœ€ä¼˜çš„ã€‚</p>
<p>code:</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span> g[<span class="number">2</span>][<span class="number">4</span>]; <span class="comment">// çŸ©é˜µ</span></span><br><span class="line">unordered_map&lt;string, <span class="type">int</span>&gt; dist;</span><br><span class="line">unordered_map&lt;string, pair&lt;<span class="type">char</span>, string&gt; &gt; pre; <span class="comment">//ä¸Šä¸€æ­¥è¿›è¡Œäº†ä»€ä¹ˆæ“ä½œï¼Œä¸Šä¸€æ¬¡æ˜¯ä»€ä¹ˆçŠ¶æ€</span></span><br><span class="line">queue&lt;string&gt; q;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Set</span><span class="params">(string state)</span> <span class="comment">// æ”¾å…¥</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">3</span>; ++i)</span><br><span class="line">        g[<span class="number">0</span>][i] = state[i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">3</span>, j = <span class="number">4</span>; i &gt;= <span class="number">0</span>; --i, ++j)</span><br><span class="line">        g[<span class="number">1</span>][i] = state[j];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">string <span class="title">Get</span><span class="params">()</span> <span class="comment">// å–å‡º</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string res;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">3</span>; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        res += g[<span class="number">0</span>][i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">3</span>; i &gt;= <span class="number">0</span>; --i)</span><br><span class="line">    &#123;</span><br><span class="line">        res += g[<span class="number">1</span>][i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">string <span class="title">move0</span><span class="params">(string state)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">Set</span>(state);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">3</span>; ++i)</span><br><span class="line">        <span class="built_in">swap</span>(g[<span class="number">0</span>][i], g[<span class="number">1</span>][i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Get</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">string <span class="title">move1</span><span class="params">(string state)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">Set</span>(state);</span><br><span class="line">    <span class="type">char</span> v0 = g[<span class="number">0</span>][<span class="number">3</span>], v1 = g[<span class="number">1</span>][<span class="number">3</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">3</span>; i &gt;= <span class="number">1</span>; --i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">swap</span>(g[<span class="number">0</span>][i], g[<span class="number">0</span>][i - <span class="number">1</span>]);</span><br><span class="line">        <span class="built_in">swap</span>(g[<span class="number">1</span>][i], g[<span class="number">1</span>][i - <span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    g[<span class="number">0</span>][<span class="number">0</span>] = v0;</span><br><span class="line">    g[<span class="number">1</span>][<span class="number">0</span>] = v1;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Get</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">string <span class="title">move2</span><span class="params">(string state)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">Set</span>(state);</span><br><span class="line">    <span class="type">char</span> v = g[<span class="number">0</span>][<span class="number">1</span>];</span><br><span class="line">    g[<span class="number">0</span>][<span class="number">1</span>] = g[<span class="number">1</span>][<span class="number">1</span>];</span><br><span class="line">    g[<span class="number">1</span>][<span class="number">1</span>] = g[<span class="number">1</span>][<span class="number">2</span>];</span><br><span class="line">    g[<span class="number">1</span>][<span class="number">2</span>] = g[<span class="number">0</span>][<span class="number">2</span>];</span><br><span class="line">    g[<span class="number">0</span>][<span class="number">2</span>] = v;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Get</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Bfs</span><span class="params">(string start, string end)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(start == end) <span class="keyword">return</span>;</span><br><span class="line">    q.<span class="built_in">push</span>(start);</span><br><span class="line">    dist[start] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">auto</span> t = q.<span class="built_in">front</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        string m[<span class="number">3</span>];</span><br><span class="line">        m[<span class="number">0</span>] = <span class="built_in">move0</span>(t);</span><br><span class="line">        m[<span class="number">1</span>] = <span class="built_in">move1</span>(t);</span><br><span class="line">        m[<span class="number">2</span>] = <span class="built_in">move2</span>(t);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            string mt = m[i];</span><br><span class="line">            <span class="keyword">if</span>(dist.<span class="built_in">count</span>(mt) == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                dist[mt] = dist[t] + <span class="number">1</span>;</span><br><span class="line">                pre[mt] = &#123;<span class="built_in">char</span>(i + <span class="string">&#x27;A&#x27;</span>), t&#125;; <span class="comment">// tä¸²ç»è¿‡A/B/Cæ“ä½œè½¬åŒ–å¾—åˆ°mt</span></span><br><span class="line">                <span class="keyword">if</span>(mt == end) <span class="keyword">break</span>; <span class="comment">// ç¬¬ä¸€æ¬¡æ‰¾åˆ°å³æœ€çŸ­çš„</span></span><br><span class="line">                q.<span class="built_in">push</span>(mt);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> x;</span><br><span class="line">    string start, end;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;x);</span><br><span class="line">        end += <span class="built_in">char</span>(x + <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; ++i) start += <span class="built_in">char</span>(i + <span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">    <span class="built_in">Bfs</span>(start, end);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, dist[end]);</span><br><span class="line">    string res;</span><br><span class="line">    <span class="keyword">while</span>(end != start)</span><br><span class="line">    &#123;</span><br><span class="line">        res += pre[end].first;</span><br><span class="line">        end = pre[end].second;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">reverse</span>(res.<span class="built_in">begin</span>(), res.<span class="built_in">end</span>());</span><br><span class="line">    <span class="keyword">if</span>(res.<span class="built_in">size</span>()) cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="åŒç«¯é˜Ÿåˆ—å¹¿æœ"><a href="#åŒç«¯é˜Ÿåˆ—å¹¿æœ" class="headerlink" title="åŒç«¯é˜Ÿåˆ—å¹¿æœ"></a>åŒç«¯é˜Ÿåˆ—å¹¿æœ</h2><blockquote>
<p>01BFS</p>
</blockquote>
<p><a class="link"   href="https://www.acwing.com/problem/content/177/" >A175<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="type">char</span> e[<span class="number">550</span>][<span class="number">550</span>];</span><br><span class="line"><span class="type">int</span> dist[<span class="number">550</span>][<span class="number">550</span>];</span><br><span class="line"><span class="type">int</span> dx[]=&#123;<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">1</span>,<span class="number">1</span>&#125;;<span class="comment">//å·¦ä¸Šï¼Œå³ä¸Šï¼Œå·¦ä¸‹ï¼Œå³ä¸‹</span></span><br><span class="line"><span class="type">int</span> dy[]=&#123;<span class="number">-1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">1</span>&#125;;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">read</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> x=<span class="number">0</span>,y=<span class="number">1</span>;</span><br><span class="line">	<span class="type">char</span> c=<span class="built_in">getchar</span>();</span><br><span class="line">	<span class="keyword">while</span>(c&gt;<span class="string">&#x27;9&#x27;</span>||c&lt;<span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(c==<span class="string">&#x27;-&#x27;</span>) y=<span class="number">-1</span>;</span><br><span class="line">		c=<span class="built_in">getchar</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">while</span>(c&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;c&lt;=<span class="string">&#x27;9&#x27;</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		x=x*<span class="number">10</span>+c-<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">		c=<span class="built_in">getchar</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> x*y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">point</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> x,y,d;</span><br><span class="line">    <span class="built_in">point</span>()&#123;&#125;</span><br><span class="line">    <span class="built_in">point</span>(<span class="type">int</span> a,<span class="type">int</span> b,<span class="type">int</span> c):<span class="built_in">x</span>(a),<span class="built_in">y</span>(b),<span class="built_in">d</span>(c)&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//å¯¹äºä¸€ä¸ªä¹å®«æ ¼ï¼Œä»¥ä¸­é—´ä½ç½®ä¸ºå‚ç…§ï¼Œä¸Šä¸‹å·¦å³ä¸€å®šè¦å’Œå®ƒä¸åŒï¼Œè¾¹æƒä¸º0ï¼Œå¦åˆ™ä¸º1.</span></span><br><span class="line"><span class="comment">//è€Œå››ä¸ªè§’ï¼Œåˆ™éœ€è¦ç‰¹æ®Šå¤„ç†ï¼Œè‹¥ä¸º&#x27;\&#x27;ï¼Œåˆ™å·¦ä¸Šè§’å’Œå³ä¸‹è§’å¿…é¡»å’Œå®ƒç›¸åŒï¼Œè‹¥ä¸º&#x27;/&#x27;ï¼Œåˆ™å³ä¸Šè§’å’Œå·¦ä¸‹è§’å¿…é¡»ç›¸åŒ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åº”æŒ‰ç…§ç‚¹</span></span><br><span class="line"><span class="type">void</span> _01BFS()</span><br><span class="line">&#123;</span><br><span class="line">    deque&lt;point&gt; q;</span><br><span class="line">    q.<span class="built_in">push_front</span>(<span class="built_in">point</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>));</span><br><span class="line">    dist[<span class="number">0</span>][<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        point now=q.<span class="built_in">front</span>();</span><br><span class="line">        q.<span class="built_in">pop_front</span>();</span><br><span class="line">        <span class="keyword">if</span>(now.x==n&amp;&amp;now.y==m) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> nx=now.x+dx[i],ny=now.y+dy[i];</span><br><span class="line">            <span class="keyword">if</span>(nx&lt;<span class="number">0</span>||ny&lt;<span class="number">0</span>||nx&gt;n||ny&gt;m) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>(i==<span class="number">0</span>)<span class="comment">//å·¦ä¸Š</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(e[now.x][now.y]==<span class="string">&#x27;\\&#x27;</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span>(now.d&lt;dist[nx][ny])</span><br><span class="line">                    &#123;</span><br><span class="line">                        dist[nx][ny]=now.d;</span><br><span class="line">                        q.<span class="built_in">push_front</span>(<span class="built_in">point</span>(nx,ny,dist[nx][ny]));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span><span class="comment">//&#x27;/&#x27;</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span>(now.d<span class="number">+1</span>&lt;dist[nx][ny])</span><br><span class="line">                    &#123;</span><br><span class="line">                        dist[nx][ny]=now.d<span class="number">+1</span>;</span><br><span class="line">                        q.<span class="built_in">push_back</span>(<span class="built_in">point</span>(nx,ny,dist[nx][ny]));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(i==<span class="number">1</span>)<span class="comment">//å³ä¸Š</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(e[now.x][now.y<span class="number">+1</span>]==<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span>(now.d&lt;dist[nx][ny])</span><br><span class="line">                    &#123;</span><br><span class="line">                        dist[nx][ny]=now.d;</span><br><span class="line">                        q.<span class="built_in">push_front</span>(<span class="built_in">point</span>(nx,ny,dist[nx][ny]));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span><span class="comment">//&#x27;\&#x27;</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span>(now.d<span class="number">+1</span>&lt;dist[nx][ny])</span><br><span class="line">                    &#123;</span><br><span class="line">                        dist[nx][ny]=now.d<span class="number">+1</span>;</span><br><span class="line">                        q.<span class="built_in">push_back</span>(<span class="built_in">point</span>(nx,ny,dist[nx][ny]));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(i==<span class="number">2</span>)<span class="comment">//å·¦ä¸‹</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(e[now.x<span class="number">+1</span>][now.y]==<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span>(now.d&lt;dist[nx][ny])</span><br><span class="line">                    &#123;</span><br><span class="line">                        dist[nx][ny]=now.d;</span><br><span class="line">                        q.<span class="built_in">push_front</span>(<span class="built_in">point</span>(nx,ny,dist[nx][ny]));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span><span class="comment">//&#x27;\&#x27;</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span>(now.d<span class="number">+1</span>&lt;dist[nx][ny])</span><br><span class="line">                    &#123;</span><br><span class="line">                        dist[nx][ny]=now.d<span class="number">+1</span>;</span><br><span class="line">                        q.<span class="built_in">push_back</span>(<span class="built_in">point</span>(nx,ny,dist[nx][ny]));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(i==<span class="number">3</span>)<span class="comment">//å³ä¸‹</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(e[now.x<span class="number">+1</span>][now.y<span class="number">+1</span>]==<span class="string">&#x27;\\&#x27;</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span>(now.d&lt;dist[nx][ny])</span><br><span class="line">                    &#123;</span><br><span class="line">                        dist[nx][ny]=now.d;</span><br><span class="line">                        q.<span class="built_in">push_front</span>(<span class="built_in">point</span>(nx,ny,dist[nx][ny]));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span><span class="comment">//&#x27;/&#x27;</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span>(now.d<span class="number">+1</span>&lt;dist[nx][ny])</span><br><span class="line">                    &#123;</span><br><span class="line">                        dist[nx][ny]=now.d<span class="number">+1</span>;</span><br><span class="line">                        q.<span class="built_in">push_back</span>(<span class="built_in">point</span>(nx,ny,dist[nx][ny]));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> T;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;T);</span><br><span class="line">    <span class="keyword">while</span>(T--)</span><br><span class="line">    &#123;</span><br><span class="line">        n=<span class="built_in">read</span>(),m=<span class="built_in">read</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,e[i]<span class="number">+1</span>);</span><br><span class="line">        <span class="keyword">if</span>((n+m)%<span class="number">2</span>!=<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            cout&lt;&lt;<span class="string">&quot;NO SOLUTION&quot;</span>&lt;&lt;endl;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=n;i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=m;j++)</span><br><span class="line">                dist[i][j]=<span class="number">0x7fffffff</span>;</span><br><span class="line">        _01BFS();</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,dist[n][m]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="åŒå‘å¹¿æœ"><a href="#åŒå‘å¹¿æœ" class="headerlink" title="åŒå‘å¹¿æœ"></a>åŒå‘å¹¿æœ</h2><p>çŠ¶æ€è¾ƒå°‘çš„æ—¶å€™ï¼Œå…¶å®å°±å’Œæ™®é€š BFS å·®ä¸å¤šï¼Œæ¯”å¦‚ <em>æœ€çŸ­è·¯æ¨¡å‹</em> æˆ–è€… <em>æ´ªæ°´å¡«å……</em>ã€‚</p>
<p>ä½†æ˜¯çŠ¶æ€å˜å¤šçš„æ—¶å€™ï¼Œå°±å¯èƒ½ä¼šè¶…æ—¶ï¼Œæ¯”å¦‚ <em>æœ€å°æ­¥æ•°æ¨¡å‹</em>ã€‚</p>
<p>åœ¨ BFS ä¸­ï¼Œæ¯ä¸€å±‚æ–°åŠ çš„ç‚¹éƒ½æ˜¯ä¸Šä¸€å±‚çš„ä¸¤å€ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™æ˜¯ä¸€ä¸ªæŒ‡æ•°å¢åŠ çš„è¿‡ç¨‹ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202309230940131.webp"
                      alt="image.png"
                ></p>
<p>æ¯”å¦‚è¿™æ ·ï¼Œå°±åªéœ€è¦æœçº¢è‰²é¢ç§¯å†…çš„ç‚¹ï¼Œå¤§å¤§èŠ‚çº¦äº†æ—¶é—´å’Œç©ºé—´ã€‚</p>
<p>å°ä¼˜åŒ–ï¼šæ¯æ¬¡é€‰æ‹©å…ƒç´ è¾ƒå°‘çš„æ–¹å‘æ‰©å±•ã€‚</p>
<hr>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P1032" >å­—ä¸²å˜æ¢<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">6</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line">string a[N], b[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">extend</span><span class="params">(queue&lt;string&gt; &amp;q, unordered_map&lt;string, <span class="type">int</span>&gt; &amp;da, unordered_map&lt;string, <span class="type">int</span>&gt; &amp;db, string a[], string b[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string t = q.<span class="built_in">front</span>(); <span class="comment">// æ‰©å±•</span></span><br><span class="line">    q.<span class="built_in">pop</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; (<span class="type">int</span>)t.<span class="built_in">size</span>(); ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(t.<span class="built_in">substr</span>(i, a[j].<span class="built_in">size</span>()) == a[j]) <span class="comment">// æ‰¾åˆ°å¯ä»¥å˜æ¢çš„å­—ä¸²</span></span><br><span class="line">            &#123;</span><br><span class="line">                string state = t.<span class="built_in">substr</span>(<span class="number">0</span>, i) + b[j] + t.<span class="built_in">substr</span>(i + a[j].<span class="built_in">size</span>()); <span class="comment">// æ‹¼æ¥</span></span><br><span class="line">                <span class="keyword">if</span>(db.<span class="built_in">count</span>(state)) <span class="keyword">return</span> da[t] + <span class="number">1</span> + db[state]; <span class="comment">// å¦‚æœç›¸é‡äº†ï¼Œé‚£ä¹ˆå°±è¿”å›ç­”æ¡ˆ</span></span><br><span class="line">                <span class="keyword">if</span>(da.<span class="built_in">count</span>(state)) <span class="keyword">continue</span>; <span class="comment">// å¦‚æœæ‰¾è¿‡äº†å°±ä¸æ‰¾äº†</span></span><br><span class="line">                da[state] = da[t] + <span class="number">1</span>;</span><br><span class="line">                q.<span class="built_in">push</span>(state); <span class="comment">//æ›´æ–°çŠ¶æ€</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">11</span>; <span class="comment">// æ— æ³•ç›¸é‡ï¼Œå³è¿™ç§çŠ¶æ€ä¸åˆæ³•</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Bfs</span><span class="params">(string A, string B)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(A == B) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    queue&lt;string&gt; qa, qb;</span><br><span class="line">    unordered_map&lt;string, <span class="type">int</span>&gt; da, db; <span class="comment">// ä» a/b åˆ°è¿™ä¸ªä¸²éœ€è¦å‡ æ­¥</span></span><br><span class="line">    qa.<span class="built_in">push</span>(A), da[A] = <span class="number">0</span>;</span><br><span class="line">    qb.<span class="built_in">push</span>(B), db[B] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(qa.<span class="built_in">size</span>() &amp;&amp; qb.<span class="built_in">size</span>()) <span class="comment">// åªè¦æ˜¯è¿é€šçš„å°±ä¸€å®šèƒ½æœåˆ°</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> t;</span><br><span class="line">        <span class="keyword">if</span>(qa.<span class="built_in">size</span>() &lt;= qb.<span class="built_in">size</span>()) t = <span class="built_in">extend</span>(qa, da, db, a, b); <span class="comment">// æ›´æ–° a // å¾€å…ƒç´ å°‘çš„æ–¹å‘æ‰©å±•</span></span><br><span class="line">        <span class="keyword">else</span> t = <span class="built_in">extend</span>(qb, db, da, b, a); <span class="comment">// æ›´æ–° b</span></span><br><span class="line">        <span class="keyword">if</span>(t &lt;= <span class="number">10</span>) <span class="keyword">return</span> t; <span class="comment">// æ‰¾åˆ°äº†åˆæ³•çš„æ–¹æ¡ˆ</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">11</span>; <span class="comment">// æ‰¾ä¸åˆ°åˆæ³•çš„æ–¹æ¡ˆ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string A, B;</span><br><span class="line">    cin &gt;&gt; A &gt;&gt; B;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; a[n] &gt;&gt; b[n]) ++n;</span><br><span class="line">    <span class="type">int</span> step = <span class="built_in">Bfs</span>(A, B);</span><br><span class="line">    <span class="keyword">if</span>(step &gt; <span class="number">10</span>) <span class="built_in">printf</span>(<span class="string">&quot;NO ANSWER!&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, step);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="A-star"><a href="#A-star" class="headerlink" title="A-star"></a>A-star</h2><blockquote>
<p>ä¸€ç§ç»“åˆäº† Dijkstra å’Œè´ªå¿ƒæœ€ä¼˜åŸåˆ™çš„ä¸€ç§æœç´¢ç®—æ³•ã€‚</p>
</blockquote>
<p>åº”ç”¨åœºæ™¯ï¼šå’ŒåŒå‘å¹¿æœä¸€æ ·ï¼Œéƒ½æ˜¯æ±‚æœ€çŸ­è·ç¦»ï¼Œä½†æ˜¯çŠ¶æ€ç©ºé—´<strong>éå¸¸åºå¤§</strong>ï¼ˆæ­¥æ•°å°çš„æ—¶å€™ç›´æ¥ BFS å³å¯ï¼‰ï¼Œç›´æ¥æœä¼šæœåˆ°éå¸¸å¤šçš„çŠ¶æ€ï¼Œå¯¼è‡´è¶…æ—¶ã€‚</p>
<p>æ‰€ä»¥éœ€è¦åŠ ä¸Šä¸€ä¸ªå¯å‘å‡½æ•°ï¼Œä½œç”¨æ˜¯ä»èµ·ç‚¹å¼€å§‹æœï¼Œæœéå¸¸å°‘çš„çŠ¶æ€å°±å¯ä»¥æ±‚å‡ºèµ·ç‚¹åˆ°ç»ˆç‚¹çš„æœ€çŸ­è·¯å¾„ã€‚</p>
<ol>
<li>æŠŠ BFS ä¸­çš„é˜Ÿåˆ—æ¢ä¸ºä¼˜å…ˆé˜Ÿåˆ—ï¼ˆå°æ ¹å †ï¼‰</li>
<li>æ¯ä¸ªçŠ¶æ€ï¼ˆé¢„æµ‹è·ç¦»ï¼‰å­˜çœŸå®è·ç¦»ï¼ˆèµ·ç‚¹èµ°åˆ°å½“å‰ç‚¹ï¼‰åŠ ä¸Šä¼°è®¡è·ç¦»ï¼ˆå½“å‰ç‚¹åˆ°ç»ˆç‚¹ï¼‰ï¼Œä¹Ÿå°±æ˜¯å­˜åˆ°å½“å‰è¿™æ¡è·¯å¾„åˆ°ç»ˆç‚¹çš„ä¼°è®¡å€¼ï¼Œæ¯æ¬¡æŒ‘ä¸€ä¸ªé¢„æµ‹è·ç¦»æœ€å°çš„ç‚¹æ¥æ‰©å±•ã€‚</li>
<li>ç»ˆç‚¹ç¬¬ä¸€æ¬¡å‡ºé˜Ÿæ—¶ï¼Œå¾ªç¯ç»“æŸã€‚</li>
<li>æ»¡è¶³<strong>ä¼°è®¡è·ç¦»å°äºç­‰äºçœŸå®è·ç¦»</strong>ï¼Œè¿™æ ·æ‰å¯ä»¥æ»¡è¶³<strong>å‡ºé˜Ÿçš„æ—¶å€™</strong>è·ç¦»æ‰æ˜¯æœ€å°çš„ã€‚</li>
<li>æ»¡è¶³æœ‰è§£ï¼Œä¸ç„¶è¿˜ä¼šå…¨æœä¸€éï¼Œè¿˜ä¸å¦‚ BFSã€‚</li>
<li>ä¼°ä»·å‡½æ•°è¿”å›å€¼ $\in{[0,d]}$ï¼Œ$d$ ä¸ºåˆ°ç»ˆç‚¹çš„çœŸå®æœ€çŸ­è·ç¦»ï¼Œè¶Šæ¥è¿‘è¶Šå¥½ã€‚</li>
</ol>
<p>åè¯æ³•ï¼šå‡è®¾ç»ˆç‚¹ç¬¬ä¸€æ¬¡å‡ºé˜Ÿçš„æ—¶å€™ä¸æ˜¯æœ€å°å€¼ï¼Œå³$dist(t)&gt;d$ï¼Œé˜Ÿåˆ—ä¸­è‚¯å®šå­˜åœ¨æœ€ä¼˜è§£çš„æŸä¸€ä¸ªç‚¹ï¼Œè®¾ä¸º $u$ã€‚</p>
<p>$$<br>d(u) + f(u) &lt;&#x3D; d(u) + g(u) &#x3D; d<br>$$<br>$$<br>\therefore d(t) + f(t) &#x3D; dist(t) &gt; d \ge d(u) + f(u)<br>$$</p>
<p>ä¹Ÿå°±æ˜¯å‡å¦‚é˜Ÿåˆ—é‡Œæœ‰æœ€ä¼˜è§£ï¼Œé‚£ä¹ˆå®ƒçš„ä¼°è®¡è·ç¦»ä¸€å®šæ˜¯æœ€å°çš„ï¼Œæ‰€ä»¥æœ€ä¼˜è§£ä¸€å®šæœ€å…ˆå‡ºé˜Ÿï¼Œå¦åˆ™ä¸ä¼˜å…ˆé˜Ÿåˆ—è§„åˆ™ï¼Œä¼˜å…ˆå‡º $f + d$ å°çš„å…ƒç´ çŸ›ç›¾ã€‚</p>
<p>æ‰€ä»¥å‡ºé˜Ÿçš„æ—¶å€™ä¸€å®šæ˜¯æœ€å°å€¼ã€‚</p>
<p>å®ƒåªèƒ½ä¿è¯ç»ˆç‚¹å‡ºé˜Ÿçš„æ—¶å€™è·ç¦»æœ€å°ï¼Œä½†ä¸èƒ½ä¿è¯å…¶ä»–ç‚¹å‡ºé˜Ÿçš„æ—¶å€™æ˜¯æœ€å°å€¼ï¼ˆç®—æ³•ç«èµ›-è¿›é˜¶æŒ‡å—çš„é”™è¯¯ï¼‰ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202310020935436.webp"
                      alt="image.png"
                ></p>
<p>æ¯”å¦‚å¯¹äºè¿™æ ·ä¸€ä¸ªä¾‹å­ï¼Œè¿™ä¸ªäº¤ç‚¹å®ƒå°±ä¸æˆç«‹ï¼Œå¹¶ä¸”æ¯ä¸ªç‚¹ä¸ä¸€å®šåªè¢«æ‰©å±•ä¸€æ¬¡ï¼ˆé™¤äº†ç»ˆç‚¹ï¼‰ã€‚</p>
<p>ç„¶åæ¥ç€æ”¾ä¸‹èµ°æŠŠç»ˆç‚¹å…¥é˜Ÿçš„æ—¶å€™ï¼Œå‘ç°é˜Ÿåˆ—é‡Œæœ‰æ¯”è¿™ä¸ªæƒ…å†µå°çš„é¢„æµ‹è·ç¦»ï¼Œæ‰€ä»¥å°±ä¼šâ€œæ‹¨ä¹±åæ­£â€ï¼Œé‡æ–°èµ°æ­£ç¡®çš„è·¯å¾„ï¼Œé‚£ä¹ˆæ¥ç€å‡ºé˜Ÿçš„æ—¶å€™ï¼Œè¿™æ¡æ–°è·¯è‚¯å®šå·²ç»è¢«èµ°å®Œäº†ï¼Œæ­¤æ—¶ç»ˆç‚¹è·ç¦»å·²ç»è¢«æ›´æ–°æˆäº†æœ€å°å€¼ã€‚</p>
<ul>
<li>BFSï¼šæ¯ä¸ªçŠ¶æ€åªä¼šå…¥é˜Ÿä¸€æ¬¡ï¼Œæ‰€ä»¥å…¥é˜Ÿçš„æ—¶å€™è¿›è¡Œåˆ¤é‡ã€‚</li>
<li>Dijkstraï¼šæ¯ä¸ªçŠ¶æ€åªä¼šå‡ºé˜Ÿä¸€æ¬¡ï¼Œæ‰€ä»¥å¯ä»¥å‡ºé˜Ÿçš„æ—¶å€™åˆ¤é‡ã€‚</li>
<li>SPFAï¼šæ¯ä¸ªçŠ¶æ€åœ¨æ¯ä¸ªæ—¶åˆ»æœ€å¤šåœ¨é˜Ÿåˆ—ä¸­å‡ºç°ä¸€æ¬¡ï¼Œæ‰€ä»¥å¯ä»¥åœ¨å…¥é˜Ÿçš„æ—¶å€™åˆ¤é‡ã€‚</li>
<li>A-starï¼šæ¯ä¸ªçŠ¶æ€ä¸ä¸€å®šåªå…¥é˜Ÿä¸€æ¬¡æˆ–å‡ºé˜Ÿä¸€æ¬¡ï¼Œæ‰€ä»¥ä¸èƒ½åˆ¤é‡ã€‚</li>
</ul>
<p>ä¼°è®¡è·ç¦»ä¸€èˆ¬ç”¨ç»å…¸çš„ä¼°ä»·å‡½æ•°ï¼Œå¦åˆ™æ»¡è¶³è¦æ±‚å³å¯ã€‚</p>
<h3 id="å…«æ•°ç é—®é¢˜"><a href="#å…«æ•°ç é—®é¢˜" class="headerlink" title="å…«æ•°ç é—®é¢˜"></a>å…«æ•°ç é—®é¢˜</h3><p>æŠŠå…«ä¸ªæ•°å­—æ”¾åˆ°ä¸€ä¸ªä¹å®«æ ¼é‡Œï¼Œæ¯æ¬¡å¯ä»¥ç§»åŠ¨ä¸€ä¸ªæ•°å­—åˆ°ç©ºé—²ä½ç½®ï¼Œç°ç»™å®šä¸€ä¸ªåˆå§‹çŠ¶æ€ï¼Œæ±‚æœ€å°æ­¥æ•°å¾—åˆ°ç»ˆæ­¢çŠ¶æ€ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202310020947510.webp"
                      alt="image.png|200"
                ></p>
<p>ä»»æ„è¾“å‡ºä¸€ç§æœ€å°æ­¥æ•°çš„æ–¹æ¡ˆå³å¯ã€‚</p>
<p>æœ‰è§£çš„å……è¦æ¡ä»¶ï¼šåºåˆ—çš„é€†åºå¯¹æ•°é‡ä¸ºå¶æ•°ï¼Œå¦‚æœä¸ºå¥‡æ•°ï¼Œé‚£ä¹ˆå°±ä¸€å®šæ— è§£ã€‚</p>
<p>æœ‰è§£çš„è¯ï¼Œé€†åºå¯¹æ•°é‡ä¸€å®šæ˜¯å¶æ•°ã€‚å¦‚æœæ˜¯è¡Œå†…ç§»åŠ¨ï¼Œé‚£ä¹ˆé€†åºå¯¹æ•°é‡ä¸ä¼šå˜ã€‚</p>
<p>è€Œå¾€ä¸Š&#x2F;ä¸‹ç§»åŠ¨ï¼Œç›¸å½“äºæŠŠå®ƒç§»åŠ¨åˆ°æŸä¸¤ä¸ªæ•°çš„å‰é¢&#x2F;åé¢ï¼Œä¹Ÿå°±æ˜¯è¯´åªæ”¹å˜äº†ä¸¤å¯¹é€†åºå¯¹ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´æ¯æ¬¡ç§»åŠ¨ä¸ä¼šæ”¹å˜é€†åºå¯¹æ•°é‡çš„å¥‡å¶æ€§ï¼Œè€Œæœ«çŠ¶æ€çš„é€†åºå¯¹æ•°é‡ä¸ºå¶æ•°ï¼ˆ0ï¼‰ï¼Œæ‰€ä»¥é€†åºå¯¹æ•°é‡å¿…é¡»æ˜¯å¥‡æ•°ã€‚</p>
<p>é‚£ä¹ˆå¶æ•°ä¸€å®šæ˜¯æœ‰è§£çš„ï¼Œå¥‡æ•°ä¸€å®šæ˜¯æ— è§£çš„ã€‚</p>
<p>ä¼°ä»·å‡½æ•°ï¼š</p>
<p>æ¯æ¬¡ç§»åŠ¨åªä¼šæ”¹å˜æŸä¸ªæ•°çš„ä¸€ä¸ªä½ç½®ï¼Œäºæ˜¯ä¼°ä»·å‡½æ•°å¯ä»¥å–å½“å‰çŠ¶æ€çš„æ¯ä¸€ä¸ªæ•°å­—å’Œç›®æ ‡ä½ç½®çš„æ›¼å“ˆé¡¿è·ç¦»ä¹‹å’Œã€‚</p>
<p>å› ä¸ºä¸èƒ½ç›´æ¥è¿‡å»ï¼Œéœ€è¦è¿‚å›ä¸€ä¸‹ï¼Œæ‰€ä»¥æ˜¯æ»¡è¶³<strong>ä¼°è®¡è·ç¦»å°äºç­‰äºå®é™…è·ç¦»</strong>è¿™æ ·ä¸€ä¸ªæ¡ä»¶çš„ã€‚</p>
<hr>
<p><a class="link"   href="https://www.acwing.com/problem/content/181/" >Acwing179<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>, string&gt; PIS;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> x first </span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> y second</span></span><br><span class="line"></span><br><span class="line"><span class="function">string <span class="title">ed</span><span class="params">(<span class="string">&quot;12345678x&quot;</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">f</span><span class="params">(string state)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; (<span class="type">int</span>)state.<span class="built_in">size</span>(); ++i)</span><br><span class="line">        <span class="keyword">if</span>(state[i] != <span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> t = state[i] - <span class="string">&#x27;1&#x27;</span>; <span class="comment">// è¿™ä¸ªæ•°å­—åœ¨ ed ä¸­çš„åæ ‡</span></span><br><span class="line">            res += <span class="built_in">abs</span>(i / <span class="number">3</span> - t / <span class="number">3</span>) + <span class="built_in">abs</span>(i % <span class="number">3</span> - t % <span class="number">3</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">string <span class="title">Bfs</span><span class="params">(string start)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    unordered_map&lt;string, <span class="type">int</span>&gt; dist;</span><br><span class="line">    unordered_map&lt;string, pair&lt;<span class="type">char</span>, string&gt; &gt; prev;</span><br><span class="line">    priority_queue&lt;PIS, vector&lt;PIS&gt;, greater&lt;PIS&gt; &gt; heap;</span><br><span class="line">    dist[start] = <span class="number">0</span>;</span><br><span class="line">    heap.<span class="built_in">push</span>(&#123;<span class="built_in">f</span>(start), start&#125;);</span><br><span class="line">    <span class="type">char</span> op[] = <span class="string">&quot;urdl&quot;</span>;</span><br><span class="line">    <span class="type">int</span> dx[] = &#123;<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>&#125;, dy[] = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">-1</span>&#125;;</span><br><span class="line">    <span class="keyword">while</span>(heap.<span class="built_in">size</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">auto</span> t = heap.<span class="built_in">top</span>();</span><br><span class="line">        heap.<span class="built_in">pop</span>();</span><br><span class="line">        string state = t.y;</span><br><span class="line">        <span class="keyword">if</span>(state == ed) <span class="keyword">break</span>;</span><br><span class="line">        <span class="type">int</span> nx, ny;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">9</span>; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(state[i] == <span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                nx = i / <span class="number">3</span>;</span><br><span class="line">                ny = i % <span class="number">3</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        string source = state;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> a = nx + dx[i], b = ny + dy[i];</span><br><span class="line">            <span class="keyword">if</span>(a &lt; <span class="number">0</span> || a &gt; <span class="number">2</span> || b &lt; <span class="number">0</span> || b &gt; <span class="number">2</span>) <span class="keyword">continue</span>;</span><br><span class="line">            state = source;</span><br><span class="line">            <span class="built_in">swap</span>(state[nx * <span class="number">3</span> + ny], state[a * <span class="number">3</span> + b]);</span><br><span class="line">            <span class="keyword">if</span>(!dist.<span class="built_in">count</span>(state) || dist[state] &gt; dist[source] + <span class="number">1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                dist[state] = dist[source] + <span class="number">1</span>;</span><br><span class="line">                prev[state] = &#123;op[i], source&#125;;</span><br><span class="line">                heap.<span class="built_in">push</span>(&#123;dist[state] + <span class="built_in">f</span>(state), state&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    string res;</span><br><span class="line">    <span class="keyword">while</span>(ed != start)</span><br><span class="line">    &#123;</span><br><span class="line">        res += prev[ed].x;</span><br><span class="line">        ed = prev[ed].y;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">reverse</span>(res.<span class="built_in">begin</span>(), res.<span class="built_in">end</span>());</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string start, seq;</span><br><span class="line">    <span class="type">char</span> c;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; c)</span><br><span class="line">    &#123;</span><br><span class="line">        start += c;</span><br><span class="line">        <span class="keyword">if</span>(c != <span class="string">&#x27;x&#x27;</span>) seq += c;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; ++i)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = i; j &lt; <span class="number">8</span>; ++j)</span><br><span class="line">            <span class="keyword">if</span>(seq[i] &gt; seq[j])</span><br><span class="line">                cnt++;</span><br><span class="line">    <span class="keyword">if</span>(cnt &amp; <span class="number">1</span>) <span class="built_in">printf</span>(<span class="string">&quot;unsolvable&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="built_in">Bfs</span>(start) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><a class="link"   href="https://www.luogu.com.cn/problem/P1379" >P1379<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> x first </span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> y second </span></span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>, string&gt; PIS;</span><br><span class="line"></span><br><span class="line"><span class="function">string <span class="title">ed</span><span class="params">(<span class="string">&quot;123804765&quot;</span>)</span></span>;</span><br><span class="line"><span class="type">int</span> lox[] = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>&#125;;</span><br><span class="line"><span class="type">int</span> loy[] = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">f</span><span class="params">(string state)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; (<span class="type">int</span>)state.<span class="built_in">size</span>(); ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(state[i] != <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> t = state[i] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">            res += <span class="built_in">abs</span>(i / <span class="number">3</span> - lox[t]) + <span class="built_in">abs</span>(i % <span class="number">3</span> - loy[t]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Bfs</span><span class="params">(string start)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    unordered_map&lt;string, <span class="type">int</span>&gt; dist;</span><br><span class="line">    unordered_map&lt;string, pair&lt;<span class="type">char</span>, string&gt; &gt; prev;</span><br><span class="line">    priority_queue&lt;PIS, vector&lt;PIS&gt;, greater&lt;PIS&gt; &gt; heap;</span><br><span class="line">    dist[start] = <span class="number">0</span>;</span><br><span class="line">    heap.<span class="built_in">push</span>(&#123;<span class="built_in">f</span>(start), start&#125;);</span><br><span class="line">    <span class="type">int</span> dx[] = &#123;<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>&#125;, dy[] = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">-1</span>&#125;;</span><br><span class="line">    <span class="keyword">while</span>(heap.<span class="built_in">size</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">auto</span> t = heap.<span class="built_in">top</span>();</span><br><span class="line">        heap.<span class="built_in">pop</span>();</span><br><span class="line">        string state = t.y;</span><br><span class="line">        <span class="keyword">if</span>(state == ed) <span class="keyword">break</span>;</span><br><span class="line">        <span class="type">int</span> nx, ny;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">9</span>; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(state[i] == <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                nx = i / <span class="number">3</span>;</span><br><span class="line">                ny = i % <span class="number">3</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        string source = state;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; ++i) <span class="comment">// æ‰©å±•é¢„æµ‹è·ç¦»æœ€å°çš„ç‚¹</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> a = nx + dx[i], b = ny + dy[i];</span><br><span class="line">            <span class="keyword">if</span>(a &lt; <span class="number">0</span> || a &gt; <span class="number">2</span> || b &lt; <span class="number">0</span> || b &gt; <span class="number">2</span>) <span class="keyword">continue</span>;</span><br><span class="line">            state = source;</span><br><span class="line">            <span class="built_in">swap</span>(state[nx * <span class="number">3</span> + ny], state[a * <span class="number">3</span> + b]);</span><br><span class="line">            <span class="keyword">if</span>(!dist.<span class="built_in">count</span>(state) || dist[state] &gt; dist[source] + <span class="number">1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                dist[state] = dist[source] + <span class="number">1</span>;</span><br><span class="line">                heap.<span class="built_in">push</span>(&#123;dist[state] + <span class="built_in">f</span>(state), state&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dist[ed];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string start;</span><br><span class="line">    cin &gt;&gt; start;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">Bfs</span>(start) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="K-çŸ­è·¯"><a href="#K-çŸ­è·¯" class="headerlink" title="K-çŸ­è·¯"></a>K-çŸ­è·¯</h3><blockquote>
<p>çˆ†æœï¼Œä¸”æœç´¢èŒƒå›´å¾ˆå¤§ï¼Œå¾ˆé€‚åˆ A-star</p>
</blockquote>
<p>ä¼°ä»·ï¼š</p>
<p>ä»¥å½“å‰ç‚¹åˆ°ç»ˆç‚¹çš„æœ€çŸ­è·ç¦»ä½œä¸ºä¼°ä»·å‡½æ•°ï¼Œå› ä¸ºå®ƒä¸€å®šå°äºç­‰äºå®é™…èµ°çš„è·ç¦»ã€‚</p>
<p>æ—¢ç„¶ç¬¬ä¸€æ¬¡å¼¹å‡ºæ˜¯è·ç¦»æœ€å°çš„ï¼Œé‚£ä¹ˆç¬¬ $k$ æ¬¡å¼¹å‡ºå°±åº”è¯¥æ˜¯ç¬¬ $k$ å°çš„ï¼Ÿ</p>
<p>å…ˆçœ‹ç¬¬äºŒæ¬¡ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202310021545963.webp"
                      alt="image.png"
                ></p>
<p>ä¸ç¬¬ä¸€æ¬¡è¯æ˜æ€è·¯ç›¸åŒï¼Œ</p>
<p>è¿ç”¨æ•°å­¦å½’çº³æ³•ï¼Œå¯å¾—ç¬¬ $k$ æ¬¡å¼¹å‡ºå°±åº”è¯¥æ˜¯ç¬¬ $k$ å°çš„ã€‚</p>
<p>æ³¨æ„ï¼Œæ˜¯å¼¹å‡ºæ—¶çš„è¯¥çŠ¶æ€ï¼Œè€Œä¸æ˜¯ $dist$ å€¼ï¼Œå› ä¸º $dist$ å€¼è¢«æ›´æ–°ä¸ºæœ€å°åå°†ä¸ä¼šå†è¢«æ›´æ–°ã€‚</p>
<p><a class="link"   href="https://www.acwing.com/problem/content/description/180/" >AcWing178<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1000</span>, M = <span class="number">200010</span>;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> x first </span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> y second </span></span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; PII;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>, PII&gt; PIII;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> nxt, val, to;</span><br><span class="line">&#125;e[M];</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> fir[N], rfir[N];</span><br><span class="line"><span class="type">int</span> n, m, S, T, K;</span><br><span class="line"><span class="type">int</span> cnt, tot;</span><br><span class="line"><span class="type">bool</span> vis[N];</span><br><span class="line"><span class="type">int</span> dist[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Add</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> v, <span class="type">int</span> w, <span class="type">bool</span> direc)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++cnt].to = v;</span><br><span class="line">    e[cnt].val = w;</span><br><span class="line">    <span class="keyword">if</span>(direc)</span><br><span class="line">    &#123;</span><br><span class="line">        e[cnt].nxt = fir[u];</span><br><span class="line">        fir[u] = cnt;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        e[cnt].nxt = rfir[u];</span><br><span class="line">        rfir[u] = cnt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Dijkstra</span><span class="params">(<span class="type">int</span> s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    priority_queue&lt;PII, vector&lt;PII&gt;, greater&lt;PII&gt; &gt; heap;</span><br><span class="line">    <span class="built_in">memset</span>(dist, <span class="number">0x3f</span>, <span class="built_in">sizeof</span>(dist));</span><br><span class="line">    dist[s] = <span class="number">0</span>;</span><br><span class="line">    heap.<span class="built_in">push</span>(&#123;<span class="number">0</span>, s&#125;);</span><br><span class="line">    <span class="keyword">while</span>(heap.<span class="built_in">size</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">auto</span> t = heap.<span class="built_in">top</span>();</span><br><span class="line">        heap.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="type">int</span> ver = t.y;</span><br><span class="line">        <span class="keyword">if</span>(vis[ver]) <span class="keyword">continue</span>;</span><br><span class="line">        vis[ver] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = rfir[ver]; i; i = e[i].nxt)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> v = e[i].to;</span><br><span class="line">            <span class="keyword">if</span>(dist[v] &gt; dist[ver] + e[i].val)</span><br><span class="line">            &#123;</span><br><span class="line">                dist[v] = dist[ver] + e[i].val;</span><br><span class="line">                heap.<span class="built_in">push</span>(&#123;dist[v], v&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Astar</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    priority_queue&lt;PIII, vector&lt;PIII&gt;, greater&lt;PIII&gt; &gt; heap;</span><br><span class="line">    heap.<span class="built_in">push</span>(&#123;dist[S], &#123;<span class="number">0</span>, S&#125;&#125;); <span class="comment">// é¢„æµ‹é•¿åº¦ï¼ŒçœŸå®å€¼ï¼Œç¼–å·</span></span><br><span class="line">    <span class="keyword">while</span>(heap.<span class="built_in">size</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">auto</span> t = heap.<span class="built_in">top</span>();</span><br><span class="line">        heap.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="type">int</span> ver = t.y.y;</span><br><span class="line">        <span class="type">int</span> d = t.y.x;</span><br><span class="line">        <span class="keyword">if</span>(ver == T) tot++;</span><br><span class="line">        <span class="keyword">if</span>(tot == K) <span class="keyword">return</span> d;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = fir[ver]; i; i = e[i].nxt)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> v = e[i].to;</span><br><span class="line">            <span class="keyword">if</span>(dist[v] == <span class="number">0x3f3f3f3f</span>) <span class="keyword">continue</span>; <span class="comment">// ä¸æ»¡è¶³ä¼°ä»·è·ç¦»çš„å®šä¹‰</span></span><br><span class="line">            heap.<span class="built_in">push</span>(&#123;d + e[i].val + dist[v], &#123;d + e[i].val, v&#125;&#125;); <span class="comment">// å› ä¸ºä¸æ˜¯æ‰¾æœ€çŸ­è·¯ï¼Œæ‰€ä»¥æ¯ç§çŠ¶æ€éƒ½è¦æœ</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> a, b, c;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">        <span class="built_in">Add</span>(a, b, c, <span class="literal">true</span>);</span><br><span class="line">        <span class="built_in">Add</span>(b, a, c, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;S, &amp;T, &amp;K);</span><br><span class="line">    <span class="keyword">if</span>(S == T) K++;</span><br><span class="line">    <span class="built_in">Dijkstra</span>(T);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">Astar</span>());</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="çˆ¬å±±"><a href="#çˆ¬å±±" class="headerlink" title="çˆ¬å±±"></a>çˆ¬å±±</h1><p>åœ¨ä¸€ä¸ªå¤šå³°å‡½æ•°ä¸Šè¡Œèµ°ï¼Œæ¯æ¬¡å¯ä»¥èµ°ä¸€å°æ­¥ï¼Œå½“ä¸”ä»…å½“å‘å·¦å’Œå‘å³èµ°éƒ½ä¸æ˜¯æ›´ä¼˜çš„æ—¶å€™ï¼Œæˆ‘å°±åœä¸‹ï¼Œå¦åˆ™å°±å‘æ›´ä¼˜çš„æ–¹å‘èµ°ã€‚</p>
<p>ä½†æ˜¯è¿™æ ·æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æ‰¾åˆ°çš„â€œæœ€ä¼˜è§£â€å¾ˆå¯èƒ½æ˜¯â€œå±€éƒ¨æœ€ä¼˜è§£â€ã€‚</p>
<p>å› ä¸ºè¿™æœ¬èº«å°±æ˜¯ä¸€ä¸ªè´ªå¿ƒçš„æ€è·¯ã€‚</p>
<p>æ‰€ä»¥éœ€è¦åŠ ä¸€äº›ä¸œè¥¿ä½¿è¿™ä¸ªè´ªå¿ƒæ‰¾åˆ°æ­£ç¡®ç­”æ¡ˆçš„æ¦‚ç‡æ›´é«˜ä¸€äº›ã€‚</p>
<h1 id="æ¨¡æ‹Ÿé€€ç«"><a href="#æ¨¡æ‹Ÿé€€ç«" class="headerlink" title="æ¨¡æ‹Ÿé€€ç«"></a>æ¨¡æ‹Ÿé€€ç«</h1><p>åŸºäºçˆ¬å±±ç®—æ³•,åŠ ä¸Šäº†<strong>æ¸©åº¦T</strong>å‚æ•°ä½œä¸ºæ§åˆ¶æ­¥å­å¤§å°çš„å‚æ•°ã€‚</p>
<p>æ¸©åº¦è¶Šé«˜ï¼Œå°±å®¹æ˜“å†²åŠ¨ä»è€Œä¸€æ­¥èµ°å¾—å¾ˆå¤§ï¼Œè¿™æ ·å°±ä¼šæ³¢åŠ¨åˆ°å…¨å±€æœ€ä¼˜è§£ï¼Œä½†æ˜¯å¾ˆä¸ç¨³å®šã€‚</p>
<p>æ¸©åº¦æ¸æ¸é™ä¸‹æ¥æ—¶ï¼Œå†·é™ä¸‹æ¥åæ¯æ¬¡çš„æ­¥å­å°±èµ°çš„æ¯”è¾ƒå°äº†ï¼Œè¿™æ ·æœ€åå°±ä¼šåœ¨å…¨å±€æœ€ä¼˜è§£é™„è¿‘ä¸æ–­é€¼è¿‘ç›´è‡³æ‰¾åˆ°æœ€ä¼˜è§£ã€‚</p>
<p>è™½ç„¶è¯´ä¹Ÿæœ‰å¯èƒ½åœ¨å±€éƒ¨æœ€ä¼˜è§£å°±å†·é™ä¸‹æ¥äº†ï¼Œä¸è¿‡æ²¡å…³ç³»ï¼Œä½ å¤šé‡å¤å‡ æ¬¡è¿™æ ·çš„è¿‡ç¨‹ï¼Œå¾—åˆ°æ­£è§£çš„æ¦‚ç‡å°±ä¼šå¤§å¤§å¢åŠ ã€‚</p>
<p>å…ˆè®¾ç½®ä¸€ä¸ªåˆå§‹æ¸©åº¦ï¼Œæ¯æ¬¡æ“ä½œåè¿›è¡Œä¸€ä¸ªé™æ¸©æ“ä½œï¼Œå³$T$ä¹˜ä¸ŠæŸä¸ªç³»æ•°ï¼Œå…·ä½“ä¾é¢˜ç›®è€Œå®šã€‚</p>
<p>è¿˜è¦è®¾ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„åˆå§‹ç­”æ¡ˆï¼Œåœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œè°ƒæ•´ï¼ˆè¿™ä¸ªç­”æ¡ˆä¸å¿…å¾ˆå‡†ç¡®ï¼Œå°½é‡æ¥è¿‘ç­”æ¡ˆä»¥å‡å°‘è¿­ä»£æ¬¡æ•°ï¼‰ã€‚</p>
<p>æ¯æ¬¡èµ°ä¸€æ­¥åï¼Œå¦‚æœæ˜¯æ›´ä¼˜è§£ï¼Œé‚£ä¹ˆå°±èµ°è¿‡å»ï¼›å¦‚æœä¸æ˜¯æ›´ä¼˜è§£ï¼Œé‚£å°±ä»¥ä¸€å®šçš„æ¦‚ç‡èµ°è¿‡å»ï¼Œè¿™ä¸ªæ˜¯å¹³è¡¡æ¦‚ç‡$exp(\Delta{E}&#x2F;T)$ï¼Œå…¶ä¸­$exp$å‡½æ•°æ˜¯$e$çš„å¤šå°‘æ¬¡æ–¹ã€‚</p>
<p>å¦‚æœæ€•å‚æ•°æ²¡è°ƒæ ¡å¥½å¯¼è‡´è¶…æ—¶ï¼Œæˆ–è€…æ˜¯æƒ³å°½é‡å¤šé‡å¤å‡ æ¬¡æ­¥éª¤ï¼Œå¯ä»¥å°è¯•åŠ å…¥<strong>å¡æ—¶</strong>æŠ€å·§ã€‚</p>
<p>å¦‚ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>((<span class="type">double</span>)<span class="built_in">clock</span>()/CLOCKS_PER_SEC&lt;T) <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure></div>

<p>å…¶ä¸­ T ä¸ºæ—¶é™ï¼Œè®°å¾—é¢„ç•™è¶³å¤Ÿçš„è¾“å‡ºæ—¶é—´ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202308011959927.webp"
                      alt="image.png"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202308012008597.webp"
                      alt="image.png"
                ></p>
<p>ä¼šæœ‰$0\sim{5} ms$çš„è¯¯å·®ã€‚</p>
<h1 id="è«é˜Ÿ"><a href="#è«é˜Ÿ" class="headerlink" title="è«é˜Ÿ"></a>è«é˜Ÿ</h1><blockquote>
<p>ä¸€ç§åŒºé—´æš´åŠ›ç»“åˆåˆ†å—çš„ç„å­¦ä¼˜åŒ–çš„ç¦»çº¿ç®—æ³•ã€‚<br><a class="link"   href="https://www.zhihu.com/people/mythly" >è«æ¶›å¤§ç¥çš„çŸ¥ä¹<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</blockquote>
<p>å¦‚æœé¢˜ç›®è¦æ±‚å¼ºåˆ¶åœ¨çº¿çš„è¯ï¼Œçº¿æ®µæ ‘å’Œæ ‘çŠ¶æ•°ç»„æ‰æ˜¯æ›´ä¼˜é€‰æ‹©ã€‚</p>
<h2 id="ä¾‹é¢˜"><a href="#ä¾‹é¢˜" class="headerlink" title="ä¾‹é¢˜"></a>ä¾‹é¢˜</h2><p>ç»™å®šä¸€ä¸ªåºåˆ—ï¼Œæ¯æ¬¡è¯¢é—®ä¸ºä¸€ä¸ªåŒºé—´ï¼Œæ¯æ¬¡è¾“å‡ºè¯¥åŒºé—´å†…å…±æœ‰å¤šå°‘ä¸åŒçš„æ•°ã€‚</p>
<p>å¯¹äºè¿™é“é¢˜ï¼Œæš´åŠ›çš„åšæ³•è‚¯å®šæ˜¯æŠŠæ¯ä¸ªåŒºé—´éƒ½æ‰«ä¸€éï¼Œæ‰«çš„æ—¶å€™ç»Ÿè®¡åŒºé—´å†…ä¸åŒä¹¦çš„ä¸ªæ•°ã€‚</p>
<p> è€Œè¿™ä¸ªçš„ä¸€ä¸ªä¼˜åŒ–å°±æ˜¯ç§»åŠ¨åŒºé—´çš„å·¦å³ç«¯ç‚¹çš„æŒ‡é’ˆã€‚</p>
<p>åˆå§‹æ—¶$l&#x3D;1,r&#x3D;0$ï¼Œè®°å½•ä¸€ä¸ª$cnt$æ•°ç»„ä¸ºè¯¥ç§æ•°å‡ºç°çš„æ¬¡æ•°ï¼Œç±»ä¼¼äºæ¡¶ã€‚</p>
<p>è€Œæ¯é‡åˆ°ä¸€ä¸ªæ–°æ•°ï¼Œå°±æŠŠå®ƒå‡ºç°çš„æ¬¡æ•°åŠ ä¸€ï¼Œå¦‚æœå®ƒå‡ºç°çš„æ¬¡æ•°æ˜¯é›¶ï¼Œé‚£ä¹ˆè¯´æ˜è¿™ä¸ªæ•°åœ¨ä¹‹å‰éƒ½æ²¡æœ‰å‡ºç°è¿‡ï¼Œæ‰€ä»¥ä¸åŒæ•°çš„ä¸ªæ•°ä¹Ÿè¦åŠ ä¸€ã€‚å‡å¦‚è¿™ä¸ªæ•°å­—ä¹‹å‰å‡ºç°è¿‡äº†ï¼Œé‚£ä¹ˆå°±åªåŠ å¯¹åº”æ•°çš„ä¸ªæ•°ï¼Œè€Œä¸éœ€è¦åŠ ä¸åŒæ•°çš„ä¸ªæ•°ã€‚</p>
<p>æ¯å‡å»ä¸€ä¸ªæ•°ï¼ŒæŠŠå®ƒçš„å‡ºç°æ¬¡æ•°å‡ä¸€ï¼Œè¿™æ—¶å€™åˆ¤æ–­ä¸€ä¸‹æ˜¯å¦ä¸ºé›¶ï¼Œå¦‚æœæ˜¯ï¼Œé‚£å°±è¯´æ˜è¿™ä¸ªæ•°å·²ç»æ¶ˆå¤±äº†ï¼Œæ‰€ä»¥ä¸åŒæ•°çš„ä¸ªæ•°ä¹Ÿè¦å‡ä¸€ã€‚</p>
<p>å…·ä½“çš„å®ç°è¿‡ç¨‹ï¼Œæ³¨æ„<code>++</code>å’Œ<code>--</code>çš„é¡ºåºï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> pos)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!cnt[a[pos]]) ++now;</span><br><span class="line">    ++cnt[a[pos]];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">del</span><span class="params">(<span class="type">int</span> pos)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    --cnt[a[pos]];</span><br><span class="line">    <span class="keyword">if</span>(!cnt[a[pos]]) --now;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">work</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=q;i++)</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> ql,qr;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;qr,&amp;ql);</span><br><span class="line">        <span class="keyword">while</span>(l&lt;ql) <span class="built_in">del</span>(l++);</span><br><span class="line">        <span class="keyword">while</span>(l&gt;ql) <span class="built_in">add</span>(--l);</span><br><span class="line">        <span class="keyword">while</span>(r&lt;qr) <span class="built_in">add</span>(++r);</span><br><span class="line">        <span class="keyword">while</span>(r&gt;qr) <span class="built_in">del</span>(r--);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,now);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>ä½†è¿™è¿˜ä¸å¤Ÿï¼Œå› ä¸ºåœ¨ä¸€äº›æç«¯æƒ…å†µä¸‹ï¼Œæ¯”å¦‚ä¸­é—´æœ‰ä¸€æ®µå¾ˆé•¿çš„åŒºé—´ï¼Œä½†æ˜¯æŸ¥è¯¢éƒ½æ˜¯åœ¨ä¸¤ç«¯çš„å°åŒºé—´ï¼Œè€Œä¸”è¿˜æ˜¯æ¢ç€æ¥çš„ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´åŒºé—´ä¸€ä¼šè·‘å‘å·¦è¾¹ï¼Œä¸€ä¼šè·‘å‘å³è¾¹ï¼Œå°±ä¼šè¢«å¡ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬å°±è¦ä¸Šä¸€äº›<em>ç„å­¦ä¼˜åŒ–</em>äº†ã€‚</p>
<h2 id="åˆ†å—"><a href="#åˆ†å—" class="headerlink" title="åˆ†å—"></a>åˆ†å—</h2><p>å°†é•¿åº¦ä¸º$n$çš„åºåˆ—åˆ†ä¸º$\sqrt{n}$ä¸ªå—ï¼Œç¼–å·ä»$1$åˆ°$\sqrt{n}$ï¼ŒæŠŠæŸ¥è¯¢åŒºé—´æŒ‰ç…§å·¦ç«¯ç‚¹æ‰€åœ¨å—çš„ç¼–å·æ’åºï¼Œå¦‚æœå·¦ç«¯ç‚¹æ‰€åœ¨çš„å—ç›¸åŒï¼Œé‚£å°±æŒ‰ç…§å³ç«¯ç‚¹æ’åºã€‚</p>
<p>æ’åºå‡½æ•°ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">cmp</span><span class="params">(query a, query b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> belong[a.l]==belong[b.l]?a.r&lt;b.r:belong[a.l]&lt;belong[b.l];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>è¿™ä¹ˆä¸€ä¸ªä¼˜åŒ–å°±æŠŠæ—¶é—´å¤æ‚åº¦ä»$n^2$å˜ä¸ºäº†$n\sqrt{n}$ï¼Œå¥½æäº†ï¼Œé‚£ä¹ˆç»§ç»­ã€‚</p>
<h2 id="å¥‡å¶æ€§æ’åº"><a href="#å¥‡å¶æ€§æ’åº" class="headerlink" title="å¥‡å¶æ€§æ’åº"></a>å¥‡å¶æ€§æ’åº</h2><p>å¯¹äºå·¦ç«¯ç‚¹åœ¨åŒä¸€ä¸ªç¼–å·ä¸ºå¥‡æ•°çš„å—å†…ï¼Œå³ç«¯ç‚¹æŒ‰ç…§å‡åºæ’åˆ—ã€‚</p>
<p>å¯¹äºå·¦ç«¯ç‚¹åœ¨ç»Ÿä¸€ç¼–å·ä¸ºå¶æ•°çš„å—å†…ï¼Œå³ç«¯ç‚¹æŒ‰ç…§é™åºæ’åˆ—ã€‚</p>
<p>å®ƒçš„ä¸»è¦åŸç†ä¾¿æ˜¯å³æŒ‡é’ˆè·³å®Œå¥‡æ•°å—å¾€å›è·³æ—¶åœ¨åŒä¸€ä¸ªæ–¹å‘èƒ½é¡ºè·¯æŠŠå¶æ•°å—è·³å®Œï¼Œç„¶åè·³å®Œè¿™ä¸ªå¶æ•°å—åˆèƒ½é¡ºå¸¦æŠŠä¸‹ä¸€ä¸ªå¥‡æ•°å—è·³å®Œã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">cmp</span><span class="params">(query a, query b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> (belong[a.l]^belong[b.l])?belong[a.l]&lt;belong[b.l]:((belong[a.l]&amp;<span class="number">1</span>)?a.r&lt;b.r:a.r&gt;b.r);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>å…ˆç”¨å¼‚æˆ–åˆ¤æ–­ä¸¤ä¸ªæ•°æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœä¸åŒï¼Œé‚£ä¹ˆå°±æŒ‰ç…§ç¼–å·å‡åºæ’åºï¼›å¦‚æœç›¸åŒï¼Œé‚£ä¹ˆå†æ¯”è¾ƒå®ƒä»¬çš„å—çš„ç¼–å·çš„å¥‡å¶æ€§ï¼Œå¦‚æœæ˜¯å¥‡æ•°ï¼Œé‚£å°±æŒ‰ç…§å³ç«¯ç‚¹å‡åºæ’åºï¼Œå¦åˆ™æŒ‰ç…§å³ç«¯ç‚¹é™åºæ’åºã€‚</p>
<h2 id="å‹å¸¸"><a href="#å‹å¸¸" class="headerlink" title="å‹å¸¸"></a>å‹å¸¸</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span>(l&lt;ql) now-=!--cnt[a[l++]];</span><br><span class="line"><span class="keyword">while</span>(l&gt;ql) now+=!cnt[a[--l]]++;</span><br><span class="line"><span class="keyword">while</span>(r&lt;qr) now+=!cnt[a[++r]]++;</span><br><span class="line"><span class="keyword">while</span>(r&gt;qr) now-=!--cnt[a[r--]];</span><br></pre></td></tr></table></figure></div>

<p>æ³¨æ„æ­¤å¤„<code>+=</code>ä¼˜å…ˆçº§æ¯”<code>cnt++</code>æ›´é«˜</p>
<h2 id="å¿«è¯»-å¿«å†™"><a href="#å¿«è¯»-å¿«å†™" class="headerlink" title="å¿«è¯»&#x2F;å¿«å†™"></a>å¿«è¯»&#x2F;å¿«å†™</h2><p>ç•¥ã€‚</p>
<blockquote>
<p>å‚è€ƒæ–‡ç« ï¼š</p>
</blockquote>
<ul>
<li><a class="link"   href="https://www.cnblogs.com/WAMonster/p/10118934.html" >è«é˜Ÿç®—æ³•â€”â€”ä»å…¥é—¨åˆ°é»‘é¢˜ - WAMonster - åšå®¢å›­ (cnblogs.com)<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
<li><a class="link"   href="https://zhuanlan.zhihu.com/p/115243708" >ç®—æ³•å­¦ä¹ ç¬”è®°(24): è«é˜Ÿ - çŸ¥ä¹ (zhihu.com)<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
</ul>
<h2 id="æ ‘ä¸Šè«é˜Ÿ"><a href="#æ ‘ä¸Šè«é˜Ÿ" class="headerlink" title="æ ‘ä¸Šè«é˜Ÿ"></a>æ ‘ä¸Šè«é˜Ÿ</h2><h2 id="å›æ»šè«é˜Ÿ"><a href="#å›æ»šè«é˜Ÿ" class="headerlink" title="å›æ»šè«é˜Ÿ"></a>å›æ»šè«é˜Ÿ</h2>]]></content>
      <categories>
        <category>ACM</category>
      </categories>
  </entry>
  <entry>
    <title>æ•°æ®ç»“æ„</title>
    <url>/668ad1af.html</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p><strong>æ³¨æ„å¯¹äºæ‰€æœ‰çš„æ•°æ®ç»“æ„ï¼Œéå†å‰ä¸€å®šè¦æ£€æŸ¥æ˜¯å¦ä¸ºç©ºï¼Œæˆ–è€…æœ‰æ— å¯èƒ½è®¿é—®åˆ°ç©ºèŠ‚ç‚¹ã€‚</strong></p>
<h1 id="é“¾è¡¨"><a href="#é“¾è¡¨" class="headerlink" title="é“¾è¡¨"></a>é“¾è¡¨</h1><h2 id="åŠ¨æ€é“¾è¡¨"><a href="#åŠ¨æ€é“¾è¡¨" class="headerlink" title="åŠ¨æ€é“¾è¡¨"></a>åŠ¨æ€é“¾è¡¨</h2><p><del>ç•¥ã€‚</del></p>
<h2 id="é™æ€é“¾è¡¨"><a href="#é™æ€é“¾è¡¨" class="headerlink" title="é™æ€é“¾è¡¨"></a>é™æ€é“¾è¡¨</h2><p>ä»¥<a class="link"   href="https://www.luogu.com.cn/problem/P1996" >P1996çº¦ç‘Ÿå¤«é—®é¢˜<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>ä¸ºä¾‹</p>
<h3 id="æ‰‹å†™é™æ€é“¾è¡¨"><a href="#æ‰‹å†™é™æ€é“¾è¡¨" class="headerlink" title="æ‰‹å†™é™æ€é“¾è¡¨:"></a>æ‰‹å†™é™æ€é“¾è¡¨:</h3><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e5</span>;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line">    <span class="type">int</span> id,next,pre;</span><br><span class="line">    <span class="type">int</span> date;</span><br><span class="line">&#125;nodes[N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n,m;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    nodes[<span class="number">0</span>].next=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        nodes[i].id=i;</span><br><span class="line">        nodes[i].pre=i<span class="number">-1</span>;</span><br><span class="line">        nodes[i].next=i<span class="number">+1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    nodes[n].next=<span class="number">0</span>;</span><br><span class="line">    nodes[<span class="number">0</span>].pre=n;</span><br><span class="line">    <span class="type">int</span> now=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(n--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;m;i++)</span><br><span class="line">            now=nodes[now].next;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,nodes[now].id);</span><br><span class="line">        <span class="type">int</span> prev=nodes[now].pre.nex=nodes[now].next;</span><br><span class="line">        nodes[prev].next=nodes[now].next;</span><br><span class="line">        nodes[nex].pre=nodes[now].pre;</span><br><span class="line">        now=nex;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,nodes[now].next);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>


<h1 id="é˜Ÿåˆ—"><a href="#é˜Ÿåˆ—" class="headerlink" title="é˜Ÿåˆ—"></a>é˜Ÿåˆ—</h1><p>ä»¥<a class="link"   href="https://www.luogu.com.cn/problem/P1540" >P1540æœºå™¨ç¿»è¯‘<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>ä¸ºä¾‹</p>
<h2 id="æ‰‹å†™é˜Ÿåˆ—"><a href="#æ‰‹å†™é˜Ÿåˆ—" class="headerlink" title="æ‰‹å†™é˜Ÿåˆ—"></a>æ‰‹å†™é˜Ÿåˆ—</h2><h1 id="åŒç«¯é˜Ÿåˆ—å’Œå•è°ƒé˜Ÿåˆ—"><a href="#åŒç«¯é˜Ÿåˆ—å’Œå•è°ƒé˜Ÿåˆ—" class="headerlink" title="åŒç«¯é˜Ÿåˆ—å’Œå•è°ƒé˜Ÿåˆ—"></a>åŒç«¯é˜Ÿåˆ—å’Œå•è°ƒé˜Ÿåˆ—</h1><p><a class="link"   href="https://blog.csdn.net/weixin_42462202/article/details/87537503" >Deque<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>è¿™é‡Œä»¥<a class="link"   href="https://www.luogu.com.cn/problem/P1886" >P1886æ»‘åŠ¨çª—å£<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>ä¸¾ä¾‹</p>
<table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td><code>dq[i]</code></td>
<td>è¿”å›é˜Ÿåˆ—ä¸­ä¸‹æ ‡ä¸ºiçš„å…ƒç´ </td>
</tr>
<tr>
<td><code>dq.front()</code></td>
<td>è¿”å›é˜Ÿå¤´</td>
</tr>
<tr>
<td><code>dq.back()</code></td>
<td>è¿”å›é˜Ÿå°¾</td>
</tr>
<tr>
<td><code>dq.pop_front()</code></td>
<td>åˆ é™¤é˜Ÿå¤´</td>
</tr>
<tr>
<td><code>dq.pop_back</code></td>
<td>åˆ é™¤é˜Ÿå°¾</td>
</tr>
<tr>
<td><code>dq.push_back(e)</code></td>
<td>åœ¨é˜Ÿå°¾æ·»åŠ ä¸€ä¸ªå…ƒç´ e</td>
</tr>
<tr>
<td><code>dq.push_front(e)</code></td>
<td>åœ¨é˜Ÿå¤´æ·»åŠ ä¸€ä¸ªå…ƒç´ e</td>
</tr>
</tbody></table>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e6</span><span class="number">+5</span>;</span><br><span class="line"><span class="type">int</span> a[N];</span><br><span class="line">deque&lt;<span class="type">int</span>&gt; q;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n,m;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span>(!q.<span class="built_in">empty</span>()&amp;&amp;a[q.<span class="built_in">back</span>()]&gt;a[i]) q.<span class="built_in">pop_back</span>();</span><br><span class="line">        q.<span class="built_in">push_back</span>(i);</span><br><span class="line">        <span class="keyword">if</span>(i&gt;=m)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span>(!q.<span class="built_in">empty</span>()&amp;&amp;q.<span class="built_in">front</span>()&lt;=i-m) q.<span class="built_in">pop_front</span>();</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,a[q.<span class="built_in">front</span>()]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>()) q.<span class="built_in">pop_front</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span>(!q.<span class="built_in">empty</span>()&amp;&amp;a[q.<span class="built_in">back</span>()]&lt;a[i]) q.<span class="built_in">pop_back</span>();</span><br><span class="line">        q.<span class="built_in">push_back</span>(i);</span><br><span class="line">        <span class="keyword">if</span>(i&gt;=m)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span>(!q.<span class="built_in">empty</span>()&amp;&amp;q.<span class="built_in">front</span>()&lt;=i-m) q.<span class="built_in">pop_front</span>();</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,a[q.<span class="built_in">front</span>()]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>ä¾‹é¢˜<a class="link"   href="https://acm.hdu.edu.cn/showproblem.php?pid=1003" >Max sum<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>:</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;t);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">1</span>;l&lt;=t;l++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> n;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">        <span class="type">int</span> maxsum=INT_MIN,sum=<span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> st=<span class="number">1</span>,en=<span class="number">1</span>,p=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> s;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;s);</span><br><span class="line">            sum+=s;</span><br><span class="line">            <span class="keyword">if</span>(sum&gt;maxsum)</span><br><span class="line">            &#123;</span><br><span class="line">                maxsum=sum;</span><br><span class="line">                st=p;</span><br><span class="line">                en=i;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(sum&lt;<span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                sum=<span class="number">0</span>;</span><br><span class="line">                p=i<span class="number">+1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Case %d:\n&quot;</span>,l);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d %d %d\n&quot;</span>,maxsum,st,en);</span><br><span class="line">        <span class="keyword">if</span>(l!=t) <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="DPä¼˜åŒ–"><a href="#DPä¼˜åŒ–" class="headerlink" title="DPä¼˜åŒ–"></a>DPä¼˜åŒ–</h2><p><a class="link"   href="https://www.luogu.com.cn/problem/P1725" >P1725<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">2e5</span><span class="number">+10</span>;</span><br><span class="line"><span class="type">int</span> n,l,r;</span><br><span class="line"><span class="type">int</span> a[N];</span><br><span class="line"><span class="type">int</span> f[N];</span><br><span class="line"><span class="type">int</span> q[N];</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(f,<span class="number">128</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line">    f[<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld%lld&quot;</span>,&amp;n,&amp;l,&amp;r);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">+1</span>;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="type">int</span> h=<span class="number">1</span>,t=<span class="number">0</span>,ans=<span class="number">-0x7ffffffff</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=l<span class="number">+1</span>;i&lt;=n<span class="number">+1</span>;i++)<span class="comment">//l+1å·¦è¾¹çš„æ ¼å­è·³ä¸åˆ°</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span>(h&lt;=t&amp;&amp;q[h]&lt;i-r) h++;<span class="comment">//åˆ å¤´</span></span><br><span class="line">        <span class="keyword">while</span>(h&lt;=t&amp;&amp;f[q[t]]&lt;f[i-l]) t--;<span class="comment">//æŠŠå°äºå½“å‰æ–°åŠ çš„å€¼çš„å°¾éƒ¨éƒ½å»æ‰</span></span><br><span class="line">        q[++t]=i-l;<span class="comment">//å°†æœ€å³ç«¯åŠ å…¥é˜Ÿå°¾</span></span><br><span class="line">        f[i]=f[q[h]]+a[i];</span><br><span class="line">        <span class="keyword">if</span>(i+r&gt;n<span class="number">+1</span>) ans=<span class="built_in">max</span>(ans,f[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="æ ˆ"><a href="#æ ˆ" class="headerlink" title="æ ˆ"></a>æ ˆ</h1><h2 id="å•è°ƒæ ˆ"><a href="#å•è°ƒæ ˆ" class="headerlink" title="å•è°ƒæ ˆ"></a>å•è°ƒæ ˆ</h2><p>ä»¥ä¾‹é¢˜<a class="link"   href="https://www.luogu.com.cn/problem/P2947" >P2947<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>ä¸ºä¾‹</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> h[<span class="number">200005</span>],ans[<span class="number">200005</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;h[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    stack&lt;<span class="type">int</span>&gt; st;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=n;i&gt;=<span class="number">1</span>;i--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span>(!st.<span class="built_in">empty</span>()&amp;&amp;h[st.<span class="built_in">top</span>()]&lt;=h[i]) st.<span class="built_in">pop</span>();<span class="comment">//æ¯”å®ƒçŸ®çš„å…¨éƒ¨å‡ºæ ˆ</span></span><br><span class="line">        <span class="comment">//å› ä¸ºå€’ç€éå†ï¼Œæ‰€ä»¥æ–°å…¥æ ˆçš„ä¸€å®šæ›´é å·¦æ›´é å‰ä¹Ÿæ›´çŸ®æ›´æœ‰å¯èƒ½æ˜¯æ›´ä¼˜è§£</span></span><br><span class="line">        <span class="keyword">if</span>(st.<span class="built_in">empty</span>()) ans[i]=<span class="number">0</span>;<span class="comment">//å³è¾¹æ²¡æœ‰å¥¶ç‰›æ¯”å®ƒé«˜</span></span><br><span class="line">        <span class="keyword">else</span> ans[i]=st.<span class="built_in">top</span>();<span class="comment">//æœ€è¿‘çš„ä¸”æ¯”å®ƒé«˜çš„</span></span><br><span class="line">        st.<span class="built_in">push</span>(i);<span class="comment">//å…¥æ ˆ</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,ans[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>ä¹ é¢˜<a class="link"   href="https://www.luogu.com.cn/problem/P5788" >P5788<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>:</p>
<p>è¿™é‡Œè´´ä¸€ä»½<code>æ‰‹å†™æ ˆ</code>çš„ä»£ç ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n,a[<span class="number">3000055</span>],f[<span class="number">3000055</span>];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">fstack</span>&#123;<span class="comment">//æ‰‹å†™æ ˆ</span></span><br><span class="line">    <span class="type">int</span> w[<span class="number">3000055</span>];</span><br><span class="line">    <span class="type">int</span> t=<span class="number">0</span>;<span class="comment">//æ ˆé¡¶ä½ç½®</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">push</span><span class="params">(<span class="type">int</span> x)</span><span class="comment">//æ’å…¥</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        w[++t]=x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">top</span><span class="params">()</span><span class="comment">//è¿”å›é¡¶éƒ¨å€¼</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> w[t];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">pop</span><span class="params">()</span><span class="comment">//å¼¹å‡ºæ ˆé¡¶</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        t--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">empty</span><span class="params">()</span><span class="comment">//åˆ¤æ–­æ˜¯å¦ä¸ºç©º</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> t==<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;s;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=n;i&gt;=<span class="number">1</span>;i--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span>(!s.<span class="built_in">empty</span>()&amp;&amp;a[i]&gt;=a[s.<span class="built_in">top</span>()]) s.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">if</span>(s.<span class="built_in">empty</span>()) f[i]=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">else</span> f[i]=s.<span class="built_in">top</span>();</span><br><span class="line">        s.<span class="built_in">push</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,f[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// #include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="comment">// using namespace std;</span></span><br><span class="line"><span class="comment">// int n,a[300005],f[300005];</span></span><br><span class="line"><span class="comment">// int main()</span></span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">//     scanf(&quot;%d&quot;,&amp;n);</span></span><br><span class="line"><span class="comment">//     stack&lt;int&gt; s;</span></span><br><span class="line"><span class="comment">//     for(int i=1;i&lt;=n;i++)</span></span><br><span class="line"><span class="comment">//         scanf(&quot;%d&quot;,&amp;a[i]);</span></span><br><span class="line"><span class="comment">//     for(int i=n;i&gt;=1;i--)</span></span><br><span class="line"><span class="comment">//     &#123;</span></span><br><span class="line"><span class="comment">//         while(!s.empty()&amp;&amp;a[i]&gt;=a[s.top()]) s.pop();</span></span><br><span class="line"><span class="comment">//         if(s.empty()) f[i]=0;</span></span><br><span class="line"><span class="comment">//         else f[i]=s.top();</span></span><br><span class="line"><span class="comment">//         s.push(i);</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">//     for(int i=1;i&lt;=n;i++)</span></span><br><span class="line"><span class="comment">//     &#123;</span></span><br><span class="line"><span class="comment">//         printf(&quot;%d &quot;,f[i]);</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">//     return 0;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure></div>

<p>ä¹ é¢˜<a class="link"   href="https://www.luogu.com.cn/problem/P1449" >P1449<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string s;</span><br><span class="line">    cin&gt;&gt;s;</span><br><span class="line">    stack&lt;<span class="type">int</span>&gt; st;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;s[i]!=<span class="string">&#x27;@&#x27;</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> now=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(s[i]&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;s[i]&lt;=<span class="string">&#x27;9&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            now*=<span class="number">10</span>;</span><br><span class="line">            now+=s[i]-<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(s[i]==<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            st.<span class="built_in">push</span>(now);</span><br><span class="line">            now=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(s[i]==<span class="string">&#x27;+&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> a=st.<span class="built_in">top</span>();</span><br><span class="line">            st.<span class="built_in">pop</span>();</span><br><span class="line">            a+=st.<span class="built_in">top</span>();</span><br><span class="line">            st.<span class="built_in">pop</span>();</span><br><span class="line">            st.<span class="built_in">push</span>(a);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(s[i]==<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> a=-st.<span class="built_in">top</span>();</span><br><span class="line">            st.<span class="built_in">pop</span>();</span><br><span class="line">            a+=st.<span class="built_in">top</span>();</span><br><span class="line">            st.<span class="built_in">pop</span>();</span><br><span class="line">            st.<span class="built_in">push</span>(a);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(s[i]==<span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> a=st.<span class="built_in">top</span>();</span><br><span class="line">            st.<span class="built_in">pop</span>();</span><br><span class="line">            a*=st.<span class="built_in">top</span>();</span><br><span class="line">            st.<span class="built_in">pop</span>();</span><br><span class="line">            st.<span class="built_in">push</span>(a);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(s[i]==<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> a=st.<span class="built_in">top</span>(),b;</span><br><span class="line">            st.<span class="built_in">pop</span>();</span><br><span class="line">            b=st.<span class="built_in">top</span>();</span><br><span class="line">            st.<span class="built_in">pop</span>();</span><br><span class="line">            st.<span class="built_in">push</span>(b/a);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,st.<span class="built_in">top</span>());</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>ä¹ é¢˜<a class="link"   href="https://www.luogu.com.cn/problem/P1981" >P1981<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>:</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    stack&lt;<span class="type">int</span>&gt; s;</span><br><span class="line">    <span class="type">int</span> a,b;</span><br><span class="line">    <span class="type">char</span> c;</span><br><span class="line">    cin&gt;&gt;a;</span><br><span class="line">    <span class="type">int</span> m=<span class="number">10000</span>;</span><br><span class="line">    a=a%m;</span><br><span class="line">    s.<span class="built_in">push</span>(a);</span><br><span class="line">    <span class="keyword">while</span>(cin&gt;&gt;c&gt;&gt;b)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(c==<span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            a=s.<span class="built_in">top</span>();</span><br><span class="line">            s.<span class="built_in">pop</span>();</span><br><span class="line">            s.<span class="built_in">push</span>(a*b%m);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>    s.<span class="built_in">push</span>(b);</span><br><span class="line">    &#125;</span><br><span class="line">    a=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(s.<span class="built_in">size</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        a+=s.<span class="built_in">top</span>();</span><br><span class="line">        s.<span class="built_in">pop</span>();</span><br><span class="line">        a%=m;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;a&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>ä¹ é¢˜<a class="link"   href="https://www.luogu.com.cn/problem/P1175" >P1175<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>:</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long</span></span><br><span class="line"><span class="comment">/*æ‡’å¾—å†™äº†ï¼Œç›®å‰è¿›åº¦èµ°åˆ°å°†å‰ç¼€è¡¨è¾¾å¼è½¬ä¸ºä¸­ç¼€è¡¨è¾¾å¼ï¼Œä½†æ˜¯åŒè¿ç®—çº§å¹¶æ²¡æœ‰æŒ‰ç…§é¢˜ç›®é¡ºåº*/</span></span><br><span class="line"><span class="comment">/*40%*/</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">fstack</span>&#123;<span class="comment">//æ‰‹å†™æ ˆ</span></span><br><span class="line">    <span class="type">char</span> w[<span class="number">30005</span>];</span><br><span class="line">    <span class="type">int</span> t=<span class="number">0</span>;<span class="comment">//æ ˆé¡¶ä½ç½®</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">push</span><span class="params">(<span class="type">int</span> x)</span><span class="comment">//æ’å…¥</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        w[++t]=x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">char</span> <span class="title">top</span><span class="params">()</span><span class="comment">//è¿”å›é¡¶éƒ¨å€¼</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> w[t];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">pop</span><span class="params">()</span><span class="comment">//å¼¹å‡ºæ ˆé¡¶</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        t--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">empty</span><span class="params">()</span><span class="comment">//åˆ¤æ–­æ˜¯å¦ä¸ºç©º</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> t==<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;st,bas;</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//st;//å­˜æ”¾å¾…å¤„ç†ç¬¦å·</span></span><br><span class="line">    <span class="comment">//bas;//å­˜æ”¾è¡¨è¾¾å¼</span></span><br><span class="line">    <span class="type">char</span> c;</span><br><span class="line">    <span class="keyword">while</span>((c=<span class="built_in">getchar</span>())!=EOF)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(c&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;c&lt;=<span class="string">&#x27;9&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            bas.<span class="built_in">push</span>(c);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(c==<span class="string">&#x27;(&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            st.<span class="built_in">push</span>(c);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(c==<span class="string">&#x27;)&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span>(st.<span class="built_in">top</span>()!=<span class="string">&#x27;(&#x27;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                bas.<span class="built_in">push</span>(st.<span class="built_in">top</span>());</span><br><span class="line">                st.<span class="built_in">pop</span>();<span class="comment">//å¼¹å‡º(</span></span><br><span class="line">            &#125;</span><br><span class="line">            st.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(c==<span class="string">&#x27;^&#x27;</span>&amp;&amp;(st.<span class="built_in">empty</span>()||st.<span class="built_in">top</span>()==<span class="string">&#x27;(&#x27;</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            st.<span class="built_in">push</span>(c);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(c==<span class="string">&#x27;^&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span>((c==<span class="string">&#x27;^&#x27;</span>&amp;&amp;(st.<span class="built_in">empty</span>()||st.<span class="built_in">top</span>()==<span class="string">&#x27;(&#x27;</span>))==<span class="literal">false</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                bas.<span class="built_in">push</span>(st.<span class="built_in">top</span>());</span><br><span class="line">                st.<span class="built_in">pop</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            st.<span class="built_in">push</span>(c);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>((c==<span class="string">&#x27;*&#x27;</span>||c==<span class="string">&#x27;/&#x27;</span>)&amp;&amp;(st.<span class="built_in">empty</span>()||st.<span class="built_in">top</span>()==<span class="string">&#x27;(&#x27;</span>||st.<span class="built_in">top</span>()!=<span class="string">&#x27;^&#x27;</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            st.<span class="built_in">push</span>(c);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(c==<span class="string">&#x27;*&#x27;</span>||c==<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span>(((c==<span class="string">&#x27;*&#x27;</span>||c==<span class="string">&#x27;/&#x27;</span>)&amp;&amp;(st.<span class="built_in">empty</span>()||st.<span class="built_in">top</span>()==<span class="string">&#x27;(&#x27;</span>||st.<span class="built_in">top</span>()!=<span class="string">&#x27;^&#x27;</span>))==<span class="literal">false</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                bas.<span class="built_in">push</span>(st.<span class="built_in">top</span>());</span><br><span class="line">                st.<span class="built_in">pop</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            st.<span class="built_in">push</span>(c);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>((c==<span class="string">&#x27;+&#x27;</span>||c==<span class="string">&#x27;-&#x27;</span>)&amp;&amp;(st.<span class="built_in">empty</span>()||st.<span class="built_in">top</span>()==<span class="string">&#x27;(&#x27;</span>||(st.<span class="built_in">top</span>()!=<span class="string">&#x27;^&#x27;</span>&amp;&amp;st.<span class="built_in">top</span>()!=<span class="string">&#x27;*&#x27;</span>&amp;&amp;st.<span class="built_in">top</span>()!=<span class="string">&#x27;/&#x27;</span>)))</span><br><span class="line">        &#123;</span><br><span class="line">            st.<span class="built_in">push</span>(c);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(c==<span class="string">&#x27;+&#x27;</span>||c==<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span>(((c==<span class="string">&#x27;+&#x27;</span>||c==<span class="string">&#x27;-&#x27;</span>)&amp;&amp;(st.<span class="built_in">empty</span>()||st.<span class="built_in">top</span>()==<span class="string">&#x27;(&#x27;</span>||(st.<span class="built_in">top</span>()!=<span class="string">&#x27;^&#x27;</span>&amp;&amp;st.<span class="built_in">top</span>()!=<span class="string">&#x27;*&#x27;</span>&amp;&amp;st.<span class="built_in">top</span>()!=<span class="string">&#x27;/&#x27;</span>)))==<span class="literal">false</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                bas.<span class="built_in">push</span>(st.<span class="built_in">top</span>());</span><br><span class="line">                st.<span class="built_in">pop</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            st.<span class="built_in">push</span>(c);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(!st.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        bas.<span class="built_in">push</span>(st.<span class="built_in">top</span>());</span><br><span class="line">        st.<span class="built_in">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(!bas.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        cout&lt;&lt;bas.<span class="built_in">top</span>();</span><br><span class="line">        bas.<span class="built_in">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><del>è¿™ä¸ªå¤§æ¨¡æ‹Ÿä½œè€…æœ‰æ—¶é—´å†è¡¥ã€‚</del></p>
<h1 id="STL"><a href="#STL" class="headerlink" title="STL"></a>STL</h1><h2 id="Vector"><a href="#Vector" class="headerlink" title="Vector"></a>Vector</h2><blockquote>
<p><code>#include&lt;vector&gt;</code><br><a class="link"   href="https://blog.csdn.net/qiancm/article/details/119611928" >é“¾æ¥<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</blockquote>
<h3 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h3><p>è‹¥ç±»å‹ä¸º<code>int</code>ï¼Œåˆ™åˆå§‹åŒ–ä¸º0.</p>
<p>è‹¥ç±»å‹ä¸º<code>string</code>ï¼Œåˆ™åˆå§‹åŒ–ä¸ºç©ºå­—ç¬¦ä¸²ã€‚</p>
<hr>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(<span class="number">10</span>)</span></span>;<span class="comment">//åˆå§‹åŒ–äº†ä¸€ä¸ªæœ‰åä¸ªå…ƒç´ çš„vectorï¼Œä¸”åä¸ªå…ƒç´ çš„å€¼éƒ½æ˜¯0</span></span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(<span class="number">10</span>,<span class="number">1</span>)</span></span>;<span class="comment">//åˆå§‹åŒ–äº†ä¸€ä¸ªæœ‰åä¸ªå…ƒç´ çš„vectorï¼Œä¸”åä¸ªå…ƒç´ çš„å€¼éƒ½æ˜¯1</span></span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">b</span><span class="params">(a)</span></span>;<span class="comment">//å°†aå¤åˆ¶ä¸€ä»½ç»™b</span></span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">copy</span>(b.<span class="built_in">begin</span>(),b.<span class="built_in">end</span>().a.<span class="built_in">begin</span>())<span class="comment">//å°†ä»b.beginå¼€å§‹åˆ°b.end()ç»“æŸçš„å…ƒç´ å¤åˆ¶åˆ°ä»a.begin()å¼€å§‹çš„åœ°æ–¹è‹¥è¶…å‡ºåˆ™åœæ­¢</span></span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="type">int</span> cnt;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;i:a)</span><br><span class="line">    &#123;</span><br><span class="line">        i++;</span><br><span class="line">        cnt++;</span><br><span class="line">        <span class="comment">// cout&lt;&lt;i&lt;&lt;endl;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">b</span><span class="params">(a)</span></span>;</span><br><span class="line">    <span class="keyword">auto</span> it=b.<span class="built_in">begin</span>();</span><br><span class="line">    <span class="built_in">advance</span>(it,<span class="number">6</span>);</span><br><span class="line">    b.<span class="built_in">insert</span>(it,<span class="number">6</span>,<span class="number">6</span>);</span><br><span class="line">    <span class="built_in">copy</span>(b.<span class="built_in">begin</span>(),b.<span class="built_in">end</span>(),a.<span class="built_in">begin</span>());</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;i:a)</span><br><span class="line">        cout&lt;&lt;i&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;cnt;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><strong>è¾“å‡ºï¼š</strong></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307181441496.webp"
                      alt="image.png"
                ></p>
<hr>
<h3 id="æ·»åŠ å…ƒç´ "><a href="#æ·»åŠ å…ƒç´ " class="headerlink" title="æ·»åŠ å…ƒç´ "></a>æ·»åŠ å…ƒç´ </h3><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">b.<span class="built_in">push_back</span>(i);</span><br><span class="line">b.<span class="built_in">push_back</span>(&#123;<span class="number">1</span>,<span class="number">2</span>&#125;);<span class="comment">//pair</span></span><br></pre></td></tr></table></figure></div>

<p>å¯¹äºå·²å­˜åœ¨çš„å…ƒç´ ï¼Œå¯ä»¥åƒæ•°ç»„ä¸€æ ·é€šè¿‡ä¸‹æ ‡è¿›è¡Œè®¿é—®å’Œä¿®æ”¹ã€‚</p>
<p>æˆ–è€…ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">b.<span class="built_in">emplace_back</span>(i);</span><br><span class="line">b.<span class="built_in">emplace_back</span>(<span class="number">1</span>,<span class="number">2</span>);<span class="comment">//pair</span></span><br></pre></td></tr></table></figure></div>

<p>emplace æ¯” push å°‘äº†æ‹·è´çš„è¿‡ç¨‹ï¼Œç›´æ¥åœ¨å®¹å™¨å°¾éƒ¨åˆ›å»ºå…ƒç´ ï¼Œå› æ­¤é€Ÿåº¦æ›´å¿«ã€‚</p>
<h3 id="æ’å…¥å…ƒç´ "><a href="#æ’å…¥å…ƒç´ " class="headerlink" title="æ’å…¥å…ƒç´ "></a>æ’å…¥å…ƒç´ </h3><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span> </span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span> </span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;array&gt;</span> </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::vector&lt;<span class="type">int</span>&gt; demo&#123;<span class="number">1</span>,<span class="number">2</span>&#125;;</span><br><span class="line">    <span class="comment">//ç¬¬ä¸€ç§æ ¼å¼ç”¨æ³•</span></span><br><span class="line">    demo.<span class="built_in">insert</span>(demo.<span class="built_in">begin</span>() + <span class="number">1</span>, <span class="number">3</span>);<span class="comment">//&#123;1,3,2&#125;</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">//ç¬¬äºŒç§æ ¼å¼ç”¨æ³•</span></span><br><span class="line">    demo.<span class="built_in">insert</span>(demo.<span class="built_in">end</span>(), <span class="number">2</span>, <span class="number">5</span>);<span class="comment">//&#123;1,3,2,5,5&#125;</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">//ç¬¬ä¸‰ç§æ ¼å¼ç”¨æ³•</span></span><br><span class="line">    std::array&lt;<span class="type">int</span>,3&gt;test&#123; <span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span> &#125;;</span><br><span class="line">    demo.<span class="built_in">insert</span>(demo.<span class="built_in">end</span>(), test.<span class="built_in">begin</span>(), test.<span class="built_in">end</span>());<span class="comment">//&#123;1,3,2,5,5,7,8,9&#125;</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">//ç¬¬å››ç§æ ¼å¼ç”¨æ³•</span></span><br><span class="line">    demo.<span class="built_in">insert</span>(demo.<span class="built_in">end</span>(), &#123; <span class="number">10</span>,<span class="number">11</span> &#125;);<span class="comment">//&#123;1,3,2,5,5,7,8,9,10,11&#125;</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; demo.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">        cout &lt;&lt; demo[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">b.<span class="built_in">insert</span>(it,<span class="number">6</span>,<span class="number">6</span>);</span><br></pre></td></tr></table></figure></div>

<p>åœ¨è¿­ä»£å™¨<code>it</code>çš„ä½ç½®åæ’å…¥$6$ä¸ª$6$ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="type">int</span> cnt;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;i:a)</span><br><span class="line">    &#123;</span><br><span class="line">        i++;</span><br><span class="line">        cnt++;</span><br><span class="line">        <span class="comment">// cout&lt;&lt;i&lt;&lt;endl;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">b</span><span class="params">(a)</span></span>;</span><br><span class="line">    <span class="keyword">auto</span> it=b.<span class="built_in">begin</span>();</span><br><span class="line">    <span class="built_in">advance</span>(it,<span class="number">6</span>);</span><br><span class="line">    b.<span class="built_in">insert</span>(it,<span class="number">6</span>,<span class="number">6</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;i:b)</span><br><span class="line">        cout&lt;&lt;i&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;cnt;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><strong>è¾“å‡ºï¼š</strong></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307181427472.webp"
                      alt="image.png"
                ></p>
<h3 id="åˆ é™¤å…ƒç´ "><a href="#åˆ é™¤å…ƒç´ " class="headerlink" title="åˆ é™¤å…ƒç´ "></a>åˆ é™¤å…ƒç´ </h3><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt;demo&#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span> &#125;;</span><br><span class="line">    demo.<span class="built_in">pop_back</span>();</span><br><span class="line">    <span class="comment">//è¾“å‡º dmeo å®¹å™¨æ–°çš„size</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;size is :&quot;</span> &lt;&lt; demo.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">    <span class="comment">//è¾“å‡º demo å®¹å™¨æ–°çš„å®¹é‡</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;capacity is :&quot;</span> &lt;&lt; demo.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; demo.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">        cout &lt;&lt; demo[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><strong>è¾“å‡ºï¼š</strong></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">size is :<span class="number">4</span></span><br><span class="line">capacity is :<span class="number">5</span></span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span></span><br></pre></td></tr></table></figure></div>

<p>å¯ä»¥çœ‹å‡ºï¼Œè™½ç„¶æœ€åä¸€ä¸ªå…ƒç´ è¢«åˆ å»äº†ï¼Œä½†æ˜¯å®¹å™¨å®¹é‡å¹¶æ²¡æœ‰å˜ã€‚</p>
<hr>
<p><code>erase</code>å‡½æ•°ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">iterator <span class="title">erase</span> <span class="params">(pos)</span></span>;</span><br></pre></td></tr></table></figure></div>

<p>å…¶ä¸­<code>pos</code>ä¸ºè¿­ä»£å™¨ï¼Œè¡¨ç¤ºè¦åˆ é™¤å…ƒç´ çš„ä½ç½®ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt;demo&#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span> &#125;;</span><br><span class="line">    <span class="keyword">auto</span> iter = demo.<span class="built_in">erase</span>(demo.<span class="built_in">begin</span>() + <span class="number">1</span>);<span class="comment">//åˆ é™¤å…ƒç´  2</span></span><br><span class="line">    <span class="comment">//è¾“å‡º dmeo å®¹å™¨æ–°çš„size</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;size is :&quot;</span> &lt;&lt; demo.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">    <span class="comment">//è¾“å‡º demo å®¹å™¨æ–°çš„å®¹é‡</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;capacity is :&quot;</span> &lt;&lt; demo.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; demo.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">        cout &lt;&lt; demo[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//iterè¿­ä»£å™¨æŒ‡å‘å…ƒç´  3</span></span><br><span class="line">    cout &lt;&lt; endl &lt;&lt; *iter &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><strong>è¾“å‡ºï¼š</strong></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">size is :<span class="number">4</span></span><br><span class="line">capacity is :<span class="number">5</span></span><br><span class="line"><span class="number">1</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure></div>

<p>åˆ é™¤å…ƒç´ ï¼Œå®¹å™¨çš„<code>size</code>å˜å°äº†ï¼Œä½†æ˜¯å®¹é‡å¹¶æ²¡æœ‰å˜ï¼Œè¿­ä»£å™¨æŒ‡å‘åˆ é™¤å…ƒç´ çš„ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚</p>
<h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><blockquote>
<p><code>#include&lt;map&gt;</code></p>
</blockquote>
<p>STLçš„ä¸€ä¸ªå…³è”å®¹å™¨ï¼Œæœ‰æ˜ å°„åŠŸèƒ½ã€‚</p>
<h3 id="å®šä¹‰ï¼š"><a href="#å®šä¹‰ï¼š" class="headerlink" title="å®šä¹‰ï¼š"></a>å®šä¹‰ï¼š</h3><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">map&lt;<span class="type">int</span>,string&gt; m;</span><br></pre></td></tr></table></figure></div>

<p>ç¬¬ä¸€ä¸ªå€¼ä¸º é”®ï¼Œç¬¬äºŒä¸ªå€¼ä¸º å€¼ã€‚</p>
<p>é”®ç›¸å½“äºæ•°ç»„ä¸‹æ ‡ï¼Œå€¼ç›¸å½“äºæ•°ç»„é‡Œå­˜å‚¨çš„ä¸œè¥¿ã€‚</p>
<h3 id="ä½¿ç”¨ï¼š"><a href="#ä½¿ç”¨ï¼š" class="headerlink" title="ä½¿ç”¨ï¼š"></a>ä½¿ç”¨ï¼š</h3><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line">map&lt;<span class="type">int</span>,string&gt; m;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    m[<span class="number">1</span>]=<span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>,string&gt;(<span class="number">2</span>,<span class="string">&quot;no&quot;</span>));</span><br><span class="line">    m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">3</span>,<span class="string">&quot;yes&quot;</span>));</span><br><span class="line">    m.<span class="built_in">insert</span>(map&lt;<span class="type">int</span>,string&gt;::<span class="built_in">value_type</span>(<span class="number">4</span>,<span class="string">&quot;oh&quot;</span>));</span><br><span class="line">    cout&lt;&lt;m[<span class="number">1</span>]&lt;&lt;<span class="string">&#x27;\n&#x27;</span>&lt;&lt;m[<span class="number">2</span>]&lt;&lt;<span class="string">&#x27;\n&#x27;</span>&lt;&lt;m[<span class="number">3</span>]&lt;&lt;<span class="string">&#x27;\n&#x27;</span>&lt;&lt;m[<span class="number">4</span>];</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>è¿™é‡Œæä¾›äº†ä¸‰ç§ä¸åŒçš„æ’å…¥å…ƒç´ æ–¹æ³•ã€‚</p>
<p>å½“è®¿é—®ä¸å­˜åœ¨çš„å…ƒç´ æ—¶ï¼Œä¼šè¿”å›ç©ºã€‚</p>
<h3 id="åˆ é™¤ä¸æ¸…ç©ºï¼š"><a href="#åˆ é™¤ä¸æ¸…ç©ºï¼š" class="headerlink" title="åˆ é™¤ä¸æ¸…ç©ºï¼š"></a>åˆ é™¤ä¸æ¸…ç©ºï¼š</h3><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">map&lt;<span class="type">int</span>,string&gt;::iterator it;</span><br><span class="line">it=m.<span class="built_in">find</span>(<span class="number">2</span>);</span><br><span class="line">m.<span class="built_in">erase</span>(it);</span><br></pre></td></tr></table></figure></div>

<p>æˆ–è€…</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">m.<span class="built_in">erase</span>(<span class="number">2</span>);</span><br></pre></td></tr></table></figure></div>

<p>æ³¨æ„<code>m.find()</code>è¿”å›çš„æ˜¯<strong>é”®</strong>çš„è¿­ä»£å™¨è€Œé å€¼ çš„ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">m.<span class="built_in">erase</span>(m.<span class="built_in">begin</span>(),m.<span class="built_in">end</span>());</span><br></pre></td></tr></table></figure></div>

<p>è¿™é‡Œ<code>.begin()</code>å’Œ<code>.end()</code>è¿”å›çš„ä¹Ÿéƒ½æ˜¯è¿­ä»£å™¨ã€‚</p>
<h4 id="1"><a href="#1" class="headerlink" title="1."></a>1.</h4><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307181124413.webp"
                     
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307181125496.webp"
                     
                ></p>
<p>è¿™æ˜¯è¿™ä¸²ä»£ç æ­£å¸¸çš„è¿è¡Œç»“æœã€‚</p>
<h4 id="2"><a href="#2" class="headerlink" title="2."></a>2.</h4><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307181125042.webp"
                     
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307181126406.webp"
                     
                ></p>
<p>å‡å¦‚æˆ‘å…ˆæ‰¾åˆ°$key&#x3D;2$çš„å…ƒç´ çš„è¿­ä»£å™¨å¹¶å‚¨å­˜ï¼Œæ¸…ç©º<code>map</code>åæ‰¾åˆ°çš„è¿­ä»£å™¨ä¾æ—§å¯ä»¥è®¿é—®ã€‚</p>
<h4 id="3"><a href="#3" class="headerlink" title="3."></a>3.</h4><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307181126015.webp"
                     
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307181127556.webp"
                     
                ></p>
<p>ä½†æ˜¯å¦‚æœæ˜¯å°†<code>m.begin()</code>çš„è¿­ä»£å™¨å­˜ä¸‹æ¥æ¸…ç©ºåå´è®¿é—®ä¸åˆ°äº†ã€‚</p>
<h3 id="å¤§å°"><a href="#å¤§å°" class="headerlink" title="å¤§å°"></a>å¤§å°</h3><p><code>m.size()</code></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307181138306.webp"
                      alt="image.png"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307181139999.webp"
                      alt="image.png"
                ></p>
<p><code>m.size()</code>è™½ç„¶è¾“å‡ºä¸ºæ•´æ•°ï¼Œä½†æ˜¯ç±»å‹è¿”å›å€¼å´æ˜¯<code>y</code>ï¼Œè¿™ä¸ªç±»å‹æˆ‘ä¹Ÿä¸å¾—è€ŒçŸ¥ï¼Œåæ­£è¿”å›å€¼ä¸æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œæ‰€ä»¥æ‹¿<code>.size()</code>å’Œæ•´å‹æ¯”è¾ƒçš„æ—¶å€™ä¸€å®šè¦å…ˆæŠŠ<code>.size()</code>èµ‹å€¼ç»™ä¸€ä¸ªæ•´å‹ï¼Œä¸ç„¶å¯èƒ½å°±ä¼šæŠŠè´Ÿæ•°å˜æˆè¾ƒå¤§çš„æ— ç¬¦å·å€¼å¯¼è‡´å‡ºé”™ã€‚</p>
<h2 id="Unordered-map"><a href="#Unordered-map" class="headerlink" title="Unordered_map"></a>Unordered_map</h2><blockquote>
<p><a class="link"   href="https://blog.csdn.net/BillCYJ/article/details/78985895" >mapå’Œunordered_mapçš„å·®åˆ«å’Œä½¿ç”¨_mapå’Œunorderedmapçš„åŒºåˆ«-CSDNåšå®¢<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</blockquote>
<p>map å…ƒç´ æœ‰æœ‰åºæ€§ï¼Œä½†ç©ºé—´å ç”¨ç‡é«˜ã€‚</p>
<p>unordered_map æŸ¥è¯¢å¿«ï¼ŒåŸç†æ˜¯å“ˆå¸Œè¡¨ã€‚</p>
<h2 id="Queue"><a href="#Queue" class="headerlink" title="Queue"></a>Queue</h2><p><a class="link"   href="https://blog.csdn.net/KEPROM/article/details/109744379" >Queue<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> bj[<span class="number">2333</span>];</span><br><span class="line">queue&lt;<span class="type">int</span>&gt; q;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> m,n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;m,&amp;n);</span><br><span class="line">    <span class="type">int</span> cnt=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(n--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> en;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;en);</span><br><span class="line">        <span class="keyword">if</span>(!bj[en])</span><br><span class="line">        &#123;</span><br><span class="line">            ++cnt;</span><br><span class="line">            q.<span class="built_in">push</span>(en);</span><br><span class="line">            bj[en]=<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span>(q.<span class="built_in">size</span>()&gt;m)</span><br><span class="line">            &#123;</span><br><span class="line">                bj[q.<span class="built_in">front</span>()]=<span class="number">0</span>;</span><br><span class="line">                q.<span class="built_in">pop</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,cnt);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="List"><a href="#List" class="headerlink" title="List"></a>List</h2><p><a class="link"   href="https://blog.csdn.net/u014779536/article/details/111301635" >STL<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">/*STLçš„List*/</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n,m;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    list&lt;<span class="type">int</span>&gt; node;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        node.<span class="built_in">push_back</span>(i);</span><br><span class="line">    list&lt;<span class="type">int</span>&gt;::iterator it=node.<span class="built_in">begin</span>();</span><br><span class="line">    <span class="keyword">while</span>(node.<span class="built_in">size</span>()&gt;<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;m;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            it++;</span><br><span class="line">            <span class="keyword">if</span>(it==node.<span class="built_in">end</span>()) it=node.<span class="built_in">begin</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        cout&lt;&lt;*it&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">        list&lt;<span class="type">int</span>&gt;::iterator next=++it;</span><br><span class="line">        <span class="keyword">if</span>(next==node.<span class="built_in">end</span>()) next=node.<span class="built_in">begin</span>();</span><br><span class="line">        node.<span class="built_in">erase</span>(--it);</span><br><span class="line">        it=next;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;*it;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="Priority-queue"><a href="#Priority-queue" class="headerlink" title="Priority_queue"></a>Priority_queue</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line">priority_queue&lt;<span class="type">int</span>,vector&lt;<span class="type">int</span>&gt;,greater&lt;<span class="type">int</span>&gt; &gt; q;<span class="comment">//å°æ ¹å †å®šä¹‰&lt;less&gt;ä¸ºä»å¤§åˆ°å°ï¼Œ&lt;greater&gt;ä¸ºä»å°åˆ°å¤§</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">while</span>(n--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> op;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;op);</span><br><span class="line">        <span class="keyword">if</span>(op==<span class="number">1</span>)<span class="comment">//å…¥å †</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> x;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;x);</span><br><span class="line">            q.<span class="built_in">push</span>(x);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(op==<span class="number">2</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,q.<span class="built_in">top</span>());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> q.<span class="built_in">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">q.<span class="built_in">push</span>()</span><br><span class="line">q.<span class="built_in">pop</span>()</span><br><span class="line">q.<span class="built_in">size</span>()</span><br><span class="line">q.<span class="built_in">empty</span>()</span><br><span class="line">q.<span class="built_in">top</span>()</span><br><span class="line">q.<span class="built_in">top</span>()</span><br><span class="line">q.<span class="built_in">back</span>()</span><br></pre></td></tr></table></figure></div>

<h2 id="Stack"><a href="#Stack" class="headerlink" title="Stack"></a>Stack</h2><p>ä¾‹é¢˜<a class="link"   href="https://acm.hdu.edu.cn/showproblem.php?pid=1062" >TextReverse<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>:</p>
<table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>st.push(i)</td>
<td>å°†iå…ƒç´ æ”¾åˆ°æ ˆé¡¶</td>
</tr>
<tr>
<td>st.top()</td>
<td>è¿”å›æ ˆé¡¶å…ƒç´ </td>
</tr>
<tr>
<td>st.pop()</td>
<td>å¼¹å‡ºæ ˆé¡¶å…ƒç´ </td>
</tr>
<tr>
<td>st.size()</td>
<td>æŸ¥è¯¢æ ˆä¸­å…ƒç´ </td>
</tr>
<tr>
<td>st.empty()</td>
<td>æŸ¥è¯¢æ ˆæ˜¯å¦ä¸ºç©º</td>
</tr>
</tbody></table>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span>(n--)</span><br><span class="line">    &#123;</span><br><span class="line">        stack&lt;<span class="type">char</span>&gt; s;</span><br><span class="line">        <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">char</span> ch=<span class="built_in">getchar</span>();</span><br><span class="line">            <span class="keyword">if</span>(ch==<span class="string">&#x27; &#x27;</span>||ch==<span class="string">&#x27;\n&#x27;</span>||ch==EOF)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">while</span>(!s.<span class="built_in">empty</span>()) <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>,s.<span class="built_in">top</span>()),s.<span class="built_in">pop</span>();</span><br><span class="line">                <span class="keyword">if</span>(ch==<span class="string">&#x27;\n&#x27;</span>||ch==EOF) <span class="keyword">break</span>;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot; &quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> s.<span class="built_in">push</span>(ch);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="Bitset"><a href="#Bitset" class="headerlink" title="Bitset"></a>Bitset</h2><ul>
<li><code>size()</code>Â è¿”å›Â <code>std::bitset</code>Â çš„é•¿åº¦</li>
<li><code>count()</code>Â è¿”å›Â <code>std::bitset</code>Â ä¸­å€¼ä¸º 1 çš„ä½çš„æ•°é‡</li>
<li><code>any()</code>Â è¿”å›Â <code>std::bitset</code>Â ä¸­æ˜¯å¦å­˜åœ¨å€¼ä¸º 1 çš„ä½</li>
<li><code>none()</code>Â è¿”å›Â <code>std::bitset</code>Â ä¸­æ˜¯å¦æ‰€æœ‰ä½éƒ½æ˜¯ 0</li>
<li><code>all()</code>Â è¿”å›Â <code>std::bitset</code>Â ä¸­æ˜¯å¦æ‰€æœ‰ä½éƒ½æ˜¯ 1</li>
<li><code>test(pos)</code>Â è¿”å›Â <code>std::bitset</code>Â ä¸­ä½äºÂ <code>pos</code>Â ä½ç½®çš„å€¼</li>
<li><code>set(pos)</code>Â å°†Â <code>std::bitset</code>Â ä¸­ä½äºÂ <code>pos</code>Â ä½ç½®çš„å€¼è®¾ä¸º 1</li>
<li><code>reset(pos)</code>Â å°†Â <code>std::bitset</code>Â ä¸­ä½äºÂ <code>pos</code>Â ä½ç½®çš„å€¼è®¾ä¸º 0</li>
<li><code>flip(pos)</code>Â å°†Â <code>std::bitset</code>Â ä¸­ä½äºÂ <code>pos</code>Â ä½ç½®çš„å€¼å–å</li>
<li><code>to_ulong()</code>Â è¿”å›Â <code>std::bitset</code>Â è½¬æ¢æˆçš„æ— ç¬¦å·æ•´æ•°å€¼</li>
<li><code>to_ullong()</code>Â è¿”å›Â <code>std::bitset</code>Â è½¬æ¢æˆçš„æ— ç¬¦å·é•¿æ•´æ•°å€¼</li>
<li><code>_Find_first()</code> è¿”å›ç¬¬ä¸€ä¸ª 1 çš„ä½ç½®ï¼Œè‹¥æ²¡æœ‰åˆ™è¿”å› <code>size</code></li>
<li><code>_Find_next()</code> è¿”å›ä¸‹ä¸€ä¸ª 1 çš„ä½ç½®ï¼Œè‹¥æ²¡æœ‰åˆ™è¿”å› <code>size</code></li>
</ul>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202309021438033.webp"
                      alt="image.png"
                ></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    bitset&lt;4&gt; a1;</span><br><span class="line">    <span class="function">bitset&lt;10&gt; <span class="title">a2</span><span class="params">(<span class="number">15</span>)</span></span>; <span class="comment">// äºŒè¿›åˆ¶åˆå§‹åŒ–</span></span><br><span class="line">    string s = <span class="string">&quot;10001001&quot;</span>; <span class="comment">// å­—ç¬¦ä¸²åˆå§‹åŒ–</span></span><br><span class="line">    <span class="function">bitset&lt;10&gt; <span class="title">a3</span><span class="params">(<span class="string">&quot;10001001&quot;</span>)</span></span>; <span class="comment">// å‰é¢ç”¨0è¡¥ä½ï¼Œæˆ–è€…bitset&lt;10&gt; a3(s);</span></span><br><span class="line">    <span class="comment">// å¦‚æœè¶…å‡ºï¼Œåˆ™ä»åå¾€å‰å–ï¼Œè‹¥é•¿åº¦ä¸è¶³ï¼Œåˆ™å‰é¢ç”¨0è¡¥ä½</span></span><br><span class="line">    cout &lt;&lt; a3 &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; a2 &lt;&lt; endl;</span><br><span class="line">    a2 &amp;= a3; <span class="comment">// å¿…é¡»é•¿åº¦ç›¸åŒæ‰èƒ½è¿›è¡Œä½è¿ç®—</span></span><br><span class="line">    cout &lt;&lt; a2 &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">9</span>; i++)</span><br><span class="line">        cout &lt;&lt; a2[i] &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="Multiset"><a href="#Multiset" class="headerlink" title="Multiset"></a>Multiset</h2><p>logn çš„æ—¶é—´å†…ä¿è¯åºåˆ—ä¸­çš„æ•°æ˜¯æœ‰åºçš„ã€‚</p>
<p>æ¯”è¾ƒå‡½æ•°éœ€è¦è‡ªå·±é‡è½½ã€‚</p>
<p><a class="link"   href="https://blog.csdn.net/sodacoco/article/details/84798621" >multiset<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>ä¸ set çš„æœ€å¤§å·®åˆ«å°±æ˜¯å®ƒå¯ä»¥å­˜å‚¨åŒä¸€ä¸ªæ•°å¾ˆå¤šæ¬¡ï¼ˆå¯é‡é›†ï¼‰ã€‚</p>
<ul>
<li><code>insert</code> æ’å…¥</li>
<li><code>erase</code> åˆ é™¤</li>
<li><code>multiset&lt;rec, cmp&gt; h</code> å®šä¹‰æ’åºæ–¹å¼</li>
</ul>
<h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><p>ç»´æŠ¤ä¸€ä¸ªé›†åˆï¼Œé›†åˆå†…çš„å€¼éƒ½æ˜¯æœ‰åºçš„ï¼Œé‚£ä¹ˆç†è®ºä¸Šæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ±‚ç¬¬ k å°æ•°ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> k;</span><br><span class="line">    cin &gt;&gt; k;</span><br><span class="line">    set&lt;<span class="type">int</span>&gt; s;</span><br><span class="line">    s.<span class="built_in">insert</span>(<span class="number">114514</span>);</span><br><span class="line">    s.<span class="built_in">insert</span>(<span class="number">1919810</span>);</span><br><span class="line">    s.<span class="built_in">insert</span>(<span class="number">12</span>);</span><br><span class="line">    s.<span class="built_in">insert</span>(<span class="number">1</span>);</span><br><span class="line">    s.<span class="built_in">insert</span>(<span class="number">5</span>);</span><br><span class="line">    set&lt;<span class="type">int</span>&gt;::iterator it = s.<span class="built_in">begin</span>();</span><br><span class="line">    <span class="comment">// advance(it, k);</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= k; i++) it++;</span><br><span class="line">    cout &lt;&lt; *it &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="äºŒå‰æ ‘"><a href="#äºŒå‰æ ‘" class="headerlink" title="äºŒå‰æ ‘"></a>äºŒå‰æ ‘</h1><h2 id="éå†"><a href="#éå†" class="headerlink" title="éå†"></a>éå†</h2><h3 id="å¹¿åº¦ä¼˜å…ˆéå†-BFS"><a href="#å¹¿åº¦ä¼˜å…ˆéå†-BFS" class="headerlink" title="å¹¿åº¦ä¼˜å…ˆéå†(BFS)"></a>å¹¿åº¦ä¼˜å…ˆéå†(BFS)</h3><p>æ²¡å•¥å¥½è¯´çš„ã€‚</p>
<h3 id="æ·±åº¦ä¼˜å…ˆéå†-DFS"><a href="#æ·±åº¦ä¼˜å…ˆéå†-DFS" class="headerlink" title="æ·±åº¦ä¼˜å…ˆéå†(DFS)"></a>æ·±åº¦ä¼˜å…ˆéå†(DFS)</h3><h4 id="1-å…ˆåºéå†"><a href="#1-å…ˆåºéå†" class="headerlink" title="1.å…ˆåºéå†"></a>1.å…ˆåºéå†</h4><p><code>æ ¹-å·¦-å³</code></p>
<h4 id="2-ä¸­åºéå†"><a href="#2-ä¸­åºéå†" class="headerlink" title="2.ä¸­åºéå†"></a>2.ä¸­åºéå†</h4><p><code>å·¦-æ ¹-å³</code></p>
<h4 id="3-ååºéå†"><a href="#3-ååºéå†" class="headerlink" title="3.ååºéå†"></a>3.ååºéå†</h4><p><code>å·¦-å³-æ ¹</code></p>
<h4 id="4-ç»ƒä¹ "><a href="#4-ç»ƒä¹ " class="headerlink" title="4.ç»ƒä¹ "></a>4.ç»ƒä¹ </h4><p><a class="link"   href="https://acm.hdu.edu.cn/showproblem.php?pid=1710" >HDU1710<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p><code>æ­¤å‘å¾…å¡«ing</code></p>
<p><del>ä¸æ˜¯å¾ˆä¼š</del></p>
<h2 id="å“ˆå¤«æ›¼æ ‘"><a href="#å“ˆå¤«æ›¼æ ‘" class="headerlink" title="å“ˆå¤«æ›¼æ ‘"></a>å“ˆå¤«æ›¼æ ‘</h2><p>äºŒå‰æ ‘ä¸Šä¸¤ç‚¹é—´è·¯å¾„é•¿åº¦ï¼šè¿™æ¡è·¯ç»è¿‡çš„è¾¹çš„æ•°é‡ã€‚</p>
<p>æ ‘çš„è·¯å¾„é•¿åº¦ï¼šä»æ ¹åˆ°æ¯ä¸ªèŠ‚ç‚¹çš„è·¯å¾„ä¹‹å’Œã€‚</p>
<hr>
<p>å¸¦æƒèŠ‚ç‚¹çš„å¸¦æƒè·¯å¾„é•¿åº¦ï¼šæ ¹èŠ‚ç‚¹åˆ°è¯¥ç‚¹çš„è·¯å¾„é•¿åº¦ä¹˜ä»¥èŠ‚ç‚¹æƒå€¼ã€‚</p>
<p>æ ‘çš„å¸¦æƒè·¯å¾„é•¿åº¦ï¼šæ‰€æœ‰å¶å­èŠ‚ç‚¹çš„å¸¦æƒè·¯å¾„é•¿åº¦ä¹‹å’Œã€‚</p>
<hr>
<p>ç°ç»™å®š<code>n</code>ä¸ªæƒå€¼ï¼Œæ„é€ ä¸€æ£µ<code>n</code>ä¸ªå¶å­èŠ‚ç‚¹çš„äºŒå‰æ ‘ï¼Œæ¯ä¸ªå¶å­èŠ‚ç‚¹å¯¹åº”ä¸€ä¸ªæƒå€¼ï¼Œé‚£ä¹ˆå¸¦æƒè·¯å¾„æœ€å°çš„äºŒå‰æ ‘å°±å«åš<code>å“ˆå¤«æ›¼æ ‘</code>ã€‚</p>
<p>è¦æ„é€ è¿™æ ·ä¸€é¢—æ ‘ï¼Œé‚£ä¹ˆè‚¯å®šå°±æ˜¯æŠŠæƒå€¼å¤§çš„å¶å­èŠ‚ç‚¹æ”¾åœ¨æ·±åº¦è¾ƒå°çš„åœ°æ–¹ï¼ŒæŠŠæƒå€¼å°çš„å¶å­èŠ‚ç‚¹æ”¾åœ¨æ·±åº¦è¾ƒå¤§çš„åœ°æ–¹ã€‚</p>
<p>ç®—æ³•æµç¨‹ï¼š<a class="link"   href="https://zhuanlan.zhihu.com/p/415467000" >æ•°æ®ç»“æ„â€”â€”å“ˆå¤«æ›¼æ ‘ï¼ˆHuffman Treeï¼‰<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>æ³¨ï¼šä»…æœ‰å¶å­èŠ‚ç‚¹æœ‰æƒå€¼ã€‚</p>
<p><strong>å“ˆå¤«æ›¼ç¼–ç </strong>å…¶å®å°±æ˜¯æ„é€ å‡ºä¸€é¢—å“ˆå¤«æ›¼æ ‘ï¼Œä»¥å­—ç¬¦ä¸ºæƒå€¼ï¼Œå·¦å„¿å­ä¸º<code>0</code> å³å„¿å­ä¸º<code>1</code>ã€‚</p>
<p>ä¹ é¢˜ï¼š<a class="link"   href="http://poj.org/problem?id=1521" >POJ1521<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// #include&lt;bits/stdc++.h&gt;//POJä¸è®©ç”¨ä¸‡èƒ½å¤´aaa</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    priority_queue&lt; <span class="type">int</span>,vector&lt;<span class="type">int</span>&gt;,greater&lt;<span class="type">int</span>&gt; &gt; q;</span><br><span class="line">    string s;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">getline</span>(cin,s)&amp;&amp;s!=<span class="string">&quot;END&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">sort</span>(s.<span class="built_in">begin</span>(),s.<span class="built_in">end</span>());<span class="comment">//å­—ç¬¦ä¸²æŒ‰å­—å…¸åºæ’åºæ–¹æ³•</span></span><br><span class="line">        <span class="type">int</span> num=<span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> l=s.<span class="built_in">length</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=l;i++)<span class="comment">//å­—ç¬¦ä¸²ä»0å¼€å§‹ï¼Œå…ˆæ¯”è¾ƒ0å’Œ1</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(s[i]!=s[i<span class="number">-1</span>])</span><br><span class="line">            &#123;</span><br><span class="line">                q.<span class="built_in">push</span>(num);</span><br><span class="line">                num=<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> num++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> ans=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(q.<span class="built_in">size</span>()==<span class="number">1</span>)<span class="comment">//åªæœ‰ä¸€ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²</span></span><br><span class="line">        ans=s.<span class="built_in">length</span>();</span><br><span class="line">        <span class="keyword">while</span>(q.<span class="built_in">size</span>()&gt;<span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> a=q.<span class="built_in">top</span>();</span><br><span class="line">            q.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="type">int</span> b=q.<span class="built_in">top</span>();</span><br><span class="line">            q.<span class="built_in">pop</span>();</span><br><span class="line">            q.<span class="built_in">push</span>(a+b);</span><br><span class="line">            ans+=a+b;</span><br><span class="line">        &#125;</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d %d %.1f\n&quot;</span>, <span class="number">8</span>*s.<span class="built_in">length</span>() , ans , (<span class="type">double</span>)<span class="number">8</span>*s.<span class="built_in">length</span>()/(<span class="type">double</span>)ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h1 id="å †"><a href="#å †" class="headerlink" title="å †"></a>å †</h1><h2 id="æ‰‹å†™å †"><a href="#æ‰‹å†™å †" class="headerlink" title="æ‰‹å†™å †"></a>æ‰‹å†™å †</h2><p><a class="link"   href="https://www.luogu.com.cn/problem/P3378" >P3378<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e6</span><span class="number">+5</span>;</span><br><span class="line"><span class="type">int</span> heap[N],len=<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">push</span><span class="params">(<span class="type">int</span> x)</span><span class="comment">//å°æ ¹å †æ’å…¥</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    heap[++len]=x;</span><br><span class="line">    <span class="type">int</span> i=len;</span><br><span class="line">    <span class="keyword">while</span>(i&gt;<span class="number">1</span>&amp;&amp;heap[i]&lt;heap[i/<span class="number">2</span>])<span class="comment">//i/2ä¸ºiçš„çˆ¶å…ƒç´ ä¸‹æ ‡</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">swap</span>(heap[i],heap[i/<span class="number">2</span>]);</span><br><span class="line">        i=i/<span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pop</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    heap[<span class="number">1</span>]=heap[len--];<span class="comment">//å°†å †å¤´æ›¿æ¢ä¸ºæœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¼€å§‹ä¸‹æ²‰</span></span><br><span class="line">    <span class="type">int</span> i=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">2</span>*i&lt;=len)<span class="comment">//2*iå³ä¸ºiçš„å·¦å„¿å­,å¾ªç¯ç»ˆæ­¢æ¡ä»¶æ˜¯iæ²¡æœ‰å„¿å­</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> son=<span class="number">2</span>*i;</span><br><span class="line">        <span class="keyword">if</span>(son&lt;len&amp;&amp;heap[son<span class="number">+1</span>]&lt;heap[son])<span class="comment">//å³äºŒå­æ›´å°ï¼Œé‚£å°±è®©å³å„¿å­ä¸Šæµ®</span></span><br><span class="line">            son++;<span class="comment">//åˆ‡æ¢ä¸ºå³å„¿å­</span></span><br><span class="line">        <span class="keyword">if</span>(heap[son]&lt;heap[i])<span class="comment">//æ¯”å½“å‰è¦å°ï¼Œå¯ä»¥ä¸Šæµ®</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">swap</span>(heap[i],heap[son]);</span><br><span class="line">            i=son;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">break</span>;<span class="comment">//ä¸èƒ½ç»§ç»­ä¸‹æ²‰å°±ç»ˆæ­¢</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">while</span>(n--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> op;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;op);</span><br><span class="line">        <span class="keyword">if</span>(op==<span class="number">1</span>)<span class="comment">//å…¥å †</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> x;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;x);</span><br><span class="line">            <span class="built_in">push</span>(x);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(op==<span class="number">2</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,heap[<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><p><a class="link"   href="https://www.luogu.com.cn/problem/P2085" >P2085<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P2827" >P2827<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P3045" >P3045<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<hr>
<h1 id="å¹¶æŸ¥é›†"><a href="#å¹¶æŸ¥é›†" class="headerlink" title="å¹¶æŸ¥é›†"></a>å¹¶æŸ¥é›†</h1><p>æ“ä½œï¼š</p>
<ul>
<li>åˆå¹¶ä¸¤ä¸ªé›†åˆ</li>
<li>æŸ¥è¯¢æŸä¸ªå…ƒç´ çš„ç¥–å®—èŠ‚ç‚¹</li>
</ul>
<p>ä¼˜åŒ–ï¼š</p>
<ul>
<li>è·¯å¾„å‹ç¼©ï¼ˆ$O(logn)$ï¼‰</li>
<li>æŒ‰ç§©åˆå¹¶ï¼ˆ$O(logn)$ï¼‰</li>
<li>è·¯å¾„å‹ç¼©+æŒ‰ç§©åˆå¹¶ï¼ˆ$O(\alpha n)\approx O(1)$</li>
</ul>
<p>æ‰©å±•ï¼š</p>
<ul>
<li>è®°å½•æ¯ä¸ªé›†åˆçš„å¤§å°ï¼Œä¸€ä¸ªé›†åˆå¤§å°æ˜¯ä¸€å®šçš„ï¼Œæ‰€ä»¥æŠŠå®ƒç»‘å®šåˆ°æ ¹èŠ‚ç‚¹èº«ä¸Šå°±è¡Œã€‚</li>
<li>æ¯ä¸ªç‚¹åˆ°æ ¹èŠ‚ç‚¹çš„è·ç¦»ï¼Œç»‘å®šåˆ°æ¯ä¸ªå…ƒç´ èº«ä¸Šã€‚</li>
</ul>
<p><a class="link"   href="https://www.acwing.com/problem/content/1252/" >AcWing1250<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">40005</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> p[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x * n + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(p[x] != x) p[x] = <span class="built_in">find</span>(p[x]);</span><br><span class="line">    <span class="keyword">return</span> p[x];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n * n; ++i)</span><br><span class="line">        p[i] = i;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> x, y;</span><br><span class="line">        <span class="type">char</span> d;</span><br><span class="line">        cin &gt;&gt; x &gt;&gt; y &gt;&gt; d;</span><br><span class="line">        x--, y--;</span><br><span class="line">        <span class="type">int</span> a = <span class="built_in">get</span>(x, y);</span><br><span class="line">        <span class="type">int</span> b;</span><br><span class="line">        <span class="keyword">if</span>(d == <span class="string">&#x27;D&#x27;</span>) b = <span class="built_in">get</span>(x + <span class="number">1</span>, y);</span><br><span class="line">        <span class="keyword">else</span> b = <span class="built_in">get</span>(x, y + <span class="number">1</span>);</span><br><span class="line">        <span class="type">int</span> pa = <span class="built_in">find</span>(a), pb = <span class="built_in">find</span>(b);</span><br><span class="line">        <span class="keyword">if</span>(pa == pb)</span><br><span class="line">        &#123;</span><br><span class="line">            res = i;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        p[pa] = pb;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!res) <span class="built_in">puts</span>(<span class="string">&quot;draw&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><a class="link"   href="https://www.acwing.com/problem/content/1254/" >AcWing1252<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10005</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m, val;</span><br><span class="line"><span class="type">int</span> p[N];</span><br><span class="line"><span class="type">int</span> v[N], w[N];</span><br><span class="line"><span class="type">int</span> f[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x != p[x]) p[x] = <span class="built_in">find</span>(p[x]);</span><br><span class="line">    <span class="keyword">return</span> p[x];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m &gt;&gt; val;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">        cin &gt;&gt; v[i] &gt;&gt; w[i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">        p[i] = i;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> a, b;</span><br><span class="line">        cin &gt;&gt; a &gt;&gt; b;</span><br><span class="line">        <span class="type">int</span> pa = <span class="built_in">find</span>(a), pb = <span class="built_in">find</span>(b);</span><br><span class="line">        <span class="keyword">if</span>(pa != pb)</span><br><span class="line">        &#123;</span><br><span class="line">            v[pb] += v[pa];</span><br><span class="line">            w[pb] += w[pa];</span><br><span class="line">            p[pa] = p[pb];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">        <span class="keyword">if</span>(p[i] == i)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = val; j &gt;= v[i]; --j)</span><br><span class="line">                f[j] = <span class="built_in">max</span>(f[j], f[j - v[i]] + w[i]);</span><br><span class="line">    cout &lt;&lt; f[val] &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><a class="link"   href="https://www.acwing.com/problem/content/239/" >AcWing237<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">2e6</span> + <span class="number">8</span>;</span><br><span class="line"><span class="comment">// çº¦æŸæ¡ä»¶çš„é¡ºåºä¸å½±å“çŸ›ç›¾ï¼šå…ˆè€ƒè™‘æ‰€æœ‰çš„ç›¸ç­‰ï¼Œé‚£ä¹ˆä¸ä¼šå‡ºç°çŸ›ç›¾</span></span><br><span class="line"><span class="comment">// ç„¶åå†è€ƒè™‘ä¸ç­‰æ¡ä»¶ï¼Œå¦‚æœè¿™ä¸ªæ—¶å€™ä¸æ»¡è¶³ï¼Œé‚£ä¹ˆå°±å‡ºç°äº†çŸ›ç›¾ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> p[N];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> x, y, e;</span><br><span class="line">&#125;q[N];</span><br><span class="line">unordered_map&lt;<span class="type">int</span>, <span class="type">int</span>&gt; S;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(S.<span class="built_in">count</span>(x) == <span class="number">0</span>) S[x] = ++n;</span><br><span class="line">    <span class="keyword">return</span> S[x];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x != p[x]) p[x] = <span class="built_in">find</span>(p[x]);</span><br><span class="line">    <span class="keyword">return</span> p[x];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">    &#123;</span><br><span class="line">        n = <span class="number">0</span>;</span><br><span class="line">        S.<span class="built_in">clear</span>();</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;m);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> x, y, e;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;x, &amp;y, &amp;e);</span><br><span class="line">            q[i] = &#123;<span class="built_in">get</span>(x), <span class="built_in">get</span>(y), e&#125;;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) p[i] = i;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; ++i)</span><br><span class="line">            <span class="keyword">if</span>(q[i].e == <span class="number">1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">int</span> pa = <span class="built_in">find</span>(q[i].x), pb = <span class="built_in">find</span>(q[i].y);</span><br><span class="line">                p[pa] = pb;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="type">bool</span> bj = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; ++i)</span><br><span class="line">            <span class="keyword">if</span>(q[i].e == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">int</span> pa = <span class="built_in">find</span>(q[i].x), pb = <span class="built_in">find</span>(q[i].y);</span><br><span class="line">                <span class="keyword">if</span>(pa == pb)</span><br><span class="line">                &#123;</span><br><span class="line">                    bj = <span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">if</span>(bj) <span class="built_in">printf</span>(<span class="string">&quot;NO\n&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;YES\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><a class="link"   href="https://www.acwing.com/problem/content/240/" >AcWing238<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>ç»´æŠ¤é—´éš”å¤šå°‘æˆ˜èˆ°ã€‚</p>
<p>ç»´æŠ¤ä¸€ä¸‹æ¯ä¸ªèŠ‚ç‚¹åˆ°æ ¹èŠ‚ç‚¹çš„è·ç¦»å³å¯ã€‚</p>
<p>è®©æ’å¤´å½“æ ¹èŠ‚ç‚¹ã€‚</p>
<p>åŒæ—¶è¿˜è¦ç»´æŠ¤ä¸€ä¸‹ $size$</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">3e4</span> + <span class="number">8</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> m;</span><br><span class="line"><span class="type">int</span> s[N];</span><br><span class="line"><span class="type">int</span> d[N];</span><br><span class="line"><span class="type">int</span> p[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x != p[x])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> root = <span class="built_in">find</span>(p[x]);</span><br><span class="line">        d[x] += d[p[x]];</span><br><span class="line">        p[x] = root;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> p[x];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">3e4</span>; i++) </span><br><span class="line">    &#123;</span><br><span class="line">        p[i] = i;</span><br><span class="line">        s[i] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(m--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">char</span> op[<span class="number">2</span>];</span><br><span class="line">        <span class="type">int</span> a, b;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s%d%d&quot;</span>, op, &amp;a, &amp;b);</span><br><span class="line">        <span class="keyword">if</span>(op[<span class="number">0</span>] == <span class="string">&#x27;M&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> pa = <span class="built_in">find</span>(a), pb = <span class="built_in">find</span>(b);</span><br><span class="line">            <span class="keyword">if</span>(pa != pb)</span><br><span class="line">            &#123;</span><br><span class="line">                d[pa] = s[pb];</span><br><span class="line">                s[pb] += s[pa];</span><br><span class="line">                p[pa] = pb;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> pa = <span class="built_in">find</span>(a), pb = <span class="built_in">find</span>(b);</span><br><span class="line">            <span class="keyword">if</span>(pa != pb) <span class="built_in">printf</span>(<span class="string">&quot;-1\n&quot;</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">max</span>(<span class="number">0</span>, <span class="built_in">abs</span>(d[a] - d[b]) - <span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><a class="link"   href="https://www.acwing.com/problem/content/241/" >AcWing239<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>ç±»ä¼¼é£Ÿç‰©é“¾ã€‚</p>
<p>å¸¦æƒå¹¶æŸ¥é›†ç»´æŠ¤çš„æ˜¯å®ƒä¸æ ¹èŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»ã€‚</p>
<p>åŒç±»&#x2F;ä¸åŒç±»</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202310041620900.webp"
                      alt="image.png"
                ></p>
<p>å°ç»“è®ºï¼šæ¨¡äºŒæ„ä¹‰ä¸‹çš„åŠ æ³•ç›¸å½“äºå¼‚æˆ–ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unordered_map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">20005</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> p[N];</span><br><span class="line"><span class="type">int</span> d[N];</span><br><span class="line">unordered_map&lt;<span class="type">int</span>, <span class="type">int</span>&gt; S;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(S.<span class="built_in">count</span>(x) == <span class="number">0</span>) S[x] = ++n;</span><br><span class="line">    <span class="keyword">return</span> S[x];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(p[x] != x)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> root = <span class="built_in">find</span>(p[x]);</span><br><span class="line">        d[x] ^= d[p[x]];</span><br><span class="line">        p[x] = root;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> p[x];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    n = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> res = m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; N; i++) p[i] = i;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> a, b;</span><br><span class="line">        string type;</span><br><span class="line">        cin &gt;&gt; a &gt;&gt; b &gt;&gt; type;</span><br><span class="line">        a = <span class="built_in">get</span>(a - <span class="number">1</span>), b = <span class="built_in">get</span>(b); <span class="comment">// å‰ç¼€å’Œæ€è·¯</span></span><br><span class="line">        <span class="type">int</span> t = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(type == <span class="string">&quot;odd&quot;</span>) t = <span class="number">1</span>; <span class="comment">//å¥‡æ•°,a å’Œ b ä¸æ˜¯åŒç±»</span></span><br><span class="line">        <span class="type">int</span> pa = <span class="built_in">find</span>(a), pb = <span class="built_in">find</span>(b);</span><br><span class="line">        <span class="keyword">if</span>(pa == pb)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>((d[a] ^ d[b]) != t) <span class="comment">// ä¸æ˜¯åŒç±»çš„è¯å’Œæ ¹èŠ‚ç‚¹çš„å…³ç³»å°±åº”è¯¥ä¸åŒï¼Œå¦åˆ™çŸ›ç›¾</span></span><br><span class="line">            &#123;</span><br><span class="line">                res = i - <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            p[pa] = pb;</span><br><span class="line">            d[pa] = d[a] ^ d[b] ^ t; <span class="comment">// åŒç±»å¼‚æˆ–ä¸º0ï¼Œå¼‚ç±»å¼‚æˆ–ä¸º1ï¼Œåˆ†ç±»è®¨è®ºå³å¯</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>


<h1 id="çº¿æ®µæ ‘"><a href="#çº¿æ®µæ ‘" class="headerlink" title="çº¿æ®µæ ‘"></a>çº¿æ®µæ ‘</h1><blockquote>
<p> é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ä»¥åŒºé—´ä¸ºèŠ‚ç‚¹çš„äºŒå‰æ ‘</p>
</blockquote>
<p>è¿™æ˜¯å®ƒçš„æ ·å­ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307141416645.webp"
                      alt="image.png"
                ></p>
<p>å’Œå †ä¸€æ ·ï¼Œçº¿æ®µæ ‘ä¹Ÿæ˜¯ç”¨ä¸€ç»´æ•°ç»„å­˜å‚¨ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307141454871.webp"
                     
                ></p>
<p><del>ï¼ˆ8 9 åäº†ï¼‰</del></p>
<hr>
<ul>
<li>çˆ¶èŠ‚ç‚¹ï¼š$\lfloor{\dfrac{x}{2}}\rfloor$</li>
<li>å·¦å„¿å­ï¼š$2x$ï¼Œ<code>x&lt;&lt;1</code></li>
<li>å³å„¿å­ï¼š$2x+1$ï¼Œ<code>x&lt;&lt;1|1</code></li>
</ul>
<p>é•¿åº¦ä¸º $n$ çš„ä¸€æ®µåŒºé—´ï¼š</p>
<p>å¶å­èŠ‚ç‚¹æ•°ä¸º $n$ ä¸ª</p>
<p>å€’æ•°ç¬¬äºŒå±‚æœ€å¤šä¸º $n$ ä¸ªèŠ‚ç‚¹ï¼Œ</p>
<p>äºŒå‰æ ‘æ€§è´¨ï¼š</p>
<ul>
<li>åŒºé—´é•¿åº¦å’Œå¶å­èŠ‚ç‚¹æ•°ç›¸åŒ</li>
<li>æ·±åº¦ä¸º$k-1$çš„æ»¡äºŒå‰æ ‘æœ‰$2^{k-1}-1$ä¸ªèŠ‚ç‚¹ï¼Œç¬¬$k$å±‚æœ‰$2^{k-1}$ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆç¬¬$k-1$å±‚æœ‰$2^{k-1-1}$ä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯$2^{k-2}$ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆç¬¬$k-1$å±‚å¾€ä¸Šå…±æœ‰$2^{k-2}-1$ä¸ªèŠ‚ç‚¹ã€‚</li>
<li>ç¬¬$i$å±‚ï¼ˆä¸æ˜¯æœ€åä¸€å±‚ï¼‰çš„èŠ‚ç‚¹æ•°æ˜¯ç¬¬$i$å±‚ä»¥ä¸Šçš„èŠ‚ç‚¹æ•°-1ã€‚</li>
</ul>
<p>æ‰€ä»¥å€’æ•°ç¬¬äºŒå±‚ä»¥ä¸Šçš„èŠ‚ç‚¹æ•°æœ€å¤šä¸º$n-1$ä¸ªï¼Œé‚£ä¹ˆé™¤äº†æœ€åä¸€å±‚çš„èŠ‚ç‚¹æ•°æœ€å¤šä¸º$2n-1$ä¸ªã€‚</p>
<p>æœ€åä¸€å±‚ä¸æ–­å¾€ä¸ŠåŠ ï¼Œæœ€å¤šå¯ä»¥åŠ æ»¡ä¸º$2n$ä¸ªï¼Œæ‰€ä»¥æ€»èŠ‚ç‚¹æ•°æœ€å¤§ä¸º$4n-1$ï¼Œæ‰€ä»¥çº¿æ®µæ ‘çš„ç©ºé—´è¦å¼€å››å€ã€‚</p>
<h2 id="å»ºæ ‘"><a href="#å»ºæ ‘" class="headerlink" title="å»ºæ ‘"></a>å»ºæ ‘</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">pushup</span><span class="params">(<span class="type">int</span> u)</span><span class="comment">//ç”±å­èŠ‚ç‚¹ä¿¡æ¯æ›´æ–°çˆ¶èŠ‚ç‚¹ä¿¡æ¯ï¼ˆæœ€å¤§å€¼ï¼‰</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    tr[u].v=<span class="built_in">max</span>(tr[u&lt;&lt;<span class="number">1</span>].v,tr[u&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].v);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> l,<span class="type">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    tr[u]=&#123;l,r,<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">if</span>(l==r) <span class="keyword">return</span>;</span><br><span class="line">    <span class="type">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">build</span>(u&lt;&lt;<span class="number">1</span>,l,mid);</span><br><span class="line">    <span class="built_in">build</span>(u&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,mid<span class="number">+1</span>,r);</span><br><span class="line">    <span class="built_in">pushup</span>(u);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="æŸ¥è¯¢"><a href="#æŸ¥è¯¢" class="headerlink" title="æŸ¥è¯¢"></a>æŸ¥è¯¢</h2><p>æ¯”å¦‚æŸ¥è¯¢æŸæ®µåŒºé—´çš„æœ€å¤§å€¼ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307231638800.webp"
                      alt="image.png"
                ></p>
<p>æŸ¥è¯¢çš„è¿‡ç¨‹ä¸­æ— éå°±ä¸¤ç§æƒ…å†µï¼šæŸ¥è¯¢åŒºé—´ä¸å½“å‰æ‰€åœ¨åŒºé—´æ˜¯åŒ…å«å…³ç³»è¿˜æ˜¯äº¤å‰å…³ç³»ã€‚</p>
<p>å¦‚æœæ˜¯åŒ…å«å…³ç³»ï¼Œå³æŸ¥è¯¢åŒºé—´åŒ…å«æ ‘ä¸ŠåŒºé—´ï¼Œé‚£ä¹ˆå°±æ²¡å¿…è¦å¾€ä¸‹é€’å½’äº†ï¼Œç›´æ¥è¿”å›è¯¥æ®µæœ€å¤§å€¼å³å¯ã€‚æ¯”å¦‚å›¾ä¸­å³åˆ†æ”¯é€’å½’åˆ°$[6,10]$ï¼Œç„¶åé€’å½’åˆ°$[6,8]$å’Œ$[9,10]$ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å‘ç°å…¶å®$[6,8]$æ²¡æœ‰å‘ä¸‹é€’å½’çš„å¿…è¦äº†ï¼Œåªéœ€è¦ç›´æ¥è¿”å›è¯¥æ®µåŒºé—´çš„æœ€å¤§å€¼å³å¯ã€‚</p>
<p>å¦‚æœæ˜¯äº¤å‰å…³ç³»ï¼Œé‚£ä¹ˆå°±æ¥ç€å‘ä¸‹é€’å½’ï¼Œä¾‹å¦‚$[9,10]$åŒºé—´å†æ¥ç€å¾€ä¸‹é€’å½’ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­è‹¥è®¿é—®åŒºé—´ä¸æŸ¥è¯¢åŒºé—´æ²¡æœ‰äº¤é›†ï¼Œé‚£ä¹ˆå°±ä¸ç”¨ç®¡äº†ï¼Œå°±ä¸ç”¨è®¿é—®å®ƒã€‚</p>
<p>è®¿é—®åˆ°çš„åŒºé—´æ•°é‡æ˜¯$log$çº§åˆ«çš„ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307231653396.webp"
                      alt="image.png"
                ></p>
<p>ç”±äºå¥‡æ•°é™¤ä»¥$2$çš„æ—¶å€™æ˜¯ä¸‹å–æ•´ï¼Œæ‰€ä»¥åªè¦åŒ…å«$mid$é‚£ä¹ˆå°±è¦è®¿é—®å·¦åŒºé—´ã€‚</p>
<p>æœ€å¤šå¤§æ¦‚ä¼šæœ‰$4logn$çš„è®¿é—®ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">query</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> l,<span class="type">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(tr[u].l&gt;=l&amp;&amp;tr[u].r&lt;=r) <span class="keyword">return</span> tr[u].v;<span class="comment">//æ ‘ä¸­çº¿æ®µè¢«æŸ¥è¯¢åŒºé—´åŒ…å«</span></span><br><span class="line">    <span class="type">int</span> mid=(tr[u].l+tr[u].r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> v=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(l&lt;=mid) v=<span class="built_in">query</span>(u&lt;&lt;<span class="number">1</span>,l,r);</span><br><span class="line">    <span class="keyword">if</span>(r&gt;mid) v=<span class="built_in">max</span>(v,<span class="built_in">query</span>(u&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,l,r));</span><br><span class="line">    <span class="keyword">return</span> v;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="å•ç‚¹ä¿®æ”¹"><a href="#å•ç‚¹ä¿®æ”¹" class="headerlink" title="å•ç‚¹ä¿®æ”¹"></a>å•ç‚¹ä¿®æ”¹</h2><p>ä»ä¸Šå¾€ä¸‹é€’å½’ï¼Œç›´åˆ°é€’å½’åˆ°æŸä¸ªå¶å­èŠ‚ç‚¹ã€‚</p>
<p>ç„¶åå¯¹å®ƒè¿›è¡Œ<code>pushup</code>å°±å¯ä»¥äº†ã€‚</p>
<p><code>pushup</code>å…¶å®å°±æ˜¯ä»åº•ä¸‹å¾€ä¸Šé‡æ–°ç®—ä¸€éæ¯ä¸ªåŒºé—´çš„å’Œå°±å¯ä»¥äº†ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">modify</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> x,<span class="type">int</span> v)</span><span class="comment">//ä¿®æ”¹</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(tr[u].l==x&amp;&amp;tr[u].r==x) tr[u].v=v;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> mid=(tr[u].l+tr[u].r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(x&lt;=mid) <span class="built_in">modify</span>(u&lt;&lt;<span class="number">1</span>,x,v);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">modify</span>(u&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,x,v);</span><br><span class="line">        <span class="built_in">pushup</span>(u);<span class="comment">//æ›´æ–°</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="æ‡’æ ‡è®°"><a href="#æ‡’æ ‡è®°" class="headerlink" title="æ‡’æ ‡è®°"></a>æ‡’æ ‡è®°</h2><h3 id="åŒºé—´åŠ æ³•"><a href="#åŒºé—´åŠ æ³•" class="headerlink" title="åŒºé—´åŠ æ³•"></a>åŒºé—´åŠ æ³•</h3><p>æ¯”å¦‚åŒºé—´ä¿®æ”¹åŠ è®¿é—®åŒºé—´å’Œã€‚</p>
<p>å¦‚æœæ²¡æœ‰æ‡’æ ‡è®°ï¼Œé‚£ä¹ˆåªéœ€è¦è®°å½•<strong>å½“å‰åŒºé—´çš„æ€»å’Œ</strong>ã€‚</p>
<p>ç°åœ¨è¿˜éœ€è¦å†åŠ ä¸Šæ‡’æ ‡è®°<code>add</code>ã€‚</p>
<p><code>add</code>å«ä¹‰æ˜¯ä»¥å½“å‰èŠ‚ç‚¹ä¸ºæ ¹èŠ‚ç‚¹çš„å­æ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½åŠ ä¸Š<code>add</code>è¿™ä¸ªæ•°ã€‚</p>
<p>åŒ…ä¸åŒ…å«è‡ªå·±éƒ½å¯ä»¥ï¼Œä¿è¯å‰åä¸€è‡´å³å¯ï¼Œä¸‹é¢é‡‡ç”¨åªç»™å­æ ‘åŠ ã€‚</p>
<p>è¿™æ ·ä¿®æ”¹çš„å¤æ‚åº¦å°±åªæœ‰$O(logn)$äº†ã€‚</p>
<p>è®¿é—®æ—¶éœ€è¦æŠŠç¥–å®—èŠ‚ç‚¹çš„å€¼ç´¯è®¡åˆ°å­å­™ä¸Šã€‚</p>
<p>åªè¦åœ¨é€’å½’çš„æ—¶å€™æ¸…ç©ºå½“å‰æ‡’æ ‡è®°å¹¶ä¸”å°†æ‡’æ ‡è®°ä¼ ç»™å„¿å­ï¼Œå…¶å®å°±æ˜¯<code>pushdown</code>ã€‚</p>
<p><code>pushdown</code></p>
<p>è¿™ç§æ˜¯å½“å‰åŒºé—´æ›´æ–°æ ‡è®°ï¼Œè€Œå­æ ‘èŠ‚ç‚¹ä¿¡æ¯ä¸æ›´æ–°çš„å†™æ³•ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line">l.add+=root.add;</span><br><span class="line">l.sum+=(l.r-l.l<span class="number">+1</span>)*root.add;</span><br><span class="line">r.add+=root.add;</span><br><span class="line">r.sum+=(r.r-r.l<span class="number">+1</span>)*root.add;</span><br></pre></td></tr></table></figure></div>

<p>ä¿®æ”¹çš„æ—¶å€™å°±å¾€ä¸‹ä¼ ã€‚</p>
<p>ç±»ä¼¼äºæŸ¥è¯¢ï¼Œå½“é€’å½’åˆ°åŒ…å«äº†è¿™ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆå°±æ²¡å¿…è¦æ¥ç€å¾€ä¸‹é€’å½’ï¼Œæ‰“ä¸Šæ ‡è®°ç„¶åè¿”å›å°±å¯ä»¥äº†ã€‚</p>
<p>é€’å½’åˆ°å­åŒºé—´éœ€è¦æŠŠå½“å‰åŒºé—´çš„æ ‡è®°ä¸‹ä¼ å¹¶æ¸…ç©ºè‡ªèº«æ ‡è®°ã€‚</p>
<p>ç›¸å½“äºæŸ¥è¯¢å’Œä¿®æ”¹è¿½ç€ä¸‹æ”¾è·‘ï¼Œæ€»ä¹‹æˆ‘å¯¹å½“å‰èŠ‚ç‚¹åšæ“ä½œçš„æ—¶å€™ï¼Œè¿™ä¸ªèŠ‚ç‚¹å¿…é¡»æ˜¯æ²¡æœ‰æ ‡è®°çš„ã€‚</p>
<p>å‡å¦‚ä¿®æ”¹åŒºé—´çš„å·¦ç«¯ç‚¹$\le{mid}$ï¼Œé‚£ä¹ˆå°±è¦é€’å½’ä¿®æ”¹å·¦åŒºé—´ï¼›</p>
<p>å‡å¦‚ä¿®æ”¹åŒºé—´çš„å³ç«¯ç‚¹$&gt;{mid}$ï¼Œé‚£ä¹ˆå°±è¦é€’å½’ä¿®æ”¹å³åŒºé—´ã€‚</p>
<p>è¡¥å……è¯´æ˜ï¼š</p>
<p>å¯¹äºä¸‹ä¼ æ›´å¥½çš„ç†è§£ï¼š</p>
<p>å‡å¦‚ä½ æ˜¯ä¸ªå¾ˆæ‡’æƒ°çš„å·¥äººï¼Œæœ‰å¾ˆå¤šå·¥ä½œéƒ½æ¨ç€ä¸åšï¼Œä½†æ˜¯æŸå¤©è€æ¿å¸¦ç€ä¸€å †äººæ¥æŸ¥å·¥ï¼Œå¾ˆå¹¸è¿çš„æ˜¯ä»–ä»¬å‚è§‚çš„éƒ½å¾ˆæ…¢ï¼Œæ‰€ä»¥ä½ å°±ç´§æ€¥åœ°å¤„ç†ä»–ä»¬å°†è¦åˆ°è¾¾çš„åœ°æ–¹ï¼Œä»¥ä¿è¯ä»–ä»¬æŸ¥åˆ°è¿™ä¸ªåœ°æ–¹çš„æ—¶å€™å‘ç°ä½ å·²ç»æŠŠè¿™ä¸ªåœ°æ–¹çš„å·¥ä½œåšå®Œäº†ï¼Œä½ æ°¸è¿œæ¯”è€æ¿å¿«ä¸€æ­¥ï¼Œä½ æ°¸è¿œéƒ½æ˜¯å¯¹çš„ï¼Œè‡³äºä»–ä»¬ä¸æŸ¥çš„åœ°æ–¹ï¼Œä½ è‡ªç„¶ä¹Ÿæ‡’å¾—å»åšï¼Œä¹Ÿå°±æ˜¯æ‰€è°“â€œæ‡’æ ‡è®°â€ã€‚</p>
<p>æ‰€ä»¥ä¸ºä»€ä¹ˆæ¯æ¬¡è¦ä¿®æ”¹å„¿å­å’ŒæŸ¥è¯¢å„¿å­ä¹‹å‰è¦å…ˆä¸‹ä¼ ï¼Ÿ</p>
<p>å› ä¸ºè€æ¿è¦å»å„¿å­èŠ‚ç‚¹çš„åœ°æ–¹æŸ¥å·¥äº†ã€‚</p>
<h3 id="åŒºé—´ä¹˜æ³•"><a href="#åŒºé—´ä¹˜æ³•" class="headerlink" title="åŒºé—´ä¹˜æ³•"></a>åŒºé—´ä¹˜æ³•</h3><p>å†åŠ ä¸€ä¸ªæ‡’æ ‡è®°<code>mul</code>ï¼Œè¡¨ç¤ºä¹˜æ³•çš„æ‡’æ ‡è®°ã€‚</p>
<p>å‡å¦‚å…ˆåŠ å†ä¹˜å¤„ç†æ ‡è®°ï¼Œé‚£å‡å¦‚å†åŠ äº†ä¸€ä¸ªæ•°ï¼Œå˜æˆäº†$(s+a)\times{b}+c$çš„å½¢å¼ï¼Œä¼šéå¸¸ä¸å¥½å¤„ç†ï¼Œå› ä¸ºå¦‚æœæƒ³æŠŠ $c$ åŠ åˆ° $a$ ä¸Šï¼Œéœ€è¦é™¤ä»¥ä¸€ä¸ª $b$ï¼Œä¼šé€ æˆç²¾åº¦è¯¯å·®ã€‚</p>
<p>é‚£å°±<strong>å…ˆä¹˜å†åŠ </strong>ï¼Œå¦‚æœä»€ä¹ˆéƒ½æ²¡æœ‰é‚£ä¹ˆ$mul&#x3D;1,add&#x3D;0$ï¼Œè¿™æ ·å°±æ¯”è¾ƒå¥½ç»´æŠ¤ã€‚</p>
<p>å¯¹äºæ¯ä¸ªæ•°ï¼Œ$x\times{mul}+add$ï¼Œå‡å¦‚å†åŠ ä¸€ä¸ªæ•°ï¼Œé‚£ä¹ˆåªéœ€è¦æ”¹å˜$add$å°±å¯ä»¥äº†ã€‚</p>
<p>è€Œå¯¹äºä¹˜æ³•ï¼Œé‚£å°±æŠŠ$add$å’Œ$mul$åŒæ—¶ä¹˜ä¸Šè¿™ä¸ªæ•°å°±å¯ä»¥äº†ã€‚</p>
<h2 id="æ‰«æçº¿æ³•"><a href="#æ‰«æçº¿æ³•" class="headerlink" title="æ‰«æçº¿æ³•"></a>æ‰«æçº¿æ³•</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/FallingSakura/Source@main/img/202308081935464.webp"
                      alt="image.png"
                ></p>
<p>åƒè¿™æ ·æ²¿ç€çŸ©å½¢çš„ä¾§è¾¹åˆ‡è‹¥å¹²åˆ€ï¼Œå°†æ•´ä¸ªå›¾å½¢åˆ†æˆè‹¥å¹²ä»½ï¼Œä½¿å¾—æ¯ä¸€ä»½å†…çš„æˆªçº¿é•¿åº¦éƒ½ç›¸ç­‰ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202308081939494.webp"
                      alt="image.png"
                ></p>
<p>$h_i$ä»£è¡¨ç¬¬$i$æ®µé¢ç§¯çš„é•¿åº¦ã€‚</p>
<p>é‚£æ€ä¹ˆæ±‚å‡º$h_i$å‘¢ï¼Ÿ</p>
<p>å¯ä»¥å¯¹çºµåæ ‡è¿›è¡Œçº¿æ®µæ ‘ç»´æŠ¤ã€‚</p>
<p>æ¯ä¸ªçŸ©å½¢æœ‰ä¸¤æ¡ä¾§è¾¹ï¼ŒæŠŠæ¯ä¸ªä¾§è¾¹çœ‹æˆä¸€ä¸ªçº¿æ®µï¼Œæƒå€¼åˆ†åˆ«è®¾ä¸º$+1,-1$ï¼Œè¡¨ç¤ºå½“å‰åŒºé—´è¢«å‡ ä¸ªçŸ©å½¢æ‰€è¦†ç›–ã€‚</p>
<p>æœ‰ä¸¤ä¸ªæ“ä½œï¼Œä¸€ä¸ªæ˜¯å°†æŸä¸ªåŒºé—´åŠ ä¸€æˆ–è´Ÿä¸€ï¼Œä¸€ä¸ªæ˜¯æ±‚æ•´ä¸ªåŒºé—´é‡Œæƒå€¼å¤§äº$0$çš„åŒºé—´é•¿åº¦æ˜¯å¤šå°‘ã€‚</p>
<p>ç»´æŠ¤çš„æ˜¯åŒºé—´ï¼Œä¿®æ”¹ $l\sim{r}$ åªéœ€è¦ä¿®æ”¹ $y_l\sim{y_{r-1}}$</p>
<p>ç»Ÿè®¡ä¿¡æ¯æ—¶åªå…³å¿ƒå­å­™èŠ‚ç‚¹ã€‚</p>
<p>æ‰«æçº¿æ€§è´¨ï¼š</p>
<ul>
<li>æ°¸è¿œåªè€ƒè™‘æ ¹èŠ‚ç‚¹ä¿¡æ¯ï¼ŒæŸ¥è¯¢çš„æ—¶å€™ä¸éœ€è¦ä¸‹æ”¾æ ‡è®°ã€‚</li>
<li>æ‰€æœ‰æ“ä½œéƒ½æ˜¯æˆå¯¹å‡ºç°ï¼Œæœ‰åŠ ä¹Ÿå°±æœ‰å‡ã€‚</li>
</ul>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e5</span><span class="number">+10</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">segment</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">double</span> x,y1,y2;</span><br><span class="line">    <span class="type">int</span> k;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span>&lt;(<span class="type">const</span> segment &amp;a)<span class="type">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> x&lt;a.x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;seg[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> l,r;</span><br><span class="line">    <span class="type">int</span> cnt;</span><br><span class="line">    <span class="type">double</span> len;</span><br><span class="line">&#125;tr[N&lt;&lt;<span class="number">3</span>];</span><br><span class="line">vector&lt;<span class="type">double</span>&gt; ys; </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">double</span> y)</span><span class="comment">//æŸ¥æ‰¾ç¦»æ•£åŒ–åçš„ä¸‹æ ‡</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">lower_bound</span>(ys.<span class="built_in">begin</span>(),ys.<span class="built_in">end</span>(),y)-ys.<span class="built_in">begin</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pushup</span><span class="params">(<span class="type">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(tr[u].cnt)</span><br><span class="line">        tr[u].len=(ys[tr[u].r<span class="number">+1</span>]-ys[tr[u].l]);<span class="comment">//èŠ‚ç‚¹å¯¹åº”åŒºé—´ï¼Œæ‰€ä»¥å³ç«¯ç‚¹ä¸‹æ ‡è¦åŠ ä¸€</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(tr[u].l!=tr[u].r)<span class="comment">//ä¸æ˜¯å¶å­èŠ‚ç‚¹å†ç”¨å„¿å­æ›´æ–°</span></span><br><span class="line">        tr[u].len=tr[u&lt;&lt;<span class="number">1</span>].len+tr[u&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].len;</span><br><span class="line">    <span class="keyword">else</span> tr[u].len=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> l,<span class="type">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    tr[u].l=l,tr[u].r=r;</span><br><span class="line">    <span class="keyword">if</span>(l==r)</span><br><span class="line">    &#123;</span><br><span class="line">        tr[u].len=<span class="number">0</span>,tr[u].cnt=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">build</span>(u&lt;&lt;<span class="number">1</span>,l,mid),<span class="built_in">build</span>(u&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,mid<span class="number">+1</span>,r);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">modify</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> l,<span class="type">int</span> r,<span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(tr[u].l&gt;=l&amp;&amp;tr[u].r&lt;=r) </span><br><span class="line">    &#123;</span><br><span class="line">        tr[u].cnt+=v;</span><br><span class="line">        <span class="built_in">pushup</span>(u);<span class="comment">//ç®—ä¸€ä¸‹è¦ä¸è¦æ›´æ–°</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> mid=(tr[u].l+tr[u].r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(l&lt;=mid) <span class="built_in">modify</span>(u&lt;&lt;<span class="number">1</span>,l,r,v);</span><br><span class="line">    <span class="keyword">if</span>(r&gt;mid) <span class="built_in">modify</span>(u&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,l,r,v);</span><br><span class="line">    <span class="built_in">pushup</span>(u);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> t=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n),n)</span><br><span class="line">    &#123;</span><br><span class="line">        ys.<span class="built_in">clear</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>,j=<span class="number">0</span>;i&lt;=n;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">double</span> x1,x2,y1,y2;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%lf%lf%lf%lf&quot;</span>,&amp;x1,&amp;y1,&amp;x2,&amp;y2);</span><br><span class="line">            seg[j++]=&#123;x1,y1,y2,<span class="number">1</span>&#125;;</span><br><span class="line">            seg[j++]=&#123;x2,y1,y2,<span class="number">-1</span>&#125;;</span><br><span class="line">            ys.<span class="built_in">push_back</span>(y1),ys.<span class="built_in">push_back</span>(y2);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">sort</span>(ys.<span class="built_in">begin</span>(),ys.<span class="built_in">end</span>());</span><br><span class="line">        ys.<span class="built_in">erase</span>(<span class="built_in">unique</span>(ys.<span class="built_in">begin</span>(),ys.<span class="built_in">end</span>()),ys.<span class="built_in">end</span>());</span><br><span class="line">        <span class="built_in">sort</span>(seg,seg+n*<span class="number">2</span>);</span><br><span class="line">        <span class="built_in">build</span>(<span class="number">1</span>,<span class="number">0</span>,(<span class="type">int</span>)ys.<span class="built_in">size</span>()<span class="number">-2</span>);<span class="comment">//å­˜çš„æ˜¯åŒºé—´</span></span><br><span class="line">        <span class="type">double</span> res=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n*<span class="number">2</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(i&gt;<span class="number">0</span>) res+=tr[<span class="number">1</span>].len*(seg[i].x-seg[i<span class="number">-1</span>].x);</span><br><span class="line">            <span class="built_in">modify</span>(<span class="number">1</span>,<span class="built_in">find</span>(seg[i].y1),<span class="built_in">find</span>(seg[i].y2)<span class="number">-1</span>,seg[i].k);<span class="comment">//å› ä¸ºå­˜çš„æ˜¯åŒºé—´è€Œä¸æ˜¯ç‚¹ï¼Œæ‰€ä»¥å³ç«¯ç‚¹è¦å‡ä¸€ï¼Œå› ä¸ºä¸€å·èŠ‚ç‚¹ä»£è¡¨çš„æ˜¯1~2ï¼Œé‚£ä¹ˆl~rå¯¹åº”çš„èŠ‚ç‚¹å°±æ˜¯l~r-1</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Test case #%d\n&quot;</span>,t++);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Total explored area: %.2lf\n\n&quot;</span>,res);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="åŠ¨æ€å¼€ç‚¹"><a href="#åŠ¨æ€å¼€ç‚¹" class="headerlink" title="åŠ¨æ€å¼€ç‚¹"></a>åŠ¨æ€å¼€ç‚¹</h2><p>çº¿æ®µæ ‘çš„å †å¼å­˜å‚¨ï¼š</p>
<p>æ€»å…±æœ‰ $n$ ä¸ªæ•°ï¼Œ$logn$ å±‚ï¼Œæœ€åä¸€å±‚å¶å­èŠ‚ç‚¹æ•°æ˜¯ $2^{\lceil{logn}\rceil}$ï¼Œç”±äºä¸‡å…¨äºŒå‰æ ‘çš„æ€§è´¨ï¼Œæ€»èŠ‚ç‚¹æ•°å°±æ˜¯ $2^{\lceil{logn}\rceil + 1} - 1$ï¼Œæœ€åä¸€å±‚çš„å¶å­èŠ‚ç‚¹æœ€å¤šæœ‰ $n$ ä¸ªï¼Œé‚£ä¹ˆæ€»èŠ‚ç‚¹æ•°æœ€å¤šæœ‰ $2n - 1$ ä¸ªï¼Œè¿™æ˜¯æ­£å¸¸æƒ…å†µã€‚</p>
<p>åœ¨ä¸€äº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œå€’æ•°ç¬¬äºŒå±‚æœ€å¤šæœ‰ $n - 1$ ä¸ªå¶å­èŠ‚ç‚¹ï¼Œæœ‰ä¸€ä¸ªèŠ‚ç‚¹åœ¨æœ€åä¸€å±‚ï¼Œé‚£ä¹ˆå€’æ•°ç¬¬äºŒå±‚åŠä¹‹å‰æœ€å¤šæœ‰ $2n - 3$ ä¸ªèŠ‚ç‚¹ï¼Œè€Œæœ€åä¸€å±‚ç”±äºæœ‰äº†ä¸€ä¸ªç‚¹æ‰€ä»¥è¦æŠŠè¿™ä¸€å±‚å¼€æ»¡ï¼Œä¹Ÿå°±æ˜¯å€’æ•°ç¬¬äºŒå±‚çš„ä¸¤å€ $2n - 2$ï¼Œæ‰€ä»¥èŠ‚ç‚¹æ€»æ•°æœ€å¤šä¸º $4n - 5$ã€‚</p>
<p>ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œæ‰€ä»¥æˆ‘ä»¬<em>ç‰©å°½å…¶ç”¨</em>ï¼Œåšåˆ°ç”¨å¤šå°‘å¼€å¤šå°‘ï¼Œé‚£ä¹ˆæ­¤æ—¶æœ€å¤§ç©ºé—´ä¸º $2n - 1$ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¦å¼€ä¸¤å€ç©ºé—´ã€‚</p>
<p>ç”±äºæˆ‘ä»¬ä¸å†è®°å½•èŠ‚ç‚¹çš„å·¦å³è¾¹ç•Œï¼Œæ‰€ä»¥è¦æ”¾åˆ°å‡½æ•°å‚æ•°é‡Œï¼Œ<code>pushdown</code> çš„æ—¶å€™ä¹Ÿè¦è®°å½•ä¸€ä¸‹èŠ‚ç‚¹åŒºé—´å¤§å°ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">7</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ls(x) tr[tr[x].l]</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rs(x) tr[tr[x].r]</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m, idx, root;</span><br><span class="line"><span class="type">int</span> a[N];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> l, r;</span><br><span class="line">    LL sum, add;</span><br><span class="line">&#125;tr[N &lt;&lt; <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pushup</span><span class="params">(<span class="type">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    tr[u].sum = <span class="built_in">ls</span>(u).sum + <span class="built_in">rs</span>(u).sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pushdown</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(tr[u].add)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(!tr[u].l) tr[u].l = ++idx;</span><br><span class="line">        <span class="keyword">if</span>(!tr[u].r) tr[u].r = ++idx;</span><br><span class="line">        <span class="built_in">ls</span>(u).add += tr[u].add;</span><br><span class="line">        <span class="built_in">rs</span>(u).add += tr[u].add;</span><br><span class="line">        <span class="built_in">ls</span>(u).sum += (LL)(len + <span class="number">1</span>) / <span class="number">2</span> * tr[u].add;</span><br><span class="line">        <span class="built_in">rs</span>(u).sum += (LL)len / <span class="number">2</span> * tr[u].add;</span><br><span class="line">        tr[u].add = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">modify</span><span class="params">(<span class="type">int</span> &amp;u, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> L, <span class="type">int</span> R, <span class="type">int</span> v)</span> <span class="comment">// èŠ‚ç‚¹ç¼–å·ï¼ŒèŠ‚ç‚¹åŒºé—´ï¼Œä¿®æ”¹åŒºé—´ï¼ŒåŠ v</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!u) u = ++idx;</span><br><span class="line">    <span class="keyword">if</span>(L &lt;= l &amp;&amp; r &lt;= R)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(l == r)</span><br><span class="line">        &#123;</span><br><span class="line">            tr[u].sum += v;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        tr[u].add += v;</span><br><span class="line">        tr[u].sum += (LL)(r - l + <span class="number">1</span>) * v;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">pushdown</span>(u, r - l + <span class="number">1</span>);</span><br><span class="line">    <span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(L &lt;= mid) <span class="built_in">modify</span>(tr[u].l, l, mid, L, R, v);</span><br><span class="line">    <span class="keyword">if</span>(R &gt; mid) <span class="built_in">modify</span>(tr[u].r, mid + <span class="number">1</span>, r, L, R, v);</span><br><span class="line">    <span class="built_in">pushup</span>(u);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">query</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> L, <span class="type">int</span> R)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!u) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(L &lt;= l &amp;&amp; r &lt;= R) <span class="keyword">return</span> tr[u].sum;</span><br><span class="line">    <span class="built_in">pushdown</span>(u, r - l + <span class="number">1</span>);</span><br><span class="line">    <span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    LL res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(L &lt;= mid) res += <span class="built_in">query</span>(tr[u].l, l, mid, L, R);</span><br><span class="line">    <span class="keyword">if</span>(R &gt; mid) res += <span class="built_in">query</span>(tr[u].r, mid + <span class="number">1</span>, r, L, R);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">        <span class="built_in">modify</span>(root, <span class="number">1</span>, n, i, i, a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(m--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> op, x, y;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;op, &amp;x, &amp;y);</span><br><span class="line">        <span class="keyword">if</span>(op == <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> k;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;k);</span><br><span class="line">            <span class="built_in">modify</span>(root, <span class="number">1</span>, n, x, y, k);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(op == <span class="number">2</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, <span class="built_in">query</span>(root, <span class="number">1</span>, n, x, y));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="å¯æŒä¹…åŒ–çº¿æ®µæ ‘"><a href="#å¯æŒä¹…åŒ–çº¿æ®µæ ‘" class="headerlink" title="å¯æŒä¹…åŒ–çº¿æ®µæ ‘"></a>å¯æŒä¹…åŒ–çº¿æ®µæ ‘</h2><blockquote>
<p>åˆå«åšä¸»å¸­æ ‘</p>
</blockquote>
<p>$M$ æ¬¡ä¿®æ”¹ï¼Œ $M + 1$ ä¸ªç‰ˆæœ¬ã€‚</p>
<p>æŸä¸€ä¸ªèŠ‚ç‚¹å‘ç”Ÿäº†å˜åŒ–ï¼Œé‚£å°±åˆ›å»ºä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œå¦åˆ™å°±ç”¨åŸæ¥çš„ã€‚</p>
<p>æ¯æ¬¡æœ€å¤šä¿®æ”¹ $4logn$ çš„ç‚¹ï¼Œæ‰€ä»¥ä¸€å…±éœ€è¦æœ€å¤š $4 logn \times m$ å€çš„ç©ºé—´ã€‚</p>
<p>èŠ‚ç‚¹å­˜å‚¨å®ƒçš„å·¦å³å„¿å­çš„ç¼–å·ï¼ŒèŠ‚ç‚¹çš„åŒºé—´ä½œä¸ºå‡½æ•°å‚æ•°å³å¯ã€‚</p>
<p>å¯æŒä¹…åŒ–çº¿æ®µæ ‘éš¾ä»¥è¿›è¡ŒåŒºé—´ä¿®æ”¹ã€‚</p>
<p>å› ä¸ºæœ‰å¾ˆå¤šç‰ˆæœ¬çš„å¾ˆå¤šæ‡’æ ‡è®°éœ€è¦æ›´æ–°ã€‚</p>
<p>é™¤éåšæˆ<em>æ°¸ä¹…åŒ–æ‡’æ ‡è®°</em>ã€‚</p>
<p><del>å’•å’•å’•</del></p>
<p>ç›¸å¯¹äº Trie æ ‘ï¼Œå®ƒä¸ä¼šæ–°åŠ å…¥ä¸€äº›ç‚¹ã€‚</p>
<p>åªæ˜¯æŠŠè¦ä¿®æ”¹çš„ç‚¹å¤åˆ¶è¿‡æ¥ï¼Œç„¶åä¿®æ”¹å®ƒçš„ä¸€éƒ¨åˆ†ä¿¡æ¯ã€‚</p>
<p>ç›¸å½“äºåŠ¨æ€å¼€ç‚¹ã€‚</p>
<p>æ¯æ¬¡å…ˆå¼€ä¸€ä¸ªç‚¹ï¼Œç„¶åæŠŠä¹‹å‰ç‰ˆæœ¬ç›¸åº”çš„èŠ‚ç‚¹å…ˆå¤åˆ¶è¿‡æ¥ï¼Œå¦‚æœæ²¡æœ‰é‚£ä¹ˆå°±ç›¸å½“äºå¤åˆ¶äº†ç©ºä¿¡æ¯ï¼Œ</p>
<hr>
<p><a class="link"   href="https://www.acwing.com/problem/content/257/" >AcWing255<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>é¦–å…ˆè¿™æ˜¯ä¸€ä¸ªé™æ€é—®é¢˜ã€‚</p>
<ul>
<li><del>å½’å¹¶æ ‘</del></li>
<li>åˆ’åˆ†æ ‘</li>
<li>æ ‘å¥—æ ‘ï¼ˆçº¿æ®µæ ‘å¥—å¹³è¡¡æ ‘ï¼‰</li>
<li>å¯æŒä¹…åŒ–çº¿æ®µæ ‘</li>
</ul>
<table>
<thead>
<tr>
<th>æ•°æ®ç»“æ„</th>
<th>æ—¶é—´å¤æ‚åº¦</th>
<th>ç©ºé—´å¤æ‚åº¦</th>
</tr>
</thead>
<tbody><tr>
<td>åˆ’åˆ†æ ‘</td>
<td>$O(NlogN)$</td>
<td>$O(NlogN)$</td>
</tr>
<tr>
<td>æ ‘å¥—æ ‘</td>
<td>$O(Mlog^2N)$</td>
<td>$O(NlogN)$</td>
</tr>
<tr>
<td>ä¸»å¸­æ ‘</td>
<td>$O(NlogN)$</td>
<td>$O(NlogN)$</td>
</tr>
</tbody></table>
<p>æ‰€ä»¥åˆ’åˆ†æ ‘è¢«å®Œå…¨å–ä»£äº†ã€‚</p>
<p>ç”¨çº¿æ®µæ ‘ç»´æŠ¤å€¼åŸŸã€‚</p>
<p>è¿™é‡Œæ’å…¥ä¸€ä¸ªæ¦‚å¿µï¼š<em>æƒå€¼çº¿æ®µæ ‘</em>ã€‚</p>
<p>ä»¥å€¼åŸŸä¸ºä¸‹æ ‡å»ºç«‹çº¿æ®µæ ‘ï¼Œç»´æŠ¤çš„æ˜¯ä¸€æ®µå€¼åŸŸå†…æ•°çš„ä¸ªæ•°ï¼Œç›¸å½“äºç”¨çº¿æ®µæ ‘ç»´æŠ¤äº†ä¸€å †æ¡¶ã€‚</p>
<p>å…ˆå°†å€¼åŸŸç¦»æ•£åŒ–ã€‚</p>
<p>åœ¨æ•°å€¼ä¸Šå»ºç«‹çº¿æ®µæ ‘ã€‚</p>
<p>ç»´æŠ¤æ¯ä¸ªæ•°å€¼åŒºé—´ä¸­ä¸€å…±æœ‰å¤šå°‘ä¸ªæ•°ã€‚</p>
<p>å…ˆè€ƒè™‘å¦‚ä½•æ±‚æ•´ä½“ç¬¬ $k$ å°æ•°ï¼Œå¯ä»¥è¿›è¡ŒäºŒåˆ†ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªä½ç½®ä½¿å¾—å®ƒå·¦è¾¹å°äºç­‰äº $k$ çš„æ•°åˆšå¥½ä¸º $k$ ã€‚</p>
<p>å¯¹äºå³è¾¹ç•Œï¼Œå¯ä»¥æŸ¥è¯¢å†å²ç‰ˆæœ¬ã€‚</p>
<p>æ¯ä¸ªç‰ˆæœ¬ç›¸å½“äºæ¯”åŸæ¥çš„ç‰ˆæœ¬å¤šåŠ äº†ä¸€ä¸ªæ•°ï¼Œæ”¹å˜äº†çº¿æ®µæ ‘ä¸­çš„ $logN$ ä¸ªèŠ‚ç‚¹ã€‚</p>
<p>è€Œçº¿æ®µæ ‘æ¯ä¸ªç‰ˆæœ¬çš„ç»“æ„éƒ½æ˜¯ä¸å˜çš„ã€‚</p>
<p>æ€»èŠ‚ç‚¹æ•°é‡åœ¨å˜ï¼Ÿé‚£æ˜¯å› ä¸ºæœ‰æ–°ç‰ˆæœ¬çš„èŠ‚ç‚¹æ›¿ä»£äº†è€ç‰ˆæœ¬çš„èŠ‚ç‚¹ï¼Œæ‰€ä»¥ä¸€å¼€å§‹ç©ºæ ‘é‡Œæœ‰ $4N$ ä¸ªèŠ‚ç‚¹ï¼Œåæ¥è¿˜è¦å†æ’å…¥ $N$ ä¸ªæ•°ï¼Œæ¯æ’å…¥ä¸€ä¸ªæ•°æœ€å¤šå¯ä»¥å¢åŠ  $logN$ ä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥éœ€è¦å¼€çš„ç©ºé—´æ˜¯ $(4 + logN)N$ ã€‚</p>
<p>å¯ä»¥è€ƒè™‘å‰ç¼€å’Œï¼ŒåŒæ—¶æŸ¥ä¸€ä¸‹ $l - 1$ ç‰ˆæœ¬å³å¯ï¼Œè¿™æ ·å°±å¯ä»¥çŸ¥é“ $l\sim r$ çš„è¿™äº›æ•°å†…ï¼ŒæŸæ®µå€¼åŸŸçš„å˜åŒ–é‡ï¼Œç„¶åå°±å¯ä»¥ç±»ä¼¼äºŒåˆ†åœ°æ‰¾åˆ°è¿™äº›æ•°ä¸­ç¬¬ $k$ å°çš„æ•°ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">200010</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> a[N];</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; nums;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span> </span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> l, r;</span><br><span class="line">    <span class="type">int</span> cnt;</span><br><span class="line">&#125;tr[(N &lt;&lt; <span class="number">2</span>) + N * <span class="number">17</span>]; <span class="comment">// 4N + NlogN</span></span><br><span class="line"><span class="type">int</span> root[N], idx;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">lower_bound</span>(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>(), x) - nums.<span class="built_in">begin</span>(); <span class="comment">// ç¦»æ•£åŒ–</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">build</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r)</span> <span class="comment">// å»ºç«‹å·¦å³è¾¹ç•Œä¸º l å’Œ r çš„çº¿æ®µæ ‘èŠ‚ç‚¹å¹¶è¿”å›å…¶ç¼–å·</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> p = ++idx;</span><br><span class="line">    tr[p].l = l, tr[p].r = r;</span><br><span class="line">    <span class="keyword">if</span>(l == r) <span class="keyword">return</span> p;</span><br><span class="line">    <span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    tr[p].l = <span class="built_in">build</span>(l, mid);</span><br><span class="line">    tr[p].r = <span class="built_in">build</span>(mid + <span class="number">1</span>, r);</span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">insert</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> x)</span> <span class="comment">// ä¸Šä¸€ä¸ªç‰ˆæœ¬çš„èŠ‚ç‚¹ï¼Œå·¦è¾¹ç•Œå³è¾¹ç•Œï¼Œéœ€è¦æ’å…¥çš„æ•°</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> q = ++idx; <span class="comment">// æ–°èŠ‚ç‚¹</span></span><br><span class="line">    tr[q] = tr[p]; <span class="comment">// å…ˆå¤åˆ¶ï¼Œæ³¨æ„ç”±äºæ ‘çš„ç»“æ„æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥ p å’Œ q åˆ†åˆ«å¯¹åº”ç€è€ç‰ˆæœ¬å’Œæ–°ç‰ˆæœ¬ä¸­åŒä¸€ä¸ªèŠ‚ç‚¹ã€‚</span></span><br><span class="line">    <span class="keyword">if</span>(l == r)</span><br><span class="line">    &#123;</span><br><span class="line">        tr[q].cnt++;</span><br><span class="line">        <span class="keyword">return</span> q;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(x &lt;= mid) tr[q].l = <span class="built_in">insert</span>(tr[p].l, l, mid, x); <span class="comment">// æ³¨æ„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå†å²ç‰ˆæœ¬åŒæ­¥é€’å½’</span></span><br><span class="line">    <span class="keyword">else</span> tr[q].r = <span class="built_in">insert</span>(tr[p].r, mid + <span class="number">1</span>, r, x);</span><br><span class="line">    tr[q].cnt = tr[tr[q].l].cnt + tr[tr[q].r].cnt; <span class="comment">// æ›´æ–°èŠ‚ç‚¹ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">return</span> q;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">query</span><span class="params">(<span class="type">int</span> q, <span class="type">int</span> p, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> k)</span> <span class="comment">// æ–°ç‰ˆæœ¬ï¼Œæ—§ç‰ˆæœ¬ï¼Œå·¦å³è¾¹ç•Œï¼Œç¬¬ k å°çš„ä¸‹æ ‡</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l == r) <span class="keyword">return</span> r;</span><br><span class="line">    <span class="type">int</span> cnt = tr[tr[q].l].cnt - tr[tr[p].l].cnt;</span><br><span class="line">    <span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(k &lt;= cnt) <span class="keyword">return</span> <span class="built_in">query</span>(tr[q].l, tr[p].l, l, mid, k);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="built_in">query</span>(tr[q].r, tr[p].r, mid + <span class="number">1</span>, r, k - cnt);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">        nums.<span class="built_in">push_back</span>(a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>());</span><br><span class="line">    nums.<span class="built_in">erase</span>(<span class="built_in">unique</span>(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>()), nums.<span class="built_in">end</span>());</span><br><span class="line">    root[<span class="number">0</span>] = <span class="built_in">build</span>(<span class="number">0</span>, nums.<span class="built_in">size</span>() - <span class="number">1</span>); <span class="comment">// åˆå§‹åŒ–ç©ºæ ‘</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        root[i] = <span class="built_in">insert</span>(root[i - <span class="number">1</span>], <span class="number">0</span>, nums.<span class="built_in">size</span>() - <span class="number">1</span>, <span class="built_in">find</span>(a[i]));</span><br><span class="line">    <span class="keyword">while</span>(m--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> l, r, k;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;l, &amp;r, &amp;k);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, nums[<span class="built_in">query</span>(root[r], root[l - <span class="number">1</span>], <span class="number">0</span>, nums.<span class="built_in">size</span>() - <span class="number">1</span>, k)]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="ä¹ é¢˜"><a href="#ä¹ é¢˜" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h2><p><a class="link"   href="https://white.fallingsakura.top/3618463430/" >A1275<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p><a class="link"   href="https://white.fallingsakura.top/2123984512/" >A245<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p><a class="link"   href="https://www.acwing.com/problem/content/249/" >A247<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p><a class="link"   href="https://www.acwing.com/problem/content/1279/" >A1277<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307241126046.webp"
                      alt="image.png"
                ></p>
<h1 id="æ ‘çŠ¶æ•°ç»„"><a href="#æ ‘çŠ¶æ•°ç»„" class="headerlink" title="æ ‘çŠ¶æ•°ç»„"></a>æ ‘çŠ¶æ•°ç»„</h1><blockquote>
<p>æ ‘å½¢ç»“æ„çš„æ•°ç»„</p>
</blockquote>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202307252022858.webp"
                      alt="image.png"
                ></p>
<h2 id="Lowbitå‡½æ•°"><a href="#Lowbitå‡½æ•°" class="headerlink" title="Lowbitå‡½æ•°"></a>Lowbitå‡½æ•°</h2><blockquote>
<p><code>lowbit(i)=i&amp;-i</code></p>
</blockquote>
<p>è¿™æ˜¯æ ‘çŠ¶æ•°ç»„æœ€é‡è¦çš„ä¸€ä¸ªç¯èŠ‚ã€‚</p>
<p>å•ç‚¹ä¿®æ”¹å‘ä¸Šä¼ é€’æ—¶ï¼Œæ¯æ¬¡åŠ ä¸Šå½“å‰ç‚¹çš„$lowbit$</p>
<p>åŒºé—´æŸ¥è¯¢å‘ä¸‹è®¿é—®æ—¶ï¼Œæ¯æ¬¡å‡å»å½“å‰ç‚¹çš„$lowbit$</p>
<h2 id="ä¹ é¢˜-1"><a href="#ä¹ é¢˜-1" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h2><p><a class="link"   href="https://www.luogu.com.cn/problem/P3374" >P3374<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lowbit(x) ((x)&amp;(-x))</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">5e5</span><span class="number">+7</span>;</span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="type">int</span> a;</span><br><span class="line"><span class="type">int</span> t[N];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">modify</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=x;i&lt;=n;i+=<span class="built_in">lowbit</span>(i))</span><br><span class="line">        t[i]+=y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">query</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=y;i;i-=<span class="built_in">lowbit</span>(i))</span><br><span class="line">        ans+=t[i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=x<span class="number">-1</span>;i;i-=<span class="built_in">lowbit</span>(i))</span><br><span class="line">        ans-=t[i];</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a),<span class="built_in">modify</span>(i,a);</span><br><span class="line">    <span class="keyword">while</span>(m--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> op,x,y;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;op,&amp;x,&amp;y);</span><br><span class="line">        <span class="keyword">if</span>(op==<span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">modify</span>(x,y);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,<span class="built_in">query</span>(x,y));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><a class="link"   href="https://www.luogu.com.cn/problem/P3368" >P3368<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lowbit(x) ((x)&amp;(-x))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">5e5</span><span class="number">+7</span>;</span><br><span class="line"><span class="type">int</span> n,m,a;</span><br><span class="line"><span class="type">int</span> t[N];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">modify</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=x;i&lt;=n;i+=<span class="built_in">lowbit</span>(i))</span><br><span class="line">        t[i]+=k;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=y<span class="number">+1</span>;i&lt;=n;i+=<span class="built_in">lowbit</span>(i))</span><br><span class="line">        t[i]-=k;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">query</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=x;i;i-=<span class="built_in">lowbit</span>(i))</span><br><span class="line">        ans+=t[i];</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a),<span class="built_in">modify</span>(i,i,a);</span><br><span class="line">    <span class="keyword">while</span>(m--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> op,x,y,k;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;op,&amp;x);</span><br><span class="line">        <span class="keyword">if</span>(op==<span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;y,&amp;k);</span><br><span class="line">            <span class="built_in">modify</span>(x,y,k);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,<span class="built_in">query</span>(x));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><a class="link"   href="https://acm.hdu.edu.cn/showproblem.php?pid=1166" >HDU1166<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lowbit(x) ((x)&amp;(-x))</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">5e4</span><span class="number">+10</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> t[N];</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">modify</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=x;i&lt;=n;i+=<span class="built_in">lowbit</span>(i))</span><br><span class="line">        t[i]+=y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">query</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> an=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=y;i;i-=<span class="built_in">lowbit</span>(i))</span><br><span class="line">        an+=t[i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=x<span class="number">-1</span>;i;i-=<span class="built_in">lowbit</span>(i))</span><br><span class="line">        an-=t[i];</span><br><span class="line">    <span class="keyword">return</span> an;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> tt;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;tt);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=tt;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">        <span class="built_in">memset</span>(t,<span class="number">0</span>,<span class="built_in">sizeof</span>(t));</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> a;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a);</span><br><span class="line">            <span class="built_in">modify</span>(j,a);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> x,y,ans;</span><br><span class="line">        <span class="type">char</span> ss[<span class="number">10</span>];</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Case %d:\n&quot;</span>,i);</span><br><span class="line">        <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,ss),ss[<span class="number">0</span>]!=<span class="string">&#x27;E&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(ss[<span class="number">0</span>]==<span class="string">&#x27;Q&#x27;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;x,&amp;y);</span><br><span class="line">                ans=<span class="built_in">query</span>(x,y);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,ans);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(ss[<span class="number">0</span>]==<span class="string">&#x27;A&#x27;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;x,&amp;y);</span><br><span class="line">                <span class="built_in">modify</span>(x,y);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(ss[<span class="number">0</span>]==<span class="string">&#x27;S&#x27;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;x,&amp;y);</span><br><span class="line">                <span class="built_in">modify</span>(x,-y);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="å¹³è¡¡æ ‘"><a href="#å¹³è¡¡æ ‘" class="headerlink" title="å¹³è¡¡æ ‘"></a>å¹³è¡¡æ ‘</h1><h2 id="Treap"><a href="#Treap" class="headerlink" title="Treap"></a>Treap</h2><blockquote>
<p>Tree + heap</p>
</blockquote>
<p>äºŒå‰æœç´¢æ ‘å’Œå †çš„ä¸€ä¸ªæœ‰æœºç»“åˆã€‚</p>
<h3 id="BST"><a href="#BST" class="headerlink" title="BST"></a>BST</h3><blockquote>
<p>Binary search tree | äºŒå‰æœç´¢æ ‘</p>
</blockquote>
<p>æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªæƒå€¼ï¼Œæ»¡è¶³å½“å‰èŠ‚ç‚¹çš„å·¦å­æ ‘ä¸­çš„ä»»ä½•ä¸€ä¸ªç‚¹çš„æƒå€¼ï¼Œå³å­æ ‘çš„ä»»ä½•ä¸€ä¸ªç‚¹çš„æƒå€¼å¤§äºè¯¥ç‚¹ï¼Œè‹¥æœ‰é‡å¤çš„ï¼Œé‚£å°±è®°å½•ä¸€ä¸‹è¿™ä¸ªå€¼å‡ºç°äº†å¤šå°‘æ¬¡ã€‚</p>
<p>BST çš„<strong>ä¸­åºéå†</strong>æ˜¯ä¸¥æ ¼å•è°ƒé€’å¢çš„ã€‚</p>
<p>å®ƒåœ¨åŠ¨æ€ç»´æŠ¤ä¸€ä¸ªæœ‰åºåºåˆ—ã€‚</p>
<ol>
<li>æ’å…¥</li>
<li>åˆ é™¤ï¼ˆå¶èŠ‚ç‚¹ï¼‰</li>
<li>æ‰¾å‰é©±ï¼ˆä¸­åºéå†çš„å‰ä¸€ä¸ªä½ç½®ï¼‰&#x2F;åç»§ï¼ˆä¸­åºéå†çš„åä¸€ä¸ªä½ç½®ï¼‰</li>
<li>æ‰¾æœ€å¤§ï¼ˆä¸æ–­èµ°å³å„¿å­ç›´åˆ°ä¸èƒ½èµ°ï¼‰&#x2F;æœ€å°å€¼ï¼ˆä¸æ–­èµ°å·¦å„¿å­ç›´åˆ°ä¸èƒ½èµ°ï¼‰<br>ä»¥ä¸Š set å‡å¯æ»¡è¶³</li>
<li>æ±‚æŸä¸ªå€¼çš„æ’å</li>
<li>æ±‚æ’åæ˜¯ k çš„æ•°æ˜¯å“ªä¸ª</li>
<li>æ‰¾åˆ°æ¯”æŸä¸ªæ•°å°çš„æœ€å¤§å€¼</li>
<li>æ‰¾åˆ°æ¯”æŸä¸ªæ•°å¤§çš„æœ€å°å€¼</li>
</ol>
<p>Treap å¯ä»¥è®© BST å°½é‡éšæœºï¼Œä½¿å¾—å…¶æœŸæœ›é«˜åº¦ä¸º logn</p>
<p>èŠ‚ç‚¹ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> l, r;</span><br><span class="line">	<span class="type">int</span> key, val; <span class="comment">// æ’åº</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>key ä»£è¡¨ BST ä¸­æ’åºçš„å…³é”®å­—ï¼Œè€Œ val ä¸º<strong>å¤§æ ¹å †</strong>ä¸­æ’åºçš„å…³é”®å­—ï¼Œé‚£ä¹ˆå‡å¦‚æ‰€æœ‰èŠ‚ç‚¹çš„è¿™ä¸¤ä¸ªå€¼éƒ½äº’ä¸ç›¸åŒï¼Œé‚£ä¹ˆå¯ä»¥ç¡®å®šå‡ºå”¯ä¸€çš„å¹³è¡¡æ ‘ï¼šä»ä¸Šå¾€ä¸‹é€’å½’ï¼Œæ¯å±‚å°†å­æ ‘èŠ‚ç‚¹åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œå·¦å­æ ‘ key éƒ½å°äºæ ¹èŠ‚ç‚¹ï¼Œå³å­æ ‘ key éƒ½å¤§äºæ ¹èŠ‚ç‚¹ï¼Œç„¶ååˆ†åˆ«å–ä¸¤éƒ¨åˆ†çš„ val çš„æœ€å¤§å€¼çš„èŠ‚ç‚¹ä½œä¸ºå­æ ‘çš„æ ¹ã€‚</p>
<p>val æ˜¯ä¸€ä¸ªéšæœºå€¼ã€‚</p>
<p>ä¸€èˆ¬åˆå§‹åŒ–å¯ä»¥ä¸ºç©ºï¼Œä½†ä¸ºäº†é˜²æ­¢è¶Šç•Œï¼Œå¯ä»¥å®‰æ’ä¸¤ä¸ªå“¨å…µï¼Œä¸€ä¸ªä¸ºè´Ÿæ— ç©·ä½œä¸ºæ ¹èŠ‚ç‚¹ï¼Œä¸€ä¸ªä¸ºæ­£æ— ç©·ä½œä¸ºæ ¹çš„å³å­æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä¿è¯ä»å³å„¿å­çš„å·¦å­æ ‘ä¸­æœç´¢ä¸€å®šæ˜¯åœ¨è¾¹ç•ŒèŒƒå›´å†…çš„ã€‚</p>
<p>å¹³è¡¡æ ‘ä¸€ä¸ªç‚¹åªä¼šå¯¹åº”ä¸€ä¸ªæ•°ï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦ä¸º $O(n)$ã€‚</p>
<h3 id="æ’å…¥"><a href="#æ’å…¥" class="headerlink" title="æ’å…¥"></a>æ’å…¥</h3><p>é€’å½’æ’å…¥ï¼Œå¹¶ç»™è¿™ä¸ªèŠ‚ç‚¹èµ‹å€¼ä¸€ä¸ª valï¼Œç„¶åç±»ä¼¼å †æ›´æ–°ä¸€ä¸‹ç»“æ„ã€‚</p>
<h3 id="æ—‹è½¬"><a href="#æ—‹è½¬" class="headerlink" title="æ—‹è½¬"></a>æ—‹è½¬</h3><ul>
<li>å³æ—‹ï¼ˆzigï¼‰ï¼š</li>
</ul>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202310051735460.webp"
                      alt="image.png"
                ></p>
<ul>
<li>å·¦æ—‹ï¼ˆzagï¼‰ï¼š</li>
</ul>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202310051737122.webp"
                      alt="image.png"
                ></p>
<blockquote>
<p>å¹³è¡¡æ ‘çš„æ—‹è½¬ï¼šå³æ—‹æ‹å·¦å³æŒ‚å·¦ï¼Œå·¦æ—‹æ‹å³å·¦æŒ‚å³ã€‚</p>
</blockquote>
<p>æ€§è´¨ï¼š</p>
<p>æ—‹è½¬å®Œåä¸ä¼šæ”¹å˜å¹³è¡¡æ ‘çš„ä¸­åºéå†ã€‚</p>
<p>å·¦æ—‹æ˜¯äº¤æ¢ä¸€ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å’Œå®ƒå³å„¿å­çš„çˆ¶å­å…³ç³»ï¼Œä¹Ÿå°±æ˜¯ç›¸å½“äºæŠŠå³å„¿å­ç»™å·¦æ—‹åˆ°äº†çˆ¶äº²çš„ä½ç½®ï¼ŒåŒæ—¶è¦ç»´æŠ¤ä¸­åºä¸å˜ã€‚</p>
<p>å³æ—‹åŒç†ã€‚</p>
<p>æ—‹è½¬éœ€è¦ç‰¹åˆ¤ï¼Œå“ªä¸ªå¤§æ—‹è½¬å“ªä¸ªä¸Šå»ã€‚</p>
<p><a class="link"   href="https://www.acwing.com/problem/content/255/" >AcWing235<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e6</span> + <span class="number">7</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> INF = <span class="number">1e8</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> l, r;</span><br><span class="line">    <span class="type">int</span> key, val;</span><br><span class="line">    <span class="type">int</span> cnt, siz; <span class="comment">// è¿™ä¸ªæ•°æœ‰å‡ ä¸ªï¼Œsizè¡¨ç¤ºå­æ ‘å¤§å°</span></span><br><span class="line">&#125;tr[N];</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> root, idx;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get_node</span><span class="params">(<span class="type">int</span> key)</span> <span class="comment">// åˆ›å»ºèŠ‚ç‚¹</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    tr[++idx].key = key;</span><br><span class="line">    tr[idx].val = <span class="built_in">rand</span>();</span><br><span class="line">    tr[idx].cnt = tr[idx].siz = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> idx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pushup</span><span class="params">(<span class="type">int</span> p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    tr[p].siz = tr[tr[p].l].siz + tr[tr[p].r].siz + tr[p].cnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">get_node</span>(-INF), <span class="built_in">get_node</span>(INF);</span><br><span class="line">    root = <span class="number">1</span>, tr[<span class="number">1</span>].r = <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">pushup</span>(root);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">zig</span><span class="params">(<span class="type">int</span> &amp;p)</span> <span class="comment">// å³æ—‹</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> q = tr[p].l;</span><br><span class="line">    tr[p].l = tr[q].r;</span><br><span class="line">    tr[q].r = p;</span><br><span class="line">    p = q; <span class="comment">// äº¤æ¢ç¼–å·</span></span><br><span class="line">    <span class="built_in">pushup</span>(tr[p].r);</span><br><span class="line">    <span class="built_in">pushup</span>(p);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">zag</span><span class="params">(<span class="type">int</span> &amp;p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> q = tr[p].r;</span><br><span class="line">    tr[p].r = tr[q].l;</span><br><span class="line">    tr[q].l = p;</span><br><span class="line">    p = q;</span><br><span class="line">    <span class="built_in">pushup</span>(tr[p].l);</span><br><span class="line">    <span class="built_in">pushup</span>(p);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(<span class="type">int</span> &amp;p, <span class="type">int</span> key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!p) p = <span class="built_in">get_node</span>(key);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(tr[p].key == key) tr[p].cnt++;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(tr[p].key &gt; key)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">insert</span>(tr[p].l, key);</span><br><span class="line">        <span class="keyword">if</span>(tr[tr[p].l].val &gt; tr[p].val) <span class="built_in">zig</span>(p);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">insert</span>(tr[p].r, key);</span><br><span class="line">        <span class="keyword">if</span>(tr[tr[p].r].val &gt; tr[p].val) <span class="built_in">zag</span>(p);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">pushup</span>(p);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">remove</span><span class="params">(<span class="type">int</span> &amp;p, <span class="type">int</span> key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!p) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(tr[p].key == key)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(tr[p].cnt &gt; <span class="number">1</span>) tr[p].cnt--;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(tr[p].l || tr[p].r)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(!tr[p].r || tr[tr[p].l].val &gt; tr[tr[p].r].val)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">zig</span>(p);</span><br><span class="line">                <span class="built_in">remove</span>(tr[p].r, key);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">zag</span>(p);</span><br><span class="line">                <span class="built_in">remove</span>(tr[p].l, key);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> p = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(tr[p].key &gt; key) <span class="built_in">remove</span>(tr[p].l, key);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">remove</span>(tr[p].r, key);</span><br><span class="line">    <span class="built_in">pushup</span>(p);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get_rank_by_key</span><span class="params">(<span class="type">int</span> &amp;p, <span class="type">int</span> key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!p) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(tr[p].key == key) <span class="keyword">return</span> tr[tr[p].l].siz + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(tr[p].key &gt; key) <span class="keyword">return</span> <span class="built_in">get_rank_by_key</span>(tr[p].l, key);</span><br><span class="line">    <span class="keyword">return</span> tr[tr[p].l].siz + tr[p].cnt + <span class="built_in">get_rank_by_key</span>(tr[p].r, key);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get_key_by_rank</span><span class="params">(<span class="type">int</span> &amp;p, <span class="type">int</span> rank)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!p) <span class="keyword">return</span> INF;</span><br><span class="line">    <span class="keyword">if</span>(tr[tr[p].l].siz &gt;= rank) <span class="keyword">return</span> <span class="built_in">get_key_by_rank</span>(tr[p].l, rank);</span><br><span class="line">    <span class="keyword">if</span>(tr[tr[p].l].siz + tr[p].cnt &gt;= rank) <span class="keyword">return</span> tr[p].key;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">get_key_by_rank</span>(tr[p].r, rank - tr[tr[p].l].siz - tr[p].cnt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get_prev</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!p) <span class="keyword">return</span> -INF;</span><br><span class="line">    <span class="keyword">if</span>(tr[p].key &gt;= key) <span class="keyword">return</span> <span class="built_in">get_prev</span>(tr[p].l, key);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">max</span>(tr[p].key, <span class="built_in">get_prev</span>(tr[p].r, key));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get_next</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!p) <span class="keyword">return</span> INF;</span><br><span class="line">    <span class="keyword">if</span>(tr[p].key &lt;= key) <span class="keyword">return</span> <span class="built_in">get_next</span>(tr[p].r, key);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">min</span>(tr[p].key, <span class="built_in">get_next</span>(tr[p].l, key));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">build</span>();</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">while</span>(n--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> op, x;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;op, &amp;x);</span><br><span class="line">        <span class="keyword">if</span>(op == <span class="number">1</span>) <span class="built_in">insert</span>(root, x);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(op == <span class="number">2</span>) <span class="built_in">remove</span>(root, x);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(op == <span class="number">3</span>) <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">get_rank_by_key</span>(root, x) - <span class="number">1</span>); <span class="comment">// å“¨å…µ</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(op == <span class="number">4</span>) <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">get_key_by_rank</span>(root, x + <span class="number">1</span>));</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(op == <span class="number">5</span>) <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">get_prev</span>(root, x));</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(op == <span class="number">6</span>) <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">get_next</span>(root, x));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ???</span></span><br><span class="line"><span class="comment">#include&lt;iostream&gt;</span></span><br><span class="line"><span class="comment">#include&lt;cstdio&gt;</span></span><br><span class="line"><span class="comment">#include&lt;algorithm&gt;</span></span><br><span class="line"><span class="comment">#include&lt;cstring&gt;</span></span><br><span class="line"><span class="comment">#include&lt;cmath&gt;</span></span><br><span class="line"><span class="comment">#include&lt;vector&gt;</span></span><br><span class="line"><span class="comment">using namespace std;</span></span><br><span class="line"><span class="comment">vector&lt;int&gt; a;</span></span><br><span class="line"><span class="comment">int qread()&#123;</span></span><br><span class="line"><span class="comment">    int fx=0; </span></span><br><span class="line"><span class="comment">    char ch=getchar();</span></span><br><span class="line"><span class="comment">    while(ch&lt;&#x27;0&#x27; || ch&gt;&#x27;9&#x27;) ch=getchar();</span></span><br><span class="line"><span class="comment">    while(ch&gt;=&#x27;0&#x27; &amp;&amp; ch&lt;=&#x27;9&#x27;)&#123;</span></span><br><span class="line"><span class="comment">        fx=fx*10+ch-&#x27;0&#x27;;</span></span><br><span class="line"><span class="comment">        ch=getchar();</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    return fx;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">int main()</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">    int n,opt,x;</span></span><br><span class="line"><span class="comment">    scanf(&quot;%d&quot;,&amp;n);</span></span><br><span class="line"><span class="comment">    a.reserve(100005);</span></span><br><span class="line"><span class="comment">    while(n--)</span></span><br><span class="line"><span class="comment">    &#123;</span></span><br><span class="line"><span class="comment">        scanf(&quot;%d%d&quot;,&amp;opt,&amp;x);</span></span><br><span class="line"><span class="comment">        switch(opt)</span></span><br><span class="line"><span class="comment">        &#123;</span></span><br><span class="line"><span class="comment">            case 1:a.insert(upper_bound(a.begin(),a.end(),x),x); break;</span></span><br><span class="line"><span class="comment">            case 2:a.erase(lower_bound(a.begin(),a.end(),x)); break;</span></span><br><span class="line"><span class="comment">            case 3:cout&lt;&lt;lower_bound(a.begin(),a.end(),x)-a.begin()+1&lt;&lt;endl; break;</span></span><br><span class="line"><span class="comment">            case 4:cout&lt;&lt;a[x-1]&lt;&lt;endl; break;</span></span><br><span class="line"><span class="comment">            case 5:cout&lt;&lt;(*--lower_bound(a.begin(),a.end(),x))&lt;&lt;endl; break;</span></span><br><span class="line"><span class="comment">            case 6:cout&lt;&lt;(*upper_bound(a.begin(),a.end(),x))&lt;&lt;endl; break;</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    return 0;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></div>

<p><a class="link"   href="https://www.acwing.com/problem/content/267/" >AcWing256<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>åœ¨ä¸€å †æ•°ä¸­æ‰¾åˆ°å’ŒæŸä¸ªæ•°æœ€æ¥è¿‘çš„æ•°ã€‚</p>
<p>å¯ä»¥åˆ†æˆä¸¤ç§æƒ…å†µï¼šå‰é©±å’Œåç»§ã€‚</p>
<p>æ‰€ä»¥æ“ä½œå°±æœ‰ï¼š</p>
<ol>
<li>æ’å…¥</li>
<li>æ‰¾å‰é©±ï¼ˆ<code>lower_bound</code>ï¼‰&#x2F;åç»§ï¼ˆ<code>upper_bound--</code>ï¼‰</li>
</ol>
<p>æ‰€æœ‰ set èƒ½åšçš„å¹³è¡¡æ ‘éƒ½å¯ä»¥åšï¼Œå¹³è¡¡æ ‘å¯ä»¥å¤šç»´æŠ¤å‡ ä¸ªå€¼ï¼Œè€Œ set ä¸è¡Œã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">33300</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> INF = <span class="number">1e8</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> l, r;</span><br><span class="line">    <span class="type">int</span> key, val;</span><br><span class="line">&#125;tr[N];</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> root, idx;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get_node</span><span class="params">(<span class="type">int</span> key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    tr[++idx].key = key;</span><br><span class="line">    tr[idx].val = <span class="built_in">rand</span>();</span><br><span class="line">    <span class="keyword">return</span> idx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">get_node</span>(-INF);</span><br><span class="line">    <span class="built_in">get_node</span>(INF);</span><br><span class="line">    root = <span class="number">1</span>;</span><br><span class="line">    tr[<span class="number">1</span>].r = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">zig</span><span class="params">(<span class="type">int</span> &amp;p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> q = tr[p].l;</span><br><span class="line">    tr[p].l = tr[q].r;</span><br><span class="line">    tr[q].r = p;</span><br><span class="line">    p = q;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">zag</span><span class="params">(<span class="type">int</span> &amp;p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> q = tr[p].r;</span><br><span class="line">    tr[p].r = tr[q].l;</span><br><span class="line">    tr[q].l = p;</span><br><span class="line">    p = q;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(<span class="type">int</span> &amp;p, <span class="type">int</span> key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!p) p = <span class="built_in">get_node</span>(key);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(tr[p].key == key) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(tr[p].key &gt; key)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">insert</span>(tr[p].l, key);</span><br><span class="line">        <span class="keyword">if</span>(tr[tr[p].l].val &gt; tr[p].val) <span class="built_in">zig</span>(p);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">insert</span>(tr[p].r, key);</span><br><span class="line">        <span class="keyword">if</span>(tr[tr[p].r].val &gt; tr[p].val) <span class="built_in">zag</span>(p);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get_prev</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!p) <span class="keyword">return</span> -INF;</span><br><span class="line">    <span class="keyword">if</span>(tr[p].key &gt; key) <span class="keyword">return</span> <span class="built_in">get_prev</span>(tr[p].l, key);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">max</span>(tr[p].key, <span class="built_in">get_prev</span>(tr[p].r, key));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get_next</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!p) <span class="keyword">return</span> INF;</span><br><span class="line">    <span class="keyword">if</span>(tr[p].key &lt; key) <span class="keyword">return</span> <span class="built_in">get_next</span>(tr[p].r, key);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">min</span>(tr[p].key, <span class="built_in">get_next</span>(tr[p].l, key));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">build</span>();</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    LL res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> x;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;x);</span><br><span class="line">        <span class="keyword">if</span>(i == <span class="number">1</span>) res += x;</span><br><span class="line">        <span class="keyword">else</span> res += <span class="built_in">min</span>(x - <span class="built_in">get_prev</span>(root, x), <span class="built_in">get_next</span>(root, x) - x);</span><br><span class="line">        <span class="built_in">insert</span>(root, x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h3><p>æŠŠå¯¹åº”èŠ‚ç‚¹æ—‹è½¬åˆ°å¶å­èŠ‚ç‚¹ååˆ é™¤å³å¯ã€‚</p>
<h2 id="FHQ-Treap"><a href="#FHQ-Treap" class="headerlink" title="FHQ Treap"></a>FHQ Treap</h2><blockquote>
<p>éæ—‹è½¬ Treapï¼Œé€šè¿‡åˆ†è£‚å’Œåˆå¹¶æ¥ç»´æŠ¤ã€‚<br><a class="link"   href="https://www.luogu.com.cn/blog/85514/fhq-treap-xue-xi-bi-ji" >å‚è€ƒæ–‡ç« <i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</blockquote>
<h3 id="Split"><a href="#Split" class="headerlink" title="Split"></a>Split</h3><p>ä¸€æ—¦ä¼˜å…ˆçº§ç¡®å®šï¼Œå¹¶ä¸”ä¸€ä¸ªå•è°ƒé€’å¢çš„åºåˆ—ç¡®å®šï¼Œé‚£ä¹ˆè¿™ä¸ªåŒºé—´æ€æ ·åˆ†è£‚å’Œåˆå¹¶å¯¹è¿™é¢—æ ‘çš„ç»“æ„æ˜¯æ²¡æœ‰å½±å“çš„ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬æŠŠæ•´ä¸ªåŒºé—´åˆ†ä¸º<strong>å·¦åŒºé—´</strong>å’Œ<strong>å³åŒºé—´</strong>ï¼Œç›¸å½“äºåˆ‡äº†ä¸€åˆ€ã€‚</p>
<p>ä¸€å¼€å§‹å…ˆåˆ›å»ºä¸¤ä¸ªè™šæ‹Ÿç‚¹ï¼Œç„¶åä»åŸäºŒå‰æœç´¢æ ‘ä¸­çš„æ ¹èŠ‚ç‚¹å¼€å§‹éå†ï¼Œå‡å¦‚å½“å‰èŠ‚ç‚¹çš„ $val_{now}$ å°äºç­‰äºåˆ’åˆ†çš„è¾¹ç•Œçš„ $val$ï¼Œé‚£ä¹ˆå½“å‰èŠ‚ç‚¹ä»¥åŠå®ƒçš„å­æ ‘éƒ½åº”è¯¥å±äºå·¦åŒºé—´ï¼Œæ­¤æ—¶åº”è¯¥å°†å·¦åŒºé—´çš„è™šæ‹Ÿç‚¹çš„æŒ‡é’ˆæŒ‡å‘å½“å‰èŠ‚ç‚¹ï¼Œè™šæ‹ŸèŠ‚ç‚¹ç”±è™šå˜å®ï¼Œç„¶åä»¥å½“å‰èŠ‚ç‚¹çš„å³å„¿å­ä¸ºä¸‹ä¸€ä¸ªè™šæ‹Ÿç‚¹ç»§ç»­é€’å½’ï¼Œå› ä¸º $\le val_{now}$ çš„éƒ½å·²ç»åœ¨å·¦åŒºé—´äº†ï¼Œæˆ‘ä»¬è¿˜è¦æ‰¾çš„æ˜¯ $val_{now} &lt; x\le val$ çš„èŠ‚ç‚¹ã€‚</p>
<p>å‡å¦‚å½“å‰èŠ‚ç‚¹çš„ $val_{now}$ å¤§äºåˆ’åˆ†çš„è¾¹ç•Œ $val$ çš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±åº”è¯¥æŠŠå½“å‰èŠ‚ç‚¹ä»¥åŠå®ƒçš„å³å­æ ‘ç»™åˆ’åˆ†åˆ°å³åŒºé—´ä¸­ï¼Œå¹¶å°†è™šæ‹Ÿç‚¹çš„æŒ‡é’ˆæŒ‡å‘å½“å‰èŠ‚ç‚¹ï¼ŒæŠŠå½“å‰èŠ‚ç‚¹çš„å·¦å„¿å­å˜ä¸ºä¸‹ä¸€ä¸ªè™šæ‹Ÿç‚¹ç»§ç»­é€’å½’ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">split</span><span class="params">(<span class="type">int</span> now, <span class="type">int</span> k, <span class="type">int</span> &amp;x, <span class="type">int</span> &amp;y)</span> <span class="comment">// x y ä»£è¡¨çš„æ˜¯å½“å‰é€’å½’çš„æ˜¯å·¦åŒºé—´è¿˜æ˜¯å³åŒºé—´çš„èŠ‚ç‚¹</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!now)</span><br><span class="line">    &#123;</span><br><span class="line">        x = y = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(tr[now].val &lt;= k)</span><br><span class="line">    &#123;</span><br><span class="line">        x = now;</span><br><span class="line">        <span class="built_in">split</span>(tr[now].r, k, tr[now].r, y); <span class="comment">// å·¦åŒºé—´çš„å½“å‰ç‚¹çš„å³å„¿å­</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        y = now;</span><br><span class="line">        <span class="built_in">split</span>(tr[now].l, k, x, tr[now].l); <span class="comment">// å³åŒºé—´çš„å½“å‰ç‚¹çš„å·¦å„¿å­</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">pushup</span>(now);</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"><span class="built_in">split</span>(root, q, x, y); <span class="comment">// åˆ†è£‚å x å¾—åˆ°çš„å°±æ˜¯å·¦åŒºé—´çš„æ ¹èŠ‚ç‚¹ï¼Œy å°±æ˜¯å³åŒºé—´çš„æ ¹èŠ‚ç‚¹ã€‚</span></span><br></pre></td></tr></table></figure></div>



<h3 id="Merge"><a href="#Merge" class="headerlink" title="Merge"></a>Merge</h3><h2 id="Splay"><a href="#Splay" class="headerlink" title="Splay"></a>Splay</h2><h2 id="å…¶å®ƒ"><a href="#å…¶å®ƒ" class="headerlink" title="å…¶å®ƒ"></a>å…¶å®ƒ</h2><ul>
<li>STL map</li>
<li>çº¢é»‘æ ‘ï¼ˆå·¨éº»çƒ¦ï¼‰</li>
<li>SBT</li>
<li>AVL</li>
</ul>
<h1 id="å¯æŒä¹…åŒ–"><a href="#å¯æŒä¹…åŒ–" class="headerlink" title="å¯æŒä¹…åŒ–"></a>å¯æŒä¹…åŒ–</h1><blockquote>
<p>æ•°æ®ç»“æ„å¯ä»¥è¿›è¡Œå¯æŒä¹…åŒ–çš„å‰ææ˜¯æœ¬èº«çš„æ‹“æ‰‘ç»“æ„ä¸å˜ï¼Œå˜çš„åªæ˜¯é‡Œé¢çš„æ•°æ®ã€‚</p>
</blockquote>
<p>æ¯”å¦‚ï¼šçº¿æ®µæ ‘ã€æ ‘çŠ¶æ•°ç»„ã€Trie æ ‘ã€å †ã€å¹¶æŸ¥é›†ã€‚</p>
<p>å¯ä»¥æŠŠæ‰€æœ‰çš„ä¿®æ”¹çš„å†å²ç‰ˆæœ¬è®°å½•ä¸‹æ¥ã€‚</p>
<p>å¦‚æœå…¨éƒ¨å¤‡ä»½çš„è¯ï¼Œé‚£ä¹ˆæ¶ˆè€—ä¼šéå¸¸çš„å¤§ã€‚</p>
<p>åªéœ€è¦è®°å½•æ¯ä¸€ä¸ªç‰ˆæœ¬ç›¸å¯¹äºå‰ä¸€ä¸ªç‰ˆæœ¬å˜åŒ–çš„åœ°æ–¹ã€‚</p>
<p>æ¯”å¦‚çº¿æ®µæ ‘ï¼Œæ¯æ¬¡æ“ä½œæœ€å¤šéœ€è¦è®°å½• log çº§åˆ«çš„èŠ‚ç‚¹ï¼ŒæŠŠå¤æ‚åº¦ä»å¹³æ–¹å˜æˆ logã€‚</p>
<h2 id="å­—ç¬¦ä¸²-å¯æŒä¹…åŒ–-Trie-æ ‘-å¯æŒä¹…åŒ–-Trie-æ ‘"><a href="#å­—ç¬¦ä¸²-å¯æŒä¹…åŒ–-Trie-æ ‘-å¯æŒä¹…åŒ–-Trie-æ ‘" class="headerlink" title="[[å­—ç¬¦ä¸²#å¯æŒä¹…åŒ– Trie æ ‘|å¯æŒä¹…åŒ– Trie æ ‘]]"></a>[[å­—ç¬¦ä¸²#å¯æŒä¹…åŒ– Trie æ ‘|å¯æŒä¹…åŒ– Trie æ ‘]]</h2><h2 id="æ•°æ®ç»“æ„-å¯æŒä¹…åŒ–çº¿æ®µæ ‘-å¯æŒä¹…åŒ–çº¿æ®µæ ‘"><a href="#æ•°æ®ç»“æ„-å¯æŒä¹…åŒ–çº¿æ®µæ ‘-å¯æŒä¹…åŒ–çº¿æ®µæ ‘" class="headerlink" title="[[æ•°æ®ç»“æ„#å¯æŒä¹…åŒ–çº¿æ®µæ ‘|å¯æŒä¹…åŒ–çº¿æ®µæ ‘]]"></a>[[æ•°æ®ç»“æ„#å¯æŒä¹…åŒ–çº¿æ®µæ ‘|å¯æŒä¹…åŒ–çº¿æ®µæ ‘]]</h2><h1 id="æ ‘é“¾å‰–åˆ†"><a href="#æ ‘é“¾å‰–åˆ†" class="headerlink" title="æ ‘é“¾å‰–åˆ†"></a>æ ‘é“¾å‰–åˆ†</h1><p>å¯ä»¥é€šè¿‡ç»™æ ‘ä¸­çš„ç‚¹ç¼–å·ï¼Œä½¿å¾—å¯ä»¥å°†ä¹¦ä¸­ä»»æ„ä¸€æ¡è·¯å¾„å˜æˆé“¾çš„åºåˆ—é‡Œ $logn$ æ®µè¿ç»­çš„åŒºé—´ã€‚</p>
<p>å°±å¯ä»¥æŠŠæ ‘ä¸Šé—®é¢˜è½¬åŒ–ä¸ºåŒºé—´é—®é¢˜ã€‚</p>
<p>è½¬æ¢ä¸ºåŒºé—´åï¼Œç”¨æ•°æ®ç»“æ„å°±å¯ä»¥ç»´æŠ¤äº†ã€‚</p>
<ol>
<li>é‡å„¿å­&#x2F;è½»å„¿å­ï¼ˆå¶å­èŠ‚ç‚¹æ²¡æœ‰ï¼‰ï¼Œé‡å„¿å­ä¸ºå­æ ‘å¤§å°æœ€å¤§çš„å„¿å­ï¼Œè‹¥å¤šä¸ªéƒ½æ˜¯æœ€å¤§ï¼Œé‚£ä¹ˆå°±ä»»é€‰ä¸€ä¸ªï¼Œå…¶å®ƒéƒ½æ˜¯è½»å„¿å­ã€‚</li>
</ol>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202310101616428.webp"
                      alt="image.png|300"
                ></p>
<ol start="2">
<li>é‡&#x2F;è½»è¾¹ï¼šé‡å„¿å­å’Œå®ƒçˆ¶äº²ä¹‹é—´çš„è¾¹å«åšé‡è¾¹ï¼Œå…¶ä½™çš„å«åšè½»è¾¹ã€‚</li>
<li>é‡&#x2F;è½»é“¾ï¼šé‡è¾¹ç»„æˆé‡é“¾ï¼Œè½å•çš„èŠ‚ç‚¹ä¹Ÿå«åšé‡é“¾ï¼Œé‡å„¿å­æ‰€åœ¨çš„é‡é“¾ä¸ºå®ƒçˆ¶äº²æ‰€åœ¨çš„é‡é“¾ï¼Œè½»å„¿å­æ‰€åœ¨çš„é‡é“¾ä¸ºå®ƒé‡å„¿å­æ‰€åœ¨çš„é‡é“¾ã€‚</li>
</ol>
<p>æŒ‰ç…§ DFS åºï¼ˆ<strong>ä¼˜å…ˆéå†é‡å„¿å­</strong>ï¼Œè¿™æ ·é‡é“¾çš„ç¼–å·éƒ½æ˜¯è¿ç»­çš„ï¼Œé¡ºä¾¿æ±‚ä¸€ä¸‹å­æ ‘å¤§å°ï¼‰æŠŠæ•´ä¸ªæ ‘å˜æˆä¸€ä¸ªåŒºé—´ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202310101622754.webp"
                      alt="image.png|300"
                ></p>
<p>å®šç†ï¼šæ ‘ä¸­ä»»æ„ä¸€æ¡è·¯å¾„å‡å¯æ‹†åˆ†æˆ $O(logn)$ æ¡é‡é“¾ï¼ˆå³è¿ç»­åŒºé—´ï¼‰ã€‚</p>
<p>æ ‡è®°ä¸€ä¸‹æ¯ä¸ªç‚¹æ‰€åœ¨é‡é“¾çš„é¡¶ç‚¹å³å¯ã€‚</p>
<p>é‚£ä¹ˆå¦‚ä½•æŠŠè·¯å¾„ç”¨åŒºé—´è¡¨ç¤ºå‘¢ï¼Ÿ</p>
<p>å¯ä»¥ç”¨ç±»ä¼¼æœ€è¿‘å…¬å…±ç¥–å…ˆçš„æ–¹æ³•ï¼Œæ¯æ¬¡å–æ·±åº¦è¾ƒæ·±çš„é‡é“¾ï¼Œè®©å®ƒå‘ä¸Šèµ°ï¼Œç›´åˆ°èµ°åˆ°åŒä¸€æ¡é‡é“¾ï¼ˆæœ€è¿‘å…¬å…±ç¥–å…ˆæ‰€åœ¨çš„é‡é“¾ï¼‰ï¼Œè¿™æ ·å°±å¯ä»¥åˆ†ä¸º $logn$ æ¡é“¾ï¼ˆä¹Ÿå°±æ˜¯åŒºé—´ï¼‰ï¼Œè¿™æ ·å°±å¯ä»¥å¯¹åŒºé—´è¿›è¡Œæ“ä½œï¼Œæ€»å¤æ‚åº¦åœ¨ $log^2n$ çš„çº§åˆ«å†…ã€‚</p>
<p>å¹¶ä¸”å¯ä»¥æ³¨æ„åˆ°é‡é“¾çš„é¡¶ç‚¹ä¸€å®šæ˜¯æŸä¸€ä¸ªè½»å„¿å­ã€‚</p>
<p><a class="link"   href="https://www.acwing.com/problem/content/2570/" >A2568<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<ol>
<li>åŒºé—´ä¿®æ”¹</li>
<li>åŒºé—´ä¿®æ”¹ï¼ˆå› ä¸ºå­æ ‘é‡Œçš„ç‚¹ DFS ç¼–å·æ˜¯è¿ç»­çš„ï¼‰</li>
<li>åŒºé—´æŸ¥è¯¢</li>
<li>åŒºé—´æŸ¥è¯¢</li>
</ol>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">7</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> M = N &lt;&lt; <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> nxt, to;</span><br><span class="line">&#125;e[M];</span><br><span class="line"><span class="type">int</span> fir[N];</span><br><span class="line"><span class="type">int</span> w[N];</span><br><span class="line"><span class="type">int</span> id[N], nw[N], cnt, idx;</span><br><span class="line"><span class="type">int</span> dep[N], sz[N], top[N], fa[N], son[N]; <span class="comment">// æ·±åº¦ï¼Œå­æ ‘å¤§å°ï¼Œé‡é“¾é¡¶ç‚¹ï¼Œçˆ¶èŠ‚ç‚¹ï¼Œå„¿å­èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> l, r;</span><br><span class="line">    LL sum, add;</span><br><span class="line">&#125;tr[N &lt;&lt; <span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++idx].nxt = fir[u];</span><br><span class="line">    e[idx].to = v;</span><br><span class="line">    fir[u] = idx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pushup</span><span class="params">(<span class="type">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    tr[u].sum = tr[u &lt;&lt; <span class="number">1</span>].sum + tr[u &lt;&lt; <span class="number">1</span> | <span class="number">1</span>].sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pushdown</span><span class="params">(<span class="type">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Node &amp;root = tr[u], &amp;left = tr[u &lt;&lt; <span class="number">1</span>], &amp;righ = tr[u &lt;&lt; <span class="number">1</span> | <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">if</span>(root.add)</span><br><span class="line">    &#123;</span><br><span class="line">        left.add += root.add;</span><br><span class="line">        righ.add += root.add;</span><br><span class="line">        left.sum += (left.r - left.l + <span class="number">1</span>) * root.add;</span><br><span class="line">        righ.sum += (righ.r - righ.l + <span class="number">1</span>) * root.add;</span><br><span class="line">        root.add = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> l, <span class="type">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    tr[u].l = l, tr[u].r = r;</span><br><span class="line">    <span class="keyword">if</span>(l == r)</span><br><span class="line">    &#123;</span><br><span class="line">        tr[u].sum = nw[r];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">build</span>(u &lt;&lt; <span class="number">1</span>, l, mid);</span><br><span class="line">    <span class="built_in">build</span>(u &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, mid + <span class="number">1</span>, r);</span><br><span class="line">    <span class="built_in">pushup</span>(u);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l &lt;= tr[u].l &amp;&amp; tr[u].r &lt;= r)</span><br><span class="line">    &#123;</span><br><span class="line">        tr[u].add += k;</span><br><span class="line">        tr[u].sum += k * (tr[u].r - tr[u].l + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">pushdown</span>(u);</span><br><span class="line">    <span class="type">int</span> mid = (tr[u].l + tr[u].r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(l &lt;= mid) <span class="built_in">update</span>(u &lt;&lt; <span class="number">1</span>, l, r, k);</span><br><span class="line">    <span class="keyword">if</span>(r &gt; mid) <span class="built_in">update</span>(u &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, l, r, k);</span><br><span class="line">    <span class="built_in">pushup</span>(u);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">query</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> l, <span class="type">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l &lt;= tr[u].l &amp;&amp; tr[u].r &lt;= r) <span class="keyword">return</span> tr[u].sum;</span><br><span class="line">    <span class="built_in">pushdown</span>(u);</span><br><span class="line">    <span class="type">int</span> mid = (tr[u].l + tr[u].r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    LL res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(l &lt;= mid) res += <span class="built_in">query</span>(u &lt;&lt; <span class="number">1</span>, l, r);</span><br><span class="line">    <span class="keyword">if</span>(r &gt; mid) res += <span class="built_in">query</span>(u &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, l, r);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs1</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> fath, <span class="type">int</span> depth)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    dep[u] = depth, fa[u] = fath;</span><br><span class="line">    sz[u] = <span class="number">1</span>; <span class="comment">// important</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = fir[u]; i; i = e[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> v = e[i].to;</span><br><span class="line">        <span class="keyword">if</span>(v == fath) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="built_in">dfs1</span>(v, u, depth + <span class="number">1</span>);</span><br><span class="line">        sz[u] += sz[v];</span><br><span class="line">        <span class="keyword">if</span>(sz[son[u]] &lt; sz[v]) son[u] = v;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs2</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    id[u] = ++cnt;</span><br><span class="line">    nw[cnt] = w[u]; <span class="comment">// æ–¹ä¾¿çº¿æ®µæ ‘çš„ç»´æŠ¤</span></span><br><span class="line">    top[u] = t;</span><br><span class="line">    <span class="keyword">if</span>(!son[u]) <span class="keyword">return</span>;</span><br><span class="line">    <span class="built_in">dfs2</span>(son[u], t);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = fir[u]; i; i = e[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> v = e[i].to;</span><br><span class="line">        <span class="keyword">if</span>(v == fa[u] || v == son[u]) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="built_in">dfs2</span>(v, v);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">update_path</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> v, <span class="type">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(top[u] != top[v]) <span class="comment">// ä¸åœ¨åŒä¸€æ¡é‡é“¾é‡Œ</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(dep[top[u]] &lt; dep[top[v]]) <span class="built_in">swap</span>(u, v); <span class="comment">// ä¿è¯ u æ‰€åœ¨é‡é“¾è¾ƒæ·±</span></span><br><span class="line">        <span class="built_in">update</span>(<span class="number">1</span>, id[top[u]], id[u], k);</span><br><span class="line">        u = fa[top[u]];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(dep[u] &lt; dep[v]) <span class="built_in">swap</span>(u, v); <span class="comment">// u æ·±åº¦æ›´å¤§</span></span><br><span class="line">    <span class="built_in">update</span>(<span class="number">1</span>, id[v], id[u], k); <span class="comment">// åœ¨åŒä¸€æ¡é‡é“¾é‡Œ</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">query_path</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    LL res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(top[u] != top[v])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(dep[top[u]] &lt; dep[top[v]]) <span class="built_in">swap</span>(u, v);</span><br><span class="line">        res += <span class="built_in">query</span>(<span class="number">1</span>, id[top[u]], id[u]);</span><br><span class="line">        u = fa[top[u]];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(dep[u] &lt; dep[v]) <span class="built_in">swap</span>(u, v);</span><br><span class="line">    res += <span class="built_in">query</span>(<span class="number">1</span>, id[v], id[u]);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">update_tree</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">update</span>(<span class="number">1</span>, id[u], id[u] + sz[u] - <span class="number">1</span>, k); <span class="comment">// å­æ ‘æ˜¯ä¸€æ®µè¿ç»­çš„åŒºé—´</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">query_tree</span><span class="params">(<span class="type">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">query</span>(<span class="number">1</span>, id[u], id[u] + sz[u] - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;w[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> a, b;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;a, &amp;b);</span><br><span class="line">        <span class="built_in">add</span>(a, b);</span><br><span class="line">        <span class="built_in">add</span>(b, a);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">dfs1</span>(<span class="number">1</span>, <span class="number">-1</span>, <span class="number">1</span>); <span class="comment">// ç‚¹çš„ç¼–å· çˆ¶èŠ‚ç‚¹ æ·±åº¦</span></span><br><span class="line">    <span class="built_in">dfs2</span>(<span class="number">1</span>, <span class="number">1</span>); <span class="comment">// å½“å‰ç‚¹ é‡é“¾çš„é¡¶ç‚¹ </span></span><br><span class="line">    <span class="built_in">build</span>(<span class="number">1</span>, <span class="number">1</span>, n);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;m);</span><br><span class="line">    <span class="keyword">while</span>(m--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> t, u, v, k;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;t, &amp;u);</span><br><span class="line">        <span class="keyword">switch</span>(t)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;v, &amp;k);</span><br><span class="line">                <span class="built_in">update_path</span>(u, v, k);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;k);</span><br><span class="line">                <span class="built_in">update_tree</span>(u, k);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;v);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, <span class="built_in">query_path</span>(u, v));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, <span class="built_in">query_tree</span>(u));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><a class="link"   href="https://www.acwing.com/problem/content/920/" >A918<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>A ä¾èµ– Bï¼Œæ¯ä¸ªè½¯ä»¶æœ‰ä¸”åªæœ‰ä¸€ä¸ªä¾èµ–è½¯ä»¶ï¼Œå®‰è£… A ä¹‹å‰å¿…é¡»å®‰è£… Bï¼Œå¸è½½ B ä¹‹å‰å¿…é¡»å…ˆå¸è½½ Aã€‚</p>
<p>æ¯ä¸ªç‚¹åªæœ‰ä¸¤ä¸ªçŠ¶æ€ï¼šå·²å®‰è£…&#x2F;æœªå®‰è£…ã€‚</p>
<p>æ“ä½œï¼š</p>
<ul>
<li>å®‰è£… xï¼šæŠŠæ ¹åˆ° x è·¯å¾„ä¸Šçš„æ‰€æœ‰ç‚¹å˜æˆ 1</li>
<li>å¸è½½ xï¼šæŠŠä»¥ x ä¸ºæ ¹çš„å­æ ‘å…¨éƒ¨å˜æˆ 0</li>
</ul>
<p>è¯¢é—®ï¼š</p>
<p>æ“ä½œäº†å¤šå°‘ä¸ªèŠ‚ç‚¹ï¼Œç»´æŠ¤ä¸€ä¸‹æ€»çš„åŒºé—´å’Œï¼Œä½œå·®å³å¯ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m, cnt, idx;</span><br><span class="line"><span class="type">int</span> fir[N];</span><br><span class="line"><span class="type">int</span> dep[N], sz[N], top[N], fa[N], son[N], id[N];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> nxt, to;</span><br><span class="line">&#125;e[N];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> l, r;</span><br><span class="line">    <span class="comment">// -1:ÃÃÂ²Ã™Ã—Ã· 0:Â°Ã‘Â½ÃšÂµÃ£Ã‹Ã¹Ã“ÃÃ–ÂµÂ±Ã¤Â³Ã‰0 1:Â°Ã‘Â½ÃšÂµÃ£Ã‹Ã¹Ã“ÃÃ–ÂµÂ±Ã¤ÃÂª1</span></span><br><span class="line">    <span class="type">int</span> add, sum;</span><br><span class="line">&#125;tr[N &lt;&lt; <span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++cnt].nxt = fir[u];</span><br><span class="line">    e[cnt].to = v;</span><br><span class="line">    fir[u] = cnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs1</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> depth)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    dep[u] = depth, sz[u] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = fir[u]; i; i = e[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> v = e[i].to;</span><br><span class="line">        <span class="built_in">dfs1</span>(v, depth + <span class="number">1</span>);</span><br><span class="line">        sz[u] += sz[v];</span><br><span class="line">        <span class="keyword">if</span>(sz[son[u]] &lt; sz[v]) son[u] = v;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs2</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    id[u] = ++idx;</span><br><span class="line">    top[u] = t;</span><br><span class="line">    <span class="keyword">if</span>(!son[u]) <span class="keyword">return</span>;</span><br><span class="line">    <span class="built_in">dfs2</span>(son[u], t);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = fir[u]; i; i = e[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> v = e[i].to;</span><br><span class="line">        <span class="keyword">if</span>(v == son[u]) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="built_in">dfs2</span>(v, v);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pushup</span><span class="params">(<span class="type">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    tr[u].sum = tr[u &lt;&lt; <span class="number">1</span>].sum + tr[u &lt;&lt; <span class="number">1</span> | <span class="number">1</span>].sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pushdown</span><span class="params">(<span class="type">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Node &amp;root = tr[u], &amp;left = tr[u &lt;&lt; <span class="number">1</span>], &amp;righ = tr[u &lt;&lt; <span class="number">1</span> | <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">if</span>(root.add != <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        left.add = righ.add = root.add;</span><br><span class="line">        left.sum = (left.r - left.l + <span class="number">1</span>) * root.add;</span><br><span class="line">        righ.sum = (righ.r - righ.l + <span class="number">1</span>) * root.add;</span><br><span class="line">        root.add = <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> l, <span class="type">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    tr[u].l = l, tr[u].r = r, tr[u].add = <span class="number">-1</span>, tr[u].sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(l == r) <span class="keyword">return</span>;</span><br><span class="line">    <span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">build</span>(u &lt;&lt; <span class="number">1</span>, l, mid), <span class="built_in">build</span>(u &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, mid + <span class="number">1</span>, r);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l &lt;= tr[u].l &amp;&amp; tr[u].r &lt;= r)</span><br><span class="line">    &#123;</span><br><span class="line">        tr[u].add = k;</span><br><span class="line">        tr[u].sum = k * (tr[u].r - tr[u].l + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">pushdown</span>(u);</span><br><span class="line">    <span class="type">int</span> mid = (tr[u].l + tr[u].r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(l &lt;= mid) <span class="built_in">update</span>(u &lt;&lt; <span class="number">1</span>, l, r, k);</span><br><span class="line">    <span class="keyword">if</span>(r &gt; mid) <span class="built_in">update</span>(u &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, l, r, k);</span><br><span class="line">    <span class="built_in">pushup</span>(u);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">update_path</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> v, <span class="type">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(top[u] != top[v])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(dep[top[u]] &lt; dep[top[v]]) <span class="built_in">swap</span>(u, v);</span><br><span class="line">        <span class="built_in">update</span>(<span class="number">1</span>, id[top[u]], id[u], k);</span><br><span class="line">        u = fa[top[u]];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(dep[u] &lt; dep[v]) <span class="built_in">swap</span>(u, v);</span><br><span class="line">    <span class="built_in">update</span>(<span class="number">1</span>, id[v], id[u], k);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">update_tree</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">update</span>(<span class="number">1</span>, id[u], id[u] + sz[u] - <span class="number">1</span>, k);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> p;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;p);</span><br><span class="line">        p++;</span><br><span class="line">        <span class="built_in">add</span>(p, i);</span><br><span class="line">        fa[i] = p;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">dfs1</span>(<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">dfs2</span>(<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">build</span>(<span class="number">1</span>, <span class="number">1</span>, n);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;m);</span><br><span class="line">    <span class="type">int</span> u;</span><br><span class="line">    <span class="type">char</span> op[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">while</span>(m--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s%d&quot;</span>, op, &amp;u);</span><br><span class="line">        u++;</span><br><span class="line">        <span class="keyword">if</span>(!<span class="built_in">strcmp</span>(op, <span class="string">&quot;install&quot;</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> t = tr[<span class="number">1</span>].sum;</span><br><span class="line">            <span class="built_in">update_path</span>(<span class="number">1</span>, u, <span class="number">1</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, tr[<span class="number">1</span>].sum - t);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> t = tr[<span class="number">1</span>].sum;</span><br><span class="line">            <span class="built_in">update_tree</span>(u, <span class="number">0</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, t - tr[<span class="number">1</span>].sum);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">g</span><br></pre></td></tr></table></figure></div>]]></content>
      <categories>
        <category>ACM</category>
      </categories>
  </entry>
  <entry>
    <title>æ˜“é”™&amp;é—®é¢˜</title>
    <url>/d00d621a.html</url>
    <content><![CDATA[<h1 id="ä¸çŸ¥é“æ”¾å“ªé‡Œçš„çŸ¥è¯†ç‚¹"><a href="#ä¸çŸ¥é“æ”¾å“ªé‡Œçš„çŸ¥è¯†ç‚¹" class="headerlink" title="ä¸çŸ¥é“æ”¾å“ªé‡Œçš„çŸ¥è¯†ç‚¹"></a>ä¸çŸ¥é“æ”¾å“ªé‡Œçš„çŸ¥è¯†ç‚¹</h1><blockquote>
<p><font color=#3198C7 size=5>ä¸€ä¸ªéš¾å¿˜çš„å¤œæ™šã€‚</font></p>
</blockquote>
<ol>
<li><code>getchar()</code>è‹¥åœ¨è¯»å…¥æ—¶ä½¿ç”¨ï¼Œåœ¨ä¹‹å‰å’Œä¹‹åä¸€å®šè¦æŠŠå¤šä½™çš„ç©ºæ ¼æ¢è¡Œç¬¦ç”¨<strong>while</strong>è¯»å–å®Œï¼Œå› ä¸ºä½ ä¸çŸ¥é“<strong>å¯çˆ±çš„å‡ºé¢˜äºº</strong>ä¼šåœ¨æ•°æ®é‡Œç»™ä½ å¡ä¸€å †ä½ çœ‹ä¸è§çš„å¥‡å¥‡æ€ªæ€ªçš„ç¬¦å·ï¼</li>
<li>ç±»ä¼¼äºå…«çš‡åé—®é¢˜ï¼Œå¦‚æœç½‘æ ¼å›¾ä¸­åªèµ°å¯¹è§’çº¿çš„è¯ï¼Œå¦‚æœæ˜¯å·¦ä¸‹å¯¹è§’çº¿ï¼Œé‚£ä¹ˆæ¨ªçºµåæ ‡ä¹‹å’Œä¸å˜ï¼Œå¦‚æœæ˜¯å³ä¸‹å¯¹è§’çº¿ï¼Œé‚£ä¹ˆæ¨ªçºµåæ ‡ä¹‹å·®ä¸å˜ï¼Œæ‰©å±•å‡ºå»ï¼Œå…¶å®å°±æ˜¯å¥‡å¶æ€§ä¸å˜ï¼Œå¦‚æœè¦æ ‡è®°çš„è¯ï¼Œä½œå·®è¦è®°å¾—åŠ ä¸Š $n$ æ”¾ç½®è´Ÿæ•°ä¸‹æ ‡ã€‚</li>
<li><code>\</code>åœ¨<code>cpp</code>ä¸­å±äºè½¬ä¹‰å­—ç¬¦ï¼Œè‹¥è¦ä½¿ç”¨éœ€è¦è¿™ä¹ˆå†™ï¼š<code>\\</code>ã€‚</li>
<li>æ— å‘å›¾ä¸è¦è¢«é¢˜ç›®$m$çš„èŒƒå›´æ‰€è¿·æƒ‘ï¼Œå› ä¸ºæ˜¯å»ºåŒå‘è¾¹ï¼Œå› æ­¤è¦å¼€ä¸¤å€ç©ºé—´ï¼</li>
<li>Tarjanæ±‚å‰²è¾¹çš„æ—¶å€™ä¸èƒ½åœ¨è¾“å…¥æ—¶ç¡®å®šçˆ¶å­å…³ç³»ï¼Œå› ä¸ºä¼šå¯¼è‡´ä¸€ä¸ªç‚¹å“ªä¹Ÿå–ä¸äº†ï¼ˆéƒ½æ˜¯å®ƒçš„çˆ¶äº²æ€ä¹ˆèµ°ï¼‰ï¼Œæ‰€ä»¥è¦åœ¨éå†çš„æ—¶å€™å†æ ‡è®°å®ƒåœ¨æ ‘ä¸ŠçœŸæ­£çš„çˆ¶äº²ã€‚</li>
<li>å¯¹äºå–æ¨¡çš„é—®é¢˜ï¼Œä¸€å®šè¦æ—¶æ—¶åˆ»åˆ»æƒ³ç€å–æ¨¡ï¼Œ<strong>åŠ æ³•è¦å–æ¨¡ï¼Œä¹˜æ³•è¦å–æ¨¡</strong>ï¼</li>
<li>å¦‚æœä½ åœ¨è®¡ç®—æ—¶æ²¡æœ‰åŠ å…¥<code>1ll*</code>çš„è¯ï¼Œé‚£ä¹ˆä½ çš„å‡½æ•°ä¼ å‚å°±è¦æ˜¯<code>long long</code>ï¼Œä¾‹å¦‚<code>void eval(node &amp;t,ll add,ll mul)</code></li>
<li>å€å¢æ±‚LCA<strong>ä¸€å®š</strong>è¦è®°å¾—æŠŠé›¶å·èŠ‚ç‚¹çš„æ·±åº¦åˆå§‹åŒ–ä¸º-1ï¼Œé˜²æ­¢è·³åˆ°0å·èŠ‚ç‚¹ï¼Œå› ä¸ºä¸å­˜åœ¨çš„<strong>é›¶å·èŠ‚ç‚¹çš„æ·±åº¦å’Œæ ¹èŠ‚ç‚¹æ·±åº¦ä¸€æ ·ï¼Œé»˜è®¤éƒ½æ˜¯é›¶</strong>ï¼Œæˆ–è€…å…¶å®ƒçš„è§£å†³åŠæ³•å°±æ˜¯æŠŠæ ¹èŠ‚ç‚¹æ·±åº¦ä»1å¼€å§‹ç®—ã€‚</li>
<li>MLEæƒ³æƒ³æœ‰æ²¡æœ‰å¯èƒ½æ˜¯é€’å½’çˆ†æ ˆã€‚</li>
<li>æœ€é•¿ä¸ä¸Šå‡è¿ç»­å­åºåˆ—çš„æ•°é‡ç­‰äºè¯¥åºåˆ—æœ€é•¿ä¸Šå‡å­åºåˆ—çš„é•¿åº¦ã€‚</li>
<li>æ ‘çŠ¶æ•°ç»„å’Œçº¿æ®µæ ‘æŸ¥è¯¢æœ€é•¿ä¸Šå‡å­åºåˆ—æ—¶åˆå§‹è¿”å›å˜é‡è¦è®¾æˆ0ï¼ï¼ï¼é¿å…è¿›å…¥ä¸äº†å¾ªç¯è€Œè¿”å›-1ï¼Œæˆ–è€…åˆ¤æ–­ä¸è®©0è¿›å…¥æŸ¥è¯¢ã€‚</li>
<li>æ»šåŠ¨æ•°ç»„ä¼˜åŒ–æ¯æ¬¡æ›´æ–°ä¹‹å‰è®°å¾—æŠŠå½“å‰è¿™ç»´<code>memset</code>ä¸ºåˆå§‹å€¼ï¼</li>
<li>ä¸ä¸€å®šæ˜¯å·¦è¾¹æ‰“ä¸åˆ°å³è¾¹å³è¾¹å°±ä¸€å®šæ‰“ä¸åˆ°å·¦è¾¹ï¼Œæ³¨æ„åŒå‘åˆ¤æ–­ã€‚</li>
<li>æ ‘å½¢DPæ—¶è¦å…ˆåˆå¹¶ä¸¤å­æ ‘ä¿¡æ¯å†åˆå¹¶ä¸¤å­æ ‘å¤§å°ï¼Œé˜²æ­¢æšä¸¾è¿‡é‡ã€‚</li>
<li>é¢„å¤„ç†æ¬¡å¹‚çš„æ—¶å€™ä¸€å®šä¸è¦å¿˜è®°<strong>é›¶æ¬¡å¹‚</strong>ï¼ï¼ï¼ï¼</li>
<li><code>long long</code> ä¸‹è¿›è¡Œ <code>memset</code> æ­¤æ—¶çš„ <code>0x3f</code> ä¸å†æ˜¯ <code>0x3f3f3f3f</code>ï¼Œè€Œæ˜¯ <code>0x3f3f3f3f3f3f3f3f</code>ã€‚</li>
<li>éé€’å½’å¿«é€Ÿå¹‚çš„ä¸´æ—¶å˜é‡ä¸€å®šè¦å¼€ <code>long long</code></li>
<li>é€’æ¨é€†å…ƒæ—¶ï¼Œç”¨å¤šå°‘å°±é¢„å¤„ç†å¤šå°‘ï¼Œä¸ç„¶ä¼šå¯¼è‡´å¤§äº $p$ çš„éƒ¨åˆ†é˜¶ä¹˜çš„é€†å…ƒå…¨éƒ½ä¸º 0ï¼Œç„¶åå€’ç€å¾€å‰æ¨çš„æ—¶å€™å¯¼è‡´æ‰€æœ‰é˜¶ä¹˜çš„é€†å…ƒéƒ½ä¸º 0ï¼Œå¯¼è‡´æ±‚å‡ºçš„ç­”æ¡ˆä¹Ÿå…¨æ˜¯ 0.</li>
<li><strong>æ•°ç»„ç±»å‹</strong>ä¸€å®šä¸è¦å†™é”™ï¼ï¼ï¼ï¼ï¼ï¼ä¸ºæ­¤ï¼¤ï¼¥ï¼¢ï¼µï¼§ äº†ä¸€å°æ—¶ã€‚</li>
<li>æ±‚ gcd çš„å‡½æ•°è¿”å›å€¼ä¸€å®šä¸è¦å¿˜äº†å‡½æ•°åï¼Œå·²ç»é”™äº†ä¸¤æ¬¡äº†ã€‚</li>
<li>SB UVA æœ‰ç€æå…¶ä¸¥æ ¼çš„æ ¼å¼è¦æ±‚ï¼Œä¸è¦è¢«å¡æ ¼å¼äº†å“¦~</li>
<li>æ¨¡äºŒæ„ä¹‰ä¸‹çš„åŠ æ³•ç›¸å½“äºå¼‚æˆ–ã€‚</li>
<li>ä½¿ç”¨ <code>if</code> æ—¶ï¼Œcpu ä¼šåœ¨ç©ºé—²æ—¶é—´è¿›è¡Œåˆ†æ”¯é¢„æµ‹ï¼Œæå‰é¢„å¤„ç†éƒ¨åˆ†æŒ‡ä»¤ï¼Œå½“ç»“æœä¸º <code>false</code> æ—¶ï¼Œé¢„å¤„ç†ç»“æœä½œåºŸæ¸…é™¤ï¼Œåè€Œä¼šé™ä½æ•ˆç‡ï¼Œæ‰€ä»¥ <code>if(q[i + 1] != q[i] + 1) tot++;</code> ä¼šæ¯” <code>tot += (q[i + 1] != q[i] + 1);</code> è¦æ…¢ï¼Œå°¤å…¶æ˜¯åœ¨æ•°é‡çº§è¾ƒå¤§çš„æ—¶å€™ï¼ˆæ¯”å¦‚æœç´¢ï¼‰å½±å“å¾ˆå¤§ï¼Œå€¼å¾—æ³¨æ„ã€‚</li>
<li>å†™æ ‘çš„æ—¶å€™å°½é‡ä¸è¦ç”¨å•ç‚¹ä¿®æ”¹æ¥å»ºæ ‘ï¼Œæœ€å¥½æœ‰ä¸€ä¸ªå»ºæ ‘çš„å‡½æ•°ï¼Œå¦åˆ™å¯èƒ½å†™å¯æŒä¹…åŒ–çš„æ—¶å€™ä¼šå¯„æ‰ã€‚</li>
<li>æ¯”èµ›æ—¶ï¼Œç©ºé—´å¤æ‚åº¦ä¸€å¾‹ä¸º O(èƒ½å¼€å¤šå¤§å¼€å¤šå¤§)</li>
<li>ä¸è¦æŠŠå¯èƒ½ç”¨åˆ°çš„å˜é‡å½“ä½œ <code>while</code> çš„ç»ˆæ­¢æ¡ä»¶ï¼Œæ¯”å¦‚ <code>while(n--)</code>ï¼Œå› ä¸ºåé¢å¯èƒ½ä¼šç”¨åˆ°è¿™äº›å˜é‡ã€‚</li>
<li>å¯¹äº<a class="link"   href="https://www.luogu.com.cn/discuss/705534" >çº¿æ®µæ ‘çš„åŒºé—´åŠ æ³•<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>ï¼šä¿®æ”¹å¶å­èŠ‚ç‚¹ä¹‹å‰ä¸€å®šè¦ä¸‹ä¼ æ ‡è®°ï¼Œè¿™æ ·ä¿è¯äº†å¶å­èŠ‚ç‚¹çš„ä¿¡æ¯å§‹ç»ˆæ˜¯æ­£ç¡®çš„ï¼Œè¿™æ ·å†æ¬¡ä¿®æ”¹å®Œå¶å­èŠ‚ç‚¹åä¸Šä¼ å¾—åˆ°çš„æ ¹èŠ‚ç‚¹çš„ä¿¡æ¯ä¹Ÿæ˜¯æ­£ç¡®çš„ï¼Œå¦åˆ™æ ¹èŠ‚ç‚¹å°±ä¼šä¸Šä¼ æ—¶è¢«è¦†ç›–ä¸ºé”™è¯¯çš„ä¿¡æ¯ã€‚</li>
<li><a class="link"   href="https://www.luogu.com.cn/discuss/706148" >çº¿æ®µæ ‘åŒºé—´è¦†ç›–æœ€å¤§å€¼é—®é¢˜<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
<li>æ ‘é“¾å‰–åˆ†æ³¨æ„è€ƒè™‘é‡è¾¹ä»¥åŠè‡ªç¯ï¼Œä»¥åŠä½ åŠ çš„è™šæ‹Ÿæºç‚¹ï¼Œä¼šå½±å“æ•°æ®ç»“æ„çš„å³ç•Œã€‚</li>
<li><code>lower_bound</code> è¿”å›çš„æ˜¯å¤§äºç­‰äºæŸæ•°çš„æœ€å°çš„ä¸‹æ ‡ï¼Œé‚£ä¹ˆ <code>lower_bound - 1</code> å°±æ˜¯å°äºæŸæ•°çš„æœ€å¤§ä¸‹æ ‡ï¼›åŒç†ï¼Œ<code>upper_bound</code> è¿”å›çš„æ˜¯å¤§äºæŸæ•°çš„æœ€å°çš„ä¸‹æ ‡ï¼Œé‚£ä¹ˆ <code>upper_bound - 1</code> å°±æ˜¯å°äºç­‰äºæŸæ•°çš„æœ€å¤§çš„ä¸‹æ ‡ã€‚</li>
<li><code>while(x--)</code> åï¼Œ<code>x</code> çš„å€¼ä¸º -1ï¼Œå…ˆåˆ¤æ–­ä¸º 0 é€€å‡ºå¾ªç¯ï¼Œç„¶åå†æ‰§è¡Œ <code>--</code>ã€‚</li>
<li><del>æ•°ä½</del> å„ç§ DP ä¸€å®šä¸è¦å¿˜äº†åˆå§‹åŒ– <code>f</code> æ•°ç»„ä¸º -1.</li>
<li><code>0b</code> å‰ç¼€è¡¨ç¤ºäºŒè¿›åˆ¶ï¼Œ<code>0x</code> å‰ç¼€è¡¨ç¤ºåå…­è¿›åˆ¶ã€‚</li>
<li><code>string</code> ä¸è¦ç”¨ <code>&#39;L&#39; + s</code> æ‹¼æ¥ï¼Œè¿™æ ·å¤æ‚åº¦æ˜¯ $O(n)$ çš„ï¼Œå¦‚æœè¦åœ¨å‰é¢æ’å…¥ï¼Œå¯ä»¥ç”¨ <code>s += &#39;L&#39;</code>ï¼Œç„¶å <code>reverse</code> ä¸€ä¸‹ã€‚</li>
<li>æœ‰ç¬¦å·å˜é‡æº¢å‡ºå±äºæœªå®šä¹‰è¡Œä¸ºï¼Œè€Œæ— ç¬¦å·å˜é‡æº¢å‡ºä¸å±äºï¼Œå®ƒè‡ªç„¶æº¢å‡ºç›¸å½“äºå¯¹ä¸Šç•Œå–æ¨¡ã€‚</li>
<li>ä¸è¦ä½¿ç”¨ <code>lock</code> å½“å˜é‡åã€‚</li>
</ol>
<h1 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h1><ol>
<li>01BFS ä¸ºä»€ä¹ˆå¯ä»¥ä¼˜åŒ–å¤æ‚åº¦å•Šã€‚ æ²¡æœ‰è¿™ç§è¯´æ³•ï¼Œ01BFSæ˜¯åªæœ‰è¾¹æƒ0å’Œ1çš„æƒ…å†µä¸‹å¯¹å †çš„ä¸€ä¸ªä¼˜åŒ–ï¼ŒåŒç«¯é˜Ÿåˆ—ä¼˜åŒ–SPFAå±äºæ˜¯ç„å­¦ä¼˜åŒ–ï¼Œä»»ä½•SPFAéƒ½å¯ä»¥è¢«å¡æˆ$O(nm)$ã€‚</li>
<li>SPFA ä»€ä¹ˆæƒ…å†µä¸‹ä¸€ä¸ªç‚¹ä¼šè¿›é˜Ÿä¸¤æ¬¡ï¼Œå‡ºç°äº†ç¯å—ï¼Ÿä¸ªäººè®¤ä¸ºè‡³å°‘æœ‰å¼±è¿é€šç¯ï¼Œæ¯”å¦‚ä¸€ä¸ªç‚¹å…ˆè¢«ä¸€æ¡çŸ­ç‚¹çš„è·¯å¾„éå†åˆ°äº†ï¼Œç„¶ååˆè¢«ä¸€æ¡é•¿ä¸€ç‚¹çš„è·¯å¾„éå†åˆ°äº†ï¼Œè¿™æ ·å°±æ›´æ–°äº†ä¸¤æ¬¡ã€‚</li>
<li>Tarjanä»€ä¹ˆæ—¶å€™è¦åˆ¤æ–­è‡ªç¯å’Œé‡è¾¹å•Šã€‚</li>
<li>ä¸ºä»€ä¹ˆçº¿æ€§ç­›æ³•æ—¶æŸä¸ªæ•°ä¸€å®šæ˜¯è¢«å®ƒæœ€å°çš„è´¨å› å­ç­›æ‰çš„ã€‚</li>
<li>é€šè¿‡ <code>search: #Q</code> çœ‹ä¸€äº›é—®é¢˜ã€‚</li>
</ol>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202309012216670.webp"
                     
                ></p>
]]></content>
      <categories>
        <category>ACM</category>
      </categories>
      <tags>
        <tag>Q&amp;A</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¿å­æ±‡æ€»</title>
    <url>/61811bf3.html</url>
    <content><![CDATA[<blockquote>
<p>ä¹±åºï¼Œæƒ³åˆ°ä»€ä¹ˆå¯ä»¥è¡¥å……ã€‚</p>
</blockquote>
<h1 id="Tarjan-æ±‚å¼ºè¿é€šåˆ†é‡"><a href="#Tarjan-æ±‚å¼ºè¿é€šåˆ†é‡" class="headerlink" title="Tarjan æ±‚å¼ºè¿é€šåˆ†é‡"></a>Tarjan æ±‚å¼ºè¿é€šåˆ†é‡</h1><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e5</span><span class="number">+7</span>;</span><br><span class="line">stack&lt;<span class="type">int</span>&gt; s;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; g[N];</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; g_2[N];</span><br><span class="line"><span class="comment">//csccä»£è¡¨å¼ºè¿é€šåˆ†é‡çš„æ•°é‡ï¼Œsccä»£è¡¨æ¯ä¸ªç‚¹æ‰€å±çš„å¼ºè¿é€šåˆ†é‡çš„ç¼–å·ï¼Œinsä»£è¡¨æ˜¯å¦åœ¨æ ˆä¸­</span></span><br><span class="line"><span class="type">int</span> dfsn[N],low[N],ins[N],scc[N],deep,cscc,n;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">tarjan</span><span class="params">(<span class="type">int</span> p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    low[p]=dfsn[p]=++deep;</span><br><span class="line">    ins[p]=<span class="number">1</span>;</span><br><span class="line">    s.<span class="built_in">push</span>(p);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;q:g[p])<span class="comment">//éå†å‡ºè¾¹</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(!dfsn[q])<span class="comment">//æœªè®¿é—®</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">tarjan</span>(q);</span><br><span class="line">            low[p]=<span class="built_in">min</span>(low[p],low[q]);</span><br><span class="line">        &#125;<span class="comment">//è®¿é—®è¿‡ä¸”qå¯è¾¾pï¼Œå› ä¸ºæ ˆä¸­å…ƒç´ å¼ºè¿é€š</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(ins[q]) low[p]=<span class="built_in">min</span>(low[p],dfsn[q]);<span class="comment">//æ³¨æ„è¿™é‡Œä¸ºä»€ä¹ˆæ˜¯dfsn[q]è€Œä¸æ˜¯low[q]</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(low[p]==dfsn[p])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> top=<span class="number">0</span>;</span><br><span class="line">        cscc++;</span><br><span class="line">        <span class="keyword">while</span>(top!=p)</span><br><span class="line">        &#123;</span><br><span class="line">            top=s.<span class="built_in">top</span>();</span><br><span class="line">            s.<span class="built_in">pop</span>();</span><br><span class="line">            ins[top]=<span class="number">0</span>;</span><br><span class="line">            scc[top]=cscc;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="comment">//åŸå›¾ä¸ä¸€å®šæ˜¯å¼ºè¿é€šå›¾ï¼Œå› æ­¤æ¯ä¸ªèŠ‚ç‚¹éƒ½è¦çœ‹ä¸€é</span></span><br><span class="line">        <span class="keyword">if</span>(!dfsn[i])<span class="comment">//æœªè®¿é—®è¿‡</span></span><br><span class="line">            <span class="built_in">tarjan</span>(i);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> j:g[i])<span class="comment">//ä»¥iä¸ºèµ·ç‚¹çš„å‡ºè¾¹</span></span><br><span class="line">            <span class="keyword">if</span>(scc[i]!=scc[j])<span class="comment">//å¦‚æœä¸æ˜¯ä¸€ä¸ªå¼ºè¿é€šåˆ†é‡ï¼Œé‚£å°±å¯ä»¥æŠŠä¸¤ä¸ªå¼ºè¿é€šåˆ†é‡å½“ä½œä¸¤ä¸ªç‚¹è¿æ¥èµ·æ¥</span></span><br><span class="line">                g_2[scc[i]].<span class="built_in">push_back</span>(scc[j]);<span class="comment">//jæ˜¯içš„å‡ºè¾¹ï¼Œå³jçš„å¼ºè¿é€šåˆ†é‡æ˜¯içš„å¼ºè¿é€šåˆ†é‡çš„å‡ºè¾¹</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="ç¼©ç‚¹"><a href="#ç¼©ç‚¹" class="headerlink" title="ç¼©ç‚¹"></a>ç¼©ç‚¹</h2><p><a class="link"   href="https://www.luogu.com.cn/problem/P3387" >P3387 ã€æ¨¡æ¿ã€‘ç¼©ç‚¹<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e4</span> + <span class="number">7</span>, M = <span class="number">1e5</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m, cscc, depth, ans;</span><br><span class="line"><span class="type">int</span> dfsn[N], low[N], scc[N], w[N], rd[N], dist[N], val[N];</span><br><span class="line"><span class="type">bool</span> ins[N];</span><br><span class="line">stack&lt;<span class="type">int</span>&gt; s;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; g[N];</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; G[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">tarjan</span><span class="params">(<span class="type">int</span> p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    low[p] = dfsn[p] = ++depth;</span><br><span class="line">    ins[p] = <span class="literal">true</span>;</span><br><span class="line">    s.<span class="built_in">push</span>(p);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;q : g[p])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (!dfsn[q])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">tarjan</span>(q);</span><br><span class="line">            low[p] = <span class="built_in">min</span>(low[p], low[q]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (ins[q]) low[p] = <span class="built_in">min</span>(low[p], dfsn[q]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (dfsn[p] == low[p])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> top = <span class="number">0</span>;</span><br><span class="line">        cscc++;</span><br><span class="line">        <span class="keyword">while</span> (top != p)</span><br><span class="line">        &#123;</span><br><span class="line">            top = s.<span class="built_in">top</span>();</span><br><span class="line">            s.<span class="built_in">pop</span>();</span><br><span class="line">            val[cscc] += w[top];</span><br><span class="line">            scc[top] = cscc;</span><br><span class="line">            ins[top] = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">topsort</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    queue&lt;<span class="type">int</span>&gt; q;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= cscc; i++)</span><br><span class="line">        <span class="keyword">if</span> (!rd[i])</span><br><span class="line">        &#123;</span><br><span class="line">            q.<span class="built_in">push</span>(i);</span><br><span class="line">            dist[i] = val[i];</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">while</span> (!q.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> u = q.<span class="built_in">front</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> &amp; v : G[u])</span><br><span class="line">        &#123;</span><br><span class="line">            dist[v] = <span class="built_in">max</span>(dist[v], dist[u] + val[v]);</span><br><span class="line">            rd[v]--;</span><br><span class="line">            <span class="keyword">if</span> (!rd[v]) q.<span class="built_in">push</span>(v);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= cscc; i++)</span><br><span class="line">        ans = <span class="built_in">max</span>(ans, dist[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;w[i]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> u, v;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;u, &amp;v);</span><br><span class="line">        g[u].<span class="built_in">emplace_back</span>(v);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">if</span> (!dfsn[i])</span><br><span class="line">            <span class="built_in">tarjan</span>(i);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;j : g[i])</span><br><span class="line">            <span class="keyword">if</span> (scc[i] != scc[j])</span><br><span class="line">            &#123;</span><br><span class="line">                G[scc[i]].<span class="built_in">emplace_back</span>(scc[j]);</span><br><span class="line">                rd[scc[j]]++;</span><br><span class="line">            &#125;</span><br><span class="line">    <span class="built_in">topsort</span>();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="Tarjan-æ±‚å‰²ç‚¹-å‰²è¾¹"><a href="#Tarjan-æ±‚å‰²ç‚¹-å‰²è¾¹" class="headerlink" title="Tarjan æ±‚å‰²ç‚¹&#x2F;å‰²è¾¹"></a>Tarjan æ±‚å‰²ç‚¹&#x2F;å‰²è¾¹</h1><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e6</span><span class="number">+7</span>;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; e[N];</span><br><span class="line"><span class="type">int</span> dfsn[N],low[N],fa[N];</span><br><span class="line"><span class="type">int</span> cnt;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; point;</span><br><span class="line"><span class="comment">/*å‰²ç‚¹*/</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">tarjan</span><span class="params">(<span class="type">int</span> p,<span class="type">bool</span> root=<span class="literal">true</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> tot=<span class="number">0</span>;</span><br><span class="line">    low[p]=dfsn[p]=++cnt;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;q:e[p])<span class="comment">//æšä¸¾pçš„å‡ºè¾¹</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(!dfsn[q])<span class="comment">//è¿™ä¸ªç‚¹æ²¡è®¿é—®è¿‡</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">tarjan</span>(q,<span class="literal">false</span>);<span class="comment">//é€’å½’ï¼Œå¹¶ä¸”è¿™ä¸ªç‚¹ä¸æ˜¯æ ¹</span></span><br><span class="line">            low[p]=<span class="built_in">min</span>(low[p],low[q]);<span class="comment">//æ›´æ–°çˆ¶èŠ‚ç‚¹çš„lowå€¼</span></span><br><span class="line">            tot+=(low[q]&gt;=dfsn[p]);<span class="comment">//å­èŠ‚ç‚¹çš„lowå€¼æ¯”çˆ¶èŠ‚ç‚¹çš„dfsåºè¿˜è¦å¤§ï¼Œé‚£å°±æŠŠéœ€è¦pçš„å­æ ‘ä¸ªæ•°åŠ ä¸€</span></span><br><span class="line">            <span class="comment">//éœ€è¦pçš„å­æ ‘æ˜¯æŒ‡åˆ å»påå­æ ‘æ— æ³•ä¸å¤–ç•Œè”ç³»</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span><span class="comment">//è®¿é—®è¿‡ï¼Œé‚£å°±å¯¹lowå€¼å–min</span></span><br><span class="line">        &#123;</span><br><span class="line">            low[p]=<span class="built_in">min</span>(low[p],dfsn[q]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(tot&gt;root)<span class="comment">//æ˜¯æ ¹é‚£å°±è¦å¤§äº1ï¼Œå¦åˆ™å°±è¦å¤§äº0</span></span><br><span class="line">        point.<span class="built_in">push_back</span>(p);</span><br><span class="line">&#125;</span><br><span class="line">vector&lt;pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; &gt; bridges;</span><br><span class="line"><span class="comment">/*å‰²è¾¹*/</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">tarjan_0</span><span class="params">(<span class="type">int</span> p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    low[p]=dfsn[p]=++cnt;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;q:e[p])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(!dfsn[q])</span><br><span class="line">        &#123;</span><br><span class="line">            fa[q]=p;</span><br><span class="line">            <span class="built_in">tarjan_0</span>(q);</span><br><span class="line">            low[p]=<span class="built_in">min</span>(low[p],low[q]);</span><br><span class="line">            <span class="keyword">if</span>(low[q]&gt;dfsn[p]) bridges.<span class="built_in">emplace_back</span>(p,q);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(fa[p]!=q) low[p]=<span class="built_in">min</span>(low[p],dfsn[q]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n,m;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="Tarjan-æ±‚ç‚¹åŒè¿é€šåˆ†é‡"><a href="#Tarjan-æ±‚ç‚¹åŒè¿é€šåˆ†é‡" class="headerlink" title="Tarjan æ±‚ç‚¹åŒè¿é€šåˆ†é‡"></a>Tarjan æ±‚ç‚¹åŒè¿é€šåˆ†é‡</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">5e5</span><span class="number">+100</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> M=<span class="number">2e6</span><span class="number">+100</span>;</span><br><span class="line"><span class="type">int</span> n,m,edcnt,cnt,cdcc;</span><br><span class="line"><span class="type">int</span> fir[N],low[N],dfsn[N];</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; dcc[N];</span><br><span class="line">stack&lt;<span class="type">int</span>&gt; s;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; point;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> to,nxt;</span><br><span class="line">&#125;e[M&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++edcnt].to=v;</span><br><span class="line">    e[edcnt].nxt=fir[u];</span><br><span class="line">    fir[u]=edcnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">tarjan</span><span class="params">(<span class="type">int</span> p,<span class="type">bool</span> root=<span class="literal">true</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> tot=<span class="number">0</span>;</span><br><span class="line">    dfsn[p]=low[p]=++cnt;</span><br><span class="line">    s.<span class="built_in">push</span>(p);</span><br><span class="line">    <span class="keyword">if</span>(root&amp;&amp;fir[p]==<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        dcc[++cdcc].<span class="built_in">push_back</span>(p);<span class="comment">//å­¤ç«‹ç‚¹</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=fir[p];i;i=e[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> v=e[i].to;</span><br><span class="line">        <span class="keyword">if</span>(!dfsn[v])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">tarjan</span>(v,<span class="literal">false</span>);</span><br><span class="line">            low[p]=<span class="built_in">min</span>(low[v],low[p]);</span><br><span class="line">            <span class="keyword">if</span>(low[v]&gt;=dfsn[p])</span><br><span class="line">            &#123;</span><br><span class="line">                tot++;</span><br><span class="line">                <span class="keyword">if</span>(tot&gt;root) point.<span class="built_in">push_back</span>(p);</span><br><span class="line">                cdcc++;</span><br><span class="line">                <span class="type">int</span> top;</span><br><span class="line">                <span class="keyword">do</span></span><br><span class="line">                &#123;</span><br><span class="line">                    top=s.<span class="built_in">top</span>();</span><br><span class="line">                    s.<span class="built_in">pop</span>();</span><br><span class="line">                    dcc[cdcc].<span class="built_in">push_back</span>(top);</span><br><span class="line">                &#125; <span class="keyword">while</span> (top!=v);</span><br><span class="line">                dcc[cdcc].<span class="built_in">push_back</span>(p);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> low[p]=<span class="built_in">min</span>(low[p],dfsn[v]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> u,v;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;u,&amp;v);</span><br><span class="line">        <span class="keyword">if</span>(u==v) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="built_in">add</span>(u,v);</span><br><span class="line">        <span class="built_in">add</span>(v,u);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">if</span>(!dfsn[i]) <span class="built_in">tarjan</span>(i);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,cdcc);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=cdcc;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,(<span class="type">int</span>)dcc[i].<span class="built_in">size</span>());</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;j:dcc[i])</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot; %d&quot;</span>,j);</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="Tarjan-æ±‚è¾¹åŒè¿é€šåˆ†é‡"><a href="#Tarjan-æ±‚è¾¹åŒè¿é€šåˆ†é‡" class="headerlink" title="Tarjan æ±‚è¾¹åŒè¿é€šåˆ†é‡"></a>Tarjan æ±‚è¾¹åŒè¿é€šåˆ†é‡</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">5e5</span><span class="number">+10</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> M=<span class="number">2e6</span><span class="number">+10</span>;</span><br><span class="line"><span class="type">int</span> fir[N],low[N],dfsn[N];</span><br><span class="line"><span class="type">int</span> n,m,edcnt=<span class="number">1</span>,cnt,cdcc;</span><br><span class="line"><span class="type">bool</span> bridge[M&lt;&lt;<span class="number">1</span>];</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; dcc[N];</span><br><span class="line">stack&lt;<span class="type">int</span>&gt; s;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> to,nxt;</span><br><span class="line">&#125;e[M&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++edcnt].to=v;</span><br><span class="line">    e[edcnt].nxt=fir[u];</span><br><span class="line">    fir[u]=edcnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">tarjan</span><span class="params">(<span class="type">int</span> p,<span class="type">int</span> f)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    low[p]=dfsn[p]=++cnt;</span><br><span class="line">    s.<span class="built_in">push</span>(p);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=fir[p];i;i=e[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> q=e[i].to;</span><br><span class="line">        <span class="keyword">if</span>(!dfsn[q])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">tarjan</span>(q,i);</span><br><span class="line">            low[p]=<span class="built_in">min</span>(low[p],low[q]);</span><br><span class="line">            <span class="keyword">if</span>(dfsn[p]&lt;low[q]) bridge[i]=bridge[i^<span class="number">1</span>]=<span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(i!=(f^<span class="number">1</span>)) low[p]=<span class="built_in">min</span>(low[p],dfsn[q]);<span class="comment">//ä¸æ˜¯åå‘è¾¹</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(dfsn[p]==low[p])</span><br><span class="line">    &#123;</span><br><span class="line">        cdcc++;</span><br><span class="line">        <span class="type">int</span> top;</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">        &#123;</span><br><span class="line">            top=s.<span class="built_in">top</span>();</span><br><span class="line">            s.<span class="built_in">pop</span>();</span><br><span class="line">            dcc[cdcc].<span class="built_in">push_back</span>(top);</span><br><span class="line">        &#125; <span class="keyword">while</span> (top!=p);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> u,v;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;u,&amp;v);</span><br><span class="line">        <span class="keyword">if</span>(u==v) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="built_in">add</span>(u,v);</span><br><span class="line">        <span class="built_in">add</span>(v,u);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(!dfsn[i]) <span class="built_in">tarjan</span>(i,<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,cdcc);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=cdcc;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,(<span class="type">int</span>)dcc[i].<span class="built_in">size</span>());</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;j:dcc[i])</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot; %d&quot;</span>,j);</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>å…¶ä¸­åˆ©ç”¨äº†å¼‚æˆ–çš„æ€§è´¨ï¼Œå¶æ•°åŠ ä¸€å¥‡æ•°å‡ä¸€ï¼Œä»¤åˆå§‹cntä¸º1ä½¿å¾—è¾¹çš„ç¼–å·ä»2å¼€å§‹ï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡å¼‚æˆ–1è½»æ¾çŸ¥é“åå‘è¾¹çš„ç¼–å·äº†ã€‚</p>
<h1 id="æœ€çŸ­è·¯"><a href="#æœ€çŸ­è·¯" class="headerlink" title="æœ€çŸ­è·¯"></a>æœ€çŸ­è·¯</h1><h2 id="Bellman-Ford"><a href="#Bellman-Ford" class="headerlink" title="Bellman-Ford"></a>Bellman-Ford</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 10000007</span></span><br><span class="line"><span class="type">int</span> n,dist[maxn],m,first[maxn];</span><br><span class="line"><span class="type">int</span> s[maxn],e[maxn],d[maxn];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;s[i],&amp;e[i],&amp;d[i]);<span class="comment">//èµ·ç‚¹ï¼Œç»ˆç‚¹ï¼Œé•¿åº¦</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">memset</span>(dist,<span class="number">0x3f</span>,<span class="built_in">sizeof</span>(dist));</span><br><span class="line">    dist[<span class="number">1</span>]=<span class="number">0</span>;<span class="comment">//èµ·ç‚¹è·ç¦»</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)<span class="comment">//æœ€å¤šn-1æ¡è¾¹,æœ€å¤šæ¾å¼›n-1æ¬¡ï¼Œå› ä¸ºå¦‚æœå€’ç€æ¥çš„è¯ï¼Œæ‰€æœ‰ç‚¹çš„distéƒ½æœªçŸ¥ï¼Œæ¯æ¬¡åªèƒ½æ›´æ–°ä¸€ä¸ªç‚¹ï¼ˆä¸€ç‚¹ç‚¹å¾€åæ¨ï¼‰ï¼Œå› æ­¤æ¯è½®ä¼šè‡³å°‘æ¾å¼›ä¸€ä¸ªç‚¹</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=m;j++)<span class="comment">//æšä¸¾è¾¹</span></span><br><span class="line">        &#123;</span><br><span class="line">            dist[e[j]]=<span class="built_in">min</span>(dist[e[j]],dist[s[j]]+d[j]);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="SPFA"><a href="#SPFA" class="headerlink" title="SPFA"></a>SPFA</h2><blockquote>
<p>Bellman-Fordçš„é˜Ÿåˆ—ä¼˜åŒ–</p>
</blockquote>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 1000007</span></span><br><span class="line"><span class="type">int</span> first[maxn],dist[maxn];</span><br><span class="line"><span class="type">bool</span> inque[maxn];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> e,next;</span><br><span class="line">    <span class="type">int</span> d;<span class="comment">//é•¿åº¦</span></span><br><span class="line">&#125;ed[maxn];</span><br><span class="line"><span class="type">int</span> cnt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add_edge</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v,<span class="type">int</span> w)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cnt++;</span><br><span class="line">    ed[cnt].next=first[u];</span><br><span class="line">    ed[cnt].e=v;</span><br><span class="line">    ed[cnt].d=w;</span><br><span class="line">    first[u]=cnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">spfa</span><span class="params">(<span class="type">int</span> s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(dist,<span class="number">0x3f</span>,<span class="built_in">sizeof</span>(dist));</span><br><span class="line">    dist[s]=<span class="number">0</span>;</span><br><span class="line">    inque[s]=<span class="literal">true</span>;<span class="comment">//è¿™é‡Œä¸å†™ä¹Ÿå¯ä»¥ï¼Œå› ä¸ºç¬¬ä¸€æ¬¡å–å‡ºçš„ä¸€å®šæ˜¯é¦–ç‚¹</span></span><br><span class="line">    queue&lt;<span class="type">int</span>&gt; q;</span><br><span class="line">    q.<span class="built_in">push</span>(s);<span class="comment">//ä¸€å¼€å§‹åªçŸ¥é“sçš„æœ€çŸ­è·¯</span></span><br><span class="line">    <span class="keyword">while</span>(q.<span class="built_in">size</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> now=q.<span class="built_in">front</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        inque[now]=<span class="literal">false</span>;<span class="comment">//è®°å½•å½“å‰ç‚¹åœ¨ä¸åœ¨é˜Ÿåˆ—é‡Œ</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=first[now];i;i=ed[i].next)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> e=ed[i].e;</span><br><span class="line">            <span class="type">int</span> d=dist[now]+ed[i].d;</span><br><span class="line">            <span class="keyword">if</span>(d&lt;dist[e])</span><br><span class="line">            &#123;</span><br><span class="line">                dist[e]=d;<span class="comment">//å¦‚æœeå˜çŸ­äº†ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥ç”¨å®ƒå»æ›´æ–°å…¶ä»–ç‚¹çš„æœ€çŸ­è·¯</span></span><br><span class="line">                <span class="keyword">if</span>(!inque[e])</span><br><span class="line">                &#123;</span><br><span class="line">                    inque[e]=<span class="literal">true</span>;</span><br><span class="line">                    q.<span class="built_in">push</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="åˆ¤æ–­è´Ÿç¯"><a href="#åˆ¤æ–­è´Ÿç¯" class="headerlink" title="åˆ¤æ–­è´Ÿç¯"></a>åˆ¤æ–­è´Ÿç¯</h3><blockquote>
<p>å¯ä»¥è®°å½•æ¯ä¸ªç‚¹åˆ°èµ·ç‚¹ç»è¿‡çš„è¾¹æ•°ï¼Œè¾¹æ•°ä¸è¶…è¿‡n-1ï¼›ä¹Ÿå¯ä»¥è®°å½•æ¯ä¸ªç‚¹çš„å…¥é˜Ÿæ¬¡æ•°ï¼Œè¿™ä¸ªæ¬¡æ•°ä¸èƒ½è¶…è¿‡n-1ã€‚</p>
</blockquote>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 1000007</span></span><br><span class="line"><span class="type">int</span> first[maxn],dist[maxn],times[maxn];</span><br><span class="line"><span class="type">bool</span> inque[maxn];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> e,next;</span><br><span class="line">    <span class="type">int</span> d;<span class="comment">//é•¿åº¦</span></span><br><span class="line">&#125;ed[maxn];</span><br><span class="line"><span class="type">int</span> cnt;</span><br><span class="line"><span class="type">int</span> T,n,m;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add_edge</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v,<span class="type">int</span> w)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cnt++;</span><br><span class="line">    ed[cnt].next=first[u];</span><br><span class="line">    ed[cnt].e=v;</span><br><span class="line">    ed[cnt].d=w;</span><br><span class="line">    first[u]=cnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">spfa</span><span class="params">(<span class="type">int</span> s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(times,<span class="number">0</span>,<span class="built_in">sizeof</span>(times));</span><br><span class="line">    <span class="built_in">memset</span>(inque,<span class="number">0</span>,<span class="built_in">sizeof</span>(inque));</span><br><span class="line">    <span class="built_in">memset</span>(dist,<span class="number">0x3f</span>,<span class="built_in">sizeof</span>(dist));</span><br><span class="line">    times[s]=<span class="number">1</span>;</span><br><span class="line">    dist[s]=<span class="number">0</span>;</span><br><span class="line">    queue&lt;<span class="type">int</span>&gt; q;</span><br><span class="line">    q.<span class="built_in">push</span>(s);<span class="comment">//ä¸€å¼€å§‹åªçŸ¥é“sçš„æœ€çŸ­è·¯</span></span><br><span class="line">    <span class="keyword">while</span>(q.<span class="built_in">size</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> now=q.<span class="built_in">front</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        inque[now]=<span class="literal">false</span>;<span class="comment">//è®°å½•å½“å‰ç‚¹åœ¨ä¸åœ¨é˜Ÿåˆ—é‡Œ</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=first[now];i;i=ed[i].next)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> e=ed[i].e;</span><br><span class="line">            <span class="type">int</span> d=dist[now]+ed[i].d;</span><br><span class="line">            <span class="keyword">if</span>(d&lt;dist[e])</span><br><span class="line">            &#123;</span><br><span class="line">                dist[e]=d;<span class="comment">//å¦‚æœeå˜çŸ­äº†ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥ç”¨å®ƒå»æ›´æ–°å…¶ä»–ç‚¹çš„æœ€çŸ­è·¯</span></span><br><span class="line">                <span class="keyword">if</span>(!inque[e])</span><br><span class="line">                &#123;</span><br><span class="line">                    inque[e]=<span class="literal">true</span>;</span><br><span class="line">                    q.<span class="built_in">push</span>(e);</span><br><span class="line">                    times[e]++;<span class="comment">//è®°å½•å…¥é˜Ÿæ¬¡æ•°</span></span><br><span class="line">                    <span class="keyword">if</span>(times[e]&gt;n)<span class="comment">//å› ä¸ºæœ‰0å·ç‚¹</span></span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">true</span>;<span class="comment">//å­˜åœ¨è´Ÿç¯</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;T);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=T;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=m;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> a,b,c;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;a,&amp;b,&amp;c);</span><br><span class="line">            <span class="keyword">if</span>(c&gt;=<span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">add_edge</span>(a,b,c);</span><br><span class="line">                <span class="built_in">add_edge</span>(b,a,c);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="built_in">add_edge</span>(a,b,c);</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">spfa</span>(<span class="number">1</span>))</span><br><span class="line">            cout&lt;&lt;<span class="string">&quot;YES&quot;</span>&lt;&lt;endl;</span><br><span class="line">        <span class="keyword">else</span> cout&lt;&lt;<span class="string">&quot;NO&quot;</span>&lt;&lt;endl;</span><br><span class="line">        <span class="built_in">memset</span>(first,<span class="number">0</span>,<span class="built_in">sizeof</span>(first));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="Dijkstra"><a href="#Dijkstra" class="headerlink" title="Dijkstra"></a>Dijkstra</h2><p><a class="link"   href="https://www.luogu.com.cn/problem/P4779" >P4779 ã€æ¨¡æ¿ã€‘å•æºæœ€çŸ­è·¯å¾„ï¼ˆæ ‡å‡†ç‰ˆï¼‰)<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 1000007</span></span><br><span class="line"><span class="type">int</span> dist[maxn],first[maxn];</span><br><span class="line"><span class="type">int</span> n,m,s;</span><br><span class="line"><span class="type">bool</span> righ[maxn];<span class="comment">//è¿™ä¸ªç‚¹æœ‰æ²¡æœ‰æ”¾åˆ°å³è¾¹å»</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">point</span>&#123;</span><br><span class="line">    <span class="type">int</span> p,d;<span class="comment">//åŸç‚¹åˆ°pçš„æœ€çŸ­è·ç¦»ä¸ºd</span></span><br><span class="line">    <span class="built_in">point</span>()&#123;&#125;</span><br><span class="line">    <span class="built_in">point</span>(<span class="type">int</span> a,<span class="type">int</span> b)&#123;p=a;d=b;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>&lt;(<span class="type">const</span> point &amp;a,<span class="type">const</span> point &amp;b)<span class="comment">//STLé»˜è®¤å¤§æ ¹å †ï¼Œä¸Šé¢æ˜¯å¤§çš„</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> a.d&gt;b.d;<span class="comment">//å°æ ¹å †</span></span><br><span class="line">&#125;</span><br><span class="line">priority_queue&lt;point&gt; heap;</span><br><span class="line"><span class="comment">//æ¾å¼›æ“ä½œ</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> e,next;</span><br><span class="line">    <span class="type">int</span> d;<span class="comment">//é•¿åº¦</span></span><br><span class="line">&#125;ed[maxn];</span><br><span class="line"><span class="type">int</span> cnt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add_edge</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v,<span class="type">int</span> w)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cnt++;</span><br><span class="line">    ed[cnt].next=first[u];</span><br><span class="line">    ed[cnt].e=v;</span><br><span class="line">    ed[cnt].d=w;</span><br><span class="line">    first[u]=cnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dijkstra</span><span class="params">(<span class="type">int</span> s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(dist,<span class="number">0x3f</span>,<span class="built_in">sizeof</span>(dist));<span class="comment">//å…¨éƒ¨éƒ½èµ‹å€¼ä¸ºæœ€å¤§å€¼</span></span><br><span class="line">    dist[s]=<span class="number">0</span>;<span class="comment">//såˆ°s</span></span><br><span class="line">    heap.<span class="built_in">push</span>(<span class="built_in">point</span>(s,<span class="number">0</span>));</span><br><span class="line">    <span class="comment">//å¯ä»¥æ— å˜é‡å</span></span><br><span class="line">    <span class="keyword">while</span>(!heap.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        point now=heap.<span class="built_in">top</span>();</span><br><span class="line">        heap.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">if</span>(righ[now.p]) <span class="keyword">continue</span>;<span class="comment">//åˆ¤æ–­è¦å†™åœ¨è¿™é‡Œï¼Œä¸èƒ½ç›´æ¥åˆ¤æ–­å †é¡¶ï¼Œå› ä¸ºå¯èƒ½popä¹‹åå †å°±ç©ºäº†å¯¼è‡´RE</span></span><br><span class="line">        <span class="type">int</span> p=now.p;</span><br><span class="line">        <span class="comment">// int d=now.d;//æœªåŠ å †ä¼˜åŒ–ç‰ˆï¼Œæ‰¾åˆ°ç›®å‰distæœ€å°çš„ç‚¹</span></span><br><span class="line">        <span class="comment">// int p=-1;//ä»£è¡¨è¿˜æ²¡é€‰ä»»ä½•ç‚¹</span></span><br><span class="line">        <span class="comment">// for(int j=1;j&lt;=n;j++)//å¾ªç¯åå°±æ‰¾åˆ°äº†åœ¨å·¦è¾¹æœ€çŸ­è·¯æœ€å°çš„ç‚¹</span></span><br><span class="line">        <span class="comment">// &#123;</span></span><br><span class="line">        <span class="comment">//     if(!righ[j]&amp;&amp;(p==-1||dist[p]&gt;dist[j]))//righ[]ä»£è¡¨æœ‰æ²¡æœ‰æ”¾åˆ°å³è¾¹å»</span></span><br><span class="line">        <span class="comment">//         p=j;</span></span><br><span class="line">        righ[p]=<span class="number">1</span>;<span class="comment">//æ”¾åˆ°å³è¾¹ï¼Œæšä¸¾å‡ºè¾¹</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=first[p];j; j=ed[j].next)<span class="comment">//ed[j].eå³ä¸ºpçš„ä¸‹ä¸€ä¸ªç‚¹</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> e=ed[j].e;</span><br><span class="line">            <span class="type">int</span> d=dist[p]+ed[j].d;</span><br><span class="line">            <span class="keyword">if</span>(dist[e]&gt;d)</span><br><span class="line">            &#123;</span><br><span class="line">                dist[e]=d;</span><br><span class="line">                <span class="keyword">if</span>(!righ[e]) heap.<span class="built_in">push</span>(<span class="built_in">point</span>(e,d));<span class="comment">//æ²¡è®¿é—®è¿‡å¹¶ä¸”æ¾å¼›è¿‡çš„ç‚¹</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;n,&amp;m,&amp;s);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> u,v,w;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;u,&amp;v,&amp;w);</span><br><span class="line">        <span class="built_in">add_edge</span>(u,v,w);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">dijkstra</span>(s);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(dist[i]==<span class="number">1061109567</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            cout&lt;&lt;<span class="number">2147483647</span>&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,dist[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="Floyed"><a href="#Floyed" class="headerlink" title="Floyed"></a>Floyed</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>;k&lt;=n;k++)</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">			dist[i][j]=<span class="built_in">max</span>(dist[i][j],dist[i][k]+dist[k][j]);</span><br></pre></td></tr></table></figure></div>

<h2 id="Johnson"><a href="#Johnson" class="headerlink" title="Johnson"></a>Johnson</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e4</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> M = <span class="number">6e3</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m, edcnt;</span><br><span class="line"><span class="type">int</span> h[N];</span><br><span class="line"><span class="type">int</span> s[N],t[N],d[N];</span><br><span class="line"><span class="type">int</span> fir[N];</span><br><span class="line"><span class="type">int</span> dist[N];</span><br><span class="line"><span class="type">bool</span> vis[N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> to, val, nxt;</span><br><span class="line">&#125;e[(M &lt;&lt; <span class="number">1</span>) + N];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">point</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> id,len;</span><br><span class="line">    <span class="built_in">point</span>()&#123;&#125;</span><br><span class="line">    <span class="built_in">point</span>(<span class="type">int</span> a,<span class="type">int</span> b):<span class="built_in">id</span>(a),<span class="built_in">len</span>(b)&#123;&#125;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span> &lt; (<span class="type">const</span> point &amp;x)<span class="type">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> len &gt; x.len;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Add</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> v, <span class="type">int</span> w)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++edcnt].nxt = fir[u];</span><br><span class="line">    e[edcnt].to = v;</span><br><span class="line">    e[edcnt].val = w;</span><br><span class="line">    fir[u] = edcnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Dijkstra</span><span class="params">(<span class="type">int</span> s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(dist, <span class="number">0x3f</span>, <span class="built_in">sizeof</span>(dist));</span><br><span class="line">    <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in">sizeof</span>(vis));</span><br><span class="line">    dist[s] = <span class="number">0</span>;</span><br><span class="line">    priority_queue&lt;point&gt; q;</span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>()) q.<span class="built_in">pop</span>();</span><br><span class="line">    q.<span class="built_in">push</span>(<span class="built_in">point</span>(s,<span class="number">0</span>));</span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        point now = q.<span class="built_in">top</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">if</span>(vis[now.id]) <span class="keyword">continue</span>;</span><br><span class="line">        vis[now.id] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = fir[now.id]; i; i = e[i].nxt)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> v = e[i].to;</span><br><span class="line">            <span class="type">int</span> d = dist[now.id] + e[i].val;</span><br><span class="line">            <span class="keyword">if</span>(d &lt; dist[v])</span><br><span class="line">            &#123;</span><br><span class="line">                dist[v] = d;</span><br><span class="line">                <span class="keyword">if</span>(!vis[v]) q.<span class="built_in">push</span>(<span class="built_in">point</span>(v,dist[v]));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; ++i)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;s[i],&amp;t[i],&amp;d[i]);</span><br><span class="line">    <span class="type">int</span> tot = m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        s[++tot] = <span class="number">0</span>;</span><br><span class="line">        t[tot] = i;</span><br><span class="line">        d[tot] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) <span class="comment">// å¤šåŠ äº†ä¸€ä¸ªæºç‚¹ï¼Œæ‰€ä»¥æœ€å¤šæ¾å¼› n æ¬¡</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n + m; ++j) <span class="comment">// n+mæ¡è¾¹</span></span><br><span class="line">            h[t[j]] = <span class="built_in">min</span>(h[t[j]], h[s[j]] + d[j]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n + m; ++j)</span><br><span class="line">        <span class="keyword">if</span>(h[t[j]] &gt; h[s[j]] + d[j])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;-1&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; ++i)</span><br><span class="line">        <span class="built_in">Add</span>(s[i], t[i], d[i] + h[s[i]] - h[t[i]]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">Dijkstra</span>(i);</span><br><span class="line">        ll ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; ++j)</span><br><span class="line">            ans += j * (dist[j] == <span class="number">0x3f3f3f3f</span> ? <span class="number">1e9</span> : dist[j] - h[i] + h[j]);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="å€å¢æ±‚-LCA"><a href="#å€å¢æ±‚-LCA" class="headerlink" title="å€å¢æ±‚ LCA"></a>å€å¢æ±‚ LCA</h1><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 1000007</span></span><br><span class="line"><span class="type">int</span> dist[maxn],first[maxn],f[maxn][<span class="number">20</span>],depth[maxn],g[maxn][<span class="number">20</span>];</span><br><span class="line"><span class="type">int</span> n,m,s;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> e,next;</span><br><span class="line">    <span class="type">int</span> d;<span class="comment">//é•¿åº¦</span></span><br><span class="line">&#125;ed[maxn];</span><br><span class="line"><span class="type">int</span> cnt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add_edge</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v,<span class="type">int</span> w)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cnt++;</span><br><span class="line">    ed[cnt].next=first[u];</span><br><span class="line">    ed[cnt].e=v;</span><br><span class="line">    ed[cnt].d=w;</span><br><span class="line">    first[u]=cnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> now)</span><span class="comment">//ä»æ ¹èŠ‚ç‚¹å¼€å§‹dfs//é¢„å¤„ç†</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=first[now];i;i=ed[i].next)</span><br><span class="line">        <span class="keyword">if</span>(ed[i].e!=f[now][<span class="number">0</span>])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> p=ed[i].e;</span><br><span class="line">            depth[p]=depth[now]<span class="number">+1</span>;</span><br><span class="line">            f[p][<span class="number">0</span>]=now;</span><br><span class="line">            g[p][<span class="number">0</span>]=ed[i].d;<span class="comment">//ä»£è¡¨ä»på‘ä¸Šèµ°â€¦â€¦æ­¥ï¼ˆè¿™é‡ŒæŒ‡ä¸€æ­¥ï¼‰æ‰€ç»è¿‡çš„æœ€çŸ­è·ç¦»ä¸ºè¿™æ¡è¾¹çš„è¾¹æƒ</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> x=<span class="number">1</span>;x&lt;=<span class="number">18</span>;x++)</span><br><span class="line">            &#123;</span><br><span class="line">                f[p][x]=f[f[p][x<span class="number">-1</span>]][x<span class="number">-1</span>];</span><br><span class="line">                g[p][x]=<span class="built_in">min</span>(g[p][x<span class="number">-1</span>],g[f[p][x<span class="number">-1</span>]][x<span class="number">-1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">dfs</span>(p);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//1.è°ƒæ•´æ·±åº¦2.ä¸€èµ·è·³</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get_lca</span><span class="params">(<span class="type">int</span> p1,<span class="type">int</span> p2)</span><span class="comment">//é­”æ”¹åæ˜¯æ±‚è¾¹æƒæœ€å°å€¼</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	depth[<span class="number">0</span>] = <span class="number">-1</span>; <span class="comment">// é˜²æ­¢è·³åˆ°é›¶å·ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span>(depth[p1]&lt;depth[p2]) <span class="built_in">swap</span>(p1,p2);<span class="comment">//ä¿è¯p1è¾ƒæ·±</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> x=<span class="number">18</span>;x&gt;=<span class="number">0</span>;x--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> p=f[p1][x];</span><br><span class="line">        <span class="keyword">if</span>(depth[p]&gt;=depth[p2])</span><br><span class="line">        &#123;</span><br><span class="line">            p1=p;<span class="comment">//å®Œæˆåp1p2æ·±åº¦å°±ä¸€è‡´äº†</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(p1==p2) <span class="keyword">return</span> p1;<span class="comment">//é˜²æ­¢p1ï¼Œp2åœ¨åŒä¸€ç‚¹ä¸Š</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> x=<span class="number">18</span>;x&gt;=<span class="number">0</span>;x--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(f[p1][x]!=f[p2][x])</span><br><span class="line">        &#123;</span><br><span class="line">            p1=f[p1][x],p2=f[p2][x];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> f[p1][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="DFS-åºæ±‚-LCA"><a href="#DFS-åºæ±‚-LCA" class="headerlink" title="DFS åºæ±‚ LCA"></a>DFS åºæ±‚ LCA</h1><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">5e5</span> + <span class="number">8</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> idx, n, m, root, cnt;</span><br><span class="line"><span class="type">int</span> dfsn[N], st[<span class="number">25</span>][N], fir[N];</span><br><span class="line"><span class="type">int</span> Log2[N];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> to, nxt;</span><br><span class="line">&#125;e[N &lt;&lt; <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Log2[<span class="number">0</span>] = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        Log2[i] = Log2[i / <span class="number">2</span>] + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> dfsn[x] &lt; dfsn[y] ? x : y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++cnt].to = v;</span><br><span class="line">    e[cnt].nxt = fir[u];</span><br><span class="line">    fir[u] = cnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> fa)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    dfsn[u] = ++idx;</span><br><span class="line">    st[<span class="number">0</span>][idx] = fa; <span class="comment">// ä»¥ idx ä¸ºèµ·ç‚¹é•¿åº¦ä¸º (1 &lt;&lt; i) çš„åŒºé—´å†… dfsn æœ€å°çš„ç‚¹çš„çˆ¶äº²</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = fir[u]; i; i = e[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> v = e[i].to;</span><br><span class="line">        <span class="keyword">if</span> (v == fa) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="built_in">dfs</span>(v, u);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">lca</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == y) <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">if</span> (dfsn[x] &gt; dfsn[y]) <span class="built_in">swap</span>(x, y);</span><br><span class="line">    <span class="type">int</span> d = Log2[dfsn[y] - dfsn[x]]; <span class="comment">// +1 -1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">get</span>(st[d][dfsn[x] + <span class="number">1</span>], st[d][dfsn[y] - (<span class="number">1</span> &lt;&lt; d) + <span class="number">1</span>]); <span class="comment">// [dfsn_u + 1, dfsn_v]</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;n, &amp;m, &amp;root);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>, u, v; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;u, &amp;v);</span><br><span class="line">        <span class="built_in">add</span>(u, v);</span><br><span class="line">        <span class="built_in">add</span>(v, u);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">init</span>();</span><br><span class="line">    <span class="built_in">dfs</span>(root, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= Log2[n]; i++) <span class="comment">// Log2[i] ä¸‹å–æ•´</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j + (<span class="number">1</span> &lt;&lt; i) - <span class="number">1</span> &lt;= n; j++)</span><br><span class="line">            st[i][j] = <span class="built_in">get</span>(st[i - <span class="number">1</span>][j], st[i - <span class="number">1</span>][j + (<span class="number">1</span> &lt;&lt; (i - <span class="number">1</span>))]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>, u, v; i &lt;= m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;u, &amp;v);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">lca</span>(u, v));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="ç¦»æ•£åŒ–"><a href="#ç¦»æ•£åŒ–" class="headerlink" title="ç¦»æ•£åŒ–"></a>ç¦»æ•£åŒ–</h1><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">500</span>;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">dat</span>&#123;</span><br><span class="line">    <span class="type">int</span> val,id;</span><br><span class="line">&#125;olda[N];</span><br><span class="line"><span class="type">int</span> newa[N];</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">cmp</span><span class="params">(dat x,dat y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x.val&lt;y.val;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;olda[i].val);</span><br><span class="line">        olda[i].id=i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(olda<span class="number">+1</span>,olda<span class="number">+1</span>+n,cmp);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        newa[olda[i].id]=i;</span><br><span class="line">        <span class="keyword">if</span>(olda[i].val==olda[i<span class="number">-1</span>].val)</span><br><span class="line">            newa[olda[i].id]=newa[olda[i<span class="number">-1</span>].id];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,newa[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="é«˜ç²¾åº¦"><a href="#é«˜ç²¾åº¦" class="headerlink" title="é«˜ç²¾åº¦"></a>é«˜ç²¾åº¦</h1><h2 id="åŠ æ³•"><a href="#åŠ æ³•" class="headerlink" title="åŠ æ³•"></a>åŠ æ³•</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> a[<span class="number">520</span>],b[<span class="number">520</span>],c[<span class="number">520</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string A,B;</span><br><span class="line">    cin&gt;&gt;A&gt;&gt;B;</span><br><span class="line">    <span class="type">int</span> len=<span class="built_in">max</span>(A.<span class="built_in">length</span>(),B.<span class="built_in">length</span>());</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=A.<span class="built_in">length</span>()<span class="number">-1</span>,j=<span class="number">1</span>;i&gt;=<span class="number">0</span>;i--,j++)</span><br><span class="line">        a[j]=A[i]-<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=B.<span class="built_in">length</span>()<span class="number">-1</span>,j=<span class="number">1</span>;i&gt;=<span class="number">0</span>;i--,j++)</span><br><span class="line">        b[j]=B[i]-<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=len;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        c[i]+=a[i]+b[i];</span><br><span class="line">        c[i<span class="number">+1</span>]=c[i]/<span class="number">10</span>;</span><br><span class="line">        c[i]%=<span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(c[len<span class="number">+1</span>])</span><br><span class="line">        len++;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=len;i&gt;=<span class="number">1</span>;i--)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,c[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="ä¹˜æ³•"><a href="#ä¹˜æ³•" class="headerlink" title="ä¹˜æ³•"></a>ä¹˜æ³•</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> a[<span class="number">10200</span>],b[<span class="number">10200</span>],c[<span class="number">10200</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string A,B;</span><br><span class="line">    cin&gt;&gt;A&gt;&gt;B;</span><br><span class="line">    <span class="type">int</span> lena=A.<span class="built_in">length</span>(),lenb=B.<span class="built_in">length</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=lena<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">        a[lena-i]=A[i]-<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=lenb<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">        b[lenb-i]=B[i]-<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=lena;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=lenb;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            c[i+j<span class="number">-1</span>]+=a[i]*b[j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> len=lena+lenb;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=len;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        c[i<span class="number">+1</span>]+=c[i]/<span class="number">10</span>;</span><br><span class="line">        c[i]%=<span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(!c[len])</span><br><span class="line">        len--;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="built_in">max</span>(<span class="number">1</span>,len);i&gt;=<span class="number">1</span>;i--)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,c[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h1><h2 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> s[<span class="number">200005</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">qsort</span><span class="params">(<span class="type">int</span> a[],<span class="type">int</span> l,<span class="type">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> i=l,j=r,flag=a[(l+r)/<span class="number">2</span>],tmp;</span><br><span class="line">    <span class="keyword">do</span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(a[i]&lt;flag) i++;</span><br><span class="line">        <span class="keyword">while</span>(a[j]&gt;flag) j--;</span><br><span class="line">        <span class="keyword">if</span>(i&lt;=j)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">swap</span>(a[i],a[j]);</span><br><span class="line">            <span class="comment">// tmp=a[i];</span></span><br><span class="line">            <span class="comment">// a[i]=a[j];</span></span><br><span class="line">            <span class="comment">// a[j]=tmp;</span></span><br><span class="line">            i++,j--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">while</span>(i&lt;=j);</span><br><span class="line">    <span class="keyword">if</span>(l&lt;j)</span><br><span class="line">        <span class="built_in">qsort</span>(a,l,j);</span><br><span class="line">    <span class="keyword">if</span>(i&lt;r)</span><br><span class="line">        <span class="built_in">qsort</span>(a,i,r);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;s[i]);</span><br><span class="line">    <span class="built_in">qsort</span>(s,<span class="number">1</span>,n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,s[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="æ‹“æ‰‘æ’åº"><a href="#æ‹“æ‰‘æ’åº" class="headerlink" title="æ‹“æ‰‘æ’åº"></a>æ‹“æ‰‘æ’åº</h1><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">100005</span>;</span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="type">int</span> h[N],e[N],nex[N],cnt;</span><br><span class="line"><span class="type">int</span> que[N],d[N];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span><span class="comment">//ä»–æ˜¯ä»0~m-1</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++cnt]=b;<span class="comment">//end</span></span><br><span class="line">    nex[cnt]=h[a];</span><br><span class="line">    h[a]=cnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">topsort</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> hh=<span class="number">1</span>,tt=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">1</span>;l&lt;=n;l++)</span><br><span class="line">        <span class="keyword">if</span>(!d[l])</span><br><span class="line">            que[++tt]=l;</span><br><span class="line">        <span class="keyword">while</span>(hh&lt;=tt)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> t=que[hh++];<span class="comment">//å–å‡ºé˜Ÿé¦–</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=h[t];i!=<span class="number">-1</span>;i=nex[i])</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">int</span> j=e[i];</span><br><span class="line">                d[j]--;</span><br><span class="line">                <span class="keyword">if</span>(d[j]==<span class="number">0</span>)</span><br><span class="line">                    que[++tt]=j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">return</span> tt==n;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="built_in">memset</span>(h,<span class="number">-1</span>,<span class="built_in">sizeof</span>(h));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> a,b;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;a,&amp;b);</span><br><span class="line">        <span class="built_in">add</span>(a,b);</span><br><span class="line">        d[b]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">topsort</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,que[i]);</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        cout&lt;&lt;<span class="number">-1</span>&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="æœ€å°ç”Ÿæˆæ ‘"><a href="#æœ€å°ç”Ÿæˆæ ‘" class="headerlink" title="æœ€å°ç”Ÿæˆæ ‘"></a>æœ€å°ç”Ÿæˆæ ‘</h1><h2 id="Kruscal"><a href="#Kruscal" class="headerlink" title="Kruscal"></a>Kruscal</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">3e5</span><span class="number">+7</span>;</span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="type">int</span> fa[N];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span>&#123;</span><br><span class="line">	<span class="type">int</span> u,v,w;<span class="comment">//u-----w------&gt;v</span></span><br><span class="line">&#125;eg[<span class="number">1000005</span>]; </span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">cmp</span><span class="params">(edge a,edge b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a.w&lt;b.w;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> cnt,ans,tot;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v,<span class="type">int</span> w)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	eg[++cnt].u=u;</span><br><span class="line">	eg[cnt].v=v;</span><br><span class="line">	eg[cnt].w=w;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(fa[x]==x) <span class="keyword">return</span> x;</span><br><span class="line">	<span class="keyword">return</span> fa[x]=<span class="built_in">find</span>(fa[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Kruscal</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">sort</span>(eg<span class="number">+1</span>,eg+m<span class="number">+1</span>,cmp);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		fa[i]=i;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="type">int</span> rootu=<span class="built_in">find</span>(eg[i].u);</span><br><span class="line">		<span class="type">int</span> rootv=<span class="built_in">find</span>(eg[i].v);</span><br><span class="line">		<span class="keyword">if</span>(rootu!=rootv)</span><br><span class="line">		&#123;</span><br><span class="line">			ans+=eg[i].w;</span><br><span class="line">			tot++;</span><br><span class="line">			fa[rootu]=rootv;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> n,m;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;eg[i].u,&amp;eg[i].v,&amp;eg[i].w);</span><br><span class="line"> 	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="Prim"><a href="#Prim" class="headerlink" title="Prim"></a>Prim</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 1000007</span></span><br><span class="line"><span class="type">int</span> dist[maxn],first[maxn];</span><br><span class="line"><span class="type">int</span> n,m,s;</span><br><span class="line"><span class="type">bool</span> righ[maxn];<span class="comment">//è¿™ä¸ªç‚¹æœ‰æ²¡æœ‰æ”¾åˆ°å³è¾¹å»</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">point</span>&#123;</span><br><span class="line">    <span class="type">int</span> p,d;<span class="comment">//åŸç‚¹åˆ°pçš„æœ€çŸ­è·ç¦»ä¸ºd</span></span><br><span class="line">    <span class="built_in">point</span>()&#123;&#125;</span><br><span class="line">    <span class="built_in">point</span>(<span class="type">int</span> a,<span class="type">int</span> b)&#123;p=a;d=b;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>&lt;(<span class="type">const</span> point &amp;a,<span class="type">const</span> point &amp;b)<span class="comment">//STLé»˜è®¤å¤§æ ¹å †ï¼Œä¸Šé¢æ˜¯å¤§çš„</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> a.d&gt;b.d;</span><br><span class="line">&#125;</span><br><span class="line">priority_queue&lt;point&gt; heap;</span><br><span class="line"><span class="comment">//æ¾å¼›æ“ä½œ</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> e,next;</span><br><span class="line">    <span class="type">int</span> d;<span class="comment">//é•¿åº¦</span></span><br><span class="line">&#125;ed[maxn];</span><br><span class="line"><span class="type">int</span> cnt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add_edge</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v,<span class="type">int</span> w)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cnt++;</span><br><span class="line">    ed[cnt].next=first[u];</span><br><span class="line">    ed[cnt].e=v;</span><br><span class="line">    ed[cnt].d=w;</span><br><span class="line">    first[u]=cnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">prim</span><span class="params">(<span class="type">int</span> s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(dist,<span class="number">0x3f</span>,<span class="built_in">sizeof</span>(dist));<span class="comment">//å…¨éƒ¨éƒ½èµ‹å€¼ä¸ºæœ€å¤§å€¼</span></span><br><span class="line">    dist[s]=<span class="number">0</span>;<span class="comment">//såˆ°s</span></span><br><span class="line">    heap.<span class="built_in">push</span>(<span class="built_in">point</span>(s,<span class="number">0</span>));</span><br><span class="line">    <span class="keyword">while</span>(!heap.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        point now=heap.<span class="built_in">top</span>();</span><br><span class="line">        heap.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="type">int</span> p=now.p;</span><br><span class="line">        <span class="keyword">if</span>(righ[p]) <span class="keyword">continue</span>;</span><br><span class="line">        righ[p]=<span class="number">1</span>;<span class="comment">//æ”¾åˆ°å³è¾¹</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=first[p];j;j=ed[j].next)<span class="comment">//ed[j].eå³ä¸ºpçš„ä¸‹ä¸€ä¸ªç‚¹</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> e=ed[j].e;</span><br><span class="line">            <span class="type">int</span> d=ed[j].d;</span><br><span class="line">            <span class="keyword">if</span>(dist[e]&gt;d)</span><br><span class="line">            &#123;</span><br><span class="line">                dist[e]=d;</span><br><span class="line">                <span class="keyword">if</span>(!righ[e]) heap.<span class="built_in">push</span>(<span class="built_in">point</span>(e,d));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;n,&amp;m,&amp;s);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> u,v,w;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;u,&amp;v,&amp;w);</span><br><span class="line">        <span class="built_in">add_edge</span>(u,v,w);</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="è«é˜Ÿ"><a href="#è«é˜Ÿ" class="headerlink" title="è«é˜Ÿ"></a>è«é˜Ÿ</h1><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e5</span><span class="number">+8</span>;</span><br><span class="line"><span class="type">int</span> q,a[N],cnt[N],l=<span class="number">1</span>,r=<span class="number">0</span>,now=<span class="number">0</span>,belong[N];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">query</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> l,r;</span><br><span class="line">&#125;e[N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">cmp</span><span class="params">(query a, query b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> (belong[a.l]^belong[b.l])?belong[a.l]&lt;belong[b.l]:((belong[a.l]&amp;<span class="number">1</span>)?a.r&lt;b.r:a.r&gt;b.r);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> pos)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!cnt[a[pos]]) ++now;</span><br><span class="line">    ++cnt[a[pos]];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">del</span><span class="params">(<span class="type">int</span> pos)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    --cnt[a[pos]];</span><br><span class="line">    <span class="keyword">if</span>(!cnt[a[pos]]) --now;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">work</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=q;i++)</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> ql,qr;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;qr,&amp;ql);</span><br><span class="line">        <span class="keyword">while</span>(l&lt;ql) <span class="built_in">del</span>(l++);</span><br><span class="line">        <span class="keyword">while</span>(l&gt;ql) <span class="built_in">add</span>(--l);</span><br><span class="line">        <span class="keyword">while</span>(r&lt;qr) <span class="built_in">add</span>(++r);</span><br><span class="line">        <span class="keyword">while</span>(r&gt;qr) <span class="built_in">del</span>(r--);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,now);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="å¿«è¯»"><a href="#å¿«è¯»" class="headerlink" title="å¿«è¯»"></a>å¿«è¯»</h1><h2 id="int"><a href="#int" class="headerlink" title="int"></a>int</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">read</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> x=<span class="number">0</span>,y=<span class="number">1</span>; </span><br><span class="line">	<span class="type">char</span> c=<span class="built_in">getchar</span>();</span><br><span class="line">	<span class="keyword">while</span>(c&gt;<span class="string">&#x27;9&#x27;</span>||c&lt;<span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(c==<span class="string">&#x27;-&#x27;</span>) y=<span class="number">-1</span>;</span><br><span class="line">		c=<span class="built_in">getchar</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">while</span>(c&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;c&lt;=<span class="string">&#x27;9&#x27;</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		x=x*<span class="number">10</span>+c-<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">		c=<span class="built_in">getchar</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> x*y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="double"><a href="#double" class="headerlink" title="double"></a>double</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">double</span> <span class="title">read</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">double</span> x=<span class="number">0</span>,y=<span class="number">1</span>,w=<span class="number">1</span>;</span><br><span class="line">	<span class="type">char</span> c=<span class="built_in">getchar</span>();</span><br><span class="line">	<span class="keyword">while</span>(c&gt;<span class="string">&#x27;9&#x27;</span>||c&lt;<span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(c==<span class="string">&#x27;-&#x27;</span>) y=<span class="number">-1</span>;</span><br><span class="line">		c=<span class="built_in">getchar</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">while</span>(c&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;c&lt;=<span class="string">&#x27;9&#x27;</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		x=x*<span class="number">10</span>+c-<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">		c=<span class="built_in">getchar</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(c==<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		c=<span class="built_in">getchar</span>()</span><br><span class="line">		<span class="keyword">while</span>(c&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;c&lt;=<span class="string">&#x27;9&#x27;</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			w=w/<span class="number">10.0</span>;</span><br><span class="line">			x+=(c-<span class="string">&#x27;0&#x27;</span>)*w;</span><br><span class="line">			c=<span class="built_in">getchar</span>();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> x*y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="çº¿æ®µæ ‘"><a href="#çº¿æ®µæ ‘" class="headerlink" title="çº¿æ®µæ ‘"></a>çº¿æ®µæ ‘</h1><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">2e5</span><span class="number">+10</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">int</span> a[N];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> l,r;</span><br><span class="line">    ll add,sum;</span><br><span class="line">&#125;tr[N&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pushup</span><span class="params">(<span class="type">int</span> u)</span><span class="comment">//ä¸Šä¼ </span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    tr[u].sum=tr[u&lt;&lt;<span class="number">1</span>].sum+tr[u&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pushdown</span><span class="params">(<span class="type">int</span> u)</span><span class="comment">//ä¸‹æ”¾</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    node &amp;root=tr[u],&amp;left=tr[u&lt;&lt;<span class="number">1</span>],&amp;righ=tr[u&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">if</span>(root.add)</span><br><span class="line">    &#123;</span><br><span class="line">        left.add+=root.add;</span><br><span class="line">        left.sum+=<span class="number">1ll</span>*(left.r-left.l<span class="number">+1</span>)*root.add;</span><br><span class="line">        righ.add+=root.add;</span><br><span class="line">        righ.sum+=<span class="number">1ll</span>*(righ.r-righ.l<span class="number">+1</span>)*root.add;</span><br><span class="line">        root.add=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> l,<span class="type">int</span> r)</span><span class="comment">//ä»uå¼€å§‹é€’å½’ï¼Œå»ºl~rçš„æ ‘ï¼Œä¸€èˆ¬ä¸ºbuild(1,1,n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    tr[u].l=l,tr[u].r=r;</span><br><span class="line">    <span class="keyword">if</span>(l==r)</span><br><span class="line">    &#123;</span><br><span class="line">        tr[u].sum=a[r];</span><br><span class="line">        tr[u].add=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">build</span>(u&lt;&lt;<span class="number">1</span>,l,mid),<span class="built_in">build</span>(u&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,mid<span class="number">+1</span>,r);</span><br><span class="line">    <span class="built_in">pushup</span>(u);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">modify</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> l,<span class="type">int</span> r,<span class="type">int</span> d)</span><span class="comment">//ä»uå¼€å§‹é€’å½’ï¼ŒæŸ¥è¯¢åŒºé—´ï¼ŒåŠ ä¸Šd</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(tr[u].l&gt;=l&amp;&amp;tr[u].r&lt;=r)</span><br><span class="line">    &#123;</span><br><span class="line">        tr[u].sum+=<span class="number">1ll</span>*(tr[u].r-tr[u].l<span class="number">+1</span>)*d;</span><br><span class="line">        tr[u].add+=d;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">pushdown</span>(u);</span><br><span class="line">    <span class="type">int</span> mid=(tr[u].l+tr[u].r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(l&lt;=mid) <span class="built_in">modify</span>(u&lt;&lt;<span class="number">1</span>,l,r,d);</span><br><span class="line">    <span class="keyword">if</span>(r&gt;mid) <span class="built_in">modify</span>(u&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,l,r,d);</span><br><span class="line">    <span class="built_in">pushup</span>(u);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">query</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> l,<span class="type">int</span> r)</span><span class="comment">//ä»uå¼€å§‹é€’å½’ï¼ŒæŸ¥è¯¢lï¼Œrä¹‹é—´çš„åŒºé—´å’Œ</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(tr[u].l&gt;=l&amp;&amp;tr[u].r&lt;=r) <span class="keyword">return</span> tr[u].sum;</span><br><span class="line">    <span class="built_in">pushdown</span>(u);</span><br><span class="line">    <span class="type">int</span> mid=(tr[u].l+tr[u].r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    ll sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(l&lt;=mid) sum+=<span class="built_in">query</span>(u&lt;&lt;<span class="number">1</span>,l,r);</span><br><span class="line">    <span class="keyword">if</span>(r&gt;mid) sum+=<span class="built_in">query</span>(u&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,l,r);</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m, q;</span><br><span class="line"><span class="type">int</span> a[N];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> l, r;</span><br><span class="line">    LL sum, add, mul;</span><br><span class="line">&#125;tr[N &lt;&lt; <span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pushup</span><span class="params">(<span class="type">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    tr[u].sum = (tr[u &lt;&lt; <span class="number">1</span>].sum + tr[u &lt;&lt; <span class="number">1</span> | <span class="number">1</span>].sum) % q;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">eval</span><span class="params">(Node &amp;t, LL add, LL mul)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    t.sum = (t.sum * mul % q + (t.r - t.l + <span class="number">1</span>) * add % q);</span><br><span class="line">    t.add = (t.add * mul % q + add) % q;</span><br><span class="line">    t.mul = t.mul * mul % q;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pushdown</span><span class="params">(<span class="type">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">eval</span>(tr[u &lt;&lt; <span class="number">1</span>], tr[u].add, tr[u].mul);</span><br><span class="line">    <span class="built_in">eval</span>(tr[u &lt;&lt; <span class="number">1</span> | <span class="number">1</span>], tr[u].add, tr[u].mul);</span><br><span class="line">    tr[u].add = <span class="number">0</span>;</span><br><span class="line">    tr[u].mul = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> l, <span class="type">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    tr[u].l = l, tr[u].r = r, tr[u].add = <span class="number">0</span>, tr[u].mul = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(l == r)</span><br><span class="line">    &#123;</span><br><span class="line">        tr[u].sum = a[r];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">build</span>(u &lt;&lt; <span class="number">1</span>, l, mid), <span class="built_in">build</span>(u &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, mid + <span class="number">1</span>, r);</span><br><span class="line">    <span class="built_in">pushup</span>(u);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">modify</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> add, <span class="type">int</span> mul)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(tr[u].l &gt;= l &amp;&amp; tr[u].r &lt;= r)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">eval</span>(tr[u], add, mul);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">pushdown</span>(u);</span><br><span class="line">    <span class="type">int</span> mid = (tr[u].l + tr[u].r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(l &lt;= mid) <span class="built_in">modify</span>(u &lt;&lt; <span class="number">1</span>, l, r, add, mul);</span><br><span class="line">    <span class="keyword">if</span>(r &gt; mid) <span class="built_in">modify</span>(u &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, l, r, add, mul);</span><br><span class="line">    <span class="built_in">pushup</span>(u);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">query</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> l, <span class="type">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(tr[u].l &gt;= l &amp;&amp; tr[u].r &lt;= r) <span class="keyword">return</span> tr[u].sum;</span><br><span class="line">    <span class="built_in">pushdown</span>(u);</span><br><span class="line">    <span class="type">int</span> mid = (tr[u].l + tr[u].r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    LL sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(l &lt;= mid) sum = (sum + <span class="built_in">query</span>(u &lt;&lt; <span class="number">1</span>, l, r)) % q;</span><br><span class="line">    <span class="keyword">if</span>(r &gt; mid) sum = (sum + <span class="built_in">query</span>(u &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, l, r)) % q;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;n, &amp;m, &amp;q);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">    <span class="built_in">build</span>(<span class="number">1</span>, <span class="number">1</span>, n);</span><br><span class="line">    <span class="keyword">while</span>(m--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> op, l, r, k;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;op, &amp;l, &amp;r);</span><br><span class="line">        <span class="keyword">if</span>(op == <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;k);</span><br><span class="line">            <span class="built_in">modify</span>(<span class="number">1</span>, l, r, <span class="number">0</span>, k);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(op == <span class="number">2</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;k);</span><br><span class="line">            <span class="built_in">modify</span>(<span class="number">1</span>, l, r, k, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, <span class="built_in">query</span>(<span class="number">1</span>, l, r));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="å¯æŒä¹…åŒ–"><a href="#å¯æŒä¹…åŒ–" class="headerlink" title="å¯æŒä¹…åŒ–"></a>å¯æŒä¹…åŒ–</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e6</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m, cnt;</span><br><span class="line"><span class="type">int</span> idx;</span><br><span class="line"><span class="type">int</span> a[N];</span><br><span class="line"><span class="type">int</span> root[N];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> l, r;</span><br><span class="line">    <span class="type">int</span> key;</span><br><span class="line">&#125;tr[<span class="number">23</span> * N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">(<span class="type">int</span> &amp;u, <span class="type">int</span> l, <span class="type">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    u = ++idx;</span><br><span class="line">    <span class="keyword">if</span>(l == r)</span><br><span class="line">    &#123;</span><br><span class="line">        tr[u].key = a[r];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">build</span>(tr[u].l, l, mid);</span><br><span class="line">    <span class="built_in">build</span>(tr[u].r, mid + <span class="number">1</span>, r);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">modify</span><span class="params">(<span class="type">int</span> &amp;u, <span class="type">int</span> p, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> x, <span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    u = ++idx;</span><br><span class="line">    tr[u] = tr[p];</span><br><span class="line">    <span class="keyword">if</span>(l == r)</span><br><span class="line">    &#123;</span><br><span class="line">        tr[u].key = v;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(x &lt;= mid) <span class="built_in">modify</span>(tr[u].l, tr[p].l, l, mid, x, v);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">modify</span>(tr[u].r, tr[p].r, mid + <span class="number">1</span>, r, x, v);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">query</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!u) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(l == r) <span class="keyword">return</span> tr[u].key;</span><br><span class="line">    <span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(x &lt;= mid) <span class="keyword">return</span> <span class="built_in">query</span>(tr[u].l, l, mid, x);</span><br><span class="line">    <span class="keyword">if</span>(x &gt; mid) <span class="keyword">return</span> <span class="built_in">query</span>(tr[u].r, mid + <span class="number">1</span>, r, x);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">    <span class="built_in">build</span>(root[<span class="number">0</span>], <span class="number">1</span>, n);</span><br><span class="line">    <span class="keyword">while</span>(m--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> op, last, loc, val;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;last, &amp;op);</span><br><span class="line">        <span class="keyword">if</span>(op == <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;loc, &amp;val);</span><br><span class="line">            <span class="built_in">modify</span>(root[++cnt], root[last], <span class="number">1</span>, n, loc, val);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(op == <span class="number">2</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;val);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">query</span>(root[last], <span class="number">1</span>, n, val));</span><br><span class="line">            root[++cnt] = root[last];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="å¹³è¡¡æ ‘"><a href="#å¹³è¡¡æ ‘" class="headerlink" title="å¹³è¡¡æ ‘"></a>å¹³è¡¡æ ‘</h1><h2 id="Treap"><a href="#Treap" class="headerlink" title="Treap"></a>Treap</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e6</span> + <span class="number">7</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> INF = <span class="number">1e8</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, root, idx;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> l, r, key, val;</span><br><span class="line">    <span class="type">int</span> cnt, siz;</span><br><span class="line">&#125;tr[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get_node</span><span class="params">(<span class="type">int</span> key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    tr[++idx].key = key;</span><br><span class="line">    tr[idx].val = <span class="built_in">rand</span>();</span><br><span class="line">    tr[idx].cnt = tr[idx].siz = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> idx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pushup</span><span class="params">(<span class="type">int</span> p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    tr[p].siz = tr[tr[p].l].siz + tr[tr[p].r].siz + tr[p].cnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    root = <span class="built_in">get_node</span>(-INF);</span><br><span class="line">    tr[root].r = <span class="built_in">get_node</span>(INF);</span><br><span class="line">    <span class="built_in">pushup</span>(root);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">zig</span><span class="params">(<span class="type">int</span> &amp;p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> q = tr[p].l;</span><br><span class="line">    tr[p].l = tr[q].r;</span><br><span class="line">    tr[q].r = p;</span><br><span class="line">    p = q;</span><br><span class="line">    <span class="built_in">pushup</span>(tr[p].r);</span><br><span class="line">    <span class="built_in">pushup</span>(p);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">zag</span><span class="params">(<span class="type">int</span> &amp;p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> q = tr[p].r;</span><br><span class="line">    tr[p].r = tr[q].l;</span><br><span class="line">    tr[q].l = p;</span><br><span class="line">    p = q;</span><br><span class="line">    <span class="built_in">pushup</span>(tr[p].l);</span><br><span class="line">    <span class="built_in">pushup</span>(p);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(<span class="type">int</span> &amp;p, <span class="type">int</span> key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!p) p = <span class="built_in">get_node</span>(key);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(tr[p].key == key) tr[p].cnt++;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(tr[p].key &gt; key)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">insert</span>(tr[p].l, key);</span><br><span class="line">        <span class="keyword">if</span>(tr[tr[p].l].val &gt; tr[p].val) <span class="built_in">zig</span>(p);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">insert</span>(tr[p].r, key);</span><br><span class="line">        <span class="keyword">if</span>(tr[tr[p].r].val &gt; tr[p].val) <span class="built_in">zag</span>(p);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">pushup</span>(p);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">remove</span><span class="params">(<span class="type">int</span> &amp;p, <span class="type">int</span> key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!p) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(tr[p].key == key)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(tr[p].cnt &gt; <span class="number">1</span>) tr[p].cnt--;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(tr[p].l || tr[p].r)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(!tr[p].r || tr[tr[p].l].val &gt; tr[tr[p].r].val)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">zig</span>(p);</span><br><span class="line">                <span class="built_in">remove</span>(tr[p].r, key);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">zag</span>(p);</span><br><span class="line">                <span class="built_in">remove</span>(tr[p].l, key);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> p = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(tr[p].key &gt; key) <span class="built_in">remove</span>(tr[p].l, key);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">remove</span>(tr[p].r, key);</span><br><span class="line">    <span class="built_in">pushup</span>(p);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get_rank</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!p) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(tr[p].key == key) <span class="keyword">return</span> tr[tr[p].l].siz + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(tr[p].key &gt; key) <span class="keyword">return</span> <span class="built_in">get_rank</span>(tr[p].l, key);</span><br><span class="line">    <span class="keyword">return</span> tr[tr[p].l].siz + tr[p].cnt + <span class="built_in">get_rank</span>(tr[p].r, key);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get_key</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> rank)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!p) <span class="keyword">return</span> INF;</span><br><span class="line">    <span class="keyword">if</span>(tr[tr[p].l].siz &gt;= rank) <span class="keyword">return</span> <span class="built_in">get_key</span>(tr[p].l, rank);</span><br><span class="line">    <span class="keyword">if</span>(tr[tr[p].l].siz + tr[p].cnt &gt;= rank) <span class="keyword">return</span> tr[p].key;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">get_key</span>(tr[p].r, rank - tr[tr[p].l].siz - tr[p].cnt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get_prev</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!p) <span class="keyword">return</span> -INF;</span><br><span class="line">    <span class="keyword">if</span>(tr[p].key &gt;= key) <span class="keyword">return</span> <span class="built_in">get_prev</span>(tr[p].l, key);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">max</span>(tr[p].key, <span class="built_in">get_prev</span>(tr[p].r, key));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get_next</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!p) <span class="keyword">return</span> INF;</span><br><span class="line">    <span class="keyword">if</span>(tr[p].key &lt;= key) <span class="keyword">return</span> <span class="built_in">get_next</span>(tr[p].r, key);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">min</span>(tr[p].key, <span class="built_in">get_next</span>(tr[p].l, key));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">build</span>();</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">while</span>(n--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> op, x;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;op, &amp;x);</span><br><span class="line">        <span class="keyword">switch</span>(op)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>: </span><br><span class="line">                <span class="built_in">insert</span>(root, x);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                <span class="built_in">remove</span>(root, x);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>: </span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">get_rank</span>(root, x) - <span class="number">1</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">get_key</span>(root, x + <span class="number">1</span>));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">get_prev</span>(root, x));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">get_next</span>(root, x));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h1><h2 id="KMP"><a href="#KMP" class="headerlink" title="KMP"></a>KMP</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e6</span><span class="number">+10</span>;</span><br><span class="line"><span class="type">char</span> a[N],b[N];</span><br><span class="line"><span class="type">int</span> nxt[N];</span><br><span class="line"><span class="type">int</span> la,lb;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">calc</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>,j=<span class="number">0</span>;i&lt;lb;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span>(j&amp;&amp;b[i]!=b[j]) j=nxt[j<span class="number">-1</span>];</span><br><span class="line">        <span class="keyword">if</span>(b[i]==b[j]) j++;</span><br><span class="line">        nxt[i]=j;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">kmp</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>,j=<span class="number">0</span>;i&lt;la;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span>(j&amp;&amp;a[i]!=b[j]) j=nxt[j<span class="number">-1</span>];</span><br><span class="line">        <span class="keyword">if</span>(a[i]==b[j]) j++;</span><br><span class="line">        <span class="keyword">if</span>(j==lb)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,i-j<span class="number">+2</span>);</span><br><span class="line">            j=nxt[j<span class="number">-1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s%s&quot;</span>,a,b);</span><br><span class="line">    la=<span class="built_in">strlen</span>(a);</span><br><span class="line">    lb=<span class="built_in">strlen</span>(b);</span><br><span class="line">    <span class="built_in">calc</span>();</span><br><span class="line">    <span class="built_in">kmp</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;lb;i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,nxt[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="Z"><a href="#Z" class="headerlink" title="Z"></a>Z</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">char</span> s[<span class="number">1000005</span>];</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> z[<span class="number">100005</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    n=<span class="built_in">strlen</span>(s);</span><br><span class="line">    z[<span class="number">0</span>]=n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>,l=<span class="number">0</span>,r=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(z[i-l]&lt;r-i<span class="number">+1</span>)<span class="comment">//å½“å‰å·²ç»ç›¸åŒçš„éƒ¨åˆ†æ¯”å·²çŸ¥lcpè¦å¤§</span></span><br><span class="line">            z[i]=z[i-l];</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            z[i]=<span class="built_in">max</span>(r-i<span class="number">+1</span>,<span class="number">0</span>);</span><br><span class="line">            <span class="keyword">while</span>(i+z[i]&lt;n&amp;&amp;s[z[i]]==s[i+z[i]]) z[i]++;</span><br><span class="line">            l=i,r=i+z[i]<span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="Manacher"><a href="#Manacher" class="headerlink" title="Manacher"></a>Manacher</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> d[<span class="number">1000005</span>];</span><br><span class="line"><span class="type">char</span> s[<span class="number">1000005</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>,l=<span class="number">0</span>,r=<span class="number">-1</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> j=l+r-i;<span class="comment">//å¯¹ç§°ç‚¹</span></span><br><span class="line">        <span class="type">int</span> dj=j&gt;=<span class="number">0</span>?d[j]:<span class="number">0</span>;<span class="comment">//ä¸èƒ½è¶Šç•Œ</span></span><br><span class="line">        d[i]=<span class="built_in">max</span>(<span class="built_in">min</span>(dj,r-i<span class="number">+1</span>),<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">if</span>(j-dj&lt;l)<span class="comment">//j-dj+1&lt;=l</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span>(i-d[i]&gt;=<span class="number">0</span>&amp;&amp;i+d[i]&lt;n&amp;&amp;s[i-d[i]]==s[i+d[i]]) d[i]++;</span><br><span class="line">            l=i-d[i]<span class="number">+1</span>,r=i+d[i]<span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="Trie"><a href="#Trie" class="headerlink" title="Trie"></a>Trie</h2><h1 id="æ•°å­¦"><a href="#æ•°å­¦" class="headerlink" title="æ•°å­¦"></a>æ•°å­¦</h1><h2 id="å¿«é€Ÿå¹‚"><a href="#å¿«é€Ÿå¹‚" class="headerlink" title="å¿«é€Ÿå¹‚"></a>å¿«é€Ÿå¹‚</h2><p>éé€’å½’ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">ksm</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(y &gt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(y &amp; <span class="number">1</span>) res = res * x;</span><br><span class="line">        x = x * x;</span><br><span class="line">        y &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>é€’å½’ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">ksm</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(y == <span class="number">1</span>) <span class="keyword">return</span> x;</span><br><span class="line">    <span class="type">int</span> z = <span class="built_in">ksm</span>(x, (y &gt;&gt; <span class="number">1</span>));</span><br><span class="line">    z = z * z;</span><br><span class="line">    <span class="keyword">if</span>(y &amp; <span class="number">1</span>) z = z * x;</span><br><span class="line">    <span class="keyword">return</span> z;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="ç´ æ€§æµ‹è¯•"><a href="#ç´ æ€§æµ‹è¯•" class="headerlink" title="ç´ æ€§æµ‹è¯•"></a>ç´ æ€§æµ‹è¯•</h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> prime[] = &#123;<span class="number">0</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">11</span>, <span class="number">13</span>, <span class="number">17</span>, <span class="number">19</span>, <span class="number">23</span>, <span class="number">29</span>, <span class="number">31</span>, <span class="number">37</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="function">ll <span class="title">Ksm</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll res = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(y &gt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(y &amp; <span class="number">1</span>) res = res * x % p;</span><br><span class="line">        x = x * x % p;</span><br><span class="line">        y &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Miller_Rubbin</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span> a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> d = n - <span class="number">1</span>, r = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(!(d &amp; <span class="number">1</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        d &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">        r++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> x = <span class="built_in">Ksm</span>(a, d, n);</span><br><span class="line">    <span class="keyword">if</span>(x == <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= r; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(x == n - <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        x = <span class="number">1ll</span> * x * x % n;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Check</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n &lt; <span class="number">2</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">12</span>; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(!<span class="built_in">Miller_Rubbin</span>(x, prime[i])) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;t);</span><br><span class="line">    cout &lt;&lt; <span class="built_in">Check</span>(t) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>ACM</category>
      </categories>
      <tags>
        <tag>Form</tag>
      </tags>
  </entry>
  <entry>
    <title>é¢˜è§£æ±‡æ€»</title>
    <url>/859461957.html</url>
    <content><![CDATA[<blockquote>
<p>ä¹Ÿæ²¡æœ‰å¾ˆæ‚</p>
</blockquote>
<h1 id="Tarjan"><a href="#Tarjan" class="headerlink" title="Tarjan"></a>Tarjan</h1><h2 id="P3469"><a href="#P3469" class="headerlink" title="P3469"></a>P3469</h2><p>åˆ†ä¸¤ç§æƒ…å†µè®¨è®ºï¼š</p>
<ul>
<li>å¦‚æœåˆ å»çš„è¿™ä¸ªç‚¹ä¸æ˜¯å‰²ç‚¹ï¼Œé‚£ä¹ˆæœ‰åºç‚¹å¯¹çš„æ•°ä¸å˜ï¼Œè¿é€šåˆ†é‡åªæœ‰ä¸¤ä¸ªï¼Œåˆ†åˆ«æ˜¯è¿™ä¸ªç‚¹å’Œå‰©ä¸‹çš„æ‰€æœ‰ç‚¹ï¼Œç­”æ¡ˆæ˜¯$2\times(n-1)$ã€‚</li>
<li>å¦‚æœåˆ å»çš„è¿™ä¸ªç‚¹æ˜¯å‰²ç‚¹ï¼Œé‚£ä¹ˆè¿™å¼ è¿é€šå›¾å°†ä¼šå˜ä¸ºè‹¥å¹²è¿é€šåˆ†é‡ï¼Œåˆ†åˆ«æ˜¯è¿™ä¸ªç‚¹ã€è¿™ä¸ªç‚¹çš„è‹¥å¹²ä¸ªå­æ ‘ï¼Œä»¥åŠå‰©ä¸‹çš„æ‰€æœ‰ç‚¹ã€‚è®¾$siz_i$ä»£è¡¨ç¬¬$i$ä¸ªå­æ ‘çš„å¤§å°ï¼Œ$sum$ä¸º$i$çš„çš„å­æ ‘å¤§å°ä¹‹å’Œã€‚é‚£ä¹ˆç­”æ¡ˆå°±æ˜¯$\sum_i{siz_i\times(n-siz_i)}+1\times(n-1)+(n-sum-1)\times(sum+1)$ã€‚</li>
</ul>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e5</span><span class="number">+10</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> M=<span class="number">5e5</span><span class="number">+10</span>;</span><br><span class="line"><span class="type">int</span> n,m,edcnt,cnt;</span><br><span class="line"><span class="type">int</span> fir[N],dfsn[N],low[N],siz[N];</span><br><span class="line"><span class="type">long</span> <span class="type">long</span> ans[N];</span><br><span class="line"><span class="type">bool</span> cut[N];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> to,nxt;</span><br><span class="line">&#125;e[M&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++edcnt].to=v;</span><br><span class="line">    e[edcnt].nxt=fir[u];</span><br><span class="line">    fir[u]=edcnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">tarjan</span><span class="params">(<span class="type">int</span> p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> tot=<span class="number">0</span>,sum=<span class="number">0</span>;</span><br><span class="line">    dfsn[p]=low[p]=++cnt;</span><br><span class="line">    siz[p]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=fir[p];i;i=e[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> q=e[i].to;</span><br><span class="line">        <span class="keyword">if</span>(!dfsn[q])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">tarjan</span>(q);</span><br><span class="line">            siz[p]+=siz[q];</span><br><span class="line">            low[p]=<span class="built_in">min</span>(low[p],low[q]);</span><br><span class="line">            <span class="keyword">if</span>(low[q]&gt;=dfsn[p])<span class="comment">//å‰²ç‚¹</span></span><br><span class="line">            &#123;</span><br><span class="line">                ans[p]+=<span class="number">1ll</span>*siz[q]*(n-siz[q]);</span><br><span class="line">                sum+=siz[q];</span><br><span class="line">                tot++;</span><br><span class="line">                <span class="keyword">if</span>(p!=<span class="number">1</span>||tot&gt;<span class="number">1</span>) cut[p]=<span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> low[p]=<span class="built_in">min</span>(low[p],dfsn[q]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!cut[p]) ans[p]=<span class="number">2</span>*(n<span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">else</span> ans[p]+=(n<span class="number">-1</span>)*<span class="number">1</span><span class="number">+1ll</span>*(n-sum<span class="number">-1</span>)*(sum<span class="number">+1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> u,v;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;u,&amp;v);</span><br><span class="line">        <span class="built_in">add</span>(u,v);</span><br><span class="line">        <span class="built_in">add</span>(v,u);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">tarjan</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,ans[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="P2860"><a href="#P2860" class="headerlink" title="P2860"></a>P2860</h2><p>å…ˆæ±‚ä¸€ä¸‹è¾¹åŒè¿é€šåˆ†é‡ï¼Œç„¶åå¯¹è¾¹åŒè¿é€šåˆ†é‡è¿›è¡Œç¼©ç‚¹ï¼Œç„¶åå°±å¯ä»¥æ‰¾åˆ°åº¦æ•°ä¸º1çš„èŠ‚ç‚¹ï¼Œç­”æ¡ˆå°±æ˜¯$\lceil\frac{s}{2}\rceil$ï¼Œä¹Ÿå°±æ˜¯å¶å­èŠ‚ç‚¹çš„ä¸ªæ•°é™¤ä»¥2ä¸Šå–æ•´ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">5050</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> M=<span class="number">2e4</span><span class="number">+10</span>;</span><br><span class="line"><span class="type">int</span> n,m,edcnt,cnt,cdcc,ans;</span><br><span class="line">map&lt;<span class="type">int</span>,<span class="type">bool</span>&gt; bj[N];</span><br><span class="line"><span class="type">int</span> fir[N],low[N],fa[N],dfsn[N],dcc[N],dd[N];</span><br><span class="line">stack&lt;<span class="type">int</span>&gt; s;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> to,nxt;</span><br><span class="line">&#125;e[M];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++edcnt].to=v;</span><br><span class="line">    e[edcnt].nxt=fir[u];</span><br><span class="line">    fir[u]=edcnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">tarjan</span><span class="params">(<span class="type">int</span> p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    dfsn[p]=low[p]=++cnt;</span><br><span class="line">    s.<span class="built_in">push</span>(p);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=fir[p];i;i=e[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> q=e[i].to;</span><br><span class="line">        <span class="keyword">if</span>(!dfsn[q])</span><br><span class="line">        &#123;</span><br><span class="line">            fa[q]=p;</span><br><span class="line">            <span class="built_in">tarjan</span>(q);</span><br><span class="line">            low[p]=<span class="built_in">min</span>(low[p],low[q]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(fa[p]!=q) low[p]=<span class="built_in">min</span>(low[p],dfsn[q]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(dfsn[p]==low[p])</span><br><span class="line">    &#123;</span><br><span class="line">        cdcc++;</span><br><span class="line">        <span class="type">int</span> top;</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">        &#123;</span><br><span class="line">            top=s.<span class="built_in">top</span>();</span><br><span class="line">            s.<span class="built_in">pop</span>();</span><br><span class="line">            dcc[top]=cdcc;</span><br><span class="line">        &#125; <span class="keyword">while</span> (top!=p);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> u,v;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;u,&amp;v);</span><br><span class="line">        <span class="comment">// if(u==v) continue;</span></span><br><span class="line">        <span class="keyword">if</span>(bj[u][v]||bj[v][u]) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="built_in">add</span>(u,v);</span><br><span class="line">        <span class="built_in">add</span>(v,u);</span><br><span class="line">        bj[u][v]=<span class="literal">true</span>;</span><br><span class="line">        bj[v][u]=<span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">tarjan</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=edcnt;i+=<span class="number">2</span>)<span class="comment">//å»ºæ–°å›¾</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> x=e[i].to;</span><br><span class="line">        <span class="type">int</span> y=e[i<span class="number">+1</span>].to;</span><br><span class="line">        <span class="keyword">if</span>(dcc[x]!=dcc[y])</span><br><span class="line">            dd[dcc[x]]++,dd[dcc[y]]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=cdcc;i++)</span><br><span class="line">        <span class="keyword">if</span>(dd[i]==<span class="number">1</span>) ans++;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,(ans<span class="number">+1</span>)/<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>è®°å¾—åˆ¤é‡è¾¹ï¼</p>
<h2 id="P2783"><a href="#P2783" class="headerlink" title="P2783"></a>P2783</h2><p>ç‚¹åŒè¿é€šåˆ†é‡çš„ç¼©ç‚¹ï¼Œç„¶ååˆ©ç”¨LCAæ±‚è·ç¦»ï¼Œ$x$åˆ°$y$çš„è·ç¦»ä¸º$depth_x+depth_y-2\times{depth_{lca(x,y)}}$</p>
<p>ç”±äºæ˜¯ç¢³çš„ä¸ªæ•°ï¼Œæ‰€ä»¥è¿˜éœ€è¦åŠ ä¸€ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e4</span><span class="number">+10</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> M=<span class="number">5e4</span><span class="number">+10</span>;</span><br><span class="line"><span class="type">int</span> n,m,cdcc,q;</span><br><span class="line"><span class="type">int</span> low[N],dfsn[N],cnt,edcnt;</span><br><span class="line"><span class="type">int</span> fir[N],fa[N];</span><br><span class="line"><span class="type">int</span> dcc[N],depth[N],f[N][<span class="number">23</span>];</span><br><span class="line"><span class="type">int</span> a[<span class="number">100</span>];</span><br><span class="line">map&lt;<span class="type">int</span>,<span class="type">bool</span>&gt; bj[N];</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; mp[N];</span><br><span class="line">stack&lt;<span class="type">int</span>&gt; s;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> to,nxt;</span><br><span class="line">&#125;e[M&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++edcnt].to=v;</span><br><span class="line">    e[edcnt].nxt=fir[u];</span><br><span class="line">    fir[u]=edcnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">tarjan</span><span class="params">(<span class="type">int</span> p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    low[p]=dfsn[p]=++cnt;</span><br><span class="line">    s.<span class="built_in">push</span>(p);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=fir[p];i;i=e[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> v=e[i].to;</span><br><span class="line">        <span class="keyword">if</span>(!dfsn[v])</span><br><span class="line">        &#123;</span><br><span class="line">            fa[v]=p;</span><br><span class="line">            <span class="built_in">tarjan</span>(v);</span><br><span class="line">            low[p]=<span class="built_in">min</span>(low[p],low[v]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(v!=fa[p]) low[p]=<span class="built_in">min</span>(low[p],dfsn[v]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(dfsn[p]==low[p])</span><br><span class="line">    &#123;</span><br><span class="line">        cdcc++;</span><br><span class="line">        <span class="type">int</span> top;</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">        &#123;</span><br><span class="line">            top=s.<span class="built_in">top</span>();</span><br><span class="line">            s.<span class="built_in">pop</span>();</span><br><span class="line">            dcc[top]=cdcc;</span><br><span class="line">        &#125; <span class="keyword">while</span> (top!=p);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;v:mp[u])</span><br><span class="line">        <span class="keyword">if</span>(v!=f[u][<span class="number">0</span>])</span><br><span class="line">        &#123;</span><br><span class="line">            depth[v]=depth[u]<span class="number">+1</span>;</span><br><span class="line">            f[v][<span class="number">0</span>]=u;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">21</span>;i++)</span><br><span class="line">                f[v][i]=f[f[v][i<span class="number">-1</span>]][i<span class="number">-1</span>];</span><br><span class="line">            <span class="built_in">dfs</span>(v);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">lca</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(depth[x]&lt;depth[y]) <span class="built_in">swap</span>(x,y);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">21</span>;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">        <span class="keyword">if</span>(depth[f[x][i]]&gt;=depth[y])</span><br><span class="line">            x=f[x][i];</span><br><span class="line">    <span class="keyword">if</span>(x==y) <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">21</span>;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> nx=f[x][i];</span><br><span class="line">        <span class="type">int</span> ny=f[y][i];</span><br><span class="line">        <span class="keyword">if</span>(nx!=ny)</span><br><span class="line">        &#123;</span><br><span class="line">            x=nx;</span><br><span class="line">            y=ny;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> f[x][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">dist</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> l=<span class="built_in">lca</span>(x,y);</span><br><span class="line">    <span class="keyword">return</span> depth[x]+depth[y]<span class="number">-2</span>*depth[l];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> u,v;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;u,&amp;v);</span><br><span class="line">        <span class="keyword">if</span>(u==v) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">if</span>(bj[u][v]||bj[v][u]) <span class="keyword">continue</span>;</span><br><span class="line">        bj[u][v]=<span class="literal">true</span>;</span><br><span class="line">        bj[v][u]=<span class="literal">true</span>;</span><br><span class="line">        <span class="built_in">add</span>(u,v);</span><br><span class="line">        <span class="built_in">add</span>(v,u);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">tarjan</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=fir[i];j;j=e[j].nxt)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> v=e[j].to;</span><br><span class="line">            <span class="keyword">if</span>(dcc[i]!=dcc[v])</span><br><span class="line">                mp[dcc[i]].<span class="built_in">push_back</span>(dcc[v]);</span><br><span class="line">        &#125;</span><br><span class="line">    depth[<span class="number">0</span>]=<span class="number">-1</span>;</span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;q);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=q;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> x,y;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;x,&amp;y);</span><br><span class="line">        <span class="type">int</span> ans=<span class="built_in">dist</span>(dcc[x],dcc[y])<span class="number">+1</span>;</span><br><span class="line">        <span class="type">int</span> j=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(ans&gt;<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            a[j]=ans&amp;<span class="number">1</span>;</span><br><span class="line">            j++;</span><br><span class="line">            ans&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(j--;j&gt;=<span class="number">0</span>;j--) <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,a[j]);</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="æœç´¢"><a href="#æœç´¢" class="headerlink" title="æœç´¢"></a>æœç´¢</h1><h2 id="è®°å¿†åŒ–æœç´¢"><a href="#è®°å¿†åŒ–æœç´¢" class="headerlink" title="è®°å¿†åŒ–æœç´¢"></a>è®°å¿†åŒ–æœç´¢</h2><h3 id="P1219å…«çš‡å"><a href="#P1219å…«çš‡å" class="headerlink" title="P1219å…«çš‡å"></a><a class="link"   href="https://www.luogu.com.cn/problem/P1219" >P1219å…«çš‡å<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>å·¦ä¸‹å¯¹è§’çº¿çš„æ¨ªçºµåæ ‡ä¹‹å’Œä¸å˜ï¼Œå³ä¸‹å¯¹è§’çº¿çš„æ¨ªçºµåæ ‡ä¹‹å·®ä¸å˜ï¼Œä½œå·®è¦è®°å¾—åŠ ä¸Š $n$ï¼Œé˜²æ­¢è´Ÿæ•°ä¸‹æ ‡ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">3e5</span> <span class="number">+7</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n,tot;</span><br><span class="line"><span class="type">bool</span> line[N], ldia[N], rdia[N];</span><br><span class="line"><span class="type">int</span> row[N];</span><br><span class="line"><span class="comment">// è¡Œï¼Œåˆ—ï¼Œå·¦ä¸‹å¯¹è§’çº¿ï¼Œå³ä¸‹å¯¹è§’çº¿</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Dfs</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x &gt; n)</span><br><span class="line">    &#123;</span><br><span class="line">        tot++;</span><br><span class="line">        <span class="keyword">if</span>(tot &gt; <span class="number">3</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, row[i]);</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(!(line[i]) &amp;&amp; (!ldia[x + i]) &amp;&amp; (!rdia[x - i +n]))</span><br><span class="line">        &#123;</span><br><span class="line">            row[x] = i;</span><br><span class="line">            line[i] = <span class="literal">true</span>;</span><br><span class="line">            ldia[x + i] = <span class="literal">true</span>;</span><br><span class="line">            rdia[x + n - i] = <span class="literal">true</span>;</span><br><span class="line">            <span class="built_in">Dfs</span>(x + <span class="number">1</span>); <span class="comment">// æ‰¾ä¸‹ä¸€è¡Œ</span></span><br><span class="line">            line[i] = <span class="literal">false</span>;</span><br><span class="line">            ldia[x + i] = <span class="literal">false</span>;</span><br><span class="line">            rdia[x + n - i] = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="built_in">Dfs</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, tot);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="P1019å•è¯æ¥é¾™"><a href="#P1019å•è¯æ¥é¾™" class="headerlink" title="P1019å•è¯æ¥é¾™"></a><a class="link"   href="https://www.luogu.com.cn/problem/P1019" >P1019å•è¯æ¥é¾™<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h2><p>æ³¨é‡Šã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">22</span>;</span><br><span class="line">string s[N];</span><br><span class="line"><span class="type">int</span> used[N],length = <span class="number">0</span>, n;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Link</span><span class="params">(string s1, string s2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> len = <span class="built_in">min</span>(s<span class="number">1.l</span>ength(), s<span class="number">2.l</span>ength());</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; len; ++i) <span class="comment">// æšä¸¾é‡å é•¿åº¦</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">bool</span> bj = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; i; ++j) <span class="comment">// æšä¸¾s1çš„åç¼€å’Œs2çš„å‰ç¼€</span></span><br><span class="line">            <span class="keyword">if</span>(s1[s<span class="number">1.l</span>ength() - i + j] != s2[j]) bj = <span class="literal">false</span>;</span><br><span class="line">        <span class="comment">// ç”±äºè¦ä½¿æ‹¼æ¥åæœ€é•¿ï¼Œä¹Ÿå°±æ˜¯ä½¿é‡å éƒ¨åˆ†æœ€çŸ­ï¼Œé‚£ä¹ˆæ‰¾åˆ°å°±è¿”å›å³å¯</span></span><br><span class="line">        <span class="keyword">if</span>(bj) <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">// æ²¡æœ‰å°±æ˜¯ 0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Dfs</span><span class="params">(string now, <span class="type">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    length = <span class="built_in">max</span>(len, length);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(used[i] &gt;= <span class="number">2</span>) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="type">int</span> over = <span class="built_in">Link</span>(now, s[i]);</span><br><span class="line">        <span class="keyword">if</span>(over &gt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            used[i]++;</span><br><span class="line">            <span class="built_in">Dfs</span>(s[i], len + s[i].<span class="built_in">length</span>() - over);</span><br><span class="line">            used[i]--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= n; ++i)</span><br><span class="line">        cin &gt;&gt; s[i];</span><br><span class="line">    <span class="built_in">Dfs</span>(<span class="string">&#x27; &#x27;</span> + s[n], <span class="number">1</span>); <span class="comment">//å‡‘é•¿åº¦</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, length);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="P5194"><a href="#P5194" class="headerlink" title="P5194"></a><a class="link"   href="https://www.luogu.com.cn/problem/P5194" >P5194<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h2><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1005</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, c;</span><br><span class="line">ll ans = <span class="number">-1</span>;</span><br><span class="line"><span class="type">int</span> w[N];</span><br><span class="line">ll pre[N];</span><br><span class="line"><span class="type">bool</span> vis[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Dfs</span><span class="params">(<span class="type">int</span> x, ll sum)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(sum &gt; c)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(pre[x - <span class="number">1</span>] + sum &lt;= c) <span class="comment">// å¦‚æœä¹‹å‰éƒ½å¯ä»¥æ‹¿é‚£å°±éƒ½æ‹¿äº†</span></span><br><span class="line">    &#123;</span><br><span class="line">        ans = <span class="built_in">max</span>(ans, pre[x - <span class="number">1</span>] + sum);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ans = <span class="built_in">max</span>(ans, sum);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = x - <span class="number">1</span>; i &gt;= <span class="number">1</span>; --i)</span><br><span class="line">        <span class="built_in">Dfs</span>(i, sum + w[i]);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;c);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;w[i]);</span><br><span class="line">        pre[i] = pre[i - <span class="number">1</span>] + w[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">Dfs</span>(n + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="æ ‘"><a href="#æ ‘" class="headerlink" title="æ ‘"></a>æ ‘</h1><h2 id="LCA"><a href="#LCA" class="headerlink" title="LCA"></a>LCA</h2><h3 id="P3398"><a href="#P3398" class="headerlink" title="P3398"></a>P3398</h3><p>æ ‘ä¸Šä¸¤æ¡è·¯å¾„æœ‰äº¤ç‚¹ï¼Œè·¯å¾„åˆ†åˆ«ä¸º$a\leftrightarrow{b}$å’Œ$c\leftrightarrow{d}$ï¼Œé‚£ä¹ˆä¸€å®šæœ‰$lca(a,b)$åœ¨$c,d$è·¯å¾„ä¸Šæˆ–è€…$lca(c,d)$åœ¨$a,b$è·¯å¾„ä¸Šã€‚</p>
<p>åˆ¤æ–­ä¸€ä¸ªç‚¹æ˜¯å¦åœ¨ä¸€ä¸ªè·¯å¾„ä¸Šï¼Œå¯ä»¥åˆ¤æ–­è¿™ä¸ªç‚¹åˆ°å·¦å³ç«¯ç‚¹çš„è·ç¦»ä¹‹å’Œæ˜¯å¦ç­‰äºåšå³ç«¯ç‚¹çš„è·ç¦»ï¼Œè€Œå¤„ç†ä¸¤ç‚¹ä¹‹é—´è·ç¦»å¯ä»¥é€šè¿‡$lca$æ¥æ±‚ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n,q,edcnt;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">2e5</span><span class="number">+9</span>;</span><br><span class="line"><span class="type">int</span> fir[N],depth[N],f[N][<span class="number">23</span>];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> to,nxt;</span><br><span class="line">&#125;e[N];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++edcnt].to=v;</span><br><span class="line">    e[edcnt].nxt=fir[u];</span><br><span class="line">    fir[u]=edcnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">(<span class="type">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=fir[u];i;i=e[i].nxt)</span><br><span class="line">        <span class="keyword">if</span>(e[i].to!=f[u][<span class="number">0</span>])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> v=e[i].to;</span><br><span class="line">            depth[v]=depth[u]<span class="number">+1</span>;</span><br><span class="line">            f[v][<span class="number">0</span>]=u;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">21</span>;i++)</span><br><span class="line">                f[v][i]=f[f[v][i<span class="number">-1</span>]][i<span class="number">-1</span>];</span><br><span class="line">            <span class="built_in">init</span>(v);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">lca</span><span class="params">(<span class="type">int</span> p1,<span class="type">int</span> p2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(depth[p1]&lt;depth[p2]) <span class="built_in">swap</span>(p1,p2);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">21</span>;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(depth[f[p1][i]]&gt;=depth[p2]) p1=f[p1][i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(p1==p2) <span class="keyword">return</span> p1;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">21</span>;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(f[p1][i]!=f[p2][i])</span><br><span class="line">            p1=f[p1][i],p2=f[p2][i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> f[p1][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">dist</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> l=<span class="built_in">lca</span>(x,y);</span><br><span class="line">    <span class="keyword">return</span> depth[x]+depth[y]<span class="number">-2</span>*depth[l];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;q);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> u,v;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;u,&amp;v);</span><br><span class="line">        <span class="built_in">add</span>(u,v);</span><br><span class="line">        <span class="built_in">add</span>(v,u);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">init</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=q;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> a,b,c,d;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d%d&quot;</span>,&amp;a,&amp;b,&amp;c,&amp;d);</span><br><span class="line">        <span class="type">int</span> lab=<span class="built_in">lca</span>(a,b),lcd=<span class="built_in">lca</span>(c,d);</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">dist</span>(c,lab)+<span class="built_in">dist</span>(d,lab)==<span class="built_in">dist</span>(c,d)||<span class="built_in">dist</span>(a,lcd)+<span class="built_in">dist</span>(b,lcd)==<span class="built_in">dist</span>(a,b)) <span class="built_in">printf</span>(<span class="string">&quot;Y\n&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;N\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h2 id="ç›´å¾„"><a href="#ç›´å¾„" class="headerlink" title="ç›´å¾„"></a>ç›´å¾„</h2><h3 id="P4408é€ƒå­¦çš„å°å­©"><a href="#P4408é€ƒå­¦çš„å°å­©" class="headerlink" title="P4408é€ƒå­¦çš„å°å­©"></a><a class="link"   href="https://www.luogu.com.cn/problem/P4408" >P4408é€ƒå­¦çš„å°å­©<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>é¦–å…ˆï¼Œè¿™æ˜¯æ£µæ ‘ï¼Œæœ€åæƒ…å†µä¸‹ä¸¤ä¸ªæœ‹å‹çš„å®¶æ­£å¥½æ˜¯æ ‘çš„ç›´å¾„çš„ä¸¤ä¸ªç«¯ç‚¹ï¼Œç„¶åæˆ‘ä»¬æšä¸¾ä¸€ä¸‹æ ‘ä¸Šæ¯ä¸ªç‚¹ï¼ˆä¸åŒ…å«ç›´å¾„ç«¯ç‚¹ï¼‰ï¼Œçœ‹ä¸‹è¿™ä¸ªç‚¹åˆ°ä¸¤ä¸ªç«¯ç‚¹ä¹‹é—´è·ç¦»çš„æœ€å°å€¼æœ€å¤§å³å¯ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">2e5</span><span class="number">+10</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">int</span> n,m,edcnt;</span><br><span class="line">ll ans;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> nxt,to,val;</span><br><span class="line">&#125;e[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="type">int</span> fir[N];</span><br><span class="line"><span class="type">int</span> F,G;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v,<span class="type">int</span> w)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++edcnt].to=v;</span><br><span class="line">    e[edcnt].val=w;</span><br><span class="line">    e[edcnt].nxt=fir[u];</span><br><span class="line">    fir[u]=edcnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> df[N][<span class="number">23</span>],depth[N];</span><br><span class="line">ll d[N];<span class="comment">//è¯¥ç‚¹åˆ°æ ¹çš„æœ€çŸ­è·ç¦»</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> fa)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=fir[u];i;i=e[i].nxt)</span><br><span class="line">        <span class="keyword">if</span>(e[i].to!=fa)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> v=e[i].to;</span><br><span class="line">            df[v][<span class="number">0</span>]=u;</span><br><span class="line">            depth[v]=depth[u]<span class="number">+1</span>;</span><br><span class="line">            d[v]=d[u]+e[i].val;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=<span class="number">22</span>;j++)</span><br><span class="line">                df[v][j]=df[df[v][j<span class="number">-1</span>]][j<span class="number">-1</span>];</span><br><span class="line">            <span class="built_in">dfs</span>(v,u);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">lca</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    depth[<span class="number">0</span>]=<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">if</span>(depth[x]&lt;depth[y]) <span class="built_in">swap</span>(x,y);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">22</span>;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">        <span class="keyword">if</span>(depth[df[x][i]]&gt;=depth[y])</span><br><span class="line">            x=df[x][i];</span><br><span class="line">    <span class="keyword">if</span>(x==y) <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">22</span>;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">        <span class="keyword">if</span>(df[x][i]!=df[y][i])</span><br><span class="line">            x=df[x][i],y=df[y][i];</span><br><span class="line">    <span class="keyword">return</span> df[x][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">dist</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> d[x]+d[y]<span class="number">-2</span>*d[<span class="built_in">lca</span>(x,y)];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs1</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> fa,ll sum)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(sum&gt;=ans)</span><br><span class="line">    &#123;</span><br><span class="line">        ans=sum;</span><br><span class="line">        F=u;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=fir[u];i;i=e[i].nxt)</span><br><span class="line">        <span class="keyword">if</span>(e[i].to!=fa) <span class="built_in">dfs1</span>(e[i].to,u,sum+e[i].val);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs2</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> fa,ll sum)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(sum&gt;=ans)</span><br><span class="line">    &#123;</span><br><span class="line">        ans=sum;</span><br><span class="line">        G=u;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=fir[u];i;i=e[i].nxt)</span><br><span class="line">        <span class="keyword">if</span>(e[i].to!=fa) <span class="built_in">dfs2</span>(e[i].to,u,sum+e[i].val);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> u,v,w;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;u,&amp;v,&amp;w);</span><br><span class="line">        <span class="built_in">add</span>(u,v,w);</span><br><span class="line">        <span class="built_in">add</span>(v,u,w);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">1</span>,<span class="number">-1</span>);</span><br><span class="line">    <span class="built_in">dfs1</span>(<span class="number">1</span>,<span class="number">-1</span>,<span class="number">0</span>);</span><br><span class="line">    ans=<span class="number">-1</span>;</span><br><span class="line">    <span class="built_in">dfs2</span>(F,<span class="number">-1</span>,<span class="number">0</span>);</span><br><span class="line">    ans=<span class="number">-1</span>;</span><br><span class="line">    ll len=<span class="built_in">dist</span>(F,G);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">if</span>(i!=F&amp;&amp;i!=G)</span><br><span class="line">            ans=<span class="built_in">max</span>(ans,<span class="built_in">min</span>(<span class="built_in">dist</span>(i,F),<span class="built_in">dist</span>(i,G)));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,ans+len);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P3304ç›´å¾„"><a href="#P3304ç›´å¾„" class="headerlink" title="P3304ç›´å¾„"></a><a class="link"   href="https://www.luogu.com.cn/problem/P3304" >P3304ç›´å¾„<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>è¿™é“é¢˜é¦–å…ˆ DFS ä¸¤éæ±‚å‡ºç›´å¾„ä»¥åŠç›´å¾„çš„ä¸¤ä¸ªç«¯ç‚¹ï¼Œç„¶åå† DFS ä¸€éæ‰¾åˆ°ç›´å¾„çš„è·¯å¾„ï¼Œç„¶åæ ‡è®°è¿™æ¡è·¯å¾„ä¸Šçš„æ¯ä¸€æ¡è¾¹ï¼Œç„¶åå†åˆ†åˆ«è¿›è¡Œä¸¤æ¬¡ DFSï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­è®°å½•æ¯ä¸ªç‚¹ä»¥A&#x2F;B ä¸ºæ ¹èŠ‚ç‚¹æ—¶ï¼Œåˆ°å­æ ‘ä¸­éç›´å¾„çš„æœ€é•¿è·¯å¾„ï¼Œå¦‚æœè¿™ä¸ªæœ€é•¿è·¯å¾„ç­‰ä¸è¯¥ç‚¹åˆ°å¯¹åº”ç›´å¾„ç«¯ç‚¹çš„è·ç¦»çš„è¯ï¼Œé‚£ä¹ˆå°±å‡ºç°äº†åˆ†å‰ï¼Œè¿™æ—¶å€™å°±å¯ä»¥è¢«æ›¿ä»£ï¼Œæ‰€ä»¥è¿™ä¸ªç‚¹ä¸‹é¢å°±ä¸å†æ˜¯æ‰€æœ‰ç›´å¾„çš„å…¬å…±è¾¹ï¼Œå°±è¿™æ ·ä¸æ–­å‘å†…ç¼©ï¼Œä»ä¸€ç«¯ç¼©å®Œå†ç¼©å¦ä¸€ç«¯ï¼Œå‰©ä¸‹çš„å°±æ˜¯å…¬å…±è¾¹ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">200010</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">int</span> n,edcnt=<span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> A,B;</span><br><span class="line">ll dist_AB,flen_A[N],flen_B[N],lins,length[N];</span><br><span class="line"><span class="type">int</span> fir[N],depth[N],f[N][<span class="number">25</span>];</span><br><span class="line"><span class="type">int</span> line[N],cnt;</span><br><span class="line"><span class="type">bool</span> bj;</span><br><span class="line"><span class="type">bool</span> vis[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; point;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> to,nxt,val;</span><br><span class="line">&#125;e[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v,<span class="type">int</span> w)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++edcnt].to=v;</span><br><span class="line">    e[edcnt].nxt=fir[u];</span><br><span class="line">    e[edcnt].val=w;</span><br><span class="line">    fir[u]=edcnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">lca</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    depth[<span class="number">0</span>]=<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">if</span>(depth[x]&lt;depth[y]) <span class="built_in">swap</span>(x,y);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">23</span>;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">        <span class="keyword">if</span>(depth[f[x][i]]&gt;=depth[y]) x=f[x][i];</span><br><span class="line">    <span class="keyword">if</span>(x==y) <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">23</span>;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">        <span class="keyword">if</span>(f[x][i]!=f[y][i])</span><br><span class="line">            x=f[x][i],y=f[y][i];</span><br><span class="line">    <span class="keyword">return</span> f[x][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">dist_1</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> depth[x]+depth[y]<span class="number">-2</span>*depth[<span class="built_in">lca</span>(x,y)];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">dist_2</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> length[x]+length[y]<span class="number">-2</span>*length[<span class="built_in">lca</span>(x,y)];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> fa,ll sum,<span class="type">int</span> first)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(sum&gt;lins&amp;&amp;first&lt;=<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        lins=sum;</span><br><span class="line">        <span class="keyword">if</span>(first==<span class="number">0</span>) A=u;</span><br><span class="line">        <span class="keyword">if</span>(first==<span class="number">1</span>) B=u,dist_AB=sum;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=fir[u];i;i=e[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> v=e[i].to;</span><br><span class="line">        <span class="keyword">if</span>(v==fa) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">if</span>(first==<span class="number">0</span>) </span><br><span class="line">        &#123;</span><br><span class="line">            depth[v]=depth[u]<span class="number">+1</span>;</span><br><span class="line">            length[v]=length[u]+e[i].val;</span><br><span class="line">            f[v][<span class="number">0</span>]=u;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">23</span>;i++)</span><br><span class="line">                f[v][i]=f[f[v][i<span class="number">-1</span>]][i<span class="number">-1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">dfs</span>(v,u,sum+e[i].val,first);</span><br><span class="line">        <span class="keyword">if</span>(first==<span class="number">3</span>&amp;&amp;vis[i]==<span class="literal">false</span>) flen_A[u]=<span class="built_in">max</span>(flen_A[u],flen_A[v]+e[i].val);</span><br><span class="line">        <span class="keyword">if</span>(first==<span class="number">4</span>&amp;&amp;vis[i]==<span class="literal">false</span>) flen_B[u]=<span class="built_in">max</span>(flen_B[u],flen_B[v]+e[i].val);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs_again</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> fa)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(u==B)</span><br><span class="line">    &#123;</span><br><span class="line">        point.<span class="built_in">emplace_back</span>(u);</span><br><span class="line">        bj=<span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=fir[u];i;i=e[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> v=e[i].to;</span><br><span class="line">        <span class="keyword">if</span>(v==fa) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="built_in">dfs_again</span>(v,u);</span><br><span class="line">        <span class="keyword">if</span>(bj)</span><br><span class="line">        &#123;</span><br><span class="line">            vis[i]=vis[i^<span class="number">1</span>]=<span class="literal">true</span>;</span><br><span class="line">            point.<span class="built_in">emplace_back</span>(u);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="type">int</span> u,v,w;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;u,&amp;v,&amp;w);</span><br><span class="line">        <span class="built_in">add</span>(u,v,w);</span><br><span class="line">        <span class="built_in">add</span>(v,u,w);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">dfs</span>(u,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">0</span>);<span class="comment">//A</span></span><br><span class="line">    lins=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">dfs</span>(A,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">1</span>);<span class="comment">//B</span></span><br><span class="line">    <span class="built_in">dfs_again</span>(A,<span class="number">-1</span>);<span class="comment">//è·¯å¾„</span></span><br><span class="line">    <span class="built_in">dfs</span>(A,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">3</span>);<span class="comment">//flenA</span></span><br><span class="line">    <span class="built_in">dfs</span>(B,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">4</span>);<span class="comment">//flenB</span></span><br><span class="line">    <span class="comment">// cout&lt;&lt;A&lt;&lt;endl&lt;&lt;B&lt;&lt;endl;</span></span><br><span class="line">    <span class="type">int</span> ans1=<span class="built_in">dist_1</span>(A,B);</span><br><span class="line">    <span class="comment">// printf(&quot;ans[1]=%d\n&quot;,ans1);</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;i:point)</span><br><span class="line">        line[++cnt]=i;<span class="comment">//,printf(&quot;%d\n&quot;,i)</span></span><br><span class="line">    <span class="comment">// for(int i=1;i&lt;=n;i++)</span></span><br><span class="line">    <span class="comment">//     printf(&quot;flen_A[%d]=%d,flen_B[%d]=%d\n&quot;,i,flen_A[i],i,flen_B[i]);</span></span><br><span class="line">    <span class="comment">// printf(&quot;%d\n&quot;,cnt);</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=cnt;i++)</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">dist_2</span>(line[i],A)==flen_B[line[i]])</span><br><span class="line">        &#123;</span><br><span class="line">            ans1-=<span class="built_in">dist_1</span>(A,line[i]);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=cnt;j&gt;=<span class="number">1</span>;j--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">dist_2</span>(line[j],B)==flen_A[line[j]])</span><br><span class="line">        &#123;</span><br><span class="line">            ans1-=<span class="built_in">dist_1</span>(B,line[j]);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n%d&quot;</span>,dist_AB,ans1);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h2 id="åŸºç¯æ ‘"><a href="#åŸºç¯æ ‘" class="headerlink" title="åŸºç¯æ ‘"></a>åŸºç¯æ ‘</h2><h3 id="åŸºç¡€ï¼šæ‰¾ç¯"><a href="#åŸºç¡€ï¼šæ‰¾ç¯" class="headerlink" title="åŸºç¡€ï¼šæ‰¾ç¯"></a>åŸºç¡€ï¼šæ‰¾ç¯</h3><p><a class="link"   href="https://www.luogu.com.cn/problem/P8655" >P8655<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e5</span><span class="number">+7</span>;</span><br><span class="line"><span class="type">int</span> n,edcnt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> to,nxt;</span><br><span class="line">&#125;e[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="type">int</span> fir[N];</span><br><span class="line"><span class="type">bool</span> vis[N];</span><br><span class="line"><span class="type">bool</span> bj;</span><br><span class="line"><span class="type">int</span> st;</span><br><span class="line"><span class="type">int</span> ans[N];</span><br><span class="line"><span class="type">int</span> cnt;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; mp;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++edcnt].to=v;</span><br><span class="line">    e[edcnt].nxt=fir[u];</span><br><span class="line">    fir[u]=edcnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> fa)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=fir[u];i;i=e[i].nxt)</span><br><span class="line">        <span class="keyword">if</span>(e[i].to!=fa)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> v=e[i].to;</span><br><span class="line">            <span class="keyword">if</span>(vis[v])</span><br><span class="line">            &#123;</span><br><span class="line">                mp.<span class="built_in">push_back</span>(v);</span><br><span class="line">                st=v;</span><br><span class="line">                bj=<span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            vis[v]=<span class="literal">true</span>;</span><br><span class="line">            <span class="built_in">dfs</span>(v,u);</span><br><span class="line">            <span class="keyword">if</span>(bj)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(v==st)</span><br><span class="line">                &#123;</span><br><span class="line">                    st=<span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(st)</span><br><span class="line">                &#123;</span><br><span class="line">                    mp.<span class="built_in">push_back</span>(v);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            vis[v]=<span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> u,v;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;u,&amp;v);</span><br><span class="line">        <span class="built_in">add</span>(u,v);</span><br><span class="line">        <span class="built_in">add</span>(v,u);</span><br><span class="line">    &#125;</span><br><span class="line">    vis[<span class="number">1</span>]=<span class="literal">true</span>;</span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">1</span>,<span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;i:mp)</span><br><span class="line">        ans[++cnt]=i;</span><br><span class="line">    <span class="built_in">sort</span>(ans<span class="number">+1</span>,ans+cnt<span class="number">+1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=cnt;i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,ans[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="P2607éª‘å£«"><a href="#P2607éª‘å£«" class="headerlink" title="P2607éª‘å£«"></a><a class="link"   href="https://www.luogu.com.cn/problem/P2607" >P2607éª‘å£«<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>é¦–å…ˆå…ˆæ‰¾ç¯æŠŠè¿™ä¸ªç¯çš„ä¸¤ä¸ªç«¯ç‚¹å’Œè¿æ¥ä¸¤ä¸ªç«¯ç‚¹çš„è¾¹æ‰¾å‡ºï¼Œåœ¨æ ‘å½¢DPçš„æ—¶å€™æ³¨æ„ä¸¤ä¸ªç«¯ç‚¹ä¸èƒ½åŒæ—¶é€‰å³å¯ï¼Œç”±äºæ˜¯ç¯ï¼Œæ‰€ä»¥è¦å¯¹ä¸¤ä¸ªç«¯ç‚¹åˆ†åˆ«è¿›è¡ŒDPã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e6</span><span class="number">+7</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">int</span> n,edcnt=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> to,nxt;</span><br><span class="line">&#125;e[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="type">int</span> fir[N];</span><br><span class="line"><span class="type">bool</span> vis[N];</span><br><span class="line"><span class="type">int</span> A,B,E;</span><br><span class="line">ll ans;</span><br><span class="line">ll f[N][<span class="number">2</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++edcnt].to=v;</span><br><span class="line">    e[edcnt].nxt=fir[u];</span><br><span class="line">    fir[u]=edcnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> battleEffectiveness[N];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Find</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> fa)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    vis[u]=<span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=fir[u];i;i=e[i].nxt)</span><br><span class="line">        <span class="keyword">if</span>(e[i].to!=fa)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> v=e[i].to;</span><br><span class="line">            <span class="keyword">if</span>(vis[v])</span><br><span class="line">            &#123;</span><br><span class="line">                A=u;</span><br><span class="line">                B=v;</span><br><span class="line">                E=i;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">Find</span>(v,u);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dp</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> fa)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    f[u][<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">    f[u][<span class="number">1</span>]=battleEffectiveness[u];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=fir[u];i;i=e[i].nxt)</span><br><span class="line">        <span class="keyword">if</span>(e[i].to!=fa&amp;&amp;i!=E&amp;&amp;(i^<span class="number">1</span>)!=E)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> v=e[i].to;</span><br><span class="line">            <span class="built_in">dp</span>(v,u);</span><br><span class="line">            f[u][<span class="number">0</span>]+=<span class="built_in">max</span>(f[v][<span class="number">0</span>],f[v][<span class="number">1</span>]);</span><br><span class="line">            f[u][<span class="number">1</span>]+=f[v][<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> hate;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;battleEffectiveness[i],&amp;hate);</span><br><span class="line">        <span class="built_in">add</span>(i,hate);</span><br><span class="line">        <span class="built_in">add</span>(hate,i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(vis[i]) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="built_in">Find</span>(i,<span class="number">-1</span>);</span><br><span class="line">        <span class="built_in">dp</span>(A,<span class="number">-1</span>);</span><br><span class="line">        ll temp=f[A][<span class="number">0</span>];</span><br><span class="line">        <span class="built_in">dp</span>(B,<span class="number">-1</span>);</span><br><span class="line">        temp=<span class="built_in">max</span>(temp,f[B][<span class="number">0</span>]);</span><br><span class="line">        ans+=temp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h1 id="çº¿æ®µæ ‘"><a href="#çº¿æ®µæ ‘" class="headerlink" title="çº¿æ®µæ ‘"></a>çº¿æ®µæ ‘</h1><h2 id="æ‰«æçº¿"><a href="#æ‰«æçº¿" class="headerlink" title="æ‰«æçº¿"></a>æ‰«æçº¿</h2><h3 id="AcWing247"><a href="#AcWing247" class="headerlink" title="AcWing247"></a>AcWing247</h3><p>å°†æ¨ªåæ ‡ä»å°åˆ°å¤§æ’åºï¼Œè€Œçºµåæ ‡ç”±äºæ˜¯å®æ•°æ‰€ä»¥éœ€è¦å¯¹å®ƒçš„ä¸‹æ ‡è¿›è¡Œç¦»æ•£åŒ–ï¼Œçº¿æ®µæ ‘çš„ä¸€ä¸ªèŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ªåŒºé—´ï¼Œnä¸ªæ•°é‚£ä¹ˆå°±æœ‰$n-1$ä¸ªåŒºé—´ä¹Ÿå°±æ˜¯$n-1$ä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥å»ºæ ‘æ˜¯ä»$1\sim{siz-1}$ï¼Œä¹Ÿå°±æ˜¯$0\sim{siz-2}$ï¼ŒæŸ¥è¯¢å’Œä¿®æ”¹æ—¶æ³¨æ„å³ç«¯ç‚¹è¦åŠ ä¸€ã€‚</p>
<p>é¢ç§¯å°±æŒ‰xè½´ä»å·¦å¾€å³æ‰«æçº¿ï¼Œæ¯å—é¢ç§¯ç›¸åŠ å³å¯ã€‚</p>
<p>$cnt$ä»£è¡¨å½“å‰è¢«å‡ å—çŸ©å½¢è¦†ç›–ï¼Œ$len$ä»£è¡¨å½“å‰è¢«è¦†ç›–çš„é•¿åº¦ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e5</span><span class="number">+10</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">segment</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">double</span> x,y1,y2;</span><br><span class="line">    <span class="type">int</span> k;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span>&lt;(<span class="type">const</span> segment &amp;a)<span class="type">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> x&lt;a.x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;seg[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> l,r;</span><br><span class="line">    <span class="type">int</span> cnt;</span><br><span class="line">    <span class="type">double</span> len;</span><br><span class="line">&#125;tr[N&lt;&lt;<span class="number">3</span>];</span><br><span class="line">vector&lt;<span class="type">double</span>&gt; ys; </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">double</span> y)</span><span class="comment">//æŸ¥æ‰¾ç¦»æ•£åŒ–åçš„ä¸‹æ ‡</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">lower_bound</span>(ys.<span class="built_in">begin</span>(),ys.<span class="built_in">end</span>(),y)-ys.<span class="built_in">begin</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pushup</span><span class="params">(<span class="type">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(tr[u].cnt)</span><br><span class="line">        tr[u].len=(ys[tr[u].r<span class="number">+1</span>]-ys[tr[u].l]);<span class="comment">//èŠ‚ç‚¹å¯¹åº”åŒºé—´ï¼Œæ‰€ä»¥å³ç«¯ç‚¹ä¸‹æ ‡è¦åŠ ä¸€</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(tr[u].l!=tr[u].r)<span class="comment">//ä¸æ˜¯å¶å­èŠ‚ç‚¹å†ç”¨å„¿å­æ›´æ–°</span></span><br><span class="line">        tr[u].len=tr[u&lt;&lt;<span class="number">1</span>].len+tr[u&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].len;</span><br><span class="line">    <span class="keyword">else</span> tr[u].len=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> l,<span class="type">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    tr[u].l=l,tr[u].r=r;</span><br><span class="line">    <span class="keyword">if</span>(l==r)</span><br><span class="line">    &#123;</span><br><span class="line">        tr[u].len=<span class="number">0</span>,tr[u].cnt=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">build</span>(u&lt;&lt;<span class="number">1</span>,l,mid),<span class="built_in">build</span>(u&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,mid<span class="number">+1</span>,r);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">modify</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> l,<span class="type">int</span> r,<span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(tr[u].l&gt;=l&amp;&amp;tr[u].r&lt;=r) </span><br><span class="line">    &#123;</span><br><span class="line">        tr[u].cnt+=v;</span><br><span class="line">        <span class="built_in">pushup</span>(u);<span class="comment">//ç®—ä¸€ä¸‹è¦ä¸è¦æ›´æ–°</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> mid=(tr[u].l+tr[u].r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(l&lt;=mid) <span class="built_in">modify</span>(u&lt;&lt;<span class="number">1</span>,l,r,v);</span><br><span class="line">    <span class="keyword">if</span>(r&gt;mid) <span class="built_in">modify</span>(u&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,l,r,v);</span><br><span class="line">    <span class="built_in">pushup</span>(u);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> t=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n),n)</span><br><span class="line">    &#123;</span><br><span class="line">        ys.<span class="built_in">clear</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>,j=<span class="number">0</span>;i&lt;=n;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">double</span> x1,x2,y1,y2;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%lf%lf%lf%lf&quot;</span>,&amp;x1,&amp;y1,&amp;x2,&amp;y2);</span><br><span class="line">            seg[j++]=&#123;x1,y1,y2,<span class="number">1</span>&#125;;</span><br><span class="line">            seg[j++]=&#123;x2,y1,y2,<span class="number">-1</span>&#125;;</span><br><span class="line">            ys.<span class="built_in">push_back</span>(y1),ys.<span class="built_in">push_back</span>(y2);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">sort</span>(ys.<span class="built_in">begin</span>(),ys.<span class="built_in">end</span>());</span><br><span class="line">        ys.<span class="built_in">erase</span>(<span class="built_in">unique</span>(ys.<span class="built_in">begin</span>(),ys.<span class="built_in">end</span>()),ys.<span class="built_in">end</span>());</span><br><span class="line">        <span class="built_in">sort</span>(seg,seg+n*<span class="number">2</span>);</span><br><span class="line">        <span class="built_in">build</span>(<span class="number">1</span>,<span class="number">0</span>,(<span class="type">int</span>)ys.<span class="built_in">size</span>()<span class="number">-2</span>);<span class="comment">//å­˜çš„æ˜¯åŒºé—´</span></span><br><span class="line">        <span class="type">double</span> res=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n*<span class="number">2</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(i&gt;<span class="number">0</span>) res+=tr[<span class="number">1</span>].len*(seg[i].x-seg[i<span class="number">-1</span>].x);</span><br><span class="line">            <span class="built_in">modify</span>(<span class="number">1</span>,<span class="built_in">find</span>(seg[i].y1),<span class="built_in">find</span>(seg[i].y2)<span class="number">-1</span>,seg[i].k);<span class="comment">//å› ä¸ºå­˜çš„æ˜¯åŒºé—´è€Œä¸æ˜¯ç‚¹ï¼Œæ‰€ä»¥å³ç«¯ç‚¹è¦å‡ä¸€ï¼Œå› ä¸ºä¸€å·èŠ‚ç‚¹ä»£è¡¨çš„æ˜¯1~2ï¼Œé‚£ä¹ˆl~rå¯¹åº”çš„èŠ‚ç‚¹å°±æ˜¯l~r-1</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Test case #%d\n&quot;</span>,t++);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Total explored area: %.2lf\n\n&quot;</span>,res);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P5490æ‰«æçº¿"><a href="#P5490æ‰«æçº¿" class="headerlink" title="P5490æ‰«æçº¿"></a><a class="link"   href="https://www.luogu.com.cn/problem/P5490" >P5490æ‰«æçº¿<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e5</span><span class="number">+7</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">segment</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> x,y1,y2,k;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span>&lt;(<span class="type">const</span> segment &amp;a)<span class="type">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> x&lt;a.x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;seg[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> l,r;</span><br><span class="line">    <span class="type">int</span> len,cnt;</span><br><span class="line">&#125;tr[N&lt;&lt;<span class="number">3</span>];</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; mem;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">lower_bound</span>(mem.<span class="built_in">begin</span>(),mem.<span class="built_in">end</span>(),x)-mem.<span class="built_in">begin</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> l,<span class="type">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    tr[u].l=l,tr[u].r=r;</span><br><span class="line">    <span class="keyword">if</span>(tr[u].l==tr[u].r)</span><br><span class="line">    &#123;</span><br><span class="line">        tr[u].len=tr[u].cnt=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">build</span>(u&lt;&lt;<span class="number">1</span>,l,mid);</span><br><span class="line">    <span class="built_in">build</span>(u&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,mid<span class="number">+1</span>,r);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pushup</span><span class="params">(<span class="type">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(tr[u].cnt) tr[u].len=mem[tr[u].r<span class="number">+1</span>]-mem[tr[u].l];</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(tr[u].l!=tr[u].r) tr[u].len=tr[u&lt;&lt;<span class="number">1</span>].len+tr[u&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].len;</span><br><span class="line">    <span class="keyword">else</span> tr[u].len=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">modify</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> l,<span class="type">int</span> r,<span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(tr[u].l&gt;=l&amp;&amp;tr[u].r&lt;=r)</span><br><span class="line">    &#123;</span><br><span class="line">        tr[u].cnt+=v;</span><br><span class="line">        <span class="built_in">pushup</span>(u);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> mid=(tr[u].l+tr[u].r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(l&lt;=mid) <span class="built_in">modify</span>(u&lt;&lt;<span class="number">1</span>,l,r,v);</span><br><span class="line">    <span class="keyword">if</span>(r&gt;mid) <span class="built_in">modify</span>(u&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,l,r,v);</span><br><span class="line">    <span class="built_in">pushup</span>(u);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>,j=<span class="number">0</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> x1,y1,x2,y2;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d%d&quot;</span>,&amp;x1,&amp;y1,&amp;x2,&amp;y2);</span><br><span class="line">        seg[j++]=&#123;x1,y1,y2,<span class="number">1</span>&#125;;</span><br><span class="line">        seg[j++]=&#123;x2,y1,y2,<span class="number">-1</span>&#125;;</span><br><span class="line">        mem.<span class="built_in">push_back</span>(y1),mem.<span class="built_in">push_back</span>(y2);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">build</span>(<span class="number">1</span>,<span class="number">0</span>,mem.<span class="built_in">size</span>()<span class="number">-2</span>);</span><br><span class="line">    <span class="built_in">sort</span>(mem.<span class="built_in">begin</span>(),mem.<span class="built_in">end</span>());</span><br><span class="line">    mem.<span class="built_in">erase</span>(<span class="built_in">unique</span>(mem.<span class="built_in">begin</span>(),mem.<span class="built_in">end</span>()),mem.<span class="built_in">end</span>());</span><br><span class="line">    <span class="built_in">sort</span>(seg,seg+n*<span class="number">2</span>);</span><br><span class="line">    ll res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n*<span class="number">2</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(i&gt;<span class="number">0</span>) res+=<span class="number">1ll</span>*tr[<span class="number">1</span>].len*(seg[i].x-seg[i<span class="number">-1</span>].x);</span><br><span class="line">        <span class="built_in">modify</span>(<span class="number">1</span>,<span class="built_in">find</span>(seg[i].y1),<span class="built_in">find</span>(seg[i].y2)<span class="number">-1</span>,seg[i].k);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="P1471"><a href="#P1471" class="headerlink" title="P1471"></a>P1471</h2><p>è¦æ±‚<strong>æ–¹å·®</strong>ï¼Œæˆ‘ä»¬éœ€è¦ç»´æŠ¤çš„ä¿¡æ¯æœ‰ <strong>åŒºé—´å’Œ</strong>ï¼Œ<strong>åŒºé—´å¹³æ–¹å’Œ</strong>ã€‚</p>
<p>é‚£ä¹ˆåŒºé—´ä¿®æ”¹æ€ä¹ˆä¸‹æ”¾æ ‡è®°å‘¢ï¼Ÿ</p>
<p>é€šè¿‡ç®€å•çš„å…¬å¼æ¨å¯¼ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202308092122395.webp"
                      alt="image.png"
                ></p>
<p>é‚£ä¹ˆè¿™æ ·ä¸‹æ”¾æ ‡è®°å°±å¾ˆç®€å•äº†ã€‚</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¦<strong>å…ˆæ›´æ–°åŒºé—´å¹³æ–¹å’Œ</strong>ï¼Œå› ä¸ºè¿™é‡Œç”¨åˆ°äº†æ›´æ–°ä¹‹å‰çš„åŒºé—´å’Œã€‚</p>
<p>æ–¹å·®å˜›å°±å¾ˆå¥½æ±‚äº†ï¼š</p>
<p>$$<br>s^2&#x3D;\sum_{i&#x3D;l}^{r}{a_i}^2-\overline{a}^2<br>$$</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e5</span><span class="number">+10</span>;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> l,r;</span><br><span class="line">    <span class="type">double</span> a,b,add;<span class="comment">//åŒºé—´å’Œï¼ŒåŒºé—´å¹³æ–¹å’Œï¼Œæ‡’æ ‡è®°</span></span><br><span class="line">&#125;tr[N&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="type">double</span> a[N];</span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pushup</span><span class="params">(<span class="type">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    tr[u].a=tr[u&lt;&lt;<span class="number">1</span>].a+tr[u&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].a;</span><br><span class="line">    tr[u].b=tr[u&lt;&lt;<span class="number">1</span>].b+tr[u&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pushdown</span><span class="params">(<span class="type">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(tr[u].add)</span><br><span class="line">    &#123;</span><br><span class="line">        node &amp;t=tr[u],&amp;l=tr[u&lt;&lt;<span class="number">1</span>],&amp;r=tr[u&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</span><br><span class="line">        l.b+=<span class="number">2</span>*t.add*l.a+(l.r-l.l<span class="number">+1</span>)*t.add*t.add;<span class="comment">//æ³¨æ„ä¿®æ”¹é¡ºåºï¼Œä¿®æ”¹bå€¼ç”¨çš„æ˜¯åŸæ¥çš„a</span></span><br><span class="line">        r.b+=<span class="number">2</span>*t.add*r.a+(r.r-r.l<span class="number">+1</span>)*t.add*t.add;</span><br><span class="line">        r.a+=(r.r-r.l<span class="number">+1</span>)*t.add;</span><br><span class="line">        l.a+=(l.r-l.l<span class="number">+1</span>)*t.add;</span><br><span class="line">        r.add+=t.add;</span><br><span class="line">        l.add+=t.add;</span><br><span class="line">        t.add=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> l,<span class="type">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    tr[u].l=l,tr[u].r=r,tr[u].add=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(l==r)</span><br><span class="line">    &#123;</span><br><span class="line">        tr[u].a=a[r];</span><br><span class="line">        tr[u].b=a[r]*a[r];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">build</span>(u&lt;&lt;<span class="number">1</span>,l,mid),<span class="built_in">build</span>(u&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,mid<span class="number">+1</span>,r);</span><br><span class="line">    <span class="built_in">pushup</span>(u);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">modify</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> l,<span class="type">int</span> r,<span class="type">double</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(tr[u].l&gt;=l&amp;&amp;tr[u].r&lt;=r)</span><br><span class="line">    &#123;</span><br><span class="line">        tr[u].add+=x;</span><br><span class="line">        tr[u].b+=(tr[u].r-tr[u].l<span class="number">+1</span>)*x*x<span class="number">+2</span>*x*tr[u].a;<span class="comment">//æ³¨æ„é¡ºåº</span></span><br><span class="line">        tr[u].a+=(tr[u].r-tr[u].l<span class="number">+1</span>)*x;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">pushdown</span>(u);</span><br><span class="line">    <span class="type">int</span> mid=(tr[u].l+tr[u].r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(l&lt;=mid) <span class="built_in">modify</span>(u&lt;&lt;<span class="number">1</span>,l,r,x);</span><br><span class="line">    <span class="keyword">if</span>(r&gt;mid) <span class="built_in">modify</span>(u&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,l,r,x);</span><br><span class="line">    <span class="built_in">pushup</span>(u);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">query_0</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> l,<span class="type">int</span> r)</span><span class="comment">//åŒºé—´å’Œ</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(tr[u].l&gt;=l&amp;&amp;tr[u].r&lt;=r) <span class="keyword">return</span> tr[u].a;</span><br><span class="line">    <span class="built_in">pushdown</span>(u);</span><br><span class="line">    <span class="type">int</span> mid=(tr[u].l+tr[u].r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="type">double</span> ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(l&lt;=mid) ans+=<span class="built_in">query_0</span>(u&lt;&lt;<span class="number">1</span>,l,r);</span><br><span class="line">    <span class="keyword">if</span>(r&gt;mid) ans+=<span class="built_in">query_0</span>(u&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,l,r);</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">query_1</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> l,<span class="type">int</span> r)</span><span class="comment">//å¹³æ–¹å’Œ</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(tr[u].l&gt;=l&amp;&amp;tr[u].r&lt;=r) <span class="keyword">return</span> tr[u].b;</span><br><span class="line">    <span class="built_in">pushdown</span>(u);</span><br><span class="line">    <span class="type">int</span> mid=(tr[u].l+tr[u].r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="type">double</span> ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(l&lt;=mid) ans+=<span class="built_in">query_1</span>(u&lt;&lt;<span class="number">1</span>,l,r);</span><br><span class="line">    <span class="keyword">if</span>(r&gt;mid) ans+=<span class="built_in">query_1</span>(u&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,l,r);</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lf&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="built_in">build</span>(<span class="number">1</span>,<span class="number">1</span>,n);</span><br><span class="line">    <span class="keyword">while</span>(m--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> op,l,r;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;op,&amp;l,&amp;r);</span><br><span class="line">        <span class="keyword">if</span>(op==<span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">double</span> k;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%lf&quot;</span>,&amp;k);</span><br><span class="line">            <span class="built_in">modify</span>(<span class="number">1</span>,l,r,k);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(op==<span class="number">2</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%.4lf\n&quot;</span>,<span class="built_in">query_0</span>(<span class="number">1</span>,l,r)/(r-l<span class="number">+1</span>));</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(op==<span class="number">3</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%.4lf\n&quot;</span>,<span class="built_in">query_1</span>(<span class="number">1</span>,l,r)/(r-l<span class="number">+1</span>)-(<span class="built_in">query_0</span>(<span class="number">1</span>,l,r)/(r-l<span class="number">+1</span>))*(<span class="built_in">query_0</span>(<span class="number">1</span>,l,r)/(r-l<span class="number">+1</span>)));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="æ ‘çŠ¶æ•°ç»„"><a href="#æ ‘çŠ¶æ•°ç»„" class="headerlink" title="æ ‘çŠ¶æ•°ç»„"></a>æ ‘çŠ¶æ•°ç»„</h1><h2 id="P1908"><a href="#P1908" class="headerlink" title="P1908"></a>P1908</h2><blockquote>
<p>ç»å…¸çš„é€†åºå¯¹é—®é¢˜ã€‚</p>
</blockquote>
<p>å°†æ•°å­—çœ‹ä½œæ ‘çŠ¶æ•°ç»„çš„ä¸‹æ ‡ï¼Œç”±äºæ•°å­—çš„å€¼åŸŸå¯èƒ½ä¼šå¾ˆå¤§ï¼Œå› æ­¤è¦å…ˆè¿›è¡Œç¦»æ•£åŒ–ã€‚</p>
<p>å‡å¦‚æ˜¯æ­£åºï¼Œæ¯æ¬¡æŠŠå¯¹åº”æ•°å­—ä¸‹æ ‡çš„å…ƒç´ åŠ ä¸€ï¼Œé‚£ä¹ˆå½“å‰å·²ç»å¤„ç†çš„æ•°å­—çš„ä¸ªæ•°å‡å»å½“å‰æ•°å­—çš„ä¸‹æ ‡çš„å‰ç¼€å’Œå³ä¸ºä»¥è¯¥æ•°å­—ä¸ºè¾ƒå°æ•°çš„é€†åºå¯¹çš„ä¸ªæ•°ã€‚</p>
<p>å› ä¸ºå‡å»å½“å‰æ•°å­—ä¸‹æ ‡çš„å‰ç¼€å’Œå³ä¸ºå‡å»æ‰€æœ‰å°äºè¿™ä¸ªæ•°çš„ä¸ªæ•°ï¼Œè€Œå·²ç»åœ¨ä¹‹å‰å‡ºç°çš„å°äºç­‰äºè¯¥æ•°çš„æ•°æ˜¾ç„¶ä¸èƒ½ä¸è¯¥æ•°ç»„æˆé€†åºå¯¹ï¼Œæ‰€ä»¥è¯¥ç‚¹å¯¹ç­”æ¡ˆçš„è´¡çŒ®ã€‚</p>
<p>å‡å¦‚æ˜¯å€’åºï¼Œé‚£ä¹ˆå°±æ˜¯å½“å‰æ•°å­—å‰ä¸€ä¸ªæ•°å­—çš„å‰ç¼€å’Œå³ä¸ºå¯¹ç­”æ¡ˆçš„è´¡çŒ®ã€‚è¿™å¾ˆæ˜¾ç„¶ï¼Œå› ä¸ºæ˜¯å€’åºï¼Œæ‰€ä»¥å‡ºç°è¿‡å°±ç›¸å½“äºåœ¨å½“å‰å…ƒç´ çš„åé¢ï¼Œä¹Ÿå°±æ˜¯äº§ç”Ÿäº†é€†åºå¯¹ï¼Œæ•°å­—è¦å‡ä¸€æ˜¯å› ä¸ºä¸¤ä¸ªç›¸åŒçš„æ•°å­—ç»„æˆä¸äº†é€†åºå¯¹ã€‚</p>
<p>æ­£åºä»£ç å¦‚ä¸‹ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lowbit(x) ((x)&amp;(-x))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">5e5</span><span class="number">+10</span>;</span><br><span class="line"><span class="type">int</span> tr[N],rk[N],n;</span><br><span class="line">ll ans;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">point</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> num,val;</span><br><span class="line">&#125;a[N];</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">cmp</span><span class="params">(point x,point y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x.val==y.val) <span class="keyword">return</span> x.num&lt;y.num;</span><br><span class="line">    <span class="keyword">return</span> x.val&lt;y.val;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=x;i&lt;=n;i+=<span class="built_in">lowbit</span>(i))</span><br><span class="line">        tr[i]+=y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">query</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=x;i;i-=<span class="built_in">lowbit</span>(i))</span><br><span class="line">        sum+=tr[i];</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i].val);</span><br><span class="line">        a[i].num=i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(a<span class="number">+1</span>,a<span class="number">+1</span>+n,cmp);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) rk[a[i].num]=i;<span class="comment">//ç¦»æ•£åŒ–</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">update</span>(rk[i],<span class="number">1</span>);</span><br><span class="line">        ans+=i-<span class="built_in">query</span>(rk[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="éšæœºåŒ–"><a href="#éšæœºåŒ–" class="headerlink" title="éšæœºåŒ–"></a>éšæœºåŒ–</h1><h2 id="å“ˆå¸Œ"><a href="#å“ˆå¸Œ" class="headerlink" title="å“ˆå¸Œ"></a>å“ˆå¸Œ</h2><h3 id="P8819æ˜Ÿæˆ˜"><a href="#P8819æ˜Ÿæˆ˜" class="headerlink" title="P8819æ˜Ÿæˆ˜"></a><a class="link"   href="https://www.luogu.com.cn/problem/solution/P8819" >P8819æ˜Ÿæˆ˜<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod=<span class="number">998244353</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">5e5</span><span class="number">+10</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line">ll r[N],w[N],a[N];</span><br><span class="line"><span class="type">int</span> n,m,q;</span><br><span class="line">ll sum;</span><br><span class="line">ll tot;</span><br><span class="line"><span class="function">mt19937 <span class="title">rd</span><span class="params">(time(<span class="number">0</span>))</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        w[i]=<span class="built_in">rd</span>()%mod,sum+=<span class="number">1ll</span>*w[i],sum%=mod;</span><br><span class="line">    <span class="keyword">while</span>(m--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> u,v;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;u,&amp;v);</span><br><span class="line">        r[v]+=w[u];</span><br><span class="line">        a[v]=r[v];</span><br><span class="line">        tot+=w[u];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;q);</span><br><span class="line">    <span class="keyword">while</span>(q--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> op;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;op);</span><br><span class="line">        <span class="type">int</span> u,v;</span><br><span class="line">        <span class="keyword">if</span>(op==<span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;u,&amp;v);</span><br><span class="line">            r[v]-=w[u];</span><br><span class="line">            tot-=w[u];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(op==<span class="number">2</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;v);</span><br><span class="line">            tot-=r[v];</span><br><span class="line">            r[v]=<span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(op==<span class="number">3</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;u,&amp;v);</span><br><span class="line">            r[v]+=w[u];</span><br><span class="line">            tot+=w[u];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(op==<span class="number">4</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;v);</span><br><span class="line">            tot+=a[v]-r[v];</span><br><span class="line">            r[v]=a[v];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(tot%mod==sum) <span class="built_in">printf</span>(<span class="string">&quot;YES\n&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;NO\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h1><h2 id="KMP"><a href="#KMP" class="headerlink" title="KMP"></a>KMP</h2><h3 id="P4391"><a href="#P4391" class="headerlink" title="P4391"></a><a class="link"   href="https://www.luogu.com.cn/problem/P4391" >P4391<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> pmt[<span class="number">1000005</span>];</span><br><span class="line"><span class="type">char</span> a[<span class="number">1000005</span>];</span><br><span class="line"><span class="type">int</span> ans,n;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,a);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>,j=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span>(j&amp;&amp;a[i]!=a[j]) j=pmt[j<span class="number">-1</span>];</span><br><span class="line">        <span class="keyword">if</span>(a[i]==a[j]) j++;</span><br><span class="line">        pmt[i]=j;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,n-pmt[n<span class="number">-1</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>æ±‚ä¸€ä¸ª Border ã€‚</p>
<h1 id="DP"><a href="#DP" class="headerlink" title="DP"></a>DP</h1><h2 id="åŒºé—´DP"><a href="#åŒºé—´DP" class="headerlink" title="åŒºé—´DP"></a>åŒºé—´DP</h2><h3 id="P1775çŸ³å­åˆå¹¶"><a href="#P1775çŸ³å­åˆå¹¶" class="headerlink" title="P1775çŸ³å­åˆå¹¶"></a><a class="link"   href="https://www.luogu.com.cn/problem/P1775" >P1775çŸ³å­åˆå¹¶<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> a[<span class="number">10000</span>];</span><br><span class="line"><span class="type">int</span> f[<span class="number">1000</span>][<span class="number">1000</span>];</span><br><span class="line"><span class="type">int</span> sum[<span class="number">10000</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		sum[i]=sum[i<span class="number">-1</span>]+a[i];<span class="comment">//å‰ç¼€å’Œ</span></span><br><span class="line">	<span class="built_in">memset</span>(f,<span class="number">0x3f3f3f</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		f[i][i]=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> len=<span class="number">2</span>;len&lt;=n;len++)<span class="comment">//å½“å‰å¤„ç†é•¿åº¦ä¸ºlençš„åŒºé—´ </span></span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">1</span>,r=len;r&lt;=n;r++,l++)<span class="comment">//é•¿åº¦ä¸ºr-l+1 </span></span><br><span class="line">			<span class="keyword">for</span>(<span class="type">int</span> k=l;k&lt;r;k++)</span><br><span class="line">				f[l][r]=<span class="built_in">min</span>(sum[r]-sum[l<span class="number">-1</span>]+f[l][k]+f[k<span class="number">+1</span>][r],f[l][r]);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,f[<span class="number">1</span>][n]);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P1880çŸ³å­ç¯åˆå¹¶"><a href="#P1880çŸ³å­ç¯åˆå¹¶" class="headerlink" title="P1880çŸ³å­ç¯åˆå¹¶"></a><a class="link"   href="https://www.luogu.com.cn/problem/P1880" >P1880çŸ³å­ç¯åˆå¹¶<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>ç›¸è¾ƒäºé“¾ï¼Œå¤åˆ¶å‡ºä¸€ä»½é¦–å°¾ç›¸æ¥å³å¯ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> a[<span class="number">10000</span>];</span><br><span class="line"><span class="type">int</span> f[<span class="number">1000</span>][<span class="number">1000</span>];</span><br><span class="line"><span class="type">int</span> sum[<span class="number">10000</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=n<span class="number">+1</span>;i&lt;=<span class="number">2</span>*n;i++)</span><br><span class="line">		a[i]=a[i-n]; </span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">2</span>*n;i++)</span><br><span class="line">		sum[i]=sum[i<span class="number">-1</span>]+a[i];</span><br><span class="line">	<span class="built_in">memset</span>(f,<span class="number">0x3f</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">2</span>*n;i++)</span><br><span class="line">		f[i][i]=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> len=<span class="number">2</span>;len&lt;=n;len++) </span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">1</span>,r=len;r&lt;=<span class="number">2</span>*n;r++,l++)</span><br><span class="line">			<span class="keyword">for</span>(<span class="type">int</span> k=l;k&lt;r;k++)</span><br><span class="line">				f[l][r]=<span class="built_in">min</span>(sum[r]-sum[l<span class="number">-1</span>]+f[l][k]+f[k<span class="number">+1</span>][r],f[l][r]);</span><br><span class="line">	<span class="type">int</span> ans=f[<span class="number">1</span>][n];</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">1</span>,r=n;r&lt;=<span class="number">2</span>*n;l++,r++)</span><br><span class="line">		ans=<span class="built_in">min</span>(ans,f[l][r]);</span><br><span class="line">	<span class="type">int</span> maxn,minn;</span><br><span class="line">	minn=ans;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> len=<span class="number">2</span>;len&lt;=n;len++)</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">1</span>,r=len;r&lt;=<span class="number">2</span>*n;r++,l++)</span><br><span class="line">			<span class="keyword">for</span>(<span class="type">int</span> k=l;k&lt;r;k++)</span><br><span class="line">				f[l][r]=<span class="built_in">max</span>(sum[r]-sum[l<span class="number">-1</span>]+f[l][k]+f[k<span class="number">+1</span>][r],f[l][r]);</span><br><span class="line">	ans=f[<span class="number">1</span>][n];</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">1</span>,r=n;r&lt;=<span class="number">2</span>*n;l++,r++)</span><br><span class="line">		ans=<span class="built_in">max</span>(ans,f[l][r]);</span><br><span class="line">	maxn=ans;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n%d&quot;</span>,minn,maxn);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P1063èƒ½é‡é¡¹é“¾"><a href="#P1063èƒ½é‡é¡¹é“¾" class="headerlink" title="P1063èƒ½é‡é¡¹é“¾"></a><a class="link"   href="https://www.luogu.com.cn/problem/P1063" >P1063èƒ½é‡é¡¹é“¾<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>ä¸ä¸Šé“é¢˜ç±»ä¼¼ï¼Œæ³¨æ„è½¬ç§»çš„é‡å’Œç å­è´¡çŒ®çš„äº§ç”Ÿã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">220</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> a[N];</span><br><span class="line"><span class="type">int</span> f[N][N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=n<span class="number">+1</span>;i&lt;=<span class="number">2</span>*n;i++)</span><br><span class="line">        a[i]=a[i-n];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> len=<span class="number">2</span>;len&lt;=n*<span class="number">2</span>;len++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">1</span>,r=len;r&lt;=n*<span class="number">2</span>;l++,r++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k=l;k&lt;r;k++)</span><br><span class="line">                f[l][r]=<span class="built_in">max</span>(f[l][r],f[l][k]+f[k<span class="number">+1</span>][r]+a[l]*a[k<span class="number">+1</span>]*a[r<span class="number">+1</span>]);</span><br><span class="line">    <span class="type">int</span> ans=<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        ans=<span class="built_in">max</span>(ans,f[i][i+n<span class="number">-1</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P1220å…³è·¯ç¯"><a href="#P1220å…³è·¯ç¯" class="headerlink" title="P1220å…³è·¯ç¯"></a><a class="link"   href="https://www.luogu.com.cn/problem/P1220" >P1220å…³è·¯ç¯<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>æ³¨æ„åˆå§‹ä½ç½®ä¸éœ€è¦èŠ±æ—¶é—´ï¼Œæ‰€ä»¥ä¸€å¼€å§‹ä¸è€—ç”µï¼Œæ³¨æ„å‰ç¼€å’Œå¤„ç†ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">100</span>;</span><br><span class="line"><span class="type">int</span> n,c;</span><br><span class="line"><span class="type">int</span> a[N],v[N];</span><br><span class="line"><span class="type">int</span> f[N][N][<span class="number">2</span>];<span class="comment">//i~jçš„è·¯ç¯å·²ç»ç†„ç­æ—¶çš„æœ€å°æ€»åŠŸè€—ï¼Œæ­¤æ—¶è€å¼ ç«™åœ¨0å·¦è¾¹ï¼Œ1å³è¾¹</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;c);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;a[i],&amp;v[i]);</span><br><span class="line">        v[i]+=v[i<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">memset</span>(f,<span class="number">0x3f</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line">    f[c][c][<span class="number">0</span>]=f[c][c][<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> len=<span class="number">2</span>;len&lt;=n;len++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">1</span>,r=len;r&lt;=n;l++,r++)</span><br><span class="line">        &#123;</span><br><span class="line">            f[l][r][<span class="number">0</span>]=<span class="built_in">min</span>(f[l<span class="number">+1</span>][r][<span class="number">0</span>]+(a[l<span class="number">+1</span>]-a[l])*(v[l]+v[n]-v[r]),f[l<span class="number">+1</span>][r][<span class="number">1</span>]+(a[r]-a[l])*(v[l]+v[n]-v[r]));</span><br><span class="line">            f[l][r][<span class="number">1</span>]=<span class="built_in">min</span>(f[l][r<span class="number">-1</span>][<span class="number">1</span>]+(a[r]-a[r<span class="number">-1</span>])*(v[l<span class="number">-1</span>]+v[n]-v[r<span class="number">-1</span>]),f[l][r<span class="number">-1</span>][<span class="number">0</span>]+(a[r]-a[l])*(v[l<span class="number">-1</span>]+v[n]-v[r<span class="number">-1</span>]));</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,<span class="built_in">min</span>(f[<span class="number">1</span>][n][<span class="number">0</span>],f[<span class="number">1</span>][n][<span class="number">1</span>]));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P2858å–é›¶é£Ÿ"><a href="#P2858å–é›¶é£Ÿ" class="headerlink" title="P2858å–é›¶é£Ÿ"></a><a class="link"   href="https://www.luogu.com.cn/problem/P2858" >P2858å–é›¶é£Ÿ<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>$l\sim{r}$ å¯ä»¥ç”± $l+1\sim{r}$ å’Œ $l\sim{r-1}$ è½¬ç§»è€Œæ¥ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">2005</span>;</span><br><span class="line"><span class="type">int</span> a[N],f[N][N];</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) f[i][i]=a[i]*n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> len=<span class="number">2</span>;len&lt;=n;len++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">1</span>,r=len;r&lt;=n;l++,r++)</span><br><span class="line">            f[l][r]=<span class="built_in">max</span>(f[l][r<span class="number">-1</span>]+a[r]*(n-len<span class="number">+1</span>),f[l<span class="number">+1</span>][r]+a[l]*(n-len<span class="number">+1</span>));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,f[<span class="number">1</span>][n]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P3146-248G"><a href="#P3146-248G" class="headerlink" title="P3146 248G"></a><a class="link"   href="https://www.luogu.com.cn/problem/P3146" >P3146 248G<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>åŸæ¥æœ€å¤§ä¸º $40$ ï¼Œæœ€å¤šåˆå¹¶ $logn$ æ¬¡ï¼Œæ‰€ä»¥æœ€å¤§ä¸º $58$ã€‚</p>
<p>æ³¨æ„å¤„ç†ä¸ºå·¦é—­å³å¼€åŒºé—´æ–¹ä¾¿åˆå¹¶ï¼Œä¸ç„¶å·¦å³ç«¯ç‚¹å…±ç”¨æ²¡æ³•å¤„ç†ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">3e5</span><span class="number">+7</span>;</span><br><span class="line"><span class="type">int</span> a,n,ans;</span><br><span class="line"><span class="type">int</span> f[<span class="number">60</span>][N];<span class="comment">//iä¸ºèƒ½åˆå¹¶å‡ºæ¥çš„æœ€å¤§å€¼ï¼Œjä¸ºæ­¤æ—¶çš„å·¦ç«¯ç‚¹ï¼Œå€¼ä¸ºæ­¤æ—¶çš„å³ç«¯ç‚¹</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a),f[a][i]=i<span class="number">+1</span>;<span class="comment">//å·¦é—­å³å¼€åŒºé—´</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=<span class="number">58</span>;i++)<span class="comment">//40+18</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;j++)<span class="comment">//æšä¸¾å·¦ç«¯ç‚¹</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(!f[i][j])</span><br><span class="line">                f[i][j]=f[i<span class="number">-1</span>][f[i<span class="number">-1</span>][j]];</span><br><span class="line">            <span class="keyword">if</span>(f[i][j]) ans=i;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P3147"><a href="#P3147" class="headerlink" title="P3147"></a><a class="link"   href="https://www.luogu.com.cn/problem/P3147" >P3147<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>åŒä¸Šï¼Œæ³¨æ„è¯·ä½¿ç”¨å·¦é—­å³å¼€åŒºé—´ï¼Œä¸ºæ­¤è¿˜å‘äº†ç¯‡è®¨è®ºåŒºã€‚</p>
<p>é€šè¿‡ä»¥ä¸Šä¸¤é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºä¸¤æ¡è§„å¾‹ï¼š</p>
<ul>
<li>åˆå¹¶åŒºé—´æ—¶è¯·ä½¿ç”¨å·¦é—­å³å¼€åŒºé—´ã€‚</li>
<li>è®¾è®¡çŠ¶æ€æ—¶ï¼Œä»¥å€¼åŸŸè¾ƒå°çš„å˜é‡ä½œä¸ºæ•°ç»„ä¸‹æ ‡ï¼Œå°±åƒæœ¬é¢˜å¹¶æ²¡æœ‰é€‰æ‹©ä¼ ç»Ÿçš„ $l,r$ å†™æ³•ã€‚</li>
</ul>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">3e5</span><span class="number">+7</span>;</span><br><span class="line"><span class="type">int</span> a,n,ans;</span><br><span class="line"><span class="type">int</span> f[<span class="number">60</span>][N];<span class="comment">//iä¸ºèƒ½åˆå¹¶å‡ºæ¥çš„æœ€å¤§å€¼ï¼Œjä¸ºæ­¤æ—¶çš„å·¦ç«¯ç‚¹ï¼Œå€¼ä¸ºæ­¤æ—¶çš„å³ç«¯ç‚¹</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a),f[a][i]=i<span class="number">+1</span>;<span class="comment">//å·¦é—­å³å¼€åŒºé—´</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=<span class="number">58</span>;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;j++)<span class="comment">//æšä¸¾å·¦ç«¯ç‚¹</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(!f[i][j])</span><br><span class="line">                f[i][j]=f[i<span class="number">-1</span>][f[i<span class="number">-1</span>][j]];</span><br><span class="line">            <span class="keyword">if</span>(f[i][j]) ans=i;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P3205åˆå”±é˜Ÿ"><a href="#P3205åˆå”±é˜Ÿ" class="headerlink" title="P3205åˆå”±é˜Ÿ"></a><a class="link"   href="https://www.luogu.com.cn/problem/P3205" >P3205åˆå”±é˜Ÿ<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>è§æ³¨é‡Šã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod=<span class="number">19650827</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1005</span>;</span><br><span class="line"><span class="type">int</span> n,a[N];</span><br><span class="line"><span class="type">int</span> f[N][N][<span class="number">2</span>];</span><br><span class="line"><span class="comment">//f[i][j][0]è¡¨ç¤º[i,j]ä¸”æœ€åä¸€ä¸ªäººä»å·¦è¾¹è¿›é˜Ÿçš„æ–¹æ¡ˆæ•°</span></span><br><span class="line"><span class="comment">//f[i][j][1]è¡¨ç¤º[i,j]ä¸”æœ€åä¸€ä¸ªäººä»å³è¾¹è¿›é˜Ÿçš„æ–¹æ¡ˆæ•°</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]),f[i][i][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="comment">//å·¦ç«¯ç‚¹ç­‰äºå³ç«¯ç‚¹æ—¶ï¼Œæ–¹æ¡ˆåªèƒ½æœ‰ä¸€ä¸ªï¼Œä¸ç„¶ä¼šè½¬ç§»ä¸¤æ¬¡ï¼Œæ‰€ä»¥å°±é»˜è®¤ä¸€ä¸ªæ–¹å‘</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> len=<span class="number">2</span>;len&lt;=n;len++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">1</span>,r=len;r&lt;=n;l++,r++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[l]&lt;a[l<span class="number">+1</span>]) f[l][r][<span class="number">0</span>]=(f[l][r][<span class="number">0</span>]+f[l<span class="number">+1</span>][r][<span class="number">0</span>])%mod;</span><br><span class="line">            <span class="keyword">if</span>(a[l]&lt;a[r]) f[l][r][<span class="number">0</span>]=(f[l][r][<span class="number">0</span>]+f[l<span class="number">+1</span>][r][<span class="number">1</span>])%mod;</span><br><span class="line">            <span class="keyword">if</span>(a[r]&gt;a[l]) f[l][r][<span class="number">1</span>]=(f[l][r][<span class="number">1</span>]+f[l][r<span class="number">-1</span>][<span class="number">0</span>])%mod;</span><br><span class="line">            <span class="keyword">if</span>(a[r]&gt;a[r<span class="number">-1</span>]) f[l][r][<span class="number">1</span>]=(f[l][r][<span class="number">1</span>]+f[l][r<span class="number">-1</span>][<span class="number">1</span>])%mod;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,(f[<span class="number">1</span>][n][<span class="number">0</span>]+f[<span class="number">1</span>][n][<span class="number">1</span>])%mod);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P4170æ¶‚è‰²"><a href="#P4170æ¶‚è‰²" class="headerlink" title="P4170æ¶‚è‰²"></a><a class="link"   href="https://www.luogu.com.cn/problem/P4170" >P4170æ¶‚è‰²<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>é¦–å…ˆåˆå§‹åŒ–ä¸€ä¸ªåŒºé—´åªéœ€è¦æ¶‚ä¸€æ¬¡ã€‚</p>
<p>æšä¸¾åŒºé—´ï¼Œå‡å¦‚åŒºé—´å·¦å³ç«¯ç‚¹çš„é¢œè‰²ç›¸åŒï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨ä¹‹å‰ä¸€èµ·æ¶‚ä¸Šï¼Œæ‰€ä»¥å°±å¯ä»¥ä» $l+1\sim{r}$ å’Œ$l\sim{r-1}$ ä¸­æ— ä»£ä»·è½¬ç§»è€Œæ¥ã€‚</p>
<p>å‡å¦‚ä¸åŒçš„è¯ï¼Œé‚£å°±éœ€è¦æšä¸¾åˆ†ç•Œç‚¹ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">60</span>;</span><br><span class="line"><span class="type">int</span> f[N][N];</span><br><span class="line">string s;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin&gt;&gt;s;</span><br><span class="line">    <span class="type">int</span> n=s.<span class="built_in">length</span>();</span><br><span class="line">    <span class="built_in">memset</span>(f,<span class="number">0x3f</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++) f[i][i]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> len=<span class="number">2</span>;len&lt;=n;len++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">0</span>,r=len<span class="number">-1</span>;r&lt;n;l++,r++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(s[l]==s[r])</span><br><span class="line">            &#123;</span><br><span class="line">                f[l][r]=<span class="built_in">min</span>(f[l][r],<span class="built_in">min</span>(f[l<span class="number">+1</span>][r],f[l][r<span class="number">-1</span>]));</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k=l;k&lt;r;k++)</span><br><span class="line">                f[l][r]=<span class="built_in">min</span>(f[l][r],f[l][k]+f[k<span class="number">+1</span>][r]);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,f[<span class="number">0</span>][n<span class="number">-1</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P4290ç©å…·å–å"><a href="#P4290ç©å…·å–å" class="headerlink" title="P4290ç©å…·å–å"></a><a class="link"   href="https://www.luogu.com.cn/problem/P4290" >P4290ç©å…·å–å<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>çŠ¶æ€å®šä¹‰ä¸ºåŒºé—´ $l\sim{r}$ æ˜¯å¦å¯ä»¥è¢« $k$ å–ä»£ï¼Œå…¶ä¸­ $k$ å°†å­—ç¬¦è½¬ä¸ºæ•°å­—ã€‚</p>
<p>$p$ å¯ä»¥è¢« $f_1,f_2$ å–ä»£ï¼Œè‹¥ $f_1$ å¯ä»¥å–ä»£å·¦åŠéƒ¨åˆ†åŒºé—´ï¼Œ $f_2$ å¯ä»¥å–ä»£å³åŠéƒ¨åˆ†åŒºé—´ï¼Œé‚£ä¹ˆ $p$ å°±å¯ä»¥å–ä»£æ•´ä¸ªåŒºé—´ï¼Œè¿™å°±æ˜¯è½¬ç§»ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">205</span>;</span><br><span class="line"><span class="type">bool</span> f[N][N][<span class="number">5</span>];</span><br><span class="line"><span class="type">char</span> a[<span class="number">10</span>];</span><br><span class="line">vector&lt;string&gt; s[<span class="number">5</span>];</span><br><span class="line"><span class="type">int</span> w,o,n,g;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">ch</span><span class="params">(<span class="type">char</span> c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(c==<span class="string">&#x27;W&#x27;</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(c==<span class="string">&#x27;I&#x27;</span>) <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span>(c==<span class="string">&#x27;N&#x27;</span>) <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">if</span>(c==<span class="string">&#x27;G&#x27;</span>) <span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">string name;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d%d&quot;</span>,&amp;w,&amp;o,&amp;n,&amp;g);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=w;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,a);</span><br><span class="line">        s[<span class="number">1</span>].<span class="built_in">emplace_back</span>(a);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=o;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,a);</span><br><span class="line">        s[<span class="number">2</span>].<span class="built_in">emplace_back</span>(a);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,a);</span><br><span class="line">        s[<span class="number">3</span>].<span class="built_in">emplace_back</span>(a);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=g;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,a);</span><br><span class="line">        s[<span class="number">4</span>].<span class="built_in">emplace_back</span>(a);</span><br><span class="line">    &#125;</span><br><span class="line">    cin&gt;&gt;name;</span><br><span class="line">    <span class="type">int</span> length=name.<span class="built_in">length</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;length;i++)</span><br><span class="line">        f[i][i][<span class="built_in">ch</span>(name[i])]=<span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=length;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">0</span>,r=i<span class="number">-1</span>;r&lt;length;l++,r++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k=l;k&lt;r;k++)</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> p=<span class="number">1</span>;p&lt;=<span class="number">4</span>;p++)</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;v:s[p])</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="type">char</span> f1=v[<span class="number">0</span>],f2=v[<span class="number">1</span>];</span><br><span class="line">                        <span class="keyword">if</span>(f[l][k][<span class="built_in">ch</span>(f1)]&amp;&amp;f[k<span class="number">+1</span>][r][<span class="built_in">ch</span>(f2)])</span><br><span class="line">                            f[l][r][p]=<span class="literal">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">    <span class="type">bool</span> bj=<span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(f[<span class="number">0</span>][length<span class="number">-1</span>][<span class="number">1</span>]) bj=<span class="literal">true</span>,<span class="built_in">printf</span>(<span class="string">&quot;W&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span>(f[<span class="number">0</span>][length<span class="number">-1</span>][<span class="number">2</span>]) bj=<span class="literal">true</span>,<span class="built_in">printf</span>(<span class="string">&quot;I&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span>(f[<span class="number">0</span>][length<span class="number">-1</span>][<span class="number">3</span>]) bj=<span class="literal">true</span>,<span class="built_in">printf</span>(<span class="string">&quot;N&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span>(f[<span class="number">0</span>][length<span class="number">-1</span>][<span class="number">4</span>]) bj=<span class="literal">true</span>,<span class="built_in">printf</span>(<span class="string">&quot;G&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span>(!bj) <span class="built_in">printf</span>(<span class="string">&quot;The name is wrong!&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P4342Polygon"><a href="#P4342Polygon" class="headerlink" title="P4342Polygon"></a><a href="">P4342Polygon</a></h3><p>é¦–å…ˆæ–­ç¯ä¸ºé“¾ï¼Œè€ƒè™‘è½¬ç§»ã€‚</p>
<p>å¦‚æœæ˜¯åŠ æ³•ï¼Œé‚£ç›´æ¥å–maxè‚¯å®šæ²¡é—®é¢˜ï¼Œä½†æ˜¯æœ‰ä¹˜æ³•ï¼Œå¹¶ä¸”æœ‰è´Ÿæ•°ï¼Œå°±è¦è€ƒè™‘è´Ÿè´Ÿå¾—æ­£çš„æƒ…å†µï¼Œè€Œä¸”æœ€å¤§å€¼ä¹˜ä»¥ä¸€ä¸ªè´Ÿæ•°åä¾¿ä¸å†æ˜¯æœ€å¤§å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜è¦ç»´æŠ¤ä¸€ä¸ªåŒºé—´ç­”æ¡ˆæœ€å°å€¼ã€‚</p>
<p>è½¬ç§»çš„æ—¶å€™ï¼Œå·¦å³ä¸¤åŠéƒ¨åˆ†éƒ½æœ‰å¯èƒ½æ˜¯æ­£æˆ–è€…è´Ÿï¼Œæ‰€ä»¥å››ç§æƒ…å†µå–ä¸€ä¸ªæœ€å¤§å€¼ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">160</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line">ll ans;</span><br><span class="line"><span class="type">char</span> cl[N];</span><br><span class="line"><span class="type">int</span> a[N];</span><br><span class="line">ll f[N][N],g[N][N];<span class="comment">//åŒºé—´å†…çš„æœ€å¤§ç»“æœ,æœ€å°ç»“æœ</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot; %c %d&quot;</span>,&amp;cl[i],&amp;a[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=n<span class="number">+1</span>;i&lt;=<span class="number">2</span>*n;i++)</span><br><span class="line">        cl[i]=cl[i-n],a[i]=a[i-n];</span><br><span class="line">    <span class="built_in">memset</span>(f,<span class="number">-127</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line">    <span class="built_in">memset</span>(g,<span class="number">127</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n*<span class="number">2</span>;i++)</span><br><span class="line">        f[i][i]=g[i][i]=a[i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> len=<span class="number">2</span>;len&lt;=n;len++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">1</span>,r=len;r&lt;=n*<span class="number">2</span>;l++,r++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k=l;k&lt;r;k++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(cl[k<span class="number">+1</span>]==<span class="string">&#x27;t&#x27;</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    f[l][r]=<span class="built_in">max</span>(f[l][r],f[l][k]+f[k<span class="number">+1</span>][r]);</span><br><span class="line">                    g[l][r]=<span class="built_in">min</span>(g[l][r],g[l][k]+g[k<span class="number">+1</span>][r]);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(cl[k<span class="number">+1</span>]==<span class="string">&#x27;x&#x27;</span>) </span><br><span class="line">                &#123;</span><br><span class="line">                    f[l][r]=<span class="built_in">max</span>(f[l][r],<span class="built_in">max</span>(f[l][k]*f[k<span class="number">+1</span>][r],<span class="built_in">max</span>(g[l][k]*g[k<span class="number">+1</span>][r],<span class="built_in">max</span>(f[l][k]*g[k<span class="number">+1</span>][r],g[l][k]*f[k<span class="number">+1</span>][r]))));</span><br><span class="line">                    g[l][r]=<span class="built_in">min</span>(g[l][r],<span class="built_in">min</span>(f[l][k]*f[k<span class="number">+1</span>][r],<span class="built_in">min</span>(g[l][k]*g[k<span class="number">+1</span>][r],<span class="built_in">min</span>(f[l][k]*g[k<span class="number">+1</span>][r],g[l][k]*f[k<span class="number">+1</span>][r]))));</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// printf(&quot;f[%d][%d]=%lld\n&quot;,l,r,f[l][r]);</span></span><br><span class="line">            &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">+1</span>;i++)</span><br><span class="line">        ans=<span class="built_in">max</span>(ans,f[i][i+n<span class="number">-1</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">if</span>(f[i][i+n<span class="number">-1</span>]==ans) <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,i);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P6701"><a href="#P6701" class="headerlink" title="P6701"></a><a class="link"   href="https://www.luogu.com.cn/problem/P6701" >P6701<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>åˆ†è£‚å¤ªå¤æ‚ä¸å¤ªå¥½æƒ³ï¼Œä¸å¦‚åè¿‡æ¥è€ƒè™‘ï¼Œå¦‚ä½•æŠŠç»™å®šçš„å­—ç¬¦ä¸²åˆæˆä¸ºé•¿åº¦å°½é‡å°çš„ <code>S</code>ï¼Œ$f_{i,j}$ ä»£è¡¨åŒºé—´ $[i,j]$ æœ€å°‘ç”¨å‡ ä¸ª S è¡¨ç¤ºï¼Œ$h_{i,j}$ è¡¨ç¤ºåŒºé—´ $[i,j]$ å¯ä»¥ç”¨å“ªä¸ªå­—ç¬¦è¡¨ç¤ºï¼Œè¿™ä¸ªå¯ä»¥ç”¨çŠ¶æ€å‹ç¼©çš„å½¢å¼è¡¨ç¤ºã€‚å‡å¦‚ä¸€ä¸ªåŒºé—´å¯ä»¥è¢« S è¡¨ç¤ºï¼Œé‚£ä¹ˆå®ƒçš„ç­”æ¡ˆå°±æ˜¯1ï¼Œæœ€ååˆ¤æ–­ä¸€ä¸‹æ•´ä¸ªåŒºé—´æ˜¯å¦è¢«æ›´æ–°è¿‡å³å¯ã€‚</p>
<p>ä¹‹æ‰€ä»¥è¦çŠ¶æ€å‹ç¼©è€Œä¸æ˜¯ç›´æ¥èµ‹å€¼ç¼–å·çš„åŸå› æ˜¯æŸä¸ªåŒºé—´ä¼šè¢«å¤šä¸ªå­—ç¬¦æœ‰å¯èƒ½å–ä»£ï¼Œè€Œå®ƒä»¬åªéœ€è¦æ»¡è¶³ä¸€ä¸ªå°±å¯ä»¥è½¬ç§»ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">120</span>;</span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="type">char</span> a[N];</span><br><span class="line"><span class="type">int</span> f[N][N];</span><br><span class="line"><span class="type">int</span> mp[N][N];</span><br><span class="line"><span class="type">int</span> h[N][N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,a);</span><br><span class="line">        mp[a[<span class="number">1</span>]-<span class="string">&#x27;A&#x27;</span><span class="number">+1</span>][a[<span class="number">2</span>]-<span class="string">&#x27;A&#x27;</span><span class="number">+1</span>]|=(<span class="number">1</span>&lt;&lt;(a[<span class="number">0</span>]-<span class="string">&#x27;A&#x27;</span><span class="number">+1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(f,<span class="number">0x3f</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line">        <span class="built_in">memset</span>(h,<span class="number">0</span>,<span class="built_in">sizeof</span>(h));</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,a);</span><br><span class="line">        <span class="type">int</span> len=<span class="built_in">strlen</span>(a);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;len;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[j]==<span class="string">&#x27;S&#x27;</span>) f[j<span class="number">+1</span>][j<span class="number">+1</span>]=<span class="number">1</span>;</span><br><span class="line">            h[j<span class="number">+1</span>][j<span class="number">+1</span>]|=(<span class="number">1</span>&lt;&lt;(a[j]-<span class="string">&#x27;A&#x27;</span><span class="number">+1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=len;j++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">1</span>,r=j;r&lt;=len;l++,r++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> k=l;k&lt;r;k++)</span><br><span class="line">                &#123;</span><br><span class="line">                    f[l][r]=<span class="built_in">min</span>(f[l][r],f[l][k]+f[k<span class="number">+1</span>][r]);</span><br><span class="line">                    <span class="keyword">for</span>(<span class="type">int</span> x=<span class="number">1</span>;x&lt;=<span class="number">26</span>;x++)</span><br><span class="line">                        <span class="keyword">for</span>(<span class="type">int</span> y=<span class="number">1</span>;y&lt;=<span class="number">26</span>;y++)</span><br><span class="line">                            <span class="keyword">if</span>((h[l][k]&amp;(<span class="number">1</span>&lt;&lt;x))&amp;&amp;(h[k<span class="number">+1</span>][r]&amp;(<span class="number">1</span>&lt;&lt;y)))</span><br><span class="line">                                h[l][r]|=mp[x][y];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(h[l][r]&amp;(<span class="number">1</span>&lt;&lt;(<span class="string">&#x27;S&#x27;</span>-<span class="string">&#x27;A&#x27;</span><span class="number">+1</span>))) f[l][r]=<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">if</span>(f[<span class="number">1</span>][len]&gt;=<span class="number">0x3f3f3f3f</span>) <span class="built_in">printf</span>(<span class="string">&quot;NIE\n&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,f[<span class="number">1</span>][len]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P2466Sueçš„å°çƒ"><a href="#P2466Sueçš„å°çƒ" class="headerlink" title="P2466Sueçš„å°çƒ"></a><a class="link"   href="https://www.luogu.com.cn/problem/P2466" >P2466Sueçš„å°çƒ<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>è¿™é“é¢˜ç›¸å½“äºæ˜¯å…³è·¯ç¯çš„å‡çº§ç‰ˆã€‚éœ€è¦å…ˆæŒ‰ç…§æ¨ªåæ ‡æ’ä¸ªåºï¼Œå¹¶ä¸”æ²¡æœ‰å›ºå®šçš„èµ·ç‚¹ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨å…³è·¯ç¯çš„æ€è·¯ï¼Œæ±‚æœ€å°ä¸‹é™çš„æ€»é«˜åº¦ï¼Œç”¨ä¸€å¼€å§‹çš„æ€»é«˜åº¦å‡å»å°±å¯ä»¥äº†ã€‚</p>
<p>è€Œæœ¬é¢˜ä¸­ä¸€å¼€å§‹ä¸ä¸€å®šåœ¨æŸä¸ªå½©è›‹ä¸‹é¢ï¼Œå…³è·¯ç¯æ˜¯ä»æŸä¸ªç¡®å®šçš„è·¯ç¯ä¸‹å¼€å§‹çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦é¢„å¤„ç†å‡ºå®ƒä¸€å¼€å§‹åˆ°æ¯ä¸ªå½©è›‹çš„èŠ±è´¹ï¼ˆå…¶å®é¢„å¤„ç†å‡ºæœ€å°çš„å°±å¯ä»¥äº†ï¼Œä½†æ˜¯ä¸ºäº†æ–¹ä¾¿ä¸å¦‚ä¸€èµ·é¢„å¤„ç†äº†ï¼‰ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1005</span>;</span><br><span class="line">ll f[N][N][<span class="number">2</span>];</span><br><span class="line"><span class="type">int</span> x_0,n;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">egg</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> x,y,v;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span>&lt;(<span class="type">const</span> egg &amp;a)<span class="type">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> x&lt;a.x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;eg[N];</span><br><span class="line"><span class="type">int</span> sum[N];</span><br><span class="line"><span class="type">double</span> ans;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;x_0);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;eg[i].x);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;eg[i].y),ans+=<span class="number">1.0</span>*eg[i].y;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;eg[i].v);</span><br><span class="line">    <span class="built_in">sort</span>(eg<span class="number">+1</span>,eg<span class="number">+1</span>+n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) sum[i]=sum[i<span class="number">-1</span>]+eg[i].v;</span><br><span class="line">    <span class="built_in">memset</span>(f,<span class="number">0x3f</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        f[i][i][<span class="number">0</span>]=f[i][i][<span class="number">1</span>]=<span class="number">1ll</span>*sum[n]*<span class="built_in">abs</span>(x_0-eg[i].x);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">1</span>,r=i;r&lt;=n;l++,r++)</span><br><span class="line">        &#123;</span><br><span class="line">            f[l][r][<span class="number">0</span>]=<span class="built_in">min</span>(f[l<span class="number">+1</span>][r][<span class="number">0</span>]<span class="number">+1ll</span>*(sum[l]+sum[n]-sum[r])*(eg[l<span class="number">+1</span>].x-eg[l].x),f[l<span class="number">+1</span>][r][<span class="number">1</span>]<span class="number">+1ll</span>*(sum[l]+sum[n]-sum[r])*(eg[r].x-eg[l].x));</span><br><span class="line">            f[l][r][<span class="number">1</span>]=<span class="built_in">min</span>(f[l][r<span class="number">-1</span>][<span class="number">1</span>]<span class="number">+1ll</span>*(sum[l<span class="number">-1</span>]+sum[n]-sum[r<span class="number">-1</span>])*(eg[r].x-eg[r<span class="number">-1</span>].x),f[l][r<span class="number">-1</span>][<span class="number">0</span>]<span class="number">+1ll</span>*(sum[l<span class="number">-1</span>]+sum[n]-sum[r<span class="number">-1</span>])*(eg[r].x-eg[l].x));</span><br><span class="line">        &#125;</span><br><span class="line">    ans-=(<span class="type">double</span>)<span class="built_in">min</span>(f[<span class="number">1</span>][n][<span class="number">0</span>],f[<span class="number">1</span>][n][<span class="number">1</span>]);</span><br><span class="line">    ans/=<span class="number">1000.0</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%.3lf&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P1868é¥¥é¥¿çš„å¥¶ç‰›"><a href="#P1868é¥¥é¥¿çš„å¥¶ç‰›" class="headerlink" title="P1868é¥¥é¥¿çš„å¥¶ç‰›"></a><a class="link"   href="https://www.luogu.com.cn/problem/P1868" >P1868é¥¥é¥¿çš„å¥¶ç‰›<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>å¯¹æ¯ä¸ªå³ç«¯ç‚¹è®°å½•å®ƒå¯¹åº”çš„å·¦ç«¯ç‚¹ï¼Œä»å°åˆ°å¤§æšä¸¾å³ç«¯ç‚¹ï¼ŒåŒºé—´æ‰©å¤§äº†é‚£ä¹ˆè‚¯å®šè‡³å°‘èƒ½ç»§æ‰¿ä¹‹å‰çš„åŒºé—´ï¼Œå‡å¦‚å®ƒå¯¹åº”çš„æŸä¸ªå·¦ç«¯ç‚¹ä¹‹å‰ä¹Ÿæœ‰è´¡çŒ®ï¼Œé‚£ä¹ˆå°±å¯ä»¥æ–°åŠ å…¥è¿™ä¸ªåŒºé—´çš„è´¡çŒ®ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">3e6</span><span class="number">+10</span>;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; a[N];</span><br><span class="line"><span class="type">int</span> n,maxn;</span><br><span class="line"><span class="type">int</span> f[N];<span class="comment">//iä¹‹å‰çš„è‰å—èƒ½è·å¾—çš„æœ€å¤§ä»·å€¼</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> x,y;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;x,&amp;y);</span><br><span class="line">        a[y].<span class="built_in">emplace_back</span>(x);</span><br><span class="line">        maxn=<span class="built_in">max</span>(maxn,y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=maxn;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        f[i]=<span class="built_in">max</span>(f[i],f[i<span class="number">-1</span>]);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;j:a[i])</span><br><span class="line">            f[i]=<span class="built_in">max</span>(f[i],f[j<span class="number">-1</span>]+i-j<span class="number">+1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,f[maxn]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P1280"><a href="#P1280" class="headerlink" title="P1280"></a><a class="link"   href="https://www.luogu.com.cn/problem/P1280" >P1280<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>å€’å™æšä¸¾ï¼Œè€ƒè™‘åç¼€ï¼Œå¦‚æœå½“å‰æœ‰ä»»åŠ¡ï¼Œé‚£å°±æ‹¿å½“å‰æ‰€èƒ½è·å¾—çš„æœ€å¤§ç©ºé—²æ—¶é—´ä¸å®Œæˆä»»åŠ¡åå¾—åˆ°çš„æœ€å¤§ç©ºé—²æ—¶é—´å–ä¸€ä¸ª maxï¼Œå¦‚æœå½“å‰ç©ºé—²ï¼Œé‚£å°±å¯ä»¥å¤šä¸€åˆ†é’Ÿçš„ç©ºé—²æ—¶é—´ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e4</span><span class="number">+10</span>;</span><br><span class="line"><span class="type">int</span> n,k;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; a[N];</span><br><span class="line"><span class="type">int</span> f[N];<span class="comment">//ä»ç¬¬iåˆ†é’Ÿå¼€å§‹æœ€å¤§çš„ç©ºæš‡æ—¶é—´</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;k);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=k;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> x,y;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;x,&amp;y);</span><br><span class="line">        a[x].<span class="built_in">emplace_back</span>(y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=n;i&gt;=<span class="number">1</span>;i--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i].<span class="built_in">size</span>())<span class="comment">//å½“å‰æœ‰ä»»åŠ¡</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;j:a[i])</span><br><span class="line">                f[i]=<span class="built_in">max</span>(f[i],f[i+j]);</span><br><span class="line">        <span class="keyword">else</span> f[i]=f[i<span class="number">+1</span>]<span class="number">+1</span>;<span class="comment">//å½“å‰ç©ºé—²</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,f[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h2 id="çº¿æ€§DP"><a href="#çº¿æ€§DP" class="headerlink" title="çº¿æ€§DP"></a>çº¿æ€§DP</h2><h3 id="P1233æœ¨æ£åŠ å·¥"><a href="#P1233æœ¨æ£åŠ å·¥" class="headerlink" title="P1233æœ¨æ£åŠ å·¥"></a><a class="link"   href="https://www.luogu.com.cn/problem/P1233" >P1233æœ¨æ£åŠ å·¥<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>æ±‚å•è°ƒä¸é™å­åºåˆ—çš„ä¸ªæ•°å…¶å®å°±æ˜¯æ±‚æœ€é•¿ä¸Šå‡å­åºåˆ—çš„é•¿åº¦ï¼Œæ³¨æ„è¦å¯¹ $l$ æ’åºã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lowbit(x) ((x)&amp;(-x))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e5</span>;</span><br><span class="line"><span class="type">int</span> n,ans=<span class="number">-1</span>,maxn=<span class="number">-1</span>;</span><br><span class="line"><span class="type">int</span> f[N];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=u;i&lt;=maxn;i+=<span class="built_in">lowbit</span>(i)) f[i]=<span class="built_in">max</span>(f[i],v);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">query</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=x;i;i-=<span class="built_in">lowbit</span>(i)) res=<span class="built_in">max</span>(res,f[i]);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> l,w;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span>&lt;(<span class="type">const</span> edge &amp;x)<span class="type">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(l!=x.l) <span class="keyword">return</span> l&gt;x.l;</span><br><span class="line">        <span class="keyword">return</span> w&gt;x.w;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;e[N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>,&amp;e[i].l,&amp;e[i].w),maxn=<span class="built_in">max</span>(maxn,e[i].w);</span><br><span class="line">    <span class="built_in">sort</span>(e<span class="number">+1</span>,e<span class="number">+1</span>+n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> q=<span class="built_in">query</span>(e[i].w<span class="number">-1</span>);</span><br><span class="line">        <span class="built_in">update</span>(e[i].w,q<span class="number">+1</span>);</span><br><span class="line">        ans=<span class="built_in">max</span>(ans,q<span class="number">+1</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P3903å¯¼å¼¹æ‹¦æˆª"><a href="#P3903å¯¼å¼¹æ‹¦æˆª" class="headerlink" title="P3903å¯¼å¼¹æ‹¦æˆª"></a><a class="link"   href="https://www.luogu.com.cn/problem/P3903" >P3903å¯¼å¼¹æ‹¦æˆª<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>å…¶å®å°±æ˜¯æ±‚æ‹ç‚¹çš„æ•°é‡ï¼Œæ³¨æ„ä¸èƒ½ç®—å¼€å¤´ã€‚</p>
<p>ç»å¦™çš„å¼‚æˆ–ä»£ç ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e3</span><span class="number">+10</span>;</span><br><span class="line"><span class="type">int</span> n,p,q,bj,ans=<span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> a[N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        p=q;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;q);</span><br><span class="line">        <span class="keyword">if</span>(p==q) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">if</span>(bj^(q&lt;p))<span class="comment">//ç¬¬äºŒå‘è¦æ¯”ç¬¬ä¸€å‘å°ï¼Œç¬¬ä¸‰å‘è¦æ¯”ç¬¬äºŒå‘å¤§</span></span><br><span class="line">        &#123;</span><br><span class="line">            ans++,bj=q&lt;p;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P2782å‹å¥½åŸå¸‚"><a href="#P2782å‹å¥½åŸå¸‚" class="headerlink" title="P2782å‹å¥½åŸå¸‚"></a><a class="link"   href="https://www.luogu.com.cn/problem/P2782" >P2782å‹å¥½åŸå¸‚<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>ä¸æœ¨æ£åŠ å·¥ç±»ä¼¼ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lowbit(x) ((x)&amp;(-x))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e6</span><span class="number">+10</span>;</span><br><span class="line"><span class="type">int</span> n,ans=<span class="number">-1</span>,maxn=<span class="number">-1</span>;</span><br><span class="line"><span class="type">int</span> f[N];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=u;i&lt;=maxn;i+=<span class="built_in">lowbit</span>(i)) f[i]=<span class="built_in">max</span>(f[i],v);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">query</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=x;i;i-=<span class="built_in">lowbit</span>(i)) res=<span class="built_in">max</span>(res,f[i]);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> l,w;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span>&lt;(<span class="type">const</span> edge &amp;x)<span class="type">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> l&lt;x.l;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;e[N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>,&amp;e[i].l,&amp;e[i].w),maxn=<span class="built_in">max</span>(maxn,e[i].w);</span><br><span class="line">    <span class="built_in">sort</span>(e<span class="number">+1</span>,e<span class="number">+1</span>+n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> q=<span class="built_in">query</span>(e[i].w<span class="number">-1</span>);</span><br><span class="line">        <span class="built_in">update</span>(e[i].w,q<span class="number">+1</span>);</span><br><span class="line">        ans=<span class="built_in">max</span>(ans,q<span class="number">+1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P1095å®ˆæœ›è€…çš„é€ƒç¦»"><a href="#P1095å®ˆæœ›è€…çš„é€ƒç¦»" class="headerlink" title="P1095å®ˆæœ›è€…çš„é€ƒç¦»"></a><a class="link"   href="https://www.luogu.com.cn/problem/P1095" >P1095å®ˆæœ›è€…çš„é€ƒç¦»<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>æˆ‘ä»¬åˆ†åˆ«è®¡ç®—é—ªçƒå’Œè·‘æ­¥çš„è·ç¦»ï¼Œèƒ½é—ªçƒæ˜¯ä¸€å®šé—ªçƒçš„ï¼Œå‡å¦‚æŸæ—¶åˆ»é—ªçƒæ›´ä¼˜ï¼Œåªéœ€è¦æŠŠè·‘æ­¥æ›¿æ¢æˆé—ªçƒå³å¯ï¼Œå¦åˆ™å°±åªè¿›è¡Œè·‘æ­¥ï¼Œå¦‚æœåˆ°äº†ç»ˆç‚¹ç›´æ¥å°±é€€å‡ºã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">3e5</span><span class="number">+7</span>;</span><br><span class="line"><span class="type">int</span> s1,s2;<span class="comment">//ç›¸åŒæ—¶é—´å†…è·‘æ­¥ï¼Œé—ªçƒæ‰€èƒ½è·‘çš„æœ€è¿œè·ç¦»</span></span><br><span class="line"><span class="type">int</span> m,s,t;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;m,&amp;s,&amp;t);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=t;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        s1+=<span class="number">17</span>;</span><br><span class="line">        <span class="keyword">if</span>(m&gt;=<span class="number">10</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            s2+=<span class="number">60</span>;</span><br><span class="line">            m-=<span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> m+=<span class="number">4</span>;</span><br><span class="line">        <span class="keyword">if</span>(s2&gt;s1) s1=s2;<span class="comment">//èƒ½æ›¿æ¢æ—¶å°±è¿›è¡Œæ›¿æ¢</span></span><br><span class="line">        <span class="keyword">if</span>(s1&gt;=s)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;Yes\n%d\n&quot;</span>,i);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;No\n%d\n&quot;</span>,s1);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P2679"><a href="#P2679" class="headerlink" title="P2679"></a><a class="link"   href="https://www.luogu.com.cn/problem/P2679" >P2679<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>çŠ¶æ€å®šä¹‰è§æ³¨é‡Šï¼Œè½¬ç§»åˆ†æƒ…å†µè®¨è®ºï¼Œæ³¨æ„æ»šåŠ¨æ•°ç»„ä¼˜åŒ–ç©ºé—´ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod=<span class="number">1000000007</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1010</span>;</span><br><span class="line"><span class="type">int</span> n,m,k;</span><br><span class="line"><span class="type">char</span> a[N],b[<span class="number">220</span>];</span><br><span class="line"><span class="type">int</span> f[<span class="number">2</span>][<span class="number">220</span>][<span class="number">220</span>][<span class="number">2</span>];<span class="comment">//f[i][j][l][1/0]è¡¨ç¤ºè€ƒè™‘äº†å‰iä¸ªaä¸­çš„å­—ç¬¦ä½¿ç”¨lä¸ªå­ä¸²åŒ¹é…äº†bä¸²ä¸­çš„å‰jä¸ªå­—ç¬¦ä¸”ç¬¬iä½é€‰/ä¸é€‰çš„æ–¹æ¡ˆæ•°</span></span><br><span class="line"><span class="comment">//ç¬¬ä¸€ç»´é‡‡ç”¨æ»šåŠ¨æ•°ç»„ä¼˜åŒ–</span></span><br><span class="line"><span class="type">bool</span> bj;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;n,&amp;m,&amp;k);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s\n%s&quot;</span>,a,b);</span><br><span class="line">    f[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>]=f[<span class="number">1</span>][<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    bj=<span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++,bj=!bj)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=m;j++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">1</span>;l&lt;=k;l++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(a[i<span class="number">-1</span>]==b[j<span class="number">-1</span>])</span><br><span class="line">                &#123;</span><br><span class="line">                    f[bj][j][l][<span class="number">0</span>]=(f[!bj][j][l][<span class="number">0</span>]+f[!bj][j][l][<span class="number">1</span>])%mod;</span><br><span class="line">                    f[bj][j][l][<span class="number">1</span>]=(f[!bj][j<span class="number">-1</span>][l<span class="number">-1</span>][<span class="number">0</span>]+(f[!bj][j<span class="number">-1</span>][l<span class="number">-1</span>][<span class="number">1</span>]+f[!bj][j<span class="number">-1</span>][l][<span class="number">1</span>])%mod)%mod;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    f[bj][j][l][<span class="number">0</span>]=(f[!bj][j][l][<span class="number">0</span>]+f[!bj][j][l][<span class="number">1</span>])%mod;</span><br><span class="line">                    f[bj][j][l][<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,(f[!bj][m][k][<span class="number">0</span>]+f[!bj][m][k][<span class="number">1</span>])%mod);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P2051ä¸­å›½è±¡æ£‹"><a href="#P2051ä¸­å›½è±¡æ£‹" class="headerlink" title="P2051ä¸­å›½è±¡æ£‹"></a><a class="link"   href="https://www.luogu.com.cn/problem/P2051" >P2051ä¸­å›½è±¡æ£‹<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>å®šä¹‰ $f_{i,j,k}$ ä¸ºè€ƒè™‘å®Œäº†å‰ $i$ è¡Œï¼Œè¯¥è¡Œæœ‰ $j$ ä¸ªé›¶ä¸ªç‚®çš„åˆ—ï¼Œæœ‰ $k$ ä¸ªä¸€ä¸ªç‚®çš„åˆ—ï¼Œè¿™ç§æƒ…å†µä¸‹çš„æ–¹æ¡ˆæ•°ã€‚</p>
<p>é¦–å…ˆä¸­å›½è±¡æ£‹è¦ä½¿å¾—æ¯ä¸ªç‚®äº’ä¸æ”»å‡»ï¼Œæ¯è¡Œæ¯åˆ—çš„ç‚®çš„æ•°é‡ä¸èƒ½è¶…è¿‡ä¸¤ä¸ªï¼Œæ‰€ä»¥æ•°é‡æœ‰ä¸‰ç§çŠ¶æ€ï¼Œç”±äºçŸ¥é“ä¸¤ä¸ªå‰©ä¸‹ä¸€ä¸ªå°±å¯ä»¥ç®—å‡ºæ¥ï¼Œæ‰€ä»¥åªéœ€è¦è®°å½•ä¸¤ä¸ªã€‚</p>
<p>è€ƒè™‘åœ¨ä¸‹ä¸€è¡Œæ”¾é›¶ä¸ªç‚®è¿˜æ˜¯ä¸€ä¸ªç‚®è¿˜æ˜¯ä¸¤ä¸ªç‚®ï¼Œåˆ†åˆ«å†™å‡ºè½¬ç§»å¼å­ã€‚</p>
<p>å‡å¦‚ä¸‹ä¸€è¡Œä¸æ”¾ç‚®ï¼Œé‚£ä¹ˆå°±ç›´æ¥ç»§æ‰¿ã€‚</p>
<p>å‡å¦‚ä¸‹ä¸€è¡Œæ”¾ä¸€ä¸ªç‚®ï¼Œè¿™ä¸ªç‚®å¯èƒ½æ”¾åœ¨ä¸€ä¸ªç‚®çš„åˆ—ï¼Œä¹Ÿå¯èƒ½æ”¾åœ¨é›¶ä¸ªç‚®çš„åˆ—ã€‚</p>
<p>å‡å¦‚ä¸‹ä¸€è¡Œæ”¾ä¸¤ä¸ªç‚®ï¼Œé‚£ä¹ˆæœ‰å¯èƒ½è¿™ä¸¤ä¸ªç‚®éƒ½æ”¾åœ¨é›¶ä¸ªç‚®çš„åˆ—ï¼Œæœ‰å¯èƒ½éƒ½æ”¾åœ¨ä¸€ä¸ªç‚®çš„åˆ—ï¼Œä¹Ÿæœ‰å¯èƒ½ä¸€ä¸ªç‚®æ”¾åœ¨é›¶ä¸ªç‚®çš„åˆ—ï¼Œä¸€ä¸ªæ”¾åœ¨ä¸€ä¸ªç‚®çš„åˆ—ï¼Œè¿™é‡Œå°±éœ€è¦é¢„å¤„ç†ä¸€ä¸‹ 2 çš„ç»„åˆæ•°äº†ã€‚</p>
<p>æœ€åç»Ÿè®¡ç­”æ¡ˆçš„æ—¶å€™ï¼Œæ¯ç§æƒ…å†µå–ä¸€ä¸ª maxã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod=<span class="number">9999973</span>;</span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="type">int</span> ans;</span><br><span class="line"><span class="type">int</span> f[<span class="number">105</span>][<span class="number">105</span>][<span class="number">105</span>];</span><br><span class="line"><span class="type">int</span> c[<span class="number">105</span>][<span class="number">105</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=<span class="number">105</span>;i++)</span><br><span class="line">        c[i][<span class="number">2</span>]=i*(i<span class="number">-1</span>)/<span class="number">2</span>%mod;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="built_in">init</span>();</span><br><span class="line">    f[<span class="number">0</span>][m][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=m;j++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">0</span>;k&lt;=m-j;k++)</span><br><span class="line">            &#123;</span><br><span class="line">                f[i<span class="number">+1</span>][j][k]=(f[i<span class="number">+1</span>][j][k]+f[i][j][k])%mod;<span class="comment">//0</span></span><br><span class="line">                <span class="keyword">if</span>(j&gt;=<span class="number">1</span>) f[i<span class="number">+1</span>][j<span class="number">-1</span>][k<span class="number">+1</span>]=(f[i<span class="number">+1</span>][j<span class="number">-1</span>][k<span class="number">+1</span>]+(<span class="number">1ll</span>*f[i][j][k]*j%mod))%mod;</span><br><span class="line">                <span class="keyword">if</span>(k&gt;=<span class="number">1</span>) f[i<span class="number">+1</span>][j][k<span class="number">-1</span>]=(f[i<span class="number">+1</span>][j][k<span class="number">-1</span>]+(<span class="number">1ll</span>*f[i][j][k]*k%mod))%mod;</span><br><span class="line">                <span class="keyword">if</span>(j&gt;=<span class="number">1</span>) f[i<span class="number">+1</span>][j<span class="number">-1</span>][k]=(f[i<span class="number">+1</span>][j<span class="number">-1</span>][k]+(<span class="number">1ll</span>*f[i][j][k]*j*k%mod))%mod;</span><br><span class="line">                <span class="keyword">if</span>(j&gt;=<span class="number">2</span>) f[i<span class="number">+1</span>][j<span class="number">-2</span>][k<span class="number">+2</span>]=(f[i<span class="number">+1</span>][j<span class="number">-2</span>][k<span class="number">+2</span>]+(<span class="number">1ll</span>*f[i][j][k]*c[j][<span class="number">2</span>]%mod))%mod;</span><br><span class="line">                <span class="keyword">if</span>(k&gt;=<span class="number">2</span>) f[i<span class="number">+1</span>][j][k<span class="number">-2</span>]=(f[i<span class="number">+1</span>][j][k<span class="number">-2</span>]+(<span class="number">1ll</span>*f[i][j][k]*c[k][<span class="number">2</span>]%mod))%mod;</span><br><span class="line">            &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=m;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=m-i;j++)</span><br><span class="line">            ans=(ans+f[n][i][j])%mod;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P7074æ–¹æ ¼å–æ•°"><a href="#P7074æ–¹æ ¼å–æ•°" class="headerlink" title="P7074æ–¹æ ¼å–æ•°"></a><a class="link"   href="https://www.luogu.com.cn/problem/P7074" >P7074æ–¹æ ¼å–æ•°<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>ç”±äºæœ¬é¢˜ä¸ä»…å¯ä»¥å‘ä¸‹ï¼Œè¿˜å¯ä»¥å‘ä¸Šï¼Œæ‰€ä»¥ä¸èƒ½åƒæ•°å­—ä¸‰è§’å½¢é‚£æ ·è¿›è¡Œè½¬ç§»ã€‚</p>
<p>å› ä¸ºä¸èƒ½èµ°é‡å¤çš„è·¯ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å†å¼€ä¸€ç»´ï¼Œè®°å½•å®ƒæ˜¯ä»ä¸Šæ–¹è½¬ç§»è€Œæ¥è¿˜æ˜¯ä»ä¸‹æ–¹è½¬ç§»è€Œæ¥ï¼Œå› ä¸ºå‡å¦‚å®ƒè¿™æ­¥èµ°äº†å‘ä¸‹ï¼Œé‚£ä¹ˆå®ƒä¸Šä¸€æ­¥å¦‚æœä¹Ÿæ˜¯çºµå‘ç§»åŠ¨çš„è¯ä¹Ÿä¸€å®šæ˜¯å‘ä¸‹ã€‚</p>
<p>ä»å·¦å‘å³çš„è½¬ç§»è¿˜æ˜¯æ­£å¸¸è¿›è¡Œï¼Œè¿™æ—¶å€™ä¸è€ƒè™‘ä¸Šä¸€æ­¥æ˜¯ä»ä¸Šæ–¹èµ°æ¥è¿˜æ˜¯ä»ä¸‹æ–¹èµ°æ¥ã€‚</p>
<p>å¯¹äºå‘ä¸‹èµ°ï¼Œæ­£åºæšä¸¾ä¸€éï¼Œå¯¹äºå‘ä¸Šèµ°ï¼Œå€’å™æšä¸¾ä¸€éå³å¯ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e3</span><span class="number">+10</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="type">int</span> number[N][N];</span><br><span class="line">ll f[N][N][<span class="number">2</span>];<span class="comment">//1ä»£è¡¨ä»æ ¼å­ä¸Šæ–¹èµ°æ¥ï¼Œ0ä»£è¡¨ä»æ ¼å­çš„ä¸‹æ–¹èµ°æ¥</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=m;j++)</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;number[i][j]);</span><br><span class="line">    <span class="built_in">memset</span>(f,<span class="number">0xc0</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line">    f[<span class="number">1</span>][<span class="number">1</span>][<span class="number">0</span>]=f[<span class="number">1</span>][<span class="number">1</span>][<span class="number">1</span>]=number[<span class="number">1</span>][<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=m;j++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(j<span class="number">-1</span>&gt;=<span class="number">1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                f[i][j][<span class="number">0</span>]=<span class="built_in">max</span>(f[i][j][<span class="number">0</span>],<span class="built_in">max</span>(f[i][j<span class="number">-1</span>][<span class="number">0</span>],f[i][j<span class="number">-1</span>][<span class="number">1</span>])+number[i][j]);</span><br><span class="line">                f[i][j][<span class="number">1</span>]=<span class="built_in">max</span>(f[i][j][<span class="number">1</span>],<span class="built_in">max</span>(f[i][j<span class="number">-1</span>][<span class="number">0</span>],f[i][j<span class="number">-1</span>][<span class="number">1</span>])+number[i][j]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(i<span class="number">-1</span>&gt;=<span class="number">1</span>)</span><br><span class="line">                f[i][j][<span class="number">1</span>]=<span class="built_in">max</span>(f[i][j][<span class="number">1</span>],f[i<span class="number">-1</span>][j][<span class="number">1</span>]+number[i][j]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=n<span class="number">-1</span>;i&gt;=<span class="number">1</span>;i--)</span><br><span class="line">            f[i][j][<span class="number">0</span>]=<span class="built_in">max</span>(f[i][j][<span class="number">0</span>],f[i<span class="number">+1</span>][j][<span class="number">0</span>]+number[i][j]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,<span class="built_in">max</span>(f[n][m][<span class="number">1</span>],f[n][m][<span class="number">0</span>]));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="P4158-ç²‰åˆ·åŒ "><a href="#P4158-ç²‰åˆ·åŒ " class="headerlink" title="P4158 ç²‰åˆ·åŒ "></a><a class="link"   href="https://www.luogu.com.cn/problem/P4158" >P4158 ç²‰åˆ·åŒ <i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>æ³¨é‡Šå·²è¿°å¤‡çŸ£ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m, t, ans;</span><br><span class="line"><span class="type">char</span> a[<span class="number">55</span>][<span class="number">55</span>];</span><br><span class="line"><span class="comment">// å‰ i æ¡æ¨¡æ¿ç²‰åˆ·äº† j æ¬¡ èƒ½æ­£ç¡®ç²‰åˆ·çš„æœ€å¤§æ ¼å­æ•°</span></span><br><span class="line"><span class="type">int</span> f[<span class="number">55</span>][<span class="number">2505</span>];</span><br><span class="line"><span class="comment">// ç¬¬ i æ¡æœ¨æ¿ä¸Šç²‰åˆ·äº† j æ¬¡æ¶‚äº†å‰ k ä¸ªæ ¼å­çš„æƒ…å†µä¸‹æ­£ç¡®ç²‰åˆ·çš„æœ€å¤§æ ¼å­æ•°</span></span><br><span class="line"><span class="type">int</span> g[<span class="number">55</span>][<span class="number">2505</span>][<span class="number">55</span>];</span><br><span class="line"><span class="comment">// g[i][j][k] = max(g[i][j][k], g[i][j - 1][q] + max(sum[i][k] - sum[i][q], k - q - sum[i][k] + sum[i][q]));</span></span><br><span class="line"><span class="comment">// ç¬¬ i æ¡æœ¨æ¿ä¸Šå‰ j ä¸ªæ ¼å­æœ‰å¤šå°‘è“è‰²æ ¼å­</span></span><br><span class="line"><span class="type">int</span> sum[<span class="number">55</span>][<span class="number">2505</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;n, &amp;m, &amp;t);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, a[i]);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[i][j] == <span class="string">&#x27;1&#x27;</span>) sum[i][j + <span class="number">1</span>] = sum[i][j] + <span class="number">1</span>; <span class="comment">// å¤„ç†è“è‰²æ ¼å­çš„å‰ç¼€å’Œ</span></span><br><span class="line">            <span class="keyword">else</span> sum[i][j + <span class="number">1</span>] = sum[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; j++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k = <span class="number">1</span>; k &lt;= m; k++)</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> q = j - <span class="number">1</span>; q &lt; k; q++) <span class="comment">// æœ€å°‘åˆ· j - 1 ä¸ªæ ¼å­ æœ€å¤šåˆ· k - 1 ä¸ªæ ¼å­ å› ä¸ºä¸‹ä¸€æ­¥è¿˜è¦åˆ· q ~ k</span></span><br><span class="line">                g[i][j][k] = <span class="built_in">max</span>(g[i][j][k], g[i][j - <span class="number">1</span>][q] + <span class="built_in">max</span>(sum[i][k] - sum[i][q], k - q - sum[i][k] + sum[i][q]));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= t; j++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k = <span class="number">0</span>; k &lt;= <span class="built_in">min</span>(j, m); k++) <span class="comment">// è¿™æ¬¡æœ€å¤šç²‰åˆ· j æ¬¡ ä½†å‡å¦‚æ¯”è¿™ä¸€æ¡æœ¨æ¿è¿˜å¤šæ¬¡ç”±äºä¸èƒ½é‡å¤åˆ· æ‰€ä»¥è¿˜è¦å°äºç­‰äºæœ¨æ¿çš„é•¿åº¦</span></span><br><span class="line">                f[i][j] = <span class="built_in">max</span>(f[i][j], f[i - <span class="number">1</span>][j - k] + g[i][k][m]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= t; i++)</span><br><span class="line">        ans = <span class="built_in">max</span>(ans, f[n][i]);</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;            </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="P3558-BAJ-Bytecomputer"><a href="#P3558-BAJ-Bytecomputer" class="headerlink" title="P3558 BAJ-Bytecomputer"></a><a class="link"   href="https://www.luogu.com.cn/problem/P3558" >P3558 BAJ-Bytecomputer<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>è¿˜ä¸æ˜¯å¾ˆæ‡‚ç¬¬ä¸€ç¯‡é¢˜è§£çš„åšæ³•ï¼Œåˆ°æ—¶å€™æ‡‚äº†æ¥è¡¥ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e6</span> + <span class="number">7</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> INF = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> f[<span class="number">3</span>]; <span class="comment">// å‰ i ä¸ªæ•° ä»¥ 0 - -1 1 - 0 2 - 1 ç»“å°¾çš„æ“ä½œæ•°</span></span><br><span class="line"><span class="type">int</span> a[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">    f[<span class="number">0</span>] = f[<span class="number">1</span>] = f[<span class="number">2</span>] = INF;</span><br><span class="line">    f[a[<span class="number">1</span>] + <span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i] == <span class="number">-1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            f[<span class="number">1</span>] = INF; <span class="comment">// ä¸å¿…è½¬ç§»</span></span><br><span class="line">            f[<span class="number">2</span>] += <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a[i] == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            f[<span class="number">1</span>] = <span class="built_in">min</span>(f[<span class="number">0</span>], f[<span class="number">1</span>]);</span><br><span class="line">            f[<span class="number">0</span>]++;</span><br><span class="line">            f[<span class="number">2</span>]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            f[<span class="number">2</span>] = <span class="built_in">min</span>(f[<span class="number">0</span>], <span class="built_in">min</span>(f[<span class="number">1</span>], f[<span class="number">2</span>]));</span><br><span class="line">            f[<span class="number">1</span>] = f[<span class="number">0</span>] + <span class="number">1</span>;</span><br><span class="line">            f[<span class="number">0</span>] += <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> ans = <span class="built_in">min</span>(f[<span class="number">0</span>], <span class="built_in">min</span>(f[<span class="number">1</span>], f[<span class="number">2</span>]));</span><br><span class="line">    <span class="keyword">if</span>(ans &lt; INF) cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;BRAK&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="P1855-æ¦¨å–kkksc03"><a href="#P1855-æ¦¨å–kkksc03" class="headerlink" title="P1855 æ¦¨å–kkksc03"></a><a class="link"   href="https://www.luogu.com.cn/problem/P1855" >P1855 æ¦¨å–kkksc03<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>ç»å…¸ 0 &#x2F; 1 èƒŒåŒ…é—®é¢˜ï¼Œä¸è¿‡æœ‰ä¸¤ç§é™åˆ¶ï¼Œéƒ½åŠ å…¥çŠ¶æ€å³å¯ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m, t;</span><br><span class="line"><span class="type">int</span> mm[<span class="number">101</span>], tt[<span class="number">101</span>];</span><br><span class="line"><span class="type">int</span> f[<span class="number">201</span>][<span class="number">201</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;n, &amp;m, &amp;t);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;mm[i], &amp;tt[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = m; j &gt;= mm[i]; j--)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k = t; k &gt;= tt[i]; k--)</span><br><span class="line">                f[j][k] = <span class="built_in">max</span>(f[j][k], f[j - mm[i]][k - tt[i]] + <span class="number">1</span>);</span><br><span class="line">    cout &lt;&lt; f[m][t] &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="P5020-è´§å¸ç³»ç»Ÿ"><a href="#P5020-è´§å¸ç³»ç»Ÿ" class="headerlink" title="P5020 è´§å¸ç³»ç»Ÿ"></a><a class="link"   href="https://www.luogu.com.cn/problem/P5020" >P5020 è´§å¸ç³»ç»Ÿ<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>A é›†åˆä¸­å¯ä»¥è¢«é™¤äº†è‡ªå·±çš„é‡‘å¸è¡¨ç¤ºçš„é¢é¢ä¸€å®šæ²¡ç”¨ï¼Œå‰©ä¸‹çš„å°±æ˜¯æœ€å°çš„ mã€‚</p>
<p>è®¾ $f_i$ ä¸º $i$ æ˜¯å¦èƒ½è¢« $a$ é›†åˆå†…ç»„æˆã€‚</p>
<p>å‡å¦‚ $x$ å¯ä»¥è¢« $a$ é›†åˆå†…å…ƒç´ ç»„æˆï¼Œé‚£ä¹ˆå¯èƒ½ç»„æˆ $x$ çš„æŸä¸ªæ•° $a_i$</p>
<p>å‡å»ä¹‹åï¼Œ$x - a_i$ ä¹Ÿæ˜¯å¯ä»¥è¢« $a$ é›†åˆå†…çš„å…ƒç´ ç»„æˆã€‚</p>
<p>æšä¸¾ä¸€ä¸‹æ¯”å½“å‰é¢é¢å¤§çš„ç„¶åç”¨å½“å‰é¢é¢æ›´æ–°å®ƒä»¬å³å¯ã€‚</p>
<p>åˆå§‹åŒ– $f_0&#x3D;1$</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> f[<span class="number">25555</span>]; <span class="comment">// i èƒ½å¦è¢«ç»„æˆ</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;t);</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(f, <span class="number">0</span>, <span class="built_in">sizeof</span>(f));</span><br><span class="line">        <span class="type">int</span> n;</span><br><span class="line">        <span class="type">int</span> a[<span class="number">110</span>];</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">        <span class="type">int</span> ans = n;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">        <span class="built_in">sort</span>(a + <span class="number">1</span>, a + <span class="number">1</span> + n);</span><br><span class="line">        f[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) <span class="comment">// æšä¸¾é›†åˆä¸­çš„ç‰©å“</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(f[a[i]]) <span class="comment">// å¦‚æœèƒ½è¢«è¡¨ç¤º é‚£å°±ä¸è¦å®ƒäº†</span></span><br><span class="line">            &#123;</span><br><span class="line">                ans--;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = a[i]; j &lt;= a[n]; j++) <span class="comment">// æšä¸¾æ¯” a[i] å¤§çš„æ¥æ›´æ–°</span></span><br><span class="line">                f[j] |= f[j - a[i]];</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="P1064-é‡‘æ˜çš„é¢„ç®—æ–¹æ¡ˆ"><a href="#P1064-é‡‘æ˜çš„é¢„ç®—æ–¹æ¡ˆ" class="headerlink" title="P1064 é‡‘æ˜çš„é¢„ç®—æ–¹æ¡ˆ"></a><a class="link"   href="https://www.luogu.com.cn/problem/P1064" >P1064 é‡‘æ˜çš„é¢„ç®—æ–¹æ¡ˆ<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>ç”±äºæœ€å¤šåªæœ‰ä¸¤ä¸ªé™„ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬æ­£å¸¸æšä¸¾ä¸»ä»¶ï¼Œç„¶åçœ‹çœ‹é™„ä»¶é€‰ä¸é€‰æ€ä¹ˆé€‰ä¼˜å³å¯ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">32010</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> v[N], w[N], p[N];</span><br><span class="line"><span class="type">int</span> f[N];</span><br><span class="line"><span class="type">int</span> mp[<span class="number">66</span>][<span class="number">3</span>];</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; mm;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n, m;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;w[i], &amp;v[i], &amp;p[i]);</span><br><span class="line">        <span class="keyword">if</span>(p[i])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(!mp[p[i]][<span class="number">1</span>]) mp[p[i]][<span class="number">1</span>] = i;</span><br><span class="line">            <span class="keyword">else</span> mp[p[i]][<span class="number">2</span>] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> mm.<span class="built_in">push_back</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;i : mm)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = n; j &gt;= w[i]; j--)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> val0 = w[i] * v[i], val1 = w[mp[i][<span class="number">1</span>]] * v[mp[i][<span class="number">1</span>]], val2 = w[mp[i][<span class="number">2</span>]] * v[mp[i][<span class="number">2</span>]];</span><br><span class="line">            f[j] = <span class="built_in">max</span>(f[j], f[j - w[i]] + val0);</span><br><span class="line">            <span class="keyword">if</span>(j &gt;= w[i] + w[mp[i][<span class="number">1</span>]] &amp;&amp; val1)</span><br><span class="line">                f[j] = <span class="built_in">max</span>(f[j], f[j - w[i] - w[mp[i][<span class="number">1</span>]]] + val0 + val1);</span><br><span class="line">            <span class="keyword">if</span>(j &gt;= w[i] + w[mp[i][<span class="number">2</span>]] &amp;&amp; val2)</span><br><span class="line">                f[j] = <span class="built_in">max</span>(f[j], f[j - w[i] - w[mp[i][<span class="number">2</span>]]] + val0 + val2);</span><br><span class="line">            <span class="keyword">if</span>(j &gt;= w[i] + w[mp[i][<span class="number">1</span>]] + w[mp[i][<span class="number">2</span>]] &amp;&amp; val1 &amp;&amp; val2)</span><br><span class="line">                f[j] = <span class="built_in">max</span>(f[j], f[j - w[i] - w[mp[i][<span class="number">1</span>]] - w[mp[i][<span class="number">2</span>]]] + val0 + val1 + val2);</span><br><span class="line">        &#125;</span><br><span class="line">    cout &lt;&lt; f[n] &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="P2946-Cow-Frisbee-Team-S"><a href="#P2946-Cow-Frisbee-Team-S" class="headerlink" title="P2946 Cow Frisbee Team S"></a><a class="link"   href="https://www.luogu.com.cn/problem/P2946" >P2946 Cow Frisbee Team S<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>è€ƒè™‘æ¨¡æ•°ä¸ºçŠ¶æ€ï¼Œç„¶åæ­£å¸¸è€ƒè™‘æ¯ä¸€ä¸ªç‰›é€‰ä¸é€‰çš„æ–¹æ¡ˆæ•°ï¼Œæœ€åè¾“å‡ºæ¨¡æ•°ä¸º 0 çš„çŠ¶æ€å³å¯ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MOD = <span class="number">1e8</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">2005</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> M = <span class="number">1001</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> f[M]; <span class="comment">// è€ƒè™‘äº†å‰ i å¤´ç‰›æ€»èƒ½åŠ›æ¨¡ f ä¸º j çš„æ–¹æ¡ˆæ•°</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n, c;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;c);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) f[a[i] % c] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = c - <span class="number">1</span>; j &gt;= <span class="number">0</span>; j--)</span><br><span class="line">        &#123;</span><br><span class="line">            f[j] = (f[j] + f[j] % MOD + f[(j - a[i] % c + c) % c] % MOD) % MOD; <span class="comment">// é€‰æˆ–è€…ä¸é€‰ä¸¤ç§æƒ…å†µ</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; f[<span class="number">0</span>] &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="P1156-åƒåœ¾é™·é˜±"><a href="#P1156-åƒåœ¾é™·é˜±" class="headerlink" title="P1156 åƒåœ¾é™·é˜±"></a><a class="link"   href="https://www.luogu.com.cn/problem/P1156" >P1156 åƒåœ¾é™·é˜±<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>ç”¨ $f_i$ ä»£è¡¨é«˜åº¦ä¸º $i$ æ—¶çš„æœ€é•¿å­˜æ´»æ—¶é—´ã€‚</p>
<p>æšä¸¾å½“å‰è¦å†³å®šå †å“ªä¸ªï¼Œç”¨æ—§çŠ¶æ€æ›´æ–°æ–°çŠ¶æ€ï¼Œç„¶åæŠŠæ—§çŠ¶æ€æ›´æ–°ä¸ºå¯ä»¥åƒåƒåœ¾çš„æ–°çŠ¶æ€ã€‚</p>
<p>è¿™é‡Œçš„é¡ºåºéå¸¸ç²¾å¦™ï¼Œå€¼å¾—æ·±æ€ã€‚</p>
<p>çŸ­çŸ­çš„ä»£ç ï¼Œå¤§å¤§çš„æ™ºæ…§ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">101</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> M = <span class="number">1050</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">De</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> t, p, h;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span> &lt; (<span class="type">const</span> De &amp;a) <span class="type">const</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> t &lt; a.t;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;de[N];</span><br><span class="line"><span class="type">int</span> f[N]; <span class="comment">// è€ƒè™‘äº†å‰ i ä¸ªåƒåœ¾ å †äº† j ç±³ çš„æœ€å¤šå­˜æ´»æ—¶é•¿</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> d, g;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;d, &amp;g);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= g; i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;de[i].t, &amp;de[i].p, &amp;de[i].h);</span><br><span class="line">    <span class="built_in">sort</span>(de + <span class="number">1</span>, de + <span class="number">1</span> + g);</span><br><span class="line">    f[<span class="number">0</span>] = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= g; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = d; j &gt;= <span class="number">0</span>; j--)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(f[j] &gt;= de[i].t) <span class="comment">// å½“å‰é«˜åº¦å¯ä»¥å­˜æ´»</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(j + de[i].h &gt;= d) <span class="comment">// å¯ä»¥å‡ºå»</span></span><br><span class="line">                &#123;</span><br><span class="line">                    cout &lt;&lt; de[i].t &lt;&lt; endl;</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                f[j + de[i].h] = <span class="built_in">max</span>(f[j + de[i].h], f[j]); <span class="comment">// å †</span></span><br><span class="line">                f[j] += de[i].p; <span class="comment">// åƒ</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="comment">// cout &lt;&lt; &#x27;Y&#x27; &lt;&lt; endl;</span></span><br><span class="line">    cout &lt;&lt; f[<span class="number">0</span>] &lt;&lt; endl; <span class="comment">// å‡ºä¸å» å°±éƒ½åƒä¸å †</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="æ ‘å½¢DP"><a href="#æ ‘å½¢DP" class="headerlink" title="æ ‘å½¢DP"></a>æ ‘å½¢DP</h2><h3 id="P2014é€‰è¯¾"><a href="#P2014é€‰è¯¾" class="headerlink" title="P2014é€‰è¯¾"></a><a class="link"   href="https://www.luogu.com.cn/problem/P2014" >P2014é€‰è¯¾<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>æ ‘å½¢èƒŒåŒ…é—®é¢˜ã€‚</p>
<p>å€’å™æšä¸¾ä½“ç§¯æŠŠæšä¸¾åˆ°ç¬¬å‡ ä¸ªå„¿å­è¿™ä¸ªçŠ¶æ€ç»™æ»šæ‰ï¼Œè¯¦æƒ…è§DP-èƒŒåŒ…é—®é¢˜ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">305</span>;</span><br><span class="line"><span class="type">int</span> n,m,edcnt;</span><br><span class="line"><span class="type">int</span> f[N][N];</span><br><span class="line"><span class="type">int</span> s[N];</span><br><span class="line"><span class="type">int</span> fir[N];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> to,nxt;</span><br><span class="line">&#125;e[N];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++edcnt].to=v;</span><br><span class="line">    e[edcnt].nxt=fir[u];</span><br><span class="line">    fir[u]=edcnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=fir[u];i;i=e[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> v=e[i].to;</span><br><span class="line">        <span class="built_in">dfs</span>(v);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=m<span class="number">+1</span>;j&gt;=<span class="number">1</span>;j--)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">0</span>;k&lt;j;k++)</span><br><span class="line">                f[u][j]=<span class="built_in">max</span>(f[u][j],f[v][k]+f[u][j-k]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> k;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;k,&amp;s[i]);</span><br><span class="line">        f[i][<span class="number">1</span>]=s[i];</span><br><span class="line">        <span class="built_in">add</span>(k,i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,f[<span class="number">0</span>][m<span class="number">+1</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P1352æ²¡æœ‰ä¸Šå¸çš„èˆä¼š"><a href="#P1352æ²¡æœ‰ä¸Šå¸çš„èˆä¼š" class="headerlink" title="P1352æ²¡æœ‰ä¸Šå¸çš„èˆä¼š"></a><a class="link"   href="https://www.luogu.com.cn/problem/P1352" >P1352æ²¡æœ‰ä¸Šå¸çš„èˆä¼š<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>æœ¬è´¨ä¸ºæ ‘çš„æœ€å¤§ç‹¬ç«‹é›†é—®é¢˜ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">6e3</span><span class="number">+7</span>;</span><br><span class="line"><span class="type">int</span> n,edcnt;</span><br><span class="line"><span class="type">int</span> r[N];</span><br><span class="line"><span class="type">int</span> f[N][<span class="number">2</span>];</span><br><span class="line"><span class="type">int</span> fir[N];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> nxt,to;</span><br><span class="line">&#125;e[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++edcnt].to=v;</span><br><span class="line">    e[edcnt].nxt=fir[u];</span><br><span class="line">    fir[u]=edcnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> fa)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=fir[u];i;i=e[i].nxt)</span><br><span class="line">        <span class="keyword">if</span>(e[i].to!=fa)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> v=e[i].to;</span><br><span class="line">            <span class="built_in">dfs</span>(v,u);</span><br><span class="line">        &#125;</span><br><span class="line">    f[u][<span class="number">1</span>]=r[u];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=fir[u];i;i=e[i].nxt)</span><br><span class="line">        <span class="keyword">if</span>(e[i].to!=fa)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> v=e[i].to;</span><br><span class="line">            f[u][<span class="number">0</span>]+=<span class="built_in">max</span>(f[v][<span class="number">0</span>],f[v][<span class="number">1</span>]);</span><br><span class="line">            f[u][<span class="number">1</span>]+=f[v][<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;r[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> l,k;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;l,&amp;k);</span><br><span class="line">        <span class="built_in">add</span>(k,l);</span><br><span class="line">        <span class="built_in">add</span>(l,k);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">1</span>,<span class="number">-1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,<span class="built_in">max</span>(f[<span class="number">1</span>][<span class="number">0</span>],f[<span class="number">1</span>][<span class="number">1</span>]));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P2016æˆ˜ç•¥æ¸¸æˆ"><a href="#P2016æˆ˜ç•¥æ¸¸æˆ" class="headerlink" title="P2016æˆ˜ç•¥æ¸¸æˆ"></a><a class="link"   href="https://www.luogu.com.cn/problem/P2016" >P2016æˆ˜ç•¥æ¸¸æˆ<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>ä¸æ²¡æœ‰ä¸Šå¸çš„èˆä¼šç±»ä¼¼ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">2000</span>;</span><br><span class="line"><span class="type">int</span> fir[N];</span><br><span class="line"><span class="type">int</span> f[N][<span class="number">2</span>];</span><br><span class="line"><span class="type">int</span> n,edcnt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> to,nxt;</span><br><span class="line">&#125;e[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++edcnt].to=v;</span><br><span class="line">    e[edcnt].nxt=fir[u];</span><br><span class="line">    fir[u]=edcnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> fa)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    f[u][<span class="number">1</span>]=<span class="number">1</span>,f[u][<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=fir[u];i;i=e[i].nxt)</span><br><span class="line">        <span class="keyword">if</span>(e[i].to!=fa)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> v=e[i].to;</span><br><span class="line">            <span class="built_in">dfs</span>(v,u);</span><br><span class="line">            f[u][<span class="number">1</span>]+=<span class="built_in">min</span>(f[v][<span class="number">0</span>],f[v][<span class="number">1</span>]);</span><br><span class="line">            f[u][<span class="number">0</span>]+=f[v][<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> u,k,v;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;u,&amp;k);</span><br><span class="line">        u++;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=k;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;v);</span><br><span class="line">            <span class="built_in">add</span>(u,++v);</span><br><span class="line">            <span class="built_in">add</span>(v,u);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">1</span>,<span class="number">-1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,<span class="built_in">min</span>(f[<span class="number">1</span>][<span class="number">0</span>],f[<span class="number">1</span>][<span class="number">1</span>]));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P4516æ½œå…¥è¡ŒåŠ¨"><a href="#P4516æ½œå…¥è¡ŒåŠ¨" class="headerlink" title="P4516æ½œå…¥è¡ŒåŠ¨"></a><a class="link"   href="https://www.luogu.com.cn/problem/P4516" >P4516æ½œå…¥è¡ŒåŠ¨<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>å…¸å‹çš„æ ‘å½¢èƒŒåŒ…é—®é¢˜ï¼Œé—®é¢˜åœ¨äºåˆå¹¶ä¸¤é¢—å­æ ‘ï¼ŒçŠ¶æ€å®šä¹‰è§æ³¨é‡Šã€‚</p>
<p>å¯¹äºä¸€ä¸ªå­æ ‘ï¼Œå®ƒçš„æ ¹èŠ‚ç‚¹æœ‰å››ç§å¯èƒ½çš„æƒ…å†µï¼šæ²¡æ”¾ç½®æ²¡è¢«ç›‘å¬ï¼Œæ²¡æ”¾ç½®è¢«ç›‘å¬ï¼Œæ”¾ç½®æ²¡è¢«ç›‘å¬ï¼Œæ”¾ç½®è¢«ç›‘å¬ã€‚</p>
<p>ç„¶åå¯¹è¿™äº›å¦ä¸€ä¸ªå­æ ‘çš„æƒ…å†µè¿›è¡Œåˆ†ç±»è®¨è®ºå³å¯ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e5</span><span class="number">+7</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod=<span class="number">1e9</span><span class="number">+7</span>;</span><br><span class="line"><span class="type">int</span> n,k;</span><br><span class="line"><span class="type">int</span> edcnt;</span><br><span class="line"><span class="type">int</span> fir[N],siz[N];</span><br><span class="line"><span class="type">int</span> f[N][<span class="number">2</span>][<span class="number">2</span>][<span class="number">101</span>];<span class="comment">//ä»¥iä¸ºæ ¹çš„å­æ ‘ï¼ŒièŠ‚ç‚¹æ”¾æ²¡æ”¾è£…ç½®ï¼Œå½“å‰è¿™ä¸ªèŠ‚ç‚¹æœ‰æ²¡æœ‰è¢«ç›‘å¬åˆ°ï¼Œå½“å‰ç”¨äº†lä¸ªç›‘å¬è®¾å¤‡çš„æ–¹æ¡ˆæ•°</span></span><br><span class="line"><span class="type">int</span> temp[<span class="number">2</span>][<span class="number">2</span>][<span class="number">101</span>];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> nxt,to;</span><br><span class="line">&#125;e[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++edcnt].to=v;</span><br><span class="line">    e[edcnt].nxt=fir[u];</span><br><span class="line">    fir[u]=edcnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dp</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> fa)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    siz[u]=<span class="number">1</span>;</span><br><span class="line">    f[u][<span class="number">1</span>][<span class="number">0</span>][<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">    f[u][<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=fir[u];i;i=e[i].nxt)</span><br><span class="line">        <span class="keyword">if</span>(e[i].to!=fa)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> v=e[i].to;</span><br><span class="line">            <span class="built_in">dp</span>(v,u);</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=<span class="built_in">min</span>(siz[u],k);j++)</span><br><span class="line">            &#123;</span><br><span class="line">                temp[<span class="number">0</span>][<span class="number">0</span>][j]=f[u][<span class="number">0</span>][<span class="number">0</span>][j];</span><br><span class="line">                f[u][<span class="number">0</span>][<span class="number">0</span>][j]=<span class="number">0</span>;</span><br><span class="line">                temp[<span class="number">1</span>][<span class="number">0</span>][j]=f[u][<span class="number">1</span>][<span class="number">0</span>][j];</span><br><span class="line">                f[u][<span class="number">1</span>][<span class="number">0</span>][j]=<span class="number">0</span>;</span><br><span class="line">                temp[<span class="number">0</span>][<span class="number">1</span>][j]=f[u][<span class="number">0</span>][<span class="number">1</span>][j];</span><br><span class="line">                f[u][<span class="number">0</span>][<span class="number">1</span>][j]=<span class="number">0</span>;</span><br><span class="line">                temp[<span class="number">1</span>][<span class="number">1</span>][j]=f[u][<span class="number">1</span>][<span class="number">1</span>][j];</span><br><span class="line">                f[u][<span class="number">1</span>][<span class="number">1</span>][j]=<span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=<span class="built_in">min</span>(siz[u],k);j++)</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">0</span>;l&lt;=<span class="built_in">min</span>(siz[v],k-j);l++)</span><br><span class="line">                &#123;</span><br><span class="line">                    f[u][<span class="number">0</span>][<span class="number">0</span>][j+l]=(<span class="number">1ll</span>*f[u][<span class="number">0</span>][<span class="number">0</span>][j+l]<span class="number">+1ll</span>*temp[<span class="number">0</span>][<span class="number">0</span>][j]*f[v][<span class="number">0</span>][<span class="number">1</span>][l])%mod;</span><br><span class="line">                    f[u][<span class="number">0</span>][<span class="number">1</span>][j+l]=(<span class="number">1ll</span>*f[u][<span class="number">0</span>][<span class="number">1</span>][j+l]<span class="number">+1ll</span>*temp[<span class="number">0</span>][<span class="number">1</span>][j]*(f[v][<span class="number">0</span>][<span class="number">1</span>][l]+f[v][<span class="number">1</span>][<span class="number">1</span>][l])%mod<span class="number">+1ll</span>*temp[<span class="number">0</span>][<span class="number">0</span>][j]*f[v][<span class="number">1</span>][<span class="number">1</span>][l])%mod;</span><br><span class="line">                    f[u][<span class="number">1</span>][<span class="number">0</span>][j+l]=(<span class="number">1ll</span>*f[u][<span class="number">1</span>][<span class="number">0</span>][j+l]<span class="number">+1ll</span>*temp[<span class="number">1</span>][<span class="number">0</span>][j]*(f[v][<span class="number">0</span>][<span class="number">0</span>][l]+f[v][<span class="number">0</span>][<span class="number">1</span>][l]))%mod;</span><br><span class="line">                    f[u][<span class="number">1</span>][<span class="number">1</span>][j+l]=((<span class="number">1ll</span>*f[u][<span class="number">1</span>][<span class="number">1</span>][j+l]<span class="number">+1ll</span>*temp[<span class="number">1</span>][<span class="number">0</span>][j]*(f[v][<span class="number">1</span>][<span class="number">0</span>][l]+f[v][<span class="number">1</span>][<span class="number">1</span>][l]))%mod<span class="number">+1ll</span>*temp[<span class="number">1</span>][<span class="number">1</span>][j]*(<span class="number">1ll</span>*f[v][<span class="number">0</span>][<span class="number">0</span>][l]<span class="number">+1ll</span>*f[v][<span class="number">0</span>][<span class="number">1</span>][l]<span class="number">+1ll</span>*f[v][<span class="number">1</span>][<span class="number">0</span>][l]<span class="number">+1ll</span>*f[v][<span class="number">1</span>][<span class="number">1</span>][l]))%mod;</span><br><span class="line">                &#125;</span><br><span class="line">            siz[u]+=siz[v];</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;k);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> u,v;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;u,&amp;v);</span><br><span class="line">        <span class="built_in">add</span>(u,v);</span><br><span class="line">        <span class="built_in">add</span>(v,u);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">dp</span>(<span class="number">1</span>,<span class="number">-1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,(f[<span class="number">1</span>][<span class="number">0</span>][<span class="number">1</span>][k]+f[<span class="number">1</span>][<span class="number">1</span>][<span class="number">1</span>][k])%mod);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P1122æœ€å¤§å­æ ‘å’Œ"><a href="#P1122æœ€å¤§å­æ ‘å’Œ" class="headerlink" title="P1122æœ€å¤§å­æ ‘å’Œ"></a><a class="link"   href="https://www.luogu.com.cn/problem/P1122" >P1122æœ€å¤§å­æ ‘å’Œ<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>å¸¸è§„æ ‘å½¢DPã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">2e4</span><span class="number">+7</span>;</span><br><span class="line"><span class="type">int</span> n,edcnt;</span><br><span class="line"><span class="type">int</span> beauty[N];</span><br><span class="line"><span class="type">int</span> fir[N];</span><br><span class="line"><span class="type">int</span> f[N];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> nxt,to;</span><br><span class="line">&#125;e[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++edcnt].to=v;</span><br><span class="line">    e[edcnt].nxt=fir[u];</span><br><span class="line">    fir[u]=edcnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dp</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> fa)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    f[u]=beauty[u];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=fir[u];i;i=e[i].nxt)</span><br><span class="line">        <span class="keyword">if</span>(e[i].to!=fa)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> v=e[i].to;</span><br><span class="line">            <span class="built_in">dp</span>(v,u);</span><br><span class="line">            f[u]+=<span class="built_in">max</span>(f[v],<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;beauty[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> u,v;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;u,&amp;v);</span><br><span class="line">        <span class="built_in">add</span>(u,v);</span><br><span class="line">        <span class="built_in">add</span>(v,u);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">dp</span>(<span class="number">1</span>,<span class="number">-1</span>);</span><br><span class="line">    <span class="type">int</span> ans=<span class="number">-0x3f3f3f3f</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        ans=<span class="built_in">max</span>(ans,f[i]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P1273æœ‰çº¿ç”µè§†ç½‘"><a href="#P1273æœ‰çº¿ç”µè§†ç½‘" class="headerlink" title="P1273æœ‰çº¿ç”µè§†ç½‘"></a><a class="link"   href="https://www.luogu.com.cn/problem/P1273" >P1273æœ‰çº¿ç”µè§†ç½‘<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>å¯¹äºå¶å­èŠ‚ç‚¹ï¼Œå®ƒæ»¡è¶³ä¸€ä¸ªç”¨æˆ·çš„æœ€å¤§æ”¶ç›Šå°±æ˜¯å¯¹åº”ä»·å€¼ï¼Œç„¶åè½¬ç§»æ—¶å½“ä½œèƒŒåŒ…æ¥åšï¼Œç”¨æˆ·æ€»æ•°é‡ç›¸å½“äºèƒŒåŒ…å®¹é‡ï¼Œæœ€åæˆ‘ä»¬å°±æ˜¯æ‰¾æ‰¾çœ‹ä»¥1ä¸ºæ ¹çš„å­æ ‘ä¸­æœ€å¤§æ”¶ç›Šå¤§äºç­‰äºé›¶çš„æœ€å¤§ç”¨æˆ·æ•°ï¼Œå€’å™æšä¸¾å³å¯ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">3100</span>;</span><br><span class="line"><span class="type">int</span> n,m,edcnt;</span><br><span class="line"><span class="type">int</span> pay[N];</span><br><span class="line"><span class="type">int</span> fir[N];</span><br><span class="line"><span class="type">int</span> f[N][N];<span class="comment">//åœ¨ä»¥iä¸ºæ ¹çš„å­æ ‘ä¸­æ»¡è¶³jä¸ªç”¨æˆ·éœ€æ±‚çš„æœ€å¤§æ”¶ç›Š</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> to,nxt,val;</span><br><span class="line">&#125;e[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v,<span class="type">int</span> w)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++edcnt].to=v;</span><br><span class="line">    e[edcnt].val=w;</span><br><span class="line">    e[edcnt].nxt=fir[u];</span><br><span class="line">    fir[u]=edcnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">dp</span><span class="params">(<span class="type">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!fir[u])</span><br><span class="line">    &#123;</span><br><span class="line">        f[u][<span class="number">1</span>]=pay[u];</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=fir[u];i;i=e[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> v=e[i].to;</span><br><span class="line">        <span class="type">int</span> x=<span class="built_in">dp</span>(v);</span><br><span class="line">        sum+=x;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=sum;j&gt;=<span class="number">1</span>;j--)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>;k&lt;=x;k++)</span><br><span class="line">                <span class="keyword">if</span>(j-k&gt;=<span class="number">0</span>) f[u][j]=<span class="built_in">max</span>(f[u][j],f[u][j-k]+f[v][k]-e[i].val);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n-m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> k;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;k);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=k;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> a,c;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;a,&amp;c);</span><br><span class="line">            <span class="built_in">add</span>(i,a,c);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;pay[n-m+i]);</span><br><span class="line">    <span class="built_in">memset</span>(f,<span class="number">0xc0</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) f[i][<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">dp</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=m;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">        <span class="keyword">if</span>(f[<span class="number">1</span>][i]&gt;=<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,i);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P3047"><a href="#P3047" class="headerlink" title="P3047"></a><a class="link"   href="https://www.luogu.com.cn/problem/P3047" >P3047<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>çŠ¶æ€è®¾è®¡ä¸º $f_{i,j}$ï¼Œè¡¨ç¤ºè·ç¦» $i$ ä¸º $j$ çš„ç‚¹æƒä¹‹å’Œï¼Œé¦–å…ˆå…ˆæ­£å¸¸è¿›è¡Œä¸€é DFSï¼Œç„¶åå‘ä¸‹çš„è·ç¦»å°±å¤„ç†å¥½äº†ï¼Œä½†æ˜¯è¿˜å¯ä»¥å‘ä¸Šèµ°ï¼Œäºæ˜¯å†è¿›è¡Œä¸€é DFSï¼Œè¿™æ—¶å€™åœ¨å›æº¯ä¹‹å‰æ›´æ–°ä¸Šæ–¹çš„è·ç¦»ï¼Œç”±äºå¯èƒ½ä¼šæœ‰é‡å¤ï¼šæ¯”å¦‚å…ˆä»å„¿å­èµ°åˆ°çˆ¶äº²ï¼Œä½†æ˜¯çˆ¶äº²åˆèµ°åˆ°äº†å„¿å­ï¼Œæ‰€ä»¥è¦å‡å»ä¸å½“å‰èŠ‚ç‚¹è·ç¦»å°‘äºŒçš„é‚£äº›ç‚¹ï¼Œå¦‚å›¾ï¼š</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://falling-sakura1-1316699389.cos.ap-nanjing.myqcloud.com/image/202308270953403.webp"
                      alt="image.png"
                ></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e5</span><span class="number">+7</span>;</span><br><span class="line"><span class="type">int</span> n,k,edcnt;</span><br><span class="line"><span class="type">int</span> val[N];</span><br><span class="line"><span class="type">int</span> fir[N];</span><br><span class="line"><span class="type">int</span> f[N][<span class="number">27</span>];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> nxt,to;</span><br><span class="line">&#125;e[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++edcnt].to=v;</span><br><span class="line">    e[edcnt].nxt=fir[u];</span><br><span class="line">    fir[u]=edcnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dp</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> fa)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=fir[u];i;i=e[i].nxt)</span><br><span class="line">        <span class="keyword">if</span>(e[i].to!=fa)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> v=e[i].to;</span><br><span class="line">            <span class="built_in">dp</span>(v,u);</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=k;j++)</span><br><span class="line">                f[u][j]+=f[v][j<span class="number">-1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> fa)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=fir[u];i;i=e[i].nxt)</span><br><span class="line">        <span class="keyword">if</span>(e[i].to!=fa)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> v=e[i].to;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=k;j&gt;=<span class="number">2</span>;j--)</span><br><span class="line">                f[v][j]-=f[v][j<span class="number">-2</span>];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=k;j++)</span><br><span class="line">                f[v][j]+=f[u][j<span class="number">-1</span>];</span><br><span class="line">            <span class="built_in">dfs</span>(v,u);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;k);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> u,v;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;u,&amp;v);</span><br><span class="line">        <span class="built_in">add</span>(u,v);</span><br><span class="line">        <span class="built_in">add</span>(v,u);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;val[i]),f[i][<span class="number">0</span>]=val[i];</span><br><span class="line">    <span class="built_in">dp</span>(<span class="number">1</span>,<span class="number">-1</span>);</span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">1</span>,<span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> sum=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=k;j++)</span><br><span class="line">            sum+=f[i][j];</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,sum);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P5658æ‹¬å·æ ‘"><a href="#P5658æ‹¬å·æ ‘" class="headerlink" title="P5658æ‹¬å·æ ‘"></a><a class="link"   href="https://www.luogu.com.cn/problem/P5658" >P5658æ‹¬å·æ ‘<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>è®°å½•ä¸€ä¸‹ä»¥ $i$ ç»“å°¾çš„åˆæ³•ä¸²æ•°ï¼Œå’Œæ ¹èŠ‚ç‚¹åˆ° $i$ çš„ç¦» $i$ æœ€è¿‘çš„æœªåŒ¹é…çš„å·¦æ‹¬å·ï¼Œ</p>
<p>ç„¶åè¿›è¡Œ DFSï¼Œå¦‚æœå½“å‰ç‚¹æ˜¯å·¦æ‹¬å·ï¼Œé‚£ä¹ˆå°±æ›´æ–°ä¸€ä¸‹æœ€è¿‘æœªåŒ¹é…çš„å·¦æ‹¬å·ï¼Œå¦‚æœæ˜¯å³æ‹¬å·ï¼Œé‚£ä¹ˆåˆæ³•çš„æ‹¬å·æ•°å°±è¦åŠ ä¸Šä¹‹å‰å·²ç»åˆæ³•çš„æ‹¬å·æ•°å†åŠ ä¸€ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">5e5</span><span class="number">+7</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line">ll ans;</span><br><span class="line"><span class="type">int</span> n,edcnt;</span><br><span class="line"><span class="type">int</span> fir[N],fa[N],last[N];</span><br><span class="line">ll f[N];</span><br><span class="line">string par;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> to,nxt;</span><br><span class="line">&#125;e[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++edcnt].to=v;</span><br><span class="line">    e[edcnt].nxt=fir[u];</span><br><span class="line">    fir[u]=edcnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    last[u]=last[fa[u]];</span><br><span class="line">    <span class="keyword">if</span>(par[u<span class="number">-1</span>]==<span class="string">&#x27;(&#x27;</span>) last[u]=u;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(last[u]) f[u]=f[fa[last[u]]]<span class="number">+1</span>,last[u]=last[fa[last[u]]];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=fir[u];i;i=e[i].nxt)</span><br><span class="line">        <span class="built_in">dfs</span>(e[i].to);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    cin&gt;&gt;par;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;fa[i]);</span><br><span class="line">        <span class="built_in">add</span>(fa[i],i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">1</span>);</span><br><span class="line">    ans=f[<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)</span><br><span class="line">        f[i]+=f[fa[i]],ans^=i*f[i];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P3177æ ‘ä¸ŠæŸ“è‰²"><a href="#P3177æ ‘ä¸ŠæŸ“è‰²" class="headerlink" title="P3177æ ‘ä¸ŠæŸ“è‰²"></a><a class="link"   href="https://www.luogu.com.cn/problem/P3177" >P3177æ ‘ä¸ŠæŸ“è‰²<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>æˆ‘ä»¬è€ƒè™‘æ¯æ¡è¾¹ï¼Œè¿™æ¡è¾¹è¢«ç»è¿‡çš„æ¬¡æ•°ä¹˜ä»¥å®ƒçš„è¾¹æƒä¾¿æ˜¯å®ƒäº§ç”Ÿçš„è´¡çŒ®ï¼Œè€Œä¸€æ¡è¾¹è¢«ç»è¿‡çš„æ¬¡æ•°å…¶å®å°±æ˜¯å®ƒå·¦è¾¹å’Œå³è¾¹çš„ç‚¹å¯¹æ•°ï¼Œè®¾ $f_{i,j}$ ä¸ºä»¥ $i$ ä¸ºæ ¹çš„å­æ ‘ä¸­é€‰äº† $j$ ä¸ªé»‘è‰²ç‚¹æ‰€å¾—åˆ°çš„æœ€å¤§ä»·å€¼ã€‚</p>
<p>è½¬ç§»æ—¶ï¼Œå…¶å®å°±æ˜¯åˆå¹¶å­æ ‘ï¼Œå¦‚æœä¸æ˜¯ç¬¬ä¸€æ¬¡ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥ä¸é€‰é»‘è‰²ç‚¹ï¼Œè¦è®°å¾—ä¸è¯¥å­æ ‘å…¨ä¸ºç™½è‰²ç‚¹å–maxã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">2005</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">int</span> n,k,edcnt;</span><br><span class="line"><span class="type">int</span> fir[N],siz[N];</span><br><span class="line">ll f[N][N];<span class="comment">//åœ¨ä»¥iä¸ºæ ¹çš„å­æ ‘ä¸­é€‰äº†jä¸ªé»‘è‰²ç‚¹çš„æœ€å¤§è´¡çŒ®</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> to,nxt,val;</span><br><span class="line">&#125;e[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v,<span class="type">int</span> w)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++edcnt].to=v;</span><br><span class="line">    e[edcnt].nxt=fir[u];</span><br><span class="line">    e[edcnt].val=w;</span><br><span class="line">    fir[u]=edcnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dp</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> fa)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    siz[u]=<span class="number">1</span>;</span><br><span class="line">    f[u][<span class="number">0</span>]=f[u][<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=fir[u];i;i=e[i].nxt)</span><br><span class="line">        <span class="keyword">if</span>(e[i].to!=fa)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> v=e[i].to;</span><br><span class="line">            <span class="built_in">dp</span>(v,u);</span><br><span class="line">            siz[u]+=siz[v];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="built_in">min</span>(k,siz[u]);j&gt;=<span class="number">0</span>;j--)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(f[u][j]!=<span class="number">-1</span>)</span><br><span class="line">                    f[u][j]+=f[v][<span class="number">0</span>]<span class="number">+1ll</span>*siz[v]*(n-k-siz[v])*e[i].val;</span><br><span class="line">                <span class="comment">//å‡å¦‚å·²ç»æ›´æ–°è¿‡ï¼Œé‚£ä¹ˆé»‘è‰²ç‚¹å°±éƒ½å¯ä»¥åœ¨ä¹‹å‰è¢«æ›´æ–°çš„å­æ ‘ä¸Šï¼Œå‰©ä¸‹çš„å­æ ‘å°±å¤šå‡ºäº†å…¨ä¸ºç™½è‰²ç‚¹çš„æƒ…å†µï¼Œæ‹¿å®ƒä¸é»‘ç‚¹çš„æƒ…å†µå–max</span></span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> l=<span class="built_in">min</span>(j,siz[v]);l&gt;=<span class="number">1</span>;l--)<span class="comment">//æšä¸¾å­æ ‘ä¸­é»‘è‰²ç‚¹çš„ä¸ªæ•°</span></span><br><span class="line">                    <span class="keyword">if</span>(f[u][j-l]!=<span class="number">-1</span>)<span class="comment">//å¯ä»¥ä»æ­¤çŠ¶æ€è½¬ç§»è€Œæ¥</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        ll tot=(<span class="number">1ll</span>*l*(k-l)+(siz[v]-l)*(n-k-siz[v]+l))*e[i].val;<span class="comment">//ç›¸åŒé¢œè‰²ç‚¹å¯¹åœ¨è¿™æ¡è¾¹äº§ç”Ÿçš„æ€»ä»·å€¼</span></span><br><span class="line">                        f[u][j]=<span class="built_in">max</span>(f[u][j],f[u][j-l]+f[v][l]+tot);</span><br><span class="line">                    &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;k);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> u,v,w;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;u,&amp;v,&amp;w);</span><br><span class="line">        <span class="built_in">add</span>(u,v,w);</span><br><span class="line">        <span class="built_in">add</span>(v,u,w);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">memset</span>(f,<span class="number">-1</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line">    <span class="built_in">dp</span>(<span class="number">1</span>,<span class="number">-1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,f[<span class="number">1</span>][k]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="çŠ¶å‹DP"><a href="#çŠ¶å‹DP" class="headerlink" title="çŠ¶å‹DP"></a>çŠ¶å‹DP</h2><h3 id="P1433åƒå¥¶é…ª"><a href="#P1433åƒå¥¶é…ª" class="headerlink" title="P1433åƒå¥¶é…ª"></a><a class="link"   href="https://www.luogu.com.cn/problem/P1433" >P1433åƒå¥¶é…ª<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>å®šä¹‰ $f_{i,j}$ ä¸ºå½“å‰çŠ¶æ€ä¸º $i$ï¼Œèµ°åˆ°äº†ç¬¬ $j$ ä¸ªå¥¶é…ªçš„æœ€çŸ­è·ç¦»ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">double</span> ans=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Cheese</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">double</span> x,y;</span><br><span class="line">&#125;c[<span class="number">20</span>];</span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">dist</span><span class="params">(Cheese a,Cheese b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sqrt</span>((a.x-b.x)*(a.x-b.x)+(a.y-b.y)*(a.y-b.y));</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">double</span> f[<span class="number">1</span>&lt;&lt;<span class="number">16</span>][<span class="number">18</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lf%lf&quot;</span>,&amp;c[i].x,&amp;c[i].y);</span><br><span class="line">    <span class="built_in">memset</span>(f,<span class="number">127</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        f[<span class="number">1</span>&lt;&lt;i][i]=<span class="built_in">dist</span>(&#123;<span class="number">0</span>,<span class="number">0</span>&#125;,c[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;(<span class="number">1</span>&lt;&lt;n);i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;n;j++)</span><br><span class="line">            <span class="keyword">if</span>((i&gt;&gt;j)&amp;<span class="number">1</span>)</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">0</span>;k&lt;n;k++)</span><br><span class="line">                    <span class="keyword">if</span>(((i&gt;&gt;k)&amp;<span class="number">1</span>)==<span class="number">0</span>)</span><br><span class="line">                        f[i|(<span class="number">1</span>&lt;&lt;k)][k]=<span class="built_in">min</span>(f[i|(<span class="number">1</span>&lt;&lt;k)][k],f[i][j]+<span class="built_in">dist</span>(c[j],c[k]));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++)</span><br><span class="line">        ans=<span class="built_in">min</span>(ans,f[(<span class="number">1</span>&lt;&lt;n)<span class="number">-1</span>][i]);</span><br><span class="line">        <span class="comment">// printf(&quot;%.2f\n&quot;,f[(1&lt;&lt;n)-1][i]);</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%.2f&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P1171å”®è´§å‘˜çš„éš¾é¢˜"><a href="#P1171å”®è´§å‘˜çš„éš¾é¢˜" class="headerlink" title="P1171å”®è´§å‘˜çš„éš¾é¢˜"></a><a class="link"   href="https://www.luogu.com.cn/problem/P1171" >P1171å”®è´§å‘˜çš„éš¾é¢˜<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>ä¸åƒå¥¶é…ªç±»ä¼¼ï¼Œå°±æ˜¯æœ€åè¦å›åˆ°èµ·ç‚¹ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> f[(<span class="number">1</span>&lt;&lt;<span class="number">20</span>)<span class="number">+1</span>][<span class="number">21</span>];</span><br><span class="line"><span class="type">int</span> dist[<span class="number">21</span>][<span class="number">21</span>];</span><br><span class="line"><span class="type">int</span> ans=INT_MAX;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;n;j++)</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;dist[i][j]);</span><br><span class="line">    <span class="built_in">memset</span>(f,<span class="number">0x3f</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line">    f[<span class="number">1</span>][<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;(<span class="number">1</span>&lt;&lt;n);i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;n;j++)</span><br><span class="line">            <span class="keyword">if</span>((i&gt;&gt;j)&amp;<span class="number">1</span>)</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">0</span>;k&lt;n;k++)</span><br><span class="line">                    <span class="keyword">if</span>(((i&gt;&gt;k)&amp;<span class="number">1</span>)==<span class="number">0</span>)</span><br><span class="line">                        f[i|(<span class="number">1</span>&lt;&lt;k)][k]=<span class="built_in">min</span>(f[i|(<span class="number">1</span>&lt;&lt;k)][k],f[i][j]+dist[j][k]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        ans=<span class="built_in">min</span>(ans,f[(<span class="number">1</span>&lt;&lt;n)<span class="number">-1</span>][i]+dist[i][<span class="number">0</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P1278å•è¯æ¸¸æˆ"><a href="#P1278å•è¯æ¸¸æˆ" class="headerlink" title="P1278å•è¯æ¸¸æˆ"></a><a class="link"   href="https://www.luogu.com.cn/problem/P1278" >P1278å•è¯æ¸¸æˆ<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>å…ˆé¢„å¤„ç†å‡ºæ‰€æœ‰èƒ½è¿ç€è¯´çš„ä¸¤ä¸ªå•è¯æ‰€è´¡çŒ®çš„å¤æ‚åº¦ï¼Œç„¶åå¤„ç†ä¸‹åªè¯´è¿™ä¸ªå•è¯çš„å¤æ‚åº¦ï¼Œç„¶åå°±å¯ä»¥æ„‰å¿«åœ°è¿›è¡ŒçŠ¶å‹DPäº†ï¼Œæšä¸¾æ¯ä¸€ä¸ªçŠ¶æ€ï¼Œåˆ¤æ–­ä¸‹ä¸Šä¸€ä¸ªæ˜¯å¦å·²ç»é€‰è¿‡äº†ï¼Œåªæœ‰ä¸Šä¸€ä¸ªé€‰è¿‡äº†æ‰èƒ½è¿›è¡Œè½¬ç§»ï¼Œå¹¶ä¸”ä¸‹ä¸€ä¸ªè¦é€‰çš„æ²¡æœ‰é€‰è¿‡ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> dist[<span class="number">20</span>][<span class="number">20</span>];</span><br><span class="line"><span class="type">int</span> f[<span class="number">1</span>&lt;&lt;<span class="number">17</span>][<span class="number">17</span>];</span><br><span class="line">string word[<span class="number">17</span>];</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> ans=<span class="number">-1</span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        cin&gt;&gt;word[i];</span><br><span class="line">    <span class="built_in">memset</span>(dist,<span class="number">0xc0</span>,<span class="built_in">sizeof</span>(dist));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;n;j++)</span><br><span class="line">            <span class="keyword">if</span>(i!=j&amp;&amp;word[i][word[i].<span class="built_in">length</span>()<span class="number">-1</span>]==word[j][<span class="number">0</span>])</span><br><span class="line">                dist[i][j]=word[j].<span class="built_in">length</span>();</span><br><span class="line">    <span class="built_in">memset</span>(f,<span class="number">-1</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        f[<span class="number">1</span>&lt;&lt;i][i]=word[i].<span class="built_in">length</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;(<span class="number">1</span>&lt;&lt;n);i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;n;j++)</span><br><span class="line">            <span class="keyword">if</span>((i&gt;&gt;j)&amp;<span class="number">1</span>)</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">0</span>;k&lt;n;k++)</span><br><span class="line">                    <span class="keyword">if</span>(((i&gt;&gt;k)&amp;<span class="number">1</span>)==<span class="number">0</span>)</span><br><span class="line">                        f[i|(<span class="number">1</span>&lt;&lt;k)][k]=<span class="built_in">max</span>(f[i|(<span class="number">1</span>&lt;&lt;k)][k],f[i][j]+dist[j][k]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;(<span class="number">1</span>&lt;&lt;n);i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;n;j++)</span><br><span class="line">            ans=<span class="built_in">max</span>(ans,f[i][j]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P2704ç‚®å…µé˜µåœ°"><a href="#P2704ç‚®å…µé˜µåœ°" class="headerlink" title="P2704ç‚®å…µé˜µåœ°"></a><a class="link"   href="https://www.luogu.com.cn/problem/P2704" >P2704ç‚®å…µé˜µåœ°<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>é¦–å…ˆæŠŠæ¯ä¸€è¡Œçš„åœ°å½¢éƒ½é¢„å¤„ç†ä¸ºä¸€ä¸ªäºŒè¿›åˆ¶æ•°ï¼Œ1ä»£è¡¨å±±åœ°ï¼Œ0ä»£è¡¨å¹³åŸï¼Œè¿™æ ·æšä¸¾æ¯ä¸€ä¸ªçŠ¶æ€çš„æ—¶å€™ï¼Œå¦‚æœå®ƒä»¬ä¸èµ·æ¥çš„ç»“æœä¸æ˜¯é›¶ï¼Œé‚£ä¹ˆè¿™ä¸ªçŠ¶æ€ä¾¿ä¸åˆæ³•ã€‚</p>
<p>ç”±äºè¯¥è¡ŒçŠ¶æ€ä¼šå—åˆ°ä¸Šä¸€è¡Œå’Œä¸Šä¸Šè¡Œçš„å½±å“ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦è®°å½•æœ¬è¡Œå’Œä¸Šä¸€è¡Œï¼Œæšä¸¾ä¸‰è¡Œçš„çŠ¶æ€å³å¯ï¼Œè¿™é‡Œéœ€è¦ç”¨åˆ°æ»šåŠ¨æ•°ç»„ä¼˜åŒ–ã€‚</p>
<p>åˆ¤æ–­çŠ¶æ€æ˜¯å¦åˆæ³•å¯ä»¥é€šè¿‡å·¦ç§»ä¸€ä½å’Œä¸¤ä½ä¸ä¸Šè¡Œã€ä¸Šä¸Šè¡Œä¸æ¥åˆ¤æ–­ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n,m,ans;</span><br><span class="line"><span class="type">int</span> f[<span class="number">3</span>][<span class="number">1</span>&lt;&lt;<span class="number">10</span>][<span class="number">1</span>&lt;&lt;<span class="number">10</span>];</span><br><span class="line"><span class="type">int</span> mp[<span class="number">101</span>];</span><br><span class="line"><span class="type">int</span> sum[<span class="number">1</span>&lt;&lt;<span class="number">10</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;m;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">char</span> c=<span class="built_in">getchar</span>();</span><br><span class="line">            <span class="keyword">while</span>(c!=<span class="string">&#x27;H&#x27;</span>&amp;&amp;c!=<span class="string">&#x27;P&#x27;</span>) c=<span class="built_in">getchar</span>();</span><br><span class="line">            mp[i]&lt;&lt;=<span class="number">1</span>;</span><br><span class="line">            mp[i]+=(c==<span class="string">&#x27;H&#x27;</span>?<span class="number">1</span>:<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;(<span class="number">1</span>&lt;&lt;m);i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> nope=i;</span><br><span class="line">        <span class="keyword">while</span>(nope)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(nope&amp;<span class="number">1</span>) sum[i]++;</span><br><span class="line">            nope&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;(<span class="number">1</span>&lt;&lt;m);i++)</span><br><span class="line">        <span class="keyword">if</span>(!((i&amp;mp[<span class="number">0</span>])||(i&amp;(i&lt;&lt;<span class="number">1</span>))||(i&amp;(i&lt;&lt;<span class="number">2</span>))))</span><br><span class="line">            f[<span class="number">0</span>][<span class="number">0</span>][i]=sum[i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;(<span class="number">1</span>&lt;&lt;m);i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;(<span class="number">1</span>&lt;&lt;m);j++)</span><br><span class="line">            <span class="keyword">if</span>(!(i&amp;j||i&amp;mp[<span class="number">0</span>]||j&amp;mp[<span class="number">1</span>]||(i&amp;(i&lt;&lt;<span class="number">1</span>))||(i&amp;(i&lt;&lt;<span class="number">2</span>))||(j&amp;(j&lt;&lt;<span class="number">1</span>))||(j&amp;(j&lt;&lt;<span class="number">2</span>))))</span><br><span class="line">                f[<span class="number">1</span>][i][j]=sum[i]+sum[j];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;(<span class="number">1</span>&lt;&lt;m);j++)</span><br><span class="line">            <span class="keyword">if</span>(!(j&amp;(mp[i<span class="number">-1</span>])||(j&amp;(j&lt;&lt;<span class="number">1</span>))||(j&amp;(j&lt;&lt;<span class="number">2</span>))))</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">0</span>;l&lt;(<span class="number">1</span>&lt;&lt;m);l++)</span><br><span class="line">                    <span class="keyword">if</span>(!((l&amp;j)||(l&amp;mp[i<span class="number">-2</span>])||(l&amp;(l&lt;&lt;<span class="number">1</span>))||(l&amp;(l&lt;&lt;<span class="number">2</span>))))</span><br><span class="line">                        <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">0</span>;k&lt;(<span class="number">1</span>&lt;&lt;m);k++)</span><br><span class="line">                            <span class="keyword">if</span>(!((k&amp;mp[i])||(j&amp;k)||(l&amp;k)||(k&amp;(k&lt;&lt;<span class="number">1</span>))||(k&amp;(k&lt;&lt;<span class="number">2</span>))))</span><br><span class="line">                                f[i%<span class="number">3</span>][j][k]=<span class="built_in">max</span>(f[i%<span class="number">3</span>][j][k],f[(i<span class="number">-1</span>)%<span class="number">3</span>][l][j]+sum[k]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;(<span class="number">1</span>&lt;&lt;m);i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;(<span class="number">1</span>&lt;&lt;m);j++)</span><br><span class="line">            ans=<span class="built_in">max</span>(ans,f[(n<span class="number">-1</span>)%<span class="number">3</span>][i][j]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P1896äº’ä¸ä¾µçŠ¯"><a href="#P1896äº’ä¸ä¾µçŠ¯" class="headerlink" title="P1896äº’ä¸ä¾µçŠ¯"></a><a class="link"   href="https://www.luogu.com.cn/problem/P1896" >P1896äº’ä¸ä¾µçŠ¯<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>ä¸ç‚®å…µé˜µåœ°ç±»ä¼¼ï¼Œåˆ©ç”¨å·¦ç§»å’Œå³ç§»åˆ¤æ–­çŠ¶æ€æ˜¯å¦åˆæ³•ã€‚</p>
<p>ç”±äºè¦ç”¨å®Œæ‰€æœ‰å›½ç‹ï¼Œæ‰€ä»¥è¦è®°å½•ä¸€ä¸‹å½“å‰çŠ¶æ€ç”¨äº†å‡ ä¸ªå›½ç‹ï¼Œé¢„å¤„ç†å‡ºæ¥æ¯ä¸ªçŠ¶æ€è¯¥è¡Œå¯¹åº”çš„å›½ç‹æ•°å³å¯ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">int</span> n,K;</span><br><span class="line">ll ans;</span><br><span class="line">ll f[<span class="number">10</span>][<span class="number">1</span>&lt;&lt;<span class="number">10</span>][<span class="number">101</span>];</span><br><span class="line"><span class="type">int</span> sum[<span class="number">1</span>&lt;&lt;<span class="number">10</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;K);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;(<span class="number">1</span>&lt;&lt;n);i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> nope=i;</span><br><span class="line">        <span class="keyword">while</span>(nope)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(nope&amp;<span class="number">1</span>) sum[i]++;</span><br><span class="line">            nope&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    f[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;(<span class="number">1</span>&lt;&lt;n);j++)</span><br><span class="line">            <span class="keyword">if</span>(!((j&amp;(j&lt;&lt;<span class="number">1</span>))||(j&amp;(j&gt;&gt;<span class="number">1</span>))))</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">0</span>;k&lt;(<span class="number">1</span>&lt;&lt;n);k++)</span><br><span class="line">                    <span class="keyword">if</span>(!(k&amp;(k&lt;&lt;<span class="number">1</span>)||(k&amp;(k&gt;&gt;<span class="number">1</span>))||(k&amp;j)||((j&gt;&gt;<span class="number">1</span>)&amp;k)||((j&lt;&lt;<span class="number">1</span>)&amp;k)))</span><br><span class="line">                        <span class="keyword">for</span>(<span class="type">int</span> l=sum[k];l&lt;=K;l++)</span><br><span class="line">                            f[i][k][l]+=f[i<span class="number">-1</span>][j][l-sum[k]];</span><br><span class="line">                        </span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;(<span class="number">1</span>&lt;&lt;n);i++)</span><br><span class="line">        <span class="keyword">if</span>(!(i&amp;(i&lt;&lt;<span class="number">1</span>)||(i&amp;(i&gt;&gt;<span class="number">1</span>))))</span><br><span class="line">            ans+=f[n][i][K];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="P1283å¹³æ¿æ¶‚è‰²"><a href="#P1283å¹³æ¿æ¶‚è‰²" class="headerlink" title="P1283å¹³æ¿æ¶‚è‰²"></a><a class="link"   href="https://www.luogu.com.cn/problem/P1283" >P1283å¹³æ¿æ¶‚è‰²<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>è®°å½•è‰²å—å¯ä»¥ç”¨äºŒç»´çŸ©é˜µæ¨¡æ‹Ÿã€‚</p>
<p>ä¸ºäº†é˜²æ­¢è¾¹ç•Œè®¡ç®—é‡å¤ï¼Œæ‰€ä»¥åœ¨äºŒç»´æ•°ç»„ä¸­é‡‡ç”¨å·¦å¼€å³é—­çš„æ–¹å¼å­˜å‚¨ï¼Œ</p>
<p>ç„¶åè®°å½•ä¸€ä¸‹æ¯ä¸€ä¸ªçŸ©å½¢ä¸Šæ–¹çš„çŸ©é˜µï¼Œç”¨æ¥åˆ¤æ–­å½“å‰çŠ¶æ€æ˜¯å¦åˆæ³•ã€‚</p>
<p>ä»€ä¹ˆéƒ½æ²¡æ¶‚çš„æ—¶å€™ç¬¬ä¸€æ¬¡ä¹Ÿæ˜¯è¦æ‹¿èµ·åˆ·å­çš„ï¼Œæ³¨æ„ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">rectangle</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> topLeftX,topLeftY,bottomRightX,bottomRightY;</span><br><span class="line">    <span class="type">int</span> color;</span><br><span class="line">&#125;rec[<span class="number">17</span>];</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> mp[<span class="number">101</span>][<span class="number">101</span>];</span><br><span class="line"><span class="type">int</span> sum[<span class="number">17</span>];</span><br><span class="line"><span class="type">int</span> up[<span class="number">17</span>][<span class="number">17</span>];</span><br><span class="line"><span class="type">int</span> dp[<span class="number">1</span>&lt;&lt;<span class="number">16</span>][<span class="number">21</span>];</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span><span class="comment">//xçŠ¶æ€ä¸‹ç¬¬yä¸ªçŸ©å½¢ä¸Šæ–¹æ‰€æœ‰çŸ©å½¢æ˜¯å¦å·²ç»å®Œæˆæ¶‚è‰²</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=sum[y];i++)</span><br><span class="line">        <span class="keyword">if</span>(!(x&gt;&gt;(up[y][i]<span class="number">-1</span>)&amp;<span class="number">1</span>)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d%d%d&quot;</span>,&amp;rec[i].topLeftY,&amp;rec[i].topLeftX,&amp;rec[i].bottomRightY,&amp;rec[i].bottomRightX,&amp;rec[i].color);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=rec[i].topLeftX;j&lt;rec[i].bottomRightX;j++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k=rec[i].topLeftY;k&lt;rec[i].bottomRightY;k++)</span><br><span class="line">                mp[j][k]=i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">if</span>(rec[i].topLeftY)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> y=rec[i].topLeftY<span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=rec[i].topLeftX<span class="number">+1</span>;j&lt;=rec[i].bottomRightX;j++)</span><br><span class="line">                <span class="keyword">if</span>(mp[j][y]!=mp[j<span class="number">-1</span>][y]) up[i][++sum[i]]=mp[j<span class="number">-1</span>][y];<span class="comment">//æ‰¾å‡ºæ‰€æœ‰iä¸Šæ–¹çš„çŸ©å½¢</span></span><br><span class="line">            <span class="keyword">if</span>(mp[rec[i].bottomRightX][y]==mp[rec[i].bottomRightX<span class="number">-1</span>][y]) up[i][++sum[i]]=mp[rec[i].bottomRightX<span class="number">-1</span>][y];</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="built_in">memset</span>(dp,<span class="number">0x3f</span>,<span class="built_in">sizeof</span>(dp));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">20</span>;i++)</span><br><span class="line">        dp[<span class="number">0</span>][i]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;(<span class="number">1</span>&lt;&lt;n);i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">            <span class="keyword">if</span>(((i&gt;&gt;(j<span class="number">-1</span>))&amp;<span class="number">1</span>)&amp;&amp;<span class="built_in">check</span>(i,j)) </span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>;k&lt;=<span class="number">20</span>;k++)</span><br><span class="line">                    <span class="keyword">if</span>(k!=rec[j].color) dp[i][rec[j].color]=<span class="built_in">min</span>(dp[i][rec[j].color],dp[i-(<span class="number">1</span>&lt;&lt;(j<span class="number">-1</span>))][k]<span class="number">+1</span>);</span><br><span class="line">                dp[i][rec[j].color]=<span class="built_in">min</span>(dp[i][rec[j].color],dp[i-(<span class="number">1</span>&lt;&lt;(j<span class="number">-1</span>))][rec[j].color]);</span><br><span class="line">            &#125;</span><br><span class="line">    <span class="type">int</span> ans=<span class="number">0x3f3f3f5f</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">20</span>;i++)</span><br><span class="line">        ans=<span class="built_in">min</span>(ans,dp[(<span class="number">1</span>&lt;&lt;n)<span class="number">-1</span>][i]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<p><a class="link"   href="https://www.luogu.com.cn/problem/P5005" >P5005ä¸­å›½è±¡æ£‹-æ‘†ä¸Šé©¬<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>æ³¨æ„åˆ¤æ–­è¦è¿›è¡ŒåŒå‘åˆ¤æ–­ï¼Œå¹¶ä¸æ˜¯æˆ‘ $i$ è¡Œæ‰“ä¸åˆ° $j$ è¡Œ $j$ è¡Œå°±ä¸€å®šæ‰“ä¸åˆ° $i$ è¡Œã€‚</p>
<p>å¯¹äºè¿™ç§çŠ¶æ€ç´¯åŠ è€Œéè¦†ç›–çš„æ»šåŠ¨æ•°ç»„ä¼˜åŒ–ï¼Œä¸€å®šè¦åœ¨æ›´æ–°å‰æŠŠæ—§çš„ç”¨ä¸åˆ°çš„çŠ¶æ€æ¸…é›¶ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod=<span class="number">1e9</span><span class="number">+7</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">int</span> f[<span class="number">3</span>][<span class="number">65</span>][<span class="number">65</span>];<span class="comment">//å½“å‰å·²ç»æ”¾å®Œäº†å‰iè¡Œçš„é©¬ï¼Œä¸Šä¸€è¡Œçš„çŠ¶æ€æ˜¯jï¼Œç¬¬iè¡Œçš„çŠ¶æ€æ˜¯k</span></span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line">ll ans;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check_1</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span><span class="comment">//åˆ†åˆ«ä»£è¡¨ä¸¤ä¸ªçŠ¶æ€ï¼šä¸Šä¸€è¡Œï¼Œæœ¬è¡Œ</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(((x&gt;&gt;i)&amp;<span class="number">1</span>)&amp;&amp;(!((x&gt;&gt;(i<span class="number">+1</span>))&amp;<span class="number">1</span>))&amp;&amp;((y&gt;&gt;(i<span class="number">+2</span>))&amp;<span class="number">1</span>))<span class="comment">//iä½æœ‰é©¬ä¸”i-1ä½æ— é©¬</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(((x&gt;&gt;i)&amp;<span class="number">1</span>)&amp;&amp;(!((x&gt;&gt;(i<span class="number">-1</span>))&amp;<span class="number">1</span>))&amp;&amp;((y&gt;&gt;(i<span class="number">-2</span>))&amp;<span class="number">1</span>))<span class="comment">//iä½æœ‰é©¬ä¸”i+1ä½æ— é©¬</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check_2</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> z)</span><span class="comment">//åˆ†åˆ«ä»£è¡¨ä¸‰ä¸ªçŠ¶æ€ï¼šä¸Šä¸Šè¡Œï¼Œä¸Šä¸€è¡Œï¼Œæœ¬è¡Œ,åˆ¤æ–­ä¸Šä¸Šè¡Œä¸æœ¬è¡Œæ˜¯å¦å†²çª</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;i++)<span class="comment">//iä½ç½®ä¸Šä¸Šè¡Œæœ‰é©¬å¹¶ä¸”ä¸Šè¡Œè¿™ä¸ªä½ç½®æ²¡æœ‰é©¬å¹¶ä¸”æœ¬è¡Œå‰åä¸¤ä½æœ‰é©¬</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(((x&gt;&gt;i)&amp;<span class="number">1</span>)&amp;&amp;(!((y&gt;&gt;i)&amp;<span class="number">1</span>))&amp;&amp;((z&gt;&gt;(i<span class="number">+1</span>))&amp;<span class="number">1</span>)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(((x&gt;&gt;i)&amp;<span class="number">1</span>)&amp;&amp;(!((y&gt;&gt;i)&amp;<span class="number">1</span>))&amp;&amp;((z&gt;&gt;(i<span class="number">-1</span>))&amp;<span class="number">1</span>)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;(<span class="number">1</span>&lt;&lt;m);i++)</span><br><span class="line">        f[<span class="number">1</span>][<span class="number">0</span>][i]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;(<span class="number">1</span>&lt;&lt;m);i++)<span class="comment">//ç¬¬ä¸€è¡Œ</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;(<span class="number">1</span>&lt;&lt;m);j++)<span class="comment">//ç¬¬äºŒè¡Œ</span></span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">check_1</span>(i,j)&amp;&amp;<span class="built_in">check_1</span>(j,i))</span><br><span class="line">                f[<span class="number">2</span>][i][j]=(<span class="number">1ll</span>*f[<span class="number">2</span>][i][j]<span class="number">+1ll</span>*f[<span class="number">1</span>][<span class="number">0</span>][i])%mod;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">3</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(f[i%<span class="number">3</span>],<span class="number">0</span>,<span class="built_in">sizeof</span>(f[i%<span class="number">3</span>]));</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;(<span class="number">1</span>&lt;&lt;m);j++)<span class="comment">//ä¸Šä¸Šè¡Œ</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">0</span>;k&lt;(<span class="number">1</span>&lt;&lt;m);k++)<span class="comment">//ä¸Šä¸€è¡Œ</span></span><br><span class="line">                <span class="keyword">if</span>(<span class="built_in">check_1</span>(j,k)&amp;&amp;<span class="built_in">check_1</span>(k,j))</span><br><span class="line">                    <span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">0</span>;l&lt;(<span class="number">1</span>&lt;&lt;m);l++)<span class="comment">//æœ¬è¡Œ</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">check_1</span>(k,l)&amp;&amp;<span class="built_in">check_1</span>(l,k)&amp;&amp;<span class="built_in">check_2</span>(j,k,l)&amp;&amp;<span class="built_in">check_2</span>(l,k,j))</span><br><span class="line">                            f[i%<span class="number">3</span>][k][l]=(<span class="number">1ll</span>*f[i%<span class="number">3</span>][k][l]<span class="number">+1ll</span>*f[(i<span class="number">-1</span>)%<span class="number">3</span>][j][k])%mod;</span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;(<span class="number">1</span>&lt;&lt;m);i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;(<span class="number">1</span>&lt;&lt;m);j++)</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">check_1</span>(i,j)&amp;&amp;<span class="built_in">check_1</span>(j,i))</span><br><span class="line">                ans=(ans<span class="number">+1ll</span>*f[n%<span class="number">3</span>][i][j])%mod;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,ans%mod);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="æ•°ä½DP"><a href="#æ•°ä½DP" class="headerlink" title="æ•°ä½DP"></a>æ•°ä½DP</h2><h3 id="P2657-Windyæ•°"><a href="#P2657-Windyæ•°" class="headerlink" title="P2657 Windyæ•°"></a><a class="link"   href="https://www.luogu.com.cn/problem/P2657" >P2657 Windyæ•°<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>é¦–å…ˆé¢„å¤„ç†å‡ºæ‰€æœ‰é•¿åº¦å’Œä¸åŒæœ€é«˜ä½çš„windyæ•°æ–¹æ¡ˆæ•°ã€‚</p>
<p>ç„¶åè¿›è¡Œè®¨è®ºå³å¯ï¼Œè¯¦æƒ…è§æ³¨é‡Šã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line">ll f[<span class="number">11</span>][<span class="number">11</span>];<span class="comment">//é•¿åº¦ä¸ºiä¸­æœ€é«˜ä½ä¸ºjçš„</span></span><br><span class="line"><span class="type">int</span> numb[<span class="number">11</span>];</span><br><span class="line"><span class="type">int</span> a,b;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dp</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">9</span>;i++)</span><br><span class="line">        f[<span class="number">1</span>][i]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=<span class="number">11</span>;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=<span class="number">9</span>;j++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">0</span>;k&lt;=<span class="number">9</span>;k++)</span><br><span class="line">                <span class="keyword">if</span>(<span class="built_in">abs</span>(j-k)&gt;=<span class="number">2</span>) f[i][j]+=f[i<span class="number">-1</span>][k];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">solve</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll sum=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(numb,<span class="number">0</span>,<span class="built_in">sizeof</span>(numb));</span><br><span class="line">    <span class="type">int</span> len=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(x)</span><br><span class="line">    &#123;</span><br><span class="line">        numb[++len]=x%<span class="number">10</span>;</span><br><span class="line">        x/=<span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=len;i++)<span class="comment">//é•¿åº¦æ¯”åŸæ•°å°é‚£ä¹ˆä¸€å®šæ˜¯åœ¨ä¸Šç•Œä¹‹å†…çš„</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(i==len)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;numb[len];j++)<span class="comment">//æšä¸¾æœ€é«˜ä½ä¹Ÿå°äºåŸæ•°çš„æƒ…å†µ</span></span><br><span class="line">                sum+=f[i][j];     </span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=<span class="number">9</span>;j++)<span class="comment">//æšä¸¾æœ€é«˜ä½å¡«å¤šå°‘</span></span><br><span class="line">            sum+=f[i][j];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=len<span class="number">-1</span>;i&gt;=<span class="number">1</span>;i--)<span class="comment">//å‡å¦‚iä½ä¹‹å‰ä¸åŸæ•°ç›¸åŒï¼Œé‚£ä¹ˆå…¶å®å°±æ˜¯ç»Ÿè®¡æ»¡è¶³æ¡ä»¶çš„é•¿åº¦ä¸º1~len-1çš„ä¸ªæ•°</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;numb[i];j++)<span class="comment">//ç¬¬iä½å¡«ä»€ä¹ˆä¸ç¬¬i+1ä½å¯ä»¥ç›¸å·®è‡³å°‘ä¸º2ï¼Œè¿™é‡Œæ˜¯å°äºï¼Œå› ä¸ºè¦ä¿è¯å°äºä¸Šç•Œ</span></span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">abs</span>(j-numb[i<span class="number">+1</span>])&gt;=<span class="number">2</span>) sum+=f[i][j];</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">abs</span>(numb[i]-numb[i<span class="number">+1</span>])&lt;<span class="number">2</span>) <span class="keyword">break</span>;<span class="comment">//å‡å¦‚ä»é«˜åˆ°ä½æšä¸¾å¡«å®Œäº†ç¬¬iä½ä¸ç¬¬i+1ä½åˆ™ä¸ç¬¦åˆæ¡ä»¶</span></span><br><span class="line">        <span class="keyword">if</span>(i==<span class="number">1</span>) sum++;<span class="comment">//æœ€åä¸€ä½ç›¸åŒ</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;a,&amp;b);</span><br><span class="line">    <span class="built_in">dp</span>();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,<span class="built_in">solve</span>(b)-<span class="built_in">solve</span>(a<span class="number">-1</span>));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<p>é¢˜æ„ï¼šæ±‚åŒºé—´å†…æ»¡è¶³ ç›¸é‚»ä¸¤ä¸ªæ•°ä½è‡³å°‘å·® 2 çš„æ¡ä»¶çš„æ•°çš„ä¸ªæ•°ã€‚</p>
<p>æœ¬é¢˜æœ‰ä¸¤ä¸ªé¢å¤–é™åˆ¶æ¡ä»¶ï¼šå‰å¯¼é›¶å’Œä¸Šä¸€ä¸ªå¡«çš„æ•°ï¼Œéƒ½éœ€è¦è®°å½•ã€‚</p>
<p>æ³¨æ„åˆå§‹ last çš„åˆå§‹åŒ–ï¼Œä¸è¦çº¦æŸåˆ°ç¬¬ä¸€ä¸ªæ•°ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> INF = <span class="number">1e9</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> f[<span class="number">22</span>][<span class="number">12</span>]; <span class="comment">// [pos + 1,len] éƒ½å·²ç»å¡«å†™ï¼Œä¸Šä¸€ä½å¡«çš„æ•°æ˜¯ lastï¼Œ[1,pos] éšä¾¿å¡«çš„windyæ•°é‡</span></span><br><span class="line"><span class="comment">// å³é•¿åº¦ä¸º pos + 1 çš„ä»¥lastå¼€å¤´çš„ windy æ•°é‡</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a[<span class="number">15</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> pos, <span class="type">bool</span> limit, <span class="type">bool</span> lead, <span class="type">int</span> last)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!pos) <span class="keyword">return</span> <span class="number">1</span>; <span class="comment">// ç¬¬ä¸€ä½å‡å¦‚æ˜¯windyæ•°ï¼Œé‚£å°±è¿”å› 1</span></span><br><span class="line">    <span class="keyword">if</span>(!limit &amp;&amp; last != INF &amp;&amp; ~f[pos][last]) <span class="keyword">return</span> f[pos][last];</span><br><span class="line">    <span class="type">int</span> up = limit ? a[pos] : <span class="number">9</span>;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>; <span class="comment">// ä»£è¡¨çš„æ˜¯å½“å‰ [1,pos] éƒ½å¡«å®Œäº†çš„ç­”æ¡ˆ</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= up; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(lead) res += <span class="built_in">dfs</span>(pos - <span class="number">1</span>, limit &amp;&amp; i == up, lead &amp;&amp; i == <span class="number">0</span>, i == <span class="number">0</span> ? last : i);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">abs</span>(last - i) &gt;= <span class="number">2</span>) res += <span class="built_in">dfs</span>(pos - <span class="number">1</span>, limit &amp;&amp; i == up, <span class="literal">false</span>, i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!limit &amp;&amp; last != INF) f[pos][last] = res;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">solve</span><span class="params">(LL x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> len = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(x)</span><br><span class="line">    &#123;</span><br><span class="line">        a[++len] = x % <span class="number">10</span>;</span><br><span class="line">        x /= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dfs</span>(len, <span class="literal">true</span>, <span class="literal">true</span>, INF);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">-1</span>, <span class="built_in">sizeof</span>(f));</span><br><span class="line">    LL l, r;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>, &amp;l, &amp;r);</span><br><span class="line">    LL ans = <span class="built_in">solve</span>(r) - <span class="built_in">solve</span>(l - <span class="number">1</span>);</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="P4999çƒ¦äººçš„æ•°å­¦ä½œä¸š"><a href="#P4999çƒ¦äººçš„æ•°å­¦ä½œä¸š" class="headerlink" title="P4999çƒ¦äººçš„æ•°å­¦ä½œä¸š"></a><a class="link"   href="https://www.luogu.com.cn/problem/P4999" >P4999çƒ¦äººçš„æ•°å­¦ä½œä¸š<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>é¢˜æ„ï¼šæ±‚åŒºé—´å†…çš„æ¯ä¸ªæ•°å­—çš„æ¯ä½æ•°çš„æ•°ä½å’Œã€‚</p>
<p>ä»¤ $f_{pos,sum}$ ä»£è¡¨ $[1,pos]$ ç¬¦åˆé™åˆ¶çš„æ¡ä»¶ä¸‹çš„æ•°ä½å’Œï¼Œè®°å½•åç¼€çŠ¶æ€æ–¹ä¾¿è®°æœã€‚</p>
<p>ä»é«˜ä½å‘ä½ä½æœç´¢ï¼Œä¼šå‡ºç°å¾ˆå¤šé‡å¤çŠ¶æ€ã€‚</p>
<p>è¿™æ ·çš„å¥½å¤„æ˜¯è®©ç¨‹åºå¸®ä½ è®¡ç®—åç¼€è®°å¿†åŒ–çš„é‡ï¼Œè€Œä¸æ˜¯è‡ªå·±æ‰‹æ¨å¤æ‚çš„å¼å­æ­£å‘é€’æ¨å‡å°æ­£ç¡®ç‡ã€‚</p>
<p><a class="link"   href="https://www.luogu.com.cn/discuss/710636" >è®¨è®ºåŒº<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e3</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MOD = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> f[N][N];</span><br><span class="line"><span class="type">int</span> a[N];</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">dfs</span><span class="params">(<span class="type">int</span> pos, <span class="type">bool</span> limit, <span class="type">int</span> sum)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!pos) <span class="keyword">return</span> sum;</span><br><span class="line">    <span class="keyword">if</span>(!limit &amp;&amp; ~f[pos][sum])</span><br><span class="line">        <span class="keyword">return</span> f[pos][sum];</span><br><span class="line">    <span class="type">int</span> up = limit ? a[pos] : <span class="number">9</span>; <span class="comment">// ä¸Šé™</span></span><br><span class="line">    LL res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= up; i++)</span><br><span class="line">        res = (res + <span class="built_in">dfs</span>(pos - <span class="number">1</span>, limit &amp;&amp; i == up, sum + i)) % MOD;</span><br><span class="line">    <span class="keyword">if</span>(!limit)</span><br><span class="line">        f[pos][sum] = res;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">solve</span><span class="params">(LL x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> len = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(x)</span><br><span class="line">    &#123;</span><br><span class="line">        a[++len] = x % <span class="number">10</span>;</span><br><span class="line">        x /= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dfs</span>(len, <span class="literal">true</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;t);</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">-1</span>, <span class="built_in">sizeof</span>(f));</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">    &#123;</span><br><span class="line">        LL l, r;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>, &amp;l, &amp;r);</span><br><span class="line">        LL ans = (<span class="built_in">solve</span>(r) - <span class="built_in">solve</span>(l - <span class="number">1</span>) + MOD) % MOD;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="P2602æ•°å­—è®¡æ•°"><a href="#P2602æ•°å­—è®¡æ•°" class="headerlink" title="P2602æ•°å­—è®¡æ•°"></a><a class="link"   href="https://www.luogu.com.cn/problem/P2602" >P2602æ•°å­—è®¡æ•°<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>é¢˜æ„ï¼šæ±‚åŒºé—´å†…æ¯ä¸ªæ•°çš„åè¿›åˆ¶ä¸‹æ¯ä¸€ä½å‡ºç°çš„æ¬¡æ•°ã€‚</p>
<p>è¿™ä¸ªé™åˆ¶æ¡ä»¶å¤šäº†ä¸€ä¸ªå‰å¯¼é›¶ï¼Œåˆ¤æ–­ä¸€ä¸‹å‰å¯¼é›¶ä¸è¦åŠ åˆ° 0 çš„è®¡æ•°é‡Œå³å¯ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a[<span class="number">15</span>];</span><br><span class="line">LL f[<span class="number">15</span>][<span class="number">15</span>][<span class="number">2</span>];</span><br><span class="line">LL ans[<span class="number">15</span>];</span><br><span class="line"><span class="type">int</span> di;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">dfs</span><span class="params">(<span class="type">int</span> pos, <span class="type">bool</span> limit, <span class="type">bool</span> lead, <span class="type">int</span> cnt)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!pos) <span class="keyword">return</span> cnt;</span><br><span class="line">    <span class="keyword">auto</span> &amp;now = f[pos][cnt][di != <span class="number">0</span>];</span><br><span class="line">    <span class="keyword">if</span>(!limit &amp;&amp; !lead &amp;&amp; ~now) <span class="keyword">return</span> now; <span class="comment">// å¯ä»¥è®°å¿†åŒ–</span></span><br><span class="line">    <span class="type">int</span> up = limit ? a[pos] : <span class="number">9</span>;</span><br><span class="line">    LL res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= up; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> temp = cnt + (i == di);</span><br><span class="line">        <span class="keyword">if</span>(lead &amp;&amp; di == <span class="number">0</span> &amp;&amp; i == <span class="number">0</span>) temp = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// ä¹‹å‰æœ‰é™åˆ¶å¹¶ä¸”è¿™ä¸€ä½è¿˜æœ‰é™åˆ¶ä¸‹ä¸€ä½æ‰èƒ½æœ‰é™åˆ¶</span></span><br><span class="line">        <span class="comment">// ä¹‹å‰æœ‰å‰å¯¼é›¶å¹¶ä¸”è¿™ä¸€ä½ä¹Ÿæ˜¯é›¶é‚£ä¹ˆä¸‹ä¸€ä½æ‰èƒ½æœ‰å‰å¯¼é›¶</span></span><br><span class="line">        res += <span class="built_in">dfs</span>(pos - <span class="number">1</span>, limit &amp;&amp; i == up, lead &amp;&amp; i == <span class="number">0</span>, temp);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!limit &amp;&amp; !lead) now = res; <span class="comment">// æ²¡æœ‰å‰å¯¼é›¶å¹¶ä¸”æ²¡æœ‰é™åˆ¶ï¼Œå°±å¯ä»¥è®°å½•</span></span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">(LL x, <span class="type">int</span> g)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> len = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(x &gt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        a[++len] = x % <span class="number">10</span>;</span><br><span class="line">        x /= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">9</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        di = i;</span><br><span class="line">        ans[i] += g * <span class="built_in">dfs</span>(len, <span class="literal">true</span>, <span class="literal">true</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">-1</span>, <span class="built_in">sizeof</span>(f));</span><br><span class="line">    LL l, r;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>, &amp;l, &amp;r);</span><br><span class="line">    <span class="built_in">solve</span>(r, <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">solve</span>(l - <span class="number">1</span>, <span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">9</span>; i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%lld &quot;</span>, ans[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><a class="link"   href="https://www.luogu.com.cn/problem/P4317" >P4317èŠ±ç¥çš„æ•°è®ºé¢˜<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>é¢˜æ„ï¼šæ±‚åŒºé—´ï¼ˆå·¦ç«¯ç‚¹ä¸º 1ï¼‰å†…æ‰€æœ‰æ•°åœ¨äºŒè¿›åˆ¶è¡¨ç¤ºä¸‹ 1 çš„ä¸ªæ•°çš„ä¹˜ç§¯ã€‚</p>
<p>æœ¬é¢˜æ— é¢å¤–çº¦æŸæ¡ä»¶ï¼Œè½¬æ¢ä¸ºäºŒè¿›åˆ¶è¿›è¡Œæ•°ä½ DP å³å¯ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MOD = <span class="number">1e7</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨ [pos + 1, len] ä¸­å·²ç»å¡«å†™äº† cnt ä¸ª 1ï¼Œ[1,pos] ä¸­ä»»æ„å¡«çš„åˆæ³•æ–¹æ¡ˆçš„ç­”æ¡ˆä¹˜ç§¯</span></span><br><span class="line"><span class="comment">// å…¶å®å°±æ˜¯å½“å‰ [1,pos] éšä¾¿å¡«ï¼Œä¹‹å‰å·²ç»å¡«äº† cnt ä¸ª 1 çš„ç­”æ¡ˆç§¯</span></span><br><span class="line">LL f[<span class="number">82</span>][<span class="number">111</span>]; </span><br><span class="line"><span class="type">int</span> a[<span class="number">82</span>];</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">dfs</span><span class="params">(<span class="type">int</span> pos, <span class="type">int</span> limit, <span class="type">int</span> cnt)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!pos) <span class="keyword">return</span> <span class="built_in">max</span>(cnt, <span class="number">1</span>); <span class="comment">// é˜²æ­¢æœ€ç»ˆçŠ¶æ€ cnt = 0 å¯¼è‡´ç´¯ä¹˜ç­”æ¡ˆä¸º 0</span></span><br><span class="line">    <span class="keyword">if</span>(!limit &amp;&amp; ~f[pos][cnt]) <span class="keyword">return</span> f[pos][cnt]; <span class="comment">// å‡å¦‚å¯ä»¥è®°å¿†åŒ–</span></span><br><span class="line">    LL res = <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> up = limit ? a[pos] : <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= up; i++)</span><br><span class="line">        res = (res * <span class="built_in">dfs</span>(pos - <span class="number">1</span>, limit &amp;&amp; i == up, cnt + (i &amp; <span class="number">1</span>))) % MOD;</span><br><span class="line">    <span class="keyword">if</span>(!limit) <span class="comment">// æ²¡æœ‰é™åˆ¶å¹¶ä¸”ä¸€å®šå­˜åœ¨è¯¥çŠ¶æ€</span></span><br><span class="line">        f[pos][cnt] = res;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">solve</span><span class="params">(LL x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> len = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(x)</span><br><span class="line">    &#123;</span><br><span class="line">        a[++len] = x % <span class="number">2</span>;</span><br><span class="line">        x /= <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dfs</span>(len, <span class="literal">true</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">-1</span>, <span class="built_in">sizeof</span>(f));</span><br><span class="line">    LL n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>, &amp;n);</span><br><span class="line">    cout &lt;&lt; <span class="built_in">solve</span>(n);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="P6218-Round-Numbers-S"><a href="#P6218-Round-Numbers-S" class="headerlink" title="P6218 Round Numbers S"></a><a class="link"   href="https://www.luogu.com.cn/problem/P6218" >P6218 Round Numbers S<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>é¢˜æ„ï¼šåŒºé—´å†…æ»¡è¶³äºŒè¿›åˆ¶ä¸‹ 0 çš„ä¸ªæ•°ä¸å°äº 1 çš„ä¸ªæ•°çš„æ•°çš„æ–¹æ¡ˆæ•°ã€‚</p>
<p>æœ¬é¢˜æœ‰ä¸¤ä¸ªé¢å¤–çº¦æŸæ¡ä»¶ï¼šå½“å‰ 0 çš„æ•°ç›®å’Œ 1 çš„æ•°ç›®å’Œæ˜¯å¦æœ‰å‰å¯¼é›¶ï¼ˆå› ä¸ºè¦ç»Ÿè®¡ 0 çš„æ•°ç›®ï¼‰ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> f[<span class="number">82</span>][<span class="number">82</span>][<span class="number">82</span>]; <span class="comment">// pos sum0 sum1 </span></span><br><span class="line"><span class="comment">// æˆ‘ä»¬ä¸å…³å¿ƒå‰é¢æ€ä¹ˆå¡«ï¼Œåªéœ€è¦å…³å¿ƒ [1,pos] å¡« å¤šå°‘ä¸ª 0 å’Œ å¤šå°‘ä¸ª 1 çš„æ–¹æ¡ˆæ•°ï¼Œå› æ­¤å¯ä»¥è¿™æ ·è®°å½•çŠ¶æ€</span></span><br><span class="line"><span class="comment">// é€’å½’è¾¹ç•Œæ—¶ï¼Œåˆ¤æ–­å½“å‰æ•°æ˜¯ä¸æ˜¯åœ†æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a[<span class="number">82</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> pos, <span class="type">bool</span> limit, <span class="type">bool</span> lead, <span class="type">int</span> sum0, <span class="type">int</span> sum1)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!pos) <span class="keyword">return</span> sum0 &gt;= sum1;</span><br><span class="line">    <span class="keyword">if</span>(!limit &amp;&amp; ~f[pos][sum0][sum1]) <span class="keyword">return</span> f[pos][sum0][sum1];</span><br><span class="line">    <span class="type">int</span> up = limit ? a[pos] : <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= up; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(lead &amp;&amp; (i == <span class="number">0</span>))</span><br><span class="line">            res += <span class="built_in">dfs</span>(pos - <span class="number">1</span>, limit &amp;&amp; i == up, <span class="literal">true</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">else</span> res += <span class="built_in">dfs</span>(pos - <span class="number">1</span>, limit &amp;&amp; i == up, <span class="literal">false</span>, sum0 + (i == <span class="number">0</span>), sum1 + (i == <span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!limit) f[pos][sum0][sum1] = res;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">solve</span><span class="params">(LL x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> len = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(x)</span><br><span class="line">    &#123;</span><br><span class="line">        a[++len] = x % <span class="number">2</span>;</span><br><span class="line">        x /= <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dfs</span>(len, <span class="literal">true</span>, <span class="literal">true</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">-1</span>, <span class="built_in">sizeof</span>(f));</span><br><span class="line">    LL l, r;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>, &amp;l, &amp;r);</span><br><span class="line">    LL ans = <span class="built_in">solve</span>(r) - <span class="built_in">solve</span>(l - <span class="number">1</span>);</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="CF628D-Magic-Numbers"><a href="#CF628D-Magic-Numbers" class="headerlink" title="CF628D Magic Numbers"></a><a class="link"   href="https://codeforces.com/contest/628/problem/D" >CF628D Magic Numbers<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>é¢˜æ„ï¼šæ±‚åŒºé—´å†…æ»¡è¶³å¶æ•°ä½å…¨æ˜¯ d ä¸”å¥‡æ•°ä½ä¸æ˜¯ d ä¸”æ¨¡ d ä¸º 0 çš„æ–¹æ¡ˆæ•°ã€‚</p>
<p>æœ¬ä½“é¢å¤–é™åˆ¶æ¡ä»¶ï¼šæ¨¡ $m$ ä½™æ•°ä¸º $0$ï¼Œç”±äºè¯»å…¥å¾ˆå¤§ï¼Œæ‰€ä»¥ç”¨å­—ç¬¦ä¸²å¤„ç†ï¼Œç”±äº $l-1$ å¯èƒ½äº§ç”Ÿé€€ä½ï¼Œæ‰€ä»¥å•ç‹¬åˆ¤æ–­ $l$ ä½ç½®çš„åˆæ³•æ€§å³å¯ã€‚</p>
<p>ç„¶åæ³¨æ„æœ€é«˜ä½ä¸åŒæƒ…å†µä¸‹ä¸‹æ ‡ä¹Ÿä¸åŒã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MOD = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// [pos + 1, len] å·²ç»å¡«å¥½ï¼Œä¸”å¡«å¥½çš„éƒ¨åˆ†ä½™æ•°ä¸º rï¼Œ[1, len] éšæ„å¡«å†™å¾—åˆ°çš„æ–¹æ¡ˆæ•°</span></span><br><span class="line">LL f[<span class="number">2005</span>][<span class="number">2005</span>];</span><br><span class="line"><span class="type">int</span> len, m, d;</span><br><span class="line"><span class="type">int</span> a[<span class="number">2005</span>]; </span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">dfs</span><span class="params">(<span class="type">int</span> pos, <span class="type">bool</span> limit, <span class="type">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!pos) <span class="keyword">return</span> r == <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(!limit &amp;&amp; ~f[pos][r]) <span class="keyword">return</span> f[pos][r];</span><br><span class="line">    LL res = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> up = limit ? a[pos] : <span class="number">9</span>;</span><br><span class="line">    <span class="type">bool</span> t = (len - pos + <span class="number">1</span>) &amp; <span class="number">1</span>; <span class="comment">// å½“å‰ä½çš„å¥‡å¶æ€§, å¥‡æ•°ä½ä¸èƒ½å‡ºç° d // æ³¨æ„è½¬æ¢</span></span><br><span class="line">    <span class="keyword">if</span>(t)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= up; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(i == d)</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            res = (res + <span class="built_in">dfs</span>(pos - <span class="number">1</span>, limit &amp;&amp; i == up, (r * <span class="number">10</span> + i) % m)) % MOD;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(d &lt;= up)</span><br><span class="line">            res = (res + <span class="built_in">dfs</span>(pos - <span class="number">1</span>, limit &amp;&amp; d == up, (r * <span class="number">10</span> + d) % m)) % MOD;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!limit) f[pos][r] = res;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">solve</span><span class="params">(string x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    len = x.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; len; i++) <span class="comment">// a[len] ä¸ºæœ€é«˜ä½</span></span><br><span class="line">        a[len - i] = x[i] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dfs</span>(len, <span class="literal">true</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(string x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> r = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> len = x.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; len; i++) <span class="comment">// æ³¨æ„ä¸‹æ ‡ a[1] ä¸ºæœ€é«˜ä½</span></span><br><span class="line">        a[i + <span class="number">1</span>] = x[i] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(i &amp; <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[i] == d)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a[i] != d) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        r = (r * <span class="number">10</span> + a[i]) % m;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> r == <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">-1</span>, <span class="built_in">sizeof</span>(f));</span><br><span class="line">    string l, r;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;m, &amp;d);</span><br><span class="line">    cin &gt;&gt; l &gt;&gt; r;</span><br><span class="line">    cout &lt;&lt; (<span class="built_in">solve</span>(r) - <span class="built_in">solve</span>(l) + <span class="built_in">check</span>(l) + MOD) % MOD;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="P4124-æ‰‹æœºå·ç "><a href="#P4124-æ‰‹æœºå·ç " class="headerlink" title="P4124 æ‰‹æœºå·ç "></a><a class="link"   href="https://www.luogu.com.cn/problem/P4124" >P4124 æ‰‹æœºå·ç <i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>é¢˜æ„ï¼šæ±‚åŒºé—´å†…æ»¡è¶³é™åˆ¶çš„æ‰‹æœºå·ç çš„ä¸ªæ•°ã€‚</p>
<p>æœ¬é¢˜é¢å¤–é™åˆ¶ï¼š</p>
<ul>
<li>æœ€é«˜ä½ä¸º 1</li>
<li>æœ‰ä¸‰ä¸ªç›¸é‚»ä¸”ç›¸åŒçš„æ•°</li>
<li>4 å’Œ 8 ä¸åŒæ—¶å‡ºç°</li>
</ul>
<p>åˆ†åˆ«è®°å½•ï¼š</p>
<p>ä¸Šä¸€ä¸ªæ•°ï¼Œä¸Šä¸Šä¸ªæ•°ï¼Œä¹‹å‰æ˜¯å¦å‡ºç°è¿‡ä¸‰ä¸ªç›¸é‚»ä¸”ç›¸ç­‰ï¼Œä¹‹å‰æ˜¯å¦å‡ºç°è¿‡ 4ï¼Œä¹‹å‰æ˜¯å¦å‡ºç°è¿‡ 8.</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ¬é¢˜é¢å¤–é™åˆ¶ï¼šä¸ä¸Šä¸¤ä¸ªç›¸é‚»çš„æ•°çš„å…³ç³»ï¼Œç›®å‰ä½ä¹‹å‰æ˜¯å¦å‡ºç°äº† 4ï¼Œæ˜¯å¦å‡ºç°äº† 8</span></span><br><span class="line"><span class="comment">// ç¬¬ä¸€ä½æ˜¯ 1</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a[<span class="number">12</span>];</span><br><span class="line"><span class="type">int</span> len;</span><br><span class="line"><span class="type">int</span> f[<span class="number">12</span>][<span class="number">10</span>][<span class="number">10</span>][<span class="number">2</span>][<span class="number">2</span>][<span class="number">2</span>]; <span class="comment">// åˆ° pos ä½ç½®ä½ç½®ï¼Œä¸Šä¸¤ä¸ªç›¸é‚»çš„æ•°ï¼Œä¹‹å‰æ˜¯å¦å‡ºç°è¿‡è¿å·ï¼Œæ˜¯å¦å‡ºç°è¿‡4ï¼Œæ˜¯å¦å‡ºç°è¿‡8</span></span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">dfs</span><span class="params">(<span class="type">int</span> pos, <span class="type">int</span> limit, <span class="type">int</span> last1, <span class="type">int</span> last2, <span class="type">bool</span> same, <span class="type">bool</span> have4, <span class="type">bool</span> have8)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!pos) <span class="keyword">return</span> (!(have4 &amp;&amp; have8) &amp;&amp; same);</span><br><span class="line">    <span class="keyword">auto</span> &amp;now = f[pos][last1][last2][same][have4][have8];</span><br><span class="line">    <span class="keyword">if</span>(!limit &amp;&amp; ~now) <span class="keyword">return</span> now;</span><br><span class="line">    LL res = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> up = limit ? a[pos] : <span class="number">9</span>;</span><br><span class="line">    <span class="type">int</span> down = pos == len ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = down; i &lt;= up; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(i == <span class="number">4</span> &amp;&amp; !have8)</span><br><span class="line">            res += <span class="built_in">dfs</span>(pos - <span class="number">1</span>, limit &amp;&amp; i == up, i, last1, same || (i == last1 &amp;&amp; i == last2), <span class="literal">true</span>, <span class="literal">false</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(i == <span class="number">8</span> &amp;&amp; !have4)</span><br><span class="line">            res += <span class="built_in">dfs</span>(pos - <span class="number">1</span>, limit &amp;&amp; i == up, i, last1, same || (i == last1 &amp;&amp; i == last1 &amp;&amp; i == last2), <span class="literal">false</span>, <span class="literal">true</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(i != <span class="number">4</span> &amp;&amp; i != <span class="number">8</span>) </span><br><span class="line">            res += <span class="built_in">dfs</span>(pos - <span class="number">1</span>, limit &amp;&amp; i == up, i, last1, same || (i == last1 &amp;&amp; i == last2), have4, have8);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!limit) now = res; <span class="comment">// åˆæ³•çš„çŠ¶æ€æ‰å€¼å¾—è¢«è®°å½•</span></span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">solve</span><span class="params">(LL x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x &lt; <span class="number">1e10</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    len = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(x)</span><br><span class="line">    &#123;</span><br><span class="line">        a[++len] = x % <span class="number">10</span>;</span><br><span class="line">        x /= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dfs</span>(len, <span class="literal">true</span>, <span class="number">-1</span>, <span class="number">-1</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    LL l, r;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>, &amp;l, &amp;r);</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">-1</span>, <span class="built_in">sizeof</span>(f));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, <span class="built_in">solve</span>(r) - <span class="built_in">solve</span>(l - <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="CF855E-Salazar-Slytherinâ€™s-Locket"><a href="#CF855E-Salazar-Slytherinâ€™s-Locket" class="headerlink" title="CF855E Salazar Slytherinâ€™s Locket"></a><a href="">CF855E Salazar Slytherinâ€™s Locket</a></h3><p>é¢˜æ„ï¼šæ±‚åŒºé—´å†…çš„æ•°éƒ½è½¬æ¢ä¸º b è¿›åˆ¶åï¼Œæ»¡è¶³ $[0,b-1]$ éƒ½å„å‡ºç°å¶æ•°æ¬¡çš„æ•°çš„ä¸ªæ•°ã€‚</p>
<p>å‘ç‚¹ï¼š</p>
<ul>
<li>å¼€ <code>ll</code></li>
<li>è®°æœä¸€å®šè¦åˆ¤æ–­å‰å¯¼é›¶ï¼Œåªæœ‰åˆæ³•çš„çŠ¶æ€æ‰å¯ä»¥è¢«è®°å¿†åŒ–ï¼Œè€Œå…¨æ˜¯å‰å¯¼é›¶çš„çŠ¶æ€æ¯ä¸€ä½éƒ½æ˜¯ 0ï¼Œä¸åˆæ³•æ‰€ä»¥ä¸èƒ½è¢«è®°å¿†åŒ–ã€‚</li>
</ul>
<p>æœ¬é¢˜é™åˆ¶ï¼šä¸€ä¸ªé›†åˆå†…æ•°çš„å‡ºç°ä¸ªæ•°éƒ½ä¸ºå¶æ•°æ¬¡ï¼Œè¿™ä¸ªå¯ä»¥ç”¨ä¸€ä¸ªäºŒè¿›åˆ¶æ•°çŠ¶æ€å‹ç¼©ä¸€ä¸‹ï¼Œç¬¬ i ä½ ä»£è¡¨ i è¿™ä¸ªæ•°å½“å‰æ˜¯å¥‡æ•°æ¬¡è¿˜æ˜¯å¶æ•°æ¬¡ã€‚</p>
<p>ä¸ºäº†å¯ä»¥çŠ¶æ€å¤ç”¨ï¼Œæ‰€ä»¥çŠ¶æ€å¤šè®°å½•ä¸€ä¸ªå½“å‰æ˜¯å‡ è¿›åˆ¶ã€‚</p>
<p>æ³¨æ„ï¼Œå…¨æ˜¯å¶æ•°ï¼Œå³çŠ¶æ€å‹ç¼©åç»“æœä¸º 0ï¼Œè¦æ’é™¤å…¨ä¸ºå‰å¯¼é›¶çš„æƒ…å†µã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> len;</span><br><span class="line"><span class="type">int</span> a[<span class="number">62</span>];</span><br><span class="line"><span class="type">int</span> b;</span><br><span class="line">LL f[<span class="number">12</span>][<span class="number">62</span>][<span class="number">1030</span>]; <span class="comment">// r è¿›åˆ¶ pos å½“å‰é€’å½’åˆ°çš„ä½ç½® çŠ¶æ€</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// çŠ¶æ€å‹ç¼©ä¸€ä¸‹ 0 - è¯¥ä½ä»£è¡¨çš„æ•°å­—å‡ºç°æ¬¡æ•°ä¸ºå¶æ•° 1 - å¥‡æ•°</span></span><br><span class="line"><span class="comment">// ç»Ÿè®¡æ•°å­—ï¼Œéœ€è¦è®°å½•å‰å¯¼é›¶</span></span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">dfs</span><span class="params">(<span class="type">int</span> pos, <span class="type">bool</span> limit, <span class="type">int</span> state, <span class="type">bool</span> lead)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!pos) <span class="keyword">return</span> (state == <span class="number">0</span> &amp;&amp; !lead);</span><br><span class="line">    <span class="keyword">auto</span> &amp;now = f[b][pos][state];</span><br><span class="line">    <span class="keyword">if</span>(!limit &amp;&amp; !lead &amp;&amp; ~now) <span class="keyword">return</span> now; <span class="comment">// æ²¡æœ‰å‰å¯¼é›¶æ‰æ˜¯åˆæ³•çŠ¶æ€</span></span><br><span class="line">    LL res = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> up = limit ? a[pos] : b - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= up; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        res += <span class="built_in">dfs</span>(pos - <span class="number">1</span>, limit &amp;&amp; i == up, (lead &amp;&amp; i == <span class="number">0</span> ) ? <span class="number">0</span> : state ^ (<span class="number">1</span> &lt;&lt; i), lead &amp;&amp; i == <span class="number">0</span>); <span class="comment">// i è¿™ä¸ªæ•°å‡ºç°çš„å¥‡å¶æ€§ï¼šå¥‡å¶äº’æ¢</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!limit &amp;&amp; !lead) now = res;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">solve</span><span class="params">(LL x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    len = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(x)</span><br><span class="line">    &#123;</span><br><span class="line">        a[++len] = x % b;</span><br><span class="line">        x /= b;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dfs</span>(len, <span class="literal">true</span>, <span class="number">0</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">-1</span>, <span class="built_in">sizeof</span>(f));</span><br><span class="line">    LL l, r;</span><br><span class="line">    <span class="type">int</span> q;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;q);</span><br><span class="line">    <span class="keyword">while</span>(q--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%lld%lld&quot;</span>, &amp;b, &amp;l, &amp;r);</span><br><span class="line">        cout &lt;&lt; <span class="built_in">solve</span>(r) - <span class="built_in">solve</span>(l - <span class="number">1</span>) &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="SP10606-BALNUM-Balanced-Numbers"><a href="#SP10606-BALNUM-Balanced-Numbers" class="headerlink" title="SP10606 BALNUM - Balanced Numbers"></a><a class="link"   href="https://www.luogu.com.cn/problem/SP10606" >SP10606 BALNUM - Balanced Numbers<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>é¢˜æ„ï¼šæ±‚ä¸€æ®µåŒºé—´å†…æ»¡è¶³é™åˆ¶çš„æ•°ã€‚</p>
<p>é™åˆ¶ï¼šå¯¹äºæ•°çš„æ¯ä¸€ä½<strong>å‡ºç°è¿‡</strong>çš„æ•°ç ï¼Œå¶æ•°å‡ºç°å¥‡æ•°æ¬¡ï¼Œå¥‡æ•°å‡ºç°å¶æ•°æ¬¡ã€‚</p>
<p>å¶æ•°è¦ä¹ˆå‡ºç°é›¶æ¬¡è¦ä¹ˆå‡ºç°å¥‡æ•°æ¬¡ï¼Œå¥‡æ•°è¦ä¹ˆå‡ºç°é›¶æ¬¡è¦ä¹ˆå‡ºç°å¶æ•°æ¬¡ã€‚</p>
<p>è¿™é‡Œç”±äºæœ‰æ²¡å‡ºç°è¿‡ï¼Œå¥‡æ•°æ¬¡ï¼Œå¶æ•°æ¬¡ä¸‰ç§çŠ¶æ€ï¼Œæ‰€ä»¥ä¸€ä½äºŒè¿›åˆ¶æ— æ³•å°†å…¶è¡¨ç¤ºï¼Œå› æ­¤è¿™é‡Œç”¨ä¸¤ä½äºŒè¿›åˆ¶æ•°è¡¨ç¤ºä¸€ä¸ªæ•°çš„çŠ¶æ€ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MOD = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> a[<span class="number">22</span>];</span><br><span class="line">LL f[<span class="number">22</span>][(<span class="number">1</span> &lt;&lt; <span class="number">20</span>)]; <span class="comment">// åä¸ªæ•° æ¯ä¸ªæ•°ç”¨ä¸¤ä½è¡¨ç¤ºçŠ¶æ€ ä¸€å…±äºŒåä½</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 00 æ²¡å‡ºç°è¿‡</span></span><br><span class="line"><span class="comment">// 01 å‡ºç°å¥‡æ•°æ¬¡</span></span><br><span class="line"><span class="comment">// 10 å‡ºç°å¶æ•°æ¬¡</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(<span class="type">int</span> st)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">9</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> temp = (st &gt;&gt; (<span class="number">2</span> * i)) &amp; <span class="number">0b11</span>; <span class="comment">// å–å‡º i å¯¹åº”çš„ä¸¤ä½</span></span><br><span class="line">        <span class="keyword">if</span>(i &amp; <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(temp == <span class="number">0b01</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(temp == <span class="number">0b10</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">add</span><span class="params">(<span class="type">int</span> st, <span class="type">int</span> i)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> temp = (st &gt;&gt; (<span class="number">2</span> * i)) &amp; <span class="number">0b11</span>; <span class="comment">// æå– i å¯¹åº”çš„ä¸¤ä½</span></span><br><span class="line">    st -= (temp &lt;&lt; (<span class="number">2</span> * i)); <span class="comment">// å‡å» i å¯¹åº”çš„ä¸¤ä½</span></span><br><span class="line">    <span class="keyword">if</span>(temp == <span class="number">0</span>)</span><br><span class="line">        temp = <span class="number">0b01</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        temp ^= <span class="number">0b11</span>; <span class="comment">// 01 å˜ 10 10 å˜ 01</span></span><br><span class="line">    st |= temp &lt;&lt; (<span class="number">2</span> * i); <span class="comment">// åŠ å›å»</span></span><br><span class="line">    <span class="keyword">return</span> st;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">dfs</span><span class="params">(<span class="type">int</span> pos, <span class="type">bool</span> limit, <span class="type">bool</span> lead, <span class="type">int</span> st)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!pos)</span><br><span class="line">        <span class="keyword">return</span> !lead &amp;&amp; <span class="built_in">check</span>(st);</span><br><span class="line">    <span class="keyword">auto</span> &amp;now = f[pos][st];</span><br><span class="line">    <span class="keyword">if</span>(!limit &amp;&amp; !lead &amp;&amp; ~now) <span class="keyword">return</span> now;</span><br><span class="line">    LL res = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> up = limit ? a[pos] : <span class="number">9</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= up; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> temp = (lead &amp;&amp; i == <span class="number">0</span>) ? <span class="number">0</span> : <span class="built_in">add</span>(st, i);</span><br><span class="line">        res += <span class="built_in">dfs</span>(pos - <span class="number">1</span>, limit &amp;&amp; i == up, lead &amp;&amp; i == <span class="number">0</span>, temp);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!limit &amp;&amp; !lead)</span><br><span class="line">        now = res;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">solve</span><span class="params">(LL x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> len = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(x)</span><br><span class="line">    &#123;</span><br><span class="line">        a[++len] = x % <span class="number">10</span>;</span><br><span class="line">        x /= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dfs</span>(len, <span class="literal">true</span>, <span class="literal">true</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">-1</span>, <span class="built_in">sizeof</span>(f));</span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;t);</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">    &#123;</span><br><span class="line">        LL l, r;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>, &amp;l, &amp;r);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, <span class="built_in">solve</span>(r) - <span class="built_in">solve</span>(l - <span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="CFGYM104053M"><a href="#CFGYM104053M" class="headerlink" title="CFGYM104053M"></a><a class="link"   href="https://codeforces.com/gym/104053/problem/M" >CFGYM104053M<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>é¢˜æ„ï¼šæ±‚æœ‰å¤šå°‘ä¸ªé•¿åº¦ä¸º $k$ çš„æ•°ç»„æ»¡è¶³ï¼š</p>
<ul>
<li>$a_i\in[0,m]$</li>
<li>$(\sum_{i&#x3D;1}^k\sum_{j&#x3D;1}^{i-1}a_i\oplus{a_j})&#x3D;n$</li>
</ul>
<p>å¼‚æˆ–å½“å‰ä½äº§ç”Ÿä»·å€¼çš„æ¡ä»¶æ˜¯å½“å‰è¿™ä½æ˜¯ä¸€ä¸ª $(0,1)$ å¯¹ï¼Œå¯ä»¥äº§ç”Ÿ $2^{pos}$ çš„è´¡çŒ®ã€‚</p>
<p>ç”±äºæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå‡è®¾æœ‰ $y$ ä¸ªæ•°è¿™ä¸€ä½å¡«äº† 1ï¼Œé‚£ä¹ˆæ€»å…±å°±ä¼šäº§ç”Ÿ $2^{pos}\times{y}\times{(k-y)}$ çš„è´¡çŒ®ï¼ˆæ¯ä¸ª 0 éƒ½ä¼šå’Œ å®ƒå‰é¢çš„ 1 é…å¯¹ï¼Œæ¯ä¸ª 1 éƒ½ä¼šå’Œå®ƒå‰é¢çš„ 0 é…å¯¹ï¼Œè¿™æ ·å°±ç›¸å½“äºäº’ç›¸ç»„åˆä¸”æ— é‡å¤ï¼‰ã€‚</p>
<p>ç”±äºæ˜¯å¾ˆå¤šæ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬è®°å½•æ€»å…±å—åˆ°é™åˆ¶çš„æ•°çš„ä¸ªæ•° $s$</p>
<p>å½“ $m$ çš„è¿™ä¸€ä½ä¸º 1 æ—¶ï¼š</p>
<p>æšä¸¾ $i,j$ è¡¨ç¤ºåœ¨ $s$ ä¸ªæ•°é‡Œé€‰äº† $i$ ä¸ªæ•°è¿™ä¸€ä½å¡« 1ï¼Œåœ¨ $k-s$ ä¸ªæ•°é‡Œé€‰äº† $j$ ä¸ªæ•°å¡« 1ï¼Œè´¡çŒ®ä¸º $2^{pos}\times(i+j)\times(k-i-j)$ï¼Œä¸‹ä¸€å±‚å°±æ˜¯ <code>dfs(pos - 1, i, now + v)</code></p>
<p>è¿™ä¸€ä½ 0 æ—¶ï¼š</p>
<p>åªéœ€æšä¸¾ $k-s$ ä¸­ $j$ ä¸ªæ•°å¡« 1ï¼Œè´¡çŒ®æ˜¯ $2^{pos}\times{j}\times(k-j)$</p>
<p>ä¸‹ä¸€å±‚å°±æ˜¯ï¼š<code>dfs(pos - 1, s, now + v)</code></p>
<p>$now&gt;n$ æ²¡å¿…è¦æœäº†ã€‚</p>
<p>$max+now&lt;n$ ä¹Ÿæ²¡å¿…è¦æœäº†ã€‚</p>
<p>ç”±äºæœ¬é¢˜åªè¦çŠ¶æ€æœ‰å€¼å°±å‡æ˜¯åˆæ³•çš„ï¼Œæ‰€ä»¥éƒ½å¯ä»¥è®°å¿†åŒ–ã€‚</p>
<p>ç”±äºç¬¬ä¸‰ç»´ $now$ å€¼åŸŸå¾ˆå¤§ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨ <code>map</code> å­˜ã€‚</p>
<p>ä»£ç ï¼š</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MOD = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// f[pos][s][now] // å½“å‰ä½ç½® æœ‰ s ä¸ªå½“å‰ä½å—é™åˆ¶ å½“å‰ç´¯è®¡æ€»è´¡çŒ®</span></span><br><span class="line"><span class="comment">// now &gt; n æ—¶ç›´æ¥è¿”å› 0</span></span><br><span class="line"><span class="comment">// max + now &lt; n ä¹Ÿç›´æ¥è¿”å›é›¶ | max = (2 ^ (pos + 1) - 1) * k / 2 * (k - k / 2) (ä¸€åŠæ•° [1,pos] å…¨å¡« 1 ä¸€åŠå…¨å¡« 0) </span></span><br><span class="line">map&lt;LL, LL&gt; f[<span class="number">62</span>][<span class="number">62</span>];</span><br><span class="line">LL n, m;</span><br><span class="line"><span class="type">int</span> k;</span><br><span class="line">LL c[<span class="number">62</span>][<span class="number">62</span>];</span><br><span class="line"><span class="type">int</span> b[<span class="number">62</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    c[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">60</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        c[i][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= i; j++)</span><br><span class="line">            c[i][j] = (c[i - <span class="number">1</span>][j] + c[i - <span class="number">1</span>][j - <span class="number">1</span>]) % MOD;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">dfs</span><span class="params">(<span class="type">int</span> pos, <span class="type">int</span> s, LL now)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(now &gt; n) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(pos == <span class="number">-1</span>) <span class="keyword">return</span> now == n;</span><br><span class="line">    <span class="keyword">if</span>(now + ((<span class="number">1ll</span> &lt;&lt; (pos + <span class="number">1</span>)) - <span class="number">1</span>) * (k / <span class="number">2</span>) * (k - k / <span class="number">2</span>) &lt; n)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(f[pos][s].<span class="built_in">count</span>(now)) <span class="keyword">return</span> f[pos][s][now];</span><br><span class="line">    LL res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(b[pos] == <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= s; i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt;= k - s; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                LL v = (LL)(k - i - j) * (i + j) * (<span class="number">1ll</span> &lt;&lt; pos); <span class="comment">// è¯¥ä½äº§ç”Ÿçš„çŠ¶æ€ä¹˜ä»¥ç»„åˆçš„æ–¹æ¡ˆæ•°</span></span><br><span class="line">                LL temp = c[s][i] * c[k - s][j] % MOD;</span><br><span class="line">                res = (res + temp * <span class="built_in">dfs</span>(pos - <span class="number">1</span>, i, now + v) % MOD) % MOD;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt;= k - s; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            LL v = (LL)(k - j) * j * (<span class="number">1ll</span> &lt;&lt; pos);</span><br><span class="line">            LL temp = c[k - s][j];</span><br><span class="line">            res = (res + temp * <span class="built_in">dfs</span>(pos - <span class="number">1</span>, s, now + v) % MOD) % MOD;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    f[pos][s][now] = res;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">solve</span><span class="params">(LL x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> len = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(x)</span><br><span class="line">    &#123;</span><br><span class="line">        b[len++] = x % <span class="number">2</span>;</span><br><span class="line">        x /= <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dfs</span>(len - <span class="number">1</span>, k, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">init</span>();</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m &gt;&gt; k;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">solve</span>(m) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="P4127-åŒç±»åˆ†å¸ƒ"><a href="#P4127-åŒç±»åˆ†å¸ƒ" class="headerlink" title="P4127 åŒç±»åˆ†å¸ƒ"></a><a class="link"   href="https://www.luogu.com.cn/problem/P4127" >P4127 åŒç±»åˆ†å¸ƒ<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>é¢˜æ„ï¼šæ±‚åŒºé—´å†…å„ä½æ•°å­—ä¹‹å’Œèƒ½æ•´é™¤åŸæ•°çš„æ•°çš„ä¸ªæ•°ã€‚</p>
<p>æ€è€ƒä¸€ä¸‹é¢å¤–é™åˆ¶ï¼š</p>
<ul>
<li>å‰å¯¼é›¶ï¼Ÿæ²¡æœ‰å½±å“ã€‚</li>
<li>æ•°ä½ä¹‹å’Œè¦è®°å½•ã€‚</li>
<li>è¿™ä¸ªæ•°å¡«æˆä»€ä¹ˆæ ·è‚¯å®šä¹Ÿè¦è®°å½•ï¼Œä½†æ˜¯è¿™ä¸ªæ•°ä¼šå¾ˆå¤§ï¼ŒçŠ¶æ€æ•°ç»„è‚¯å®šå¼€ä¸ä¸‹ï¼Œæ‰€ä»¥æƒ³åˆ°è¦æ¨¡ä¸ŠæŸä¸ªæ•°ã€‚è€Œè¿™ä¸ªæ¨¡æ•°æœ€å¥½æ˜¯åˆšå¥½ç­‰äºæˆ‘ä»¬æœ€åå¡«å®Œå¾—åˆ°çš„æ•°ä½ä¹‹å’Œï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æšä¸¾æ•°ä½ä¹‹å’Œï¼Œå› ä¸ºæœ€å¤šæ‰ 162ï¼Œå¡«å®Œåå‡å¦‚å¡«å¥½çš„æ•°æ˜¯ 0 ï¼ˆæ¨¡æ„ä¹‰ä¸‹ï¼‰ï¼Œå¹¶ä¸”æ¨¡æ•°åˆšå¥½ç­‰äºæ•°ä½ä¹‹å’Œï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ‰¾åˆ°äº†ä¸€ç§åˆæ³•çŠ¶æ€ã€‚</li>
</ul>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a[<span class="number">22</span>];</span><br><span class="line"><span class="type">int</span> mod;</span><br><span class="line">LL f[<span class="number">22</span>][<span class="number">170</span>][<span class="number">170</span>]; <span class="comment">// pos cnt state</span></span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">dfs</span><span class="params">(<span class="type">int</span> pos, <span class="type">bool</span> limit, <span class="type">int</span> cnt, LL state)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!pos) <span class="keyword">return</span> (mod == cnt &amp;&amp; state == <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span>(!limit &amp;&amp; ~f[pos][cnt][state]) <span class="keyword">return</span> f[pos][cnt][state];</span><br><span class="line">    <span class="type">int</span> up = limit ? a[pos] : <span class="number">9</span>;</span><br><span class="line">    LL res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= up; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        res += <span class="built_in">dfs</span>(pos - <span class="number">1</span>, limit &amp;&amp; i == up, cnt + i, (state * <span class="number">10</span> % mod + i) % mod);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!limit) f[pos][cnt][state] = res;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">solve</span><span class="params">(LL x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> len = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(x)</span><br><span class="line">    &#123;</span><br><span class="line">        a[++len] = x % <span class="number">10</span>;</span><br><span class="line">        x /= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    LL res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(mod = <span class="number">1</span>; mod &lt;= len * <span class="number">9</span>; mod++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(f, <span class="number">-1</span>, <span class="built_in">sizeof</span>(f)); <span class="comment">// æ¨¡æ•°æ”¹å˜ ä¹‹å‰çš„çŠ¶æ€ä¸èƒ½å¤ç”¨</span></span><br><span class="line">        res += <span class="built_in">dfs</span>(len, <span class="literal">true</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    LL l, r;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>, &amp;l, &amp;r);</span><br><span class="line">    cout &lt;&lt; <span class="built_in">solve</span>(r) - <span class="built_in">solve</span>(l - <span class="number">1</span>) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="P3413-èŒæ•°"><a href="#P3413-èŒæ•°" class="headerlink" title="P3413 èŒæ•°"></a><a class="link"   href="https://www.luogu.com.cn/problem/P3413" >P3413 èŒæ•°<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>é¢˜æ„ï¼šæ±‚ä¸€æ®µåŒºé—´å†…æœ‰å¤šå°‘æ•°æ˜¯èŒæ•°ã€‚</p>
<p>èŒæ•°ï¼šå­˜åœ¨é•¿åº¦è‡³å°‘ä¸º 2 çš„å›æ–‡å­ä¸²ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦è€ƒè™‘å­˜åœ¨å¤šå°‘é•¿åº¦ä¸º 2 æˆ–è€…é•¿åº¦ä¸º 3 çš„å­ä¸²å³å¯ã€‚</p>
<p>ç”±äºæ­£ç€è€ƒè™‘å¤ªéº»çƒ¦äº† <del>å…¶å®å°±æ˜¯æ‡’å¾—è€ƒè™‘</del></p>
<p>æ‰€ä»¥æˆ‘ä»¬åå‘è€ƒè™‘ï¼Œåˆ¤æ–­è¿™æ®µåŒºé—´å†…å­˜åœ¨å¤šå°‘æ²¡æœ‰å›æ–‡å­ä¸²çš„æ•°ï¼Œç„¶åå–ä¸ªè¡¥é›†å³å¯ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦è®°å½•ä¸Šä¸€ä¸ªæ•°ï¼Œä¸Šä¸Šä¸ªæ•°ï¼Œä»¥åŠæ˜¯å¦å¤„äºå‰å¯¼é›¶çŠ¶æ€ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MOD = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line">LL f[<span class="number">1010</span>][<span class="number">11</span>][<span class="number">11</span>];</span><br><span class="line"><span class="type">int</span> a[<span class="number">1010</span>];</span><br><span class="line">string l, r;</span><br><span class="line"><span class="type">int</span> len;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(string x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> le = x.<span class="built_in">length</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>; i &lt; le; i++)</span><br><span class="line">        <span class="keyword">if</span>(x[i] == x[i - <span class="number">1</span>] || (x[i] == x[i - <span class="number">2</span>]))</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">// ä¸æ˜¯</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">dfs</span><span class="params">(<span class="type">int</span> pos, <span class="type">bool</span> limit, <span class="type">bool</span> lead, <span class="type">int</span> pre, <span class="type">int</span> prpre)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!pos) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">auto</span> &amp;now = f[pos][pre][prpre];</span><br><span class="line">    <span class="keyword">if</span>(~now &amp;&amp; !limit &amp;&amp; !lead &amp;&amp; pre != <span class="number">-1</span> &amp;&amp; prpre != <span class="number">-1</span>) <span class="keyword">return</span> now;</span><br><span class="line">    <span class="type">int</span> up = limit ? a[pos] : <span class="number">9</span>;</span><br><span class="line">    LL res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= up; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(i != pre &amp;&amp; i != prpre &amp;&amp; !lead)</span><br><span class="line">        &#123;</span><br><span class="line">            res = (res + <span class="built_in">dfs</span>(pos - <span class="number">1</span>, limit &amp;&amp; i == up, <span class="literal">false</span>, i, pre)) % MOD;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(lead)</span><br><span class="line">        &#123;</span><br><span class="line">            res = (res + <span class="built_in">dfs</span>(pos - <span class="number">1</span>, limit &amp;&amp; i == up, i == <span class="number">0</span>, ((i == <span class="number">0</span>) ? <span class="number">-1</span> : i), <span class="number">-1</span>)) % MOD;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!limit &amp;&amp; !lead &amp;&amp; pre != <span class="number">-1</span> &amp;&amp; prpre != <span class="number">-1</span>) now = res;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">solve</span><span class="params">(string x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">-1</span>, <span class="built_in">sizeof</span>(f));</span><br><span class="line">    len = x.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= len; i++)</span><br><span class="line">        a[i] = x[len - i] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dfs</span>(len, <span class="literal">true</span>, <span class="literal">true</span>, <span class="number">-1</span>, <span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; l &gt;&gt; r;</span><br><span class="line">    LL temp1 = <span class="number">0</span>, temp2 = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;i : l)</span><br><span class="line">    &#123;</span><br><span class="line">        temp1 = ((temp1 * <span class="number">10</span> % MOD) + i - <span class="string">&#x27;0&#x27;</span>) % MOD;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;i : r)</span><br><span class="line">    &#123;</span><br><span class="line">        temp2 = ((temp2 * <span class="number">10</span> % MOD) + i - <span class="string">&#x27;0&#x27;</span>) % MOD;</span><br><span class="line">    &#125;</span><br><span class="line">    LL temp = ((<span class="built_in">solve</span>(r) - <span class="built_in">solve</span>(l) + <span class="built_in">check</span>(l) + MOD) % MOD);</span><br><span class="line">    <span class="comment">// cout &lt;&lt; solve(r) &lt;&lt; endl;</span></span><br><span class="line">    <span class="comment">// cout &lt;&lt; temp &lt;&lt; endl;</span></span><br><span class="line">    cout &lt;&lt; (((temp2 - temp1 + <span class="number">1</span>) % MOD - temp) % MOD + MOD) % MOD &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="6754"><a href="#6754" class="headerlink" title="6754"></a><a class="link"   href="https://www.luogu.com.cn/problem/P6754" >6754<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h3><p>ä¸Šä¸€é“é—®é¢˜çš„å­é—®é¢˜ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a[<span class="number">22</span>];</span><br><span class="line">LL f[<span class="number">22</span>][<span class="number">10</span>][<span class="number">10</span>];</span><br><span class="line"><span class="type">int</span> len;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">dfs</span><span class="params">(<span class="type">int</span> pos, <span class="type">bool</span> limit, <span class="type">bool</span> lead, <span class="type">int</span> pre, <span class="type">int</span> prpre)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!pos) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">auto</span> &amp;now = f[pos][pre][prpre];</span><br><span class="line">    <span class="keyword">if</span>(!limit &amp;&amp; !lead &amp;&amp; pre != <span class="number">-1</span> &amp;&amp; prpre != <span class="number">-1</span> &amp;&amp; ~now) <span class="keyword">return</span> now;</span><br><span class="line">    <span class="type">int</span> up = limit ? a[pos] : <span class="number">9</span>;</span><br><span class="line">    LL res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= up; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(!lead &amp;&amp; i != pre &amp;&amp; i != prpre)</span><br><span class="line">            res += <span class="built_in">dfs</span>(pos - <span class="number">1</span>, limit &amp;&amp; i == up, <span class="literal">false</span>, i, pre);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(lead)</span><br><span class="line">            res += <span class="built_in">dfs</span>(pos - <span class="number">1</span>, limit &amp;&amp; i == up, i == <span class="number">0</span>, (i == <span class="number">0</span>) ? <span class="number">-1</span> : i, <span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!limit &amp;&amp; !lead &amp;&amp; pre != <span class="number">-1</span> &amp;&amp; prpre != <span class="number">-1</span>) now = res;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">solve</span><span class="params">(LL x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">-1</span>, <span class="built_in">sizeof</span>(f));</span><br><span class="line">    len = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(x)</span><br><span class="line">    &#123;</span><br><span class="line">        a[++len] = x % <span class="number">10</span>;</span><br><span class="line">        x /= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dfs</span>(len, <span class="literal">true</span>, <span class="literal">true</span>, <span class="number">-1</span>, <span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    LL l, r;</span><br><span class="line">    cin &gt;&gt; l &gt;&gt; r;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">solve</span>(r) - <span class="built_in">solve</span>(l - <span class="number">1</span>) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="è´ªå¿ƒ"><a href="#è´ªå¿ƒ" class="headerlink" title="è´ªå¿ƒ"></a>è´ªå¿ƒ</h1><h2 id="P3698"><a href="#P3698" class="headerlink" title="P3698"></a><a class="link"   href="https://www.luogu.com.cn/problem/P3698" >P3698<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h2><p>é¦–å…ˆï¼Œè¿™æ˜¯æ£µæ ‘ï¼Œå¯¹äºè¿™æ£µæ ‘æˆ‘ä»¬è¿›è¡Œ DFSï¼Œæ‰¾åˆ°ä»æ ¹èŠ‚ç‚¹å¼€å§‹æœ€é•¿çš„ä¸€æ¡é“¾ï¼Œå¦‚æœå¯ä»¥å°±ä¸€ç›´èµ°è¿™ä¸ªé“¾ï¼Œå¦‚æœæœ‰å¤šçš„æ­¥æ•°ï¼Œæˆ‘ä»¬åœ¨ä¸­é—´æŸä¸ªä½ç½®ï¼Œæ¯å¤šèŠ±ä¸¤æ­¥å°±å¯ä»¥å¤šèµ°ä¸€ä¸ªç‚¹ï¼Œæ³¨æ„ä¸æ€»ç‚¹æ•°å– minã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">101</span>;</span><br><span class="line"><span class="type">int</span> fir[N];</span><br><span class="line"><span class="type">int</span> edcnt;</span><br><span class="line"><span class="type">int</span> m,n,maxdep;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> nxt,to;</span><br><span class="line">&#125;e[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[++edcnt].to=v;</span><br><span class="line">    e[edcnt].nxt=fir[u];</span><br><span class="line">    fir[u]=edcnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> fa,<span class="type">int</span> dep)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    maxdep=<span class="built_in">max</span>(maxdep,dep);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=fir[u];i;i=e[i].nxt)</span><br><span class="line">        <span class="keyword">if</span>(e[i].to!=fa)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> v=e[i].to;</span><br><span class="line">            <span class="built_in">dfs</span>(v,u,dep<span class="number">+1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;m,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m<span class="number">-1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> a,b;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;a,&amp;b);</span><br><span class="line">        <span class="built_in">add</span>(a,b);</span><br><span class="line">        <span class="built_in">add</span>(b,a);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">0</span>,<span class="number">-1</span>,<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span>(n&lt;=maxdep) <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,n<span class="number">+1</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,<span class="built_in">min</span>(m,maxdep<span class="number">+1</span>+(n-maxdep)/<span class="number">2</span>));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="å‰ç¼€å’Œ"><a href="#å‰ç¼€å’Œ" class="headerlink" title="å‰ç¼€å’Œ"></a>å‰ç¼€å’Œ</h1><h2 id="CF1872E"><a href="#CF1872E" class="headerlink" title="CF1872E"></a><a class="link"   href="https://codeforces.com/contest/1872/problem/E" >CF1872E<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h2><p>é¢˜æ„ï¼š</p>
<p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„æ•°ç»„å’Œä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„äºŒè¿›åˆ¶ä¸² $s$ï¼Œç°æœ‰ä¸¤ä¸ªæ“ä½œï¼š</p>
<ol>
<li><code>1 l r</code>ï¼Œè¡¨ç¤ºå°† $l \le i \le r$ çš„æ‰€æœ‰ $s_i$ å–åï¼ˆ$0$ å˜ $1$ï¼Œ$1$ å˜ $0$ï¼‰ï¼›</li>
<li><code>2 g</code>$(g\in {0,1})$ï¼Œè¡¨ç¤ºå°†æ‰€æœ‰ $s_i&#x3D;g$ çš„ $a_i$ æ±‚å¼‚æˆ–å’Œï¼›</li>
</ol>
<p>$1\le n\le 10^5,1\le t\le 10^4$.</p>
<p>é¦–å…ˆè®°å½•ä¸‹åˆå§‹æ—¶æ‰€æœ‰ 1 ä½ç½®çš„å¼‚æˆ–å’Œï¼Œè®°ä¸º ans1ï¼Œè®°å½•æ‰€æœ‰ 0 ä½ç½®çš„å¼‚æˆ–å’Œï¼Œè®°ä¸º ans0ï¼Œç„¶åå¯¹äºæ¯ä¸€ä¸ª 1 æ“ä½œï¼Œæˆ‘ä»¬éƒ½è¦å¯¹ ans1 å’Œ ans0 è¿›è¡Œå¼‚æˆ–ä¸€ä¸ªåŒºé—´å’Œï¼Œè€Œè¿™ä¸ªåŒºé—´å’Œå¯ä»¥é€šè¿‡é¢„å¤„ç†å‰ç¼€å¼‚æˆ–å’Œæ¥è§£å†³ã€‚</p>
<p>è¿™é‡Œç†Ÿæ‚‰ä¸€ä¸‹ bitset çš„ä½¿ç”¨ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">7</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;t);</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">    &#123;</span><br><span class="line">        LL ans0 = <span class="number">0</span>, ans1 = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> n, q;</span><br><span class="line">        LL sum[N] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">        string s;</span><br><span class="line">        <span class="type">int</span> a[N];</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]), sum[i] = sum[i - <span class="number">1</span>] ^ a[i];</span><br><span class="line">        cin &gt;&gt; s;</span><br><span class="line">        <span class="built_in">reverse</span>(s.<span class="built_in">begin</span>(), s.<span class="built_in">end</span>());</span><br><span class="line">        <span class="function">bitset&lt;N&gt; <span class="title">a2</span><span class="params">(s)</span></span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = a<span class="number">2.</span>_Find_first(); i != a<span class="number">2.</span><span class="built_in">size</span>(); i = a<span class="number">2.</span>_Find_next(i))</span><br><span class="line">            ans1 ^= a[i + <span class="number">1</span>];</span><br><span class="line">        ans0 = sum[n] ^ ans1;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;q);</span><br><span class="line">        <span class="keyword">while</span>(q--)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> op;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;op);</span><br><span class="line">            <span class="keyword">if</span>(op == <span class="number">1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">int</span> l, r;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;l, &amp;r);</span><br><span class="line">                ans0 ^= sum[r] ^ sum[l - <span class="number">1</span>];</span><br><span class="line">                ans1 ^= sum[r] ^ sum[l - <span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">int</span> k;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;k);</span><br><span class="line">                <span class="keyword">if</span>(k == <span class="number">0</span>) cout &lt;&lt; ans0 &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">                <span class="keyword">else</span> cout &lt;&lt; ans1 &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="æ¨å¯¼-æ„é€ "><a href="#æ¨å¯¼-æ„é€ " class="headerlink" title="æ¨å¯¼ &amp; æ„é€ "></a>æ¨å¯¼ &amp; æ„é€ </h1><h2 id="CF1862E"><a href="#CF1862E" class="headerlink" title="CF1862E"></a><a class="link"   href="https://codeforces.com/contest/1862/problem/E" >CF1862E<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h2><p>è®¾ä»–åœ¨ $i_1,i_2,i_3,\dots,i_k$ è¿™äº›å¤©å»çœ‹ç”µå½±ï¼Œé‚£ä¹ˆå¾—åˆ°çš„ä»·å€¼å°±æ˜¯ï¼š</p>
<p>$$<br>\begin{gather}<br>a_{i_1}-d\cdot{i_1}+a_2-d\cdot(i_2-i_1)+\dots+a_{i_k}-d\cdot(i_k-i_{k-1})\&#x3D;(a_{i_1}+a_{i_2}+\dots+a_{i_k})-d\cdot{i_{k}}<br>\end{gather}<br>$$</p>
<p>æ‰€ä»¥å°±å¯ä»¥æšä¸¾æœ€åä¸€å¤©å»çœ‹çš„ç”µå½±ï¼Œç„¶åè®°å½•å‰ $m-1$ å¤§çš„å¤§äºé›¶çš„ä»·å€¼ï¼Œç”¨å †æˆ–è€… <code>multiset</code> ç»´æŠ¤å³å¯ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">2e5</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m, d;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;t);</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> a[N], ans = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;n, &amp;m, &amp;d);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">        set&lt;pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; &gt; s;</span><br><span class="line">        <span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> cur = sum + a[i] - d * i;</span><br><span class="line">            ans = <span class="built_in">max</span>(ans, cur);</span><br><span class="line">            <span class="keyword">if</span>(a[i] &gt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                s.<span class="built_in">insert</span>(&#123;a[i], i&#125;);</span><br><span class="line">                sum += a[i];</span><br><span class="line">                <span class="keyword">if</span>((<span class="type">int</span>)s.<span class="built_in">size</span>() &gt;= m)</span><br><span class="line">                &#123;</span><br><span class="line">                    sum -= (*s.<span class="built_in">begin</span>()).first;</span><br><span class="line">                    s.<span class="built_in">erase</span>(s.<span class="built_in">begin</span>());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="CF1860C"><a href="#CF1860C" class="headerlink" title="CF1860C"></a><a class="link"   href="https://codeforces.com/problemset/problem/1860/C" >CF1860C<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></h2><p>ç»å…¸æ„é€ é¢˜ã€‚</p>
<p>æˆ‘ä»¬ä¸ºæ¯ä¸ªä½ç½®å®šä¹‰ä¸¤ç§çŠ¶æ€ï¼šå¿…èƒœçŠ¶æ€å’Œå¿…è´¥çŠ¶æ€ï¼›</p>
<ul>
<li>å¿…èƒœçŠ¶æ€ï¼šåœ¨å®ƒå‰é¢å¯ä»¥é€‰æ‹©çš„çŠ¶æ€éƒ½æ˜¯å¿…è´¥çŠ¶æ€ã€‚</li>
<li>å¿…è´¥çŠ¶æ€ï¼šå‰é¢æ²¡æœ‰å¯ä»¥é€‰æ‹©çš„çŠ¶æ€æˆ–è€…å‰é¢å­˜åœ¨å¯ä»¥é€‰æ‹©çš„å¿…èƒœçŠ¶æ€ã€‚</li>
</ul>
<p>ç„¶åæˆ‘ä»¬åˆ¤æ–­çŠ¶æ€æ—¶åªéœ€è¦åˆ¤æ–­æ˜¯å¦å‰é¢æœ‰æœ€å°çš„å¿…èƒœçŠ¶æ€å³å¯ï¼Œå› ä¸ºå‡å¦‚æœ€å°çš„å¿…èƒœçŠ¶æ€éƒ½å¤§äºå½“å‰çŠ¶æ€ï¼Œé‚£ä¹ˆå½“å‰ä½ç½®çš„å‰é¢ä¸å­˜åœ¨å¯é€‰çš„å¿…èƒœçŠ¶æ€ã€‚</p>
<p>ç„¶åçº¿æ€§é€’æ¨å³å¯ã€‚</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">3e5</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;t);</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> n; </span><br><span class="line">        <span class="type">int</span> p[N];</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;p[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> w = n + <span class="number">1</span>, ww = n + <span class="number">1</span>; <span class="comment">// å¯é€‰çŠ¶æ€ å¿…èƒœçŠ¶æ€</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(w &lt; p[i] &amp;&amp; p[i] &lt; ww) <span class="comment">// å‰é¢æœ‰å¯é€‰çŠ¶æ€ä¸”æ²¡æœ‰å¿…èƒœçŠ¶æ€</span></span><br><span class="line">            &#123;</span><br><span class="line">                ans++;</span><br><span class="line">                ww = p[i]; <span class="comment">// æ›´æ–°å¿…èƒœçŠ¶æ€çš„æœ€å°å€¼</span></span><br><span class="line">            &#125;</span><br><span class="line">            w = <span class="built_in">min</span>(w, p[i]); <span class="comment">// æ›´æ–°å¯é€‰çŠ¶æ€çš„æœ€å°å€¼</span></span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>ACM</category>
      </categories>
      <tags>
        <tag>Problem</tag>
      </tags>
  </entry>
</search>
